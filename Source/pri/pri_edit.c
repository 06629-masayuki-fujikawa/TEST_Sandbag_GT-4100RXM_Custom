/*[]---------------------------------------------------------------------------[]*/
/*|		ﾌﾟﾘﾝﾀｰ制御部：印字ﾃﾞｰﾀ編集処理											|*/
/*|																				|*/
/*|	ﾌｧｲﾙ名称	:	Pri_Edit.c													|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author		: K.Motohashi													|*/
/*|	Date		: 2005-07-19													|*/
/*|	UpDate		:																|*/
/*|																				|*/
/*[]--------------------------------------- Copyright(C) 2005 AMANO Corp.------[]*/
#include	<string.h>
#include	<stdio.h>
#include	"system.h"
#include	"mem_def.h"
#include	"Message.h"
#include	"prm_tbl.h"
#include	"rkn_def.h"
#include	"rkn_cal.h"
#include	"ope_def.h"
#include	"LKmain.h"
#include	"LKcom.h"
#include	"flp_def.h"
#include	"cnm_def.h"
#include	"AppServ.h"
#include	"fla_def.h"
#include	"Pri_def.h"
#include	"strdef.h"
#include	"mnt_def.h"
#include	"rkn_fun.h"
#include	"suica_def.h"
// MH321800(S) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
//#include	"edy_def.h"
// MH321800(E) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
#include	"IFM.h"
#include	"ntnet.h"
#include	"ntnet_def.h"
#include	"extern_Etherdata.h"
#include	"cre_ctrl.h"
// 不具合修正(S) K.Onodera 2016/10/26 #1506 分類集計で分類によってあり得ないはずの不明台数が印字されるケースがある
#include	"ifm_ctrl.h"
// 不具合修正(E) K.Onodera 2016/10/26 #1506 分類集計で分類によってあり得ないはずの不明台数が印字されるケースがある
// GG124100(S) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない
#include	"cal_cloud.h"
// GG124100(E) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない
// GG129000(S) H.Fujinaga 2022/12/05 ゲート式車番チケットレスシステム対応（QR駐車券対応）
#include	"aes_sub.h"
// GG129000(E) H.Fujinaga 2022/12/05 ゲート式車番チケットレスシステム対応（QR駐車券対応）
// GG129000(S) H.Fujinaga 2023/01/04 ゲート式車番チケットレスシステム対応（発券情報印字対応）
#include 	<trmacro.h>
// GG129000(E) H.Fujinaga 2023/01/04 ゲート式車番チケットレスシステム対応（発券情報印字対応）

//----------------------------------------------------------------------------------------------
// 料金設定プリントデータ
//----------------------------------------------------------------------------------------------
/* define */
#define		CHARGE_CARKINDMAX		12		// 料金設定(車種)
#define		CHARGE_SYSMAX			9		// 料金設定(料金体系)
#define		CHARGE_TYPEMAX			6		// 料金設定(料金帯)
#define		LOST_TYPEMAX			4		// 紛失料金種別
#define		PATTERN_MAX				12		// 料金設定(逓減第nパターン)
#define		CHARGE_DAYOFWEEKMAX		11		// 料金設定(曜日・特別日・特別期間)
#define		PASS_KINDMAX			15		// 定期設定(定期種別)
#define		SIRVICE_NUMMAX			15		// サービス券設定(券No)
// MH810104(S) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5793 多店舗割引店№999対応
// #define		STORE_NUMMAX			100		// 店割引設定(店No)
// #define		STORES_NUMMAX			255		// 多店舗割引設定(店No)
// #define		STORES_KINDMAX			7		// 多店舗割引設定(種別)
#define		STORE_NUMMAX	MISE_NO_CNT		// 店割引設定(店No)
#define		STORES_NUMMAX	T_MISE_NO_CNT	// 多店舗割引設定(店No)
#define		STORES_KINDMAX	T_MISE_SYU_CNT	// 多店舗割引設定(種別)
// MH810104(E) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5793 多店舗割引店№999対応
#define		INPORT_NUM_MAX	100				// 入力端子
#define		OUTPORT_NUM_MAX	100				// 出力端子

// MH810100(S) Y.Yamauchi 2020/02/17 車番チケットレス（預り証印字修正）
#define	CAR_ID_PRI_CNT_MAX	18				// 車番データID（１行に収める文字数）
// MH810100(E) Y.Yamauchi 2020/02/17 車番チケットレス（預り証印字修正）

/* enum */
enum {
	HOUR = 0,	// 時間
	MIN,		// 分
	_TIME,		// MAX
};
/* 料金設定プリント基本設定の印字項目 */
enum {
	SERVICE_TIME = 0,		// ｻｰﾋﾞｽタイム
	GRACE_TIME,				// グレースタイム
	LAG_TIME,				// ラグタイム
	FLAP_ROCK_TIME,			// フラップ上昇タイマー
	EXT_TIME_SEI,			// タイマー内精算
	RYO_CAL_TYPE,			// 料金計算方式
	LOST_CHARGE_TYPE,		// 紛失料金
	LOST_CHARGE_BASE,		// 紛失料金
	LOST_CHARGE_CHANGE1,	// 紛失料金
	LOST_CHARGE_CHANGE2,	// 紛失料金
	LOST_CHARGE_CHANGE3,	// 紛失料金
	CONS_TAX_RATIO,			// 消費税率
	
	// 新規に追加する場合はここより上に追加
	CHARGE_BASEDATAMAX
};

enum {
	C_TITLE_SET = 0,		// タイトル
	C_SOFTVER,				// SoftWare
	C_BASE_SET,				// 基本設定
	C_CAR_SET,				// 車種設定
	C_PAS_SET,				// 定期設定
	C_DIS_S_SET,			// サービス券設定
	C_DIS_M_SET,			// 店割引　or　多店舗割引設定
	C_PREPAID_SET,			// ﾌﾟﾘﾍﾟｲﾄﾞ設定
// MH810100(S) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）	
//	C_UKETUKE_SET,			// 駐車証明書設定
// MH810100(E) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）	
	C_VOL_SET,				// 音量設定
	C_SPLDAY_SET,			// 特別日設定
	C_HOOT_SET,				// フッター
	C_IN_OUT_SET,			// 入出力端子
	C_ARCNET_SET,			// Module Software
// MH810100(S) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）	
//	C_LOCK_PRA_SET,			// 車室ﾊﾟﾗﾒｰﾀ
// MH810100(E) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）	
// MH810105(S) MH364301 インボイス対応
	C_INVOICE_SET,			// インボイス
// MH810105(E) MH364301 インボイス対応
	C_STAMP_MARK,			// 検収、担当マーク
	
	// 新規に追加する場合はここより上に追加
	C_ITEMMAX
};

/* typedef struct */
// 基本設定
typedef struct {
	ushort	service_time;								// サービスタイム(29-0002④⑤⑥=000～720)
	ushort	grace_time;									// グレースタイム(29-0003④⑤⑥=000～120)
	ushort	lag_time;									// ラグ(リペイ)タイム(29-0004④⑤⑥=000～120)
	uchar	cal_type;									// 料金計算方式(28-0001⑥=0:昼夜帯、1:逓減帯)
	uchar	lostcharge_type[LOST_TYPEMAX];				// 紛失料金取り方(28-0003③④=00:使用しない、01:固定料金、02:指定時刻)
	uchar	lostcharge_kind[LOST_TYPEMAX];				// 紛失料金料金種別(28-0003⑤⑥=00:使用しない、01～12:A～L種)
	uchar	lost_time[_TIME][LOST_TYPEMAX];				// 紛失料金データ(時間)(28-0004,6,8③～⑥=0000～2359)
	ulong	lostcharge_data[LOST_TYPEMAX];				// 紛失料金データ(料金)(28-0004,6,8①～⑥=000000～999990)
	ushort	tax[2];										// 消費税(28-0019③～⑥=0001～9999,0:なし)
	uchar	tax_type;									// 税方式(28-0020⑥=0,1:内税、2,3:外税)
	uchar	billkind_set[SIHEI_SYU_CNT];				// 紙幣金種別受付禁止設定(19-0061	③(\10000)=0:禁止/1:許可
														//									④(\ 5000)=0:禁止/1:許可
														//									⑤(\ 2000)=0:禁止/1:許可
														//									⑥(\ 1000)=0:禁止/1:許可)
	ushort	flap_up_min;								// ﾌﾗｯﾌﾟ上昇ﾀｲﾏｰ
	ushort	flap_up_sec;								// ﾌﾗｯﾌﾟ上昇ﾀｲﾏｰ
	uchar	in_up_time_sei;								// フラップ上昇・ロック閉タイマー内で精算 有り/無し
	uchar	ext_lagtime_sei;							// ラグタイム延長 有り/無し
	ushort	lock_close_min;								// ロック閉ﾀｲﾏｰ（分）
	ushort	lock_close_sec;								// ロック閉ﾀｲﾏｰ（秒）
	uchar	lagtimeup_incount;					// ラグタイムアップ後の再入庫
	uchar	ryo_after_lagtimeup;				// ラグタイムアップ後の課金方式
	uchar	ryo_after_tei;						// 時間割引/定期後の課金方式
	uchar	in_count;							// 入庫カウント
	uchar	out_count;							// 出庫カウント
	ushort	flap_incount_timer;					// フラップ入庫判定タイマー
	ushort	lock_incount_timer;					// ロック装置入庫判定タイマー
} CHARGE_BASEDATA;
// 料金設定
typedef struct {
	ulong	max_charge;									// 絶対最大料金(31-0061①～⑥=000000～999990)
	ulong	chargemax_day1;								// 日毎最大料金(第１)(31-0062①～⑥=000000～999990)
	ulong	chargemax_day2;								// 日毎最大料金(第２)(31-0063①～⑥=000000～999990)
	ulong	charge_range_max[6];						// 時間帯最大（第１～第６）(31-0076～31-0080・31-0063)
	ushort	discount;									// 割引時間・割引対象期間の設定
	uchar	dis_time[_TIME];							// 割引時間(06-0001～③～⑥=0000～9959)
	uchar	target_Stime[_TIME];						// 割引対象期間(開始)(31-0001～③～⑥=0000～2359)
	uchar	target_Etime[_TIME];						// 割引対象期間(終了)(31-0002～③～⑥=0000～2359)
	uchar	mnight_use;									// 深夜帯使用(31-0003～⑥=0:使用なし、1:使用あり)
	uchar	repeat_cnt;									// 繰り返し回数(31-0010～⑤⑥=0:最後まで繰り返す、1～99:回数)
	uchar	reg_Stime[_TIME];							// 逓減帯開始時刻(31-0004～③～⑥=0000～2359)
	uchar	reg_Etime[_TIME];							// 逓減帯終了時刻(31-0004～③～⑥=0000～2359)
	uchar	mnight_Stime[_TIME];						// 深夜帯開始時刻(31-0006～③～⑥=0000～2359)
	uchar	mnight_Etime[_TIME];						// 深夜帯終了時刻(31-0006～③～⑥=0000～2359)
	ulong	mnight_charge;								// 深夜帯料金(31-0063～②～⑥=00000～99990)
	uchar	reg_repeat_time[_TIME];						// 逓減帯重複時間(31-0005～④～⑥=000～959)
	uchar	mnight_repeat_time[_TIME];					// 深夜帯重複時間(31-0007～④～⑥=000～959)
	/* 車種毎の設定は構造体を分ける */
} CHARGE_SYS;
typedef struct {
	ushort	service_time;								// サービスタイム(29-0005④⑤⑥=000～720)
	ushort	grace_time;									// グレースタイム(29-0006④⑤⑥=000～120)
	ushort	lag_time;									// ラグタイム(29-0007④⑤⑥=000～120)
	ushort	flap_up_min;								// ﾌﾗｯﾌﾟ上昇ﾀｲﾏｰ（分）
	ushort	flap_up_sec;								// ﾌﾗｯﾌﾟ上昇ﾀｲﾏｰ（秒）
	ushort	lock_close_min;								// ロック閉ﾀｲﾏｰ（分）
	ushort	lock_close_sec;								// ロック閉ﾀｲﾏｰ（秒）
	uchar	in_up_time_sei;								// フラップ上昇・ロック閉タイマー内で精算 有り/無し
	uchar	ext_lagtime_sei;							// ラグタイム延長 有り/無し
	uchar	lagtimeup_incount;					// ラグタイムアップ後の再入庫
	uchar	ryo_after_lagtimeup;				// ラグタイムアップ後の課金方式
	uchar	ryo_after_tei;						// 時間割引/定期後の課金方式
	uchar	in_count;							// 入庫カウント
	uchar	out_count;							// 出庫カウント
	ushort	flap_incount_timer;					// フラップ入庫判定タイマー
	ushort	lock_incount_timer;					// ロック装置入庫判定タイマー	
} CHARGE_CARKIND;
// 料金帯
typedef struct {
	uchar		start_time[_TIME];						// 開始時刻(31-0004,8,12,16,20,24④⑤⑥=0000～2359)
	uchar		end_time[_TIME];						// 開始時刻(31-0004,8,12,16,20,24④⑤⑥=0000～2359)
	uchar		base_time[_TIME];						// 基本時間(31-0006,10,14,18,22,26④⑤⑥=000:一定料金帯、001～959)
	uchar		add_time[_TIME];						// 追加時間(31-0007,11,15,19,23,27④⑤⑥=000:一定料金帯、001～959)
	uchar		repeat_sys;								// 重複方式(31-0005,9,13,17,21,25③=0:(1)A(2)B, 1:(1)B(2)A)
	uchar		repeat_time[_TIME];						// 重複時間(31-0005,9,13,17,21,25④⑤⑥=000～959)
	ulong		base_charge;							// 基本料金(31-0064～②～⑥=00000～99990)
	ulong		add_charge;								// 追加料金(31-0065～②～⑥=00000～99990)
	ushort		fixed_charge;							// 一定料金帯フラグ(基本時間 || 追加時間が０の時)
} CHARGE_TYPE;
// パターン
typedef struct {
	uchar		pattern_time[_TIME];					// 単位時間(31-0011～③～⑥=0000～9959)
	ushort		pattern_cnt;							// 単位係数(31-0012～③～⑥=0:最後まで、0001～9999)
	ulong		pattern_charge;							// 単位料金(31-0064～②～⑥=00000～99990)
} CHARGE_REGTYPE;
// 定期種別
typedef struct {
	short	pass_kind;									// 定期種別(07-0001⑤⑥=0:未使用/1:時間帯定期(全日定期含む)/2:割引時間定期/3～14:種別切替定期(A～L種))
	uchar	status_check;								// 入出チェック(07-0002⑥=0:しない、1:通信、2:カード、3:通信&カード、4:時刻比較)
	uchar	charge_kind;								// 料金種別(07-0003⑤⑥=1～12:A～L種)
	uchar	outcar_cnt;									// 出庫台数カウント(07-0004⑥=0:しない、1:現在台数1、2:現在台数2)
	uchar	cnt_signal;									// カウント信号(07-0004⑤=0:出庫信号1、1:出庫信号2、2:出庫信号1,2、3:出力なし)
	uchar	read_write;									// リードライトモード(07-0008⑥=0:リードライト、1:リードオンリー)
	uchar	expire;										// 期限切れ受付(07-0005⑥=0:しない、1:する)
	uchar	indefinite;									// 無期限設定(07-0005⑤=0:しない、1:無期限(する)、2:開始日のみ、3:終了日のみ))
	uchar	collect;									// 定期券回収(07-0005④=0:しない、1:期限切れのみ、2:すべて)
	uchar	suspend_mode;								// 保留モード(07-0008⑤=0:保留しない、1:リーダー内に保留)
	uchar	sys_priflag[CHARGE_SYSMAX];					// 料金体系印字フラグ
	uchar	start_time[CHARGE_SYSMAX][_TIME];			// 開始時刻(割引時間)(30-0001③～⑥～=0000～2359(9959))
	uchar	end_time[CHARGE_SYSMAX][_TIME];				// 終了時刻(30-0002③～⑥～=0000～2359)
} sPASS_DATA;
// サービス券設定
// 店割引設定
// 多店舗割引設定
typedef struct {
	long	kind;										// 割引役割(⑥=0:未使用、1:時間割引、2:料金割引、3:全額割引)
	ushort	data;										// 割引データ(③～⑥料金割引=0000～9990/全額割引=0000)
	uchar	time[_TIME];								// 割引データ(③～⑥時間割引=0000～9959)
	long	kind_change;								// 割引種別切替(⑤⑥=0:なし、1～12:車種A～Lに切替)
} CHARGE_DISCOUNTDATA;
// 料金設定
typedef struct {
// 料金設定共通
	uchar 	carkind_useflag;							// 車種の使用有無
	uchar 	sys_useflag[CHARGE_SYSMAX];					// 第n料金体系の使用有無
	uchar 	type_useflag[CHARGE_TYPEMAX*CHARGE_SYSMAX];	// 第n料金帯の使用有無 * 第1-3料金体系
	uchar 	discount_useflag;							// 定期・割引券の使用有無
	uchar	day_of_week[CHARGE_DAYOFWEEKMAX];			// 使用曜日
// 車種設定
	uchar	daymax_type;								// 日毎最大料金タイプ(28-000⑥=0:なし/1:入庫時間最大/2:時刻指定日毎最大/3:2種類の時刻指定日毎最大)
	uchar	daymax_hour;								// 入庫時間最大の時間(28-0013⑥=0:24、1:12、2:6時間)
	uchar	daymax_cnt;									// 入庫時間最大の回数
	uchar	daymax_maxtime1;								// 最大料金時間１
	uchar	daymax_maxtime2;								// 最大料金時間２
	uchar	cal_kind;									// 料金計算方式(28-0001⑥=0:昼夜帯、1:逓減帯)
	uchar	repeat_end;									// 繰り返し終了
	uchar	pattern_start;								// 繰り返し開始パターン(31-0008⑤⑥～=1～11(逓減第ｎパターン))
	uchar	pattern_end;								// 繰り返し終了パターン(31-0009⑤⑥～=1～11(逓減第ｎパターン))
// 定期設定
	uchar	pass_check;									// 定期券チェック(アンチパス)(個別パラメーター:01-0003=0:する、1=しない)
	long	pass_first;									// 初回定期(05-0008⑥=0:読まない、1=読む)
	uchar	samepass_time;								// 同一カード連続利用禁止時間(05-0009⑤⑥=0:しない、1～99分)
	uchar	outcar_cnt;									// 現在台数カウント(06-0002⑥=0:しない、1:現在台数1、2:現在台数2)
	uchar	cnt_signal;									// カウント信号(06-0002⑤=0:出庫信号1、1:出庫信号2、2:出庫信号1,2、3:出力なし)
} CHARGE_CTRL;
CHARGE_CTRL	charge_ctrl;		// 料金設定関連
/* prototype function */
static	void	ChargeSetup_edit_Title(uchar titlekind, uchar pri_kind, PRN_PROC_DATA *p_proc_data);										// 料金設定プリント:ﾀｲﾄﾙ編集
static	void	ChargeSetup_edit_TimeTitle(ushort Kikai_no, ulong oiban, ushort kakari_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data);
static	void	ChargeSetup_edit_SoftVer(uchar pri_kind, PRN_PROC_DATA *p_proc_data);														// 料金設定プリント:ソフトウェアバージョン
static	void	ChargeSetup_edit_BaseData(uchar pri_kind, PRN_PROC_DATA *p_proc_data);														// 料金設定プリント:基本設定ﾃﾞｰﾀ編集
static	void	ChargeSetup_edit_ChargeData(uchar kind, uchar type);																		// 料金設定プリント:料金設定ﾃﾞｰﾀ使用の有無の取得
static	void	ChargeSetup_edit_ChargeSysData(uchar sys, uchar carkind, uchar pri_kind, PRN_PROC_DATA *p_proc_data);						// 料金設定プリント:料金設定ﾃﾞｰﾀ編集(料金体系)
static	void	ChargeSetup_edit_ChargeTypeData(uchar sys, uchar type, uchar carkind, uchar pri_kind, PRN_PROC_DATA *p_proc_data);			// 料金設定プリント:料金設定ﾃﾞｰﾀ編集(料金帯)
static	void	ChargeSetup_edit_ChargePatternData(uchar sys, uchar pattern, uchar carkind, uchar pri_kind, PRN_PROC_DATA *p_proc_data);	// 料金設定プリント:料金設定ﾃﾞｰﾀ編集(パターン)
static	void	ChargeSetup_edit_PassData(uchar pri_kind, PRN_PROC_DATA *p_proc_data);														// 料金設定プリント:定期設定ﾃﾞｰﾀ編集
static	void	ChargeSetup_edit_PassKindData(uchar kind, uchar pri_kind, PRN_PROC_DATA *p_proc_data);										// 料金設定プリント:定期種別設定ﾃﾞｰﾀ編集
// MH810100(S) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）	
//static	void	ChargeSetup_LockNoEdit(uchar car_kind, uchar pri_kind, PRN_PROC_DATA *p_proc_data);
//static	void	ChargeSetup_LockNo_edit_id( ushort id, uchar pos );
// MH810100(E) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）	
static	void	ChargeSetup_edit_DiscountData_Lmt( uchar pri_kind, PRN_PROC_DATA *p_proc_data);
static	void	ChargeSetup_edit_PriCard(uchar pri_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data);
// MH810100(S) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）	
//static	void	ChargeSetup_edit_Uketuke(uchar pri_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data);
// MH810100(E) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）	
static	void	ChargeSetup_edit_Vol(uchar pri_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data);
static	void	ChargeSetup_edit_Splday(uchar pri_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data);
static	void	ChargeSetup_edit_Hoot(uchar pri_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data);
static	void	ChargeSetup_edit_InOut(uchar pri_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data);
// MH810100(S) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）	
//static	void	ChargeSetup_edit_LockPr(uchar pri_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data);
// MH810100(E) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）	
static	void	ChargeSetup_edit_StampMark(uchar pri_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data);
static	uchar	ChargeSetup_Time_Chek(uchar type , uchar hour , uchar min);
static	void	ChargeSetup_edit_DiscountData(short datakind, uchar pri_kind, PRN_PROC_DATA *p_proc_data);									// 料金設定プリント:割引設定ﾃﾞｰﾀ編集(サービス券/店割引/多店舗割引)
static	void	ChargeSetup_DayOfWeekGet(uchar kind, uchar *day_of_week, uchar section);													// 料金設定プリント:使用曜日取得
static	ushort	ChargeSetup_TimeDataCal(ushort data, ushort data2, uchar type);																// 料金設定プリント:時刻計算
static	void	ChargeSetup_BaseDataGet(CHARGE_BASEDATA *basedata);																			// 料金設定プリント:基本設定ﾃﾞｰﾀ取得
static	void	ChargeSetup_SysDataGet(uchar sys, uchar carkind, CHARGE_SYS *data);															// 料金設定プリント:料金体系ﾃﾞｰﾀ取得
static	void	ChargeSetup_TypeDataGet(uchar sys, uchar type, uchar carkind, CHARGE_TYPE *chargetype);										// 料金設定プリント:料金帯ﾃﾞｰﾀ取得(料金帯)
static	void	ChargeSetup_PatternDataGet(uchar sys, uchar pattern, uchar carkind, CHARGE_REGTYPE *data);									// 料金設定プリント:料金帯ﾃﾞｰﾀ取得(パターン)
static	void	ChargeSetup_PassDataGet(uchar kind, uchar type);																			// 料金設定プリント:定期設定取得
static	void	ChargeSetup_PassKindDataGet(uchar kind, sPASS_DATA *data);																	// 料金設定プリント:定期種別設定取得
static	void	ChargeSetup_DiscountUseflagGet(short kind);																					// 料金設定プリント:割引券使用設定取得
static	void	ChargeSetup_DiscountDataGet(short kind, ushort num, CHARGE_DISCOUNTDATA *discount_data);									// 料金設定プリント:サービス券/店割引/多店舗割引設定ﾃﾞｰﾀ取得
static	char	check_TEIKI_priflg(sPASS_DATA *data);
#if (5 == AUTO_PAYMENT_PROGRAM)
static void Pri_mc10_Editdata(uchar sys, uchar carkind, uchar pri_kind, PRN_PROC_DATA *p_proc_data);
static void Pri_mc10_GetTypeData_Time(uchar sys, uchar type, CHARGE_TYPE *chargetype);
static void Pri_mc10_GetTypeData_Ryokin(uchar sys, uchar type, uchar carkind, CHARGE_TYPE *chargetype);
#endif
static void ChargeSetup_edit_CarkindData(uchar carkind, uchar pri_kind, PRN_PROC_DATA *p_proc_data);				// 種別毎データ編集関数
static void ChargeSetup_CarkindDataGet( uchar carkind, CHARGE_CARKIND *data);										// 種別毎データ取得関数
static void Carkind_Base_Edit(unsigned char mod, unsigned char no, unsigned char pri_kind, void *data);				// 種別毎に印字する１項目の編集
static char edit_SoftVerPrint( uchar );				// ソフトウェアバージョン印字処理
static uchar	SYUUKEI_edit_Oiban( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data );
// MH810103 GG119202(S) 不要機能削除(センタークレジット)
//static	void Edit_AppNoChar( char *app_no, short len );
// MH810103 GG119202(E) 不要機能削除(センタークレジット)
// MH810105(S) MH364301 インボイス対応
static	void	ChargeSetup_edit_InVoice(uchar pri_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data);
static	short	Search_Registry_Number(char* original_str, uchar size, char* registry_num, char* output_str);
static	void	Search_Registry_T_Num( char* in_str, char* first_registry_str, char* first_T_str, short* error_type );
static	void	Search_Order_Check( char* first_registry_str, char* first_T_str, short* error_type );
static	int		Search_Before_Registry_Str_Check( char* in_str, char* first_registry_str, short* error_type );
static	int		Search_After_T_Num( char* first_T_str, short* error_type );
static	int		Search_After_T13_Str( uchar* after_T13_str, uchar str_size, int original_str_count, short* error_type );
static	void	Search_between_registry_T13( uchar* between_str, int between_count, short* error_type );
// MH810105(E) MH364301 インボイス対応

/* string table */
// 基本設定
const char *Charge_Base[] =
	{
		"サービスタイム",				// [00] サービスタイム
		"グレースタイム",				// [01] グレースタイム
		"リペイタイム",					// [02] リペイタイム(未使用)
		"ラグタイム",					// [03] ラグタイム
		"料金計算方式",					// [04] 料金計算方式
		"紛失料金",						// [05] 紛失料金
		"　基本　　 ",					// [06] 基本
		"　車種切換1",					// [07] 車種切換1
		"　車種切換2",					// [08] 車種切換2
		"　車種切換3",					// [09] 車種切換3
		"消費税",						// [10] 消費税
		"紙幣受付",						// [11] 紙幣受付
		"　10,000円札",					// [12] 10,000円札
		"　 5,000円札",					// [13] 5,000円札
		"　 2,000円札",					// [14] 2,000円札
		"　 1,000円札",					// [15] 1,000円札
		"プリペイドカード",				// [16] プリペイドカード
		"回数券",						// [17] 回数券
		"昼夜帯",						// [18] 昼夜帯
		"逓減帯",						// [19] 逓減帯
		"なし",							// [20] なし
		"固定",							// [21] 固定
		"入庫時刻",						// [22] 入庫時刻
		"禁止",							// [23] 禁止
		"受付",							// [24] 受付
		"使用可能",						// [25] 使用可能
		"(内税)",						// [26] (内税)
		"(外税)",						// [27] (外税)
		"フラップ上昇タイム",			// [28]
		"ﾌﾗｯﾌﾟ上昇ﾀｲﾑ内精算",			// [29]
		"ラグタイム延長",				// [30]
		"あり",							// [31]
		"ロック装置閉タイム",			// [32]
		"ﾛｯｸ装置閉ﾀｲﾑ内精算",			// [33]
		"最大料金タイプ",				// [34]
		"曜日の区切り",					// [35]
		"料金種別毎",					// [36]
		"フラップ上昇・ロック閉",		// [37]
		"          タイム内精算",		// [38]
		"入庫カウント",					// [39]
		"入庫通知電文",					// [40]
		"出庫カウント",					// [41]
		"出庫通知電文",					// [42]
		"入庫判定時間経過後",			// [43]
		"ロック閉後",					// [44]
		"フラップ上昇後",				// [45]
		"ﾛｯｸ閉/ﾌﾗｯﾌﾟ上昇後",			// [46]
		"精算完了時",					// [47]
		"出庫時",						// [48]
		"フラップ入庫判定タイム",		// [49]
		"ロック装置入庫判定タイム",		// [50]
		"ラグタイムアップ後の再入庫時刻",//[51]
		"ラグタイムアップ後の時刻",		// [52]
		"ラグタイムアップ後の時刻－１分",//[53]
		"精算完了時刻",					// [54]
		"ラグタイム後の料金",			// [55]
		"時間割引/定期後の料金",		// [56]
		"基本から取る",					// [57]
		"追加から取る",					// [58]
		"自動判定",						// [59]
		"■■■■■",					// [60]
		"親機",							// [61]
	};
// 割引券設定
const char *Charge_Discount[] =
	{
		"割引時間",						// [00] 割引時間
		"割引料金",						// [01] 割引料金
		"車種切換",						// [02] 車種切替
		"車種",							// [03] 車種
		"全額",							// [04] 全額
		"使用限度枚数",					// [05] 使用限度枚数
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
		"[税]",							// [06] [税]
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
	};
// 車種設定
const char *Charge_Carkind[] =
	{
		"絶対最大料金",					// [00] 絶対最大料金
		"日毎最大料金",					// [01] 日毎最大料金
		"24時間最大",					// [02] 24時間最大
		"12時間最大",					// [03] 12時間最大
		"6時間最大",					// [04] 6時間最大
		"時刻指定日毎最大",				// [05] 時刻指定日毎最大
		"2種類の時刻指定日毎最大",		// [06] 2種類の時刻指定日毎最大
		"（第1）",						// [07] （第1）
		"（第2）",						// [08] （第2）
		"割引対象期間",					// [09] 割引対象期間
		"基本",							// [10] 基本
		"追加",							// [11] 追加
		"(重複0)",						// [12] (重複0)
		"(重複1)",						// [13] (重複1)
		"深夜帯",						// [14] 深夜帯
		"繰り返し回数",					// [15] 繰り返し回数
		"料金",							// [16] 料金
		"パターン",						// [17] パターン
		"単位時間",						// [18] 単位時間
		"単位係数",						// [19] 単位係数
		"単位料金",						// [20] 単位料金
		"(繰り返し開始)",				// [21] (繰り返し開始)
		"(繰り返し終了)",				// [22] (繰り返し終了)
		"(単独繰り返し)",				// [23] (単独繰り返し)
		"種別割引",						// [24] 種別割引
		"時間",							// [25] 時間
		"対象期間",						// [26] 対象期間
		"一定料金",						// [27] 一定料金
		"%d時間",						// [28] ｎ時間最大
		"繰り返し回数",					// [29] 繰り返し回数
		"無限",							// [30] 無限
		"第%d料金帯最大",				// [31] 時間帯最大
		"%d時間(上限１)",				// [32] ｎ時間最大１
		"%d時間(上限２)",				// [33] ｎ時間最大２
	};
// 定期設定
const char *Charge_Pass[] =
	{
		"定期券チェック(アンチパス)",	// [00] 定期券チェック(アンチパス)
		"初回定期",						// [01] 初回定期
		"同一カード連続利用禁止時間",	// [02] 同一カード連続利用禁止時間
		"駐車券の併用",					// [03] 駐車券の併用(未使用)
		"しない",						// [04] しない（未使用)
		"する",							// [05] する(未使用)
		"どちらでも良い",				// [06] どちらでも良い(未使用)
		"許可",							// [07] 許可
		"［時間帯定期］",				// [08] ［時間帯定期］
		"［割引時間定期］",				// [09] ［割引時間定期］
		"［種別切換定期］",				// [10] ［種別切換定期］
		"ステータスチェック",			// [11] ステータスチェック
		"料金種別",						// [12] 料金種別(未使用)
		"(定期単独)",					// [13] (定期単独)(未使用)
		"車種切換",						// [14] 車種切換
		"出庫台数カウント",				// [15] 出庫台数カウント
		"カウント信号",					// [16] カウント信号
		"リードライトモード",			// [17] リードライトモード
		"期限切れ受付",					// [18] 期限切れ受付
		"定期券回収",					// [19] 定期券回収
		"保留モード",					// [20] 保留モード
		"第1料金体系",					// [21] 第1料金体系
		"第2料金体系",					// [22] 第2料金体系
		"第3料金体系",					// [23] 第3料金体系
		"適用範囲",						// [24] 適用範囲
		"通信",							// [25] 通信
		"カード",						// [26] カード
		"通信＆カード",					// [27] 通信＆カード
		"時刻比較",						// [28] 時刻比較
		"現在台数1",					// [29] 現在台数1
		"現在台数2",					// [30] 現在台数2
		"現在台数3",					// [31] 現在台数3(現在未使用)
		"出庫信号1",					// [32] 出庫信号1
		"出庫信号2",					// [33] 出庫信号2
		"出庫信号1,2",					// [34] 出庫信号1,2
		"出力なし",						// [35] 出力なし
		"リードライト",					// [36] リードライト
		"リードオンリー",				// [37] リードオンリー
		"無期限設定",					// [38] 無期限設定
		"開始日のみ",					// [39] 開始日のみ
		"終了日のみ",					// [40] 終了日のみ
		"期限切れのみ",					// [41] 期限切れのみ
		"すべて",						// [42] すべて
		"保留しない",					// [43] 保留しない
		"リーダー内に保留",				// [44] リーダー内に保留
		"第4料金体系",					// [45] 第4料金体系
		"第5料金体系",					// [46] 第5料金体系
		"第6料金体系",					// [47] 第6料金体系
		"第7料金体系",					// [48] 第7料金体系
		"第8料金体系",					// [49] 第8料金体系
		"第9料金体系",					// [50] 第9料金体系
	};
// 曜日
const char *Charge_Week[] =
	{
		"月",							// [00] 月
		"火",							// [01] 火
		"水",							// [02] 水
		"木",							// [03] 木
		"金",							// [04] 金
		"土",							// [05] 土
		"日",							// [06] 日
		"特",							// [07] 特
		"期1",							// [08] 期1
		"期2",							// [09] 期2
		"期3",							// [10] 期3
	};
//----------------------------------------------------------------------------------------------
// 料金設定プリントデータ
//----------------------------------------------------------------------------------------------
const char *daymax_type[] = 
	{
		"なし",
		"入庫時刻最大",
		"区切り最大",
		"区切り最大(2種)",
		"ｎ時間ｍ回最大",
		"時間帯最大",
		"ｎ時間ｍ回最大(Ｗ)",
	};
const char *InPortType[] = 
	{
		"",
		"強制営業",								// [01]
		"強制休業",								// [02]
	};
	
const char *OutPortType[] = 
	{
		"",
		"精算完了（出庫）1",					// [01]
		"精算完了（出庫）2",					// [02]
		"ジャーナル紙切れ",						// [03]
		"ジャーナル紙切れ予告",					// [04]
		"レシート紙切れ",						// [05]
		"レシート紙切れ予告",					// [06]
		"ｼﾞｬｰﾅﾙ又はﾚｼｰﾄ紙切れ",					// [07]
		"ｼﾞｬｰﾅﾙ又はﾚｼｰﾄ紙切れ予告",				// [08]
		"トラブル",								// [09]
		"満車1",								// [10]
		"満車2",								// [11]
		"休業中",								// [12]
		"防犯センサー",							// [13]
		"コイン金庫満杯予告",					// [14]
		"紙幣金庫満杯予告",						// [15]
		"ｺｲﾝ金庫又は紙幣金庫満杯予告",			// [16]
		"釣銭切れ",								// [17]
		"釣銭切れ予告",							// [18]
		"コイン金庫満杯",						// [19]
		"紙幣金庫満杯",							// [20]
		"ｺｲﾝ金庫満杯又は紙幣金庫満杯",			// [21]
		"満車3",								// [22]
		"空車1",								// [23]
		"空車2",								// [24]
		"空車3",								// [25]
	};
	
static const unsigned char	InPortTableNo[INPORT_NUM_MAX] = 
//   0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 
{
	 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
	 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
	 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
	 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
	 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
};

static const unsigned char	OutPortTableNo[OUTPORT_NUM_MAX] = 
//   0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 
{
	 0, 1, 2, 0, 0, 0, 0, 0, 0, 0, 3, 4, 5, 6, 7, 8, 9, 0,10,11,
	 0, 0, 0, 0,12,13,14,15,16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
	 0, 0, 0, 0, 0, 0, 0, 0, 0,17,18, 0, 0, 0, 0, 0, 0, 0, 0, 0,
	19,20,21, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,22,23,24,25, 0, 0, 0,
	 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
};

/*----------------------------------------------*/
/*	印字文字列ﾃﾞｰﾀ								*/
/*----------------------------------------------*/
//----------------------------------------------------------------------------------------------
//	汎用	印字ﾃﾞｰﾀ
//----------------------------------------------------------------------------------------------

/* LOG日本語化テーブル */
typedef struct {
	ushort	Ope_no;				// 操作No.
	uchar	String[12+2];		// 文字列（Max12文字＋Null）
} t_Pri_LogString;

/* 操作LOG 日本語印字 文字テーブル */
const t_Pri_LogString	Pro_OpeLogStrTbl[] = {
	{ 101, "ドア開" },
	{ 102, "ドア閉" },
	{ 103, "ｺｲﾝﾒｯｸ鍵開" },
	{ 104, "ｺｲﾝﾒｯｸ鍵閉" },
	{ 105, "紙幣ﾘｰﾀﾞｰ鍵開" },
	{ 106, "紙幣ﾘｰﾀﾞｰ鍵閉" },
	{9999, " " }				// Stopper (table end)
};

const char *Pri_Tanni[] =	// 単位
	{
		"円",
		"枚",
		"回",
		"台",
		"金額",
		"枚数",
		"回数",
		"台数",
		"入庫",
		"精算",
		"出庫",
		"行",
		"時間",
		"件",
		"件数",
		"％"
// MH321800(S) hosoda ICクレジット対応
	,	" P"		// [16]
// MH321800(E) hosoda ICクレジット対応
	};

#define		PriT_YEN		0		// 円
#define		PriT_MAI		1		// 枚
#define		PriT_KAI		2		// 回
#define		PriT_DAI		3		// 台
#define		PriT_KINGAK		4		// 金額
#define		PriT_MAISUU		5		// 枚数
#define		PriT_KAISUU		6		// 回数
#define		PriT_DAISUU		7		// 台数
#define		PriT_INCAR		8		// 入庫
#define		PriT_SEISAN		9		// 精算
#define		PriT_OUTCAR		10		// 出庫
#define		PriT_GYOU		11		// 行
#define		PriT_TIME		12		// 時間
#define		PriT_KEN		13		// 件
#define		PriT_KENSUU		14		// 件数
// MH321800(S) hosoda ICクレジット対応
enum {
	PriT_PERCENT = PriT_KENSUU + 1,	// [15]％
	PriT_POINT,						// [16] P
};
// MH321800(E) hosoda ICクレジット対応

const char *PkKukaku_Prn[PKICHI_KU_CNT+1] =		// 駐車位置区画印字ﾃﾞｰﾀ（１～２６＝Ａ～Ｚ）
	{
		" ",
		"A","B","C","D","E","F","G","H","I","J","K","L","M",
		"N","O","P","Q","R","S","T","U","V","W","X","Y","Z"
	};

const char *OibanName_Prn[] =	// 追番名称
	{
		"　　",		// ０：
		"精算",		// １：精算完了
		"中止",		// ２：精算中止
		"預り",		// ３：預り証
		"受付",		// ４：受付
		"Ｔ合",		// ５：Ｔ合計
		"ＧＴ合",	// ６：ＧＴ合計
		"複Ｔ",		// ７：複数台Ｔ合計
		"コ金",		// ８：コイン金庫集計
		"紙金",		// ９：紙幣金庫集計
		"釣合",		// 10：釣銭管理
		"強制",		// 11：強制出庫
		"不正",		// 12：不正出庫
		"   S"		// 13：料金設定
	};

const char *SikiriLine_Prn[] =	// 仕切り行
	{
		"＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝",		// ０
		"==================================",		// １
		"－－－－－－－－－－－－－－－－－",		// ２
		"----------------------------------",		// ３
		"＜間違い精算履歴＞----------------",		// ４
		"＜間違い精算分＞------------------",		// ５
	};

//----------------------------------------------------------------------------------------------
//	領収証用	印字ﾃﾞｰﾀ
//----------------------------------------------------------------------------------------------
const char *Ryousyuu_Ttl_Prn[] =	// 領収証印字表題
	{
		"領 収 書",				// 　０：領 収 書
		"領 収 書 (復)",		// 　１：領 収 書 (復)
		"利用明細書",			// 　２：明 細 書
		"利用明細書 (復)",		// 　３：明 細 書 (復)
		"精 算 中 止",			// 　４：精 算 中 止
		"精 算 中 止 (復)",		// 　５：精 算 中 止 (復)
		"預 り 証",				// 　６：預 り 証
		"預 り 証 (復)",		// 　７：預 り 証 （復）
		"受 付 券",				// 　８：受 付 券
		"領 収 書 (修正)",		// 　９：領 収 書 (修正)
		"領 収 書 (修/復)",		// １０：領 収 書 (修/復)
		"利用明細書 (修正)",	// １１：明 細 書 (修正)
		"利用明細書 (修/復)",	// １２：明 細 書 (修/復)
		"領 収 書 (預り)",		// １３：領 収 書 (預り)
		"利用明細書 (預り)",	// １４：明 細 書 (預り)
		"(修正精算)",			// １５：(修正精算)
		"駐車証明書",			// １６：駐車証明書
		"不正出庫",				// １７：不正出庫
		"強制出庫",				// １８：強制出庫
		"領 収 証",				// １９：領 収 証
		"領 収 証 (復)",		// ２０：領 収 証 (復)
		"領 収 証 (修正)",		// ２１：領 収 証 (修正)
		"領 収 証 (修/復)",		// ２２：領 収 証 (修/復)
// MH810103 GG119202(S) ICクレジットみなし決済印字フォーマット変更対応
		"決済精算中止(復)", 	// ２３：決 済 精 算 中 止（復）
// MH810103 GG119202(E) ICクレジットみなし決済印字フォーマット変更対応
// MH810105(S) MH364301 QRコード決済対応
		"決済精算中止",			// ２４：決 済 精 算 中 止
// MH810105(E) MH364301 QRコード決済対応
	};
//----------------------------------------------------------------------------------------------
const char *Ryotest_Ttl_Prn[] =	// 料金計算テスト表題
	{
		"==================================",		// 仕切り線
	};

//----------------------------------------------------------------------------------------------
const	char	*SyubetuRyokin[RYOUKIN_SYU_MAX+1] =	// 料金種別
	{
		"     ",
		"A料金","B料金","C料金","D料金","E料金","F料金",
		"G料金","H料金","I料金","J料金","K料金","L料金"
	};
//----------------------------------------------------------------------------------------------
const char *TeikiTicket[PKNO_SYU_CNT][TEIKI_SYU_MAX] =	// 定期種別
	{
		"定期01","定期02","定期03","定期04","定期05",					// 基本駐車場Ｎｏ．
		"定期06","定期07","定期08","定期09","定期10",
		"定期11","定期12","定期13","定期14","定期15",

		"拡1定期01","拡1定期02","拡1定期03","拡1定期04","拡1定期05",	// 拡張駐車場Ｎｏ．１
		"拡1定期06","拡1定期07","拡1定期08","拡1定期09","拡1定期10",
		"拡1定期11","拡1定期12","拡1定期13","拡1定期14","拡1定期15",

		"拡2定期01","拡2定期02","拡2定期03","拡2定期04","拡2定期05",	// 拡張駐車場Ｎｏ．２
		"拡2定期06","拡2定期07","拡2定期08","拡2定期09","拡2定期10",
		"拡2定期11","拡2定期12","拡2定期13","拡2定期14","拡2定期15",

		"拡3定期01","拡3定期02","拡3定期03","拡3定期04","拡3定期05",	// 拡張駐車場Ｎｏ．３
		"拡3定期06","拡3定期07","拡3定期08","拡3定期09","拡3定期10",
		"拡3定期11","拡3定期12","拡3定期13","拡3定期14","拡3定期15"
	};
//----------------------------------------------------------------------------------------------
const char *ServiceTicket[PKNO_SYU_CNT][SERVICE_SYU_MAX] =			// ｻｰﾋﾞｽ券種別
	{
		"ｻｰﾋﾞｽ券A","ｻｰﾋﾞｽ券B","ｻｰﾋﾞｽ券C","ｻｰﾋﾞｽ券D","ｻｰﾋﾞｽ券E",
		"ｻｰﾋﾞｽ券F","ｻｰﾋﾞｽ券G","ｻｰﾋﾞｽ券H","ｻｰﾋﾞｽ券I","ｻｰﾋﾞｽ券J",
		"ｻｰﾋﾞｽ券K","ｻｰﾋﾞｽ券L","ｻｰﾋﾞｽ券M","ｻｰﾋﾞｽ券N","ｻｰﾋﾞｽ券O",						// 基本駐車場Ｎｏ．

		"拡1ｻｰﾋﾞｽ券A","拡1ｻｰﾋﾞｽ券B","拡1ｻｰﾋﾞｽ券C","拡1ｻｰﾋﾞｽ券D","拡1ｻｰﾋﾞｽ券E",
		"拡1ｻｰﾋﾞｽ券F","拡1ｻｰﾋﾞｽ券G","拡1ｻｰﾋﾞｽ券H","拡1ｻｰﾋﾞｽ券I","拡1ｻｰﾋﾞｽ券J",
		"拡1ｻｰﾋﾞｽ券K","拡1ｻｰﾋﾞｽ券L","拡1ｻｰﾋﾞｽ券M","拡1ｻｰﾋﾞｽ券N","拡1ｻｰﾋﾞｽ券O",		// 拡張駐車場Ｎｏ．１

		"拡2ｻｰﾋﾞｽ券A","拡2ｻｰﾋﾞｽ券B","拡2ｻｰﾋﾞｽ券C","拡2ｻｰﾋﾞｽ券D","拡2ｻｰﾋﾞｽ券E",
		"拡2ｻｰﾋﾞｽ券F","拡2ｻｰﾋﾞｽ券G","拡2ｻｰﾋﾞｽ券H","拡2ｻｰﾋﾞｽ券I","拡2ｻｰﾋﾞｽ券J",
		"拡2ｻｰﾋﾞｽ券K","拡2ｻｰﾋﾞｽ券L","拡2ｻｰﾋﾞｽ券M","拡2ｻｰﾋﾞｽ券N","拡2ｻｰﾋﾞｽ券O",		// 拡張駐車場Ｎｏ．２

		"拡3ｻｰﾋﾞｽ券A","拡3ｻｰﾋﾞｽ券B","拡3ｻｰﾋﾞｽ券C","拡3ｻｰﾋﾞｽ券D","拡3ｻｰﾋﾞｽ券E",
		"拡3ｻｰﾋﾞｽ券F","拡3ｻｰﾋﾞｽ券G","拡3ｻｰﾋﾞｽ券H","拡3ｻｰﾋﾞｽ券I","拡3ｻｰﾋﾞｽ券J",
		"拡3ｻｰﾋﾞｽ券K","拡3ｻｰﾋﾞｽ券L","拡3ｻｰﾋﾞｽ券M","拡3ｻｰﾋﾞｽ券N","拡3ｻｰﾋﾞｽ券O",		// 拡張駐車場Ｎｏ．３
	};

const char *ServiceTicket_chusi[PKNO_SYU_CNT][SERVICE_SYU_MAX] =	// 精算中止ｻｰﾋﾞｽ券種別
	{
		"*ｻｰﾋﾞｽ券A","*ｻｰﾋﾞｽ券B","*ｻｰﾋﾞｽ券C","*ｻｰﾋﾞｽ券D","*ｻｰﾋﾞｽ券E",
		"*ｻｰﾋﾞｽ券F","*ｻｰﾋﾞｽ券G","*ｻｰﾋﾞｽ券H","*ｻｰﾋﾞｽ券I","*ｻｰﾋﾞｽ券J",
		"*ｻｰﾋﾞｽ券K","*ｻｰﾋﾞｽ券L","*ｻｰﾋﾞｽ券M","*ｻｰﾋﾞｽ券N","*ｻｰﾋﾞｽ券O",					// 基本駐車場Ｎｏ．

		"*拡1ｻｰﾋﾞｽ券A","*拡1ｻｰﾋﾞｽ券B","*拡1ｻｰﾋﾞｽ券C","*拡1ｻｰﾋﾞｽ券D","*拡1ｻｰﾋﾞｽ券E",
		"*拡1ｻｰﾋﾞｽ券F","*拡1ｻｰﾋﾞｽ券G","*拡1ｻｰﾋﾞｽ券H","*拡1ｻｰﾋﾞｽ券I","*拡1ｻｰﾋﾞｽ券J",
		"*拡1ｻｰﾋﾞｽ券K","*拡1ｻｰﾋﾞｽ券L","*拡1ｻｰﾋﾞｽ券M","*拡1ｻｰﾋﾞｽ券N","*拡1ｻｰﾋﾞｽ券O",		// 拡張駐車場Ｎｏ．１

		"*拡2ｻｰﾋﾞｽ券A","*拡2ｻｰﾋﾞｽ券B","*拡2ｻｰﾋﾞｽ券C","*拡2ｻｰﾋﾞｽ券D","*拡2ｻｰﾋﾞｽ券E",
		"*拡2ｻｰﾋﾞｽ券F","*拡2ｻｰﾋﾞｽ券G","*拡2ｻｰﾋﾞｽ券H","*拡2ｻｰﾋﾞｽ券I","*拡2ｻｰﾋﾞｽ券J",
		"*拡2ｻｰﾋﾞｽ券K","*拡2ｻｰﾋﾞｽ券L","*拡2ｻｰﾋﾞｽ券M","*拡2ｻｰﾋﾞｽ券N","*拡2ｻｰﾋﾞｽ券O",		// 拡張駐車場Ｎｏ．２

		"*拡3ｻｰﾋﾞｽ券A","*拡3ｻｰﾋﾞｽ券B","*拡3ｻｰﾋﾞｽ券C","*拡3ｻｰﾋﾞｽ券D","*拡3ｻｰﾋﾞｽ券E",
		"*拡3ｻｰﾋﾞｽ券F","*拡3ｻｰﾋﾞｽ券G","*拡3ｻｰﾋﾞｽ券H","*拡3ｻｰﾋﾞｽ券I","*拡3ｻｰﾋﾞｽ券J",
		"*拡3ｻｰﾋﾞｽ券K","*拡3ｻｰﾋﾞｽ券L","*拡3ｻｰﾋﾞｽ券M","*拡3ｻｰﾋﾞｽ券N","*拡3ｻｰﾋﾞｽ券O",		// 拡張駐車場Ｎｏ．３
	};
//----------------------------------------------------------------------------------------------
const char *KakeuriTicket[PKNO_SYU_CNT] =			// 掛売券種別
	{
		"店",				// 基本駐車場Ｎｏ．
		"拡1店",			// 拡張駐車場Ｎｏ．１
		"拡2店",			// 拡張駐車場Ｎｏ．２
		"拡3店"				// 拡張駐車場Ｎｏ．３
	};

const char *KakeuriTicket_chusi[PKNO_SYU_CNT] =	// 精算中止掛売券種別
	{
		"*店",				// 基本駐車場Ｎｏ．
		"*拡1店",			// 拡張駐車場Ｎｏ．１
		"*拡2店",			// 拡張駐車場Ｎｏ．２
		"*拡3店"			// 拡張駐車場Ｎｏ．３
	};
//----------------------------------------------------------------------------------------------
const char *WaribiTicket[PKNO_SYU_CNT] =	// 割引券種別
	{
		"店",				// 基本駐車場Ｎｏ．
		"拡1店",			// 拡張駐車場Ｎｏ．１
		"拡2店",			// 拡張駐車場Ｎｏ．２
		"拡3店"				// 拡張駐車場Ｎｏ．３
	};
//----------------------------------------------------------------------------------------------
const char *PripayTicket[PKNO_SYU_CNT] =	// ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ種別
	{
		"ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ",		// 基本駐車場Ｎｏ．
		"拡1ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ",	// 拡張駐車場Ｎｏ．１
		"拡2ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ",	// 拡張駐車場Ｎｏ．２
		"拡3ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ"	// 拡張駐車場Ｎｏ．３
	};
//----------------------------------------------------------------------------------------------
const char *KaisuuTicket[PKNO_SYU_CNT] =		// 回数券種別
	{
		"回数券",			// 基本駐車場Ｎｏ．
		"拡1回数券",		// 拡張駐車場Ｎｏ．１
		"拡2回数券",		// 拡張駐車場Ｎｏ．２
		"拡3回数券"			// 拡張駐車場Ｎｏ．３
	};

const char *KaisuuTicket_chusi[PKNO_SYU_CNT] =	// 精算中止回数券種別
	{
		"*回数券",			// 基本駐車場Ｎｏ．
		"*拡1回数券",		// 拡張駐車場Ｎｏ．１
		"*拡2回数券",		// 拡張駐車場Ｎｏ．２
		"*拡3回数券"		// 拡張駐車場Ｎｏ．３
	};
//----------------------------------------------------------------------------------------------
const char *TurikireMsg[9] =					// 釣り切れ時の固定ﾒｯｾｰｼﾞ
	{
		"釣銭が払い出せませんでした。お手数",
		"ですが受付にて係員に請求願います。",
		"ですが管理室にて係員に請求願います。",
		"ですが係員に請求願います。",
		"　　この預り証と現金を交換します。　",	// [4]
		"申し訳ございません。　　　　　　　　",	// [5]
		"上記払出不足金につきましては　　　　",	// [6]
		"場内記載の緊急連絡先までご連絡を　　",	// [7]
		"お願い致します。　　　　　　　　　　",	// [8]
	};

// MH810105(S) MH364301 QRコード決済対応
//----------------------------------------------------------------------------------------------
const char *FailureContactMsg[2] =				// 障害連絡票発行時の固定ﾒｯｾｰｼﾞ
	{
		"精算ができませんでした。お手数です　",
		"が係員にお問合せください。　　　　　"
	};
// MH810105(E) MH364301 QRコード決済対応

//----------------------------------------------------------------------------------------------
const char *KoteiMsg[4] =						// 固定ﾒｯｾｰｼﾞ
	{
		"　　　上記正に領収致しました。　　　",	// ﾒｯｾｰｼﾞ１
		"　　　ありがとうございました。　　　",	// ﾒｯｾｰｼﾞ２
		"　　　気をつけてお帰り下さい。　　　",	// ﾒｯｾｰｼﾞ３
		" またのご利用をお待ちしております。 "	// ﾒｯｾｰｼﾞ４
	};

// MH810103 GG118807_GG118907(S) 「未了残高照会完了」時にも未了確定をカウントする
// MH810105(S) MH364301 QRコード決済対応
//const char *AlarmReasonMsg[3] =					// 未了発生理由
const char *AlarmReasonMsg[4] =					// 未了発生理由
// MH810105(E) MH364301 QRコード決済対応
{
// MH810105 GG119202(S) 処理未了取引集計仕様改善
//		"未了確定後 引き去り済　 ",				// [0]
//		"未了確定後 未引き去り　 ",				// [1]
//		"未了確定後 タイムアウト ",				// [2]
		"未了残高照会 支払済み",				// [0]
		"未了残高照会 支払失敗",				// [1]
		"未了残高照会 支払不明",				// [2]
// MH810105 GG119202(E) 処理未了取引集計仕様改善
// MH810105(S) MH364301 QRコード決済対応
		"支払確認失敗 支払不明",				// [3]
// MH810105(E) MH364301 QRコード決済対応
};
// MH810103 GG118807_GG118907(E) 「未了残高照会完了」時にも未了確定をカウントする
// MH810103 MHUT40XX(S) DC=29ｈ→49ｈへ変更し、決済結果のステータスに応じてジャーナル印字を行う
const char *EcResultMsg[6] =					// 決済結果
{
		"決済OK",								// [0]
		"決済NG",								// [1]
		"　　　",								// [2]
		"処理キャンセル",						// [3]
		"未了確定",								// [4]
		"未了残高照会完了",						// [5]
};
// MH810103 MHUT40XX(E) DC=29ｈ→49ｈへ変更し、決済結果のステータスに応じてジャーナル印字を行う

// MH810105(S) MH364301 QRコード決済対応
//----------------------------------------------------------------------------------------------
//	障害連絡票印字用	印字ﾃﾞｰﾀ
//----------------------------------------------------------------------------------------------
const char *Syogail_Prn[3] =					// 障害連絡票印字
	{
		"ｱﾌﾟﾘの支払い履歴",								// [0]
		"をご確認ください",								// [1]
	};
//----------------------------------------------------------------------------------------------
//	障害連絡票印字用	案内メッセージ印字ﾃﾞｰﾀ
//----------------------------------------------------------------------------------------------
const char *Syogail_Message_Prn[10] =			// 障害連絡票案内メッセージ印字
	{
		"1 アプリの支払い履歴をご確認いただ",								// [0]
		"  き支払いが完了していない場合はお",								// [1]
		"  手数ですが再度精算をお願いします",								// [2]
		"2 アプリの支払い履歴で支払いが完了",								// [3]
		"  している場合は掲示されている連絡",								// [4]
		"  先にお問い合わせください　　　　",								// [5]
		"  している場合は下記の連絡先にお問",								// [6]
		"  い合わせください　　　　　　　　",								// [7]
		"  している場合は係員にお問い合わせ",								// [8]
		"  ください　　　　　　　　　　　　",								// [9]
	};
// MH810105(E) MH364301 QRコード決済対応
// GG129000(S) H.Fujinaga 2022/12/05 ゲート式車番チケットレスシステム対応（QR駐車券対応）
// GG129000(S) 車番チケットレス（詳細設計#5351：領収証のQRコードの名称を「駐車券」とする／しないの設定を設ける）
//const char *QR_KoteiMsg[4] =					// 固定メッセージ
const char *QR_KoteiMsg[6] =					// 固定メッセージ
// GG129000(E) 車番チケットレス（詳細設計#5351：領収証のQRコードの名称を「駐車券」とする／しないの設定を設ける）
	{
		"この駐車券を",	// [0]
		"出口までお持ちください",	// [1]
		"※1度出庫すると無効になります。",	// [2]
		"駐車券",	// [3]
// GG129000(S) 車番チケットレス（詳細設計#5351：領収証のQRコードの名称を「駐車券」とする／しないの設定を設ける）
		"この領収証を",	// [4]
		"この領収書を",	// [5]
// GG129000(E) 車番チケットレス（詳細設計#5351：領収証のQRコードの名称を「駐車券」とする／しないの設定を設ける）
	};
// GG129000(E) H.Fujinaga 2022/12/05 ゲート式車番チケットレスシステム対応（QR駐車券対応）

//----------------------------------------------------------------------------------------------
//	集計印字用	印字ﾃﾞｰﾀ
//----------------------------------------------------------------------------------------------
const char *Syuukei_Ttl_Prn[SYUUKEI_SYU_MAX] =	// 集計印字表題
	{
		"Ｔ 小 計",				// 　０：Ｔ小計				（集計種別：１）
		"Ｔ 合 計",				// 　１：Ｔ合計				（集計種別：２）
		"Ｇ Ｔ 小 計",			// 　２：ＧＴ小計			（集計種別：３）
		"Ｇ Ｔ 合 計",			// 　３：ＧＴ合計			（集計種別：４）
		"複数Ｔ小計",			// 　４：複数Ｔ小計			（集計種別：５）
		"複数Ｔ合計",			// 　５：複数Ｔ合計			（集計種別：６）
		"複数ＧＴ小計",			// 　６：複数ＧＴ小計		（集計種別：７）
		"複数ＧＴ合計",			// 　７：複数ＧＴ合計		（集計種別：８）
		"Ｔ 合 計",				// 　８：前回Ｔ合計			（集計種別：９）
		"Ｇ Ｔ 合 計",			// 　９：前回ＧＴ合計		（集計種別：１０）
		"複数Ｔ合計",			// １０：前回複数Ｔ合計		（集計種別：１１）
		"複数ＧＴ合計",			// １１：前回複数ＧＴ合計	（集計種別：１２）
		"Ｍ Ｔ 小 計",			// １２：ＭＴ小計			（集計種別：１３）
		"Ｍ Ｔ 合 計",			// １３：ＭＴ合計			（集計種別：１４）
		"Ｍ Ｔ 合 計"			// １４：前回ＭＴ合計		（集計種別：１５）
	};

const char *Syukei_Ttl_Prn[] =	// 集計印字ログ表題
	{
		"Ｔ合計情報",		// 0：Ｔ合計情報
		"ＧＴ合計情報",		// 1：ＧＴ合計情報
	};
const uchar Syukei_eLog[] =
	{
		eLOG_TTOTAL,			// 集計
		eLOG_GTTOTAL			// ＧＴ合計
	};

const char *CoKiSk_Ttl_Prn[COKISK_SYU_MAX] =	// ｺｲﾝ金庫集計印字表題
	{
		"コイン金庫合計",		// ０：ｺｲﾝ金庫合計		（集計種別：１）
		"コイン金庫小計",		// １：ｺｲﾝ金庫小計		（集計種別：２）
		"コイン金庫合計"		// ２：前回ｺｲﾝ金庫合計	（集計種別：３）
	};

const char *SiKiSk_Ttl_Prn[SIKISK_SYU_MAX] =	// 紙幣金庫集計印字表題
	{
		"紙幣金庫合計",			// ０：紙幣金庫合計		（集計種別：１）
		"紙幣金庫小計",			// １：紙幣金庫小計		（集計種別：２）
		"紙幣金庫合計"			// ２：前回紙幣金庫合計	（集計種別：３）
	};
//----------------------------------------------------------------------------------------------
const char *Syuukei_Kou_Prn[] =	// 集計項目
	{
		"装置No.",			// ０：装置No.
		"強制出庫",			// １：強制出庫
		"不正出庫",			// ２：不正出庫
		"修正精算"			// ３：修正精算
	};
//----------------------------------------------------------------------------------------------
const char *InCarCnt_Prn[IN_SIG_MAX] =	// 入庫台数印字
	{
		"　入庫１台数",		// 入庫１
		"　入庫２台数",		// 入庫２
		"　入庫３台数"		// 入庫３
	};

const char *OutCarCnt_Prn[IN_SIG_MAX] =	// 出庫台数印字
	{
		"　出庫１台数",		// 出庫１
		"　出庫２台数",		// 出庫２
		"　出庫３台数"		// 出庫３
	};

const char *NowCarCnt_Prn[IN_SIG_MAX] =	// 現在駐車台数印字
	{
		"　現在台数１",		// 現在１
		"　現在台数２",		// 現在２
		"　現在台数３"		// 現在３
	};
//----------------------------------------------------------------------------------------------
const char *RsyuSei_Prn[RYOUKIN_SYU_MAX] =	// 料金種別毎精算印字
	{
		"A車種精算",		// 種別A
		"B車種精算",		// 種別B
		"C車種精算",		// 種別C
		"D車種精算",		// 種別D
		"E車種精算",		// 種別E
		"F車種精算",		// 種別F
		"G車種精算",		// 種別G
		"H車種精算",		// 種別H
		"I車種精算",		// 種別I
		"J車種精算",		// 種別J
		"K車種精算",		// 種別K
		"L車種精算"			// 種別L
	};
//----------------------------------------------------------------------------------------------
const char *RsyuWari_Prn[RYOUKIN_SYU_MAX] =	// 料金種別毎割引印字
	{
		"A種割引",			// 種別A
		"B種割引",			// 種別B
		"C種割引",			// 種別C
		"D種割引",			// 種別D
		"E種割引",			// 種別E
		"F種割引",			// 種別F
		"G種割引",			// 種別G
		"H種割引",			// 種別H
		"I種割引",			// 種別I
		"J種割引",			// 種別J
		"K種割引",			// 種別K
		"L種割引"			// 種別L
	};
//----------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------
const char *MnoUse_Prn1[PKNO_SYU_CNT] =	// 店Ｎｏ．割引印字（店Ｎｏ．１～１００合計）
	{
		"店No.001～100",	// 基本駐車場Ｎｏ．
		"拡1店No.001～100",	// 拡張駐車場Ｎｏ．１
		"拡2店No.001～100",	// 拡張駐車場Ｎｏ．２
		"拡3店No.001～100"	// 拡張駐車場Ｎｏ．３
	};
const char *MnoUse_Prn2[PKNO_SYU_CNT] =	// 店Ｎｏ．割引印字（店Ｎｏ．１０１～９９９合計）
	{
// MH810104(S) R.Endo 2021/09/16 車番チケットレス フェーズ2.3 #5983 集計印字の印字内容が仕様通りでない
// 		"店No.101以上",		// 基本駐車場Ｎｏ．
// 		"拡1店No.101以上",	// 拡張駐車場Ｎｏ．１
// 		"拡2店No.101以上",	// 拡張駐車場Ｎｏ．２
// 		"拡3店No.101以上"	// 拡張駐車場Ｎｏ．３
		"店No.101～999",	// 基本駐車場Ｎｏ．
		"拡1店No.101～999",	// 拡張駐車場Ｎｏ．１
		"拡2店No.101～999",	// 拡張駐車場Ｎｏ．２
		"拡3店No.101～999"	// 拡張駐車場Ｎｏ．３
// MH810104(E) R.Endo 2021/09/16 車番チケットレス フェーズ2.3 #5983 集計印字の印字内容が仕様通りでない
	};
const char *MnoUse_Prn3[PKNO_SYU_CNT] =	// 店Ｎｏ．割引印字（全店割引合計）
	{
// MH810104(S) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5793 多店舗割引店№999対応
// 		"店No.001～255",	// 基本駐車場Ｎｏ．
// 		"拡1店No.001～255",	// 拡張駐車場Ｎｏ．１
// 		"拡2店No.001～255",	// 拡張駐車場Ｎｏ．２
// 		"拡3店No.001～255"	// 拡張駐車場Ｎｏ．３
		"店No.001～999",	// 基本駐車場Ｎｏ．
		"拡1店No.001～999",	// 拡張駐車場Ｎｏ．１
		"拡2店No.001～999",	// 拡張駐車場Ｎｏ．２
		"拡3店No.001～999"	// 拡張駐車場Ｎｏ．３
// MH810104(E) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5793 多店舗割引店№999対応
	};
const char *MnoUse_Prn4[PKNO_SYU_CNT] =	// 店Ｎｏ．割引印字（店Ｎｏ．毎）
	{
		"店No.",			// 基本駐車場Ｎｏ．
		"拡1店No.",			// 拡張駐車場Ｎｏ．１
		"拡2店No.",			// 拡張駐車場Ｎｏ．２
		"拡3店No."			// 拡張駐車場Ｎｏ．３
	};
//----------------------------------------------------------------------------------------------
const char *WtikUse_Prn1[PKNO_SYU_CNT] =	// 割引券使用印字（全割引券合計）
	{
		"全割引券",			// 基本駐車場Ｎｏ．
		"拡1全割引券",		// 拡張駐車場Ｎｏ．１
		"拡2全割引券",		// 拡張駐車場Ｎｏ．２
		"拡3全割引券"		// 拡張駐車場Ｎｏ．３
	};
const char *WtikUse_Prn2[PKNO_SYU_CNT] =	// 割引券使用印字（割引種別毎）
	{
		"割引券",			// 基本駐車場Ｎｏ．
		"拡1割引券",		// 拡張駐車場Ｎｏ．１
		"拡2割引券",		// 拡張駐車場Ｎｏ．２
		"拡3割引券"			// 拡張駐車場Ｎｏ．３
	};
//----------------------------------------------------------------------------------------------
const char *BunruiTtl_Prn[9] =	// 分類集計表題印字
	{
		"＜駐車時間別台数集計＞",		// 分類集計種別：１
		"＜駐車時間別台数・料金集計＞",	// 分類集計種別：２
		"＜駐車料金別台数集計＞",		// 分類集計種別：３
		"＜駐車料金別台数・料金集計＞",	// 分類集計種別：４
		"＜入庫時刻別台数集計＞",		// 分類集計種別：５
		"＜精算時刻別台数集計＞",		// 分類集計種別：６
		"＜入庫・精算時刻別台数集計＞",	// 分類集計種別：７
		"＜出庫時刻別台数集計>",		// 分類集計種別：８
		"＜入庫・出庫時刻別台数集計＞",	// 分類集計種別：９
	};
const char *BunruiSyu_Prn[3] =	// 分類集計表題印字
	{
		"自動車",		// 分類集計種別：１
		"バイク",	// 分類集計種別：２
		"自転車",	// 分類集計種別：３
	};



//	領収証印字ﾃﾞｰﾀ編集処理ﾃﾞｰﾀﾃｰﾌﾞﾙ（ﾃﾞｰﾀ内容は以下に示す）
//	[印字内容番号][0]＝印字内容毎の最大編集行数
//	[印字内容番号][1]＝印字内容毎の精算履歴印字時の印字有無（NO：印字しない YES：印字する）

const	uchar	ryousyuu_edit_tbl[250][2] =
	{
		0,	NO,		// 印字内容　０：未使用
		4,	NO,		// 印字内容　１：ロゴ
		4,	NO,		// 印字内容　２：ヘッダー
		1,	YES,	// 印字内容　３：表題
		1,	YES,	// 印字内容　４：精算情報
// GG129000(S) H.Fujinaga 2023/01/04 ゲート式車番チケットレスシステム対応（発券情報印字対応）
//		0,	NO,		// 印字内容　５：＜未使用＞
		1,	YES,	// 印字内容　５：発券情報
// GG129000(E) H.Fujinaga 2023/01/04 ゲート式車番チケットレスシステム対応（発券情報印字対応）
		0,	NO,		// 印字内容　６：＜未使用＞
// MH810100(S) K.Onodera  2020/01/29 車番チケットレス(再精算対応)
//		1,	YES,	// 印字内容　７：入庫時刻
		2,	YES,	// 印字内容　７：入庫時刻
// MH810100(E) K.Onodera  2020/01/29 車番チケットレス(再精算対応)
// MH810103(s) 電子マネー対応 みなし決済プリント対応
//// MH810100(S) m.saito 2020/05/25 車番チケットレス(#3908 領収証印字：未精算出庫対応)
////		1,	YES,	// 印字内容　８：出庫（精算）時刻
//		2,	YES,	// 印字内容　８：出庫（精算）時刻
//// MH810100(E) m.saito 2020/05/25 車番チケットレス(#3908 領収証印字：未精算出庫対応)
		3,	YES,	// 印字内容　８：出庫（精算）時刻
// MH810103(e) 電子マネー対応 みなし決済プリント対応
		1,	YES,	// 印字内容　９：駐車時間
		1,	YES,	// 印字内容１０：駐車料金
		3,	YES,	// 印字内容１１：定期券種別、契約Ｎｏ．、有効期限、料金種別
		24,	YES,	// 印字内容１２：サービス券（ｻｰﾋﾞｽ券A,B,C×４（駐車場Ｎｏ．種別数））＋（中止ｻｰﾋﾞｽ券A,B,C×４（駐車場Ｎｏ．種別数））
		40,	YES,	// 印字内容１３：店割引（ｻｰﾋﾞｽ券使用可能枚数（２０）×２行）
		40,	YES,	// 印字内容１４：割引券（ｻｰﾋﾞｽ券使用可能枚数（２０）×２行）
		21,	YES,	// 印字内容１５：プリペイドカード（ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ使用可能枚数（５）×４行＋１行（精算中止額））
		20,	YES,	// 印字内容１６：回数券（ｻｰﾋﾞｽ券使用可能枚数（２０）×１行）
		0,	NO,		// 印字内容１７：＜未使用＞
		1,	YES,	// 印字内容１８：前回時間割引
		1,	YES,	// 印字内容１９：前回料金割引
		1,	YES,	// 印字内容２０：前回％割引
		0,	NO,		// 印字内容２１：＜未使用＞
		1,	YES,	// 印字内容２２：消費税
		1,	YES,	// 印字内容２３：クレジットカード支払額
		1,	YES,	// 印字内容２４：合計金額
		1,	YES,	// 印字内容２５：預り金額
		1,	YES,	// 印字内容２６：釣り銭額
		1,	YES,	// 印字内容２７：釣り切れ情報
		4,	NO,		// 印字内容２８：フッター
		0,	NO,		// 印字内容２９：＜未使用＞
		0,	NO,		// 印字内容３０：＜未使用＞
		0,	NO,		// 印字内容３１：＜未使用＞
		0,	NO,		// 印字内容３２：＜未使用＞
		0,	NO,		// 印字内容３３：＜未使用＞
		0,	NO,		// 印字内容３４：＜未使用＞
		0,	NO,		// 印字内容３５：＜未使用＞
		1,	YES,	// 印字内容３６：クレジットカード会社名
		1,	YES,	// 印字内容３７：クレジットカード会員コード
		1,	YES,	// 印字内容３８：クレジットカード伝票Ｎｏ．
		1,	YES,	// 印字内容３９：クレジットカード承認番号
		0,	NO,		// 印字内容４０：＜未使用＞
		8,	YES,	// 印字内容４１：修正精算情報
		0,	NO,		// 印字内容４２：＜未使用＞
		0,	NO,		// 印字内容４３：＜未使用＞
		0,	NO,		// 印字内容４４：＜未使用＞
		0,	NO,		// 印字内容４５：＜未使用＞
		0,	NO,		// 印字内容４６：＜未使用＞
		0,	NO,		// 印字内容４７：＜未使用＞
		0,	NO,		// 印字内容４８：＜未使用＞
		0,	NO,		// 印字内容４９：＜未使用＞
		0,	NO,		// 印字内容５０：＜未使用＞
		4,	NO,		// 印字内容５１：クレジットカード支払いコード・署名欄
		4,	NO,		// 印字内容５２：クレジットカード加盟店名
		1,	YES,	// 印字内容５３：クレジットカードセンタ処理日時・センタ通番
		1,	YES,	// 印字内容５４：クレジットカード端末識別番号
		1,	NO,		// 印字内容５５：クレジット精算時のスペース
		0,	NO,		// 印字内容５６：＜未使用＞
		0,	NO,		// 印字内容５７：＜未使用＞
		0,	NO,		// 印字内容５８：＜未使用＞
		0,	NO,		// 印字内容５９：＜未使用＞
		6,	YES,	// 印字内容６０：＜Suica/Edy＞
		4,	YES,	// 印字内容６１：iD精算
		0,	NO,		// 印字内容６２：＜未使用＞
		0,	NO,		// 印字内容６３：＜未使用＞
		0,	NO,		// 印字内容６４：＜未使用＞
		0,	NO,		// 印字内容６５：＜未使用＞
		0,	NO,		// 印字内容６６：＜未使用＞
		0,	NO,		// 印字内容６７：＜未使用＞
		0,	NO,		// 印字内容６８：＜未使用＞
		0,	NO,		// 印字内容６９：＜未使用＞
		0,	NO,		// 印字内容７０：＜未使用＞
		0,	NO,		// 印字内容７１：＜未使用＞
		0,	NO,		// 印字内容７２：＜未使用＞
		0,	NO,		// 印字内容７３：＜未使用＞
		0,	NO,		// 印字内容７４：＜未使用＞
		0,	NO,		// 印字内容７５：＜未使用＞
		0,	NO,		// 印字内容７６：＜未使用＞
		0,	NO,		// 印字内容７７：＜未使用＞
		0,	NO,		// 印字内容７８：＜未使用＞
		1,	YES,	// 印字内容７９：駐車位置番号
		0,	NO,		// 印字内容８０：＜未使用＞
		0,	NO,		// 印字内容８１：＜未使用＞
		0,	NO,		// 印字内容８２：＜未使用＞
		0,	NO,		// 印字内容８３：＜未使用＞
		0,	NO,		// 印字内容８４：＜未使用＞
		0,	NO,		// 印字内容８５：＜未使用＞
		0,	NO,		// 印字内容８６：＜未使用＞
		0,	NO,		// 印字内容８７：＜未使用＞
		0,	NO,		// 印字内容８８：＜未使用＞
		3,	YES,	// 印字内容８９：定期更新時の期限案内メッセージ
		2,	NO,		// 印字内容９０：釣り切れ時の固定メッセージ１
		2,	NO,		// 印字内容９１：釣り切れ時の固定メッセージ２
		2,	NO,		// 印字内容９２：釣り切れ時の固定メッセージ３
		1,	NO,		// 印字内容９３：釣り切れ時の固定メッセージ４
		1,	NO,		// 印字内容９４：固定メッセージ１
		1,	NO,		// 印字内容９５：固定メッセージ２
		1,	NO,		// 印字内容９６：固定メッセージ３
		1,	NO,		// 印字内容９７：固定メッセージ４
		1,	NO,		// 印字内容９８：仕切り行
		1,	NO,		// 印字内容９９：スペース
		2,	NO,		// 印字内容１００：定期券更新時のラベル発行メッセージ
		1,	NO,		// 印字内容１０１：定期券更新不可時のメッセージ
		0,	NO,		// 印字内容１０２：＜未使用＞
		0,	NO,		// 印字内容１０３：＜未使用＞
		0,	NO,		// 印字内容１０４：＜未使用＞
		0,	NO,		// 印字内容１０５：＜未使用＞
		0,	NO,		// 印字内容１０６：＜未使用＞
		0,	NO,		// 印字内容１０７：＜未使用＞
		0,	NO,		// 印字内容１０８：＜未使用＞
		0,	NO,		// 印字内容１０９：＜未使用＞
		1,	YES,	// 印字内容１１０：現金領収額
		1,	YES,	// 印字内容１１１：ﾌﾟﾘﾍﾟｲﾄﾞ利用額
		1,	YES,	// 印字内容１１２：回数券利用額
		1,	YES,	// 印字内容１１３：ｸﾚｼﾞｯﾄ利用額
		1,	YES,	// 印字内容１１４：電子媒体利用額
		0,	NO,		// 印字内容１１５：＜未使用＞
		0,	NO,		// 印字内容１１６：＜未使用＞
		0,	NO,		// 印字内容１１７：＜未使用＞
		0,	NO,		// 印字内容１１８：＜未使用＞
		0,	NO,		// 印字内容１１９：＜未使用＞
		0,	NO,		// 印字内容１２０：＜未使用＞
		0,	NO,		// 印字内容１２１：＜未使用＞
		1,	YES,	// 印字内容１２２：内消費税等
		0,	NO,		// 印字内容１２３：＜未使用＞
		1,	YES,	// 印字内容１２４：合  計
		1,	YES,	// 印字内容１２５：お預り
		1,	YES,	// 印字内容１２６：お釣り
		0,	NO,		// 印字内容１２７：＜未使用＞
		0,	NO,		// 印字内容１２８：＜未使用＞
		0,	NO,		// 印字内容１２９：＜未使用＞
		0,	NO,		// 印字内容１３０：＜未使用＞
		1,	YES,	// 印字内容１３１：前回中止時のプリペイドカード利用額
		1,	YES,	// 印字内容１３２：前回中止時の回数券利用額
		0,	NO,		// 印字内容１３３：＜未使用＞
		0,	NO,		// 印字内容１３４：＜未使用＞
		0,	NO,		// 印字内容１３５：＜未使用＞
		0,	NO,		// 印字内容１３６：＜未使用＞
		0,	NO,		// 印字内容１３７：＜未使用＞
		0,	NO,		// 印字内容１３８：＜未使用＞
		0,	NO,		// 印字内容１３９：＜未使用＞
		0,	NO,		// 印字内容１４０：＜未使用＞
		21,	YES,	// 印字内容１４１：ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ利用明細
		20,	YES,	// 印字内容１４２：回数券利用明細
		0,	NO,		// 印字内容１４３：＜未使用＞
// MH321800(S) D.Inaba ICクレジット対応
//		6,	YES,	// 印字内容１４４：電子決済ｶｰﾄﾞ利用明細
	   11,	YES,	// 印字内容１４４：電子決済ｶｰﾄﾞ利用明細
// MH321800(E) D.Inaba ICクレジット対応
		0,	NO,		// 印字内容１４５：＜未使用＞
		0,	NO,		// 印字内容１４６：＜未使用＞
		0,	NO,		// 印字内容１４７：＜未使用＞
		0,	NO,		// 印字内容１４８：＜未使用＞
		0,	NO,		// 印字内容１４９：＜未使用＞
		0,	NO,		// 印字内容１５０：＜未使用＞
		0,	NO,		// 印字内容１５１：＜未使用＞
		0,	NO,		// 印字内容１５２：＜未使用＞
		0,	NO,		// 印字内容１５３：＜未使用＞
		0,	NO,		// 印字内容１５４：＜未使用＞
		0,	NO,		// 印字内容１５５：＜未使用＞
		0,	NO,		// 印字内容１５６：＜未使用＞
		0,	NO,		// 印字内容１５７：＜未使用＞
		0,	NO,		// 印字内容１５８：＜未使用＞
		0,	NO,		// 印字内容１５９：＜未使用＞
// MH810100(S) K.Onodera  2020/01/14 車番チケットレス(領収証：車番情報印字対応)
//		0,	NO,		// 印字内容１６０：＜未使用＞
//		0,	NO,		// 印字内容１６１：＜未使用＞
//		0,	NO,		// 印字内容１６２：＜未使用＞
		1,	YES,	// 印字内容１６０：車番(入力)
		1,	YES,	// 印字内容１６１：車番(精算)
		2,	YES,	// 印字内容１６２：車番データID
// MH810100(E) K.Onodera  2020/01/14 車番チケットレス(領収証：車番情報印字対応)
		0,	NO,		// 印字内容１６３：＜未使用＞
		0,	NO,		// 印字内容１６４：＜未使用＞
		0,	NO,		// 印字内容１６５：＜未使用＞
		0,	NO,		// 印字内容１６６：＜未使用＞
		0,	NO,		// 印字内容１６７：＜未使用＞
		0,	NO,		// 印字内容１６８：＜未使用＞
		0,	NO,		// 印字内容１６９：＜未使用＞
		0,	NO,		// 印字内容１７０：＜未使用＞
		0,	NO,		// 印字内容１７１：＜未使用＞
		0,	NO,		// 印字内容１７２：＜未使用＞
		0,	NO,		// 印字内容１７３：＜未使用＞
		0,	NO,		// 印字内容１７４：＜未使用＞
		0,	NO,		// 印字内容１７５：＜未使用＞
		0,	NO,		// 印字内容１７６：＜未使用＞
		0,	NO,		// 印字内容１７７：＜未使用＞
		0,	NO,		// 印字内容１７８：＜未使用＞
		0,	NO,		// 印字内容１７９：＜未使用＞
		0,	NO,		// 印字内容１８０：＜未使用＞
		0,	NO,		// 印字内容１８１：＜未使用＞
		0,	NO,		// 印字内容１８２：＜未使用＞
		0,	NO,		// 印字内容１８３：＜未使用＞
		0,	NO,		// 印字内容１８４：＜未使用＞
		0,	NO,		// 印字内容１８５：＜未使用＞
		0,	NO,		// 印字内容１８６：＜未使用＞
		0,	NO,		// 印字内容１８７：＜未使用＞
		0,	NO,		// 印字内容１８８：＜未使用＞
		0,	NO,		// 印字内容１８９：＜未使用＞
		0,	NO,		// 印字内容１９０：＜未使用＞
		0,	NO,		// 印字内容１９１：＜未使用＞
		0,	NO,		// 印字内容１９２：＜未使用＞
		0,	NO,		// 印字内容１９３：＜未使用＞
		0,	NO,		// 印字内容１９４：＜未使用＞
		0,	NO,		// 印字内容１９５：＜未使用＞
		0,	NO,		// 印字内容１９６：＜未使用＞
// MH810105(S) MH364301 インボイス対応
//		0,	NO,		// 印字内容１９７：＜未使用＞
		1,	NO,		// 印字内容１９７：適用税率
// MH810105(E) MH364301 インボイス対応
		0,	NO,		// 印字内容１９８：仕切り線(印字しない)
		0,	NO,		// 印字内容１９９：＜未使用＞		
		4,	NO,		// 印字内容２００：釣切れ時の固定メッセージ		
		10,	NO,		// 印字内容２０１：Ｔカード使用時フッター		
		2,	YES,	// 印字内容２０２：Ｔカード会員番号・今回付与ポイント		
		2,	YES,	// 印字内容２０３：法人カード番号・利用金額		
		4,	NO,		// 印字内容２０４：＜釣り切れ時のフッター（可変）＞		
		0,	NO,		// 印字内容２０５：＜未使用＞		
		0,	NO,		// 印字内容２０６：＜未使用＞		
		0,	NO,		// 印字内容２０７：＜未使用＞		
		0,	NO,		// 印字内容２０８：＜未使用＞		
		0,	NO,		// 印字内容２０９：＜未使用＞		
		0,	NO,		// 印字内容２１０：＜未使用＞		
		0,	NO,		// 印字内容２１１：＜未使用＞		
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//		0,	NO,		// 印字内容２１２：＜未使用＞		
//		0,	NO,		// 印字内容２１３：＜未使用＞		
		44,	YES,	// 印字内容２１２：非課税媒体利用額
		46,	YES,	// 印字内容２１３：課税対象媒体利用額
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
		0,	NO,		// 印字内容２１４：＜未使用＞		
		0,	NO,		// 印字内容２１５：＜未使用＞		
		0,	NO,		// 印字内容２１６：＜未使用＞		
		0,	NO,		// 印字内容２１７：＜未使用＞		
		0,	NO,		// 印字内容２１８：＜未使用＞		
		0,	NO,		// 印字内容２１９：＜未使用＞		
		0,	NO,		// 印字内容２２０：＜未使用＞		
		0,	NO,		// 印字内容２２１：＜未使用＞		
		0,	NO,		// 印字内容２２２：＜未使用＞		
		0,	NO,		// 印字内容２２３：＜未使用＞		
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//		0,	NO,		// 印字内容２２４：＜未使用＞		
		2,	YES,	// 印字内容２２４：合計金額(適用税率付)
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
		0,	NO,		// 印字内容２２５：＜未使用＞		
		0,	NO,		// 印字内容２２６：＜未使用＞		
		0,	NO,		// 印字内容２２７：＜未使用＞		
		0,	NO,		// 印字内容２２８：＜未使用＞		
		0,	NO,		// 印字内容２２９：＜未使用＞		
		0,	NO,		// 印字内容２３０：＜未使用＞		
		0,	NO,		// 印字内容２３１：＜未使用＞		
		0,	NO,		// 印字内容２３２：＜未使用＞		
		0,	NO,		// 印字内容２３３：＜未使用＞		
		0,	NO,		// 印字内容２３４：＜未使用＞		
		0,	NO,		// 印字内容２３５：＜未使用＞		
		0,	NO,		// 印字内容２３６：＜未使用＞		
		0,	NO,		// 印字内容２３７：＜未使用＞		
		0,	NO,		// 印字内容２３８：＜未使用＞		
		0,	NO,		// 印字内容２３９：＜未使用＞		
// GG129000(S) H.Fujinaga 2022/12/05 ゲート式車番チケットレスシステム対応（QR駐車券対応）
//		0,	NO,		// 印字内容２４０：＜未使用＞		
		25,	NO,		// 印字内容２４０：＜QR駐車券＞
// GG129000(E) H.Fujinaga 2022/12/05 ゲート式車番チケットレスシステム対応（QR駐車券対応）
		0,	NO,		// 印字内容２４１：＜未使用＞		
		0,	NO,		// 印字内容２４２：＜未使用＞		
		0,	NO,		// 印字内容２４３：＜未使用＞		
		0,	NO,		// 印字内容２４４：＜未使用＞		
		0,	NO,		// 印字内容２４５：＜未使用＞		
		0,	NO,		// 印字内容２４６：＜未使用＞		
		0,	NO,		// 印字内容２４７：＜未使用＞		
		0,	NO,		// 印字内容２４８：＜未使用＞		
		0,	NO,		// 印字内容２４９：＜未使用＞		
	};

//	集計印字ﾃﾞｰﾀ編集処理ﾃﾞｰﾀﾃｰﾌﾞﾙ（ﾃﾞｰﾀ内容は以下に示す）
//	[印字内容番号][0]＝印字内容毎の最大編集行数
//	[印字内容番号][1]＝印字内容毎の複数台集計時の印字有無				（NO：印字しない YES：印字する）
//	[印字内容番号][2]＝印字内容毎の集計情報（Ｔ合計履歴）時の印字有無	（NO：印字しない YES：印字する）

const	uchar	syuukei_edit_tbl[250][3] =
	{
		0,	NO,	NO,		// 印字内容　０：未使用
		4,	YES,NO,		// 印字内容　１：ロゴ
		4,	YES,NO,		// 印字内容　２：ヘッダー
		9,	YES,YES,	// 印字内容　３：表題
		1,	YES,YES,	// 印字内容　４：総現金売上額
		1,	YES,YES,	// 印字内容　５：総掛売額
		1,	YES,YES,	// 印字内容　６：総売上額
		1,	YES,YES,	// 印字内容　７：総税金額
		1,	YES,YES,	// 印字内容　８：総精算回数
		12,	YES,YES,	// 印字内容　９：総入・出庫台数
		0,	NO,	NO,		// 印字内容１０：紛失精算回数・紛失精算現金売上額＜未使用＞
		24,	YES,YES,	// 印字内容１１：料金種別毎精算回数・現金領収額		（料金種別数（１２）×２行）
		24,	YES,YES,	// 印字内容１２：料金種別毎割引回数・金額			（料金種別数（１２）×２行）
		2,	YES,YES,	// 印字内容１３：ｸﾚｼﾞｯﾄｶｰﾄﾞ精算回数・金額
		2,	YES,YES,	// 印字内容１４：基本	ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ使用回数・金額
		2,	YES,YES,	// 印字内容１５：拡張１	ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ使用回数・金額
		2,	YES,YES,	// 印字内容１６：拡張２	ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ使用回数・金額
		2,	YES,YES,	// 印字内容１７：基本	回数券使用回数・金額
		2,	YES,YES,	// 印字内容１８：拡張１	回数券使用回数・金額
		2,	YES,YES,	// 印字内容１９：拡張２	回数券使用回数・金額
		30,	YES,YES,	// 印字内容２０：基本	ｻｰﾋﾞｽ券種別毎精算枚数・金額	（ｻｰﾋﾞｽ券種別数（１５）×２行）
		30,	YES,YES,	// 印字内容２１：拡張１	ｻｰﾋﾞｽ券種別毎精算枚数・金額	（ｻｰﾋﾞｽ券種別数（１５）×２行）
		30,	YES,YES,	// 印字内容２２：拡張２	ｻｰﾋﾞｽ券種別毎精算枚数・金額	（ｻｰﾋﾞｽ券種別数（１５）×２行）
		204,YES,YES,	// 印字内容２３：基本	店Ｎｏ．毎割引回数・金額	（店Ｎｏ．数（１００）×２行＋合計種別数（２）×２行）
		204,YES,YES,	// 印字内容２４：拡張１	店Ｎｏ．毎割引回数・金額	（店Ｎｏ．数（１００）×２行＋合計種別数（２）×２行）
		204,YES,YES,	// 印字内容２５：拡張２	店Ｎｏ．毎割引回数・金額	（店Ｎｏ．数（１００）×２行＋合計種別数（２）×２行）
		202,YES,YES,	// 印字内容２６：基本	割引券使用回数・金額		（割引種別数（１００）×２行＋合計種別数（１）×２行）
		202,YES,YES,	// 印字内容２７：拡張１	割引券使用回数・金額		（割引種別数（１００）×２行＋合計種別数（１）×２行）
		202,YES,YES,	// 印字内容２８：拡張２	割引券使用回数・金額		（割引種別数（１００）×２行＋合計種別数（１）×２行）
		0,	NO,	NO,		// 印字内容２９：＜未使用＞
		0,	NO,	NO,		// 印字内容３０：＜未使用＞
		0,	NO,	NO,		// 印字内容３１：＜未使用＞
		15,	YES,YES,	// 印字内容３２：基本	定期種別毎使用回数			（定期種別数（１５）×１行）
		15,	YES,YES,	// 印字内容３３：拡張１	定期種別毎使用回数			（定期種別数（１５）×１行）
		15,	YES,YES,	// 印字内容３４：拡張２	定期種別毎使用回数			（定期種別数（１５）×１行）
		30,	YES,YES,	// 印字内容３５：基本	定期種別毎更新回数・金額	（定期種別数（１５）×２行）
		30,	YES,YES,	// 印字内容３６：拡張１	定期種別毎更新回数・金額	（定期種別数（１５）×２行）
		30,	YES,YES,	// 印字内容３７：拡張２	定期種別毎更新回数・金額	（定期種別数（１５）×２行）
		0,	NO,	NO,		// 印字内容３８：＜未使用＞
		0,	NO,	NO,		// 印字内容３９：＜未使用＞
		101,YES,YES,	// 印字内容４０：分類集計							（分類集計種別（１行）＋（区分数（４８）×２行）＋４行）
		0,	NO,	NO,		// 印字内容４１：＜未使用＞
		1,	YES,YES,	// 印字内容４２：領収証発行回数
		1,	YES,YES,	// 印字内容４３：サービスタイム内精算回数
		0,	NO,	NO,		// 印字内容４４：＜未使用＞
		1,	YES,YES,	// 印字内容４５：強制アンチパスＯＦＦ精算回数
		0,	NO,	NO,		// 印字内容４６：＜未使用＞
		10,	NO,	YES,	// 印字内容４７：追番範囲
		1,	YES,YES,	// 印字内容４８：ラグタイム延長回数
		0,	NO,	NO,		// 印字内容４９：＜未使用＞
// MH810103 GG119202(S) 決済リーダー用集計印字設定追加
//// GG116200(S) D.Inaba ICクレジット対応
//// 		4,	YES,YES,	// 印字内容５０：Suica使用回数・金額
//		26,	YES,YES,	// 印字内容５０：Suica使用回数・金額
//// GG116200(E) D.Inaba ICクレジット対応
 		4,	YES,YES,	// 印字内容５０：Suica使用回数・金額
// MH810103 GG119202(E) 決済リーダー用集計印字設定追加
		4,	YES,YES,	// 印字内容５１：Pasmo使用回数・金額
		4,	YES,YES,	// 印字内容５２：Edy使用回数・金額
		2,	YES,YES,	// 印字内容５３：iDｸﾚｼﾞｯﾄ精算回数・金額
		0,	NO,	NO,		// 印字内容５４：＜未使用＞
		0,	NO,	NO,		// 印字内容５５：＜未使用＞
		0,	NO,	NO,		// 印字内容５６：＜未使用＞
		0,	NO,	NO,		// 印字内容５７：＜未使用＞
		0,	NO,	NO,		// 印字内容５８：＜未使用＞
		0,	NO,	NO,		// 印字内容５９：＜未使用＞
		0,	NO,	NO,		// 印字内容６０：＜未使用＞
		0,	NO,	NO,		// 印字内容６１：＜未使用＞
		0,	NO,	NO,		// 印字内容６２：＜未使用＞
		0,	NO,	NO,		// 印字内容６３：＜未使用＞
		0,	NO,	NO,		// 印字内容６４：＜未使用＞
		0,	NO,	NO,		// 印字内容６５：＜未使用＞
		0,	NO,	NO,		// 印字内容６６：＜未使用＞
		0,	NO,	NO,		// 印字内容６７：＜未使用＞
		0,	NO,	NO,		// 印字内容６８：＜未使用＞
		0,	NO,	NO,		// 印字内容６９：＜未使用＞
		0,	NO,	NO,		// 印字内容７０：＜未使用＞
		0,	NO,	NO,		// 印字内容７１：＜未使用＞
		0,	NO,	NO,		// 印字内容７２：＜未使用＞
		0,	NO,	NO,		// 印字内容７３：＜未使用＞
		0,	NO,	NO,		// 印字内容７４：＜未使用＞
		0,	NO,	NO,		// 印字内容７５：＜未使用＞
		0,	NO,	NO,		// 印字内容７６：＜未使用＞
		0,	NO,	NO,		// 印字内容７７：＜未使用＞
		0,	NO,	NO,		// 印字内容７８：＜未使用＞
		0,	NO,	NO,		// 印字内容７９：＜未使用＞
		2,	YES,YES,	// 印字内容８０：拡張３	ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ使用回数・金額
		2,	YES,YES,	// 印字内容８１：拡張３	回数券使用回数・金額
		30,	YES,YES,	// 印字内容８２：拡張３	ｻｰﾋﾞｽ券種別毎精算枚数・金額	（ｻｰﾋﾞｽ券種別数（１５）×２行）
		204,YES,YES,	// 印字内容８３：拡張３	店Ｎｏ．毎割引回数・金額	（店Ｎｏ．数（１００）×２行＋合計種別数（２）×２行）
		202,YES,YES,	// 印字内容８４：拡張３	割引券使用回数・金額		（割引種別数（１００）×２行＋合計種別数（１）×２行）
		15,	YES,YES,	// 印字内容８５：拡張３	定期種別毎使用回数			（定期種別数（１５）×１行）
		30,	YES,YES,	// 印字内容８６：拡張３	定期種別毎更新回数・金額	（定期種別数（１５）×２行）
		0,	NO,	NO,		// 印字内容８７：＜未使用＞
		0,	NO,	NO,		// 印字内容８８：＜未使用＞
		0,	NO,	NO,		// 印字内容８９：＜未使用＞
		0,	NO,	NO,		// 印字内容９０：＜未使用＞
		0,	NO,	NO,		// 印字内容９１：＜未使用＞
		0,	NO,	NO,		// 印字内容９２：＜未使用＞
		0,	NO,	NO,		// 印字内容９３：＜未使用＞
		0,	NO,	NO,		// 印字内容９４：＜未使用＞
		0,	NO,	NO,		// 印字内容９５：＜未使用＞
		0,	NO,	NO,		// 印字内容９６：＜未使用＞
		0,	NO,	NO,		// 印字内容９７：＜未使用＞
		1,	YES,YES,	// 印字内容９８：仕切り行
		1,	YES,YES,	// 印字内容９９：スペース
		0,	NO,	NO,		// 印字内容１００：＜未使用＞
		2,	YES,YES,	// 印字内容１０１：払出不足回数・金額
		1,	YES,YES,	// 印字内容１０２：金庫挿入金額
		5,	YES,YES,	// 印字内容１０３：紙幣金庫入金額
		5,	YES,YES,	// 印字内容１０４：コイン金庫入金額
		27,	NO,	YES,	// 印字内容１０５：金銭データ
		0,	NO,	NO,		// 印字内容１０６：＜未使用＞
		0,	NO,	NO,		// 印字内容１０７：＜未使用＞
		0,	NO,	NO,		// 印字内容１０８：＜未使用＞
		0,	NO,	NO,		// 印字内容１０９：＜未使用＞
		2,	YES,YES,	// 印字内容１１０：精算中止回数・精算中止現金売上額
		0,	NO,	NO,		// 印字内容１１１：＜未使用＞
		0,	NO,	NO,		// 印字内容１１２：＜未使用＞
		0,	NO,	NO,		// 印字内容１１３：＜未使用＞
		1,	NO,	YES,	// 印字内容１１４：ホッパー（循環コイン）合計回数
		1,	NO,	YES,	// 印字内容１１５：紙幣払出機合計回数
		1,	YES,YES,	// 印字内容１１６：コイン金庫合計回数
		1,	YES,YES,	// 印字内容１１７：紙幣金庫合計回数
		0,	NO,	NO,		// 印字内容１１８：未使用
		1,	YES,YES,	// 印字内容１１９：釣銭払戻額
		0,	NO,	NO,		// 印字内容１２０：未使用
		0,	NO,	NO,		// 印字内容１２１：未使用
		1,	YES,YES,	// 印字内容１２２：預り証発行回数
		0,	NO,	NO,		// 印字内容１２３：未使用
		0,	NO,	NO,		// 印字内容１２４：未使用
		0,	NO,	NO,		// 印字内容１２５：未使用
		0,	NO,	NO,		// 印字内容１２６：未使用
		0,	NO,	NO,		// 印字内容１２７：未使用
		0,	NO,	NO,		// 印字内容１２８：未使用
		0,	NO,	NO,		// 印字内容１２９：未使用
		0,	NO,	NO,		// 印字内容１３０：未使用
		0,	NO,	NO,		// 印字内容１３１：未使用
		0,	NO,	NO,		// 印字内容１３２：未使用
		0,	NO,	NO,		// 印字内容１３３：未使用
		0,	NO,	NO,		// 印字内容１３４：未使用
		0,	NO,	NO,		// 印字内容１３５：未使用
		0,	NO,	NO,		// 印字内容１３６：未使用
		0,	NO,	NO,		// 印字内容１３７：未使用
		0,	NO,	NO,		// 印字内容１３８：未使用
		0,	NO,	NO,		// 印字内容１３９：未使用
		0,	NO,	NO,		// 印字内容１４０：未使用
		0,	NO,	NO,		// 印字内容１４１：未使用
		0,	NO,	NO,		// 印字内容１４２：未使用
		0,	NO,	NO,		// 印字内容１４３：未使用
		0,	NO,	NO,		// 印字内容１４４：未使用
		0,	NO,	NO,		// 印字内容１４５：未使用
		0,	NO,	NO,		// 印字内容１４６：未使用
		0,	NO,	NO,		// 印字内容１４７：未使用
		0,	NO,	NO,		// 印字内容１４８：未使用
		0,	NO,	NO,		// 印字内容１４９：未使用
		0,	NO,	NO,		// 印字内容１５０：未使用
// MH810105 GG119202(S) 処理未了取引集計仕様改善
//// MH810103 GG119202(S) 決済リーダー用集計印字設定追加
////		0,	NO,	NO,		// 印字内容１５１：未使用
//		26,	YES,YES,	// 印字内容１５１：決済リーダ 精算件数・金額
//						// (クレジット2行+各種電子マネー4行(交通系IC/Edy/WAON/nanaco/iD/QuicPay))
//// MH810103 GG119202(E) 決済リーダー用集計印字設定追加
// MH810105(S) MH364301 QRコード決済対応／PiTaPa対応
//		21,	YES,YES,	// 印字内容１５１：決済リーダ 精算件数・金額
//						// (クレジット2行+各種電子マネー2行(交通系IC/Edy/WAON/nanaco/iD/QUICPay)
//						//  みなし決済2行+処理未了取引5行)
		25,	YES,YES,	// 印字内容１５１：決済リーダ 精算件数・金額
						// (クレジット2行+各種電子マネー2行(交通系IC/Edy/WAON/nanaco/iD/QUICPay/PiTaPa)
						//  QR決済2行+みなし決済2行+処理未了取引5行)
// MH810105(E) MH364301 QRコード決済対応／PiTaPa対応
// MH810105 GG119202(E) 処理未了取引集計仕様改善
		0,	NO,	NO,		// 印字内容１５２：未使用
		0,	NO,	NO,		// 印字内容１５３：未使用
		0,	NO,	NO,		// 印字内容１５４：未使用
		0,	NO,	NO,		// 印字内容１５５：未使用
		0,	NO,	NO,		// 印字内容１５６：未使用
		0,	NO,	NO,		// 印字内容１５７：未使用
		0,	NO,	NO,		// 印字内容１５８：未使用
		0,	NO,	NO,		// 印字内容１５９：未使用
		0,	NO,	NO,		// 印字内容１６０：未使用
		0,	NO,	NO,		// 印字内容１６１：未使用
		0,	NO,	NO,		// 印字内容１６２：未使用
		0,	NO,	NO,		// 印字内容１６３：未使用
		0,	NO,	NO,		// 印字内容１６４：未使用
		0,	NO,	NO,		// 印字内容１６５：未使用
		0,	NO,	NO,		// 印字内容１６６：未使用
		0,	NO,	NO,		// 印字内容１６７：未使用
		0,	NO,	NO,		// 印字内容１６８：未使用
		0,	NO,	NO,		// 印字内容１６９：未使用
		0,	NO,	NO,		// 印字内容１７０：未使用
		0,	NO,	NO,		// 印字内容１７１：未使用
		0,	NO,	NO,		// 印字内容１７２：未使用
		0,	NO,	NO,		// 印字内容１７３：未使用
		0,	NO,	NO,		// 印字内容１７４：未使用
		0,	NO,	NO,		// 印字内容１７５：未使用
		0,	NO,	NO,		// 印字内容１７６：未使用
		0,	NO,	NO,		// 印字内容１７７：未使用
		0,	NO,	NO,		// 印字内容１７８：未使用
		0,	NO,	NO,		// 印字内容１７９：未使用
		2,	YES,YES,	// 印字内容１８０：強制出庫回数・金額
		2,	YES,YES,	// 印字内容１８１：不正出庫回数・金額
		2,	YES,YES,	// 印字内容１８２：修正精算回数・金額
		1,	YES,YES,	// 印字内容１８３：受付券発行枚数
		255,NO,	NO,		// 印字内容１８４：駐車位置別集計（駐車位置数×９行）
		2,	YES,YES,	// 印字内容１８５：未入金回数・金額
		0,	NO,	NO,		// 印字内容１８６：未使用
		0,	NO,	NO,		// 印字内容１８７：未使用
		0,	NO,	NO,		// 印字内容１８８：未使用
		0,	NO,	NO,		// 印字内容１８９：未使用
// MH810100(S) K.Onodera  2020/03/06 #4006 車番チケットレス(遠隔精算回数/金額がログファイルプリントで印字されない不具合対応)
//		0,	NO,	NO,		// 印字内容１９０：未使用
		2,	YES,YES,	// 印字内容１９０：遠隔精算 減額精算回数・金額
// MH810100(E) K.Onodera  2020/03/06 #4006 車番チケットレス(遠隔精算回数/金額がログファイルプリントで印字されない不具合対応)
		0,	NO,	NO,		// 印字内容１９１：未使用
		0,	NO,	NO,		// 印字内容１９２：未使用
		0,	NO,	NO,		// 印字内容１９３：未使用
		0,	NO,	NO,		// 印字内容１９４：未使用
		0,	NO,	NO,		// 印字内容１９５：未使用
		0,	NO,	NO,		// 印字内容１９６：未使用
		0,	NO,	NO,		// 印字内容１９７：未使用
		0,	NO,	NO,		// 印字内容１９８：未使用
		0,	NO,	NO,		// 印字内容１９９：未使用
		2,	YES,YES,	// 印字内容２００：Tカード使用回数・総付与ポイント
		2,	YES,YES,	// 印字内容２０１：法人カード使用回数・金額
		0,	NO,	NO,		// 印字内容２０３：未使用
		0,	NO,	NO,		// 印字内容２０４：未使用
		0,	NO,	NO,		// 印字内容２０５：未使用
		0,	NO,	NO,		// 印字内容２０６：未使用
		0,	NO,	NO,		// 印字内容２０７：未使用
		0,	NO,	NO,		// 印字内容２０８：未使用
		0,	NO,	NO,		// 印字内容２０９：未使用
		0,	NO,	NO,		// 印字内容２１０：未使用
		0,	NO,	NO,		// 印字内容２１１：未使用
		0,	NO,	NO,		// 印字内容２１２：未使用
		0,	NO,	NO,		// 印字内容２１３：未使用
		0,	NO,	NO,		// 印字内容２１４：未使用
		0,	NO,	NO,		// 印字内容２１５：未使用
		0,	NO,	NO,		// 印字内容２１６：未使用
		0,	NO,	NO,		// 印字内容２１７：未使用
		0,	NO,	NO,		// 印字内容２１８：未使用
		0,	NO,	NO,		// 印字内容２１９：未使用
		0,	NO,	NO,		// 印字内容２２０：未使用
		0,	NO,	NO,		// 印字内容２２１：未使用
		0,	NO,	NO,		// 印字内容２２２：未使用
		0,	NO,	NO,		// 印字内容２２３：未使用
		0,	NO,	NO,		// 印字内容２２４：未使用
		0,	NO,	NO,		// 印字内容２２５：未使用
		0,	NO,	NO,		// 印字内容２２６：未使用
		0,	NO,	NO,		// 印字内容２２７：未使用
		0,	NO,	NO,		// 印字内容２２８：未使用
		0,	NO,	NO,		// 印字内容２２９：未使用
		0,	NO,	NO,		// 印字内容２３０：未使用
		0,	NO,	NO,		// 印字内容２３１：未使用
		0,	NO,	NO,		// 印字内容２３２：未使用
		0,	NO,	NO,		// 印字内容２３３：未使用
		0,	NO,	NO,		// 印字内容２３４：未使用
		0,	NO,	NO,		// 印字内容２３５：未使用
		0,	NO,	NO,		// 印字内容２３６：未使用
		0,	NO,	NO,		// 印字内容２３７：未使用
		0,	NO,	NO,		// 印字内容２３８：未使用
		0,	NO,	NO,		// 印字内容２３９：未使用
		0,	NO,	NO,		// 印字内容２４０：未使用
		0,	NO,	NO,		// 印字内容２４１：未使用
		0,	NO,	NO,		// 印字内容２４２：未使用
		0,	NO,	NO,		// 印字内容２４３：未使用
		0,	NO,	NO,		// 印字内容２４４：未使用
		0,	NO,	NO,		// 印字内容２４５：未使用
		0,	NO,	NO,		// 印字内容２４６：未使用
		0,	NO,	NO,		// 印字内容２４７：未使用
		0,	NO,	NO,		// 印字内容２４８：未使用
		0,	NO,	NO,		// 印字内容２４９：未使用
	};

// 分類集計種別毎の編集ﾃﾞｰﾀﾃｰﾌﾞﾙ（ﾃﾞｰﾀ内容は以下に示す）
//	[集計種別-1][0]＝１区分毎の編集行数
//	[集計種別-1][1]＝１行目印字ﾃﾞｰﾀの単位１
//	[集計種別-1][2]＝１行目印字ﾃﾞｰﾀの単位２
//	[集計種別-1][3]＝２行目印字ﾃﾞｰﾀの単位１
//	[集計種別-1][4]＝２行目印字ﾃﾞｰﾀの単位２
const	uchar	bunruisk_edit_tbl[BUNRUI_SYU_MAX][5] =
	{
		1,	PriT_DAISUU,	PriT_DAI,	0,				0,			// 分類集計種別１：駐車時間別		台数集計
		2,	PriT_DAISUU,	PriT_DAI,	PriT_KINGAK,	PriT_YEN,	// 分類集計種別２：駐車時間別		台数・料金集計
		1,	PriT_DAISUU,	PriT_DAI,	0,				0,			// 分類集計種別３：駐車料金別		台数集計
		2,	PriT_DAISUU,	PriT_DAI,	PriT_KINGAK,	PriT_YEN,	// 分類集計種別４：駐車料金別		台数・料金集計
		1,	PriT_INCAR,		PriT_DAI,	0,				0,			// 分類集計種別５：入庫時刻別		精算台数集計
		1,	PriT_SEISAN,	PriT_DAI,	0,				0,			// 分類集計種別６：精算時刻別		精算台数集計
		2,	PriT_INCAR,		PriT_DAI,	PriT_SEISAN,	PriT_DAI,	// 分類集計種別７：入庫・精算時刻別	精算台数集計
		1,	PriT_OUTCAR,	PriT_DAI,	0,				0,			// 分類集計種別８：出庫時刻別		精算台数集計
		2,	PriT_INCAR,		PriT_DAI,	PriT_OUTCAR,	PriT_DAI	// 分類集計種別９：入庫・出庫時刻別	精算台数集計
	};

//----------------------------------------------------------------------------------------------
//	釣銭管理集計ﾃﾞｰﾀ印字用
//----------------------------------------------------------------------------------------------
const char *TuriKan_Prn1[4] =	// ｺｲﾝ金種印字ﾃﾞｰﾀ
	{
		"＜ １０円 ＞",			// ０：１０円
		"＜ ５０円 ＞",			// １：５０円
		"＜ １００円 ＞",		// ２：１００円
		"＜ ５００円 ＞"		// ３：５００円
	};

//----------------------------------------------------------------------------------------------
//	設定ﾃﾞｰﾀ印字用
//----------------------------------------------------------------------------------------------
//	設定ﾃﾞｰﾀ印字ﾃﾞｰﾀ編集処理ﾃﾞｰﾀﾃｰﾌﾞﾙ（印字項目番号毎の最大編集行数ﾃﾞｰﾀ）
const	uchar	settei_edit_tbl[4] =
	{
		5,		// 項目番号０：表題
		6,		// 項目番号１：ソフトバージョン
		3,		// 項目番号２：MACアドレス
		255		// 項目番号３：共通パラメータ
	};

//	共通ﾊﾟﾗﾒｰﾀ項目（ｾｯｼｮﾝ）毎の設定ﾃﾞｰﾀ数（ｱﾄﾞﾚｽ数）ﾃｰﾌﾞﾙ

const char *CprmTtl_Prn[C_PRM_SESCNT_MAX] =		// 共通ﾊﾟﾗﾒｰﾀｾｯｼｮﾝ毎の表題印字ﾃﾞｰﾀ
	{
		"",										// ｾｯｼｮﾝ00(ダミー)
		"０１（システム設定）",					// ｾｯｼｮﾝ01
		"０２（機器固有設定）",					// ｾｯｼｮﾝ02
// MH310100(S) S.Nishimoto 2020/08/21 車番チケットレス(#4596 設定プリントで「予約」セクション名が印字される)
//		"０３（精算機タイプ設定）",				// ｾｯｼｮﾝ03
// MH810103(S) R.Endo 2021/06/09 車番チケットレス フェーズ2.2 #5692 精算完了案内タイマー設定のマスクを外す
//		"０３（－－－－設定）",					// ｾｯｼｮﾝ03
		"０３（精算機タイプ設定）",				// ｾｯｼｮﾝ03
// MH810103(E) R.Endo 2021/06/09 車番チケットレス フェーズ2.2 #5692 精算完了案内タイマー設定のマスクを外す
// MH310100(E) S.Nishimoto 2020/08/21 車番チケットレス(#4596 設定プリントで「予約」セクション名が印字される)
		"０４（特別日設定）",					// ｾｯｼｮﾝ04
// MH810103(s) 電子マネー対応 設定プリントのセクション名修正
//// MH310100(S) S.Nishimoto 2020/08/21 車番チケットレス(#4596 設定プリントで「予約」セクション名が印字される)
////		"０５（定期券基本設定）",				// ｾｯｼｮﾝ05
//		"０５（－－－－設定）",					// ｾｯｼｮﾝ05
//// MH310100(E) S.Nishimoto 2020/08/21 車番チケットレス(#4596 設定プリントで「予約」セクション名が印字される)
		"０５（定期基本設定）",					// ｾｯｼｮﾝ05
// MH810103(e) 電子マネー対応 設定プリントのセクション名修正
		"０６（車種設定）",						// ｾｯｼｮﾝ06
		"０７（定期設定）",						// ｾｯｼｮﾝ07
		"０８（割引設定）",						// ｾｯｼｮﾝ08
		"０９（サービス券設定）",				// ｾｯｼｮﾝ09
		"１０（店割引設定）",					// ｾｯｼｮﾝ10
// MH810104(S) R.Endo 2021/08/18 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(設定プリント表題の変更)
//		"１１（－－－－設定）",					// ｾｯｼｮﾝ11
		"１１（多店舗割引設定）",				// ｾｯｼｮﾝ11
// MH810104(E) R.Endo 2021/08/18 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(設定プリント表題の変更)
		"１２（－－－－設定）",					// ｾｯｼｮﾝ12
// MH810100(S) K.Onodera 2020/02/06 車番チケットレス（設定プリント）
//		"１３（プリペイドカード／回数券設定）",	// ｾｯｼｮﾝ13
		"１３ (－－－－設定）",					// ｾｯｼｮﾝ13
// MH810100(E) K.Onodera 2020/02/06 車番チケットレス（設定プリント）
		"１４（集計設定）",						// ｾｯｼｮﾝ14
		"１５（集計プリント設定）",				// ｾｯｼｮﾝ15
		"１６（分類集計設定）",					// ｾｯｼｮﾝ16
		"１７（領収証プリント設定）",			// ｾｯｼｮﾝ17
		"１８（印字関連設定）",					// ｾｯｼｮﾝ18
		"１９（金種設定）",						// ｾｯｼｮﾝ19
		"２０（金銭管理設定）",					// ｾｯｼｮﾝ20
		"２１（出力信号設定）",					// ｾｯｼｮﾝ21
		"２２（入力信号設定）",					// ｾｯｼｮﾝ22
		"２３（－－－－設定）",					// ｾｯｼｮﾝ23
// MH310100(S) S.Nishimoto 2020/08/21 車番チケットレス(#4596 設定プリントで「予約」セクション名が印字される)
//		"２４（精算機表示設定）",				// ｾｯｼｮﾝ24
		"２４（－－－－設定）",					// ｾｯｼｮﾝ24
// MH310100(E) S.Nishimoto 2020/08/21 車番チケットレス(#4596 設定プリントで「予約」セクション名が印字される)
		"２５（精算機案内放送設定）",			// ｾｯｼｮﾝ25
// MH810104 GG119201(S) 電子ジャーナル対応
//		"２６（－－－－設定）",					// ｾｯｼｮﾝ26
		"２６（電子ジャーナル設定）",			// ｾｯｼｮﾝ26
// MH810104 GG119201(E) 電子ジャーナル対応
		"２７（パスワード設定）",				// ｾｯｼｮﾝ27
		"２８（料金計算基本設定）",				// ｾｯｼｮﾝ28
		"２９（料金計算サービスタイム設定）",	// ｾｯｼｮﾝ29
// MH810103(s) 電子マネー対応 設定プリントのセクション名修正
//// MH310100(S) S.Nishimoto 2020/08/21 車番チケットレス(#4596 設定プリントで「予約」セクション名が印字される)
////		"３０（定期料金体設定）",				// ｾｯｼｮﾝ30
//		"３０（－－－－設定）",					// ｾｯｼｮﾝ30
//// MH310100(E) S.Nishimoto 2020/08/21 車番チケットレス(#4596 設定プリントで「予約」セクション名が印字される)
		"３０（定期料金体設定）",				// ｾｯｼｮﾝ30
// MH810103(e) 電子マネー対応 設定プリントのセクション名修正
		"３１（昼夜帯／逓減帯料金設定）",		// ｾｯｼｮﾝ31
		"３２（－－－－設定）",					// ｾｯｼｮﾝ32
		"３３（－－－－設定）",					// ｾｯｼｮﾝ33
		"３４（ＮＴ－ＮＥＴ設定）",				// ｾｯｼｮﾝ34
// MH310100(S) S.Nishimoto 2020/08/21 車番チケットレス(#4596 設定プリントで「予約」セクション名が印字される)
//		"３５（電子決済カード設定）",			// ｾｯｼｮﾝ35
		"３５（－－－－設定）",					// ｾｯｼｮﾝ35
// MH310100(E) S.Nishimoto 2020/08/21 車番チケットレス(#4596 設定プリントで「予約」セクション名が印字される)
		"３６（遠隔設定）",						// ｾｯｼｮﾝ36
		"３７（－－－－設定）",					// ｾｯｼｮﾝ37
		"３８（クレジット設定）",				// ｾｯｼｮﾝ38
		"３９（－－－－設定）",  				// ｾｯｼｮﾝ39
// GM849100(S) 名鉄協商コールセンター対応（NT-NET端末間通信）
//		"４０（－－－－設定）",					// ｾｯｼｮﾝ40
		"４０（個別設定）",						// ｾｯｼｮﾝ40
// GM849100(E) 名鉄協商コールセンター対応（NT-NET端末間通信）
		"４１（標準通信モジュール設定）",		// ｾｯｼｮﾝ41
		"４２ (－－－－設定）",					// ｾｯｼｮﾝ42
		"４３ (－－－－設定）",					// ｾｯｼｮﾝ43
		"４４ (－－－－設定）",					// ｾｯｼｮﾝ44
		"４５ (－－－－設定）",					// ｾｯｼｮﾝ45
// MH310100(S) S.Nishimoto 2020/08/21 車番チケットレス(#4596 設定プリントで「予約」セクション名が印字される)
//		"４６ (車種別設定）",					// ｾｯｼｮﾝ46
		"４６ (－－－－設定）",					// ｾｯｼｮﾝ46
// MH310100(E) S.Nishimoto 2020/08/21 車番チケットレス(#4596 設定プリントで「予約」セクション名が印字される)
		"４７ (－－－－設定）",					// ｾｯｼｮﾝ47
// MH810100(S) K.Onodera 2020/02/06 車番チケットレス（設定プリント）
//		"４８ (－－－－設定）",					// ｾｯｼｮﾝ48
//		"４９ (－－－－設定）",					// ｾｯｼｮﾝ49
		"４８ (ＬＣＤ通信設定）",				// ｾｯｼｮﾝ48
// MH310100(S) S.Nishimoto 2020/08/21 車番チケットレス(#4596 設定プリントで「予約」セクション名が印字される)
//		"４９ (遠隔メンテナンス設定）",			// ｾｯｼｮﾝ49
		"４９ (－－－－設定）",			// ｾｯｼｮﾝ49
// MH310100(E) S.Nishimoto 2020/08/21 車番チケットレス(#4596 設定プリントで「予約」セクション名が印字される)
// MH810100(E) K.Onodera 2020/02/06 車番チケットレス（設定プリント）
// MH321800(S) G.So ICクレジット対応
//		"５０ (－－－－設定）",					// ｾｯｼｮﾝ50
		"５０ (決済リーダ設定）",				// ｾｯｼｮﾝ50
// MH321800(E) G.So ICクレジット対応
		"５１ (－－－－設定）",					// ｾｯｼｮﾝ51
		"５２ (－－－－設定）",					// ｾｯｼｮﾝ52
		"５３ (－－－－設定）",					// ｾｯｼｮﾝ53
		"５４ (－－－－設定）",					// ｾｯｼｮﾝ54
		"５５ (－－－－設定）",					// ｾｯｼｮﾝ55
		"５６ (車種別日毎最大料金設定）",		// ｾｯｼｮﾝ56
// MH810103(s) 電子マネー対応 設定プリントのセクション名修正
//// MH310100(S) S.Nishimoto 2020/08/21 車番チケットレス(#4596 設定プリントで「予約」セクション名が印字される)
////		"５７ (定期／第４～第９料金体設定）",	// ｾｯｼｮﾝ57
//		"５７ (－－－－設定）",					// ｾｯｼｮﾝ57
//// MH310100(E) S.Nishimoto 2020/08/21 車番チケットレス(#4596 設定プリントで「予約」セクション名が印字される)
		"５７ (定期／第４～第９料金体設定）",	// ｾｯｼｮﾝ57
// MH810103(e) 電子マネー対応 設定プリントのセクション名修正
		"５８ (昼夜帯／第４～第６料金設定）",	// ｾｯｼｮﾝ58
		"５９ (昼夜帯／第７～第９料金設定）",	// ｾｯｼｮﾝ59
// MH810100(S) K.Onodera 2020/02/06 車番チケットレス（設定プリント）
//		"６０ (－－－－設定）",					// ｾｯｼｮﾝ60
		"６０ (ＬＣＤモジュール専用設定）",		// ｾｯｼｮﾝ60
// MH810100(E) K.Onodera 2020/02/06 車番チケットレス（設定プリント）
	};

//----------------------------------------------------------------------------------------------
//	動作ｶｳﾝﾄ印字用	印字ﾃﾞｰﾀ
//----------------------------------------------------------------------------------------------
const char *DcName_Prn[MOV_CNT_MAX] =			// 動作ｶｳﾝﾄ名称印字ﾃﾞｰﾀ
	{
		"復電",									// 復電回数						Mov_cnt_dat[0]
		"ﾚｼｰﾄ印字",								// ﾚｼｰﾄﾌﾟﾘﾝﾀ印字行数			Mov_cnt_dat[1]
		"ﾚｼｰﾄｶｯﾀｰ",								// ﾚｼｰﾄﾌﾟﾘﾝﾀｶｯﾀｰ動作回数		Mov_cnt_dat[2]
		"ｼﾞｬｰﾅﾙ印字",							// ｼﾞｬｰﾅﾙﾌﾟﾘﾝﾀ印字行数			Mov_cnt_dat[3]
		"ｺｲﾝ読取",								// 硬貨読取枚数					Mov_cnt_dat[4]
		"ｺｲﾝ払出",								// 硬貨払出枚数					Mov_cnt_dat[5]
		"紙幣読取",								// 紙幣読取枚数					Mov_cnt_dat[6]
		"紙幣金庫抜取",							// 紙幣金庫抜取回数				Mov_cnt_dat[7]
// MH810100(S) Y.Yamauchi 2019/10/07 車番チケットレス(メンテナンス)
//		"磁気ﾘｰﾀﾞｰｼｬｯﾀｰ",						// 磁気ﾘｰﾀﾞｰｼｬｯﾀｰ動作回数		Mov_cnt_dat[8]
//		"磁気ﾘｰﾀﾞｰ動作",						// 磁気ﾘｰﾀﾞｰ動作回数			Mov_cnt_dat[10]
//		"　読取動作",							// 磁気ﾘｰﾀﾞｰ読取動作回数		Mov_cnt_dat[11]
//		"　読取ｴﾗｰ",							// 磁気ﾘｰﾀﾞｰ読取ｴﾗｰ回数			Mov_cnt_dat[12]
//		"　書込",								// 磁気ﾘｰﾀﾞｰ書込動作回数		Mov_cnt_dat[13]
//		"　ﾍﾞﾘﾌｧｲNG",							// 磁気ﾘｰﾀﾞｰ書込ﾍﾞﾘﾌｧｲＮＧ回数	Mov_cnt_dat[14]
//		"　印字",								// 磁気ﾘｰﾀﾞｰﾌﾟﾘﾝﾀ動作回数		Mov_cnt_dat[15]
//		"LCDﾊﾞｯｸﾗｲﾄ点灯",						// ﾊﾞｯｸﾗｲﾄ点灯動作時間			Mov_cnt_dat[16]
		"LCDﾓｼﾞｭｰﾙ起動",						// LCDﾓｼﾞｭｰﾙ起動時間			Mov_cnt_dat[8]
		"QRﾘｰﾀﾞｰ動作",							// ﾊﾞｯｸﾗｲﾄ点灯動作時間			Mov_cnt_dat[9]
// MH810100(E) Y.Yamauchi 2019/10/07 車番チケットレス(メンテナンス)
	};

const	uchar	Dc_Tanni[MOV_CNT_MAX] =			// 動作ｶｳﾝﾄ単位印字ﾃﾞｰﾀ
	{
		PriT_KAI,								// 復電回数						Mov_cnt_dat[0]
		PriT_GYOU,								// ﾚｼｰﾄﾌﾟﾘﾝﾀ印字行数			Mov_cnt_dat[1]
		PriT_KAI,								// ﾚｼｰﾄﾌﾟﾘﾝﾀｶｯﾀｰ動作回数		Mov_cnt_dat[2]
		PriT_GYOU,								// ｼﾞｬｰﾅﾙﾌﾟﾘﾝﾀ印字行数			Mov_cnt_dat[3]
		PriT_MAI,								// 硬貨読取枚数					Mov_cnt_dat[4]
		PriT_MAI,								// 硬貨払出枚数					Mov_cnt_dat[5]
		PriT_MAI,								// 紙幣読取枚数					Mov_cnt_dat[6]
		PriT_KAI,								// 紙幣金庫抜取回数				Mov_cnt_dat[7]
// MH810100(S) Y.Yamauchi 2019/10/07 車番チケットレス(メンテナンス)
//		PriT_KAI,								// 磁気ﾘｰﾀﾞｰｼｬｯﾀｰ動作回数		Mov_cnt_dat[8]
//		PriT_KAI,								// 磁気ﾘｰﾀﾞｰ動作回数			Mov_cnt_dat[10]
//		PriT_KAI,								// 磁気ﾘｰﾀﾞｰ読取動作回数		Mov_cnt_dat[11]
//		PriT_KAI,								// 磁気ﾘｰﾀﾞｰ読取ｴﾗｰ回数			Mov_cnt_dat[12]
//		PriT_KAI,								// 磁気ﾘｰﾀﾞｰ書込動作回数		Mov_cnt_dat[13]
//		PriT_KAI,								// 磁気ﾘｰﾀﾞｰ書込ﾍﾞﾘﾌｧｲＮＧ回数	Mov_cnt_dat[14]
//		PriT_KAI,								// 磁気ﾘｰﾀﾞｰﾌﾟﾘﾝﾀ動作回数		Mov_cnt_dat[15]
// MH810100(E) Y.Yamauchi 2019/10/07 車番チケットレス(メンテナンス)
		PriT_TIME,								// ﾊﾞｯｸﾗｲﾄ点灯動作回数	 　　	Mov_cnt_dat[16]
// MH810100(S) Y.Yamauchi 2019/10/18 車番チケットレス(メンテナンス)
		PriT_TIME,								// QRﾘｰﾀﾞｰ動作時間				Mov_cnt_dat[17]
// MH810100(E) Y.Yamauchi 2019/10/18 車番チケットレス(メンテナンス)		
	};

//----------------------------------------------------------------------------------------------
//	ﾛｯｸ装置動作ｶｳﾝﾄ印字用	印字ﾃﾞｰﾀ
//----------------------------------------------------------------------------------------------
const char *LkDcName_Prn[3] =					// ﾛｯｸ装置動作ｶｳﾝﾄ名称印字ﾃﾞｰﾀ
	{
		"動作回数",								// 動作回数		(ﾌﾗｯﾌﾟ装置)	MntFlapDoCount[CAR_LOCK_MAX][0]
												//				(ﾛｯｸ装置)	MntLockDoCount[BIKE_LOCK_MAX][0]
		"手動動作回数",							// 手動動作回数	(ﾌﾗｯﾌﾟ装置)	MntFlapDoCount[CAR_LOCK_MAX][1]
												//				(ﾛｯｸ装置)	MntLockDoCount[BIKE_LOCK_MAX][1]
		"故障回数"								// 故障回数回数	(ﾌﾗｯﾌﾟ装置)	MntFlapDoCount[CAR_LOCK_MAX][2]
												//				(ﾛｯｸ装置)	MntLockDoCount[BIKE_LOCK_MAX][2]
	};


//----------------------------------------------------------------------------------------------
//	車室情報印字用
//----------------------------------------------------------------------------------------------
const char *PkJouMode_Prn[10] =	// 駐車位置情報印字ﾃﾞｰﾀ
	{
		"空き（待機）",				// [0]:mode=0
		"ｻｰﾋﾞｽﾀｲﾑ（閉動作待ち）",	// [1]:mode=1（ｻｰﾋﾞｽﾀｲﾑ中）
		"駐車中（閉動作待ち）",		// [2]:mode=1（ｻｰﾋﾞｽﾀｲﾑ終了）
		"ｻｰﾋﾞｽﾀｲﾑ（閉鍵待ち）",		// [3]:mode=2（ｻｰﾋﾞｽﾀｲﾑ中）
		"駐車中（閉鍵待ち）",		// [4]:mode=2（ｻｰﾋﾞｽﾀｲﾑ終了）
		"ｻｰﾋﾞｽﾀｲﾑ（閉鍵済み）",		// [5]:mode=3（ｻｰﾋﾞｽﾀｲﾑ中）
		"駐車中（閉鍵済み）",		// [6]:mode=3（ｻｰﾋﾞｽﾀｲﾑ終了）
		"精算完了（開鍵待ち）",		// [7]:mode=4
		"精算完了（開鍵済み）",		// [8]:mode=5
		"状態異常"					// [9]:mode=0～5以外（範囲外）
	};

const char *PkJouCar_Prn[2] =	// 車両有無印字ﾃﾞｰﾀ（駐輪）
	{
		"駐輪ロック（車無）",	// ０：車両なし
		"駐輪ロック（車有）"	// １：車両あり
	};

const char *PkFlpCar_Prn[2] =	// 車両有無印字ﾃﾞｰﾀ（駐車）
	{
		"フラップ（車無）",	// ０：車両なし
		"フラップ（車有）"	// １：車両あり
	};

const char *PkJouLok_Prn[4] =	// ﾛｯｸ装置状態印字ﾃﾞｰﾀ
	{
		"開鍵",					// ０：開状態
		"閉鍵",					// １：閉状態
		"開鍵ロック",			// ２：開ﾛｯｸ状態
		"閉鍵ロック"			// ３：閉ﾛｯｸ状態
	};

const char *PkFlpMode_Prn[10] =	// 駐車位置情報印字ﾃﾞｰﾀ
	{
		"空き（待機）",				// [0]:mode=0
		"ｻｰﾋﾞｽﾀｲﾑ（上昇動作待ち）",	// [1]:mode=1（ｻｰﾋﾞｽﾀｲﾑ中）
		"駐車中（上昇動作待ち）",	// [2]:mode=1（ｻｰﾋﾞｽﾀｲﾑ終了）
		"ｻｰﾋﾞｽﾀｲﾑ（上昇待ち）",		// [3]:mode=2（ｻｰﾋﾞｽﾀｲﾑ中）
		"駐車中（上昇待ち）",		// [4]:mode=2（ｻｰﾋﾞｽﾀｲﾑ終了）
		"ｻｰﾋﾞｽﾀｲﾑ（上昇済み）",		// [5]:mode=3（ｻｰﾋﾞｽﾀｲﾑ中）
		"駐車中（上昇済み）",		// [6]:mode=3（ｻｰﾋﾞｽﾀｲﾑ終了）
		"精算完了（下降待ち）",		// [7]:mode=4
		"精算完了（下降済み）",		// [8]:mode=5
		"状態異常"					// [9]:mode=0～5以外（範囲外）
	};

const char *PkFlpLok_Prn[4] =	// ﾛｯｸ装置状態印字ﾃﾞｰﾀ
	{
		"下降",					// ０：下降状態
		"上昇",					// １：上昇状態
		"下降ロック",			// ２：上昇ﾛｯｸ状態
		"上昇ロック"			// ３：上昇ﾛｯｸ状態
	};
	
//----------------------------------------------------------------------------------------------
//	車室パラメータ印字用
//----------------------------------------------------------------------------------------------
const char *Bunrui_Prn[2] =				// 駐車/駐輪分類印字
	{
		"＝＝＝＝  駐車位置ﾊﾟﾗﾒｰﾀ  ＝＝＝＝",		// ０：駐車
		"＝＝＝＝  駐輪位置ﾊﾟﾗﾒｰﾀ  ＝＝＝＝",		// １：駐輪
	};

//----------------------------------------------------------------------------------------------
//	定期ｽﾃｰﾀｽ印字用
//----------------------------------------------------------------------------------------------
const char *TeikiD1Ttl_Prn[PKNO_SYU_CNT] =	// 定期有効／無効表題印字
	{
		"定期有効／無効（基本）",			// 基本	（駐車場Ｎｏ．種別：０）
		"定期有効／無効（拡張１）",			// 拡張1（駐車場Ｎｏ．種別：１）
		"定期有効／無効（拡張２）",			// 拡張2（駐車場Ｎｏ．種別：２）
		"定期有効／無効（拡張３）"			// 拡張3（駐車場Ｎｏ．種別：３）
	};

const char *TeikiD2Ttl_Prn[PKNO_SYU_CNT] =	// 定期入庫／出庫表題印字
	{
		"定期入庫／出庫（基本）",			// 基本	（駐車場Ｎｏ．種別：０）
		"定期入庫／出庫（拡張１）",			// 拡張1（駐車場Ｎｏ．種別：１）
		"定期入庫／出庫（拡張２）",			// 拡張2（駐車場Ｎｏ．種別：２）
		"定期入庫／出庫（拡張３）"			// 拡張3（駐車場Ｎｏ．種別：３）
	};

const char *TeikiDSts_Prn[5] =				// 定期ｽﾃｰﾀｽ項目名称印字
	{
		"------------  有  効  ------------",		// ０：有効
		"------------  無  効  ------------",		// １：無効
		"------------  入  庫  ------------",		// ２：入庫
		"------------  出  庫  ------------",		// ３：出庫
		"------------  初  回  ------------"		// ４：初回
	};

//	定期有効／無効印字ﾃﾞｰﾀ編集処理ﾃﾞｰﾀﾃｰﾌﾞﾙ（印字項目番号毎の最大編集行数ﾃﾞｰﾀ）
const	uchar	teikid1_edit_tbl[4] =
	{
		0,		// 項目番号０：ダミー
		5,		// 項目番号１：＜表題＞印字
		255,	// 項目番号２：＜有効＞印字
		255		// 項目番号３：＜無効＞印字
	};

//	定期入庫／出庫印字ﾃﾞｰﾀ編集処理ﾃﾞｰﾀﾃｰﾌﾞﾙ（印字項目番号毎の最大編集行数ﾃﾞｰﾀ）
const	uchar	teikid2_edit_tbl[5] =
	{
		0,		// 項目番号０：ダミー
		5,		// 項目番号１：＜表題＞印字
		255,	// 項目番号２：＜入庫＞印字
		255,	// 項目番号３：＜出庫＞印字
		255		// 項目番号４：＜初回＞印字
	};


//----------------------------------------------------------------------------------------------
//	ｻｰﾋﾞｽ券期限印字用	印字ﾃﾞｰﾀ
//----------------------------------------------------------------------------------------------
const char *SvsKigen_Prn[5] =					// ｻｰﾋﾞｽ券のｻｰﾋﾞｽ券種別印字ﾃﾞｰﾀ
	{
		"全て",									// 内容＝０（全て）
		"A",									// 内容＝１（ｻｰﾋﾞｽ券Ａ）
		"B",									// 内容＝２（ｻｰﾋﾞｽ券Ｂ）
		"C",									// 内容＝３（ｻｰﾋﾞｽ券Ｃ）
		"-"										// 内容＝４（不正ﾃﾞｰﾀ用）
	};
//----------------------------------------------------------------------------------------------
//	特別日印字用
//----------------------------------------------------------------------------------------------
const char *SplDay_Prn[5] =						// 特別日項目名称印字
	{
		"----------   特別期間   ----------",	// ０：特別期間
		"----------    特別日    ----------",	// １：特別日
		"-------  ハッピーマンデー  -------",	// ２：ハッピーマンデー
		"----------  特別年月日  ----------",	// ３：特別年月日
		"----------   特別曜日   ----------",	// ４：特別曜日
	};

//----------------------------------------------------------------------------------------------
//	各種ﾃﾞｰﾀ格納件数印字用	印字ﾃﾞｰﾀ
//----------------------------------------------------------------------------------------------
#define		ANYDATA_CNT		11				// 格納ﾃﾞｰﾀの印字項目数

const char *AnyData_Prn[ANYDATA_CNT] =		// 格納ﾃﾞｰﾀ種別印字ﾃﾞｰﾀ
	{
		"停復電情報",
		"エラー情報",
		"アラーム情報",
		"操作情報",
		"個別精算情報",
		"精算中止情報",
		"不正・強制出庫情報",
		"Ｔ合計情報",
		"金銭管理情報",
		"コイン金庫集計情報",
		"紙幣金庫集計情報"
	};

//----------------------------------------------------------------------------------------------
//	ﾌﾟﾘﾝﾀﾃｽﾄ印字用	印字ﾃﾞｰﾀ
//----------------------------------------------------------------------------------------------
const char *PriTest_FontB[] =		// ﾌｫﾝﾄＢﾃｽﾄ印字用
	{
		"===================  ﾌｫﾝﾄB  ===================",				// 0
		"ﾌｫﾝﾄB(ﾉｰﾏﾙ)",													// 1
		"ﾌｫﾝﾄB(ﾀﾃﾊﾞｲｶｸ)",												// 2
		"ﾌｫﾝﾄB(ﾖｺﾊﾞｲｶｸ)",												// 3
		"ﾌｫﾝﾄB(4ﾊﾞｲｶｸ)",												// 4
		"ﾌｫﾝﾄB(ｱﾝﾀﾞｰﾗｲﾝ1)",												// 5
		"ﾌｫﾝﾄB(ｱﾝﾀﾞｰﾗｲﾝ2)",												// 6
		"ﾌｫﾝﾄB(ｷｮｳﾁｮｳ)"													// 7
	};

const char *PriTest_FontA[] =		// ﾌｫﾝﾄＡﾃｽﾄ印字用
	{
		"=============  ﾌｫﾝﾄA  =============",							// 0
		"ﾌｫﾝﾄA(ﾉｰﾏﾙ)",													// 1
		"ﾌｫﾝﾄA(ﾀﾃﾊﾞｲｶｸ)",												// 2
		"ﾌｫﾝﾄA(ﾖｺﾊﾞｲｶｸ)",												// 3
		"ﾌｫﾝﾄA(4ﾊﾞｲｶｸ)",												// 4
		"ﾌｫﾝﾄA(ｱﾝﾀﾞｰﾗｲﾝ1)",												// 5
		"ﾌｫﾝﾄA(ｱﾝﾀﾞｰﾗｲﾝ2)",												// 6
		"ﾌｫﾝﾄA(ｷｮｳﾁｮｳ)"													// 7
	};

const char *PriTest_Kanji[] =		// 漢字（全角）ﾃｽﾄ印字用
	{
		"==========  漢字（全角）  ==========",							// 0
		"漢字（標準）",													// 1
		"漢字（縦倍角）",												// 2
		"漢字（横倍角）",												// 3
		"漢字（４倍角）",												// 4
		"漢字（アンダーライン１）",										// 5
		"漢字（アンダーライン２）",										// 6
		"漢字（強調）",													// 7
		"！”＃＄％＆’－＝＾～￥｜＠‘",								// 8
		"「｛；＋：＊」｝、＜。＞・？＿",								// 9
		"０１２３４５６７８９",											// 10
		"ａｂｃｄｅｆｇｈｉｊｋｌｍｎｏｐｑｒｓｔｕｖｗｘｙｚ",			// 11
		"ＡＢＣＤＥＦＧＨＩＪＫＬＭＮＯＰＱＲＳＴＵＶＷＸＹＺ",			// 12
		"アイウエオｧィゥェォ",											// 13
		"あいうえおぁぃぅぇぉ"											// 14
	};

const char *PriTest_Title[] =		// ﾃｽﾄ印字用タイトル
	{
		"==============  ロゴ  ==============",							// 0
		"============  ヘッダー  ============",							// 1
		"=========  預り証フッター  =========",							// 2
		"========  Ｔカードフッター  ========",							// 3
		"========  クレジット署名欄  ========",							// 4
		"============  フッター  ============"							// 5
	};

const char *Electron_prn[] =	// 電子決算時の見出し印字項目
	{
		"  Edy取引通番",	// Edy専用見出し項目【Edy取引通番】		[01]
		"  カード取引通番",	// Edy専用見出し項目【ｶｰﾄﾞ取引通番】	[02]
		"  上位端末ID",		// Edy専用見出し項目【上位端末ID】		[03]
		"Suica",			// Suica単独使用時						[03]
		"*Suica",			// Suica単独使用時（精算中止）			[04]
		"*Suica/ﾌﾟﾘﾍﾟｲﾄﾞ",	// Suica・ﾌﾟﾘﾍﾟｲﾄﾞ併用時（精算中止）	[05]
		"*Suica/回数券",	// Suica・回数券併用時（精算中止）		[06]
		"*ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ",	// ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ単独使用時（精算中止）	[07]
		"Edy",				// Edy単独使用時						[08]
		"*Edy",				// Edy単独使用時（精算中止）			[09]
		"*Edy/ﾌﾟﾘﾍﾟｲﾄﾞ",	// Edy・ﾌﾟﾘﾍﾟｲﾄﾞ併用時（精算中止）		[10]
		"*Edy/回数券",		// Edy・回数券併用時（精算中止）		[11]
		"*前回料金割引額",	// 掛売券ﾌｫｰﾏｯﾄ使用時（精算中止）		[12]
		"PASMO",			// PASMO単独使用時						[13]
		"*PASMO",			// PASMO単独使用時（精算中止）			[14]
		"*PASMO/ﾌﾟﾘﾍﾟｲﾄﾞ",	// PASMO・ﾌﾟﾘﾍﾟｲﾄﾞ併用時（精算中止）	[15]
		"*PASMO/回数券",	// PASMO・回数券併用時（精算中止）		[16]
		"ICｶｰﾄﾞ",			// ICｶｰﾄﾞ単独使用時						[17]
		"*ICｶｰﾄﾞ",			// ICｶｰﾄﾞ単独使用時（精算中止）			[18]
		"*ICｶｰﾄﾞ/ﾌﾟﾘﾍﾟｲﾄﾞ",	// ICｶｰﾄﾞ・ﾌﾟﾘﾍﾟｲﾄﾞ併用時（精算中止）	[19]
		"*ICｶｰﾄﾞ/回数券",	// ICｶｰﾄﾞ・回数券併用時（精算中止）		[20]
		"*前回支払額",		// 電子決済使用時（精算中止時）			[21]
		"電子ﾏﾈｰ支払",		// 電子決済使用時（Suica系ｶｰﾄﾞ利用時）	[22]
		"Edy",				// 電子決済使用時（Edy利用時）			[23]
		"  Edy預り",		// 電子決済使用時（Edy支払い前残額高）	[24]
		"  Edy支払",		// 電子決済使用時（Edy支払額）			[25]
		"  Edy残高",		// 電子決済使用時（Edy残高）			[26]
		"  Edy番号",		// 電子決済使用時（Edyカード番号）		[27]
		"  Edy取引前残高"	// ｱﾗｰﾑﾚｼｰﾄ発行時（Edy決済前残高		[28]
// MH810100(S) Y.Watanabe 2019/11/25 車番チケットレス（再精算_領収証印字）
	,	"*前回領収額",		// 現金領収額							[29]
// MH810100(E) Y.Watanabe 2019/11/25 車番チケットレス（再精算_領収証印字）
	};

// MH321800(S) G.So ICクレジット対応
const char *ElectronEc_prn[] =	// 決済リーダ電子決算時の見出し印字項目
	{
// MH810103 MHUT40XX(S) Edy・WAON対応
//		"Edy支払",				// Edy電子決済使用時				[00]
		"楽天Edy支払",			// Edy電子決済使用時				[00]
// MH810103 MHUT40XX(E) Edy・WAON対応
		"nanaco支払",			// nanaco電子決済使用時				[01]
		"WAON支払",				// WAON電子決済使用時				[02]
		"SAPICA支払",			// SAPICA電子決済使用時				[03]
// Electron_prn[]で足りない印字文字列
// 領収証用
// MH810103 MHUT40XX(S) Edy・WAON対応
//		"<Edyカード情報>",		// Edy利用明細						[04]
		"Edy残高は以下のとおりです",	// Edy利用明細				[04]
// MH810103 MHUT40XX(E) Edy・WAON対応
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		"<nanacoカード情報>",	// nanaco利用明細					[05]
		"nanacoカード情報",		// nanaco利用明細					[05]
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		"  nanaco番号",			// 									[06]
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		"  nanaco支払額",		// 									[07]
		"  nanaco支払",			// 									[07]
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		"  nanaco残高",			// 									[08]
// MH810103 MHUT40XX(S) Edy・WAON対応
//		"<WAONカード情報>",		// WAON利用明細						[09]
		"WAONカード情報",		// WAON利用明細						[09]
// MH810103 MHUT40XX(E) Edy・WAON対応
		"  WAONカードID",		// 									[10]
// MH810103 MHUT40XX(S) Edy・WAON対応
//		"  WAON支払額",			// 									[11]
		"  WAON支払",			// 									[11]
// MH810103 MHUT40XX(E) Edy・WAON対応
		"  WAON残高",			// 									[12]
		"  今回ポイント",		// 									[13]
		"  累計ポイント",		// 									[14]
// MH810103 MHUT40XX(S) Edy・WAON対応
//		"  このカードはポイント対象外です",	//						[15]
//		"  JMB WAONはマイルがつきます",		//						[16]
		"  このカードはポイント対象外です。",	//					[15]
		"  JMB WAONはマイルがつきます。",	//						[16]
// MH810103 MHUT40XX(E) Edy・WAON対応
		"  SPRWID",				// 									[17]
		"<SAPICAカード情報>",	// SAPICA利用明細					[18]
		"  カード番号",			// 									[19]
		"  カード支払額",		// 									[20]
		"  カード残高",			// 									[21]
		"  端末ID",				// 									[22]
		"  明細ID",				// 									[23]
// アラームレシート用
		"  nanaco取引前残高",	// nanacoｱﾗｰﾑﾚｼｰﾄ					[24]
		"  取引種別コード",		// WAONｱﾗｰﾑﾚｼｰﾄ						[25]
		"  取引種別名",			// 									[26]
		"  取引金額",			// 									[27]
		"  SAPICA取引前残高",	// SAPICAｱﾗｰﾑﾚｼｰﾄ					[28]
		"  SAPICA支払額",		// 									[29]

// MH810103 MHUT40XX(S) Edy・WAON対応
//		"有効期限を過ぎるとポイントが無効に",	//					[30]
//		"なります。お早めにご利用下さい。",		//					[31]
		"  累計WAONポイント数は、",		//							[30]
		"  お近くのWAONステーションなどで",	//						[31]
// MH810103 MHUT40XX(E) Edy・WAON対応
// 処理未了取引記録用
		"<駐車情報>",			// 									[32]
		"  入庫日時",			// 									[33]
		"  WAON取引前残高",		// 									[34]
		"交通系電子マネー支払",	// 交通系電子マネー電子決済使用時	[35]
// MH810103 GG119202(S) 交通系ブランドの決済結果データフォーマット修正
//		"<交通系電子マネー情報>",	// 交通系電子マネー利用明細		[36]
		"交通系支払",			// 交通系電子マネー利用明細			[36]
// MH810103 GG119202(E) 交通系ブランドの決済結果データフォーマット修正
		"  支払い前残高",		// 									[37]
		"iD支払",				// iD電子決済使用時					[38]
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		"<iDカード情報>",		// iD利用明細						[39]
		"  取引内容",			//									[39]
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		"QUICPay支払",			// QUICPay電子決済使用時			[40]
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		"<QUICPayカード情報>",	// QUICPay利用明細					[41]
		"  会員番号",			//									[41]
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
// MH810103 GG119202(S) 電子マネー対応
		"  問い合わせ番号",		// 問い合わせ番号					[42]
// MH810103 GG119202(E) 電子マネー対応
// MH810103 GG119202(S) 交通系ブランドの決済結果データフォーマット修正
// MH810103 GG119202(S) 接客画面の電子マネー対応
//		"  端末識別番号",		// 端末識別番号						[43]
		"  端末番号",			// 端末番号							[43]
// MH810103 GG119202(E) 接客画面の電子マネー対応
		"  交通系残高",			// 交通系残高						[44]
		"  交通系取引前残高",	// 交通系取引前残高					[45]
// MH810103 GG119202(E) 交通系ブランドの決済結果データフォーマット修正
// MH810103 MHUT40XX(S) Edy・WAON対応
		"  確認ください。",		//									[46]
		"　 お客様にお渡ししないでください 　",	//					[47]
// MH810103 MHUT40XX(E) Edy・WAON対応
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
		"  端末取引通番",		//									[48]
		"  承認番号",		//										[49]
// MH810104(S) nanaco・iD・QUICPay対応2
//		"  有効期限",		//										[50]
// MH810104(E) nanaco・iD・QUICPay対応2
		"取引不成立",		//										[50]
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
// MH810105(S) MH364301 QRコード決済対応
		"ｺｰﾄﾞ決済",		//											[51]
		"ポストペイ",				//								[52]
		"取引番号",		//											[53]
		"利用日時",		//											[54]
		"利用額",		//											[55]
		"  Mch取引番号",		//									[56]
// MH810105(E) MH364301 QRコード決済対応
// MH810105(S) MH364301 PiTaPa対応
		"PiTaPa支払",				//								[57]
		"  伝票番号",				//								[58]
		"  支払区分",				//								[59]
		"■■■ お客様控え ■■■"		//								[60]
// MH810105(E) MH364301 PiTaPa対応
	};

const	short	EcRiyougakuBrandStrNo[] = {
	// ※ブランド番号の順に定義してください
	// 領収証の電子決済カード利用額に印字するブランド名称
	// ElectronEc_prn[]のインデックスで定義する
		0,			// Edy
		1,			// nanaco
		2,			// WAON
		3,			// SAPICA
		35,			// 交通系
		38,			// iD
		40,			// QUICPay
		-1,			// クレジット (既存処理で印字するので、この定義は使用しない)
// MH810105(S) MH364301 QRコード決済対応
		-1,			// Tカード
		-1,			// 法人
		-1,			// ハウスカード
		51,			// QRコード
// MH810105(E) MH364301 QRコード決済対応
// MH810105(S) MH364301 PiTaPa対応
		57,			// PiTaPa
// MH810105(E) MH364301 PiTaPa対応
	};

// MH810103 GG118807_GG118907(S) Edy・WAON対応
//const char *WaonDealCode_prn[] =	// WAON取引種別コード見出し印字項目
//	{
//		"その他",				// [00]
//		"支払",					// [01]
//		"返品",					// [02]
//		"チャージ",				// [03]
//		"チャージ",				// [04]
//		"チャージ取消",			// [05]
//		"その他",				// [06]
//		"支払＋オートチャージ",	// [07]
//		"支払＋オートチャージ",	// [08]
//		"その他",				// [09]
//		"支払取消",				// [10]
//		"その他",				// [11]
//		"オートチャージ",		// [12]
//		"オートチャージ",		// [13]
//	};
// MH810103 GG118807_GG118907(E) Edy・WAON対応

// ログ登録用ブランド種別
const char *EcBrandKind_prn[] =
// MH810103 GG119202(S) ブランド選択シーケンス変更（T／法人対応から移植）
//					{"??", "00", "Ed", "na", "WA", "SA", "KO", "iD", "QP", "CR"};
					{"??", "00", "Ed", "na", "WA", "SA", "KO", "iD", "QP", "CR",
					 "TP", "HJ", "HS",
// MH810105(S) MH364301 QRコード決済対応
					 "CD",
// MH810105(E) MH364301 QRコード決済対応
// MH810105(S) MH364301 PiTaPa対応
					 "Pi",
// MH810105(E) MH364301 PiTaPa対応
					};
// MH810103 GG119202(E) ブランド選択シーケンス変更（T／法人対応から移植）
// MH321800(E) G.So ICクレジット対応
// MH810105(S) MH364301 QRコード決済対応
const char *QrBrandKind_prn[] =		// QRコード決済ログ登録用サブブランド種別
{
		"00",			// [0]
		"AL",			// [1]
		"DP",			// [2]
		"LI",			// [3]
		"PA",			// [4]
		"RA",			// [5]
		"MI",			// [6]
		"UP",			// [7]
		"AU",			// [8]
		"ME",			// [9]
		"OR",			// [10]
		"GI",			// [11]
		"QU",			// [12]
		"SD",			// [13]
		"SG",			// [14]
		"SM",			// [15]
		"JC",			// [16]
		"AM",			// [17]
		"JK",			// [18]
		"GL",			// [19]
		"BA",			// [20]
		"FA",			// [21]
		"AT",			// [22]
};
// MH810105(E) MH364301 QRコード決済対応

// MH321800(S) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
//const char *EdyoteiMsg[4] =						// 固定ﾒｯｾｰｼﾞ
//	{
//		"     Ｅｄｙ取引に失敗しました       ",	// ﾒｯｾｰｼﾞ１
//		"     カード残高をご確認下さい       ",	// ﾒｯｾｰｼﾞ２
//		"     Ｅｄｙ残高をご確認下さい       ", // ﾒｯｾｰｼﾞ３
//		"     Edy残高は以下のとおりです      ", // 精算時のﾒｯｾｰｼﾞ
//	};
// MH321800(E) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)

//----------------------------------------------------------------------------------------------
//	車種印字用	
//----------------------------------------------------------------------------------------------
const char *Sya_Prn[] =	// 車種印字ﾃﾞｰﾀ
	{
		"          ",				// ０：空白
		"（自動車）",				// １：自動車
		"（バイク）",				// ２：バイク
		"（自転車）",				// ３：自転車
		"（自二小）",				// ４：自二小
		"（自二中）",				// ５：自二中
		"（自二大）",				// ６：自二大
		"（普通自）",				// ７：普通自
		"（軽自動）",				// ８：軽自動
		"（原付）  "				// ９：原付
	};

const char arc_verhead1[] =	
	{
		"NID   モジュール    可否  バージョン",		
	};

extern	void	LogDateGet( date_time_rec *Old, date_time_rec *New, ushort *Date );

void	ERRJOU_edit_data_mdat( char *dat);

#define		NO50	1
#define		NO51	2
uchar wrtICCard( SYUKEI * , uchar  , uchar );

const char *LogTitle_prt[] =			// 表題印字用文字列
	{
		"Ｅｄｙ利用明細",				// [  0]Ｅｄｙ利用明細印字
		"Ｅｄｙ集計",					// [  1]Ｅｄｙ集計
		"電子マネー利用明細",			// [  2]電子マネー利用明細印字
		"Ｓｕｉｃａ利用明細",			// [  3]Ｓｕｉｃａ利用明細印字
		"ＰＡＳＭＯ利用明細",			// [  4]ＰＡＳＭＯ利用明細印字
		"予約カード利用明細",			// [  5]予約カード利用明細印字
		"ＩＣＯＣＡ利用明細",			// [  6]ＩＣＯＣＡ利用明細印字
		"電子マネー集計",				// [  7]電子マネー集計
		"Ｓｕｉｃａ集計",				// [  8]Ｓｕｉｃａ集計
		"ＰＡＳＭＯ集計",				// [  9]ＰＡＳＭＯ集計
		"予約カード集計",				// [ 10]予約カード集計
		"ＩＣＯＣＡ集計",				// [ 11]ＩＣＯＣＡ集計
// MH321800(S) D.Inaba ICクレジット対応
		"決済リーダ利用明細",			// [ 12]決済リーダ利用明細
		"決済リーダ集計",				// [ 13]決済リーダ集計
// MH321800(E) D.Inaba ICクレジット対応		
// MH810103 MHUT40XX(S) みなし決済の集計を新規に設ける
		"みなし決済情報",				// [ 14]みなし決済情報
// MH810103 MHUT40XX(E) みなし決済の集計を新規に設ける
	};

const uchar *SearchKind_prt[] =			// 検索種別印字用文字列
	{
		"Ｅｄｙ利用明細印字要求",		// [  0]Ｅｄｙ利用明細
		"Ｅｄｙ集計印字要求",			// [  1]Ｅｄｙ利用明細
		"電子マネー利用明細印字要求",	// [  2]電子マネー利用明細
		"Ｓｕｉｃａ利用明細印字要求",	// [  3]Ｓｕｉｃａ利用明細
		"ＰＡＳＭＯ利用明細印字要求",	// [  4]ＰＡＳＭＯ利用明細
		"予約カード利用明細印字要求",	// [  5]予約カード利用明細
		"ＩＣＯＣＡ利用明細印字要求",	// [  6]ＩＣＯＣＡ利用明細
		"電子マネー集計印字要求",		// [  7]電子マネー集計
		"Ｓｕｉｃａ集計印字要求",		// [  8]Ｓｕｉｃａ集計
		"ＰＡＳＭＯ集計印字要求",		// [  9]ＰＡＳＭＯ集計
		"予約カード集計印字要求",		// [ 10]予約カード集計
		"ＩＣＯＣＡ集計印字要求",		// [ 11]ＩＣＯＣＡ集計
// MH321800(S) D.Inaba ICクレジット対応
		"決済リーダ利用明細印字要求",	// [ 12]決済リーダ利用明細
		"決済リーダ集計印字要求",		// [ 13]決済リーダ集計
// MH321800(E) D.Inaba ICクレジット対応		
	};

const char *Ryosyu_Content_Prn[] =	// 新領収証ﾌｫｰﾏｯﾄ対応用の見出し印字項目
	{
		"現金領収額",	// [0]：現金領収時（現金投入あり時のみ印字）
		"ｸﾚｼﾞｯﾄｶｰﾄﾞ",	// [1]：ｸﾚｼﾞｯﾄｶｰﾄﾞ使用時
// MH810100(S) K.Onodera 2020/02/20 車番チケットレス(領収証印字)
//		"合  計",		// [2]：合計（請求額）
		"合計",			// [2]：合計（請求額）
// MH810100(e) K.Onodera 2020/02/20 車番チケットレス(領収証印字)
		"お預り",		// [3]：預り金額（現金投入あり時のみ印字）
		"お釣り",		// [4]：釣り銭額（現金投入あり時のみ印字）
		"内消費税等",	// [5]：消費税（請求額0円以外の時印字）
		"駐車料金残額",	// [6]：駐車料金残額（電子媒体精算後の中止時に合計の代わりに印字）
		"支払い前残額",	// [7]：カード内の支払前残額（ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ用）
		"カード支払額",	// [8]：カード支払額（ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ用）
		"カード残額",	// [9]：カード残額（ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ用）		
		"有効期限",		//[10]:有効期限（ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ用）
// 仕様変更(S) K.Onodera 2016/10/26 領収証フォーマット
		"振替過払い金(払戻し)",	// [11]振替過払い金
// 仕様変更(E) K.Onodera 2016/10/26 領収証フォーマット
// 仕様変更(S) K.Onodera 2016/11/08 後日支払額フッター
		"後日精算額",	// [12]振替過払い金
// 仕様変更(E) K.Onodera 2016/11/08 後日支払額フッター
// MH810100(S) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
		"車番(入力)",	// [13]検索車番
		"車番(精算)",	// [14]問合せ車番
		"車番データID",	// [15]車番データID
// MH810100(E) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
	};
	
typedef struct{
	uchar	print_no;
// MH810100(S) S.Nishimoto 2020/04/08 静的解析(20200407:882,883,894,895,897)対応
//	long	*print_data;
	const char	**print_data;
// MH810100(E) S.Nishimoto 2020/04/08 静的解析(20200407:882,883,894,895,897)対応
}RYO_CONTENT_INFO;

const RYO_CONTENT_INFO Ryosyu_Content[] = 
	{
// MH810100(S) S.Nishimoto 2020/04/08 静的解析(20200407:882,883,894,895,897)対応
//		{ 110,	(long*)Ryosyu_Content_Prn },// [0]現金領収額
//		{ 111,	(long*)PripayTicket },		// [1]ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ利用額
//		{ 112,	(long*)KaisuuTicket },		// [2]回数券利用額
//		{ 113,	(long*)Ryosyu_Content_Prn },// [3]ｸﾚｼﾞｯﾄｶｰﾄﾞ利用額
//		{ 114,	(long*)Electron_prn },		// [4]電子決済ｶｰﾄﾞ利用額
//		{ 122,	(long*)Ryosyu_Content_Prn },// [5]消費税
//		{ 124,	(long*)Ryosyu_Content_Prn },// [6]合計（請求額）
//		{ 125,	(long*)Ryosyu_Content_Prn },// [7]預り金額
//		{ 126,	(long*)Ryosyu_Content_Prn },// [8]釣り銭額
//		{ 131,	(long*)Electron_prn },		// [9]前回中止時のﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ利用額
//		{ 132,	(long*)KaisuuTicket_chusi },// [10]前回中止時の回数券利用額
//// 仕様変更(S) K.Onodera 2016/10/26 領収証フォーマット
//		{ 150,	(long*)Ryosyu_Content_Prn },// [11]振替過払い金(払戻し)
//// 仕様変更(E) K.Onodera 2016/10/26 領収証フォーマット
//// 仕様変更(S) K.Onodera 2016/11/08 後日支払額フッター
//		{ 151,	(long*)Ryosyu_Content_Prn },// [12]振替過払い金(払戻し)
//// 仕様変更(E) K.Onodera 2016/11/08 後日支払額フッター
//// MH810100(S) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
//		{ 160,	(long*)Ryosyu_Content_Prn },// [13]検索車番
//		{ 161,	(long*)Ryosyu_Content_Prn },// [14]問合せ車番
//		{ 162,	(long*)Ryosyu_Content_Prn },// [15]車番データID
//// MH810100(E) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
//		/*------------------------------------------------*/
//		/*           以下からは利用明細の指定			  */
//		/*------------------------------------------------*/
//		{ 141,	(long*)NULL },				// [15]ﾌﾟﾘﾍﾟﾄﾞｶｰﾄﾞ利用明細
//		{ 142,	(long*)NULL },				// [16]回数券利用明細
//		{ 144,	(long*)NULL },				// [17]電子決済ｶｰﾄﾞ利用明細	
//		/*------------------------------------------------*/
//		/*           		その他の指定				  */
//		/*------------------------------------------------*/
//		{ 198,	(long*)NULL },				// [14]仕切り線
		{ 110,	Ryosyu_Content_Prn },	// [0]現金領収額
		{ 111,	PripayTicket },			// [1]ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ利用額
		{ 112,	KaisuuTicket },			// [2]回数券利用額
		{ 113,	Ryosyu_Content_Prn },	// [3]ｸﾚｼﾞｯﾄｶｰﾄﾞ利用額
		{ 114,	Electron_prn },			// [4]電子決済ｶｰﾄﾞ利用額
		{ 122,	Ryosyu_Content_Prn },	// [5]消費税
		{ 124,	Ryosyu_Content_Prn },	// [6]合計（請求額）
		{ 125,	Ryosyu_Content_Prn },	// [7]預り金額
		{ 126,	Ryosyu_Content_Prn },	// [8]釣り銭額
		{ 131,	Electron_prn },			// [9]前回中止時のﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ利用額
		{ 132,	KaisuuTicket_chusi },	// [10]前回中止時の回数券利用額
// 仕様変更(S) K.Onodera 2016/10/26 領収証フォーマット
		{ 150,	Ryosyu_Content_Prn },	// [11]振替過払い金(払戻し)
// 仕様変更(E) K.Onodera 2016/10/26 領収証フォーマット
// 仕様変更(S) K.Onodera 2016/11/08 後日支払額フッター
		{ 151,	Ryosyu_Content_Prn },	// [12]振替過払い金(払戻し)
// 仕様変更(E) K.Onodera 2016/11/08 後日支払額フッター
// MH810100(S) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
		{ 160,	Ryosyu_Content_Prn },	// [13]検索車番
		{ 161,	Ryosyu_Content_Prn },	// [14]問合せ車番
		{ 162,	Ryosyu_Content_Prn },	// [15]車番データID
// MH810100(E) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
		/*------------------------------------------------*/
		/*           以下からは利用明細の指定			  */
		/*------------------------------------------------*/
		{ 141,	(const char **)NULL },	// [15]ﾌﾟﾘﾍﾟﾄﾞｶｰﾄﾞ利用明細
		{ 142,	(const char **)NULL },	// [16]回数券利用明細
		{ 144,	(const char **)NULL },	// [17]電子決済ｶｰﾄﾞ利用明細	
		/*------------------------------------------------*/
		/*           		その他の指定				  */
		/*------------------------------------------------*/
		{ 198,	(const char **)NULL },			// [14]仕切り線
// MH810100(E) S.Nishimoto 2020/04/08 静的解析(20200407:882,883,894,895,897)対応
// MH810105(S) MH364301 インボイス対応
		{ 197,	(const char **)NULL },			// [17]適用税率
// MH810105(E) MH364301 インボイス対応
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
		{ 212,	(const char **)NULL },			// [18]非課税媒体利用額
		{ 213,	(const char **)NULL },			// [19]課税対象媒体利用額
		{ 224,	(const char **)NULL },			// [20]合計金額(適用税率付)
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
	};

typedef union{
	unsigned char	BYTE;					// Byte
	struct{
		unsigned char	YOBI:7;				// Bit 1-7 = 予備
		unsigned char	ELEC_CHU_PRI:1;		// Bit 0 = 前回支払額印字済みﾌﾗｸﾞ
	} BIT;
} t_RYOSYU_PRI_INFO;
	
t_RYOSYU_PRI_INFO	RyosyuPriInfo;		// 領収証発行時の各種ﾌﾗｸﾞ制御用エリア

const char *title_edit_sub[] =	{		// 新領収証ﾌｫｰﾏｯﾄ対応用の見出し印字項目
	//	以下、合計印字項目(RYOUSYUU_edit_goukei)
	"現金領収金額",
	"領収金額",
// MH810100(S) K.Onodera 2020/02/20 車番チケットレス(領収証印字)
//	"合  計",
	"合計",
// MH810100(e) K.Onodera 2020/02/20 車番チケットレス(領収証印字)
	"現金領収",
	"現金領収額",
	"現金請求額",
	//	預り印字項目(RYOUSYUU_edit_azukari)
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//	"現金入金額",
//	"入金額",
//	"お預り",
//	"入金",
	"  現金入金額",
	"  入金額",
	"  お預り",
	"  入金",
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
	//	以下、釣銭印字(RYOUSYUU_edit_turisen)
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//	"釣銭",
//	"お釣り",
//	"釣銭額",
//// MH810100(S) K.Onodera 2020/02/20 車番チケットレス(領収証印字)
////	"お  釣",
//	"お釣",
//// MH810100(E) K.Onodera 2020/02/20 車番チケットレス(領収証印字)
	"  釣銭",
	"  お釣り",
	"  釣銭額",
	"  お釣",
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
	//	以下、払出不足額印字(Azukari->WFusoku)
	"払戻不足額",
	"払出不足額",
};
	
RYO_CONTENT_INFO	Ryo_title_edit[] = {
//  Index			印字文字列
// MH810100(S) S.Nishimoto 2020/04/08 静的解析(20200407:882,883,894,895,897)対応
//	{ 0,	(long*)title_edit_sub },// [0]合計印字項目
//	{ 6,	(long*)title_edit_sub },// [1]預り印字項目
//	{ 10,	(long*)title_edit_sub },// [2]釣銭印字
//	{ 14,	(long*)NULL },			// [3]Dummy（現金領収額設定用）
//	{ 14,	(long*)title_edit_sub },// [4]払出不足額印字項目
//	{ 16,	(long*)NULL },			// [5]終了判定用
	{ 0,	title_edit_sub },		// [0]合計印字項目
	{ 6,	title_edit_sub },		// [1]預り印字項目
	{ 10,	title_edit_sub },		// [2]釣銭印字
	{ 14,	(const char **)NULL },	// [3]Dummy（現金領収額設定用）
	{ 14,	title_edit_sub },		// [4]払出不足額印字項目
	{ 16,	(const char **)NULL },	// [5]終了判定用
// MH810100(E) S.Nishimoto 2020/04/08 静的解析(20200407:882,883,894,895,897)対応
};

const char *UseCard_Prn[2] =						// Reparkカード履歴ヘッダ印字
	{
		"-------------  正 常  ----------- ",	// ０：正常
		"-------------  無 効  ----------- ",	// １：無効
	};
const char IO_LOG_EVENT[][15] = {
	"　　　　　　　",							// 未発生イベント
	"FLAP上昇開始　",							// フラップ上昇開始
	"FLAP上昇完了　",							// フラップ上昇完了
	"FLAP下降開始　",							// フラップ下降開始
	"FLAP下降完了　",							// フラップ下降完了
	"FLAP未上昇　　",							// フラップ上昇未完
	"FLAP未下降　　",							// フラップ下降未完
	"駐輪ﾛｯｸ閉開始 ",							// 駐輪ロック閉開始
	"駐輪ﾛｯｸ閉完了 ",							// 駐輪ロック閉完了
	"駐輪ﾛｯｸ開開始 ",							// 駐輪ロック開開始
	"駐輪ﾛｯｸ開完了 ",							// 駐輪ロック開完了
	"駐輪ﾛｯｸ未閉　 ",							// 駐輪ロック閉未完
	"駐輪ﾛｯｸ未開　 ",							// 駐輪ロック開未完
	"入庫　　　　　",							// 入庫
	"出庫　　　　　",							// 出庫
	"再入庫　　　　",							// 再入庫
	"強制出庫開始　",							// 強制出庫開始
	"強制出庫完了　",							// 強制出庫完了
	"不正出庫記録　",							// 不正出庫
	"精算開始　　　",							// 精算開始
	"精算完了　　　",							// 精算完了
	"精算中止　　　",							// 精算中止
	"不正出庫発生　",							// 不正出庫発生
	"ｶｰﾄﾞ詰(R) 発　",							// 磁気リーダ リーダ内カード詰まり 発生
	"ｶｰﾄﾞ詰(R) 解　",							// 磁気リーダ リーダ内カード詰まり 解除
	"ｶｰﾄﾞ詰(P) 発　",							// 磁気リーダ プリンター内カード詰まり 発生
	"ｶｰﾄﾞ詰(P) 解　",							// 磁気リーダ プリンター内カード詰まり 解除
	"ｺｲﾝ払出異常 発",							// コイン払出異常 発生
	"ｺｲﾝ払出異常 解",							// コイン払出異常 解除
	"ｺｲﾝ返却前停電 ",							// 硬貨返却コマンド送信後の停復電発生
	"紙幣詰まり　発",							// 紙幣詰り 発生
	"紙幣詰まり　解",							// 紙幣詰り 解除
	"紙幣払出異常発",							// 紙幣払出し異常 発生
	"紙幣払出異常解",							// 紙幣払出し異常 解除
	"紙幣返却前停電",							// 紙幣返却コマンド送信後の停復電発生
};
extern	void	LogDateGet( date_time_rec *Old, date_time_rec *New, ushort *Date );
extern	void	LogDateGet2( date_time_rec *Old, date_time_rec *New, ushort *Date );

const char *CarInfoedit[] =						// Reparkカード履歴ヘッダ印字
	{
		"車室情報（駐車）",		// ０：内部制御盤
		"車室情報（駐車ＩＦ）",	// １：IBC制御フラップ
		"車室情報（駐輪）",		// ２：駐輪
	};

const char *Turikan_edit[] =
	{
		"現在保有枚数",					// 0
		"前回保有枚数",					// 1
		"精算時入金枚数",				// 2
		"精算時出金枚数",				// 3
		"釣銭補充枚数",					// 4
		"強制払出枚数",					// 5
		"新規設定枚数",					// 6
		"変更前保有枚数",				// 7
		"前回設定枚数",					// 8
		"補充時金庫搬送枚数",			// 9
	};

void Coin_maiset(short edit_no, ulong maisuu, uchar pri_kind);

const unsigned char SetDiffPrnStr_1[SETDIFFLOG_SYU_MAXV][10] = {	// 変更種別印字用文字列テーブル
	"         ",								/* 設定種別未確定 */
	"DefLoad  ",								/* 設定デフォルト */
	"SysMnt   ",								/* システムメンテで変更 */
	"UserMnt  ",								/* ユーザーメンテで変更 */
	"PcTool   ",								/* PC設定ツールから変更 */
	"Remote   ",								/* 遠隔料金設定で変更 */
	"RollBak  ",								/* 運用取消にて変更(遠隔料金設定) */
	"CalSch   ",								/* 装置での料金予約設定にて変更 */
	"PcDefLd  ",								/* PC設定ツールからの設定デフォルト */
	"RolBakS  ",								/* 前回運用値戻しにて変更(SysMnt) */
	"Invalid  ",								// 固定データ変更にて強制戻し
// MH810100(S) K.Onodera 2020/03/10 車番チケットレス (#4014 RSW=5が設定更新情報印字に記録されない)
	"RSW=5    ",								// RSW=5起動によるIP，ポートデフォルト
// MH810100(E) K.Onodera 2020/03/10 車番チケットレス (#4014 RSW=5が設定更新情報印字に記録されない)
};
t_PPC_DATA_DETAIL	wPPC_Data;
uchar				wPPC_YukoKigenData_no;

const char *OpeMonitorFormat[] =						// 操作モニタを印字する為のファーマットデータ
	{
		"M%04d-結果OK %s",		
		"M%04d-結果NG(%02d) %s",	
		"M%04d-%s %s",				
	};
	
const char *RemoteDLStr[] =								// 遠隔ダウンロード用印字文字列
	{
		"ダウンロード",			// ０：プログラムダウンロード
		"プログラム更新",		// １：プログラム更新
		"結果情報",				// ２：結果情報
		"接続確認",				// ３：FTP接続確認
		"パラメータ",			// ４：パラメータアップロード
	};

const char *CompanyCardStr[] =	// 法人カード用印字文字列
	{
		"IDマーク/業態コード",		// [0]
		"企業コード",				// [1]
		"会員番号（開始）",			// [2]
		"会員番号（終了）",			// [3]
		"任意フィールド",			// [4]
		"提携先コード２",			// [5]
		"提携先コード２判定方式",	// [6]
		"会員番号判定方式",			// [7]
	};

// MH321800(S) D.Inaba ICクレジット対応
const char *EcSyu[] =		// 決済リーダ集計用印字文字列
{
		"ｱﾗｰﾑ",						// [0]
		"Edy",						// [1]
		"nanaco",					// [2]
		"WAON",						// [3]
		"SAPICA",					// [4]
// MH810103 GG119202(S) 決済リーダー用集計印字設定追加
//		"交通系電子ﾏﾈｰ",			// [5]
		"交通系IC",					// [5]
// MH810103 GG119202(E) 決済リーダー用集計印字設定追加
		"iD",						// [6]
		"QUICPay",					// [7]
// MH810103 GG119202(S) 決済リーダー用集計印字設定追加
//		"ｸﾚｼﾞｯﾄ",					// [8]
//		"交通系ｱﾗｰﾑ",				// [9]
		"ｸﾚｼﾞｯﾄｶｰﾄﾞ",				// [8]
// MH810103 GG119202(E) 決済リーダー用集計印字設定追加
// MH810105(S) MH364301 QRコード決済対応
		"ｺｰﾄﾞ決済",					// [9]
// MH810105(E) MH364301 QRコード決済対応
// MH810105(S) MH364301 PiTaPa対応
		"PiTaPa",					// [10]
// MH810105(E) MH364301 PiTaPa対応
};

const	short	BrandOrder[][2] = {
	// ※ブランド番号の順に定義してください
	// ブランドコード			名称への添え字
		{EC_EDY_USED,		1},
		{EC_NANACO_USED,	2},
		{EC_WAON_USED,		3},
		{EC_SAPICA_USED,	4},
		{EC_KOUTSUU_USED,	5},
		{EC_ID_USED,		6},
		{EC_QUIC_PAY_USED,	7},
// MH810105(S) MH364301 PiTaPa対応
		{EC_PITAPA_USED,	10},
// MH810105(E) MH364301 PiTaPa対応
// MH810105(S) MH364301 QRコード決済対応
		{EC_QR_USED,		9},
// MH810105(E) MH364301 QRコード決済対応
		{EC_CREDIT_USED,	8},
		{0, 0}
	};
// MH321800(E) D.Inaba ICクレジット対応

// MH810105(S) MH364301 インボイス対応
//----------------------------------------------------------------------------------------------
//	インボイス印字用
//----------------------------------------------------------------------------------------------
const char *InVoice_Prn[] =		// インボイス用印字
	{
		"※印は消費税率",						// [0]領収証 適用税率メッセージ
		"％対象です。",							// [1]領収証 適用税率メッセージ
		"登録番号 ",							// [2]運用設定 登録番号
		"■■■■■■■",						// [3]運用設定 登録番号未設定時の表示
		"■■■■ ",							// [4]運用設定 登録番号未設定時の表示
		"===========　ヘッダー　===========",	// [5]ヘッダー
		"===========　フッター　===========",	// [6]フッター
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
		"駐車料金残額",							// [7]駐車料金残額
		"内税",									// [8]内税
		"％対象額",								// [9]％対象額
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応/課税対象額＝０円の場合の印字内容を変更する）
		"内消費税対象額",						// [10]内消費税対象額
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応/課税対象額＝０円の場合の印字内容を変更する）
// GG129001(S) データ保管サービス対応（運用設定プリントにインボイス設定チェック追加）
		"適格請求書発行事業者",					// [11]適格請求書発行事業者
		"対象",								// [12]対象
		"対象外",							// [13]対象外
// GG129001(E) データ保管サービス対応（運用設定プリントにインボイス設定チェック追加）
	};
// MH810105(E) MH364301 インボイス対応

const char *Mnt_Prntitle_Sub[] = {
	"*** タスク毎 スタック使用量 ***",
	"*** エリアサイズ ***",
	"*** デバッグ情報 ***",
};

//----------------------------------------------------------------------------------------------
// 個別追い番情報
//----------------------------------------------------------------------------------------------
static	const	char	*oiban_name[] = {
		"通し",
		"精算", "預り", "中止", "釣銭合計", "ｺｲﾝ金庫", "紙幣金庫", "強制出庫", "不正出庫",
		"",
		"Ｔ合計", "ＧＴ合計",
};


/*[]-----------------------------------------------------------------------[]*/
/*|		領収証印字ﾃﾞｰﾀ編集処理												|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit( *Ryousyuu, pri_kind, *p_proc_data )	|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret = 編集処理結果							|*/
/*|										YES：編集終了						|*/
/*|										NO ：編集継続						|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-17													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	ret = NO;			// 編集処理結果（戻り値）
	uchar	edit_gyou = 0;		// 編集済み行数
	uchar	edit_cnt;			// 編集行数ﾜｰｸ
	uchar	edit_flg = YES;		// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）
	uchar	edit_chk;			// 編集処理判断ﾌﾗｸﾞ
	uchar	out_pri;			// 出力先ﾌﾟﾘﾝﾀ（設定ﾃﾞｰﾀ）
	uchar	edit_no;			// 編集する印字内容番号（設定ﾃﾞｰﾀ）
	uchar	next_edit_max;		// 次編集印字内容の最大編集行数
// MH321800(S) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
//	ulong	test_mode_judge;	// ﾃｽﾄﾓｰﾄﾞ判定用
// MH321800(E) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
	ushort	i;


	for( ; edit_flg ; ){	// 編集処理ﾙｰﾌﾟ

		/*--------------------------------------*/
		/*	再発行日時印字ﾃﾞｰﾀ編集				*/
		/*--------------------------------------*/
		if( p_proc_data->Prn_no == 0 && p_proc_data->Log_Edit == OFF ){

			// 領収証印字ﾃﾞｰﾀ最初の編集処理 且つ 履歴印字でない場合

			if(	Repri_Time.Year != 0 || Repri_Time.Mon != 0 || Repri_Time.Day != 0 || Repri_Time.Hour != 0 || Repri_Time.Min != 0 ){

				if( Ryousyuu->testflag == ON ){
					// 印字テストフラグがｾｯﾄされている場合
					Prn_edit_TstPriDate( pri_kind );								// テスト日時印字ﾃﾞｰﾀ編集
				}else{
					// 再発行日時がｾｯﾄされている場合
					Prn_edit_RePriDate( pri_kind );									// 再発行日時印字ﾃﾞｰﾀ編集
					/*------	＜係員NO.＞編集	------*/
					(void)Prn_edit_KakariNo( (ushort)Repri_kakari_no, pri_kind );
				}
			}
// GG129000(S) 富士急ハイランド機能改善（領収証発行時のQR印字が遅くて印字途中で引っ張られる）（GM803003流用）
// GG129000(S) D.Inaba 2023/09/21 ゲート式車番チケットレスシステム対応（詳細設計#5373：新レシートプリンタ対応）
//			else if( pri_kind == R_PRI ){
//				// 精算完了時の領収証印字の場合
//// GG129000(S) 富士急ハイランド機能改善（領収証発行POPUPをレシート印字完了で削除）（GM803003流用）
//				GyouCnt_All_r = 0;
//// GG129000(E) 富士急ハイランド機能改善（領収証発行POPUPをレシート印字完了で削除）（GM803003流用）
//
//				if( !IS_INVOICE && Ryousyuu->WFusoku && prm_get(COM_PRM, S_SYS, 44, 1, 1) == 0 ){
//					// 非インボイス預り証単独発行時のみ印字完了まで待機する(200ms)
//					// レシートプリンタ起動中は溜め印字不可の為
//					xPause_PRNTSK(20);
//				}
//
//				// データ書込み開始
//				PCMD_WRITE_START(R_PRI);
//			}
			if( pri_kind == R_PRI ){
				GyouCnt_All_r = 0;
			}
			else if( pri_kind == J_PRI ){
				GyouCnt_All_j = 0;
			}
// GG129000(E) D.Inaba 2023/09/21 ゲート式車番チケットレスシステム対応（詳細設計#5373：新レシートプリンタ対応）
// GG129000(E) 富士急ハイランド機能改善（領収証発行時のQR印字が遅くて印字途中で引っ張られる）（GM803003流用）
		}

// MH810100(S) m.saito 2020/05/26 車番チケットレス（車番見出し印字）
		if( p_proc_data->Prn_no == 0 ){	// １回だけ設定を検索する
			p_proc_data->Prn_no_wk[6] = 0;	// "車番(入力)"の印字設定なし
			for( i=0; i < 50; i++){
				if( prm_get(COM_PRM, S_RTP, (short)(4+i), 3, 1) == 160 ){
					p_proc_data->Prn_no_wk[6] = 1;	// "車番(入力)"の印字設定あり
					break;
				}
			}
		}
// MH810100(E) m.saito 2020/05/26 車番チケットレス（車番見出し印字）

		/*--------------------------------------*/
		/*	設定印字項目ﾁｪｯｸ					*/
		/*--------------------------------------*/
		edit_no = (uchar)prm_get( COM_PRM, S_RTP, (short)(4+p_proc_data->Prn_no), 3, 1 );		// 「印字内容番号」	設定ﾃﾞｰﾀ取得

		if( p_proc_data->Log_Edit == OFF ){
			// 履歴印字でない場合

			out_pri = (uchar)prm_get( COM_PRM, S_RTP, (short)(4+p_proc_data->Prn_no), 1, 6 );	// 「出力先ﾌﾟﾘﾝﾀ」	設定ﾃﾞｰﾀ取得

			if( ( (pri_kind == R_PRI) && ( (out_pri == 2) || (out_pri == 3) ) )		// （ﾚｼｰﾄへの編集要求　且つ　ﾚｼｰﾄ印字：する）？
					||																// 		または
				( (pri_kind == J_PRI) && ( (out_pri == 1) || (out_pri == 3) ) ) )	// （ｼﾞｬｰﾅﾙへの編集要求　且つ　ｼﾞｬｰﾅﾙ印字：する）？

			{
				edit_chk = OK;														// 対象とする設定項目の印字内容：印字する
			}
			else{
				edit_chk = NG;														// 対象とする設定項目の印字内容：印字しない
			}

		}
		else{
			// 履歴印字の場合
			if( ryousyuu_edit_tbl[edit_no][1] == YES ){								// 履歴印字時、印字？
				edit_chk = OK;														// 対象とする設定項目の印字内容：印字する
			}
			else{
				edit_chk = NG;														// 対象とする設定項目の印字内容：印字しない
			}
		}

		if( edit_chk == OK ){														// 対象とする設定項目の印字内容を印字する？

			// 対象とする設定項目の印字内容を印字する場合

			/*--------------------------------------*/
			/*	１ﾌﾞﾛｯｸ編集最大行数ﾁｪｯｸ処理			*/
			/*--------------------------------------*/
			next_edit_max = ryousyuu_edit_tbl[edit_no][0];							// 次編集印字内容の最大編集行数ｾｯﾄ
			if( (edit_gyou > 0) && ( (edit_gyou + next_edit_max) > EDIT_GYOU_MAX) ){

				//	１ﾌﾞﾛｯｸ編集の最大行数を超えてしまう場合

				edit_flg = NO;														// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）
			}
		}
		else{
			// 対象とする設定項目の印字内容を印字しない場合
			p_proc_data->Prn_no++;													// 設定項目番号＋１
		}

		if( edit_chk == OK && edit_flg == YES ){

			// 対象設定項目番号に設定されている印字内容＝印字する　且つ　１ﾌﾞﾛｯｸ編集の最大行数を超えない場合

			edit_cnt = 0;		// 編集行数ﾘｾｯﾄ

			if(	(Ryousyuu->credit.pay_ryo != 0) && (Ryousyuu->credit.cre_type != CREDIT_CARD) ){	// iD精算？
				switch( edit_no ){		// iD精算時処理を先に行う（クレジット関連処理それぞれで分岐するのは大変なので）
					case	23:		// ＜クレジットカード支払額＞
					case	36:		// ＜クレジットカード会社名＞
					case	37:		// ＜クレジットカード会員コード＞
					case	38:		// ＜クレジットカード伝票Ｎｏ．＞
					case	39:		// ＜クレジットカード承認Ｎｏ．＞
					case	51:		// ＜クレジットカード支払コード・署名欄＞
					case	52:		// ＜クレジットカード加盟店名＞
					case	53:		// ＜クレジットカードセンタ処理日時・追番＞
					case	54:		// ＜クレジットカード端末識別番号＞
					case	55:		// ＜クレジット精算時用スペース＞
						// クレジット処理を無効とする
						edit_no = 0;
						break;
					default:
						break;
				}
			}

			/*--------------------------------------*/
			/*	１項目編集処理						*/
			/*--------------------------------------*/
			switch( edit_no ){		// 設定されている印字内容番号により各処理へ分岐

				case	0:		// ＜未使用＞
					break;

				case	1:		// ＜ロゴ＞編集処理
					edit_cnt = Prn_edit_logo( pri_kind );
					break;

				case	2:		// ＜ヘッダー＞編集処理
					edit_cnt = Prn_edit_headhoot( PRI_HEADER, pri_kind );
					break;

				case	3:		// ＜表題＞編集処理

// MH321800(S) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
//#ifdef	FUNCTION_MASK_EDY
//					if( Ryousyuu->Electron_data.Edy.e_pay_kind == EDY_USED ){		// 印字内容がEdy？
//						memcpy( &test_mode_judge, Ryousyuu->Electron_data.Edy.Terminal_ID, 4 );	// 上位端末IDを取得
//						if( test_mode_judge == 0 ){									// 上位端末IDが０ならテストモード
//
//							edit_cnt += Prn_Line_edit( pri_kind, 3 );
//
//							Prn_edit_Title	(										// 表題（"トレーニングモード"）印字ﾃﾞｰﾀ編集
//												"トレーニングモード",
//												FONT_K_NML,
//												pri_kind
//											);
//							edit_cnt++;
//							edit_cnt += Prn_Line_edit( pri_kind, 3 );
//						
//						}
//					}
//#endif
// MH321800(E) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
					if( p_proc_data->Log_Edit == NOF ){
						break;
					}
					switch( Ryousyuu->chuusi ){

						case	0:	// 領収証（通常）
						case	3:	// 領収証（修正精算）
							edit_cnt = RYOUSYUU_edit_hyoudai( Ryousyuu, pri_kind, p_proc_data );
							break;

						case	1:	// 精算中止
							edit_cnt = SEICHUSI_edit_hyoudai( Ryousyuu, pri_kind, p_proc_data );
							break;
					}

					break;

				case	4:		// ＜精算情報＞編集処理
					edit_cnt = RYOUSYUU_edit_seisanj( Ryousyuu, pri_kind, p_proc_data );
					break;

// GG129000(S) H.Fujinaga 2023/01/04 ゲート式車番チケットレスシステム対応（発券情報印字対応）
				case	5:		// ＜発券情報＞編集処理
					if( Ryousyuu->CarSearchFlg == 2 && Ryousyuu->shubetsu == 0 ){
						edit_cnt = RYOUSYUU_edit_hakkenj( Ryousyuu, pri_kind, p_proc_data );
					}
					break;
// GG129000(E) H.Fujinaga 2023/01/04 ゲート式車番チケットレスシステム対応（発券情報印字対応）

				case	7:		// ＜入庫時刻＞編集処理
					if( Ryousyuu->teiki.update_mon == 0 ){
						edit_cnt = RYOUSYUU_edit_intime( Ryousyuu, pri_kind, p_proc_data );
					}
					break;

				case	8:		// ＜出庫（精算）時刻＞編集処理
					edit_cnt = RYOUSYUU_edit_outtime( Ryousyuu, pri_kind, p_proc_data );
					break;

				case	9:		// ＜駐車時間＞編集処理
					if( Ryousyuu->teiki.update_mon == 0 ){
						edit_cnt = RYOUSYUU_edit_parktime( Ryousyuu, pri_kind, p_proc_data );
					}
					break;

				case	10:		// ＜駐車料金＞編集処理
					if( Ryousyuu->teiki.update_mon != 0 ){
						//	定期更新料金
						edit_cnt = RYOUSYUU_edit_tupdryo( Ryousyuu, pri_kind, p_proc_data );
					}
					else{
						//	駐車料金
						edit_cnt = RYOUSYUU_edit_churyo( Ryousyuu, pri_kind, p_proc_data );
					}
					break;

				case	11:		// ＜定期券種別・契約Ｎｏ．＞編集処理
					edit_cnt = RYOUSYUU_edit_teiki( Ryousyuu, pri_kind, p_proc_data );
					break;

				case	12:		// ＜サービス券＞編集処理
					edit_cnt = RYOUSYUU_edit_service( Ryousyuu, pri_kind, p_proc_data );
					break;

				case	13:		// ＜店割引＞編集処理
					edit_cnt = RYOUSYUU_edit_misewari( Ryousyuu, pri_kind, p_proc_data );
					break;

				case	14:		// ＜割引券＞編集処理
					edit_cnt = RYOUSYUU_edit_waribiki( Ryousyuu, pri_kind, p_proc_data );
					break;

				case	15:		// ＜ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ＞編集処理
					edit_cnt = RYOUSYUU_edit_pripay( Ryousyuu, pri_kind, p_proc_data, 0 );
					break;

				case	16:		// ＜回数券＞編集処理
					edit_cnt = RYOUSYUU_edit_kaisuu( Ryousyuu, pri_kind, p_proc_data, 0 );
					break;

				case	18:		// ＜前回時間割引＞編集処理
					edit_cnt = RYOUSYUU_edit_btwari( Ryousyuu, pri_kind, p_proc_data );
					break;

				case	19:		// ＜前回料金割引＞編集処理
					edit_cnt = RYOUSYUU_edit_brwari( Ryousyuu, pri_kind, p_proc_data );
					break;

				case	20:		// ＜前回％割引＞編集処理
					edit_cnt = RYOUSYUU_edit_bpwari( Ryousyuu, pri_kind, p_proc_data );
					break;

				case	22:		// ＜消費税＞編集処理
					edit_cnt = RYOUSYUU_edit_tax( Ryousyuu, pri_kind, p_proc_data );
					break;

				case	23:		// ＜クレジットカード支払額＞編集処理
					edit_cnt = RYOUSYUU_edit_ccpay( Ryousyuu, pri_kind, p_proc_data );
					break;

				case	24:		// ＜合計金額＞編集処理
					edit_cnt = RYOUSYUU_edit_goukei( Ryousyuu, pri_kind, p_proc_data );
					break;

				case	25:		// ＜預り金額＞編集処理
					edit_cnt = RYOUSYUU_edit_azukari( Ryousyuu, pri_kind, p_proc_data );
					break;

				case	26:		// ＜釣り銭額＞編集処理

					switch( Ryousyuu->chuusi ){

						case	0:	// 領収証（通常）
						case	3:	// 領収証（修正精算）
							edit_cnt = RYOUSYUU_edit_turisen( Ryousyuu, pri_kind, p_proc_data );
							break;

						case	1:	// 精算中止
							edit_cnt = SEICHUSI_edit_turisen( Ryousyuu, pri_kind, p_proc_data );
							break;
					}

					break;

				case	27:		// ＜釣り切れ情報＞編集処理

					switch( Ryousyuu->chuusi ){

						case	0:	// 領収証（通常）
						case	3:	// 領収証（修正精算）
							edit_cnt = RYOUSYUU_edit_turikire( Ryousyuu, pri_kind, p_proc_data );
							break;

						case	1:	// 精算中止
							edit_cnt = SEICHUSI_edit_turikire( Ryousyuu, pri_kind, p_proc_data );
							break;
					}

					break;

				case	28:		// ＜フッター＞編集処理
					edit_cnt = Prn_edit_headhoot( PRI_HOOTER, pri_kind );
					break;

				case	36:		// ＜クレジットカード会社名＞編集処理
					edit_cnt = RYOUSYUU_edit_ccname( Ryousyuu, pri_kind, p_proc_data );
					break;

				case	37:		// ＜クレジットカード会員コード＞編集処理
					edit_cnt = RYOUSYUU_edit_ccid( Ryousyuu, pri_kind, p_proc_data );
					break;

				case	38:		// ＜クレジットカード伝票Ｎｏ．＞編集処理
					edit_cnt = RYOUSYUU_edit_ccslno( Ryousyuu, pri_kind, p_proc_data );
					break;

				case	39:		// ＜クレジットカード承認Ｎｏ．＞編集処理
					edit_cnt = RYOUSYUU_edit_ccapno( Ryousyuu, pri_kind, p_proc_data );
					break;
// MH810100(S) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
//				case	41:		// ＜修正精算情報＞編集処理
//					if( CountSel( &Ryousyuu->MMPwari )){		// 修正元追番あり
//						// 修正精算時の領収証の場合のみ印字する
//						edit_cnt = RYOUSYUU_edit_syuuseij( Ryousyuu, pri_kind, p_proc_data );
//					}
//					break;
// MH810100(E) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
				case	51:		// ＜クレジットカード支払コード・署名欄＞編集処理
					if( p_proc_data->Printing == PREQ_IO_LOG) break;
					if(	Ryousyuu->credit.pay_ryo != 0 ){	// ｸﾚｼﾞｯﾄ精算？
// MH321800(S) D.InabaICクレジット対応
						// 決済リーダ接続時
						if(isEC_USE()) {
							edit_cnt = Prn_edit_Ec_Syomei( Ryousyuu, pri_kind );
						}
						else {
// MH321800(E) D.InabaICクレジット対応
						edit_cnt = Prn_edit_SyomeiKamei( PRI_SYOMEI, pri_kind );
// MH321800(S) D.InabaICクレジット対応
						}
// MH321800(E) D.Inaba ICクレジット対応
					}
					break;

				case	52:		// ＜クレジットカード加盟店名＞編集処理
// MH321800(S) Y.Tanizaki ICクレジット対応
					if(isEC_USE()) {
						break;
					}
// MH321800(E) Y.Tanizaki ICクレジット対応
					if( p_proc_data->Printing == PREQ_IO_LOG) break;
					if(	Ryousyuu->credit.pay_ryo != 0 ){	// ｸﾚｼﾞｯﾄ精算？
						edit_cnt = Prn_edit_SyomeiKamei( PRI_KAMEI, pri_kind );
					}
					break;

				case	53:		// ＜クレジットカードセンタ処理日時・追番＞編集処理
// MH321800(S) Y.Tanizaki ICクレジット対応
					if(isEC_USE()) {
						break;
					}
// MH321800(E) Y.Tanizaki ICクレジット対応
// MH810105(S) MH364301 不要関数削除
//					edit_cnt = RYOUSYUU_edit_ShopAccountNo( Ryousyuu, pri_kind, p_proc_data );
// MH810105(E) MH364301 不要関数削除
				break;

				case	54:		// ＜クレジットカード端末識別番号＞編集処理
					edit_cnt = RYOUSYUU_edit_cctno( Ryousyuu, pri_kind, p_proc_data );
					break;

				case	55:		// ＜クレジット精算時用スペース＞編集処理
					if(	Ryousyuu->credit.pay_ryo != 0 ){	// ｸﾚｼﾞｯﾄ精算？
						edit_cnt = Prn_edit_space( pri_kind );
					}
					break;
				case	60:		// ＜Suica精算ﾃﾞｰﾀ＞編集処理
					edit_cnt = RYOUSYUU_edit_suica( Ryousyuu, pri_kind, p_proc_data, 0 );
					break;

				case	79:		// ＜駐車位置番号＞編集処理
					if( Ryousyuu->teiki.update_mon == 0 ){
						edit_cnt = RYOUSYUU_edit_pkno( Ryousyuu, pri_kind, p_proc_data );
					}
					break;

				case	89:		// ＜定期更新時の期限案内メッセージ＞編集処理
					edit_cnt = RYOUSYUU_edit_tupdmsg( Ryousyuu, pri_kind, p_proc_data );
					break;

				case	90:		// ＜釣り切れ時の固定メッセージ１＞編集処理
					edit_cnt = RYOUSYUU_edit_tukimsg( Ryousyuu, pri_kind, p_proc_data, 1 );
					break;

				case	91:		// ＜釣り切れ時の固定メッセージ２＞編集処理
					edit_cnt = RYOUSYUU_edit_tukimsg( Ryousyuu, pri_kind, p_proc_data, 2 );
					break;

				case	92:		// ＜釣り切れ時の固定メッセージ３＞編集処理
					edit_cnt = RYOUSYUU_edit_tukimsg( Ryousyuu, pri_kind, p_proc_data, 3 );
					break;

				case	93:		// ＜釣り切れ時の固定メッセージ４＞編集処理
					edit_cnt = RYOUSYUU_edit_tukimsg( Ryousyuu, pri_kind, p_proc_data, 4 );
					break;

				case	94:		// ＜固定メッセージ１＞編集処理
					edit_cnt = Prn_edit_KoteiMsg( 1, pri_kind );
					break;

				case	95:		// ＜固定メッセージ２＞編集処理
					edit_cnt = Prn_edit_KoteiMsg( 2, pri_kind );
					break;

				case	96:		// ＜固定メッセージ３＞編集処理
					edit_cnt = Prn_edit_KoteiMsg( 3, pri_kind );
					break;

				case	97:		// ＜固定メッセージ４＞編集処理
					edit_cnt = Prn_edit_KoteiMsg( 4, pri_kind );
					break;

				case	98:		// ＜仕切り行＞編集処理
					edit_cnt = Prn_edit_sikiri( pri_kind );
					break;

				case	99:		// ＜スペース＞編集処理
					edit_cnt = Prn_edit_space( pri_kind );
					break;

				case	100:	// ＜定期券更新時のラベル発行メッセージ＞編集処理
					edit_cnt = RYOUSYUU_edit_tupdlvlmsg( Ryousyuu, pri_kind, p_proc_data );
					break;

				case	101:	// ＜定期券更新不可時のメッセージ＞編集処理
					edit_cnt = RYOUSYUU_edit_tupdngmsg( Ryousyuu, pri_kind, p_proc_data );
					break;
// MH810100(S) 2020/07/10 車番チケットレス(#4531 仕様変更 買物割引の領収証の印字を分けて印字する)
				case	190:	// 買物割引
					edit_cnt = RYOUSYUU_edit_Kaimono( Ryousyuu, pri_kind, p_proc_data );
					break;
// MH810100(E) 2020/07/10 車番チケットレス(#4531 仕様変更 買物割引の領収証の印字を分けて印字する)
				case	200:	// ＜釣り切れ時の固定メッセージ５＞編集処理
					edit_cnt = RYOUSYUU_edit_tukimsg( Ryousyuu, pri_kind, p_proc_data, 5 );
					break;
				case	204:	// ＜預り証フッター＞編集処理
					edit_cnt = RYOUSYUU_edit_tukimsg( Ryousyuu, pri_kind, p_proc_data, 6 );
					break;
// GG129000(S) H.Fujinaga 2022/12/05 ゲート式車番チケットレスシステム対応（QR駐車券対応）
				case	240:	// ＜QR駐車券＞編集処理
					edit_cnt = RYOUSYUU_edit_PAYQR( Ryousyuu, pri_kind, p_proc_data);
					break;
// GG129000(E) H.Fujinaga 2022/12/05 ゲート式車番チケットレスシステム対応（QR駐車券対応）
				default:		// その他（印字項目番号ｴﾗｰ）
					for( i=0; i < TBL_CNT(Ryosyu_Content); i++){
						if( Ryosyu_Content[i].print_no == edit_no ){
							edit_cnt = RYOUSYUU_edit_content( Ryousyuu, pri_kind, p_proc_data, edit_no );
							break;
						}
					}
					break;
			}
			edit_gyou = (uchar)(edit_gyou + edit_cnt);	// 編集済み行数更新

			if( (p_proc_data->Prn_no_data1 == 0) && (p_proc_data->Prn_no_data2 == 0) ){

				// 項目番号の印字ﾃﾞｰﾀを全て編集終了した場合
				p_proc_data->Prn_no++;					// 設定項目番号＋１
// MH321800(S) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
				// ※店割引などは検索データが多く印字しないケースが続くと、タスク占有時間が長くなる。
				//   そのため、E3260が発生してしまうケースがあるので、１印字項目完了で一旦taskchg()を行うこととする
				xPause_PRNTSK(0L);
// MH321800(E) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
			}
		}

		if( p_proc_data->Prn_no >= 50 ){

			// 設定項目番号の最後（５０）まで印字内容編集終了の場合

			edit_flg = NO;								// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）

			p_proc_data->Prn_no			= 0;			// 編集処理ﾜｰｸﾘｾｯﾄ
			p_proc_data->Prn_no_data1	= 0;
			p_proc_data->Prn_no_data2	= 0;
			RyosyuPriInfo.BYTE = 0;

			ret = YES;									// 戻り値←１ﾃﾞｰﾀ編集終了

			if( p_proc_data->Log_Edit == OFF ){
				// 精算履歴印字でない場合
				p_proc_data->Final = ON;				// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
// GG129000(S) 富士急ハイランド機能改善（領収証発行時のQR印字が遅くて印字途中で引っ張られる）（GM803003流用）
// GG129000(S) D.Inaba 2023/09/21 ゲート式車番チケットレスシステム対応（詳細設計#5373：新レシートプリンタ対応）
//				if(	Repri_Time.Year == 0 && Repri_Time.Mon == 0 && Repri_Time.Day == 0 && Repri_Time.Hour == 0 && Repri_Time.Min == 0 && pri_kind == R_PRI){
//					// 精算完了時の領収証印字の場合
//					// データ書込み終了
//					PCMD_WRITE_END(R_PRI);
//				}
// GG129000(E) D.Inaba 2023/09/21 ゲート式車番チケットレスシステム対応（詳細設計#5373：新レシートプリンタ対応）
// GG129000(E) 富士急ハイランド機能改善（領収証発行時のQR印字が遅くて印字途中で引っ張られる）（GM803003流用）
			}
		}
	}
	return( ret );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜表題（領収証）＞印字ﾃﾞｰﾀ編集処理									|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_hyoudai								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-07													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_hyoudai( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	uchar	hyodai_syu;			// 表題印字種別
	ushort	settei;				// 設定ﾃﾞｰﾀﾜｰｸ
	uchar	hyodai_syu2;		// 「領収証=0”と“領収書=1”
	const char	*p_title;		// 表題文字列ﾎﾟｲﾝﾀｰ
	
	p_title = 0;
// MH810103 GG119202(S) 決済精算中止印字処理修正
//// GG119200(S) ICクレジットみなし決済印字フォーマット変更対応
//	// 復電 && みなし決済時、表題を（"決済精算中止(復)"）に変更する
//	if( Ryousyuu->WFlag == ON && Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
//		p_title = Ryousyuu_Ttl_Prn[23];		// "決済精算中止(復)"	
//		Prn_edit_Title	(										// 表題（"決済精算中止(復)"）印字ﾃﾞｰﾀ編集
//						p_title,
//						FONT_K_YOKOBAI,
//						pri_kind
//						);
//		edit_cnt++;
//
//		return( edit_cnt );
//	}
//// GG119200(E) ICクレジットみなし決済印字フォーマット変更対応
// MH810103 GG119202(E) 決済精算中止印字処理修正
	settei  = (uchar)prm_get( COM_PRM, S_RTP, 2, 1, 1 );	// 「領収証の表題」	設定ﾃﾞｰﾀ取得
	hyodai_syu2  = (uchar)prm_get( COM_PRM, S_RTP, 2, 1, 3 );	// 「領収証=0/領収書=1 設定ﾃﾞｰﾀ取得
	if( Ryousyuu->Seisan_kind != 0xFF ){
		switch( settei ){	// 設定？
		case	0:		// ＜全て「領収証」で発行＞
			hyodai_syu	= OFF;						// 表題＝領収証
			break;

		case	1:		// ＜ｸﾚｼﾞｯﾄ精算時は「明細書」で発行＞
			if(	Ryousyuu->credit.pay_ryo != 0 ){	// ｸﾚｼﾞｯﾄ精算？
				hyodai_syu	= ON;					// 表題＝明細書
			}
			else{
				hyodai_syu	= OFF;					// 表題＝領収証
			}
			break;

		case	2:		// ＜現金ありｸﾚｼﾞｯﾄ精算時は「領収証」で発行＞
			if(	( Ryousyuu->WInPrice == 0 )			// 現金なし　且つ　ｸﾚｼﾞｯﾄ精算　？
					&&
				( Ryousyuu->credit.pay_ryo != 0 ) )
			{
				hyodai_syu	= ON;					// 表題＝明細書
			}
			else{
				hyodai_syu	= OFF;					// 表題＝領収証
			}
			break;

		default:		// ＜その他＞
			hyodai_syu	= OFF;						// 表題＝領収証
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
		}

		if( Ryousyuu->OutKind == 3 ){					// 精算出庫＝不正出庫？
			p_title = Ryousyuu_Ttl_Prn[17];				// "不正出庫"
		}else if(( Ryousyuu->OutKind == 1 ) ||			// 精算出庫＝強制出庫？
				 ( Ryousyuu->OutKind == 11 )){			// 精算出庫＝強制出庫(遠隔)？
			p_title = Ryousyuu_Ttl_Prn[18];				// "強制出庫"
		}else if( hyodai_syu == OFF ){

			//	表題＝領収証の場合
			switch( Ryousyuu->chuusi ){
			case	0:	// 領収証（通常）
				if( Ryousyuu->WFlag == OFF )		// 通常 or 復電？
				{
					//	通常印字の場合
					if (hyodai_syu2 == 1) {		// 領収証=0/領収書=1
						p_title = Ryousyuu_Ttl_Prn[0];	// "領収書"	
					} else {
						p_title = Ryousyuu_Ttl_Prn[19];	// "領収証"	
					}
				}
				else{
					//	復電印字の場合
					if (hyodai_syu2 == 1) {		// 領収証=0/領収書=1
						p_title = Ryousyuu_Ttl_Prn[1];	// "領収書（復）"	
					} else {
						p_title = Ryousyuu_Ttl_Prn[20];	// "領収証（復）"	
					}
				}
				break;

			case	3:	// 領収証（修正精算）
				if( Ryousyuu->WFlag == OFF )		// 通常 or 復電？
				{
					//	通常印字の場合
					if (hyodai_syu2 == 1) {		// 領収証=0/領収書=1
						p_title = Ryousyuu_Ttl_Prn[9];	// "領収書（修正）"	
					} else {
						p_title = Ryousyuu_Ttl_Prn[21];	// "領収証（修正）"	
					}
				}
				else{
					//	復電印字の場合
					if (hyodai_syu2 == 1) {		// 領収証=0/領収書=1
						p_title = Ryousyuu_Ttl_Prn[10];	// "領収書（修/復）"	
					} else {
						p_title = Ryousyuu_Ttl_Prn[22];	// "領収証（修/復）"	
					}
				}
				break;
			}
		}
		else{
			//	表題＝明細書の場合
			switch( Ryousyuu->chuusi ){
			case	0:	// 領収証（通常）
				if( Ryousyuu->WFlag == OFF )		// 通常 or 復電？
				{
					//	通常印字の場合
					p_title = Ryousyuu_Ttl_Prn[2];	// "明細書"	
				}
				else{
					//	復電印字の場合
					p_title = Ryousyuu_Ttl_Prn[3];	// "明細書（復）"	
				}
				break;

			case	3:	// 領収証（修正精算）
				if( Ryousyuu->WFlag == OFF )		// 通常 or 復電？
				{
					//	通常印字の場合
					p_title = Ryousyuu_Ttl_Prn[11];	// "明細書（修正）"	
				}
				else{
					//	復電印字の場合
					p_title = Ryousyuu_Ttl_Prn[12];	// "明細書（修/復）"	
				}
				break;
			}
		}
	}else{
		if( p_proc_data->Log_TotalCount !=  RT_PAY_LOG_DAT.RT_pay_count ){ //初回印字で無い時、
			/*-----		仕切り行	-----*/
			PCMD_LEFT( pri_kind );								// [位置揃え(左揃え)]
			PrnStr( Ryotest_Ttl_Prn[0], pri_kind );				// 仕切り行印字ﾃﾞｰﾀ登録
			edit_cnt++;
			return( edit_cnt );
		}
	}
	edit_cnt = Prn_edit_Title	(					// 表題印字ﾃﾞｰﾀ編集
									p_title,
									FONT_K_YOKOBAI,
									pri_kind
								);

	if( is_paid_syusei(Ryousyuu) != -1 ){
		p_title = Ryousyuu_Ttl_Prn[15];					// "(修正精算)"
		edit_cnt = Prn_edit_Title	(					// 表題印字ﾃﾞｰﾀ編集
									p_title,
									FONT_K_YOKOBAI,
									pri_kind
									);
	}

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜表題（精算中止）＞印字ﾃﾞｰﾀ編集処理								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SEICHUSI_edit_hyoudai								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-11													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SEICHUSI_edit_hyoudai( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	const char	*p_title;		// 表題文字列ﾎﾟｲﾝﾀｰ

	if( Ryousyuu->WFlag == OFF )					// 通常 or 復電？
	{
		//	通常印字の場合
		p_title = Ryousyuu_Ttl_Prn[4];				// "精算中止"	
// MH810105(S) MH364301 QRコード決済対応（精算中止データ送信対応）
		if (Ryousyuu->Electron_data.Ec.E_Status.BIT.miryo_confirm != 0) {
			p_title = Ryousyuu_Ttl_Prn[24];			// "決済精算中止"
		}
// MH810105(E) MH364301 QRコード決済対応（精算中止データ送信対応）
	}
	else{
		//	復電印字の場合
		p_title = Ryousyuu_Ttl_Prn[5];				// "精算中止（復）"	
// MH810103 GG119202(S) 決済精算中止印字処理修正
		// 復電 && みなし決済時、表題を（"決済精算中止(復)"）に変更する
// MH810105(S) MH364301 QRコード決済対応（精算中止データ送信対応）
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.miryo_confirm != 0 ){
// MH810105(E) MH364301 QRコード決済対応（精算中止データ送信対応）
			p_title = Ryousyuu_Ttl_Prn[23];			// "決済精算中止(復)"	
		}
// MH810103 GG119202(E) 決済精算中止印字処理修正
	}

	edit_cnt = Prn_edit_Title	(					// 表題印字ﾃﾞｰﾀ編集
									p_title,
									FONT_K_YOKOBAI,
									pri_kind
								);


	if( is_paid_syusei(Ryousyuu) != -1 ){
		p_title = Ryousyuu_Ttl_Prn[15];					// "(修正精算)"
		edit_cnt = Prn_edit_Title	(					// 表題印字ﾃﾞｰﾀ編集
									p_title,
									FONT_K_YOKOBAI,
									pri_kind
									);
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜精算情報＞印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_seisanj								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-07													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_seisanj( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	int	i;
	
	i = is_paid_remote(Ryousyuu);
	if (i != -1) {
		if (Ryousyuu->DiscountData[i].DiscSyu == NTNET_GENGAKU) {
			strcpy(cEditwk2, "（未）");
		}
// 仕様変更(S) K.Onodera 2016/11/02 精算データフォーマット対応
//// MH322914(S) K.Onodera 2016/09/15 AI-V対応：振替精算
////		else if (Ryousyuu->DiscountData[i].DiscSyu == NTNET_FURIKAE) {
//		else if (Ryousyuu->DiscountData[i].DiscSyu == NTNET_FURIKAE || Ryousyuu->DiscountData[i].DiscSyu == NTNET_FURIKAE_2 ) {
//// MH322914(E) K.Onodera 2016/09/15 AI-V対応：振替精算
		else if (Ryousyuu->DiscountData[i].DiscSyu == NTNET_FURIKAE) {
// 仕様変更(E) K.Onodera 2016/11/02 精算データフォーマット対応
			strcpy(cEditwk2, "（振替）");
		}

		Str_Set1(								// -----印字ﾃﾞｰﾀ編集-----
					"",							// 文字列１：""
					cEditwk2,					// 文字列２："（未）"/ "（振替）"
					pri_kind					// 印字先ﾌﾟﾘﾝﾀ
				);
		strcpy(cEditwk2, "");
		edit_cnt++;
	}
// 仕様変更(S) K.Onodera 2016/11/02 精算データフォーマット対応
	i = is_ParkingWebFurikae( Ryousyuu );
	if( i != -1 ){
		if( Ryousyuu->DetailData[i].DiscSyu == NTNET_FURIKAE_2 ){
			strcpy(cEditwk2, "（振替）");
		}
		Str_Set1(								// -----印字ﾃﾞｰﾀ編集-----
					"",							// 文字列１：""
					cEditwk2,					// 文字列２："（振替）"
					pri_kind					// 印字先ﾌﾟﾘﾝﾀ
				);
		strcpy(cEditwk2, "");
		edit_cnt++;
	}
// 仕様変更(E) K.Onodera 2016/11/02 精算データフォーマット対応

	KikaiNoSet(		cEditwk1,					// 機械NO.編集
					Ryousyuu->Kikai_no );

	if( is_paid_syusei(Ryousyuu) != -1 ){
		strcat( cEditwk1, "（修正）" );			// cEditwk1←（修正）ﾃﾞｰﾀ追加
	}

	if(( Ryousyuu->OutKind != 3 ) &&					// 精算出庫＝不正出庫？
	   (Ryousyuu->OutKind != 1 ) &&						// 精算出庫＝強制出庫？
	   ( Ryousyuu->OutKind != 11 )) {					// 精算出庫＝強制出庫(遠隔)？
			SeisanKindSet(	cEditwk2,					// 精算方式編集
					Ryousyuu->Seisan_kind );
	}

	switch( Ryousyuu->chuusi ){

		case	0:	// 領収証（通常）
		case	3:	// 領収証（修正精算）

			if( Ryousyuu->OutKind == 3 ) {				// 精算出庫＝不正出庫？
				OibanSet(	cEditwk3,					// 追番編集(不正出庫)
							CountSel( &Ryousyuu->Oiban ),
							12 );
			} else if(( Ryousyuu->OutKind == 1 ) ||		// 精算出庫＝強制出庫？
			          ( Ryousyuu->OutKind == 11 )) {	// 精算出庫＝強制出庫(遠隔)？
				OibanSet(	cEditwk3,					// 追番編集(強制出庫)
							CountSel( &Ryousyuu->Oiban ),
							11 );
			} else {
				OibanSet(	cEditwk3,					// 領収追番編集(精算完了)
							CountSel( &Ryousyuu->Oiban ),
							1 );
			}
			break;

		case	1:	// 精算中止

			OibanSet(	cEditwk3,				// 領収追番編集(精算中止)
						CountSel( &Ryousyuu->Oiban ),
						2 );

			break;

		default:	// その他

			OibanSet(	cEditwk3,				// 追番部分を空白とする
						0,
						0 );
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)

	}

	strcat( cEditwk2, cEditwk3 );				// cEditwk2（精算方式）←追番印字ﾃﾞｰﾀ追加

	Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
				cEditwk1,						// 文字列１：機械NO.印字ﾃﾞｰﾀ
				cEditwk2,						// 文字列２：精算方式、追番印字ﾃﾞｰﾀ
				pri_kind						// 印字先ﾌﾟﾘﾝﾀ
			);

	edit_cnt++;									// 編集行数更新

	return( edit_cnt );
}

// GG129000(S) H.Fujinaga 2023/01/04 ゲート式車番チケットレスシステム対応（発券情報印字対応）
//[]----------------------------------------------------------------------[]
///	@brief			＜発券情報＞印字ﾃﾞｰﾀ編集処理
//[]----------------------------------------------------------------------[]
///	@param[in]		Ryousyuu	: ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			ret		: 編集行数
//[]----------------------------------------------------------------------[]
///	@author			K.Motohashi
///	@date			Create	: 2005/09/26<br>
///					Update	: 
//[]------------------------------------- Copyright(C) 2005 AMANO Corp.---[]
uchar	RYOUSYUU_edit_hakkenj( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	if( Ryousyuu->TicketNum > 0 ){

		// 駐車券番号が０より大きい場合（０の場合、何も印字しない）
		HakkenKiNoSet( cEditwk1, Ryousyuu->CMachineNo );	// 発券機NO.編集
		HakkenNoSet( cEditwk2, Ryousyuu->TicketNum );		// 発券NO.	編集

		Str_Set1(											// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,								// 文字列１：発券機NO.	印字ﾃﾞｰﾀ
					cEditwk2,								// 文字列２：発券NO.	印字ﾃﾞｰﾀ
					pri_kind								// 印字先ﾌﾟﾘﾝﾀ
				);

		edit_cnt++;											// 編集行数更新

	}
	return( edit_cnt );
}
// GG129000(E) H.Fujinaga 2023/01/04 ゲート式車番チケットレスシステム対応（発券情報印字対応）

/*[]-----------------------------------------------------------------------[]*/
/*|		＜入庫時刻＞印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_intime								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-07													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_intime( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	if(	Ryousyuu->TInTime.Year != 0
			||
		Ryousyuu->TInTime.Mon != 0
			||
		Ryousyuu->TInTime.Day != 0
			||
		Ryousyuu->TInTime.Hour != 0
			||
		Ryousyuu->TInTime.Min != 0 ){

		//	入庫時刻ﾃﾞｰﾀが全て０以外の場合

		Prn_edit_Date( cEditwk1, &Ryousyuu->TInTime );	// cEditwk1←入庫時刻印字ﾃﾞｰﾀ

		Str_Set1(										// -----印字ﾃﾞｰﾀ編集-----
					"入庫時刻",							// 文字列１："入庫時刻"
					cEditwk1,							// 文字列２：入庫時刻印字ﾃﾞｰﾀ
					pri_kind							// 印字先ﾌﾟﾘﾝﾀ
				);

		edit_cnt++;										// 編集行数更新

	}
// MH810100(S) Y.Watanabe 2019/11/25 車番チケットレス（再精算_領収証印字）
	if(	Ryousyuu->BeforeTPayTime.Year != 0
			||
		Ryousyuu->BeforeTPayTime.Mon != 0
			||
		Ryousyuu->BeforeTPayTime.Day != 0
			||
		Ryousyuu->BeforeTPayTime.Hour != 0
			||
		Ryousyuu->BeforeTPayTime.Min != 0 ){

		//	前回精算日時ﾃﾞｰﾀが全て０以外の場合

		Prn_edit_Date( cEditwk1, &Ryousyuu->BeforeTPayTime );	// cEditwk1←前回精算日時印字ﾃﾞｰﾀ

		Str_Set1(										// -----印字ﾃﾞｰﾀ編集-----
					"前回精算",							// 文字列１："前回精算"
					cEditwk1,							// 文字列２：前回精算日時印字ﾃﾞｰﾀ
					pri_kind							// 印字先ﾌﾟﾘﾝﾀ
				);

		edit_cnt++;										// 編集行数更新

	}
// MH810100(E) Y.Watanabe 2019/11/25 車番チケットレス（再精算_領収証印字）
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜出庫（精算）時刻＞印字ﾃﾞｰﾀ編集処理								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_outtime								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-07													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_outtime( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
// MH810103 MHUT40XX(S) みなし決済の集計を新規に設ける
	struct clk_rec wrk_clk_rec;		// 集計日時アンノーマライズ用
	memset( &wrk_clk_rec, 0x0, sizeof(wrk_clk_rec) );
// MH810103 MHUT40XX(E) みなし決済の集計を新規に設ける

// MH810100(S) m.saito 2020/05/13 車番チケットレス(#3908 領収証印字：未精算出庫対応)
	if( Ryousyuu->shubetsu == 1 ){						// 種別	(0=事前精算／1＝未精算出庫精算)
		if(	Ryousyuu->TUnpaidPayTime.Year != 0
				||
			Ryousyuu->TUnpaidPayTime.Mon != 0
				||
			Ryousyuu->TUnpaidPayTime.Day != 0
				||
			Ryousyuu->TUnpaidPayTime.Hour != 0
				||
			Ryousyuu->TUnpaidPayTime.Min != 0 ){

			//	精算時刻ﾃﾞｰﾀが全て０以外の場合

			Prn_edit_Date( cEditwk1, &Ryousyuu->TUnpaidPayTime );	// cEditwk1←精算時刻（未精算出庫用）印字ﾃﾞｰﾀ

			Str_Set1(										// -----印字ﾃﾞｰﾀ編集-----
						"精算時刻",							// 文字列１："精算時刻"
						cEditwk1,							// 文字列２：精算時刻印字ﾃﾞｰﾀ
						pri_kind							// 印字先ﾌﾟﾘﾝﾀ
					);

			edit_cnt++;										// 編集行数更新
		}
		if(	Ryousyuu->TOutTime.Year != 0
				||
			Ryousyuu->TOutTime.Mon != 0
				||
			Ryousyuu->TOutTime.Day != 0
				||
			Ryousyuu->TOutTime.Hour != 0
				||
			Ryousyuu->TOutTime.Min != 0 ){

			//	出庫時刻ﾃﾞｰﾀが全て０以外の場合

			Prn_edit_Date( cEditwk1, &Ryousyuu->TOutTime );	// cEditwk1←出庫（精算）時刻印字ﾃﾞｰﾀ

			Str_Set1(										// -----印字ﾃﾞｰﾀ編集-----
						"出庫時刻",							// 文字列１："出庫時刻"
						cEditwk1,							// 文字列２：出庫時刻印字ﾃﾞｰﾀ
						pri_kind							// 印字先ﾌﾟﾘﾝﾀ
					);

			edit_cnt++;										// 編集行数更新
		}
	}else
// MH810100(E) m.saito 2020/05/13 車番チケットレス(#3908 領収証印字：未精算出庫対応)
	if(	Ryousyuu->TOutTime.Year != 0
			||
		Ryousyuu->TOutTime.Mon != 0
			||
		Ryousyuu->TOutTime.Day != 0
			||
		Ryousyuu->TOutTime.Hour != 0
			||
		Ryousyuu->TOutTime.Min != 0 ){

		//	出庫（精算）時刻ﾃﾞｰﾀが全て０以外の場合

		Prn_edit_Date( cEditwk1, &Ryousyuu->TOutTime );	// cEditwk1←出庫（精算）時刻印字ﾃﾞｰﾀ

		Str_Set1(										// -----印字ﾃﾞｰﾀ編集-----
					"精算時刻",							// 文字列１："精算時刻"
					cEditwk1,							// 文字列２：精算時刻印字ﾃﾞｰﾀ
					pri_kind							// 印字先ﾌﾟﾘﾝﾀ
				);

		edit_cnt++;										// 編集行数更新
	}
// MH810103 MHUT40XX(S) みなし決済の集計を新規に設ける
// MH810105(S) MH364301 QRコード決済対応
//	if( isEC_USE() && Ryousyuu->Electron_data.Ec.dummy == 1 ){
	if( isEC_USE() && Ryousyuu->Electron_data.Ec.E_Flag.BIT.minashi_tim_pri == 1 ){
// MH810105(E) MH364301 QRコード決済対応

		// Electron_data.Ec.pay_datetimeより発生時刻を取得する
		c_UnNormalize_sec( Ryousyuu->Electron_data.Ec.pay_datetime, &wrk_clk_rec);

		Prn_edit_Date( cEditwk1, (date_time_rec*)&wrk_clk_rec );	// cEditwk1←発生時刻印字ﾃﾞｰﾀ

		Str_Set1(										// -----印字ﾃﾞｰﾀ編集-----
			"発生時刻",									 // 文字列１："発生時刻"
			cEditwk1,									// 文字列２：発生時刻印字ﾃﾞｰﾀ
			pri_kind									// 印字先ﾌﾟﾘﾝﾀ
		);

		edit_cnt++;										// 編集行数更新

	}
// MH810103 MHUT40XX(E) みなし決済の集計を新規に設ける
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜駐車時間＞印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_parktime								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-09-26													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_parktime( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	ulong	indate;				// 入庫日
	ulong	outdate;			// 出庫日
	ulong	intime;				// 入庫日時（分換算）
	ulong	outtime;			// 出庫日時（分換算）
	ulong	parktime;			// 駐車時間（分換算）
	ulong	park_day;			// 駐車時間（日）
	ulong	park_hour;			// 駐車時間（時）
	ulong	park_minu;			// 駐車時間（分）


	if( Ryousyuu->TInTime.Year != 0 ){				// 入庫時刻あり？（入庫時刻が設定されている場合のみ印字を行う）

		indate	= dnrmlzm(							// 入庫日計算
							(short)Ryousyuu->TInTime.Year,
							(short)Ryousyuu->TInTime.Mon,
							(short)Ryousyuu->TInTime.Day
						);

		outdate	= dnrmlzm(							// 出庫日計算
							(short)Ryousyuu->TOutTime.Year,
							(short)Ryousyuu->TOutTime.Mon,
							(short)Ryousyuu->TOutTime.Day
						);

		intime	= (indate*24*60) + (Ryousyuu->TInTime.Hour*60) + (Ryousyuu->TInTime.Min);		// 入庫日時（分換算）計算
		outtime	= (outdate*24*60) + (Ryousyuu->TOutTime.Hour*60) + (Ryousyuu->TOutTime.Min);	// 出庫日時（分換算）計算

		if( outtime >= intime ){
			// 出庫日時≧入庫日時
		
			parktime  = outtime - intime;					// 駐車時間取得（分換算）
			park_day  = parktime/(60*24);					// 駐車時間（日）計算
			park_hour = (parktime-(park_day*(60*24)))/60;	// 駐車時間（時）計算
			park_minu = parktime%60;						// 駐車時間（分）計算

			if( park_day == 0 ){

				// 駐車時間＝１日（２４時間）未満
				sprintf( cEditwk1,"%ld:%02ld", park_hour, park_minu );
			}
			else{
				// 駐車時間＝１日（２４時間）以上
				sprintf( cEditwk1,"%ld日  %ld:%02ld", park_day, park_hour, park_minu );
			}
		}
		else{
			// 出庫日時＜入庫日時（入出庫日時ﾃﾞｰﾀ異常）
			sprintf( cEditwk1,"--:--" );			// "--:--"
		}

		Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
					"駐車時間",						// 文字列１："駐車時間"
					cEditwk1,						// 文字列２：駐車時間	印字ﾃﾞｰﾀ
					pri_kind						// 印字先ﾌﾟﾘﾝﾀ
				);

		edit_cnt++;									// 編集行数更新
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜駐車料金＞印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_churyo								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-07													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_churyo( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	uchar	ryo_syu;			// 料金種別ﾃﾞｰﾀ
	short i;


	sprintf( cMnydata , "%ld" , Ryousyuu->WPrice );	// 駐車料金ﾃﾞｰﾀ編集
	Camma_Set( (uchar *)cMnydata );					// 駐車料金３桁区切り（”、”挿入）

	ryo_syu = Ryousyuu->syu;						// 料金種別ﾃﾞｰﾀ取得

	Str_Set2(										// -----印字ﾃﾞｰﾀ編集-----
				"駐車料金",							// 文字列１："駐車料金"
				SyubetuRyokin[ryo_syu],				// 文字列２：料金種別印字ﾃﾞｰﾀ
				cMnydata,							// 文字列３：料金印字ﾃﾞｰﾀ
				Pri_Tanni[PriT_YEN],				// 文字列４："円"
				pri_kind							// 印字先ﾌﾟﾘﾝﾀ
			);

	edit_cnt++;										// 編集行数更新

	for (i = 0; i < WTIK_USEMAX; i++) {
		if (Ryousyuu->DiscountData[i].DiscSyu == NTNET_GENGAKU) {

			sprintf( cMnydata,"%ld", Ryousyuu->DiscountData[i].Discount );	// 割引料金ﾃﾞｰﾀ編集
			if (Ryousyuu->DiscountData[i].Discount > 0) {
				Camma_Set( (uchar *)cMnydata );								// ３桁区切り（”、”挿入）
				StrAdd( (uchar *)cMnydata , (uchar*)"-");					// 割引額に"-"を付加
			}

			Str_Set2(										// -----印字ﾃﾞｰﾀ編集-----
						"未収金",							// 文字列１："未収金"
						"",									// 文字列２：""
						cMnydata,							// 文字列３：料金印字ﾃﾞｰﾀ
						Pri_Tanni[PriT_YEN],				// 文字列４："円"
						pri_kind							// 印字先ﾌﾟﾘﾝﾀ
					);

			edit_cnt++;										// 編集行数更新
			break;
		}

// MH810100(S) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
//		if (Ryousyuu->DiscountData[i].DiscSyu == NTNET_FURIKAE) {
//
//			Prn_edit_pkposi( cEditwk1,  Ryousyuu->MMPlace, 0 );				// cEditwk1←駐車位置印字ﾃﾞｰﾀ
//			Prn_edit_sya_syu( cEditwk2, (ushort)Ryousyuu->MMSyubetu ,1, 2);	// cEditwk2←振替元車室番号＆車種ﾃﾞｰﾀ
//
//			
//			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//						cEditwk2,											// 文字列１：振替元車室番号＆車種ﾃﾞｰﾀ
//						cEditwk1,											// 文字列２：駐車位置印字ﾃﾞｰﾀ
//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//					);
//					
//			edit_cnt++;														// 編集行数更新
//
//			sprintf( cMnydata,"%ld", Ryousyuu->BeforePwari );				// 料金印字ﾃﾞｰﾀ編集
//
//			sprintf( cMnydata,"%ld", Ryousyuu->DiscountData[i].Discount );	// 振替額ﾃﾞｰﾀ編集
//			if (Ryousyuu->DiscountData[i].Discount > 0) {
//				Camma_Set( (uchar *)cMnydata );								// ３桁区切り（”、”挿入）
//				StrAdd( (uchar *)cMnydata , (uchar*)"-");					// 割引額に"-"を付加
//			}
//
//			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//						"振替額",											// 文字列１："振替額"
//						"",													// 文字列２：""
//						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
//						Pri_Tanni[PriT_YEN],								// 文字列４："円"
//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//					);
//
//			edit_cnt++;														// 編集行数更新
//			break;
//		}
// MH810100(E) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
	}
// 仕様変更(S) K.Onodera 2016/10/26 領収証フォーマット
	for( i=0; i<DETAIL_SYU_MAX; i++ ){
		if( Ryousyuu->DetailData[i].DiscSyu == NTNET_FURIKAE_2 ){

			/*-----    スペース    -----*/
			edit_cnt += Prn_edit_space( pri_kind );

			/*-----    振替元精算追番    -----*/
			sprintf( cEditwk1, "精算No.%06ld", (Ryousyuu->DetailData[i].uDetail.Furikae.Oiban % 100000L) );	// "No.xxxxxx"ｾｯﾄ
			Str_Set1(								// ----- 印字ﾃﾞｰﾀ編集 -----
						"振替元精算追番",			// 印字項目	："振替元精算追番"
						cEditwk1,					// 印字ﾃﾞｰﾀ	：精算追番
						pri_kind					// 印字先ﾌﾟﾘﾝﾀ
						);
			edit_cnt++;
			/*-----    振替元車室番号    -----*/
			Prn_edit_pkposi( cEditwk1,  Ryousyuu->DetailData[i].uDetail.Furikae.Pos, 0 );	// cEditwk1←駐車位置印字ﾃﾞｰﾀ
			Prn_edit_sya_syu( cEditwk2, (ushort)(Ryousyuu->DetailData[i].uDetail.Furikae.Oiban / 100000L) ,1, 2);// cEditwk2←振替元車室番号＆車種ﾃﾞｰﾀ
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,											// 文字列１：振替元車室番号＆車種ﾃﾞｰﾀ
						cEditwk1,											// 文字列２：駐車位置印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;														// 編集行数更新
			/*-----    振替元駐車料金    -----*/
			sprintf( cEditwk1, "%ld", Ryousyuu->DetailData[i].uDetail.Furikae.OrgFee );
			Camma_Set( (uchar *)cEditwk1 );			// ３桁区切り（”、”挿入）
			sprintf( cMnydata, "(%s%s)", cEditwk1, Pri_Tanni[PriT_YEN] );
			Str_Set1(								// ----- 印字ﾃﾞｰﾀ編集 -----
						"振替元駐車料金",			// 印字項目	："振替元駐車料金"
						cMnydata,					// 印字ﾃﾞｰﾀ	：総支払額
						pri_kind					// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;														// 編集行数更新
		}
		else if( Ryousyuu->DetailData[i].DiscSyu == NTNET_FURIKAE_DETAIL ){

			/*-----    振替割引    -----*/
			if( Ryousyuu->DetailData[i].uDetail.FurikaeDetail.FrkDiscount ){
				sprintf( cMnydata,"%ld", Ryousyuu->DetailData[i].uDetail.FurikaeDetail.FrkDiscount );
				Camma_Set( (uchar *)cMnydata );								// ３桁区切り（”、”挿入）
				StrAdd( (uchar *)cMnydata , (uchar*)"-");					// 割引額に"-"を付加
				Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
							"振替割引",										// 文字列１："振替割引"
							"",												// 文字列２：""
							cMnydata,										// 文字列３：料金印字ﾃﾞｰﾀ
							Pri_Tanni[PriT_YEN],							// 文字列４："円"
							pri_kind										// 印字先ﾌﾟﾘﾝﾀ
						);

				edit_cnt++;													// 編集行数更新
			}

			/*-----    振替額    -----*/
			// 現金又は振替割引あり？
			if( Ryousyuu->DetailData[i].uDetail.FurikaeDetail.Mod == 0 ){
				// 現金振替額0円？
				if( Ryousyuu->DetailData[i].uDetail.FurikaeDetail.FrkMoney == 0 ){
// MH322914(S) K.Onodera 2016/12/22 [静的解析-572]書式指定子の予期する型と一致しない
//					sprintf( cMnydata,"%ld", 0 );
					sprintf( cMnydata,"%ld", (int)0 );
// MH322914(E) K.Onodera 2016/12/22 [静的解析-572]書式指定子の予期する型と一致しない
				}else{
					sprintf( cMnydata,"%ld", Ryousyuu->DetailData[i].uDetail.FurikaeDetail.FrkMoney );	// 振替額ﾃﾞｰﾀ編集
// 不具合修正(S) K.Onodera 2016/10/18 #1572 振替精算の領収証で振替額の金額にマイナスが印字されず、合計金額に振替額が反映されない。
					Camma_Set( (uchar *)cMnydata );								// ３桁区切り（”、”挿入）
					StrAdd( (uchar *)cMnydata , (uchar*)"-");					// 割引額に"-"を付加
// 不具合修正(E) K.Onodera 2016/10/18 #1572 振替精算の領収証で振替額の金額にマイナスが印字されず、合計金額に振替額が反映されない。
				}
				Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
							"振替額",										// 文字列１："振替額"
							"",												// 文字列２：""
							cMnydata,										// 文字列３：料金印字ﾃﾞｰﾀ
							Pri_Tanni[PriT_YEN],							// 文字列４："円"
							pri_kind										// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;														// 編集行数更新
			}
			// クレジット又は電子マネー振替額あり？
			else{
				// カード振替額0円？
				if( Ryousyuu->DetailData[i].uDetail.FurikaeDetail.FrkCard == 0 ){
// MH322914(S) K.Onodera 2016/12/22 [静的解析-572]書式指定子の予期する型と一致しない
//					sprintf( cMnydata,"%ld", 0 );
					sprintf( cMnydata,"%ld", (int)0 );
// MH322914(E) K.Onodera 2016/12/22 [静的解析-572]書式指定子の予期する型と一致しない
				}else{
					sprintf( cMnydata,"%ld", Ryousyuu->DetailData[i].uDetail.FurikaeDetail.FrkCard );	// 振替額ﾃﾞｰﾀ編集
// 不具合修正(S) K.Onodera 2016/10/18 #1572 振替精算の領収証で振替額の金額にマイナスが印字されず、合計金額に振替額が反映されない。
					Camma_Set( (uchar *)cMnydata );								// ３桁区切り（”、”挿入）
					StrAdd( (uchar *)cMnydata , (uchar*)"-");					// 割引額に"-"を付加
// 不具合修正(E) K.Onodera 2016/10/18 #1572 振替精算の領収証で振替額の金額にマイナスが印字されず、合計金額に振替額が反映されない。
				}
				switch( Ryousyuu->DetailData[i].uDetail.FurikaeDetail.Mod ){
					case 1:
						sprintf( cEditwk1, "振替額(ｸﾚｼﾞｯﾄ)" );
						break;
					case 2:
// MH321800(S) Y.Tanizaki ICクレジット対応
					case 3:
					case 5:
					case 6:
					case 7:
					case 8:
					case 9:
// MH321800(E) Y.Tanizaki ICクレジット対応
						sprintf( cEditwk1, "振替額(電子ﾏﾈｰ)" );
						break;
					default:
						sprintf( cEditwk1, "振替額" );
						break;
				}
				Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,										// 文字列１："振替額"
							"",												// 文字列２：""
							cMnydata,										// 文字列３：料金印字ﾃﾞｰﾀ
							Pri_Tanni[PriT_YEN],							// 文字列４："円"
							pri_kind										// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;														// 編集行数更新
			}
		}
	}
// 仕様変更(E) K.Onodera 2016/10/26 領収証フォーマット

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜定期更新料金＞印字ﾃﾞｰﾀ編集処理									|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_tupdryo								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-21													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_tupdryo( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	sprintf( cMnydata , "%ld" , Ryousyuu->WPrice );				// 駐車料金ﾃﾞｰﾀ編集
	Camma_Set( (uchar *)cMnydata );								// 駐車料金３桁区切り（”、”挿入）

	sprintf( cEditwk1, "更新料金(%dｹ月)", Ryousyuu->teiki.update_mon );	// 更新月数印字ﾃﾞｰﾀ編集

	Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
				cEditwk1,										// 文字列１："更新料金(  ｹ月)"
				"",												// 文字列２：""
				cMnydata,										// 文字列３：更新料金印字ﾃﾞｰﾀ
				Pri_Tanni[PriT_YEN],							// 文字列４："円"
				pri_kind										// 印字先ﾌﾟﾘﾝﾀ
			);

	edit_cnt++;													// 編集行数更新

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜定期券種別・契約Ｎｏ．＞印字ﾃﾞｰﾀ編集処理							|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_teiki									|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-07													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_teiki( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	uchar	tei_syu;			// 定期券種別ﾃﾞｰﾀ
	uchar	pkno_syu;			// 駐車場Ｎｏ．種別
	uchar	pri_set;			// 有効期限印字有無（設定ﾃﾞｰﾀ）
	uchar	kigen = 1;			// 有効期限有無（０：無、１：有）
	uchar	yakuwari;			// 定期券使用目的（設定ﾃﾞｰﾀ）


	if( Ryousyuu->teiki.id != 0){							// 定期券使用？

		sprintf( prn_work,"No.     ");						// 契約者Ｎｏ．印字ﾃﾞｰﾀ編集
		intoasl(	&(uchar)prn_work[3], Ryousyuu->teiki.id, 5 );

		tei_syu		= Ryousyuu->teiki.syu;					// 定期券種別ﾃﾞｰﾀ取得
		pkno_syu	= Ryousyuu->teiki.pkno_syu;				// 定期券駐車場Ｎｏ．種別取得

		Str_Set2(											// -----印字ﾃﾞｰﾀ編集-----
					TeikiTicket[pkno_syu][tei_syu -1],		// 文字列１：定期券種別印字ﾃﾞｰﾀ
					"",										// 文字列２：なし
					prn_work,								// 文字列３：契約者Ｎｏ．印字ﾃﾞｰﾀ
					"",										// 文字列４：なし
					pri_kind								// 印字先ﾌﾟﾘﾝﾀ
				);

		edit_cnt++;											// 編集行数更新

		pri_set = (uchar)prm_get( COM_PRM, S_RTP, 2, 1, 2 );// 「有効期限印字有無」	設定ﾃﾞｰﾀ取得

		if(	(Ryousyuu->teiki.s_year ==  0) && (Ryousyuu->teiki.s_mon ==  0) && (Ryousyuu->teiki.s_day ==  0) &&
			(Ryousyuu->teiki.e_year == 99) && (Ryousyuu->teiki.e_mon == 99) && (Ryousyuu->teiki.e_day == 99) ){
			// 無期限定期
			kigen = 0;										// 有効期限なし
		}

		if(	( pri_set == 1 ) && ( Ryousyuu->teiki.update_mon == 0 ) && ( kigen == 1 ) ){

			// 有効期限印字有無＝あり　且つ　定期更新でない　且つ　有効期限あり　の場合のみ有効期限を印字する

			sprintf	(	prn_work,							// 有効期限印字ﾃﾞｰﾀ編集
						"期限  %02d年%2d月%2d日～%02d年%2d月%2d日  ",
						(Ryousyuu->teiki.s_year)%100,
						Ryousyuu->teiki.s_mon,
						Ryousyuu->teiki.s_day,
						(Ryousyuu->teiki.e_year)%100,
						Ryousyuu->teiki.e_mon,
						Ryousyuu->teiki.e_day
					);

			PCMD_RIGHT( pri_kind );							// [位置揃え(右揃え)]
			PrnFontSize( FONT_A_NML, pri_kind );			// ﾌｫﾝﾄＡ（通常）指定
			PrnFontSize( FONT_K_NML, pri_kind );			// 漢字（通常）指定

			PrnStr( prn_work, pri_kind );					// 有効期限　印字ﾃﾞｰﾀ登録

			edit_cnt++;

		}
		yakuwari = (uchar)CPrmSS[S_PAS][ ( (tei_syu-1)*10 ) + 1];	// 「定期（種別＝tei_syu）の使用目的」設定ﾃﾞｰﾀ取得

		if( rangechk( 3,14,yakuwari )){ 			// 車種切換定期？

			//	車種切替定期の場合（種別３～１４）

			Str_Set1(								// -----印字ﾃﾞｰﾀ編集-----
						"",							// 文字列１：空白
						SyubetuRyokin[yakuwari-2],	// 文字列２：料金種別印字ﾃﾞｰﾀ（車種切替した種別）
						pri_kind					// 印字先ﾌﾟﾘﾝﾀ
					);

			edit_cnt++;
		}
	}

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜ｻｰﾋﾞｽ券＞印字ﾃﾞｰﾀ編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_service								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-07													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_service( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_flg = YES;		// 編集継続ﾌﾗｸﾞ
	uchar	data_end = OFF;		// 割引券ﾃﾞｰﾀ検索終了ﾌﾗｸﾞ
	uchar	edit_cnt = 0;		// 編集行数
	uchar	data_no;			// 割引券ﾃﾞｰﾀ番号
	uchar	pksyu;				// 駐車場Ｎｏ．種別
	uchar	svs_syu;			// ｻｰﾋﾞｽ券種別
	uchar	yakuwari;			// 設定ﾃﾞｰﾀ（役割）
	uchar	kirikae;			// 設定ﾃﾞｰﾀ（車種切替）
	wari_tiket	wari_dt;
// MH810105(S) MH364301 WAONの未了残高照会タイムアウト時の精算完了処理修正
//// MH321800(S) hosoda ICクレジット対応 (アラーム取引)
//	ushort	waon_wari;			// 設定ﾃﾞｰﾀ（WAON割引）
//// MH321800(E) hosoda ICクレジット対応 (アラーム取引)
// MH810105(E) MH364301 WAONの未了残高照会タイムアウト時の精算完了処理修正
// GG124100(S) R.Endo 2022/07/21 車番チケットレス3.0 #6465 割引10種対応 [共通改善項目 No1526]
// // MH810100(S) 2020/06/15 車番チケットレス(#4229 【事業部レビュー指摘】前回半端な割引適応後、再精算で残りの割引が適応された場合、NT-NETで差額送信するが使用枚数は0としてほしい)
// 	ushort	i;
// 	ushort	moto;
// // MH810100(E) 2020/06/15 車番チケットレス(#4229 【事業部レビュー指摘】前回半端な割引適応後、再精算で残りの割引が適応された場合、NT-NETで差額送信するが使用枚数は0としてほしい)
// GG124100(E) R.Endo 2022/07/21 車番チケットレス3.0 #6465 割引10種対応 [共通改善項目 No1526]

	for( ; edit_flg ; ){	// 店割引印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟ

		switch( p_proc_data->Prn_no_data2 ){	// 印字項目？

			/*--------------------------------------------------------------*/
			/*	ｻｰﾋﾞｽ券（A,B,C）印字ﾃﾞｰﾀ編集								*/
			/*--------------------------------------------------------------*/
			//	ｻｰﾋﾞｽ券種別は、割引券ﾃﾞｰﾀ（Ryousyuu->wari_data）に登録されている順番で印字される
			case	0:
				data_no = (uchar)p_proc_data->Prn_no_data1;								// 検索対象とする割引券ﾃﾞｰﾀ番号ｾｯﾄ
// GG124100(S) R.Endo 2022/07/21 車番チケットレス3.0 #6465 割引10種対応 [共通改善項目 No1526]
// // MH810100(S) 2020/06/15 車番チケットレス(#4229 【事業部レビュー指摘】前回半端な割引適応後、再精算で残りの割引が適応された場合、NT-NETで差額送信するが使用枚数は0としてほしい)
// 				moto = WTIK_USEMAX+1;
// 				if ( data_no == 0 ){
// 					for ( i = 0; i < WTIK_USEMAX; i++ ){
// 						// フラグがたっていて、サービス券の場合
// 						if( Ryousyuu->DiscountData[i].uDiscData.common.MoveMode == 1001 && 
// 							(Ryousyuu->DiscountData[i].DiscSyu == NTNET_SVS_T || Ryousyuu->DiscountData[i].DiscSyu == NTNET_SVS_M) ){
// 							moto = i;
// 							break;//発見
// 						}
// 					}
// 					if( moto < WTIK_USEMAX){
// 						for ( i = 0; i < WTIK_USEMAX; i++){
// 							// フラグが立っていて、サービス券で、発見した割引と駐車場№と種別が一致していた場合
// 							if( Ryousyuu->DiscountData[i].uDiscData.common.MoveMode == 2001 && 
// 								(Ryousyuu->DiscountData[i].DiscSyu == NTNET_SVS_T || Ryousyuu->DiscountData[i].DiscSyu == NTNET_SVS_M) &&
// 								Ryousyuu->DiscountData[i].DiscNo == Ryousyuu->DiscountData[moto].DiscNo && 
// 								Ryousyuu->DiscountData[i].ParkingNo == Ryousyuu->DiscountData[moto].ParkingNo ){
// 								// 加算する
// 								Ryousyuu->DiscountData[i].Discount += Ryousyuu->DiscountData[moto].Discount;
// 								Ryousyuu->DiscountData[i].DiscCount += Ryousyuu->DiscountData[moto].DiscCount;
// 								memset(&Ryousyuu->DiscountData[moto],0,sizeof(DISCOUNT_DATA));
// 								break;
// 							} 
// 						}
// 					}
// 				}
// // MH810100(E) 2020/06/15 車番チケットレス(#4229 【事業部レビュー指摘】前回半端な割引適応後、再精算で残りの割引が適応された場合、NT-NETで差額送信するが使用枚数は0としてほしい)
// GG124100(E) R.Endo 2022/07/21 車番チケットレス3.0 #6465 割引10種対応 [共通改善項目 No1526]

				for( ; data_no<WTIK_USEMAX ; data_no++ ){								// 割引券ﾃﾞｰﾀ検索
// GG124100(S) R.Endo 2022/09/30 車番チケットレス3.0 #6631 再精算時に、前回精算で使用した割引の追加の割引分が集計に反映されない
// 					disc_wari_conv( &Ryousyuu->DiscountData[data_no], &wari_dt );
					disc_wari_conv_new(&Ryousyuu->DiscountData[data_no], &wari_dt);
// GG124100(E) R.Endo 2022/09/30 車番チケットレス3.0 #6631 再精算時に、前回精算で使用した割引の追加の割引分が集計に反映されない
					if( wari_dt.tik_syu == SERVICE ){									// ｻｰﾋﾞｽ券ﾃﾞｰﾀ？

						// 割引券ﾃﾞｰﾀがｻｰﾋﾞｽ券の場合
																				
						/*------------------------------------------------------------------------------*/
						/*	割引券ﾃﾞｰﾀ（Ryousyuu->wari_data[]）内容										*/
						/*																				*/
						/*		tik_syu	：割引券種別		＝	ｻｰﾋﾞｽ券									*/
						/*		pkno_syu：駐車場Ｎｏ．種別	＝	基本 or 拡張１ or 拡張２ or 拡張３		*/
						/*		syubetu	：種別				＝	ｻｰﾋﾞｽ券種別（Ａ or Ｂ or Ｃ）			*/
						/*		mise_no	：店Ｎｏ．			＝	無関係									*/
						/*		maisuu	：枚数				＝	使用枚数								*/
						/*		ryokin	：割引料金			＝	割引金額合計							*/
						/*																				*/
						/*------------------------------------------------------------------------------*/

						pksyu = wari_dt.pkno_syu;										//「 駐車場Ｎｏ．種別」ﾃﾞｰﾀ取得
						svs_syu = wari_dt.syubetu;										// 「ｻｰﾋﾞｽ券種別」ﾃﾞｰﾀ取得

// GG124100(S) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない
						if ( CLOUD_CALC_MODE ) {	// クラウド料金計算モード
							yakuwari = Ryousyuu->DiscountData[data_no].uDiscData.common.DiscRole;
							kirikae = Ryousyuu->DiscountData[data_no].uDiscData.common.FeeKindSwitchSetting;
						} else {					// 通常料金計算モード
// GG124100(E) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない

// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//						yakuwari= (uchar)CPrmSS[S_SER][ ( (svs_syu-1)*3 ) + 1];			// 「ｻｰﾋﾞｽ券（種別＝svs_syu）の役割」		設定ﾃﾞｰﾀ取得
						yakuwari= (uchar)prm_get( COM_PRM, S_SER, (short)(( (svs_syu-1)*3 ) + 1), 1, 1 );			// 「ｻｰﾋﾞｽ券（種別＝svs_syu）の役割」		設定ﾃﾞｰﾀ取得
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
// MH810105(S) MH364301 WAONの未了残高照会タイムアウト時の精算完了処理修正
//// MH321800(S) hosoda ICクレジット対応 (アラーム取引)
//// MH810103 GG119202(S) 店No.100がT集計に印字されてしまう
////						if (yakuwari == 0) {
//						// WAONが有効か？
//						if (yakuwari == 0 && isEcBrandNoEnabledForRecvTbl(BRANDNO_WAON)) {
//// MH810103 GG119202(E) 店No.100がT集計に印字されてしまう
//							waon_wari = (ushort)prm_get(COM_PRM ,S_ECR, 11, 4, 1);
//							if ((waon_wari > 9000) && (svs_syu + 9000 == waon_wari)) {
//							// WAON割引の置き換え対象がサービス券
//								yakuwari = 4;
//							}
////							else if (!((waon_wari >= 1 && waon_wari <= 100) && (waon_wari >= 9001 && waon_wari <= 9015))) {
//							else if (!((waon_wari >= 1 && waon_wari <= 100) || (waon_wari >= 9001 && waon_wari <= 9015))) {
//							// WAON割引の置き換え対象が範囲外
//								if (svs_syu == 1) {
//									yakuwari = 4;
//								}
//							}
//						}
//// MH321800(E) hosoda ICクレジット対応 (アラーム取引)
// MH810105(E) MH364301 WAONの未了残高照会タイムアウト時の精算完了処理修正
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//						kirikae = (uchar)CPrmSS[S_SER][ ( (svs_syu-1)*3 ) + 3];			// 「ｻｰﾋﾞｽ券（種別＝svs_syu）の種別切替」	設定ﾃﾞｰﾀ取得
						kirikae = (uchar)prm_get( COM_PRM, S_SER, (short)(( (svs_syu-1)*3 ) + 3), 2, 1 );			// 「ｻｰﾋﾞｽ券（種別＝svs_syu）の種別切替」	設定ﾃﾞｰﾀ取得
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
// GG124100(S) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない
						}
// GG124100(E) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応/車種切替オンリーの場合は課税対象として印字しない）
						if( p_proc_data->Prn_no_wk[7] == YES ){
							// （非）課税媒体利用額（印字項目：212,213）での印字
							// 印字する内容を取捨選択する
							if( kirikae != 0 && yakuwari == 0 ){						// 種別切替ｵﾝﾘｰ
								if( p_proc_data->Prn_no_wk[8] == YES ){
									// 車種切替ｵﾝﾘｰの場合、課税対象設定ありでも212の印字項目で処理する
									continue;
								}
							}
							else{														// 割引役割あり
								if( cancelReceipt_Waridata_chk( &wari_dt ) != p_proc_data->Prn_no_wk[8] ){
									// 課税対象であるが、印字項目:212（非課税媒体利用額）の場合
									// 課税対象外であるが、印字項目:213（課税媒体利用額）の場合
									// 印字しない
									continue;
								}
							}
						}
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応/車種切替オンリーの場合は課税対象として印字しない）

						sprintf( prn_work,"%2d%s", wari_dt.maisuu, Pri_Tanni[PriT_MAI] );// 枚数ﾃﾞｰﾀ編集

						sprintf( cMnydata,"%ld", wari_dt.ryokin );						// 割引額編集
						Camma_Set( (uchar *)cMnydata );									// 割引額３桁区切り（”、”挿入）
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//						if( wari_dt.ryokin ){
//							StrAdd( (uchar *)cMnydata , (uchar*)"-");					// 割引額に"-"を付加
//						}
						// （非）課税媒体利用額（印字項目：212,213）での印字ではない
						// 課税媒体利用額（印字項目：213）ではない
						if( p_proc_data->Prn_no_wk[7] == NO || p_proc_data->Prn_no_wk[8] == NO ){
							if( wari_dt.ryokin ){
								StrAdd( (uchar *)cMnydata , (uchar*)"-");				// 割引額に"-"を付加
							}
						}
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）

						sprintf( cEditwk1,"%s", ServiceTicket[pksyu][svs_syu-1] );		// cEditwk1に「ｻｰﾋﾞｽ券種別印字ﾃﾞｰﾀ」編集

						if( (yakuwari != 0) && (kirikae == 0) ){

							//	役割＝割引　且つ　車種切替＝なし　の場合

							Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
										cEditwk1,										// 文字列１：ｻｰﾋﾞｽ券種別印字ﾃﾞｰﾀ
										prn_work,										// 文字列２：枚数印字ﾃﾞｰﾀ
										cMnydata,										// 文字列３：割引額印字ﾃﾞｰﾀ
										Pri_Tanni[PriT_YEN],							// 文字列４："円"
										pri_kind										// 印字先ﾌﾟﾘﾝﾀ
									);
							edit_cnt++;													// 編集行数更新
						}
						else if( (yakuwari == 0) && (kirikae != 0) ){

							//	役割＝なし　且つ　車種切替＝あり　の場合

							Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
										cEditwk1,										// 文字列１：ｻｰﾋﾞｽ券種別印字ﾃﾞｰﾀ
										prn_work,										// 文字列２：枚数印字ﾃﾞｰﾀ
										SyubetuRyokin[kirikae],							// 文字列３：料金種別印字ﾃﾞｰﾀ
										"",												// 文字列４：なし
										pri_kind										// 印字先ﾌﾟﾘﾝﾀ
									);
							edit_cnt++;													// 編集行数更新
						}
						else if( (yakuwari != 0) && (kirikae != 0) ){

							//	役割＝割引　且つ　車種切替＝あり　の場合

							Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
										cEditwk1,										// 文字列１：ｻｰﾋﾞｽ券種別印字ﾃﾞｰﾀ
										prn_work,										// 文字列２：枚数印字ﾃﾞｰﾀ
										SyubetuRyokin[kirikae],							// 文字列３：料金種別印字ﾃﾞｰﾀ
										"",												// 文字列４：なし
										pri_kind										// 印字先ﾌﾟﾘﾝﾀ
									);
							edit_cnt++;													// 編集行数更新

							Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
										"",												// 文字列１：なし
										"",												// 文字列２：なし
										cMnydata,										// 文字列３：割引額印字ﾃﾞｰﾀ
										Pri_Tanni[PriT_YEN],							// 文字列４："円"
										pri_kind										// 印字先ﾌﾟﾘﾝﾀ
									);
							edit_cnt++;													// 編集行数更新
						}
						if( (edit_cnt+2) > EDIT_GYOU_MAX ){								// 編集行数ﾁｪｯｸ

							// 次ﾃﾞｰﾀ編集（最大２行）が不可の場合

							data_no++;													// 次処理で検索する割引券ﾃﾞｰﾀ番号をｾｯﾄ
							edit_flg = NO;												// 編集終了
							break;														// 割引券ﾃﾞｰﾀ検索処理ﾙｰﾌﾟを抜ける
						}
					}
				}

				p_proc_data->Prn_no_data1 = data_no;									// 割引券ﾃﾞｰﾀ番号をｾｰﾌﾞ

				if( data_no >= WTIK_USEMAX || data_end == ON ){							// 割引券ﾃﾞｰﾀ検索終了？

					// 全ての割引券ﾃﾞｰﾀ検索を終了した場合
					data_end					= OFF;									// 割引券ﾃﾞｰﾀ検索終了ﾌﾗｸﾞﾘｾｯﾄ
					p_proc_data->Prn_no_data1	= 0;									// 割引券ﾃﾞｰﾀ番号ﾘｾｯﾄ
					p_proc_data->Prn_no_data2	= 1;									// 次編集項目番号ｾｯﾄ
// GG129000(S) T.Nagai 2023/02/15 ゲート式車番チケットレスシステム対応（インボイス対応）
					if( p_proc_data->Prn_no_wk[7] == YES ){								// （非）課税媒体利用額（印字項目：212,213）での印字
						edit_flg				= NO;									// 続けて精算中止券印字はしない
					}
// GG129000(E) T.Nagai 2023/02/15 ゲート式車番チケットレスシステム対応（インボイス対応）
				}

				break;

			/*--------------------------------------------------------------*/
			/*	精算中止ｻｰﾋﾞｽ券（A,B,C)印字ﾃﾞｰﾀ編集							*/
			/*--------------------------------------------------------------*/
			//	中止ｻｰﾋﾞｽ券種別は、割引券ﾃﾞｰﾀ（Ryousyuu->wari_data）に登録されている順番で印字される
			case	1:

				data_no = (uchar)p_proc_data->Prn_no_data1;								// 検索対象とする割引券ﾃﾞｰﾀ番号ｾｯﾄ

				for( ; data_no<WTIK_USEMAX ; data_no++ ){								// 割引券ﾃﾞｰﾀ検索

// GG124100(S) R.Endo 2022/07/21 車番チケットレス3.0 #6465 割引10種対応 [共通改善項目 No1526]
// 					disc_wari_conv( &Ryousyuu->DiscountData[data_no], &wari_dt );
					disc_wari_conv_prev( &Ryousyuu->DiscountData[data_no], &wari_dt );
// GG124100(E) R.Endo 2022/07/21 車番チケットレス3.0 #6465 割引10種対応 [共通改善項目 No1526]
					if( wari_dt.tik_syu == C_SERVICE ){									// 精算中止ｻｰﾋﾞｽ券ﾃﾞｰﾀ？

						// 割引券ﾃﾞｰﾀが精算中止ｻｰﾋﾞｽ券の場合

						/*------------------------------------------------------------------------------*/
						/*	割引券ﾃﾞｰﾀ（Ryousyuu->wari_data[]）内容										*/
						/*																				*/
						/*		tik_syu	：割引券種別		＝	精算中止ｻｰﾋﾞｽ券							*/
						/*		pkno_syu：駐車場Ｎｏ．種別	＝	基本 or 拡張１ or 拡張２ or 拡張３		*/
						/*		syubetu	：種別				＝	ｻｰﾋﾞｽ券種別（Ａ or Ｂ or Ｃ）			*/
						/*		mise_no	：店Ｎｏ．			＝	無関係									*/
						/*		maisuu	：枚数				＝	使用枚数								*/
						/*		ryokin	：割引料金			＝	割引金額合計							*/
						/*																				*/
						/*------------------------------------------------------------------------------*/

						pksyu = wari_dt.pkno_syu;										//「 駐車場Ｎｏ．種別」ﾃﾞｰﾀ取得
						svs_syu = wari_dt.syubetu;										// 「ｻｰﾋﾞｽ券種別」ﾃﾞｰﾀ取得

// GG124100(S) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない
						if ( CLOUD_CALC_MODE ) {	// クラウド料金計算モード
							yakuwari = Ryousyuu->DiscountData[data_no].uDiscData.common.DiscRole;
							kirikae = Ryousyuu->DiscountData[data_no].uDiscData.common.FeeKindSwitchSetting;
						} else {					// 通常料金計算モード
// GG124100(E) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない

// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//						yakuwari= (uchar)CPrmSS[S_SER][ ( (svs_syu-1)*3 ) + 1];			// 「ｻｰﾋﾞｽ券（種別＝svs_syu）の役割」		設定ﾃﾞｰﾀ取得
//						kirikae = (uchar)CPrmSS[S_SER][ ( (svs_syu-1)*3 ) + 3];			// 「ｻｰﾋﾞｽ券（種別＝svs_syu）の種別切替」設定ﾃﾞｰﾀ取得
						yakuwari= (uchar)prm_get( COM_PRM, S_SER, (short)(( (svs_syu-1)*3 ) + 1), 1, 1 );			// 「ｻｰﾋﾞｽ券（種別＝svs_syu）の役割」		設定ﾃﾞｰﾀ取得
						kirikae = (uchar)prm_get( COM_PRM, S_SER, (short)(( (svs_syu-1)*3 ) + 3), 2, 1 );			// 「ｻｰﾋﾞｽ券（種別＝svs_syu）の種別切替」設定ﾃﾞｰﾀ取得
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）

// GG124100(S) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない
						}
// GG124100(E) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない

						sprintf( prn_work,"%2d%s", wari_dt.maisuu, Pri_Tanni[PriT_MAI] );// 枚数ﾃﾞｰﾀ編集

						sprintf( cMnydata,"%ld", wari_dt.ryokin );						// 割引額編集
						Camma_Set( (uchar *)cMnydata );									// 割引額３桁区切り（”、”挿入）
						if( wari_dt.ryokin ){
							StrAdd( (uchar *)cMnydata , (uchar*)"-");					// 割引額に"-"を付加
						}

						sprintf( cEditwk1,"%s", ServiceTicket_chusi[pksyu][svs_syu-1] );// cEditwk1に「ｻｰﾋﾞｽ券種別印字ﾃﾞｰﾀ」編集

						if( (yakuwari != 0) && (kirikae == 0) ){

							//	役割＝割引　且つ　車種切替＝なし　の場合

							Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
										cEditwk1,										// 文字列１：ｻｰﾋﾞｽ券種別印字ﾃﾞｰﾀ
										prn_work,										// 文字列２：枚数印字ﾃﾞｰﾀ
										cMnydata,										// 文字列３：割引額印字ﾃﾞｰﾀ
										Pri_Tanni[PriT_YEN],							// 文字列４："円"
										pri_kind										// 印字先ﾌﾟﾘﾝﾀ
									);
							edit_cnt++;													// 編集行数更新
						}
						else if( (yakuwari == 0) && (kirikae != 0) ){

							//	役割＝なし　且つ　車種切替＝あり　の場合

							Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
										cEditwk1,										// 文字列１：ｻｰﾋﾞｽ券種別印字ﾃﾞｰﾀ
										prn_work,										// 文字列２：枚数印字ﾃﾞｰﾀ
										SyubetuRyokin[kirikae],							// 文字列３：料金種別印字ﾃﾞｰﾀ
										"",												// 文字列４：なし
										pri_kind										// 印字先ﾌﾟﾘﾝﾀ
									);
							edit_cnt++;													// 編集行数更新
						}
						else if( (yakuwari != 0) && (kirikae != 0) ){

							//	役割＝割引　且つ　車種切替＝あり　の場合

							Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
										cEditwk1,										// 文字列１：ｻｰﾋﾞｽ券種別印字ﾃﾞｰﾀ
										prn_work,										// 文字列２：枚数印字ﾃﾞｰﾀ
										SyubetuRyokin[kirikae],							// 文字列３：料金種別印字ﾃﾞｰﾀ
										"",												// 文字列４：なし
										pri_kind										// 印字先ﾌﾟﾘﾝﾀ
									);
							edit_cnt++;													// 編集行数更新

							Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
										"",												// 文字列１：なし
										"",												// 文字列２：なし
										cMnydata,										// 文字列３：割引額印字ﾃﾞｰﾀ
										Pri_Tanni[PriT_YEN],							// 文字列４："円"
										pri_kind										// 印字先ﾌﾟﾘﾝﾀ
									);
							edit_cnt++;													// 編集行数更新
						}
						if( (edit_cnt+2) > EDIT_GYOU_MAX ){								// 編集行数ﾁｪｯｸ

							// 次ﾃﾞｰﾀ編集（最大２行）が不可の場合

							data_no++;													// 次処理で検索する割引券ﾃﾞｰﾀ番号をｾｯﾄ
							edit_flg = NO;												// 編集終了
							break;														// 割引券ﾃﾞｰﾀ検索処理ﾙｰﾌﾟを抜ける
						}
					}
				}
				p_proc_data->Prn_no_data1 = data_no;									// 割引券ﾃﾞｰﾀ番号をｾｰﾌﾞ

				if( data_no >= WTIK_USEMAX || data_end == ON ){							// 割引券ﾃﾞｰﾀ検索終了？

					// 全ての割引券ﾃﾞｰﾀ検索を終了した場合
					p_proc_data->Prn_no_data1	= 0;									// 割引券ﾃﾞｰﾀ番号ﾘｾｯﾄ
					p_proc_data->Prn_no_data2	= 0;									// 次編集項目番号ﾘｾｯﾄ
					edit_flg					= NO;									// 編集終了
				}

				break;

			/*--------------------------------------------------------------*/
			/*	その他（印字項目ｴﾗｰ）										*/
			/*--------------------------------------------------------------*/
			default:
				p_proc_data->Prn_no_data1	= 0;
				p_proc_data->Prn_no_data2	= 0;
				edit_cnt					= 0;
				edit_flg					= NO;										// 編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
				break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
		}
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜店割引＞印字ﾃﾞｰﾀ編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_mesewari								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-07													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_misewari( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_flg = YES;		// 編集継続ﾌﾗｸﾞ
	uchar	data_end = OFF;		// 割引券ﾃﾞｰﾀ検索終了ﾌﾗｸﾞ
	uchar	edit_cnt = 0;		// 編集行数
	uchar	data_no;			// 割引券ﾃﾞｰﾀ番号
	uchar	pksyu;				// 駐車場Ｎｏ．種別
// MH322914(S) K.Onodera 2017/03/08 AI-V対応：遠隔精算割引
//	uchar	mise_no;			// 店Ｎｏ．
	ushort	mise_no;			// 店Ｎｏ．
// MH322914(E) K.Onodera 2017/03/08 AI-V対応：遠隔精算割引
	uchar	yakuwari;			// 設定ﾃﾞｰﾀ（役割）
	uchar	kirikae;			// 設定ﾃﾞｰﾀ（車種切替）
	wari_tiket	wari_dt;
// MH322914(S) K.Onodera 2017/03/08 AI-V対応：遠隔精算割引
	uchar	ucSetFlg = 0;
// MH322914(E) K.Onodera 2017/03/08 AI-V対応：遠隔精算割引
// GG124100(S) R.Endo 2022/07/21 車番チケットレス3.0 #6465 割引10種対応 [共通改善項目 No1526]
// // MH810100(S) 2020/06/15 車番チケットレス(#4229 【事業部レビュー指摘】前回半端な割引適応後、再精算で残りの割引が適応された場合、NT-NETで差額送信するが使用枚数は0としてほしい)
// 	ushort	i;
// 	ushort	moto;
// // MH810100(E) 2020/06/15 車番チケットレス(#4229 【事業部レビュー指摘】前回半端な割引適応後、再精算で残りの割引が適応された場合、NT-NETで差額送信するが使用枚数は0としてほしい)
// GG124100(E) R.Endo 2022/07/21 車番チケットレス3.0 #6465 割引10種対応 [共通改善項目 No1526]
// MH810104(S) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(印字データ編集処理の変更)
	uchar	wari_syu;			// 割引種別
// MH810104(E) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(印字データ編集処理の変更)

	for( ; edit_flg ; ){	// 店割引印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟ

		switch( p_proc_data->Prn_no_data2 ){	// 印字項目？

			/*--------------------------------------------------------------*/
			/*	＜店Ｎo．割引＞印字ﾃﾞｰﾀ編集									*/
			/*--------------------------------------------------------------*/
			//	店Ｎo．は、割引券ﾃﾞｰﾀ（Ryousyuu->wari_data）に登録されている順番で印字される
			case	0:
				data_no = (uchar)p_proc_data->Prn_no_data1;								// 検索対象とする割引券ﾃﾞｰﾀ番号ｾｯﾄ
// GG124100(S) R.Endo 2022/07/21 車番チケットレス3.0 #6465 割引10種対応 [共通改善項目 No1526]
// // MH810100(S) 2020/06/15 車番チケットレス(#4229 【事業部レビュー指摘】前回半端な割引適応後、再精算で残りの割引が適応された場合、NT-NETで差額送信するが使用枚数は0としてほしい)
// 				moto = WTIK_USEMAX+1;
// 				if ( data_no == 0 ){
// 					for ( i = 0; i < WTIK_USEMAX; i++ ){
// 						// フラグがたっていて、店割引券の場合
// 						if( Ryousyuu->DiscountData[i].uDiscData.common.MoveMode == 1001 && 
// 							(Ryousyuu->DiscountData[i].DiscSyu == NTNET_KAK_T || Ryousyuu->DiscountData[i].DiscSyu == NTNET_KAK_M || 
// // MH810104(S) R.Endo 2021/08/18 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(印字データ編集処理の変更)
// 							Ryousyuu->DiscountData[i].DiscSyu == NTNET_TKAK_T || Ryousyuu->DiscountData[i].DiscSyu == NTNET_TKAK_M || 
// // MH810104(E) R.Endo 2021/08/18 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(印字データ編集処理の変更)
// 							Ryousyuu->DiscountData[i].DiscSyu == NTNET_SHOP_DISC_AMT || Ryousyuu->DiscountData[i].DiscSyu == NTNET_SHOP_DISC_TIME) ){
// 							moto = i;
// 							break;//発見
// 						}
// 					}
// 					if( moto < WTIK_USEMAX){
// 						for ( i = 0; i < WTIK_USEMAX; i++){
// 							// フラグが立っていて、店割引券で、発見した割引と駐車場№と種別が一致していた場合
// 							if( Ryousyuu->DiscountData[i].uDiscData.common.MoveMode == 2001 && 
// 								(Ryousyuu->DiscountData[i].DiscSyu == NTNET_KAK_T || Ryousyuu->DiscountData[i].DiscSyu == NTNET_KAK_M || 
// // MH810104(S) R.Endo 2021/08/18 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(印字データ編集処理の変更)
// 								Ryousyuu->DiscountData[i].DiscSyu == NTNET_TKAK_T || Ryousyuu->DiscountData[i].DiscSyu == NTNET_TKAK_M || 
// // MH810104(E) R.Endo 2021/08/18 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(印字データ編集処理の変更)
// 								Ryousyuu->DiscountData[i].DiscSyu == NTNET_SHOP_DISC_AMT || Ryousyuu->DiscountData[i].DiscSyu == NTNET_SHOP_DISC_TIME) &&
// 								Ryousyuu->DiscountData[i].DiscNo == Ryousyuu->DiscountData[moto].DiscNo && 
// 								Ryousyuu->DiscountData[i].ParkingNo == Ryousyuu->DiscountData[moto].ParkingNo ){
// 								// 加算する
// 								Ryousyuu->DiscountData[i].Discount += Ryousyuu->DiscountData[moto].Discount;
// 								Ryousyuu->DiscountData[i].DiscCount += Ryousyuu->DiscountData[moto].DiscCount;
// 								memset(&Ryousyuu->DiscountData[moto],0,sizeof(DISCOUNT_DATA));
// 								break;
// 							} 
// 						}
// 					}
// 				}
// // MH810100(E) 2020/06/15 車番チケットレス(#4229 【事業部レビュー指摘】前回半端な割引適応後、再精算で残りの割引が適応された場合、NT-NETで差額送信するが使用枚数は0としてほしい)
// GG124100(E) R.Endo 2022/07/21 車番チケットレス3.0 #6465 割引10種対応 [共通改善項目 No1526]

				for( ; data_no < WTIK_USEMAX ; data_no++ ){								// 割引券ﾃﾞｰﾀ検索
// GG124100(S) R.Endo 2022/09/30 車番チケットレス3.0 #6631 再精算時に、前回精算で使用した割引の追加の割引分が集計に反映されない
// 					disc_wari_conv( &Ryousyuu->DiscountData[data_no], &wari_dt );
					disc_wari_conv_new(&Ryousyuu->DiscountData[data_no], &wari_dt);
// GG124100(E) R.Endo 2022/09/30 車番チケットレス3.0 #6631 再精算時に、前回精算で使用した割引の追加の割引分が集計に反映されない
					if( wari_dt.tik_syu == KAKEURI ){									// 掛売券ﾃﾞｰﾀ？

						// 割引券ﾃﾞｰﾀが掛売券の場合

						/*------------------------------------------------------------------------------*/
						/*	割引券ﾃﾞｰﾀ（Ryousyuu->wari_data[]）内容										*/
						/*																				*/
						/*		tik_syu	：割引券種別		＝	掛売券									*/
						/*		pkno_syu：駐車場Ｎｏ．種別	＝	基本 or 拡張１ or 拡張２ or 拡張３		*/
						/*		syubetu	：種別				＝	店Ｎｏ．（１～１００）					*/
						/*		mise_no	：店Ｎｏ．			＝	多店舗割引種別(多店舗割引時のみ)		*/
						/*		maisuu	：枚数				＝	使用枚数								*/
						/*		ryokin	：割引料金			＝	割引金額合計							*/
						/*																				*/
						/*------------------------------------------------------------------------------*/

						pksyu	= wari_dt.pkno_syu;										//「 駐車場Ｎｏ．種別」ﾃﾞｰﾀ取得
						mise_no = wari_dt.syubetu;										// 「店Ｎｏ．」ﾃﾞｰﾀ取得
// MH810104(S) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(印字データ編集処理の変更)
// 						yakuwari= (uchar)CPrmSS[S_STO][ ( (mise_no-1)*3 ) + 1];			// 「店割引（店Ｎｏ．＝svs_syu）の役割」	設定ﾃﾞｰﾀ取得
// // MH810103 GG118809_GG118909(S) WAONの未了残高照会タイムアウト（精算完了）で領収証に店割引情報が印字されない
// //// MH810100(S) 2020/08/20 車番チケットレス(#4756 店100のQRコードを翳して種別切替を行い領収証を発行すると、「0円」の印字がされてしまう)
// ////// MH321800(S) hosoda ICクレジット対応 (アラーム取引)
// ////						if (yakuwari == 0 && mise_no == (ushort)prm_get(COM_PRM ,S_ECR, 11, 4, 1)) {
// ////						// WAON割引の置き換え対象の場合
// ////							yakuwari = 4;
// ////						}
// ////// MH321800(E) hosoda ICクレジット対応 (アラーム取引)
// //// MH810100(E) 2020/08/20 車番チケットレス(#4756 店100のQRコードを翳して種別切替を行い領収証を発行すると、「0円」の印字がされてしまう)
// //// GG119202(S) 店No.100がT集計に印字されてしまう
// ////						if (yakuwari == 0 && mise_no == (ushort)prm_get(COM_PRM ,S_ECR, 11, 4, 1)) {
// //						// WAONが有効か？
// //						if (yakuwari == 0 && mise_no == (ushort)prm_get(COM_PRM ,S_ECR, 11, 4, 1) &&
// //							isEcBrandNoEnabledForRecvTbl(BRANDNO_WAON)) {
// // GG119202(E) 店No.100がT集計に印字されてしまう
// //						// WAON割引の置き換え対象の場合
// //							yakuwari = 4;
// //						}
// // MH810103 GG118809_GG118909(E) WAONの未了残高照会タイムアウト（精算完了）で領収証に店割引情報が印字されない
// 						kirikae	= (uchar)CPrmSS[S_STO][ ( (mise_no-1)*3 ) + 3];			// 「店割引（店Ｎｏ．＝svs_syu）の種別切替」設定ﾃﾞｰﾀ取得
						wari_syu = (uchar)wari_dt.mise_no;								// 「割引種別」ﾃﾞｰﾀ取得

// GG124100(S) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない
						if ( CLOUD_CALC_MODE ) {	// クラウド料金計算モード
							yakuwari = Ryousyuu->DiscountData[data_no].uDiscData.common.DiscRole;
							kirikae = Ryousyuu->DiscountData[data_no].uDiscData.common.FeeKindSwitchSetting;
						} else {					// 通常料金計算モード
// GG124100(E) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない

						if ( wari_syu ) {
							yakuwari = (uchar)prm_get(COM_PRM, S_TAT, (wari_syu * 2), 1, 1);		// 「役割」設定ﾃﾞｰﾀ取得
						} else {
							yakuwari = (uchar)prm_get(COM_PRM, S_STO, ((mise_no * 3) - 2), 1, 1);	// 「役割」設定ﾃﾞｰﾀ取得
						}
						if ( mise_no > STORE_NUMMAX ) {
							kirikae  = (uchar)prm_get(COM_PRM, S_TAT, (mise_no - 69), 2, 1);		// 「種別切換」設定ﾃﾞｰﾀ取得
						} else {
							kirikae  = (uchar)prm_get(COM_PRM, S_STO, (mise_no * 3), 2, 1);			// 「種別切換」設定ﾃﾞｰﾀ取得
						}

// GG124100(S) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない
						}
// GG124100(E) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
						if( p_proc_data->Prn_no_wk[7] == YES ){
							// （非）課税媒体利用額（印字項目：212,213）での印字
							// 印字する内容を取捨選択する
							if( kirikae != 0 && yakuwari == 0 && mise_no <= STORE_NUMMAX ){	// 種別切替ｵﾝﾘｰ
								if( p_proc_data->Prn_no_wk[8] == YES ){
									// 車種切替ｵﾝﾘｰの場合、課税対象設定ありでも212の印字項目で処理する
									continue;
								}
							}
							else{														// 割引役割あり
								if( cancelReceipt_Waridata_chk( &wari_dt ) != p_proc_data->Prn_no_wk[8] ){
									// 課税対象であるが、印字項目:212（非課税媒体利用額）の場合
									// 課税対象外であるが、印字項目:213（課税媒体利用額）の場合
									// 印字しない
									continue;
								}
							}
						}
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
// MH810104(E) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(印字データ編集処理の変更)

						sprintf( prn_work,"%2d%s", wari_dt.maisuu, Pri_Tanni[PriT_MAI] );// 枚数ﾃﾞｰﾀ編集

						sprintf( cMnydata,"%ld", wari_dt.ryokin );						// 割引額編集
						Camma_Set( (uchar *)cMnydata );									// 割引額３桁区切り（”、”挿入）
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//						if( wari_dt.ryokin ){
//							StrAdd( (uchar *)cMnydata , (uchar*)"-");					// 割引額に"-"を付加
//						}
						// （非）課税媒体利用額（印字項目：212,213）での印字ではない
						// 課税媒体利用額（印字項目：213）ではない
						if( p_proc_data->Prn_no_wk[7] == NO || p_proc_data->Prn_no_wk[8] == NO ){
							if( wari_dt.ryokin ){
								StrAdd( (uchar *)cMnydata , (uchar*)"-");				// 割引額に"-"を付加
							}
						}
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）

// MH810104(S) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(印字データ編集処理の変更)
// 						sprintf( cEditwk1,"%s%03d", KakeuriTicket[pksyu], mise_no );	// cEditwk1に「店Ｎｏ．印字ﾃﾞｰﾀ」編集
						if ( wari_syu ) {
							sprintf(cEditwk1, "%s%03d(割%02d)", KakeuriTicket[pksyu], mise_no, wari_syu);	// 「店Ｎｏ．印字ﾃﾞｰﾀ」編集
						} else {
							sprintf(cEditwk1, "%s%03d", KakeuriTicket[pksyu], mise_no);						// 「店Ｎｏ．印字ﾃﾞｰﾀ」編集
						}
// MH810104(E) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(印字データ編集処理の変更)

// MH322914(S) K.Onodera 2017/03/08 AI-V対応：遠隔精算割引
						// ParkingWeb経由のParkiPro対応あり？
						if( _is_ParkingWeb_pip() ){
							// ParkingWebからの店割引№設定と一致？
							if( (ushort)(prm_get( COM_PRM, S_CEN, 45, 4, 1 )) == mise_no ){
								Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
											cEditwk1,										// 文字列１：店Ｎｏ．印字ﾃﾞｰﾀ
											prn_work,										// 文字列２：枚数印字ﾃﾞｰﾀ
											cMnydata,										// 文字列３：割引額印字ﾃﾞｰﾀ
											Pri_Tanni[PriT_YEN],							// 文字列４："円"
											pri_kind										// 印字先ﾌﾟﾘﾝﾀ
										);
								edit_cnt++;		// 編集行数更新
								ucSetFlg = 1;
							}
						}
// MH322914(E) K.Onodera 2017/03/08 AI-V対応：遠隔精算割引

// MH322914(S) K.Onodera 2017/03/08 AI-V対応：遠隔精算割引
						if( !ucSetFlg ){
// MH322914(E) K.Onodera 2017/03/08 AI-V対応：遠隔精算割引
						if( (yakuwari != 0) && (kirikae == 0) ){

							//	役割＝割引　且つ　車種切替＝なし　の場合

							Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
										cEditwk1,										// 文字列１：店Ｎｏ．印字ﾃﾞｰﾀ
										prn_work,										// 文字列２：枚数印字ﾃﾞｰﾀ
										cMnydata,										// 文字列３：割引額印字ﾃﾞｰﾀ
										Pri_Tanni[PriT_YEN],							// 文字列４："円"
										pri_kind										// 印字先ﾌﾟﾘﾝﾀ
									);
							edit_cnt++;		// 編集行数更新
						}
						else if( (yakuwari == 0) && (kirikae != 0) ){

							//	役割＝なし　且つ　車種切替＝あり　の場合

							Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
										cEditwk1,										// 文字列１：店Ｎｏ．印字ﾃﾞｰﾀ
										prn_work,										// 文字列２：枚数印字ﾃﾞｰﾀ
										SyubetuRyokin[kirikae],							// 文字列３：料金種別印字ﾃﾞｰﾀ
										"",												// 文字列４：なし
										pri_kind										// 印字先ﾌﾟﾘﾝﾀ
									);
							edit_cnt++;													// 編集行数更新
						}
						else if( (yakuwari != 0) && (kirikae != 0) ){

							//	役割＝割引　且つ　車種切替＝あり　の場合

							Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
										cEditwk1,										// 文字列１：店Ｎｏ．印字ﾃﾞｰﾀ
										prn_work,										// 文字列２：枚数印字ﾃﾞｰﾀ
										SyubetuRyokin[kirikae],							// 文字列３：料金種別印字ﾃﾞｰﾀ
										"",												// 文字列４：なし
										pri_kind										// 印字先ﾌﾟﾘﾝﾀ
									);
							edit_cnt++;													// 編集行数更新

							Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
										"",												// 文字列１：なし
										"",												// 文字列２：なし
										cMnydata,										// 文字列３：割引額印字ﾃﾞｰﾀ
										Pri_Tanni[PriT_YEN],							// 文字列４："円"
										pri_kind										// 印字先ﾌﾟﾘﾝﾀ
									);
							edit_cnt++;													// 編集行数更新
						}
// MH322914(S) K.Onodera 2017/03/08 AI-V対応：遠隔精算割引
						}
// MH322914(E) K.Onodera 2017/03/08 AI-V対応：遠隔精算割引
						if( (edit_cnt+2) > EDIT_GYOU_MAX ){								// 編集行数ﾁｪｯｸ

							// 次ﾃﾞｰﾀ編集（最大２行）が不可の場合

							data_no++;													// 次処理で検索する割引券ﾃﾞｰﾀ番号をｾｯﾄ
							edit_flg = NO;												// 編集終了
							break;														// 割引券ﾃﾞｰﾀ検索処理ﾙｰﾌﾟを抜ける
						}
					}
				}
				p_proc_data->Prn_no_data1 = data_no;									// 割引券ﾃﾞｰﾀ番号をｾｰﾌﾞ

				if( data_no >= WTIK_USEMAX || data_end == ON ){							// 割引券ﾃﾞｰﾀ検索終了？

					// 全ての割引券ﾃﾞｰﾀ検索を終了した場合
					data_end					= OFF;									// 割引券ﾃﾞｰﾀ検索終了ﾌﾗｸﾞﾘｾｯﾄ
					p_proc_data->Prn_no_data1	= 0;									// 割引券ﾃﾞｰﾀ番号ﾘｾｯﾄ
					p_proc_data->Prn_no_data2	= 1;									// 次編集項目番号ｾｯﾄ
// GG129000(S) T.Nagai 2023/02/15 ゲート式車番チケットレスシステム対応（インボイス対応）
					if( p_proc_data->Prn_no_wk[7] == YES ){								// （非）課税媒体利用額（印字項目：212,213）での印字
						edit_flg				= NO;									// 続けて精算中止券印字はしない
					}
// GG129000(E) T.Nagai 2023/02/15 ゲート式車番チケットレスシステム対応（インボイス対応）
				}

				break;

			/*--------------------------------------------------------------*/
			/*	＜精算中止店Ｎo．割引＞印字ﾃﾞｰﾀ編集							*/
			/*--------------------------------------------------------------*/
			//	中止店Ｎo．割引は、割引券ﾃﾞｰﾀ（Ryousyuu->wari_data）に登録されている順番で印字される
			case	1:

				data_no = (uchar)p_proc_data->Prn_no_data1;								// 検索対象とする割引券ﾃﾞｰﾀ番号ｾｯﾄ

				for( ; data_no < WTIK_USEMAX ; data_no++ ){								// 割引券ﾃﾞｰﾀ検索

// GG124100(S) R.Endo 2022/07/21 車番チケットレス3.0 #6465 割引10種対応 [共通改善項目 No1526]
// 					disc_wari_conv( &Ryousyuu->DiscountData[data_no], &wari_dt );
					disc_wari_conv_prev( &Ryousyuu->DiscountData[data_no], &wari_dt );
// GG124100(E) R.Endo 2022/07/21 車番チケットレス3.0 #6465 割引10種対応 [共通改善項目 No1526]
					if( wari_dt.tik_syu == C_KAKEURI ){									// 精算中止掛売券ﾃﾞｰﾀ？

						// 割引券ﾃﾞｰﾀが精算中止掛売券の場合

						/*------------------------------------------------------------------------------*/
						/*	割引券ﾃﾞｰﾀ（Ryousyuu->wari_data[]）内容										*/
						/*																				*/
						/*		tik_syu	：割引券種別		＝	精算中止掛売券							*/
						/*		pkno_syu：駐車場Ｎｏ．種別	＝	基本 or 拡張１ or 拡張２ or 拡張３		*/
						/*		syubetu	：種別				＝	店Ｎｏ．（１～１００）					*/
						/*		mise_no	：店Ｎｏ．			＝	多店舗割引種別(多店舗割引時のみ)		*/
						/*		maisuu	：枚数				＝	使用枚数								*/
						/*		ryokin	：割引料金			＝	割引金額合計							*/
						/*																				*/
						/*------------------------------------------------------------------------------*/

						pksyu	= wari_dt.pkno_syu;										//「 駐車場Ｎｏ．種別」ﾃﾞｰﾀ取得
						mise_no = wari_dt.syubetu;										// 「店Ｎｏ．」ﾃﾞｰﾀ取得
// MH810104(S) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(印字データ編集処理の変更)
// 						yakuwari= (uchar)CPrmSS[S_STO][ ( (mise_no-1)*3 ) + 1];			// 「店割引（店Ｎｏ．＝svs_syu）の役割」	設定ﾃﾞｰﾀ取得
// 						kirikae	= (uchar)CPrmSS[S_STO][ ( (mise_no-1)*3 ) + 3];			// 「店割引（店Ｎｏ．＝svs_syu）の種別切替」設定ﾃﾞｰﾀ取得
						wari_syu = (uchar)wari_dt.mise_no;								// 「割引種別」ﾃﾞｰﾀ取得

// GG124100(S) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない
						if ( CLOUD_CALC_MODE ) {	// クラウド料金計算モード
							yakuwari = Ryousyuu->DiscountData[data_no].uDiscData.common.DiscRole;
							kirikae = Ryousyuu->DiscountData[data_no].uDiscData.common.FeeKindSwitchSetting;
						} else {					// 通常料金計算モード
// GG124100(E) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない

						if ( wari_syu ) {
							yakuwari = (uchar)prm_get(COM_PRM, S_TAT, (wari_syu * 2), 1, 1);		// 「役割」設定ﾃﾞｰﾀ取得
						} else {
							yakuwari = (uchar)prm_get(COM_PRM, S_STO, ((mise_no * 3) - 2), 1, 1);	// 「役割」設定ﾃﾞｰﾀ取得
						}
						if ( mise_no > STORE_NUMMAX ) {
							kirikae  = (uchar)prm_get(COM_PRM, S_TAT, (mise_no - 69), 2, 1);		// 「種別切換」設定ﾃﾞｰﾀ取得
						} else {
							kirikae  = (uchar)prm_get(COM_PRM, S_STO, (mise_no * 3), 2, 1);			// 「種別切換」設定ﾃﾞｰﾀ取得
						}

// GG124100(S) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない
						}
// GG124100(E) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない
// MH810104(E) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(印字データ編集処理の変更)

						sprintf( prn_work,"%2d%s", wari_dt.maisuu, Pri_Tanni[PriT_MAI] );// 枚数ﾃﾞｰﾀ編集

						sprintf( cMnydata,"%ld", wari_dt.ryokin );						// 割引額編集
						Camma_Set( (uchar *)cMnydata );									// 割引額３桁区切り（”、”挿入）
						if( wari_dt.ryokin ){
							StrAdd( (uchar *)cMnydata , (uchar*)"-");					// 割引額に"-"を付加
						}

// MH810104(S) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(印字データ編集処理の変更)
// 						sprintf( cEditwk1,"%s%03d", KakeuriTicket_chusi[pksyu], mise_no );	// cEditwk1に「店Ｎｏ．印字ﾃﾞｰﾀ」編集
						if ( wari_syu ) {
							sprintf(cEditwk1, "%s%03d(割%02d)", KakeuriTicket_chusi[pksyu], mise_no, wari_syu);	// 「店Ｎｏ．印字ﾃﾞｰﾀ」編集
						} else {
							sprintf(cEditwk1, "%s%03d", KakeuriTicket_chusi[pksyu], mise_no);						// 「店Ｎｏ．印字ﾃﾞｰﾀ」編集
						}
// MH810104(E) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(印字データ編集処理の変更)

// MH810103 GG118809_GG118909(S) WAONの未了残高照会タイムアウト（精算完了）で領収証に店割引情報が印字されない
						// WAONが有効か？
						if (yakuwari == 0 && mise_no == (ushort)prm_get(COM_PRM, S_ECR, 11, 4, 1) &&
							isEcBrandNoEnabledForRecvTbl(BRANDNO_WAON)) {
							// WAON割引の置き換え対象の場合
							yakuwari = 4;
						}
// MH810103 GG118809_GG118909(E) WAONの未了残高照会タイムアウト（精算完了）で領収証に店割引情報が印字されない
						if( (yakuwari != 0) && (kirikae == 0) ){

							//	役割＝割引　且つ　車種切替＝なし　の場合

							Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
										cEditwk1,										// 文字列１：店Ｎｏ．印字ﾃﾞｰﾀ
										prn_work,										// 文字列２：枚数印字ﾃﾞｰﾀ
										cMnydata,										// 文字列３：割引額印字ﾃﾞｰﾀ
										Pri_Tanni[PriT_YEN],							// 文字列４："円"
										pri_kind										// 印字先ﾌﾟﾘﾝﾀ
									);
							edit_cnt++;													// 編集行数更新
						}
						else if( (yakuwari == 0) && (kirikae != 0) ){

							//	役割＝なし　且つ　車種切替＝あり　の場合

							Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
										cEditwk1,										// 文字列１：店Ｎｏ．印字ﾃﾞｰﾀ
										prn_work,										// 文字列２：枚数印字ﾃﾞｰﾀ
										SyubetuRyokin[kirikae],							// 文字列３：料金種別印字ﾃﾞｰﾀ
										"",												// 文字列４：なし
										pri_kind										// 印字先ﾌﾟﾘﾝﾀ
									);
							edit_cnt++;													// 編集行数更新
						}
						else if( (yakuwari != 0) && (kirikae != 0) ){

							//	役割＝割引　且つ　車種切替＝あり　の場合

							Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
										cEditwk1,										// 文字列１：店Ｎｏ．印字ﾃﾞｰﾀ
										prn_work,										// 文字列２：枚数印字ﾃﾞｰﾀ
										SyubetuRyokin[kirikae],							// 文字列３：料金種別印字ﾃﾞｰﾀ
										"",												// 文字列４：なし
										pri_kind										// 印字先ﾌﾟﾘﾝﾀ
									);
							edit_cnt++;													// 編集行数更新

							Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
										"",												// 文字列１：なし
										"",												// 文字列２：なし
										cMnydata,										// 文字列３：割引額印字ﾃﾞｰﾀ
										Pri_Tanni[PriT_YEN],							// 文字列４："円"
										pri_kind										// 印字先ﾌﾟﾘﾝﾀ
									);
							edit_cnt++;													// 編集行数更新
						}

						if( (edit_cnt+2) > EDIT_GYOU_MAX ){								// 編集行数ﾁｪｯｸ

							// 次ﾃﾞｰﾀ編集（最大２行）が不可の場合

							data_no++;													// 次処理で検索する割引券ﾃﾞｰﾀ番号をｾｯﾄ
							edit_flg = NO;												// 編集終了
							break;														// 割引券ﾃﾞｰﾀ検索処理ﾙｰﾌﾟを抜ける
						}
					}
				}
				p_proc_data->Prn_no_data1 = data_no;									// 割引券ﾃﾞｰﾀ番号をｾｰﾌﾞ

				if( data_no >= WTIK_USEMAX || data_end == ON ){							// 割引券ﾃﾞｰﾀ検索終了？

					// 全ての割引券ﾃﾞｰﾀ検索を終了した場合
					p_proc_data->Prn_no_data1	= 0;									// 割引券ﾃﾞｰﾀ番号ﾘｾｯﾄ
					p_proc_data->Prn_no_data2	= 0;									// 次編集項目番号ﾘｾｯﾄ
					edit_flg					= NO;									// 編集終了
				}

				break;

			/*--------------------------------------------------------------*/
			/*	その他（印字項目ｴﾗｰ）										*/
			/*--------------------------------------------------------------*/
			default:
				p_proc_data->Prn_no_data1	= 0;
				p_proc_data->Prn_no_data2	= 0;
				edit_cnt					= 0;
				edit_flg					= NO;										// 編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
				break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
		}
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜割引券＞印字ﾃﾞｰﾀ編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_waribiki								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-09													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_waribiki( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	data_end = OFF;		// 割引券ﾃﾞｰﾀ検索終了ﾌﾗｸﾞ
	uchar	edit_cnt = 0;		// 編集行数
	uchar	data_no;			// 割引券ﾃﾞｰﾀ番号
	uchar	pksyu;				// 駐車場Ｎｏ．種別
	uchar	wari_syu;			// 割引種別
	ushort	mise_no;			// 店Ｎｏ．
	uchar	yakuwari;			// 設定ﾃﾞｰﾀ（役割）
	uchar	kirikae;			// 設定ﾃﾞｰﾀ（車種切替）
	wari_tiket	wari_dt;

	//	店Ｎo．は、割引券ﾃﾞｰﾀ（Ryousyuu->wari_data）に登録されている順番で印字される
	data_no = (uchar)p_proc_data->Prn_no_data1;					// 検索対象とする割引券ﾃﾞｰﾀ番号ｾｯﾄ

	for( ; data_no < WTIK_USEMAX ; data_no++ ){					// 割引券ﾃﾞｰﾀ検索

		disc_wari_conv( &Ryousyuu->DiscountData[data_no], &wari_dt );
		if( wari_dt.tik_syu == WARIBIKI ){						// 割引券ﾃﾞｰﾀ？

			// 割引券ﾃﾞｰﾀが割引券の場合

			/*------------------------------------------------------------------------------*/
			/*	割引券ﾃﾞｰﾀ（Ryousyuu->wari_data[]）内容										*/
			/*																				*/
			/*		tik_syu	：割引券種別		＝	割引券									*/
			/*		pkno_syu：駐車場Ｎｏ．種別	＝	基本 or 拡張１ or 拡張２ or 拡張３		*/
			/*		syubetu	：種別				＝	割引種別（１～１００）					*/
			/*		mise_no	：店Ｎｏ．			＝	店Ｎｏ．（１～９９９）					*/
			/*		maisuu	：枚数				＝	使用枚数								*/
			/*		ryokin	：割引料金			＝	割引金額合計							*/
			/*																				*/
			/*------------------------------------------------------------------------------*/

			pksyu	= wari_dt.pkno_syu;										//「 駐車場Ｎｏ．種別」ﾃﾞｰﾀ取得
			wari_syu = wari_dt.syubetu;										// 「割引種別」ﾃﾞｰﾀ取得
			yakuwari= (uchar)CPrmSS[S_WAR][ ( (wari_syu-1)*3 ) + 2];		// 「割引種別（種別＝wari_syu）の役割」	設定ﾃﾞｰﾀ取得
			kirikae	= (uchar)CPrmSS[S_WAR][ ( (wari_syu-1)*3 ) + 4];		// 「割引種別（種別＝wari_syu）の種別切替」設定ﾃﾞｰﾀ取得

			sprintf( prn_work,"%2d%s", wari_dt.maisuu, Pri_Tanni[PriT_MAI] );// 枚数ﾃﾞｰﾀ編集

			mise_no = wari_dt.mise_no;										// 「店Ｎｏ．」ﾃﾞｰﾀ取得

			sprintf( cMnydata,"%ld", wari_dt.ryokin );						// cMnydataに「割引額」印字ﾃﾞｰﾀ編集
			Camma_Set( (uchar *)cMnydata );									// 割引額３桁区切り（”、”挿入）
			if( wari_dt.ryokin ){
				StrAdd( (uchar *)cMnydata , (uchar*)"-");					// 割引額に"-"を付加
			}

			sprintf( cEditwk1,"%s%03d(割%03d)", WaribiTicket[pksyu], mise_no, wari_syu );	// cEditwk1に「割引券種別」印字ﾃﾞｰﾀ編集

			if( (yakuwari != 0) && (kirikae == 0) ){

				//	役割＝割引　且つ　車種切替＝なし　の場合

				Str_Set2(								// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,					// 文字列１：「割引券種別」印字ﾃﾞｰﾀ
							prn_work,					// 文字列２：枚数印字ﾃﾞｰﾀ
							cMnydata,					// 文字列３：割引額印字ﾃﾞｰﾀ
							Pri_Tanni[PriT_YEN],		// 文字列４："円"
							pri_kind					// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;								// 編集行数更新
			}
			else if( (yakuwari == 0) && (kirikae != 0) ){

				//	役割＝なし　且つ　車種切替＝あり　の場合

				Str_Set2(								// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,					// 文字列１：「割引券種別」印字ﾃﾞｰﾀ
							prn_work,					// 文字列２：枚数印字ﾃﾞｰﾀ
							SyubetuRyokin[kirikae],		// 文字列３：料金種別印字ﾃﾞｰﾀ
							"",							// 文字列４：なし
							pri_kind					// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;								// 編集行数更新
			}
			else if( (yakuwari != 0) && (kirikae != 0) ){

				//	役割＝割引　且つ　車種切替＝あり　の場合

				Str_Set2(								// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,					// 文字列１：「割引券種別」印字ﾃﾞｰﾀ
							prn_work,					// 文字列２：枚数印字ﾃﾞｰﾀ
							SyubetuRyokin[kirikae],		// 文字列３：料金種別印字ﾃﾞｰﾀ
							"",							// 文字列４：なし
							pri_kind					// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;								// 編集行数更新

				Str_Set2(								// -----印字ﾃﾞｰﾀ編集-----
							"",							// 文字列１：なし
							"",							// 文字列２：なし
							cMnydata,					// 文字列３：割引額印字ﾃﾞｰﾀ
							Pri_Tanni[PriT_YEN],		// 文字列４："円"
							pri_kind					// 印字先ﾌﾟﾘﾝﾀ
						);

				edit_cnt++;								// 編集行数更新

			}
			if( (edit_cnt+2) > EDIT_GYOU_MAX ){			// 編集行数ﾁｪｯｸ

				// 次ﾃﾞｰﾀ編集（最大２行）が不可の場合

				data_no++;								// 次処理で検索する割引券ﾃﾞｰﾀ番号をｾｯﾄ
				break;									// 割引券ﾃﾞｰﾀ検索処理ﾙｰﾌﾟを抜ける
			}
		}

	}	// 割引券ﾃﾞｰﾀ検索処理ﾙｰﾌﾟ終了

	p_proc_data->Prn_no_data1 = data_no;				// 割引券ﾃﾞｰﾀ番号をｾｰﾌﾞ

	if( data_no >= WTIK_USEMAX || data_end == ON ){		// 割引券ﾃﾞｰﾀ検索終了？

		// 全ての割引券ﾃﾞｰﾀ検索を終了した場合
		p_proc_data->Prn_no_data1	= 0;				// 割引券ﾃﾞｰﾀ番号ﾘｾｯﾄ
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ＞印字ﾃﾞｰﾀ編集処理									|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_pripay								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-10													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_pripay( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data, uchar pri_no )
{
	uchar	edit_flg = YES;		// 編集継続ﾌﾗｸﾞ
	uchar	data_end = OFF;		// PPCﾃﾞｰﾀ検索終了ﾌﾗｸﾞ
	uchar	edit_cnt = 0;		// 編集行数
	uchar	data_no;			// PPCﾃﾞｰﾀ番号
	DISCOUNT_DATA	*ppc_data_edit;
	ushort	i;
	ulong	ppc_id;
	wari_tiket	wari_dt;
	uchar	PPC_MAX;


	for( ; edit_flg ; ){	// ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟ

		switch( p_proc_data->Prn_no_data2 ){	// 印字項目？

			/*--------------------------------------------------------------*/
			/*	＜ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ＞印字ﾃﾞｰﾀ編集								*/
			/*--------------------------------------------------------------*/
			case	0:
				data_no = (uchar)p_proc_data->Prn_no_data1;			// 検索対象とするPPCﾃﾞｰﾀ番号ｾｯﾄ

				ppc_data_edit = &Ryousyuu->DiscountData[0];
				PPC_MAX	= WTIK_USEMAX;
				if ( data_no == 0 ){
					//最後の情報index.
					wPPC_YukoKigenData_no = 0;
					for ( i = 0; i < WTIK_USEMAX; i++ ){
						if( ppc_data_edit[i].DiscSyu == NTNET_PRI_W ){
							wPPC_YukoKigenData_no = (uchar)i;
						}
					}
				}

				for( ; data_no < PPC_MAX ; data_no++ ){	// PPCﾃﾞｰﾀ検索
					disc_wari_conv( &ppc_data_edit[data_no], &wari_dt );
					if( wari_dt.tik_syu == PREPAID ){	// PPCﾃﾞｰﾀあり？
						// ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞﾃﾞｰﾀがある場合
						sprintf( cEditwk1,"%s", PripayTicket[wari_dt.pkno_syu] );		// cEditwk1に「ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ印字ﾃﾞｰﾀ」編集
						ppc_id = (ulong)ppc_data_edit[data_no].DiscNo;
						ppc_id = (ppc_id << 16) | ppc_data_edit[data_no].DiscCount;
						sprintf( cEditwk2, "%sNo.%06ld", "",ppc_id );					// cEditwk2に「ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞＮｏ．印字ﾃﾞｰﾀ」編集

						Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
									cEditwk1,											// 文字列１：ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ印字ﾃﾞｰﾀ
									"",													// 文字列２：なし
									"",													// 文字列３：なし
									cEditwk2,											// 文字列４：ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞＮｏ．印字ﾃﾞｰﾀ
									pri_kind											// 印字先ﾌﾟﾘﾝﾀ
								);
						
						sprintf( cEditwk1,"%s%s", "　",Ryosyu_Content_Prn[7] );			// cEditwk1に「ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ印字ﾃﾞｰﾀ」編集
						
						// 支払い前残額　編集
						Prn_edit_Sitei1line	(											// ----- 印字ﾃﾞｰﾀ編集 -----
												cEditwk1,								// 印字項目	："　支払い前残額"
												ppc_data_edit[data_no].uDiscData.ppc_data.pay_befor,// 印字ﾃﾞｰﾀ	：支払い前残額
												"",										// 単位１	：NULL
												Pri_Tanni[PriT_YEN],					// 単位２	：円
												pri_kind								// 印字先ﾌﾟﾘﾝﾀ
											);

						// 支払い額　編集
						sprintf( cMnydata,"%ld", ppc_data_edit[data_no].Discount );		// 料金印字ﾃﾞｰﾀ編集
						Camma_Set( (uchar *)cMnydata );									// ３桁区切り（”、”挿入）
						if( ppc_data_edit[data_no].Discount && pri_no == 0){
							StrAdd( (uchar *)cMnydata , (uchar*)"-");					// 支払い額に"-"を付加
						}

						sprintf( cEditwk1,"%s%s", "　",Ryosyu_Content_Prn[8] );			// 印字編集	："　カード支払額"
						Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
									cEditwk1,											// 文字列１："*ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ"
									"",													// 文字列２：NULL
									cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
									Pri_Tanni[PriT_YEN],								// 文字列４：円
									pri_kind											// 印字先ﾌﾟﾘﾝﾀ
								);
						sprintf( cEditwk1,"  %s",Ryosyu_Content_Prn[9] );				// cEditwk1に「ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ印字ﾃﾞｰﾀ」編集

						// 支払い後残額　編集
						Prn_edit_Sitei1line	(											// ----- 印字ﾃﾞｰﾀ編集 -----
												cEditwk1,								// 印字項目	："　カード残額"
												ppc_data_edit[data_no].DiscInfo1,		// 印字ﾃﾞｰﾀ	：支払い後残額
												"",										// 単位１	：NULL
												Pri_Tanni[PriT_YEN],					// 単位２	：円
												pri_kind								// 印字先ﾌﾟﾘﾝﾀ
											);

						edit_cnt = (uchar)(edit_cnt+4);									// 編集行数更新


						if( (wPPC_YukoKigenData_no == data_no) &&				// プリカの最後の情報(?):Y
							(ppc_data_edit[data_no].uDiscData.ppc_data.kigen_year != 0) ){

							sprintf( cEditwk1,"  %s",							// ----- 印字ﾃﾞｰﾀ編集 -----
								Ryosyu_Content_Prn[10]);						// 印字項目 : "  有効期限"
							sprintf( cEditwk2,"%04d年%2d月%2d日",				// ----- 印字ﾃﾞｰﾀ編集 -----
								ppc_data_edit[data_no].uDiscData.ppc_data.kigen_year,				// nnnn年nn月nn日
								ppc_data_edit[data_no].uDiscData.ppc_data.kigen_mon,
								ppc_data_edit[data_no].uDiscData.ppc_data.kigen_day );
							Str_Set2(											// -----印字ﾃﾞｰﾀ編集-----
								cEditwk1,										// 文字列１：ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ印字ﾃﾞｰﾀ
								"",												// 文字列２：なし
								"",												// 文字列３：なし
								cEditwk2,										// 文字列４：ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞＮｏ．印字ﾃﾞｰﾀ
								pri_kind										// 印字先ﾌﾟﾘﾝﾀ
								);

							edit_cnt ++;										// 編集行数更新
						}
						if( (edit_cnt+5) > EDIT_GYOU_MAX ){						// 編集行数ﾁｪｯｸ

							// 次ﾃﾞｰﾀ編集（５行）が不可の場合	// 次は５かもしれない・・これは１度にﾌﾟﾘﾝﾀｰに出力できる行数ﾁｪｯｸ.
																// 4 < 5 : 多い分には支障なし.
							data_no++;											// 次処理で検索する割引券ﾃﾞｰﾀ番号をｾｯﾄ
							edit_flg = NO;										// 編集終了
							break;												// 割引券ﾃﾞｰﾀ検索処理ﾙｰﾌﾟを抜ける
						}

					}
					if( data_no >= PPC_MAX ){
						data_end = ON;													// PPCﾃﾞｰﾀ検索終了ﾌﾗｸﾞｾｯﾄ
						break;															// PPCﾃﾞｰﾀ検索処理ﾙｰﾌﾟを抜ける
					}
				}
				p_proc_data->Prn_no_data1 = data_no;									// PPCﾃﾞｰﾀ番号をｾｰﾌﾞ

				if( data_no >= PPC_MAX || data_end == ON ){								// 割引券ﾃﾞｰﾀ検索終了？
					if( pri_no == 1 ){													// 新印字ﾌｫｰﾏｯﾄ番号からの印字要求時は、ここでは中止データを印字しない
						p_proc_data->Prn_no_data1	= 0;								// PPCﾃﾞｰﾀ番号ﾘｾｯﾄ
						p_proc_data->Prn_no_data2	= 0;								// 次編集項目番号ﾘｾｯﾄ
						edit_flg					= NO;								// 編集終了						
					}else{

					// 全てのﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞﾃﾞｰﾀ検索を終了した場合
					p_proc_data->Prn_no_data1	= 0;									// PPCﾃﾞｰﾀ番号ﾘｾｯﾄ
					p_proc_data->Prn_no_data2	= 1;									// 次編集項目番号ｾｯﾄ
					}
				}

				break;

			/*--------------------------------------------------------------*/
			/*	＜精算中止ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ＞印字ﾃﾞｰﾀ編集						*/
			/*--------------------------------------------------------------*/
			case	1:

				if( Ryousyuu->ppc_chusi_ryo != 0 ){						// 精算中止PPCﾃﾞｰﾀあり？

					//	精算中止ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ料金がある場合

					sprintf( cMnydata,"%ld", Ryousyuu->ppc_chusi_ryo );	// 料金印字ﾃﾞｰﾀ編集
					Camma_Set( (uchar *)cMnydata );						// ３桁区切り（”、”挿入）
					StrAdd( (uchar *)cMnydata , (uchar*)"-");			// 割引額に"-"を付加

					Str_Set2(											// -----印字ﾃﾞｰﾀ編集-----
								"*ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ",						// 文字列１："*ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ"
								"",										// 文字列２：NULL
								cMnydata,								// 文字列３：料金印字ﾃﾞｰﾀ
								Pri_Tanni[PriT_YEN],					// 文字列４：円
								pri_kind								// 印字先ﾌﾟﾘﾝﾀ
							);


					edit_cnt++;											// 編集行数更新
				}

				// ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞﾃﾞｰﾀ印字終了
				p_proc_data->Prn_no_data1	= 0;						// PPCﾃﾞｰﾀ番号ﾘｾｯﾄ
				p_proc_data->Prn_no_data2	= 0;						// 次編集項目番号ﾘｾｯﾄ
				edit_flg					= NO;						// 編集終了

				break;

			/*--------------------------------------------------------------*/
			/*	その他（印字項目ｴﾗｰ）										*/
			/*--------------------------------------------------------------*/
			default:
				p_proc_data->Prn_no_data1	= 0;
				p_proc_data->Prn_no_data2	= 0;
				edit_cnt					= 0;
				edit_flg					= NO;						// 編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
				break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
		}
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜回数券＞印字ﾃﾞｰﾀ編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_kaisuu								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-09													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_kaisuu( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data, uchar pri_no )
{
	uchar	edit_flg = YES;		// 編集継続ﾌﾗｸﾞ
	uchar	data_end = OFF;		// 割引券ﾃﾞｰﾀ検索終了ﾌﾗｸﾞ
	uchar	edit_cnt = 0;		// 編集行数
	uchar	data_no;			// 割引券ﾃﾞｰﾀ番号
	uchar	pksyu;				// 駐車場Ｎｏ．種別
	wari_tiket	wari_dt;

	for( ; edit_flg ; ){	// 店割引印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟ

		switch( p_proc_data->Prn_no_data2 ){	// 印字項目？

			/*--------------------------------------------------------------*/
			/*	＜回数券＞印字ﾃﾞｰﾀ編集										*/
			/*--------------------------------------------------------------*/
			case	0:
				data_no = (uchar)p_proc_data->Prn_no_data1;					// 検索対象とする割引券ﾃﾞｰﾀ番号ｾｯﾄ

				for( ; data_no < WTIK_USEMAX ; data_no++ ){					// 割引券ﾃﾞｰﾀ検索

					disc_wari_conv( &Ryousyuu->DiscountData[data_no], &wari_dt );
					if( wari_dt.tik_syu == KAISUU ){						// 回数券ﾃﾞｰﾀ？

						// 割引券ﾃﾞｰﾀが回数券の場合

						/*------------------------------------------------------------------------------*/
						/*	割引券ﾃﾞｰﾀ（Ryousyuu->wari_data[]）内容										*/
						/*																				*/
						/*		tik_syu	：割引券種別		＝	回数券									*/
						/*		pkno_syu：駐車場Ｎｏ．種別	＝	基本 or 拡張１ or 拡張２ or 拡張３		*/
						/*		syubetu	：種別				＝	無関係									*/
						/*		mise_no	：店Ｎｏ．			＝	無関係									*/
						/*		maisuu	：枚数				＝	使用枚数								*/
						/*		ryokin	：割引料金			＝	割引金額合計							*/
						/*																				*/
						/*------------------------------------------------------------------------------*/

						pksyu	= wari_dt.pkno_syu;										//「 駐車場Ｎｏ．種別」ﾃﾞｰﾀ取得

						sprintf( prn_work,"%2d%s", wari_dt.maisuu, Pri_Tanni[PriT_MAI] );// 枚数ﾃﾞｰﾀ編集

						sprintf( cMnydata,"%ld", wari_dt.ryokin );						// 割引額編集
						Camma_Set( (uchar *)cMnydata );									// 割引額３桁区切り（”、”挿入）
						if( wari_dt.ryokin && &pri_no == 0 ){
							StrAdd( (uchar *)cMnydata , (uchar*)"-");					// 割引額に"-"を付加
						}

						sprintf( cEditwk1,"%s", KaisuuTicket[pksyu] );					// cEditwk1に「回数券印字ﾃﾞｰﾀ」編集

						Str_Set2(								// -----印字ﾃﾞｰﾀ編集-----
									cEditwk1,					// 文字列１：回数券印字ﾃﾞｰﾀ
									prn_work,					// 文字列２：枚数印字ﾃﾞｰﾀ
									cMnydata,					// 文字列３：割引額印字ﾃﾞｰﾀ
									Pri_Tanni[PriT_YEN],		// 文字列４："円"
									pri_kind					// 印字先ﾌﾟﾘﾝﾀ
								);

						edit_cnt++;								// 編集行数更新

						if( (edit_cnt+1) > EDIT_GYOU_MAX ){		// 編集行数ﾁｪｯｸ

							// 次ﾃﾞｰﾀ編集（最大１行）が不可の場合

							data_no++;							// 次処理で検索する割引券ﾃﾞｰﾀ番号をｾｯﾄ
							edit_flg = NO;						// 編集終了
							break;								// 割引券ﾃﾞｰﾀ検索処理ﾙｰﾌﾟを抜ける
						}
					}
				}
				p_proc_data->Prn_no_data1 = data_no;			// 割引券ﾃﾞｰﾀ番号をｾｰﾌﾞ

				if( data_no >= WTIK_USEMAX || data_end == ON ){	// 割引券ﾃﾞｰﾀ検索終了？

					if( pri_no == 1 ){							// 新印字ﾌｫｰﾏｯﾄ番号からの印字要求時は、ここでは中止データを印字しない
						p_proc_data->Prn_no_data1	= 0;		// 割引券ﾃﾞｰﾀ番号ﾘｾｯﾄ
						p_proc_data->Prn_no_data2	= 0;		// 次編集項目番号ﾘｾｯﾄ
						edit_flg					= NO;		// 編集終了						
					}else{
					// 全ての割引券ﾃﾞｰﾀ検索を終了した場合
					data_end					= OFF;			// 割引券ﾃﾞｰﾀ検索終了ﾌﾗｸﾞﾘｾｯﾄ
					p_proc_data->Prn_no_data1	= 0;			// 割引券ﾃﾞｰﾀ番号ﾘｾｯﾄ
					p_proc_data->Prn_no_data2	= 1;			// 次編集項目番号ｾｯﾄ
					}
				}

				break;

			/*--------------------------------------------------------------*/
			/*	＜精算中止回数券＞印字ﾃﾞｰﾀ編集								*/
			/*--------------------------------------------------------------*/
			case	1:

				data_no = (uchar)p_proc_data->Prn_no_data1;					// 検索対象とする割引券ﾃﾞｰﾀ番号ｾｯﾄ

				for( ; data_no < WTIK_USEMAX ; data_no++ ){					// 割引券ﾃﾞｰﾀ検索

					disc_wari_conv( &Ryousyuu->DiscountData[data_no], &wari_dt );
					if( wari_dt.tik_syu == C_KAISUU ){						// 精算中止回数券ﾃﾞｰﾀ？

						// 割引券ﾃﾞｰﾀが精算中止回数券の場合

						/*------------------------------------------------------------------------------*/
						/*	割引券ﾃﾞｰﾀ（Ryousyuu->wari_data[]）内容										*/
						/*																				*/
						/*		tik_syu	：割引券種別		＝	精算中止回数券							*/
						/*		pkno_syu：駐車場Ｎｏ．種別	＝	基本 or 拡張１ or 拡張２ or 拡張３		*/
						/*		syubetu	：種別				＝	無関係									*/
						/*		mise_no	：店Ｎｏ．			＝	無関係									*/
						/*		maisuu	：枚数				＝	使用枚数								*/
						/*		ryokin	：割引料金			＝	割引金額合計							*/
						/*																				*/
						/*------------------------------------------------------------------------------*/

						pksyu	= wari_dt.pkno_syu;										//「 駐車場Ｎｏ．種別」ﾃﾞｰﾀ取得

						sprintf( cMnydata,"%ld", wari_dt.ryokin );						// 割引額編集
						Camma_Set( (uchar *)cMnydata );									// 割引額３桁区切り（”、”挿入）
						if( wari_dt.ryokin ){
							StrAdd( (uchar *)cMnydata , (uchar*)"-");					// 割引額に"-"を付加
						}

						sprintf( cEditwk1,"%s", KaisuuTicket_chusi[pksyu] );			// cEditwk1に「回数券印字ﾃﾞｰﾀ」編集

						Str_Set2(								// -----印字ﾃﾞｰﾀ編集-----
									cEditwk1,					// 文字列１：回数券印字ﾃﾞｰﾀ
									"",							// 文字列２：NULL
									cMnydata,					// 文字列３：割引額印字ﾃﾞｰﾀ
									Pri_Tanni[PriT_YEN],		// 文字列４："円"
									pri_kind					// 印字先ﾌﾟﾘﾝﾀ
								);

						edit_cnt++;								// 編集行数更新

						if( (edit_cnt+1) > EDIT_GYOU_MAX ){		// 編集行数ﾁｪｯｸ

							// 次ﾃﾞｰﾀ編集（最大１行）が不可の場合

							data_no++;							// 次処理で検索する割引券ﾃﾞｰﾀ番号をｾｯﾄ
							edit_flg = NO;						// 編集終了
							break;								// 割引券ﾃﾞｰﾀ検索処理ﾙｰﾌﾟを抜ける
						}
					}
				}
				p_proc_data->Prn_no_data1 = data_no;			// 割引券ﾃﾞｰﾀ番号をｾｰﾌﾞ

				if( data_no >= WTIK_USEMAX || data_end == ON ){	// 割引券ﾃﾞｰﾀ検索終了？

					// 全ての割引券ﾃﾞｰﾀ検索を終了した場合
					p_proc_data->Prn_no_data1	= 0;			// 割引券ﾃﾞｰﾀ番号ﾘｾｯﾄ
					p_proc_data->Prn_no_data2	= 0;			// 次編集項目番号ﾘｾｯﾄ
					edit_flg					= NO;			// 編集終了
				}

				break;

			/*--------------------------------------------------------------*/
			/*	その他（印字項目ｴﾗｰ）										*/
			/*--------------------------------------------------------------*/
			default:
				p_proc_data->Prn_no_data1	= 0;
				p_proc_data->Prn_no_data2	= 0;
				edit_cnt					= 0;
				edit_flg					= NO;				// 編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
				break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
		}
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜前回時間割引＞編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_btwari								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-19													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_btwari( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	uchar	i;
	uchar	svs_syu;			// ｻｰﾋﾞｽ券種別
	uchar	yakuwari;			// 設定ﾃﾞｰﾀ（役割）
	uchar	kirikae;			// 設定ﾃﾞｰﾀ（車種切替）
	uchar	pksyu;				// 駐車場Ｎｏ．種別
// MH810104(S) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(前回時間割引編集処理の変更)
// 	uchar	mise_no;			// 店Ｎｏ．
	ushort	mise_no;			// 店Ｎｏ．
	uchar	wari_syu;			// 割引種別
// MH810104(E) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(前回時間割引編集処理の変更)

	if(Flap_Sub_Flg == 1){
		for(i = 0 ; i < WAR_CRD_MAX ; i++){		//15種
			if(PayData_Sub.wari_data[i].tik_syu == 1){
				if(PayData_Sub.wari_data[i].maisuu != 0){
					svs_syu = PayData_Sub.wari_data[i].syubetu;					// 「ｻｰﾋﾞｽ券種別」ﾃﾞｰﾀ取得
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//					yakuwari= (uchar)CPrmSS[S_SER][ ( (svs_syu-1)*3 ) + 1];			// 「ｻｰﾋﾞｽ券（種別＝svs_syu）の役割」		設定ﾃﾞｰﾀ取得
//					kirikae = (uchar)CPrmSS[S_SER][ ( (svs_syu-1)*3 ) + 3];			// 「ｻｰﾋﾞｽ券（種別＝svs_syu）の種別切替」設定ﾃﾞｰﾀ取得
					yakuwari= (uchar)prm_get( COM_PRM, S_SER, (short)(( (svs_syu-1)*3 ) + 1), 1, 1 );			// 「ｻｰﾋﾞｽ券（種別＝svs_syu）の役割」		設定ﾃﾞｰﾀ取得
					kirikae = (uchar)prm_get( COM_PRM, S_SER, (short)(( (svs_syu-1)*3 ) + 3), 2, 1 );			// 「ｻｰﾋﾞｽ券（種別＝svs_syu）の種別切替」設定ﾃﾞｰﾀ取得
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）

					sprintf( prn_work,"%2d%s", PayData_Sub.wari_data[i].maisuu, Pri_Tanni[PriT_MAI] );	// 枚数ﾃﾞｰﾀ編集
					sprintf( cEditwk1,"*%s", ServiceTicket[0][svs_syu-1] );		// cEditwk1に「ｻｰﾋﾞｽ券種別印字ﾃﾞｰﾀ」編集
					sprintf( cMnydata,"%ld", PayData_Sub.wari_data[i].ryokin );	// 料金印字ﾃﾞｰﾀ編集
					Camma_Set( (uchar *)cMnydata );						// ３桁区切り（”、”挿入）
					if( PayData_Sub.wari_data[i].ryokin ){
						StrAdd( (uchar *)cMnydata , (uchar*)"-");					// 割引額に"-"を付加
					}

					if( (yakuwari != 0) && (kirikae == 0) ){

						//	役割＝割引　且つ　車種切替＝なし　の場合

						Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
									cEditwk1,										// 文字列１：ｻｰﾋﾞｽ券種別印字ﾃﾞｰﾀ
									prn_work,										// 文字列２：枚数印字ﾃﾞｰﾀ
									cMnydata,										// 文字列３：割引額印字ﾃﾞｰﾀ
									Pri_Tanni[PriT_YEN],							// 文字列４："円"
									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
								);
						edit_cnt++;													// 編集行数更新
					}
					else if( (yakuwari == 0) && (kirikae != 0) ){

						//	役割＝なし　且つ　車種切替＝あり　の場合

						Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
									cEditwk1,										// 文字列１：ｻｰﾋﾞｽ券種別印字ﾃﾞｰﾀ
									prn_work,										// 文字列２：枚数印字ﾃﾞｰﾀ
									SyubetuRyokin[kirikae],							// 文字列３：料金種別印字ﾃﾞｰﾀ
									"",												// 文字列４：なし
									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
								);
						edit_cnt++;													// 編集行数更新
					}
					else if( (yakuwari != 0) && (kirikae != 0) ){

						//	役割＝割引　且つ　車種切替＝あり　の場合

						Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
									cEditwk1,										// 文字列１：ｻｰﾋﾞｽ券種別印字ﾃﾞｰﾀ
									prn_work,										// 文字列２：枚数印字ﾃﾞｰﾀ
									SyubetuRyokin[kirikae],							// 文字列３：料金種別印字ﾃﾞｰﾀ
									"",												// 文字列４：なし
									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
								);
						edit_cnt++;													// 編集行数更新

						Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
									"",												// 文字列１：なし
									"",												// 文字列２：なし
									cMnydata,										// 文字列３：割引額印字ﾃﾞｰﾀ
									Pri_Tanni[PriT_YEN],							// 文字列４："円"
									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
								);
						edit_cnt++;													// 編集行数更新
					}
				}
			}
		}
		/*掛売券*/
		for(i = 0 ; i < WAR_CRD_MAX ; i++){		//15種
			if(PayData_Sub.wari_data[i].tik_syu == 2){
				if(PayData_Sub.wari_data[i].maisuu != 0){
					pksyu	= PayData_Sub.wari_data[i].pkno_syu;				//「 駐車場Ｎｏ．種別」ﾃﾞｰﾀ取得
					mise_no = PayData_Sub.wari_data[i].syubetu;					// 「店Ｎｏ．」ﾃﾞｰﾀ取得
// MH810104(S) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(前回時間割引編集処理の変更)
// 					yakuwari= (uchar)CPrmSS[S_STO][ ( (mise_no-1)*3 ) + 1];			// 「店割引（店Ｎｏ．＝svs_syu）の役割」	設定ﾃﾞｰﾀ取得
// 					kirikae	= (uchar)CPrmSS[S_STO][ ( (mise_no-1)*3 ) + 3];			// 「店割引（店Ｎｏ．＝svs_syu）の種別切替」設定ﾃﾞｰﾀ取得
					wari_syu = (uchar)PayData_Sub.wari_data[i].mise_no;							// 「割引種別」ﾃﾞｰﾀ取得
					if ( wari_syu ) {
						yakuwari = (uchar)prm_get(COM_PRM, S_TAT, (wari_syu * 2), 1, 1);		// 「役割」設定ﾃﾞｰﾀ取得
					} else {
						yakuwari = (uchar)prm_get(COM_PRM, S_STO, ((mise_no * 3) - 2), 1, 1);	// 「役割」設定ﾃﾞｰﾀ取得
					}
					if ( mise_no > STORE_NUMMAX ) {
						kirikae  = (uchar)prm_get(COM_PRM, S_TAT, (mise_no - 69), 2, 1);		// 「種別切換」設定ﾃﾞｰﾀ取得
					} else {
						kirikae  = (uchar)prm_get(COM_PRM, S_STO, (mise_no * 3), 2, 1);			// 「種別切換」設定ﾃﾞｰﾀ取得
					}
// MH810104(E) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(前回時間割引編集処理の変更)

					sprintf( prn_work,"%2d%s", PayData_Sub.wari_data[i].maisuu, Pri_Tanni[PriT_MAI] );	// 枚数ﾃﾞｰﾀ編集

					sprintf( cMnydata,"%ld", PayData_Sub.wari_data[i].ryokin );	// 割引額編集
					Camma_Set( (uchar *)cMnydata );									// 割引額３桁区切り（”、”挿入）
					if( PayData_Sub.wari_data[i].ryokin ){
						StrAdd( (uchar *)cMnydata , (uchar*)"-");					// 割引額に"-"を付加
					}

// MH810104(S) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(前回時間割引編集処理の変更)
// 					sprintf( cEditwk1,"*%s%03d", KakeuriTicket[pksyu], mise_no );	// cEditwk1に「店Ｎｏ．印字ﾃﾞｰﾀ」編集
					if ( wari_syu ) {
						sprintf(cEditwk1, "%s%03d(割%02d)", KakeuriTicket[pksyu], mise_no, wari_syu);	// 「店Ｎｏ．印字ﾃﾞｰﾀ」編集
					} else {
						sprintf(cEditwk1, "%s%03d", KakeuriTicket[pksyu], mise_no);						// 「店Ｎｏ．印字ﾃﾞｰﾀ」編集
					}
// MH810104(E) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(前回時間割引編集処理の変更)

					if( (yakuwari != 0) && (kirikae == 0) ){

						//	役割＝割引　且つ　車種切替＝なし　の場合

						Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
									cEditwk1,										// 文字列１：店Ｎｏ．印字ﾃﾞｰﾀ
									prn_work,										// 文字列２：枚数印字ﾃﾞｰﾀ
									cMnydata,										// 文字列３：割引額印字ﾃﾞｰﾀ
									Pri_Tanni[PriT_YEN],							// 文字列４："円"
									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
								);
						edit_cnt++;		// 編集行数更新
					}
					else if( (yakuwari == 0) && (kirikae != 0) ){

						//	役割＝なし　且つ　車種切替＝あり　の場合

						Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
									cEditwk1,										// 文字列１：店Ｎｏ．印字ﾃﾞｰﾀ
									prn_work,										// 文字列２：枚数印字ﾃﾞｰﾀ
									SyubetuRyokin[kirikae],							// 文字列３：料金種別印字ﾃﾞｰﾀ
									"",												// 文字列４：なし
									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
								);
						edit_cnt++;													// 編集行数更新
					}
					else if( (yakuwari != 0) && (kirikae != 0) ){

						//	役割＝割引　且つ　車種切替＝あり　の場合

						Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
									cEditwk1,										// 文字列１：店Ｎｏ．印字ﾃﾞｰﾀ
									prn_work,										// 文字列２：枚数印字ﾃﾞｰﾀ
									SyubetuRyokin[kirikae],							// 文字列３：料金種別印字ﾃﾞｰﾀ
									"",												// 文字列４：なし
									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
								);
						edit_cnt++;													// 編集行数更新

						Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
									"",												// 文字列１：なし
									"",												// 文字列２：なし
									cMnydata,										// 文字列３：割引額印字ﾃﾞｰﾀ
									Pri_Tanni[PriT_YEN],							// 文字列４："円"
									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
								);
						edit_cnt++;													// 編集行数更新
					}
				}
			}
		}
		/*プリペイド印字*/
		if((PayData_Sub.pay_ryo != 0) || (Pay_Flg)){
			sprintf( cMnydata,"%ld", PayData_Sub.pay_ryo );	// 料金印字ﾃﾞｰﾀ編集
			Camma_Set( (uchar *)cMnydata );						// ３桁区切り（”、”挿入）
			if(PayData_Sub.pay_ryo != 0){
				StrAdd( (uchar *)cMnydata , (uchar*)"-");			// 割引額に"-"を付加
			}
			if( CPrmSS[S_PRP][1] != 2 ){
				sprintf( cEditwk1,"*%s", "ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ" );
			}else{
				sprintf( cEditwk1,"*%s", "回数券" );
			}

			Str_Set2(											// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,						// 文字列１："*ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ"
						"",										// 文字列２：NULL
						cMnydata,								// 文字列３：料金印字ﾃﾞｰﾀ
						Pri_Tanni[PriT_YEN],					// 文字列４：円
						pri_kind								// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;											// 編集行数更新
		}

	}else{

/*Bエリアを使用した場合
印字したフラグを使用して前回料金とダブらないようにする
*/

	if( (Ryousyuu->BeforeTwari != 0) || (Ryousyuu->PRTwari.BIT.TWARI)){						// 前回時間割引料金あり？

		//	前回時間割引料金がある場合

		sprintf( cMnydata,"%ld", Ryousyuu->BeforeTwari );	// 料金印字ﾃﾞｰﾀ編集
		Camma_Set( (uchar *)cMnydata );						// ３桁区切り（”、”挿入）
		if( Ryousyuu->BeforeTwari != 0 ){						// 前回時間割引料金あり？
			StrAdd( (uchar *)cMnydata , (uchar*)"-");			// 割引額に"-"を付加
		}

		Str_Set2(											// -----印字ﾃﾞｰﾀ編集-----
					"*前回時間割引額",						// 文字列１："*前回時間割引額"
					"",										// 文字列２：NULL
					cMnydata,								// 文字列３：料金印字ﾃﾞｰﾀ
					Pri_Tanni[PriT_YEN],					// 文字列４：円
					pri_kind								// 印字先ﾌﾟﾘﾝﾀ
				);


		edit_cnt++;											// 編集行数更新
	}
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜前回料金割引＞編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_brwari								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-19													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_brwari( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

// MH810100(S) K.Onodera  2020/01/29 車番チケットレス(再精算_領収証印字)
//	if(Flap_Sub_Flg != 1){
//	if( (Ryousyuu->BeforeRwari != 0) || (Ryousyuu->PRTwari.BIT.RWARI) ){						// 前回料金割引料金あり？
	if( (Ryousyuu->BeforeRwari != 0) || (Ryousyuu->PRTwari.BIT.RWARI) || (Ryousyuu->zenkai != 0) ){	// 前回料金割引料金/前回領収額あり？
// MH810100(E) K.Onodera  2020/01/29 車番チケットレス(再精算_領収証印字)

		//	前回料金割引料金がある場合

		if(Ryousyuu->BeforeRwari < Ryousyuu->ppc_chusi){
			sprintf( cMnydata,"%ld", Ryousyuu->ppc_chusi );	// 料金印字ﾃﾞｰﾀ編集
// MH810100(S) K.Onodera  2020/01/29 車番チケットレス(再精算_領収証印字)
		}else if( Ryousyuu->zenkai != 0 ){					// 前回領収額あり？
			sprintf( cMnydata,"%ld", Ryousyuu->zenkai );	// 料金印字ﾃﾞｰﾀ編集
// MH810100(E) K.Onodera  2020/01/29 車番チケットレス(再精算_領収証印字)
		}else{
			sprintf( cMnydata,"%ld", Ryousyuu->BeforeRwari );	// 料金印字ﾃﾞｰﾀ編集
		}
		Camma_Set( (uchar *)cMnydata );						// ３桁区切り（”、”挿入）
// MH810100(S) K.Onodera  2020/01/29 車番チケットレス(再精算_領収証印字)
//		if( Ryousyuu->BeforeRwari != 0 ){						// 前回料金割引料金あり？
		if(( Ryousyuu->BeforeRwari != 0 ) ||					// 前回料金割引料金あり？
		   ( Ryousyuu->zenkai != 0 )){							// 前回領収額あり？
// MH810100(E) K.Onodera  2020/01/29 車番チケットレス(再精算_領収証印字)
			StrAdd( (uchar *)cMnydata , (uchar*)"-");			// 割引額に"-"を付加
		}

		memset( cEditwk1, 0, sizeof( cEditwk1 ));			// 編集領域の初期化
// MH810100(S) K.Onodera  2020/01/29 車番チケットレス(再精算_領収証印字)
//		sprintf( cEditwk1,"%s", Ryosyu_Content[9].print_data[12]);	// 項目名の編集
		if( Ryousyuu->zenkai != 0 ){
			sprintf( cEditwk1,"%s", Ryosyu_Content[9].print_data[29]);	// 項目名の編集(*前回領収額)
		}else{
			sprintf( cEditwk1,"%s", Ryosyu_Content[9].print_data[12]);	// 項目名の編集
		}
// MH810100(E) K.Onodera  2020/01/29 車番チケットレス(再精算_領収証印字)
		Str_Set2(											// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,								// 文字列１："*前回支払額"or"*前回料金割引額"
					"",										// 文字列２：NULL
					cMnydata,								// 文字列３：料金印字ﾃﾞｰﾀ
					Pri_Tanni[PriT_YEN],					// 文字列４：円
					pri_kind								// 印字先ﾌﾟﾘﾝﾀ
				);


		edit_cnt++;											// 編集行数更新
	}
// MH810100(S) K.Onodera  2020/01/29 車番チケットレス(再精算_領収証印字)
//	}
// MH810100(E) K.Onodera  2020/01/29 車番チケットレス(再精算_領収証印字)
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜前回％割引＞編集処理												|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_bpwari								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-19													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_bpwari( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	if( Ryousyuu->BeforePwari != 0 ){						// 前回％割引料金あり？

		//	前回％割引料金がある場合

		sprintf( cMnydata,"%ld", Ryousyuu->BeforePwari );	// 料金印字ﾃﾞｰﾀ編集
		Camma_Set( (uchar *)cMnydata );						// ３桁区切り（”、”挿入）
		StrAdd( (uchar *)cMnydata , (uchar*)"-");			// 割引額に"-"を付加

		Str_Set2(											// -----印字ﾃﾞｰﾀ編集-----
					"*前回％割引額",						// 文字列１："*前回％割引額"
					"",										// 文字列２：NULL
					cMnydata,								// 文字列３：料金印字ﾃﾞｰﾀ
					Pri_Tanni[PriT_YEN],					// 文字列４：円
					pri_kind								// 印字先ﾌﾟﾘﾝﾀ
				);


		edit_cnt++;											// 編集行数更新
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜消費税＞編集処理													|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_tax									|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-19													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_tax( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	uchar	set1;				// 税方式（設定ﾃﾞｰﾀ）
	uchar	set2;				// 税率印字有無（設定ﾃﾞｰﾀ）
	ushort	tax1;				// 税率（設定ﾃﾞｰﾀ）
	double	tax2;				// 税率（％）


	set1 = (uchar)prm_get( COM_PRM, S_CAL, 20, 1, 1 );			// 「税方式」	設定ﾃﾞｰﾀ取得

	if( ( Ryousyuu->Wtax != 0 ) && ( set1 == 0 || set1 == 2 ) ){

		//	消費税(金額)≠０　且つ　消費税を印字する場合

		set2 = (uchar)prm_get( COM_PRM, S_CAL, 20, 1, 2 );		// 「税率印字有無」	設定ﾃﾞｰﾀ取得

		//	税率印字ﾃﾞｰﾀを編集する
		memset( cEditwk1,0,sizeof(cEditwk1) );
		if( set2 == 0 ){										// 税率印字あり？
			tax1 = (ushort)prm_get( COM_PRM, S_CAL, 19, 4, 1 );	// 「税率」	設定ﾃﾞｰﾀ取得
			tax2 = (double)tax1/100;							// ％変換
			sprintf( cEditwk1,"%.2f％", tax2 );					// 税率印字ﾃﾞｰﾀ編集
		}

		//	消費税印字ﾃﾞｰﾀを編集する
		sprintf( cMnydata,"%ld", Ryousyuu->Wtax );				// 料金印字ﾃﾞｰﾀ編集
		Camma_Set( (uchar *)cMnydata );							// ３桁区切り（”、”挿入）

		switch( set1 ){											// 「税方式」？

			case	0:	// 内税方式、税プリントする

				Str_Set2(										// -----印字ﾃﾞｰﾀ編集-----
							"消費税(内税)",						// 文字列１："消費税(内税)"
							cEditwk1,							// 文字列２：税率
							cMnydata,							// 文字列３：料金印字ﾃﾞｰﾀ
							Pri_Tanni[PriT_YEN],				// 文字列４：円
							pri_kind							// 印字先ﾌﾟﾘﾝﾀ
						);

				edit_cnt++;										// 編集行数更新

				break;

			case	2:	// 外税方式、税プリントする

				Str_Set2(										// -----印字ﾃﾞｰﾀ編集-----
							"消費税(外税)",						// 文字列１："消費税(外税)"
							cEditwk1,							// 文字列２：税率
							cMnydata,							// 文字列３：料金印字ﾃﾞｰﾀ
							Pri_Tanni[PriT_YEN],				// 文字列４：円
							pri_kind							// 印字先ﾌﾟﾘﾝﾀ
						);

				edit_cnt++;										// 編集行数更新

				break;
		}
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜クレジットカード支払額＞印字ﾃﾞｰﾀ編集処理							|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_ccpay									|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-20													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_ccpay( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

// MH810103 GG119202(S) ICクレジットみなし決済印字フォーマット変更対応
//// MH321800(S) Y.Tanizaki ICクレジット対応
//	// みなし決済かブランド不一致は印字しない
//	if( Ryousyuu->Electron_data.Ec.e_pay_kind == EC_CREDIT_USED &&
//		(Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||
//		 Ryousyuu->Electron_data.Ec.E_Status.BIT.brand_mismatch == 1) ) {
//		return( edit_cnt );
//	}
//// MH321800(E) Y.Tanizaki ICクレジット対応

	// ブランド不一致は印字しない
	if( Ryousyuu->Electron_data.Ec.e_pay_kind == EC_CREDIT_USED &&
		Ryousyuu->Electron_data.Ec.E_Status.BIT.brand_mismatch == 1) {
		return( edit_cnt );
	}
// MH810103 GG119202(E) ICクレジットみなし決済印字フォーマット変更対応

	if( Ryousyuu->credit.pay_ryo != 0 ){

		//	ｸﾚｼﾞｯﾄｶｰﾄﾞ支払料金が０でない場合

// MH810103 GG119202(S) 決済精算中止時は決済額をマスクする
//		Prn_edit_Sitei1line	(								// ----- 印字ﾃﾞｰﾀ編集 -----
//								"  利用額",					// 印字項目	："  利用額"
//								Ryousyuu->credit.pay_ryo,	// 印字ﾃﾞｰﾀ	：ｸﾚｼﾞｯﾄｶｰﾄﾞ支払料金
//								"",							// 単位１	：NULL
//								Pri_Tanni[PriT_YEN],		// 単位２	：円
//								pri_kind					// 印字先ﾌﾟﾘﾝﾀ
//							);
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if (Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement != 0 &&
//			Ryousyuu->WFlag != 0) {
		if (Ryousyuu->chuusi == 1) {
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			// 決済精算中止時は利用額をマスクする
			sprintf(cMnydata, "******");						// 料金印字ﾃﾞｰﾀ編集
		}
		else {
			sprintf(cMnydata, "%ld", Ryousyuu->credit.pay_ryo);	// 料金印字ﾃﾞｰﾀ編集
		}
		Camma_Set((uchar*)cMnydata);							// ３桁区切り（”、”挿入）
		Str_Set2(												// -----印字ﾃﾞｰﾀ編集-----
					"  利用額",									// 文字列１："利用額"
					"",											// 文字列２：NULL
					cMnydata,									// 文字列３：料金印字ﾃﾞｰﾀ
					Pri_Tanni[PriT_YEN],						// 文字列４：円
					pri_kind									// 印字先ﾌﾟﾘﾝﾀ
				);
// MH810103 GG119202(E) 決済精算中止時は決済額をマスクする

		edit_cnt++;											// 編集行数更新
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜Suica＞印字ﾃﾞｰﾀ編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_suica									|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	T.Namioka													|*/
/*|	Date	:	2007-02-26													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_suica( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data, uchar pri_no )
{
	uchar	edit_flg = YES;		// 編集継続ﾌﾗｸﾞ
	uchar	data_end = OFF;		// 電子ﾏﾈｰ決算結果ﾃﾞｰﾀ検索終了ﾌﾗｸﾞ
	uchar	edit_cnt = 0;		// 編集行数
	char	data_id[19];		// 電子ﾏﾈｰ決算結果Idﾜｰｸ領域
	uchar	work;				// ﾜｰｸ領域
	uchar	i,k;				

	for( ; edit_flg ; ){	// 電子ﾏﾈｰ決算結果印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟ

		switch( p_proc_data->Prn_no_data2 ){	// 印字項目？

			/*--------------------------------------------------------------*/
			/*	＜電子ﾏﾈｰ決算結果＞印字ﾃﾞｰﾀ編集								*/
			/*--------------------------------------------------------------*/
			case	0:

				if( Ryousyuu->Electron_data.Suica.pay_ryo ){				// 電子ﾏﾈｰ決済ﾃﾞｰﾀあり？

					if( pri_no == 1 ){										// 新領収証印字要求？
// MH321800(S) hosoda ICクレジット対応
//						Electron_Ryosyu_Edit( Ryousyuu, pri_kind );			// データ印字編集処理
						if (EcUseKindCheck(Ryousyuu->Electron_data.Ec.e_pay_kind)) {
						// 決済リーダ
// MH810103 GG119202(S) 電子マネーみなし決済印字フォーマット変更対応
//							if(Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 0 &&
//							   Ryousyuu->Electron_data.Ec.E_Status.BIT.brand_mismatch == 0) {
//								edit_cnt = ElectronEc_Ryosyu_Edit(Ryousyuu, pri_kind, p_proc_data);	// データ印字編集処理
//							} // みなし決済かブランド不一致は印字しない
							if(Ryousyuu->Electron_data.Ec.E_Status.BIT.brand_mismatch == 0) {
								// ブランド不一致は印字しない
								edit_cnt = ElectronEc_Ryosyu_Edit(Ryousyuu, pri_kind, p_proc_data);	// データ印字編集処理
							}
// MH810103 GG119202(E) 電子マネーみなし決済印字フォーマット変更対応
						} else {
						// Suica
							Electron_Ryosyu_Edit( Ryousyuu, pri_kind );		// データ印字編集処理
						}
// MH321800(E) hosoda ICクレジット対応
						p_proc_data->Prn_no_data1	= 0;					// Suicaﾃﾞｰﾀ番号ﾘｾｯﾄ
						p_proc_data->Prn_no_data2	= 0;					// 次編集項目番号ﾘｾｯﾄ
						edit_flg					= NO;					// 編集終了
						break;
					}else{
					// 電子ﾏﾈｰ種別＆Ｎｏ．編集

					if( SuicaUseKindCheck( Ryousyuu->Electron_data.Suica.e_pay_kind ) ){

						// Suicaの場合以下の様にする
						// Suica                           
						//   カード番号 JE** **** **** 1234
						//   支払い前残額             900円

						sprintf( cEditwk1,"%s", "カード番号" );			// 「カード番号」
					}

					if( pri_kind == R_PRI )
						work = (uchar)prm_get(COM_PRM, S_SCA, 5, 1, 1);			// ﾚｼｰﾄ時ｶｰﾄﾞID印字設定ﾘｰﾄﾞ
					else
						work = (uchar)prm_get(COM_PRM, S_SCA, 5, 1, 2);			// ｼﾞｬｰﾅﾙ時ｶｰﾄﾞID印字設定ﾘｰﾄﾞ

					memset( data_id, 0, sizeof( data_id ));					
					if( SuicaUseKindCheck( Ryousyuu->Electron_data.Suica.e_pay_kind ) ){
						for( i=0,k=0;i<16;i+=4 ){							// 印字ﾃﾞｰﾀﾌﾞﾛｯｸ分ﾙｰﾌﾟ
							memcpy( &data_id[k], &Ryousyuu->Electron_data.Suica.Card_ID[i],4);// 先頭の４Byte分をﾜｰｸ領域に格納
							if( k != 15)									// 最後のﾃﾞｰﾀﾌﾞﾛｯｸでない場合
								data_id[(k+4)] = 0x20;						// ｽﾍﾟｰｽを挿入

							switch( work ){									// 印字設定によって『*』表示する箇所を変更する
								case 0:										// 先頭2文字＋末尾4文字を印字（残りは*表示）
									if( k == 0 )
										data_id[2] = data_id[3] = 0x2a;
									else if( k != 15 )
										data_id[k] = data_id[(k+1)] = data_id[(k+2)] = data_id[(k+3)] = 0x2a;
									break;
								case 1:										// 先頭4文字を印字（残りは*表示）
									if( k != 0 )
										data_id[k] = data_id[(k+1)] = data_id[(k+2)] = data_id[(k+3)] = 0x2a;

									break;
								case 2:										// 末尾4文字を印字（残りは*表示）
									if( k != 15)
										data_id[k] = data_id[(k+1)] = data_id[(k+2)] = data_id[(k+3)] = 0x2a;
								
									break;
								case 3:										// 全て印字（残りは*表示）
								default:
									break;
							}
							k+=5;											// 編集ﾎﾟｲﾝﾀを更新
						}
						memcpy( cEditwk2, data_id, sizeof( data_id ));		// cEditwk2にカード番号(文字)set

						Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
										cEditwk1,											// 文字列１：Suica印字ﾃﾞｰﾀ
										cEditwk2,											// 文字列２：SuicaＮｏ．印字ﾃﾞｰﾀ
										pri_kind											// 印字先ﾌﾟﾘﾝﾀ
									);

							// 支払い前残額　編集
						Prn_edit_Sitei1line	(											// ----- 印字ﾃﾞｰﾀ編集 -----
												"　支払い前残額",						// 印字項目	："　支払い前残額"
												Ryousyuu->Electron_data.Suica.pay_befor,// 印字ﾃﾞｰﾀ	：支払い前残額
												"",										// 単位１	：NULL
												Pri_Tanni[PriT_YEN],					// 単位２	：円
												pri_kind								// 印字先ﾌﾟﾘﾝﾀ
											);

						// 支払い額　編集
						sprintf( cMnydata,"%ld", Ryousyuu->Electron_data.Suica.pay_ryo );			// 料金印字ﾃﾞｰﾀ編集
						Camma_Set( (uchar *)cMnydata );									// ３桁区切り（”、”挿入）

						Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
									"　カード支払い",									// 文字列１："　カード支払い"
									"",													// 文字列２：NULL
									cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
									Pri_Tanni[PriT_YEN],								// 文字列４：円
									pri_kind											// 印字先ﾌﾟﾘﾝﾀ
								);

						// 支払い後残額　編集
						Prn_edit_Sitei1line	(											// ----- 印字ﾃﾞｰﾀ編集 -----
												"　カード残額",							// 印字項目	："　カード残額"
												Ryousyuu->Electron_data.Suica.pay_after,// 印字ﾃﾞｰﾀ	：支払い後残額
												"",										// 単位１	：NULL
												Pri_Tanni[PriT_YEN],					// 単位２	：円
												pri_kind								// 印字先ﾌﾟﾘﾝﾀ
											);
// MH321800(S) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
//#ifdef	FUNCTION_MASK_EDY
//					}else if( Ryousyuu->Electron_data.Edy.e_pay_kind == 2 ){// Edy使用時
//						edit_cnt = Edy_Ryosyu_Edit( Ryousyuu, pri_kind );				// Edy領収証項目の編集
//#endif
// MH321800(E) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
					}

					if( SuicaUseKindCheck( Ryousyuu->Electron_data.Suica.e_pay_kind ) )
						edit_cnt = (uchar)(edit_cnt+4);								// 編集行数更新(Suicaは5行)
// MH321800(S) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
//					else if( Ryousyuu->Electron_data.Edy.e_pay_kind == EDY_USED )	// Edy使用時
//						edit_cnt = (uchar)(edit_cnt);								// 編集行数更新(Edyは6行)
// MH321800(E) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
					}
					if( (edit_cnt+4) > EDIT_GYOU_MAX ){								// 編集行数ﾁｪｯｸ

						edit_flg = NO;												// 編集終了
						break;														// 割引券ﾃﾞｰﾀ検索処理ﾙｰﾌﾟを抜ける
					}

					p_proc_data->Prn_no_data1	= 0;								// PPCﾃﾞｰﾀ番号ﾘｾｯﾄ
					p_proc_data->Prn_no_data2	= 0;								// 次編集項目番号ｾｯﾄ
					edit_flg					= NO;								// 編集終了

			}else{	
				// ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞﾃﾞｰﾀ終了の場合
				data_end = ON;													// Suicaﾃﾞｰﾀ検索終了ﾌﾗｸﾞｾｯﾄ
	     	}

			if( data_end == ON ){												// 割引券ﾃﾞｰﾀ検索終了？

				// 全てのﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞﾃﾞｰﾀ検索を終了した場合
				p_proc_data->Prn_no_data1	= 0;								// Suicaﾃﾞｰﾀ番号ﾘｾｯﾄ
				p_proc_data->Prn_no_data2	= 0;								// 次編集項目番号ｾｯﾄ
				edit_flg					= NO;						// 編集終了
			}

			break;


			/*--------------------------------------------------------------*/
			/*	その他（印字項目ｴﾗｰ）										*/
			/*--------------------------------------------------------------*/
			default:
				p_proc_data->Prn_no_data1	= 0;
				p_proc_data->Prn_no_data2	= 0;
				edit_cnt					= 0;
				edit_flg					= NO;						// 編集終了
				break;
		}
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜合計金額＞印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_goukei								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-10													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_goukei( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	char	title[16];

// MH810105(S) MH364301 インボイス対応
//	RYOUSYUU_edit_title_sub( 0, title );
	RYOUSYUU_edit_title_sub( Ryousyuu, 0, title, p_proc_data );
// MH810105(E) MH364301 インボイス対応
	Prn_edit_Sitei1line	(							// ----- 印字ﾃﾞｰﾀ編集 -----
							title,					// 印字項目	："合　計"
							Ryousyuu->WTotalPrice,	// 印字ﾃﾞｰﾀ	：領収金額
							"",						// 単位１	：NULL
							Pri_Tanni[PriT_YEN],	// 単位２	：円
							pri_kind				// 印字先ﾌﾟﾘﾝﾀ
						);
	edit_cnt++;										// 編集行数更新

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜預り金額＞印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_azukari								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-10													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_azukari( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	char	title[16];

// MH810105(S) MH364301 インボイス対応
//	RYOUSYUU_edit_title_sub( 1, title );
	RYOUSYUU_edit_title_sub( Ryousyuu, 1, title, p_proc_data );
// MH810105(E) MH364301 インボイス対応
	Prn_edit_Sitei1line	(							// ----- 印字ﾃﾞｰﾀ編集 -----
							title,					// 印字項目	："お預り"
							Ryousyuu->WInPrice,		// 印字ﾃﾞｰﾀ	：現金入金額
							"",						// 単位１	：NULL
							Pri_Tanni[PriT_YEN],	// 単位２	：円
							pri_kind				// 印字先ﾌﾟﾘﾝﾀ
						);

	edit_cnt++;										// 編集行数更新

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜釣り銭額（領収証）＞印字ﾃﾞｰﾀ編集処理								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_turisen								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-10													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_turisen( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	char	title[16];

// MH810105(S) MH364301 インボイス対応
//	RYOUSYUU_edit_title_sub( 2, title );
	RYOUSYUU_edit_title_sub( Ryousyuu, 2, title, p_proc_data );
// MH810105(E) MH364301 インボイス対応
	Prn_edit_Sitei1line	(							// ----- 印字ﾃﾞｰﾀ編集 -----
							title,					// 印字項目	："お釣り"
							Ryousyuu->WChgPrice,	// 印字ﾃﾞｰﾀ	：釣銭金額
							"",						// 単位１	：NULL
							Pri_Tanni[PriT_YEN],	// 単位２	：円
							pri_kind				// 印字先ﾌﾟﾘﾝﾀ
						);

	edit_cnt++;										// 編集行数更新

// MH810100(S) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
//	if(( Ryousyuu->MMTwari )&&( !(Ryousyuu->Zengakufg&0x06) )){
//
//		/*-----		仕切り行	-----*/
//		PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]
//		PrnStr( SikiriLine_Prn[5], pri_kind );		// 仕切り行印字ﾃﾞｰﾀ登録
//		edit_cnt++;									// 編集行数更新
//
//		Prn_edit_Sitei1line	(						// ----- 印字ﾃﾞｰﾀ編集 -----
//							"  払戻額",				// 印字項目	："修正払戻額"
//							Ryousyuu->MMTwari		// 印字ﾃﾞｰﾀ	：釣銭金額
//							- Ryousyuu->WFusoku,
//							"",						// 単位１	：NULL
//							Pri_Tanni[PriT_YEN],	// 単位２	：円
//							pri_kind				// 印字先ﾌﾟﾘﾝﾀ
//						);
//
//		edit_cnt++;										// 編集行数更新
//	}
// MH810100(E) K.Onodera 2019/11/25 車番チケットレス(領収証印字)	
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜釣り銭額（精算中止）＞印字ﾃﾞｰﾀ編集処理							|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SEICHUSI_edit_turisen								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-11													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SEICHUSI_edit_turisen( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
// MH322914 (s) kasiyama 2016/07/13 復電領収証の払戻額修正[共通バグNo.1232](MH341106)
	ulong	refund_data = 0;

	refund_data = Ryousyuu->WInPrice - Ryousyuu->WFusoku;	// 投入金額 － 不足金額
// MH322914 (e) kasiyama 2016/07/13 復電領収証の払戻額修正[共通バグNo.1232](MH341106)
	Prn_edit_Sitei1line	(							// ----- 印字ﾃﾞｰﾀ編集 -----
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//							"払戻額",				// 印字項目	："払戻額"
							"  払戻額",				// 印字項目	："  払戻額"
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
// MH322914 (s) kasiyama 2016/07/13 復電領収証の払戻額修正[共通バグNo.1232](MH341106)
//							Ryousyuu->WChgPrice,	// 印字ﾃﾞｰﾀ	：払戻金額
							refund_data,			// 印字ﾃﾞｰﾀ	：払戻金額
// MH322914 (e) kasiyama 2016/07/13 復電領収証の払戻額修正[共通バグNo.1232](MH341106)
							"",						// 単位１	：NULL
							Pri_Tanni[PriT_YEN],	// 単位２	：円
							pri_kind				// 印字先ﾌﾟﾘﾝﾀ
						);

	edit_cnt++;										// 編集行数更新

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜釣り切れ情報（領収証）＞印字ﾃﾞｰﾀ編集処理							|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_turikire								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-10													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_turikire( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	if( Ryousyuu->WFusoku != 0 ){
// MH810100(S) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
//		if( Ryousyuu->MMTwari ){
//			if( !(Ryousyuu->Zengakufg&0x02) ){
//				sprintf( cEditwk1, "  " );
//				RYOUSYUU_edit_title_sub( 4, &cEditwk1[2] );
//				
//				Prn_edit_Sitei1line	(					// ----- 印字ﾃﾞｰﾀ編集 -----
//							cEditwk1,					// 印字項目	："修正払出不足額"
//							Ryousyuu->WFusoku,			// 印字ﾃﾞｰﾀ	：修正払出不足金額
//							"",							// 単位１	：NULL
//							Pri_Tanni[PriT_YEN],		// 単位２	：円
//							pri_kind					// 印字先ﾌﾟﾘﾝﾀ
//						);
//			}
//		}else{
// MH810100(E) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//			sprintf( cEditwk1, "釣銭" );
//// MH810105(S) MH364301 インボイス対応
////			RYOUSYUU_edit_title_sub( 4, &cEditwk1[4] );
//			RYOUSYUU_edit_title_sub( Ryousyuu, 4, &cEditwk1[4], p_proc_data );
//// MH810105(E) MH364301 インボイス対応
			sprintf( cEditwk1, "  釣銭" );
			RYOUSYUU_edit_title_sub( Ryousyuu, 4, &cEditwk1[6], p_proc_data );
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
			Prn_edit_Sitei1line	(						// ----- 印字ﾃﾞｰﾀ編集 -----
							cEditwk1,					// 印字項目	："釣銭払出不足額"
							Ryousyuu->WFusoku,			// 印字ﾃﾞｰﾀ	：釣銭払出不足金額
							"",							// 単位１	：NULL
							Pri_Tanni[PriT_YEN],		// 単位２	：円
							pri_kind					// 印字先ﾌﾟﾘﾝﾀ
						);
// MH810100(S) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
//		}
// MH810100(E) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
		edit_cnt++;										// 編集行数更新
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜釣り切れ情報（精算中止）＞印字ﾃﾞｰﾀ編集処理						|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SEICHUSI_edit_turikire								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-11													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SEICHUSI_edit_turikire( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	if( Ryousyuu->WFusoku != 0 ){

// MH810105(S) MH364301 インボイス対応
//		RYOUSYUU_edit_title_sub( 4, cEditwk1 );
		RYOUSYUU_edit_title_sub( Ryousyuu, 4, cEditwk1, p_proc_data );
// MH810105(E) MH364301 インボイス対応
		// 払戻不足金額がある場合のみ印字する
		Prn_edit_Sitei1line	(							// ----- 印字ﾃﾞｰﾀ編集 -----
								cEditwk1,				// 印字項目	："払出不足額"
								Ryousyuu->WFusoku,		// 印字ﾃﾞｰﾀ	：払戻不足金額
								"",						// 単位１	：NULL
								Pri_Tanni[PriT_YEN],	// 単位２	：円
								pri_kind				// 印字先ﾌﾟﾘﾝﾀ
							);

		edit_cnt++;										// 編集行数更新
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜クレジットカード会社名＞印字ﾃﾞｰﾀ編集処理							|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_ccname								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-20													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_ccname( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	ushort	index;
	ushort	len;

// MH810103 GG119202(S) ICクレジットみなし決済印字フォーマット変更対応
//// MH321800(S) Y.Tanizaki ICクレジット対応
//	// みなし決済かブランド不一致は印字しない
//	if( Ryousyuu->Electron_data.Ec.e_pay_kind == EC_CREDIT_USED &&
//		(Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||
//		 Ryousyuu->Electron_data.Ec.E_Status.BIT.brand_mismatch == 1) ) {
//		return( edit_cnt );
//	}
//// MH321800(E) Y.Tanizaki ICクレジット対応

	// ブランド不一致は印字しない
	if( Ryousyuu->Electron_data.Ec.e_pay_kind == EC_CREDIT_USED &&
		Ryousyuu->Electron_data.Ec.E_Status.BIT.brand_mismatch == 1 ) {
		return( edit_cnt );
	}
// MH810103 GG119202(E) ICクレジットみなし決済印字フォーマット変更対応
	if( Ryousyuu->credit.pay_ryo != 0 ){

		//	ｸﾚｼﾞｯﾄｶｰﾄﾞ支払料金が０でない場合

		//	ｸﾚｼﾞｯﾄｶｰﾄﾞ会社名印字ﾃﾞｰﾀ編集
		memset( cEditwk1,0,sizeof(cEditwk1) );
// MH321800(S) G.So ICクレジット対応(クレジットカード会社名（Shift JIS）24桁対応)
//		memcpy( cEditwk1 ,(char *)&Ryousyuu->credit.card_name[0] ,12 );
		memcpy( cEditwk1 ,(char *)&Ryousyuu->credit.card_name[0] ,24 );
// MH321800(E) G.So ICクレジット対応(クレジットカード会社名（Shift JIS）24桁対応)
		if( Ryousyuu->credit.card_name[0] == '\0' ) {	// NULLデータ
			strcpy( cEditwk1, "ｸﾚｼﾞｯﾄ明細");
		}
		else {
			len = (ushort)strlen(cEditwk1);
			for(index = 0; index < len; ++index) {
				if(cEditwk1[index] != ' ') {
					break;
				}
			}
			if(len == index) {
				strcpy( cEditwk1, "ｸﾚｼﾞｯﾄ明細");
			}
		}

		Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,						// 文字列１：ｸﾚｼﾞｯﾄｶｰﾄﾞ会社名
					"",								// 
					pri_kind						// 印字先ﾌﾟﾘﾝﾀ
				);

		edit_cnt++;									// 編集行数更新
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜クレジットカード会員コード＞印字ﾃﾞｰﾀ編集処理						|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_ccid									|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-20													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_ccid( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	uchar	pri_set;			// 会員No.印字方法（設定ﾃﾞｰﾀ）
	uchar	len;				// 会員No.桁数
	uchar	mask_len;			// ﾏｽｸする会員No.桁数
	uchar	i,j;				// ﾙｰﾌﾟ処理ｶｳﾝﾀｰ

// MH810103 GG119202(S) ICクレジットみなし決済印字フォーマット変更対応
//// MH321800(S) Y.Tanizaki ICクレジット対応
//	// みなし決済かブランド不一致は印字しない
//	if( Ryousyuu->Electron_data.Ec.e_pay_kind == EC_CREDIT_USED &&
//		(Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||
//		 Ryousyuu->Electron_data.Ec.E_Status.BIT.brand_mismatch == 1) ) {
//		return( edit_cnt );
//	}
//// MH321800(E) Y.Tanizaki ICクレジット対応

	// ブランド不一致は印字しない
	if( Ryousyuu->Electron_data.Ec.e_pay_kind == EC_CREDIT_USED &&
		Ryousyuu->Electron_data.Ec.E_Status.BIT.brand_mismatch == 1 ) {
		return( edit_cnt );
	}
// MH810103 GG119202(E) ICクレジットみなし決済印字フォーマット変更対応
	if( Ryousyuu->credit.pay_ryo != 0 ){

		//	ｸﾚｼﾞｯﾄｶｰﾄﾞ支払料金が０でない場合

		//	ｸﾚｼﾞｯﾄｶｰﾄﾞ会員Ｎｏ．印字ﾃﾞｰﾀ編集
		memset( cEditwk1,0,sizeof(cEditwk1) );
		memset( cEditwk2,0,sizeof(cEditwk2) );
// MH810103 GG119202(S) ICクレジットみなし決済印字フォーマット変更対応
//		memcpy( cEditwk1 ,(char *)&Ryousyuu->credit.card_no[0] ,20 );

		// みなし決済時は*印字
		if( Ryousyuu->Electron_data.Ec.e_pay_kind == EC_CREDIT_USED &&
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//			Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
			(Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||
			 Ryousyuu->chuusi == 1) ){
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk1 ,"****************" );
		}
		else {
			memcpy( cEditwk1 ,(char *)&Ryousyuu->credit.card_no[0] ,20 );
		}
// MH810103 GG119202(E) ICクレジットみなし決済印字フォーマット変更対応

// MH321800(S) Y.Tanizaki ICクレジット対応
//		pri_set = 2;
		pri_set = 0;	// 決済リーダでの精算の場合はそのまま印字
// MH321800(E) Y.Tanizaki ICクレジット対応

		for(i=0,j=0; i<20; i++){
			if( cEditwk1[i] == 0x20 ){
				continue;
			}
			cEditwk2[j] = cEditwk1[i];
			j++;
		}

		switch( pri_set ){										// 会員No.印字方法？

			case	1:	// 最初の4桁のみ印字し残りは'*'を印字

				len = (uchar)strlen( cEditwk2 );				// 「会員No.桁数」検索

				if( len >= 5 ){

					// 会員No.桁数＝５桁以上の場合
					mask_len = (uchar)(len - 4);				// ﾏｽｸする桁数取得
					for( i=0 ; i<mask_len ; i++ ){				// ５桁目以降の会員No.を＊でﾏｽｸする
						cEditwk2[4+i] = '*';
					}
				}

				break;

			case	2:	// 最後の4桁のみ印字し残りは'*'を印字

				len = (uchar)strlen( cEditwk2 );				// 「会員No.桁数」検索
				if( len >= 5 ){

					// 会員No.桁数＝５桁以上の場合
					mask_len = (uchar)(len - 4);				// ﾏｽｸする桁数取得
					for( i=0 ; i<mask_len ; i++ ){				// 最後の４桁を残し会員No.を＊でﾏｽｸする
						cEditwk2[i] = '*';
					}
				}

				break;
		}

		Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
					"  会員No.",								// 文字列１："  会員No."
					cEditwk2,									// 文字列２：ｸﾚｼﾞｯﾄｶｰﾄﾞ会員No.
					pri_kind									// 印字先ﾌﾟﾘﾝﾀ
				);

		edit_cnt++;												// 編集行数更新
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜クレジットカード伝票Ｎｏ．＞印字ﾃﾞｰﾀ編集処理						|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_ccslno								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-20													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_ccslno( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
// MH810103 GG119202(S) ICクレジットみなし決済印字フォーマット変更対応
//// MH321800(S) Y.Tanizaki ICクレジット対応
//	// みなし決済かブランド不一致は印字しない
//	if( Ryousyuu->Electron_data.Ec.e_pay_kind == EC_CREDIT_USED &&
//		(Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||
//		 Ryousyuu->Electron_data.Ec.E_Status.BIT.brand_mismatch == 1) ) {
//		return( edit_cnt );
//	}
//// MH321800(E) Y.Tanizaki ICクレジット対応

	// ブランド不一致は印字しない
	if( Ryousyuu->Electron_data.Ec.e_pay_kind == EC_CREDIT_USED &&
		Ryousyuu->Electron_data.Ec.E_Status.BIT.brand_mismatch == 1 ) {
		return( edit_cnt );
	}
// MH810103 GG119202(E) ICクレジットみなし決済印字フォーマット変更対応
	if( Ryousyuu->credit.pay_ryo != 0 ){

		//	ｸﾚｼﾞｯﾄｶｰﾄﾞ支払料金が０でない場合

		//	ｸﾚｼﾞｯﾄｶｰﾄﾞ伝票Ｎｏ．印字ﾃﾞｰﾀ編集
		memset( cEditwk1,0,sizeof(cEditwk1) );
// MH810103 GG119202(S) ICクレジットみなし決済印字フォーマット変更対応
//		sprintf( cEditwk1,"%05ld",Ryousyuu->credit.slip_no );
		// みなし決済時は*印字
		if( Ryousyuu->Electron_data.Ec.e_pay_kind == EC_CREDIT_USED &&
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//			Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
			(Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||
			 Ryousyuu->chuusi) ){
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk1 ,"*****" );
		}
		else {
			sprintf( cEditwk1,"%05ld",Ryousyuu->credit.slip_no );
		}
// MH810103 GG119202(E) ICクレジットみなし決済印字フォーマット変更対応

		Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
					"  伝票No.",					// 文字列１："  伝票No."
					cEditwk1,						// 文字列２：ｸﾚｼﾞｯﾄｶｰﾄﾞ伝票No.
					pri_kind						// 印字先ﾌﾟﾘﾝﾀ
				);

		edit_cnt++;									// 編集行数更新
	}
	return( edit_cnt );
}

// MH810103 GG119202(S) 不要機能削除(センタークレジット)
///*[]-----------------------------------------------------------------------[]*/
///*|		承認№編集処理（右詰め０パディングしてcEditwk1にセットする）		|*/
///*[]-----------------------------------------------------------------------[]*/
///*|	MODULE NAME		:	Edit_AppNoChar( *app_no, len )						|*/
///*|																			|*/
///*|	PARAMETER		:	char	*app_no	=	承認№文字列ﾎﾟｲﾝﾀｰ				|*/
///*|																			|*/
///*|						short	len		=	承認№文字列の長さ				|*/
///*[]-----------------------------------------------------------------------[]*/
///*|	Date	:	2013-08-01													|*/
///*|	Update	:																|*/
///*[]------------------------------------- Copyright(C) 2013 AMANO Corp.----[]*/
//static	void Edit_AppNoChar( char *app_no, short len )
//{
//	ushort	len1, len2, flg;
//	short	i, j;
//	uchar	str[8];
//
//	memset( cEditwk1, 0, sizeof(cEditwk1) );
//	memset( str, 0, sizeof(str) );
//
//	// 先頭から続くNULL又は空白を捨てる
//	flg = 0;
//	for( i=j=0; i<len; i++ ){
//		if( !flg && (app_no[i] == 0x00 || app_no[i] == 0x20) ){	// NULL or 空白
//			continue;
//		}
//		flg = 1;
//		str[j++] = app_no[i];
//	}
//	// バッファ最後尾から続く空白をNULLに置換
//	for( i=7; i>=0; i-- ){
//		if( str[i] == 0x00 || str[i] == 0x20 ){	// NULL or 空白
//			str[i] = 0;
//			continue;
//		}
//		break;
//	}
//
//	// 右詰め０パディングしてcEditwk1にコピーする
//	len1 = (ushort)strlen((const char *)str);
//	len2 = (ushort)len;
//	if( len2 > len1 ){
//		memset( cEditwk1, 0x30, (len2-len1) );
//		memcpy( &cEditwk1[len2-len1], str, len1 );
//	}else{
//		memcpy( cEditwk1, str, len );
//	}
//}
// MH810103 GG119202(E) 不要機能削除(センタークレジット)

/*[]-----------------------------------------------------------------------[]*/
/*|		＜クレジットカード承認Ｎｏ．＞印字ﾃﾞｰﾀ編集処理						|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_ccapno								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-20													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_ccapno( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
// MH810103 GG119202(S) ICクレジットみなし決済印字フォーマット変更対応
//// MH321800(S) Y.Tanizaki ICクレジット対応
//	// みなし決済かブランド不一致は印字しない
//	if( Ryousyuu->Electron_data.Ec.e_pay_kind == EC_CREDIT_USED &&
//		(Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||
//		 Ryousyuu->Electron_data.Ec.E_Status.BIT.brand_mismatch == 1) ) {
//		return( edit_cnt );
//	}
//// MH321800(E) Y.Tanizaki ICクレジット対応

	// ブランド不一致は印字しない
	if( Ryousyuu->Electron_data.Ec.e_pay_kind == EC_CREDIT_USED &&
		Ryousyuu->Electron_data.Ec.E_Status.BIT.brand_mismatch == 1 ) {
		return( edit_cnt );
	}
// MH810103 GG119202(E) ICクレジットみなし決済印字フォーマット変更対応
	if( Ryousyuu->credit.pay_ryo != 0 ){

		//	ｸﾚｼﾞｯﾄｶｰﾄﾞ支払料金が０でない場合
// MH321800(S) D.Inaba ICクレジット対応
//		//	ｸﾚｼﾞｯﾄｶｰﾄﾞ承認Ｎｏ．印字ﾃﾞｰﾀ編集
//		Edit_AppNoChar( Ryousyuu->credit.AppNoChar, sizeof(Ryousyuu->credit.AppNoChar) );
// MH810103 GG119202(S) ICクレジットみなし決済印字フォーマット変更対応
//		sprintf( cEditwk1,"%07ld",Ryousyuu->credit.app_no );
		// みなし決済時は*印字
		if( Ryousyuu->Electron_data.Ec.e_pay_kind == EC_CREDIT_USED &&
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//			Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
			(Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||
			 Ryousyuu->chuusi) ){
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk1 ,"*******" );
		}
		else {
			sprintf( cEditwk1,"%07ld",Ryousyuu->credit.app_no );
		}
// MH810103 GG119202(E) ICクレジットみなし決済印字フォーマット変更対応
// MH321800(E) D.Inaba ICクレジット対応

		Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
					"  承認No.",					// 文字列１："  承認No."
					cEditwk1,						// 文字列２：ｸﾚｼﾞｯﾄｶｰﾄﾞ承認No.
					pri_kind						// 印字先ﾌﾟﾘﾝﾀ
				);

		edit_cnt++;									// 編集行数更新
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜修正精算情報＞印字ﾃﾞｰﾀ編集処理									|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_syuuseij								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-07-21													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_syuuseij( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
// MH810100(S) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
//	short	i;
//	uchar	set03_98_2;
//	uchar	set_wk;
//	ulong	furi_bun;
//	wari_tiket	wari_dt;
//
//	for (i = 0; i < WTIK_USEMAX; i++) {
//		disc_wari_conv( &Ryousyuu->DiscountData[i], &wari_dt );
//		if (wari_dt.tik_syu == SYUUSEI) {
//
//			/*-----		仕切り行	-----*/
//			PCMD_LEFT( pri_kind );								// [位置揃え(左揃え)]
//			PrnStr( SikiriLine_Prn[4], pri_kind );				// 仕切り行印字ﾃﾞｰﾀ登録
//			edit_cnt++;
//
//			/*-----    修正元精算追番    -----*/
//			sprintf( cEditwk1,"精算No.%06ld",Ryousyuu->MMPwari );	// "No.xxxxxx"ｾｯﾄ
//
//			Str_Set1(								// ----- 印字ﾃﾞｰﾀ編集 -----
//						"        ",					// 印字項目	："修正元入金額"
//						cEditwk1,					// 印字ﾃﾞｰﾀ	：間違い入金額
//						pri_kind					// 印字先ﾌﾟﾘﾝﾀ
//						);
//			edit_cnt++;
//
//			/*-----    修正元車室番号    -----*/
//			Prn_edit_pkposi( cEditwk1,  Ryousyuu->MMPlace, 0 );							// cEditwk1←駐車位置印字ﾃﾞｰﾀ
//			Prn_edit_sya_syu( cEditwk2, (ushort)Ryousyuu->MMSyubetu ,1, 3);				// cEditwk2←振替元車室番号＆車種ﾃﾞｰﾀ
//
//			Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
//						cEditwk2,									// 文字列１：振替元車室番号＆車種ﾃﾞｰﾀ
//						cEditwk1,									// 文字列２：駐車位置印字ﾃﾞｰﾀ
//						pri_kind									// 印字先ﾌﾟﾘﾝﾀ
//					);
//					
//			edit_cnt++;												// 編集行数更新
//
//			/*-----    修正元振替額(駐車料金)    -----*/
//			Prn_edit_Sitei1line	(								// ----- 印字ﾃﾞｰﾀ編集 -----
//								"  駐車料金",					// 印字項目	："修正元入金額"
//								Ryousyuu->MMPrice,				// 印字ﾃﾞｰﾀ	：間違い駐車料金
//								"",								// 単位１	：NULL
//								Pri_Tanni[PriT_YEN],			// 単位２	：円
//								pri_kind						// 印字先ﾌﾟﾘﾝﾀ
//							);
//
//			edit_cnt++;														// 編集行数更新
//
//			/*-----    修正元入金額    -----*/
//			set_wk = (uchar)prm_get(COM_PRM, S_PRN, 32, 1, 1);
//			if( Prn_JRprintSelect( set_wk, pri_kind ) ){
//				if( Ryousyuu->MMInPrice ){
//					Prn_edit_Sitei1line	(						// ----- 印字ﾃﾞｰﾀ編集 -----
//								"  （現金）",					// 印字項目	："修正元入金額"
//								Ryousyuu->MMInPrice,			// 印字ﾃﾞｰﾀ	：間違い入金額
//								"",								// 単位１	：NULL
//								Pri_Tanni[PriT_YEN],			// 単位２	：円
//								pri_kind						// 印字先ﾌﾟﾘﾝﾀ
//							);
//					edit_cnt++;
//				}
//			}
//
//			/*-----    修正元割引額    -----*/
//			set_wk = (uchar)prm_get(COM_PRM, S_PRN, 32, 1, 2);
//			if( Prn_JRprintSelect( set_wk, pri_kind ) ){
//				if( Ryousyuu->MMRwari ){
//					// 料金割引料金がある場合
//
//					set03_98_2 = (uchar)prm_get(COM_PRM, S_TYP, 98, 1, 2);
//					if(	(Ryousyuu->Zengakufg & 0x01) &&(set03_98_2) ){	// 全額割引あり&全額割引とする
//						// 全額割引の場合
//						if( set03_98_2 == 2 ){					// 全額割引とする
//							Prn_edit_Sitei1line	(				// ----- 印字ﾃﾞｰﾀ編集 -----
//									"  （全額割引）",			// 印字項目	："修正元割引額"
//									Ryousyuu->MMRwari,			// 印字ﾃﾞｰﾀ	：料金割引金額
//									"",							// 単位１	：NULL
//									Pri_Tanni[PriT_YEN],		// 単位２	：円
//									pri_kind					// 印字先ﾌﾟﾘﾝﾀ
//								);
//						}else{
//							Str_Set1(							// -----印字ﾃﾞｰﾀ編集-----
//									"  （割引）",				// 文字列１：空白
//									"全額割引",					// 文字列２："全額割引"
//									pri_kind					// 印字先ﾌﾟﾘﾝﾀ
//								);
//						}
//					}else{
//
//						Prn_edit_Sitei1line	(					// ----- 印字ﾃﾞｰﾀ編集 -----
//								"  （割引）",					// 印字項目	："修正元割引額"
//								Ryousyuu->MMRwari,				// 印字ﾃﾞｰﾀ	：料金割引金額
//								"",								// 単位１	：NULL
//								Pri_Tanni[PriT_YEN],			// 単位２	：円
//								pri_kind						// 印字先ﾌﾟﾘﾝﾀ
//							);
//					}
//					edit_cnt++;
//				}
//			}
//
//			/*-----		仕切り行	-----*/
//			PCMD_LEFT( pri_kind );								// [位置揃え(左揃え)]
//			PrnStr( SikiriLine_Prn[3], pri_kind );				// 仕切り行印字ﾃﾞｰﾀ登録
//			edit_cnt++;
//
//			/*-----    間違い精算分    -----*/
//			if( Ryousyuu->WPrice == 0 ){									// 修正先駐車料金が0円
//				sprintf( cMnydata,"%ld", Ryousyuu->WPrice );				// 振替分も0円とする
//			}else{
//				furi_bun = wari_dt.ryokin;
//				if( wari_dt.ryokin > Ryousyuu->WPrice ){
//					furi_bun = Ryousyuu->WPrice;
//				}
//				sprintf( cMnydata,"%ld", furi_bun );						// 振替額ﾃﾞｰﾀ編集
//				if (furi_bun > 0) {
//					Camma_Set( (uchar *)cMnydata );							// ３桁区切り（”、”挿入）
//					StrAdd( (uchar *)cMnydata , (uchar*)"-");				// 割引額に"-"を付加
//				}
//			}
//			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//						"  間違い精算分",									// 文字列１："振替額"
//						"",													// 文字列２：""
//						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
//						Pri_Tanni[PriT_YEN],								// 文字列４："円"
//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;														// 編集行数更新
//
//			/*-----    修正元預り／掛売額    -----*/
//			set_wk = (uchar)prm_get(COM_PRM, S_PRN, 32, 1, 3);
//			if( Prn_JRprintSelect( set_wk, pri_kind ) ){
//				if( Ryousyuu->MMTwari ){
//					if( !(Ryousyuu->Zengakufg&0x02) ){
//						// 修正元入金額＞修正先駐車料金で払出しない時
//
//						if( Ryousyuu->Zengakufg&0x04 ){
//							Prn_edit_Sitei1line	(				// ----- 印字ﾃﾞｰﾀ編集 -----
//									"  払戻不足分",				// 印字項目	："修正未払い額"
//									Ryousyuu->MMTwari,			// 印字ﾃﾞｰﾀ	：間違い入金額
//									"",							// 単位１	：NULL
//									Pri_Tanni[PriT_YEN],		// 単位２	：円
//									pri_kind					// 印字先ﾌﾟﾘﾝﾀ
//								);
//						}
//					}else{
//						// 修正元入金額＜修正先駐車料金で強制完了の時
//
//						sprintf( cMnydata,"%ld", Ryousyuu->MMTwari );	// 振替額ﾃﾞｰﾀ編集
//						if (Ryousyuu->MMTwari > 0) {
//							Camma_Set( (uchar *)cMnydata );				// ３桁区切り（”、”挿入）
//							StrAdd( (uchar *)cMnydata , (uchar*)"-");	// 割引額に"-"を付加
//						}
//
//						Str_Set2(										// -----印字ﾃﾞｰﾀ編集-----
//									"  未入金分",						// 文字列１："振替額"
//									"",									// 文字列２：""
//									cMnydata,							// 文字列３：料金印字ﾃﾞｰﾀ
//									Pri_Tanni[PriT_YEN],				// 文字列４："円"
//									pri_kind							// 印字先ﾌﾟﾘﾝﾀ
//								);
//					}
//					edit_cnt++;
//				}
//			}
//			break;
//		}
//	}
// MH810100(E) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜駐車位置番号＞印字ﾃﾞｰﾀ編集処理									|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_pkno									|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-05-02													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_pkno( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	if( ( CPrmSS[S_PRN][16] == 1 ) && (Ryousyuu->WPlace != 0) ){	// 「車室No.印字有無＝印字する」　且つ　車室No.≠０？

		Prn_edit_pkposi( cEditwk1, Ryousyuu->WPlace, 0 );			// cEditwk1←駐車位置印字ﾃﾞｰﾀ
		Prn_edit_sya_syu( cEditwk2 , (ushort)Ryousyuu->syu ,1, 0);	// cEditwk2←車室番号＆車種ﾃﾞｰﾀ

		Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
					cEditwk2,										// 文字列１：車室番号＆車種ﾃﾞｰﾀ
					cEditwk1,										// 文字列２：駐車位置印字ﾃﾞｰﾀ
					pri_kind										// 印字先ﾌﾟﾘﾝﾀ
				);

		edit_cnt++;
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜定期更新時の期限案内メッセージ＞印字ﾃﾞｰﾀ編集処理					|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_tupdmsg								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-21													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_tupdmsg( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	// 定期更新領収証　且つ　「定期券有効期限印字＝する」の場合のみ印字する

	if( Ryousyuu->teiki.update_mon != 0 ){
		// 定期更新領収証の場合のみ印字する
		PCMD_CENTER( pri_kind );						// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnFontSize( FONT_A_NML, pri_kind );			// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );			// 漢字（通常）指定

		PrnStr( "この定期券は", pri_kind );				// ﾒｯｾｰｼﾞ１行目印字ﾃﾞｰﾀ登録
		edit_cnt++;

		sprintf(										// ﾒｯｾｰｼﾞ２行目（期限案内）印字ﾃﾞｰﾀ編集
					cEditwk1,
					"%4d年%2d月%2d日まで有効です",
					Ryousyuu->teiki.e_year,				// 有効期限（終了：年）
					Ryousyuu->teiki.e_mon,				// 有効期限（終了：月）
					Ryousyuu->teiki.e_day				// 有効期限（終了：日）
				);

		PrnStr( cEditwk1, pri_kind );					// ﾒｯｾｰｼﾞ２行目印字ﾃﾞｰﾀ登録
		edit_cnt++;

	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜釣り切れ時の固定メッセージ＞印字ﾃﾞｰﾀ編集処理						|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_tukimsg								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|						uchar			msg_no		=	ﾒｯｾｰｼﾞ番号			|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-31													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_tukimsg( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data, uchar msg_no )
{
	uchar	edit_cnt = 0;		// 編集行数

	if( (Ryousyuu->chuusi == 0 || Ryousyuu->chuusi == 3 ) && (Ryousyuu->WFusoku != 0) ){
		if(CPrmSS[S_SYS][44] != 0){								// 預り証設定が0の場合は領収証に預り証の内容を印字しない。
			if( msg_no != 6 ){
				edit_cnt = Prn_edit_TurikireMsg( msg_no, pri_kind );
			}else{
				edit_cnt = Prn_edit_AzuFtr_edit( pri_kind );
			}
		}
	}
	return( edit_cnt );
}

// 仕様変更(S) K.Onodera 2016/10/31 #1531 領収証フッターを印字する
uchar	RYOUSYUU_edit_Kbrmsg( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	edit_cnt += Prn_edit_space( pri_kind );			// スペース

	// 過払いがクレジット？
	if( Ryousyuu->FRK_RetMod == 1 ){
		edit_cnt += Prn_edit_KbrFtr_edit( pri_kind, 1 );
	}
	// 過払いが電子マネー？
// MH321800(S) Y.Tanizaki ICクレジット対応
//	else if( Ryousyuu->FRK_RetMod == 2 ){
	else if( Ryousyuu->FRK_RetMod != 0 ){
// MH321800(E) Y.Tanizaki ICクレジット対応
		edit_cnt += Prn_edit_KbrFtr_edit( pri_kind, 2 );
	}

	return( edit_cnt );
}
// 仕様変更(E) K.Onodera 2016/10/31 #1531 領収証フッターを印字する
// 仕様変更(S) K.Onodera 2016/11/08 後日支払額フッター
uchar	RYOUSYUU_edit_Futuremsg( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	edit_cnt += Prn_edit_space( pri_kind );			// スペース

	edit_cnt += Prn_edit_FutureFtr_edit( pri_kind );

	return( edit_cnt );
}
// 仕様変更(E) K.Onodera 2016/11/08 後日支払額フッター

/*[]-----------------------------------------------------------------------[]*/
/*|		＜定期券更新時のラベル発行メッセージ＞印字ﾃﾞｰﾀ編集処理				|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_tupdlvlmsg							|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-05-02													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_tupdlvlmsg( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	if( Ryousyuu->teiki.update_mon != 0 ){

		// 定期更新領収証の場合のみ印字する

		PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定

		if( Ryousyuu->teiki.update_rslt2 == OK ){

			//	ラベル正常発行の場合
			PrnStr( "　　　ラベルは見やすい場所に", pri_kind );		// ﾒｯｾｰｼﾞ（１行目）印字ﾃﾞｰﾀ登録
			edit_cnt++;
			PrnStr( "　　　　　貼り付けて下さい。", pri_kind );		// ﾒｯｾｰｼﾞ（２行目）印字ﾃﾞｰﾀ登録
			edit_cnt++;

		}
		else{
			//	ラベル発行不良の場合
			PrnStr( "　ラベルが発行できませんでした。", pri_kind );	// ﾒｯｾｰｼﾞ（１行目）印字ﾃﾞｰﾀ登録
			edit_cnt++;
		}
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜定期券更新不可時のメッセージ＞印字ﾃﾞｰﾀ編集処理					|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_tupdngmsg								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-05-02													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_tupdngmsg( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	if( Ryousyuu->teiki.update_mon != 0 ){

		// 定期更新領収証の場合

		if( Ryousyuu->teiki.update_rslt1 != OK ){

			//	更新結果≠ＯＫの場合

			PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
			PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
			PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
			PrnStr( "　定期券の更新ができませんでした。", pri_kind );	// ﾒｯｾｰｼﾞ印字ﾃﾞｰﾀ登録
			edit_cnt++;
		}
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜利用内容＞印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_content								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|						uchar			edit_no		=	印字項目			|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	T.Namioka													|*/
/*|	Date	:	2008-08-18													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_content( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data, uchar edit_no )
{
	uchar	edit_cnt = 0;		// 編集行数
// 不具合修正(S) K.Onodera 2016/10/19 #1525 マイナスと数値の間にカンマが印字されてしまう
//	ulong	edit_work=0;
	long	edit_work=0;
// 不具合修正(E) K.Onodera 2016/10/19 #1525 マイナスと数値の間にカンマが印字されてしまう
	ulong	edit_work2=0;
	ushort	i;
	double	tax;				// 税率（％）
	DISCOUNT_DATA	*ppc_data_edit;
	uchar	PPC_MAX;
// 不具合修正(S) K.Onodera 2016/10/19 #1525 マイナスと数値の間にカンマが印字されてしまう
	uchar	f_minums = 0;
// 不具合修正(E) K.Onodera 2016/10/19 #1525 マイナスと数値の間にカンマが印字されてしまう
// MH321800(S) hosoda ICクレジット対応
	int		str_index;
// MH321800(E) hosoda ICクレジット対応
// MH810100(S) K.Onodera 200/01/29 車番チケットレス(領収証印字)
	ushort	usLen;
// MH810100(E) K.Onodera 200/01/29 車番チケットレス(領収証印字)

	memset( cEditwk1, 0, sizeof( cEditwk1 ));
// MH810100(S) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
	memset( cEditwk2, 0, sizeof( cEditwk2 ));
// MH810100(E) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
	
	switch( edit_no ){
		case 110:				// 現金領収額
// 仕様変更(S) K.Onodera 2016/12/02 振替額変更
//			if( Ryousyuu->WInPrice ){
//				if( (Ryousyuu->WInPrice - Ryousyuu->WChgPrice) > 0 )
//					edit_work = Ryousyuu->WInPrice - Ryousyuu->WChgPrice;	// 現金領収額算出
			// 入金有り or 過払い払出しあり？
			if( Ryousyuu->WInPrice || (Ryousyuu->FRK_Return && Ryousyuu->FRK_RetMod == 0) ){
				// 過払い払出しあり？
				if( Ryousyuu->FRK_Return ){
					edit_work = Ryousyuu->WInPrice - (Ryousyuu->WChgPrice + Ryousyuu->FRK_Return);	// 現金領収額算出
				}
				else if( (Ryousyuu->WInPrice - Ryousyuu->WChgPrice) > 0 ){
					edit_work = Ryousyuu->WInPrice - Ryousyuu->WChgPrice;	// 現金領収額算出
				}
// 仕様変更(E) K.Onodera 2016/12/02 振替額変更
// 不具合修正(S) K.Onodera 2016/10/19 #1525 マイナスと数値の間にカンマが印字されてしまう
				if( edit_work < 0 ){
					edit_work *= -1;	// プラス値にしておく
					f_minums = 1;
				}
// 不具合修正(E) K.Onodera 2016/10/19 #1525 マイナスと数値の間にカンマが印字されてしまう
				if( prm_get(COM_PRM, S_PRN, 29, 1, 4) == 0 ){
					sprintf( cEditwk1,"%s", title_edit_sub[0] );				// cEditwk1に「現金領収金額」セット
				}else{
					sprintf( cEditwk1,"%s", Ryosyu_Content[0].print_data[0] );	// cEditwk1に「現金領収額」セット
				}

				edit_cnt = RYOUSYUU_edit_content_sub(						// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,										// データ１："現金領収額"
							edit_work,										// データ２：利用金額
							0,												// データ３：なし
// 不具合修正(S) K.Onodera 2016/10/19 #1525 マイナスと数値の間にカンマが印字されてしまう
//							0,												// データ４："-"なし
							f_minums,										// データ４：金額へ"-"を付けるかどうか
// 不具合修正(E) K.Onodera 2016/10/19 #1525 マイナスと数値の間にカンマが印字されてしまう
							pri_kind										// データ５：印字先ﾌﾟﾘﾝﾀ
						);
			}
			break;
		case 111:				// ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ利用額
// NOTE:テストプリントフラグだけでは不安なので、テストプリント入出庫年月日が同じ時はプリペイドデータを印字しない
			if( ( Ryousyuu->testflag == ON ) &&
				( Ryousyuu->TInTime.Year == 2000 && Ryousyuu->TInTime.Mon == 1 && Ryousyuu->TInTime.Day == 1 ) &&
				( Ryousyuu->TOutTime.Year == 2000 && Ryousyuu->TOutTime.Mon == 1 && Ryousyuu->TOutTime.Day == 1 )){
				break;
			}
			ppc_data_edit = Ryousyuu->DiscountData;
			PPC_MAX	= WTIK_USEMAX;
			for( i = 0; i < PPC_MAX ; i++,ppc_data_edit++ ){				// PPCﾃﾞｰﾀ検索
				if( ppc_data_edit->DiscSyu == NTNET_PRI_W ){				// PPCﾃﾞｰﾀあり？
					edit_work += ppc_data_edit->Discount;					//「ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ利用額」を加算していく
				}
			}
			if( edit_work ){
				sprintf( cEditwk1,"%s", Ryosyu_Content[1].print_data[0] );	// cEditwk1に「ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ」セット
				edit_cnt = RYOUSYUU_edit_content_sub(						// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,										// データ１："ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ"
							edit_work,										// データ２：利用金額
							0,												// データ３：なし
							0,												// データ４："-"なし
							pri_kind										// データ５：印字先ﾌﾟﾘﾝﾀ
						);
			}

			break;
		case 112:				// 回数券利用額
			for( i = 0; i < WTIK_USEMAX ; i++ ){							// 割引券ﾃﾞｰﾀ検索
				if( Ryousyuu->DiscountData[i].DiscSyu == NTNET_FRE ){		// 回数券ﾃﾞｰﾀ？
					edit_work	+= Ryousyuu->DiscountData[i].Discount;		//「回数券利用額」を加算していく
				}
			}
			if( edit_work ){
				sprintf( cEditwk1,"%s", Ryosyu_Content[2].print_data[0] );	// cEditwk1に「回数券」セット
				edit_cnt = RYOUSYUU_edit_content_sub(						// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,										// データ１："回数券"
							edit_work,										// データ２：利用金額
							0,												// データ３：なし
							0,												// データ４："-"なし
							pri_kind										// データ５：印字先ﾌﾟﾘﾝﾀ
						);

			}
			break;
		case 113:				// ｸﾚｼﾞｯﾄｶｰﾄﾞ利用額
// MH810103 MH321800(S) 決済精算中止時は決済額をマスクする
			if (Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement != 0 &&
				Ryousyuu->WFlag != 0) {
				// 決済精算中止時はクレジットカード利用額を印字しない
				break;
			}
// MH810103 MH321800(E) 決済精算中止時は決済額をマスクする
// MH810105(S) MH364301 QRコード決済対応（精算中止データ送信対応）
			if (Ryousyuu->chuusi == 1) {
				// 決済精算中止時はクレジット利用額を印字しない
				break;
			}
// MH810105(E) MH364301 QRコード決済対応（精算中止データ送信対応）
			if( Ryousyuu->credit.pay_ryo && Ryousyuu->credit.cre_type == 0){
				sprintf( cEditwk1,"%s", Ryosyu_Content[3].print_data[1] );	// cEditwk1に「ｸﾚｼﾞｯﾄｶｰﾄﾞ」セット
				edit_cnt = RYOUSYUU_edit_content_sub(						// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,										// データ１："ｸﾚｼﾞｯﾄｶｰﾄﾞ"
							Ryousyuu->credit.pay_ryo,						// データ２：利用金額
							0,												// データ３：なし
							0,												// データ４："-"なし
							pri_kind										// データ５：印字先ﾌﾟﾘﾝﾀ
						);
				
			}			
			break;
		case 114:				// 電子決済ｶｰﾄﾞ利用額
// MH321800(S) hosoda ICクレジット対応
			if (EcUseKindCheck(Ryousyuu->Electron_data.Ec.e_pay_kind)) {
			// 決済リーダ
// MH810103 MH321800(S) 決済精算中止時は決済額をマスクする
				if (Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement != 0 &&
					Ryousyuu->WFlag != 0) {
					// 決済精算中止時は電子マネー利用額を印字しない
					break;
				}
// MH810103 MH321800(E) 決済精算中止時は決済額をマスクする
// MH810105(S) MH364301 QRコード決済対応（精算中止データ送信対応）
				if (Ryousyuu->chuusi == 1) {
					// 決済精算中止時は電子マネー利用額を印字しない
					break;
				}
// MH810105(E) MH364301 QRコード決済対応（精算中止データ送信対応）
				str_index = EcRiyougakuBrandStrNo[Ryousyuu->Electron_data.Ec.e_pay_kind - EC_EDY_USED];
				if ( str_index >= 0 && str_index < TBL_CNT(ElectronEc_prn) ) {
					sprintf(cEditwk1, "%s", ElectronEc_prn[str_index]);			// cEditwk1に利用媒体名セット
					edit_cnt = RYOUSYUU_edit_content_sub(						// -----印字ﾃﾞｰﾀ編集-----
								cEditwk1,										// データ１：利用媒体名
								Ryousyuu->Electron_data.Ec.pay_ryo,				// データ２：利用金額
								0,												// データ３：なし
								0,												// データ４："-"なし
								pri_kind										// データ５：印字先ﾌﾟﾘﾝﾀ
							);
				}
			}
			else
// MH321800(E) hosoda ICクレジット対応
			if( SuicaUseKindCheck( Ryousyuu->Electron_data.Suica.e_pay_kind ) ){
				edit_work = 22;
				sprintf( cEditwk1,"%s", Ryosyu_Content[4].print_data[edit_work] );	// cEditwk1に利用媒体名セット
				edit_cnt = RYOUSYUU_edit_content_sub(						// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,										// データ１：利用媒体名
							Ryousyuu->Electron_data.Suica.pay_ryo,			// データ２：利用金額
							0,												// データ３：なし
							0,												// データ４："-"なし
							pri_kind										// データ５：印字先ﾌﾟﾘﾝﾀ
						);
			}
// MH321800(S) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
//			else if(Ryousyuu->Electron_data.Edy.e_pay_kind == 2){				// Edy
//				edit_work = 23;
//				sprintf( cEditwk1,"%s", Ryosyu_Content[4].print_data[edit_work] );	// cEditwk1に利用媒体名セット
//				edit_cnt = RYOUSYUU_edit_content_sub(						// -----印字ﾃﾞｰﾀ編集-----
//							cEditwk1,										// データ１：利用媒体名
//							Ryousyuu->Electron_data.Edy.pay_ryo,			// データ２：利用金額
//							0,												// データ３：なし
//							0,												// データ４："-"なし
//							pri_kind										// データ５：印字先ﾌﾟﾘﾝﾀ
//						);
//			}
// MH321800(E) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
			break;
		case 122:				// 消費税
			if( prm_get( COM_PRM, S_CAL, 20, 1, 2 ) == 0 ){					// 税率印字あり
				memset( cMnydata, 0, sizeof( cMnydata ));
				memset( cEditwk2,0,sizeof(cEditwk2) );						// cEditwk2ｸﾘｱ（編集用ｴﾘｱとして使用）
				edit_work = prm_get( COM_PRM, S_CAL, 19, 4, 1 );			// 「税率」	設定ﾃﾞｰﾀ取得
				tax = (double)edit_work/100;								// ％変換
				sprintf( cEditwk1,"(%s", Ryosyu_Content[5].print_data[5] );	// cEditwk1に「内消費税等」セット
				sprintf( cEditwk2,"%.2f％", tax );							// 税率印字ﾃﾞｰﾀ編集
				sprintf( cMnydata,"%ld", Ryousyuu->Wtax );					// 料金印字ﾃﾞｰﾀ編集
				Camma_Set( (uchar *)cMnydata );								// ３桁区切り（”、”挿入）

				Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,										// データ１："(内消費税等"
							cEditwk2,										// データ２：消費税率
							cMnydata,										// データ３：消費税額
							"円)",											// データ４："円)"
							pri_kind										// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;
			}
			break;
		case 124:				// 合計(請求額)
			for( i = 0; i < WTIK_USEMAX ; i++ ){							// 割引券ﾃﾞｰﾀ検索
				// FT-4800シリーズではPayData.wari_data[].ryokinの値で判断していたがFT-4000ではPayDataの構造変更
				// 請求額よりサービス券、掛売券、減算精算、振替精算、修正精算の金額を減算した値となる
				if( (Ryousyuu->DiscountData[i].DiscSyu == NTNET_SVS_T)   ||	// 割引種別=サービス券(時間)
					(Ryousyuu->DiscountData[i].DiscSyu == NTNET_SVS_M)   ||	// 割引種別=サービス券(料金)
					(Ryousyuu->DiscountData[i].DiscSyu == NTNET_KAK_T)   ||	// 割引種別=店割引(時間)
					(Ryousyuu->DiscountData[i].DiscSyu == NTNET_KAK_M)   ||	// 割引種別=店割引(料金)
					(Ryousyuu->DiscountData[i].DiscSyu == NTNET_GENGAKU) ||	// 割引種別：減算精算
					(Ryousyuu->DiscountData[i].DiscSyu == NTNET_FURIKAE) ||	// 割引種別：振替精算
					(Ryousyuu->DiscountData[i].DiscSyu == NTNET_SYUSEI_1)||	// 割引種別：修正精算(92)
					(Ryousyuu->DiscountData[i].DiscSyu == NTNET_SYUSEI_2)||	// 割引種別：修正精算(93)
					(Ryousyuu->DiscountData[i].DiscSyu == NTNET_SYUSEI_3)||	// 割引種別：修正精算(94)
// MH810100(S) Y.Watanabe 2019/11/15 車番チケットレス((LCD_IF対応)_追加))
					(Ryousyuu->DiscountData[i].DiscSyu == NTNET_SHOP_DISC_AMT)||	// 割引種別=買物割引(金額)
					(Ryousyuu->DiscountData[i].DiscSyu == NTNET_SHOP_DISC_TIME)||	// 割引種別=買物割引(時間)
// MH810100(E) Y.Watanabe 2019/11/15 車番チケットレス((LCD_IF対応)_追加))
					(Ryousyuu->DiscountData[i].DiscSyu == NTNET_TKAK_T)  ||	// 割引種別=多店舗(時間)
					(Ryousyuu->DiscountData[i].DiscSyu == NTNET_TKAK_M)  ){	// 割引種別=多店舗(料金)
					if(Ryousyuu->DiscountData[i].Discount ){				// 割引額あり
						edit_work += Ryousyuu->DiscountData[i].Discount;		// 割引額加算
					}
// GG124100(S) R.Endo 2022/07/21 車番チケットレス3.0 #6465 割引10種対応 [共通改善項目 No1526]
					// 前回精算までの使用済み割引金額もセットされていれば加算する
					edit_work += Ryousyuu->DiscountData[i].uDiscData.common.PrevUsageDiscount;
// GG124100(E) R.Endo 2022/07/21 車番チケットレス3.0 #6465 割引10種対応 [共通改善項目 No1526]
				}
			}
// 不具合修正(S) K.Onodera 2016/10/18 #1572 振替精算の領収証で振替額の金額にマイナスが印字されず、合計金額に振替額が反映されない。
			for( i=0; i<DETAIL_SYU_MAX; i++ ){
				// 振替あり？
				if( Ryousyuu->DetailData[i].DiscSyu == NTNET_FURIKAE_2 ){
					// 振替額あり？
					if( Ryousyuu->DetailData[i].uDetail.Furikae.Total ){
						edit_work += Ryousyuu->DetailData[i].uDetail.Furikae.Total;		// 割引額加算
					}
				}
			}
// 不具合修正(E) K.Onodera 2016/10/18 #1572 振替精算の領収証で振替額の金額にマイナスが印字されず、合計金額に振替額が反映されない。
			edit_work += (Ryousyuu->ppc_chusi_ryo +
// MH810100(S) K.Onodera  2020/01/29 車番チケットレス(再精算_領収証印字)
						  Ryousyuu->zenkai +
// MH810100(E) K.Onodera  2020/01/29 車番チケットレス(再精算_領収証印字)
						  Ryousyuu->BeforeTwari +
						  Ryousyuu->BeforeRwari +
						  Ryousyuu->BeforePwari);
						  
			if( Ryousyuu->WPrice > edit_work ) 								// 割引額より駐車料金の方が大きい場合
				edit_work = Ryousyuu->WPrice - edit_work;
			else
				edit_work = 0;
				
			if( Ryousyuu->chuusi == 1 && !p_proc_data->Prn_no_wk[9] && Ryousyuu->WFlag != 1 &&
				SuicaUseKindCheck( Ryousyuu->Electron_data.Suica.e_pay_kind ) ){
			  edit_cnt = RYOUSYUU_edit_goukei(Ryousyuu, pri_kind, p_proc_data);
			}else{
// MH810105(S) MH364301 インボイス対応
//				RYOUSYUU_edit_title_sub( 0, cEditwk1 );
				RYOUSYUU_edit_title_sub( Ryousyuu, 0, cEditwk1, p_proc_data );
// MH810105(E) MH364301 インボイス対応
				edit_cnt = RYOUSYUU_edit_content_sub(							// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,											// データ１："合計"
							edit_work,											// データ２：合計金額
							0,													// データ３：なし
							0,													// データ４："-"なし
							pri_kind											// データ５：印字先ﾌﾟﾘﾝﾀ
						);
			}
			break;
		case 125:				// 預り金額
			if( Ryousyuu->WInPrice ){
				edit_cnt = RYOUSYUU_edit_azukari( Ryousyuu, pri_kind, p_proc_data );
			}
			break;
		case 126:				// 釣り銭額
			if( Ryousyuu->WInPrice ){
				switch( Ryousyuu->chuusi ){
					case	0:	// 領収証（通常）
					case	3:	// 領収証（修正精算）
						edit_cnt = RYOUSYUU_edit_turisen( Ryousyuu, pri_kind, p_proc_data );
						break;

					case	1:	// 精算中止
						edit_cnt = SEICHUSI_edit_turisen( Ryousyuu, pri_kind, p_proc_data );
						break;
				}
			}
			break;
// 仕様変更(S) K.Onodera 2016/10/26 領収証フォーマット
		// 振替過払い金(払戻し)
		case 150:
			// 払戻し金あり？
			if( Ryousyuu->FRK_Return ){
				edit_cnt = Prn_edit_sikiri( pri_kind );
				sprintf( cEditwk1,"%s", Ryosyu_Content[11].print_data[11] );
// MH322914(S) K.Onodera 2016/12/22 [静的解析-572]書式指定子の予期する型と一致しない
//				sprintf( cMnydata,"%ld", Ryousyuu->FRK_Return );				// 払戻し額ﾃﾞｰﾀ編集
				sprintf( cMnydata,"%d", Ryousyuu->FRK_Return );					// 払戻し額ﾃﾞｰﾀ編集
// MH322914(E) K.Onodera 2016/12/22 [静的解析-572]書式指定子の予期する型と一致しない
				Camma_Set( (uchar *)cMnydata );									// ３桁区切り（”、”挿入）
				Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,											// 文字列１："振替額"
							"",													// 文字列２：""
							cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
							Pri_Tanni[PriT_YEN],								// 文字列４："円"
							pri_kind											// 印字先ﾌﾟﾘﾝﾀ
						);

				edit_cnt++;														// 編集行数更新
				edit_cnt += RYOUSYUU_edit_Kbrmsg( Ryousyuu, pri_kind, p_proc_data );
			}
			break;
// 仕様変更(E) K.Onodera 2016/10/26 領収証フォーマット
// 仕様変更(S) K.Onodera 2016/11/08 後日支払額フッター
		// 後日支払予定額
		case 151:
			for( i=0; i<DETAIL_SYU_MAX; i++ ){
				// 支払予定額あり？
				if( Ryousyuu->DetailData[i].DiscSyu == NTNET_FUTURE && 
					Ryousyuu->DetailData[i].uDetail.Future.Total ){
					edit_cnt += Prn_edit_space( pri_kind );		// スペース
					edit_cnt += Prn_edit_sikiri( pri_kind );		// 仕切り
					sprintf( cEditwk1,"%s", Ryosyu_Content[12].print_data[12] );
					sprintf( cMnydata,"%ld", Ryousyuu->DetailData[i].uDetail.Future.Total );
					Camma_Set( (uchar *)cMnydata );									// ３桁区切り（”、”挿入）
					Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
								cEditwk1,											// 文字列１："振替額"
								"",													// 文字列２：""
								cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
								Pri_Tanni[PriT_YEN],								// 文字列４："円"
								pri_kind											// 印字先ﾌﾟﾘﾝﾀ
							);

					edit_cnt++;														// 編集行数更新
					edit_cnt += RYOUSYUU_edit_Futuremsg( Ryousyuu, pri_kind, p_proc_data );
				}
			}
			break;
// 仕様変更(E) K.Onodera 2016/11/08 後日支払額フッター
		case 131:				// 精算中止時のﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ利用額
			if( Ryousyuu->ppc_chusi_ryo ){
				edit_work = Ryousyuu->Electron_data.Suica.E_Status.BIT.pay_cansel_work;
				if( edit_work && RyosyuPriInfo.BIT.ELEC_CHU_PRI ){
					 return ( edit_cnt );
				}
				// cEditwk1に「*ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ」か「*前回支払額」をセット
				sprintf( cEditwk1,"%s", 
				(  edit_work == 0 ? Ryosyu_Content[9].print_data[7]:Ryosyu_Content[9].print_data[21] ));
				edit_cnt = RYOUSYUU_edit_content_sub(						// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,										// データ１："*ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ"
							Ryousyuu->ppc_chusi_ryo,						// データ２：利用金額
							0,												// データ３：なし
							1,												// データ４："-"あり
							pri_kind										// データ４：印字先ﾌﾟﾘﾝﾀ
						);
				RyosyuPriInfo.BIT.ELEC_CHU_PRI = 1;
				
			}			
			break;
		case 132:				// 精算中止時の回数券利用額
			for( i = 0; i < WTIK_USEMAX ; i++ ){							// 割引券ﾃﾞｰﾀ検索
				if( Ryousyuu->DiscountData[i].DiscSyu == NTNET_CFRE ){		// 回数券ﾃﾞｰﾀ？
					edit_work	+= Ryousyuu->DiscountData[i].Discount;		//「回数券利用額」を加算していく
				}
			}
			if( edit_work ){
				edit_work2 = Ryousyuu->Electron_data.Suica.E_Status.BIT.pay_cansel_work;
				if( edit_work2 && RyosyuPriInfo.BIT.ELEC_CHU_PRI ){
					 return ( edit_cnt );
				}
				// cEditwk1に「*回数券」か「*前回支払額」をセット
				sprintf( cEditwk1,"%s", 
				(  edit_work2 == 0 ? Ryosyu_Content[10].print_data[0]:Ryosyu_Content[9].print_data[21] ));
				edit_cnt = RYOUSYUU_edit_content_sub(						// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,										// データ１："*回数券"
							edit_work,										// データ２：利用金額
							0,												// データ３：なし
							1,												// データ４："-"あり
							pri_kind										// データ５：印字先ﾌﾟﾘﾝﾀ
						);
				RyosyuPriInfo.BIT.ELEC_CHU_PRI = 1;

			}
			break;
		case 141:				// ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ利用明細
			// NOTE:テストプリントフラグだけでは不安なので、テストプリント入出庫年月日が同じ時はプリペイドデータを印字しない
			if( ( Ryousyuu->testflag == ON ) &&
				( Ryousyuu->TInTime.Year == 2000 && Ryousyuu->TInTime.Mon == 1 && Ryousyuu->TInTime.Day == 1 ) &&
				( Ryousyuu->TOutTime.Year == 2000 && Ryousyuu->TOutTime.Mon == 1 && Ryousyuu->TOutTime.Day == 1 )){
				break;
			}else{
				edit_cnt = RYOUSYUU_edit_pripay( Ryousyuu, pri_kind, p_proc_data, 1 );
			}
			break;
		case 142:				// 回数券利用明細
			edit_cnt = RYOUSYUU_edit_kaisuu( Ryousyuu, pri_kind, p_proc_data, 1 );
			break;
		case 144:				// 電子決済利用明細
			edit_cnt = RYOUSYUU_edit_suica( Ryousyuu, pri_kind, p_proc_data, 1 );
			break;
// MH810100(S) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
		// 車番(入力)
		case 160:
			sprintf( cEditwk1,"%s", Ryosyu_Content[13].print_data[13] );
			// 車番検索
			if( 0 == Ryousyuu->CarSearchFlg ){
				memcpy( cEditwk2, Ryousyuu->CarSearchData, 4 );	// 前4バイトのみ
			}
			Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,										// 文字列１：車番(入力)
						cEditwk2,										// 文字列２：駐車位置印字ﾃﾞｰﾀ
						pri_kind										// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;													// 編集行数更新
			break;
		// 車番(精算)
		case 161:
// MH810100(S) m.saito 2020/05/25 車番チケットレス（預り証印字修正）
			if( p_proc_data->Prn_no_wk[6] == 1 ){	// "車番(入力)"の印字設定あり
				sprintf( cEditwk1,"%s", Ryosyu_Content[14].print_data[14] );
			}
// MH810100(E) m.saito 2020/05/25 車番チケットレス（預り証印字修正）
			memcpy( cEditwk2, Ryousyuu->CarNumber, sizeof(Ryousyuu->CarNumber) );
			Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,										// 文字列１：車番(精算)
						cEditwk2,										// 文字列２：駐車位置印字ﾃﾞｰﾀ
						pri_kind										// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;													// 編集行数更新
			break;
		// 車番データID
		case 162:
		{
			for( usLen = 0; usLen < 32; usLen++ ){
				if( Ryousyuu->CarDataID[usLen] == 0x00 ){
					break;
				}
			}
			sprintf( cEditwk1,"%s", Ryosyu_Content[15].print_data[15] );
			if( usLen > CAR_ID_PRI_CNT_MAX ){
				memcpy( cEditwk2, Ryousyuu->CarDataID, CAR_ID_PRI_CNT_MAX );
				Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,										// 文字列１：車番データID
							cEditwk2,										// 文字列２：ﾃﾞｰﾀ
							pri_kind										// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;													// 編集行数更新
				memset( cEditwk2, 0, sizeof(cEditwk2) );
				memcpy( cEditwk2, &Ryousyuu->CarDataID[CAR_ID_PRI_CNT_MAX], (usLen - CAR_ID_PRI_CNT_MAX) );
				Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
							"",
							cEditwk2,										// 文字列２：ﾃﾞｰﾀ
							pri_kind										// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;													// 編集行数更新
			}else{
				memcpy( cEditwk2, Ryousyuu->CarDataID, sizeof(Ryousyuu->CarDataID) );
				Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,										// 文字列１：車番データID
							cEditwk2,										// 文字列２：ﾃﾞｰﾀ
							pri_kind										// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;													// 編集行数更新
			}
		}
		break;
// MH810100(E) K.Onodera 2019/11/25 車番チケットレス(領収証印字)
// MH810105(S) MH364301 インボイス対応
		case 197:				// 適用税率
			memset( cEditwk1, 0, sizeof(cEditwk1) );						// cEditwk1ｸﾘｱ（編集用ｴﾘｱとして使用）
			if ( Ryousyuu->WTaxRate != 0 ) {								// 消費税が0%表示の際は表示しない。
				sprintf( cEditwk1, "%s%d%s", InVoice_Prn[0], Ryousyuu->WTaxRate, InVoice_Prn[1]);	// cEditwk1に適用税率メッセージセット
				PCMD_CENTER( pri_kind );									// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
				PrnStr( cEditwk1, pri_kind );								// 印字ﾃﾞｰﾀ登録
				edit_cnt++;
			}
			break;
// MH810105(E) MH364301 インボイス対応
		case 198:				// 仕切り線
			if( CPrmSS[S_PRP][1] == 1 ){
				for( i = 0; i < WTIK_USEMAX ; i++ ){						// PPCﾃﾞｰﾀ検索
					if( Ryousyuu->DiscountData[i].DiscSyu == NTNET_PRI_W ){	// PPCﾃﾞｰﾀあり？
						edit_work	= 1;									//「ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ利用額」ありとしてデータセット
						break;
					}
				}
			}else{	// else if( CPrmSS[S_PRP][1] == 2 )
				for( i = 0; i < WTIK_USEMAX; i++ ){							// 回数券ﾃﾞｰﾀ検索
					if( Ryousyuu->DiscountData[i].DiscSyu == NTNET_FRE ){	// 回数券ﾃﾞｰﾀ？
						edit_work	= 1;									//「回数券利用額」ありとしてデータセット
						break;
					}
				}
			}
			if( edit_work != 0	||											// ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ/回数券利用あり
				(Ryousyuu->credit.pay_ryo != 0 && Ryousyuu->credit.cre_type == 0)||	// ｸﾚｼﾞｯﾄｶｰﾄﾞ利用あり
				Ryousyuu->Electron_data.Suica.e_pay_kind != 0 ){			// 電子媒体の利用あり
// MH810103 MH321800(S) ICクレジットみなし決済印字フォーマット変更対応
//// GG116200(S) Y.Tanizaki ICクレジット対応
//				// みなし決済かブランド不一致は印字しない
//				if(Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||
//				   Ryousyuu->Electron_data.Ec.E_Status.BIT.brand_mismatch == 1 ) {
//					break;
//				}
//// GG116200(E) Y.Tanizaki ICクレジット対応

				// ブランド不一致は印字しない
				if(Ryousyuu->Electron_data.Ec.E_Status.BIT.brand_mismatch == 1 ) {
					break;
				}
// MH810103 MH321800(E) ICクレジットみなし決済印字フォーマット変更対応
				edit_cnt = Prn_edit_sikiri( pri_kind );
			}
			break;
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
		case 212:				// 非課税媒体利用額
			edit_cnt = RYOUSYUU_edit_taxableDiscount( Ryousyuu, pri_kind, p_proc_data, NO );
			break;
		case 213:				// 課税対象媒体利用額
			edit_cnt = RYOUSYUU_edit_taxableDiscount( Ryousyuu, pri_kind, p_proc_data, YES );
			break;
		case 224:				// 合計金額(適用税率付)
			edit_cnt = RYOUSYUU_edit_totalAmount_taxRate( Ryousyuu, pri_kind, p_proc_data );
			break;
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
		default:
			break;
	}
	
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜利用内容＞印字ﾃﾞｰﾀ登録処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_content_sub							|*/
/*|																			|*/
/*|	PARAMETER		:	uchar *first_work	=	項目名						|*/
/*|																			|*/
/*|						ulong second_work	=	利用金額					|*/
/*|																			|*/
/*|						ulong third_work	=	枚数(回数券のみ)			|*/
/*|																			|*/
/*|						ulong fourth_work	=	金額へ"-"を付けるかどうか	|*/
/*|																			|*/
/*|						uchar pri_kind		=	印字先						|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	T.Namioka													|*/
/*|	Date	:	2008-08-18													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_content_sub( char *first_work, ulong second_work, ulong third_work, uchar fourth_work, uchar pri_kind )
{
	uchar edit_cnt = 0;
	
	memset( cMnydata, 0, sizeof( cMnydata ));

	sprintf( cMnydata,"%ld", second_work );								// 割引額編集
	Camma_Set( (uchar *)cMnydata );										// 割引額３桁区切り（”、”挿入）
	if( fourth_work )
		StrAdd( (uchar *)cMnydata , (uchar*)"-");						// 割引額に"-"を付加
	if( third_work )
		sprintf( prn_work,"%2d%s", third_work, Pri_Tanni[PriT_MAI] );	// 枚数ﾃﾞｰﾀ編集

	Str_Set2(															// -----印字ﾃﾞｰﾀ編集-----
				first_work,												// 文字列１：利用内容印字ﾃﾞｰﾀ
				(third_work == 0 ? "":prn_work),						// 文字列２：枚数印字ﾃﾞｰﾀ(回数券のみ)
				cMnydata,												// 文字列３：割引額印字ﾃﾞｰﾀ
				Pri_Tanni[PriT_YEN],									// 文字列４："円"
				pri_kind												// 印字先ﾌﾟﾘﾝﾀ
			);
	
	edit_cnt++;															// 編集行数更新

	return edit_cnt;
}

//[]----------------------------------------------------------------------[]
///	@brief			＜項目名＞編集処理
//[]----------------------------------------------------------------------[]
///	@param[inT]		uchar *type	: 0：合計印字<br>
///								  1：預り印字<br>
///								  2：釣銭印字
///	@param[in/OUT]	char  *buf	=	項目名格納領域
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			T.Namioka
///	@date			Create	: 2008/08/18<br>
///					Update	: 
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
// MH810105(S) MH364301 インボイス対応
//void	RYOUSYUU_edit_title_sub( uchar type, char *buf )
void	RYOUSYUU_edit_title_sub( Receipt_data *Ryousyuu, uchar type, char *buf, PRN_PROC_DATA *p_proc_data )
// MH810105(E) MH364301 インボイス対応
{
	
// MH810105(S) MH364301 インボイス対応
	int	i;
// MH810105(E) MH364301 インボイス対応
	uchar	pos = (uchar)prm_get(COM_PRM, S_PRN, 29, 1, (char)(type+1));
	RYO_CONTENT_INFO	*w = &Ryo_title_edit[type];
	
	pos = (uchar)(w->print_no+pos);
	if( pos >= (w+1)->print_no ){
		pos = w->print_no;
	}
	sprintf(buf, "%s", w->print_data[pos]);
// MH810105(S) MH364301 インボイス対応
	if( type == 0 && Ryousyuu != NULL && p_proc_data->Log_Edit == OFF ) {	// 合計印字の場合のみ文字列の最後に" ※"を印字する
		// 印字項目に【197】適用税率「※印は消費税率n%対象です。」が存在する場合は合計文字列の後に" ※"を付加する
		for( i = 0; i < 50; i++ ){
			if( prm_get( COM_PRM, S_RTP, (short)(4 + i), 3, 1 ) == 197 ){	// 17-0004以降の印字内容④⑤⑥取得
				if ( Ryousyuu->WTaxRate != 0 ) {							// 消費税が0以外の場合
					strcat(buf, " ※");									   // 197が存在する場合、" ※"付与
					break;
				}
			}
		}
	}
// MH810105(E) MH364301 インボイス対応
}

// MH810100(S) 2020/07/10 車番チケットレス(#4531 仕様変更 買物割引の領収証の印字を分けて印字する)
uchar RYOUSYUU_edit_Kaimono( Receipt_data* Ryousyuu, uchar pri_kind, PRN_PROC_DATA* p_proc_data )
{
	uchar	edit_flg = YES;		// 編集継続ﾌﾗｸﾞ
	uchar edit_cnt = 0;
	uchar	data_no;			// 買物割引合計ﾃﾞｰﾀ番号
	uchar	wari_no;			// 割引適用№①～⑩
	wari_tiket	wari_dt;
// MH810100(S) 2020/08/06 #4567【精算時に買上券を使用して車種切替を行い領収証をプリントすると、「お買物割引　B料金」ではなく「お買物割引　0円」で印字してしまう
	ushort	mise_no;			// 店Ｎｏ．
	uchar	yakuwari;			// 設定ﾃﾞｰﾀ（役割）
	uchar	kirikae;			// 設定ﾃﾞｰﾀ（車種切替）
// MH810100(E) 2020/08/06 #4567【精算時に買上券を使用して車種切替を行い領収証をプリントすると、「お買物割引　B料金」ではなく「お買物割引　0円」で印字してしまう
// GG124100(S) R.Endo 2022/07/21 車番チケットレス3.0 #6465 割引10種対応 [共通改善項目 No1526]
// // MH810100(S) 2020/08/31 車番チケットレス(#4774 【検証課指摘事項】再精算時に買物割引の格上げで領収証印字が不正になる（No.70）
// 	ushort	i;
// 	ushort	moto;
// // MH810100(E) 2020/08/31 車番チケットレス(#4774 【検証課指摘事項】再精算時に買物割引の格上げで領収証印字が不正になる（No.70）
// GG124100(E) R.Endo 2022/07/21 車番チケットレス3.0 #6465 割引10種対応 [共通改善項目 No1526]
	
	for( ; edit_flg ; ){	// 店割引印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟ

		switch( p_proc_data->Prn_no_data2 ){	// 印字項目？

		case	0:
// GG124100(S) R.Endo 2022/07/21 車番チケットレス3.0 #6465 割引10種対応 [共通改善項目 No1526]
// // MH810100(S) 2020/08/31 車番チケットレス(#4774 【検証課指摘事項】再精算時に買物割引の格上げで領収証印字が不正になる（No.70）
// 			moto = WTIK_USEMAX+1;
// 			for ( i = 0; i < WTIK_USEMAX; i++ ){
// 				// フラグがたっていて、店割引券の場合
// 				if( Ryousyuu->DiscountData[i].uDiscData.common.MoveMode == 1001 && 
// 					(Ryousyuu->DiscountData[i].DiscSyu == NTNET_SHOP_DISC_AMT || Ryousyuu->DiscountData[i].DiscSyu == NTNET_SHOP_DISC_TIME) ){
// 					moto = i;
// 					break;//発見
// 				}
// 			}
// 			if( moto < WTIK_USEMAX){
// 				for ( i = 0; i < WTIK_USEMAX; i++){
// 					// フラグが立っていて、店割引券で、発見した割引と駐車場№と種別が一致していた場合
// 					if( Ryousyuu->DiscountData[i].uDiscData.common.MoveMode == 2001 && 
// 						(Ryousyuu->DiscountData[i].DiscSyu == NTNET_SHOP_DISC_AMT || Ryousyuu->DiscountData[i].DiscSyu == NTNET_SHOP_DISC_TIME) &&
// 						Ryousyuu->DiscountData[i].DiscNo == Ryousyuu->DiscountData[moto].DiscNo && 
// 						Ryousyuu->DiscountData[i].ParkingNo == Ryousyuu->DiscountData[moto].ParkingNo ){
// 						// 加算する
// 						Ryousyuu->DiscountData[i].Discount += Ryousyuu->DiscountData[moto].Discount;
// 						Ryousyuu->DiscountData[i].DiscCount += Ryousyuu->DiscountData[moto].DiscCount;
// 						memset(&Ryousyuu->DiscountData[moto],0,sizeof(DISCOUNT_DATA));
// 						break;
// 					} 
// 				}
// 			}
// // MH810100(E) 2020/08/31 車番チケットレス(#4774 【検証課指摘事項】再精算時に買物割引の格上げで領収証印字が不正になる（No.70）
// GG124100(E) R.Endo 2022/07/21 車番チケットレス3.0 #6465 割引10種対応 [共通改善項目 No1526]
			for (data_no = 0; data_no < WTIK_USEMAX; data_no++) {					// 買物割引合計ﾃﾞｰﾀ検索
// GG124100(S) R.Endo 2022/09/30 車番チケットレス3.0 #6631 再精算時に、前回精算で使用した割引の追加の割引分が集計に反映されない
// 				disc_wari_conv( &Ryousyuu->DiscountData[data_no], &wari_dt );
				disc_wari_conv_new(&Ryousyuu->DiscountData[data_no], &wari_dt);
// GG124100(E) R.Endo 2022/09/30 車番チケットレス3.0 #6631 再精算時に、前回精算で使用した割引の追加の割引分が集計に反映されない
				if ( wari_dt.tik_syu == SHOPPING) {									// 買物割引合計ﾃﾞｰﾀ？
					sprintf(cMnydata,"%ld", wari_dt.ryokin);						// 割引額編集
					Camma_Set((uchar*)cMnydata);									// 割引額３桁区切り（”、”挿入）
					if (wari_dt.ryokin) {
						StrAdd((uchar*)cMnydata, (uchar*)"-");						// 割引額に"-"を付加
					}
					wari_no = (uchar)wari_dt.minute;								// 割引適用№セット
					if (rangechk( 1, KAIMONO_WARISYU_MAX, wari_no)) {				// 適用№範囲内（1～10）
						sprintf(cEditwk1,"お買物割引%d", wari_no);					// 適用№を付与する
					}
					else {															// 適用なし、または範囲外
						sprintf(cEditwk1,"お買物割引");								// 従来通りの印字
					}
// MH810100(S) 2020/08/06 #4567【精算時に買上券を使用して車種切替を行い領収証をプリントすると、「お買物割引　B料金」ではなく「お買物割引　0円」で印字してしまう
//					Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//								cEditwk1,											// 文字列１："お買物割引"
//								"",													// 文字列２：NULL
//								cMnydata,											// 文字列３：割引額印字ﾃﾞｰﾀ
//								Pri_Tanni[PriT_YEN],								// 文字列４："円"
//								pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//							);
//					edit_cnt++;														// 編集行数更新
					mise_no = wari_dt.syubetu;										// 「店Ｎｏ．」ﾃﾞｰﾀ取得

// GG124100(S) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない
					if ( CLOUD_CALC_MODE ) {	// クラウド料金計算モード
						yakuwari = Ryousyuu->DiscountData[data_no].uDiscData.common.DiscRole;
						kirikae = Ryousyuu->DiscountData[data_no].uDiscData.common.FeeKindSwitchSetting;
					} else {					// 通常料金計算モード
// GG124100(E) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない

					yakuwari= (uchar)CPrmSS[S_STO][ ( (mise_no-1)*3 ) + 1];			// 「店割引（店Ｎｏ．＝svs_syu）の役割」	設定ﾃﾞｰﾀ取得
// MH810100(S) 2020/08/20 車番チケットレス(#4756 店100のQRコードを翳して種別切替を行い領収証を発行すると、「0円」の印字がされてしまう)
// waon対応するまでコメントアウト
//					if (yakuwari == 0 && mise_no == (ushort)prm_get(COM_PRM ,S_ECR, 11, 4, 1)) {
//					// WAON割引の置き換え対象の場合
//						yakuwari = 4;
//					}
// MH810100(E) 2020/08/20 車番チケットレス(#4756 店100のQRコードを翳して種別切替を行い領収証を発行すると、「0円」の印字がされてしまう)
					kirikae	= (uchar)CPrmSS[S_STO][ ( (mise_no-1)*3 ) + 3];			// 「店割引（店Ｎｏ．＝svs_syu）の種別切替」設定ﾃﾞｰﾀ取得

// GG124100(S) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない
					}
// GG124100(E) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない

					if( (yakuwari != 0) && (kirikae == 0) ){
						//	役割＝割引　且つ　車種切替＝なし　の場合
						Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
									cEditwk1,										// 文字列１："お買物割引"
									"",												// 文字列２：NULL
									cMnydata,										// 文字列３：割引額印字ﾃﾞｰﾀ
									Pri_Tanni[PriT_YEN],							// 文字列４："円"
									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
								);
						edit_cnt++;		// 編集行数更新
					}else if( (yakuwari == 0) && (kirikae != 0) ){
						//	役割＝なし　且つ　車種切替＝あり　の場合
						Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
									cEditwk1,										// 文字列１：店Ｎｏ．印字ﾃﾞｰﾀ
									"",												// 文字列２：NULL
									SyubetuRyokin[kirikae],							// 文字列３：料金種別印字ﾃﾞｰﾀ
									"",												// 文字列４：なし
									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
								);
						edit_cnt++;													// 編集行数更新
					}
					else if( (yakuwari != 0) && (kirikae != 0) ){
						//	役割＝割引　且つ　車種切替＝あり　の場合
						Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
									cEditwk1,										// 文字列１：店Ｎｏ．印字ﾃﾞｰﾀ
									"",												// 文字列２：枚数印字ﾃﾞｰﾀ
									SyubetuRyokin[kirikae],							// 文字列３：料金種別印字ﾃﾞｰﾀ
									"",												// 文字列４：なし
									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
								);
						edit_cnt++;													// 編集行数更新
						Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
									"",												// 文字列１：なし
									"",												// 文字列２：なし
									cMnydata,										// 文字列３：割引額印字ﾃﾞｰﾀ
									Pri_Tanni[PriT_YEN],							// 文字列４："円"
									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
								);
						edit_cnt++;													// 編集行数更新
					}
// MH810100(E) 2020/08/06 #4567【精算時に買上券を使用して車種切替を行い領収証をプリントすると、「お買物割引　B料金」ではなく「お買物割引　0円」で印字してしまう
					break;															// 買物割引は1つしか存在しない
				}
			}
			p_proc_data->Prn_no_data1 = data_no;									// 
			p_proc_data->Prn_no_data2	= 1;								// 次編集項目番号ｾｯﾄ
			break;
		case 1:
			for (data_no = 0; data_no < WTIK_USEMAX; data_no++) {					// 買物割引合計ﾃﾞｰﾀ検索
// GG124100(S) R.Endo 2022/07/21 車番チケットレス3.0 #6465 割引10種対応 [共通改善項目 No1526]
// 				disc_wari_conv( &Ryousyuu->DiscountData[data_no], &wari_dt );
				disc_wari_conv_prev( &Ryousyuu->DiscountData[data_no], &wari_dt );
// GG124100(E) R.Endo 2022/07/21 車番チケットレス3.0 #6465 割引10種対応 [共通改善項目 No1526]
				if ( wari_dt.tik_syu == C_SHOPPING) {									// 買物割引合計ﾃﾞｰﾀ？
					sprintf(cMnydata,"%ld", wari_dt.ryokin);						// 割引額編集
					Camma_Set((uchar*)cMnydata);									// 割引額３桁区切り（”、”挿入）
					if (wari_dt.ryokin) {
						StrAdd((uchar*)cMnydata, (uchar*)"-");						// 割引額に"-"を付加
					}
					wari_no = (uchar)wari_dt.minute;								// 割引適用№セット
					if (rangechk( 1, KAIMONO_WARISYU_MAX, wari_no)) {				// 適用№範囲内（1～10）
						sprintf(cEditwk1,"*お買物割引%d", wari_no);					// 適用№を付与する
					}
					else {															// 適用なし、または範囲外
						sprintf(cEditwk1,"*お買物割引");								// 従来通りの印字
					}
// MH810100(S) 2020/08/06 #4567【精算時に買上券を使用して車種切替を行い領収証をプリントすると、「お買物割引　B料金」ではなく「お買物割引　0円」で印字してしまう
//					Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//								cEditwk1,											// 文字列１："お買物割引"
//								"",													// 文字列２：NULL
//								cMnydata,											// 文字列３：割引額印字ﾃﾞｰﾀ
//								Pri_Tanni[PriT_YEN],								// 文字列４："円"
//								pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//							);
//					edit_cnt++;														// 編集行数更新
					mise_no = wari_dt.syubetu;										// 「店Ｎｏ．」ﾃﾞｰﾀ取得

// GG124100(S) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない
					if ( CLOUD_CALC_MODE ) {	// クラウド料金計算モード
						yakuwari = Ryousyuu->DiscountData[data_no].uDiscData.common.DiscRole;
						kirikae = Ryousyuu->DiscountData[data_no].uDiscData.common.FeeKindSwitchSetting;
					} else {					// 通常料金計算モード
// GG124100(E) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない

					yakuwari= (uchar)CPrmSS[S_STO][ ( (mise_no-1)*3 ) + 1];			// 「店割引（店Ｎｏ．＝svs_syu）の役割」	設定ﾃﾞｰﾀ取得
// MH810100(S) 2020/08/20 車番チケットレス(#4756 店100のQRコードを翳して種別切替を行い領収証を発行すると、「0円」の印字がされてしまう)
// waon対応するまでコメントアウト
//					if (yakuwari == 0 && mise_no == (ushort)prm_get(COM_PRM ,S_ECR, 11, 4, 1)) {
//					// WAON割引の置き換え対象の場合
//						yakuwari = 4;
//					}
// MH810100(E) 2020/08/20 車番チケットレス(#4756 店100のQRコードを翳して種別切替を行い領収証を発行すると、「0円」の印字がされてしまう)
					kirikae	= (uchar)CPrmSS[S_STO][ ( (mise_no-1)*3 ) + 3];			// 「店割引（店Ｎｏ．＝svs_syu）の種別切替」設定ﾃﾞｰﾀ取得

// GG124100(S) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない
					}
// GG124100(E) R.Endo 2022/08/19 車番チケットレス3.0 #6520 使用したサービス券の情報が領収証に印字されない

					if( (yakuwari != 0) && (kirikae == 0) ){
						//	役割＝割引　且つ　車種切替＝なし　の場合
						Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
									cEditwk1,										// 文字列１："お買物割引"
									"",												// 文字列２：NULL
									cMnydata,										// 文字列３：割引額印字ﾃﾞｰﾀ
									Pri_Tanni[PriT_YEN],							// 文字列４："円"
									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
								);
						edit_cnt++;		// 編集行数更新
					}else if( (yakuwari == 0) && (kirikae != 0) ){
						//	役割＝なし　且つ　車種切替＝あり　の場合
						Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
									cEditwk1,										// 文字列１：店Ｎｏ．印字ﾃﾞｰﾀ
									"",												// 文字列２：NULL
									SyubetuRyokin[kirikae],							// 文字列３：料金種別印字ﾃﾞｰﾀ
									"",												// 文字列４：なし
									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
								);
						edit_cnt++;													// 編集行数更新
					}
					else if( (yakuwari != 0) && (kirikae != 0) ){
						//	役割＝割引　且つ　車種切替＝あり　の場合
						Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
									cEditwk1,										// 文字列１：店Ｎｏ．印字ﾃﾞｰﾀ
									"",												// 文字列２：枚数印字ﾃﾞｰﾀ
									SyubetuRyokin[kirikae],							// 文字列３：料金種別印字ﾃﾞｰﾀ
									"",												// 文字列４：なし
									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
								);
						edit_cnt++;													// 編集行数更新
						Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
									"",												// 文字列１：なし
									"",												// 文字列２：なし
									cMnydata,										// 文字列３：割引額印字ﾃﾞｰﾀ
									Pri_Tanni[PriT_YEN],							// 文字列４："円"
									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
								);
						edit_cnt++;													// 編集行数更新
					}
// MH810100(E) 2020/08/06 #4567【精算時に買上券を使用して車種切替を行い領収証をプリントすると、「お買物割引　B料金」ではなく「お買物割引　0円」で印字してしまう
					break;															// 買物割引は1つしか存在しない
				}
			}
			edit_flg					= NO;						// 編集終了
			break;
		}
	}
	// 編集完了
	p_proc_data->Prn_no_data1	= 0;
	p_proc_data->Prn_no_data2	= 0;
	return edit_cnt;
}
// MH810100(E) 2020/07/10 車番チケットレス(#4531 仕様変更 買物割引の領収証の印字を分けて印字する)

/*[]-----------------------------------------------------------------------[]*/
/*|		預り証印字ﾃﾞｰﾀ編集処理												|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	AZUKARI_edit( *Azukari, pri_kind, *p_proc_data )	|*/
/*|																			|*/
/*|	PARAMETER		:	Azukari_data	*Azukari	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-14													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	AZUKARI_edit( Azukari_data *Azukari, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	ttl_no;		// 表題印字ﾃﾞｰﾀNo.
	uchar	para;
	char	title[16];
	ST_OIBAN *oiban;
// MH810100(S) Y.Yamauchi 2020/02/18 車番チケットレス（預り証印字修正）
	ushort	usLen;
// MH810100(E) Y.Yamauchi 2020/02/18 車番チケットレス（預り証印字修正）

	/*------	＜表題＞編集	------*/

	if( Azukari->WFlag == OFF )									// 通常 or 復電？
	{
		//	通常印字の場合
		ttl_no = 6;
	}
	else{
		//	復電印字の場合
		ttl_no = 7;
	}

	Prn_edit_Title	(											// 「預り証」表題印字ﾃﾞｰﾀ編集
						Ryousyuu_Ttl_Prn[ttl_no],
						FONT_K_YOKOBAI,
						pri_kind
					);

	if( Azukari->Syusei ){										// 修正精算あり
		Prn_edit_Title	(										// 表題印字ﾃﾞｰﾀ編集
							Ryousyuu_Ttl_Prn[15],
							FONT_K_YOKOBAI,
							pri_kind
						);
	}

	/*------	１行空白	------*/
	Prn_edit_space( pri_kind );

	/*------	＜預り証追番＞編集	------*/
	if( CountSel(&Azukari->Oiban) != 0 &&
		prm_get(COM_PRM, S_SYS, 13, 1, 1) == 0){				// 個別追番
		// 追番が０でない場合
		OibanSet( cEditwk1, CountSel(&Azukari->Oiban), 3 );		// 預り証追番印字ﾃﾞｰﾀ編集
		Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
					"",											// 文字列１：空白
					cEditwk1,									// 文字列２：追番印字ﾃﾞｰﾀ
					pri_kind									// 印字先ﾌﾟﾘﾝﾀ
				);
	}
	if(prm_get(COM_PRM, S_SYS, 13, 1, 1) == 1){
		oiban = &Azukari->Oiban;
	}
	else {
		oiban = &Azukari->Oiban2;
	}

	/*------	＜機械NO.／精算方式／追番＞編集	------*/
	KikaiNoSet( cEditwk1, Azukari->Kikai_no );					// 機械NO.印字ﾃﾞｰﾀ編集

	if( Azukari->Syusei ){										// 修正精算あり
		strcat( cEditwk1, "（修正）" );							// cEditwk1←（修正）ﾃﾞｰﾀ追加
	}

	SeisanKindSet( cEditwk2, Azukari->Seisan_kind );			// 精算方式編集

	switch( Azukari->chuusi ){

		case	0:	// 通常

			OibanSet(	cEditwk3,								// 精算追番編集(精算完了)
						CountSel(oiban),
						1 );
			break;

		case	1:	// 精算中止

			OibanSet(	cEditwk3,								// 中止追番編集(精算中止)
						CountSel(oiban),
						2 );

			break;

		default:	// その他

			OibanSet(	cEditwk3,								// 追番部分を空白とする
						0,
						0 );
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)

	}

	strcat( cEditwk2, cEditwk3 );								// cEditwk2（精算方式）←追番印字ﾃﾞｰﾀ追加

	Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
				cEditwk1,										// 文字列１：機械NO.印字ﾃﾞｰﾀ
				cEditwk2,										// 文字列２：精算方式、追番印字ﾃﾞｰﾀ
				pri_kind										// 印字先ﾌﾟﾘﾝﾀ
			);

// MH810100(S) m.saito 2020/05/25 車番チケットレス（#4182 預り証の印字内容不正）
//	/*------	＜時刻＞編集	------*/
//	Prn_edit_Date( cEditwk1, &Azukari->TTime );					// cEditwk1←発行時刻印字ﾃﾞｰﾀ
//
//	Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
//				"精算時刻",										// 文字列１："精算時刻"
//				cEditwk1,										// 文字列２：日時印字ﾃﾞｰﾀ
//				pri_kind										// 印字先ﾌﾟﾘﾝﾀ
//			);
	/*------	＜車番(入力)＞編集	------*/
	memset( cEditwk2, 0, sizeof(cEditwk2));
	// 車番検索
	if( 0 == Azukari->CarSearchFlg ){
		memcpy( cEditwk2, Azukari->CarSearchData, 4 );	// 前4バイトのみ
	}
	Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
				"車番(入力)",									// 文字列１：車番(入力)
				cEditwk2,										// 文字列２：車番(入力)データ
				pri_kind										// 印字先ﾌﾟﾘﾝﾀ
			);
// MH810100(E) m.saito 2020/05/25 車番チケットレス（#4182 預り証の印字内容不正）

// MH810100(S) Y.Yamauchi 2019/02/18 車番チケットレス（預り証印字修正）
	/*------	＜車番(精算)＞編集	------*/
// MH810100(S) m.saito 2020/05/25 車番チケットレス（#4182 預り証の印字内容不正）
		memset( cEditwk2, 0, sizeof(cEditwk2));
// MH810100(E) m.saito 2020/05/25 車番チケットレス（#4182 預り証の印字内容不正）
		memcpy( cEditwk2, Azukari->CarNumber, 4 );	// 前4バイトのみ
		Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
					"車番(精算)",									// 文字列１：車番(精算)
					cEditwk2,										// 文字列２：車番(精算)データ
					pri_kind										// 印字先ﾌﾟﾘﾝﾀ
				);

	/*------	＜車番データID＞編集	------*/
// MH810100(S) Y.Yamauchi 2020/02/21 #3905 預り証の車番センターIDが正しく表示されない
	memset( cEditwk2, 0, sizeof(cEditwk2));
// MH810100(E) Y.Yamauchi 2020/02/21 #3905 預り証の車番センターIDが正しく表示されない	
	for( usLen = 0; usLen < 32; usLen++ ){
		if( Azukari->CarDataID[usLen] == 0x00 ){
			break;
		}
	}
	sprintf( cEditwk1,"%s", Ryosyu_Content[15].print_data[15] );
	if( usLen > CAR_ID_PRI_CNT_MAX ){
// MH810100(S) Y.Yamauchi 2020/02/21 #3905 預り証の車番センターIDが正しく表示されない
		memcpy( cEditwk2, Azukari->CarDataID, CAR_ID_PRI_CNT_MAX );
// MH810100(E) Y.Yamauchi 2020/02/21 #3905 預り証の車番センターIDが正しく表示されない
		Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,										// 文字列１：車番データID
					cEditwk2,										// 文字列２：ﾃﾞｰﾀ
					pri_kind										// 印字先ﾌﾟﾘﾝﾀ
				);
		memset( cEditwk2, 0, sizeof(cEditwk2) );
		memcpy( cEditwk2, &Azukari->CarDataID[CAR_ID_PRI_CNT_MAX], (usLen - CAR_ID_PRI_CNT_MAX) );
		Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
					"",
					cEditwk2,										// 文字列２：ﾃﾞｰﾀ
					pri_kind										// 印字先ﾌﾟﾘﾝﾀ
				);
	}else{
		memcpy( cEditwk2, Azukari->CarDataID, sizeof(Azukari->CarDataID) );
		Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,										// 文字列１：車番データID
					cEditwk2,										// 文字列２：ﾃﾞｰﾀ
					pri_kind										// 印字先ﾌﾟﾘﾝﾀ
				);
	}
// MH810100(E) Y.Yamauchi 2019/02/18 車番チケットレス（預り証印字修正）
	/*------	＜駐車位置番号＞編集	------*/
	if( ( CPrmSS[S_PRN][16] == 1 ) && (Azukari->WPlace != 0) ){	// 「車室No.印字有無＝印字する」　且つ　車室No.≠０？

		Prn_edit_pkposi( cEditwk1, Azukari->WPlace, 0 );		// cEditwk1←駐車位置印字ﾃﾞｰﾀ
		Prn_edit_sya_syu( cEditwk2 , Azukari->Lok_No, 0, 0);	// cEditwk2←車室番号＆車種ﾃﾞｰﾀ

		Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
					cEditwk2,									// 文字列１：車室番号＆車種ﾃﾞｰﾀ
					cEditwk1,									// 文字列２：駐車位置印字ﾃﾞｰﾀ
					pri_kind									// 印字先ﾌﾟﾘﾝﾀ
				);
	}

// MH810100(S) m.saito 2020/05/25 車番チケットレス（#4182 預り証の印字内容不正）
	/*------	＜時刻＞編集	------*/
	Prn_edit_Date( cEditwk1, &Azukari->TTime );					// cEditwk1←発行時刻印字ﾃﾞｰﾀ

	Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
				"精算時刻",										// 文字列１："精算時刻"
				cEditwk1,										// 文字列２：日時印字ﾃﾞｰﾀ
				pri_kind										// 印字先ﾌﾟﾘﾝﾀ
			);
// MH810100(E) m.saito 2020/05/25 車番チケットレス（#4182 預り証の印字内容不正）

	/*------	＜合計金額＞編集	------*/
// MH810105(S) MH364301 インボイス対応
//	RYOUSYUU_edit_title_sub( 0, title );
	RYOUSYUU_edit_title_sub( NULL, 0, title, p_proc_data );
// MH810105(E) MH364301 インボイス対応
	Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
							title,								// 印字項目	："合計"
							Azukari->WTotalPrice,				// 印字ﾃﾞｰﾀ	：領収金額
							"",									// 単位１	：NULL
							Pri_Tanni[PriT_YEN],				// 単位２	：円
							pri_kind							// 印字先ﾌﾟﾘﾝﾀ
						);

	/*------	＜現金入金額＞編集	------*/
// MH810105(S) MH364301 インボイス対応
//	RYOUSYUU_edit_title_sub( 1, title );
	RYOUSYUU_edit_title_sub( NULL, 1, title, p_proc_data );
// MH810105(E) MH364301 インボイス対応
	Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
							title,								// 印字項目	："お預り"
							Azukari->WInPrice,					// 印字ﾃﾞｰﾀ	：現金入金額
							"",									// 単位１	：NULL
							Pri_Tanni[PriT_YEN],				// 単位２	：円
							pri_kind							// 印字先ﾌﾟﾘﾝﾀ
						);

	/*------	＜釣銭額＞編集	------*/
// MH810105(S) MH364301 インボイス対応
//	RYOUSYUU_edit_title_sub( 2, title );
	RYOUSYUU_edit_title_sub( NULL, 2, title, p_proc_data );
// MH810105(E) MH364301 インボイス対応
	Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
							title,								// 印字項目	："お釣り"
							(Azukari->WChgPrice+Azukari->WFusoku),// 印字ﾃﾞｰﾀ	：釣銭金額
							"",									// 単位１	：NULL
							Pri_Tanni[PriT_YEN],				// 単位２	：円
							pri_kind							// 印字先ﾌﾟﾘﾝﾀ
						);

	/*------	＜払戻金額＞編集	------*/
	if( Azukari->Syusei == 2 ){

		/*-----		仕切り行	-----*/
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
		PrnStr( SikiriLine_Prn[5], pri_kind );					// 仕切り行印字ﾃﾞｰﾀ登録
	}

	Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
							"払戻額",							// 印字項目	："払戻額"
							Azukari->WChgPrice,					// 印字ﾃﾞｰﾀ	：払戻金額
							"",									// 単位１	：NULL
							Pri_Tanni[PriT_YEN],				// 単位２	：円
							pri_kind							// 印字先ﾌﾟﾘﾝﾀ
						);

	/*------	＜払出不足金額＞編集	------*/
// MH810105(S) MH364301 インボイス対応
//	RYOUSYUU_edit_title_sub( 4, title );
	RYOUSYUU_edit_title_sub( NULL, 4, title, p_proc_data );
// MH810105(E) MH364301 インボイス対応
	Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
							title,								// 印字項目	："払出不足額"
							Azukari->WFusoku,					// 印字ﾃﾞｰﾀ	：払出不足金額
							"",									// 単位１	：NULL
							Pri_Tanni[PriT_YEN],				// 単位２	：円
							pri_kind							// 印字先ﾌﾟﾘﾝﾀ
						);
	
	/*------	＜仕切り行＞編集	------*/
	PCMD_LEFT( pri_kind );
	PrnStr( SikiriLine_Prn[0], pri_kind );						// 仕切り行印字ﾃﾞｰﾀ登録

	/*------	＜預り証印字固定ﾒｯｾｰｼﾞ＞編集	------*/

	para = (uchar)CPrmSS[S_PRN][14];							// 「預り証固定ﾒｯｾｰｼﾞ番号」設定ﾃﾞｰﾀ取得

	switch( para ){

		case	90:
			Prn_edit_TurikireMsg( 1, pri_kind );				// 「釣り切れ固定ﾒｯｾｰｼﾞ１」印字ﾃﾞｰﾀ編集
			break;

		case	91:
			Prn_edit_TurikireMsg( 2, pri_kind );				// 「釣り切れ固定ﾒｯｾｰｼﾞ２」印字ﾃﾞｰﾀ編集
			break;

		case	92:
			Prn_edit_TurikireMsg( 3, pri_kind );				// 「釣り切れ固定ﾒｯｾｰｼﾞ３」印字ﾃﾞｰﾀ編集
			break;

		case	93:
			Prn_edit_TurikireMsg( 4, pri_kind );				// 「釣り切れ固定ﾒｯｾｰｼﾞ４」印字ﾃﾞｰﾀ編集
			break;

		case	200:
			Prn_edit_TurikireMsg( 5, pri_kind );				// 「釣り切れ固定ﾒｯｾｰｼﾞ５」印字ﾃﾞｰﾀ編集
			break;
		case	204:	// ＜預り証フッター＞編集処理
			Prn_edit_AzuFtr_edit( pri_kind );
			break;
	}

	/*------	編集終了	------*/
	p_proc_data->Final = ON;									// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ

}

/*[]-----------------------------------------------------------------------[]*/
/*|		受付券印字ﾃﾞｰﾀ編集処理												|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	UKETUKE_edit( *Uketuke, pri_kind, *p_proc_data )	|*/
/*|																			|*/
/*|	PARAMETER		:	Uketuke_data	*Uketuke	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-14													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	UKETUKE_edit( Uketuke_data *Uketuke, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	len1;	// 駐車位置番号印字ﾃﾞｰﾀ文字数
	uchar	len2;	// 文字数計算ﾜｰｸ
	uchar	i;		// ﾙｰﾌﾟ処理ｶｳﾝﾀｰ
	ushort	pword;	// ﾊﾟｽﾜｰﾄﾞ
	uchar	space;

	uchar	line_cnt;	// 行数
	char	noword[36];
	memset(noword, 0x20, 36);


	/*------	＜再発行日時＞編集	------*/
	if(	Repri_Time.Year != 0 || Repri_Time.Mon != 0 || Repri_Time.Day != 0 || Repri_Time.Hour != 0 || Repri_Time.Min != 0 ){

		// 再発行日時がｾｯﾄされている場合
		Prn_edit_RePriDate( pri_kind );							// 再発行日時印字ﾃﾞｰﾀ編集
	}

	if( Repri_kakari_no != 0 ){
	/*------	＜係員NO.＞編集	------*/
		(void)Prn_edit_KakariNo( (ushort)Repri_kakari_no, pri_kind );
	}



	/*------	＜表題＞編集	------*/
	Prn_edit_Title	(											// 表題（"駐車証明書"）印字ﾃﾞｰﾀ編集
						Ryousyuu_Ttl_Prn[16],
						FONT_K_YOKOBAI,
						pri_kind
					);

	/*------	１行空白	------*/
	if (pri_kind == R_PRI) {
		Prn_edit_space( pri_kind );
	}

	/*------	＜機械NO.／追番＞編集	------*/
	KikaiNoSet(	cEditwk1, Uketuke->Kikai_no );					// 機械NO.印字ﾃﾞｰﾀ編集

	OibanSet( cEditwk2, Uketuke->Oiban, 4 );					// 追番印字ﾃﾞｰﾀ編集

	if(prm_get(COM_PRM, S_TYP, 62, 1, 3))
	{
		memset(cEditwk3, 0, sizeof(cEditwk3));
		sprintf(cEditwk3, "発行No.%d", Uketuke->PrnCnt);
		Str_Set2(												// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,									// 文字列１：機械NO.印字データ
					cEditwk3,									// 文字列２：発行No印字ﾃﾞｰﾀ
					"",											// 文字列３：印字なし
					cEditwk2,									// 文字列４：追番印字ﾃﾞｰﾀ
					pri_kind									// 印字先ﾌﾟﾘﾝﾀ
				);
	}
	else
	{
		Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,									// 文字列１：機械NO.印字ﾃﾞｰﾀ
					cEditwk2,									// 文字列２：追番印字ﾃﾞｰﾀ
					pri_kind									// 印字先ﾌﾟﾘﾝﾀ
				);
	}

	/*------	＜発行時刻＞編集	------*/
	Prn_edit_Date( cEditwk1, &Uketuke->ISTime );				// cEditwk1←発行時刻印字ﾃﾞｰﾀ

	Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
				"発行時刻",										// 文字列１："発行時刻"
				cEditwk1,										// 文字列２：現在日時印字ﾃﾞｰﾀ
				pri_kind										// 印字先ﾌﾟﾘﾝﾀ
			);

	/*------	＜入庫時刻＞編集	------*/
	Prn_edit_Date( cEditwk1, &Uketuke->TTime );					// cEditwk1←入庫時刻印字ﾃﾞｰﾀ

	Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
				"入庫時刻",										// 文字列１："入庫時刻"
				cEditwk1,										// 文字列２：入庫日時印字ﾃﾞｰﾀ
				pri_kind										// 印字先ﾌﾟﾘﾝﾀ
			);

	/*------	１行空白	------*/
	if (pri_kind == R_PRI) {
		Prn_edit_space( pri_kind );
	}

	/*------	＜駐車位置番号＞編集	------*/
	PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定

	Prn_edit_sya_syu( cEditwk1 , Uketuke->Lok_No , 0, 0);		// cEditwk2←車室番号＆車種ﾃﾞｰﾀ
	PrnCmdLen(													// "車室番号"　印字ﾃﾞｰﾀ登録
				(uchar *)cEditwk1,
				18,
				pri_kind );

	len1 = Prn_edit_pkposi( cEditwk1, Uketuke->WPlace, 0 );		// cEditwk1←駐車位置印字ﾃﾞｰﾀ
	len2 = (uchar)(8 - len1);
	memset( cEditwk2,0,sizeof(cEditwk2) );
	if( len2 != 0 ){
		for( i = 0 ; i < len2 ; i++ ){							// cEditwk2←駐車位置ﾃﾞｰﾀ印字の右詰めに必要なｽﾍﾟｰｽ
			cEditwk2[i] = 0x20;
		}
	}
	strcat( cEditwk2, cEditwk1 );								// cEditwk2←駐車位置印字ﾃﾞｰﾀ追加
	len2 = (uchar)strlen( cEditwk2 );							// cEditwk2文字数検索
	cEditwk2[len2] = LF;
	len2++;

	PCMD_FONT_A_Y( pri_kind );									// ﾌｫﾝﾄＡ（横倍角）指定

	PrnCmdLen( (uchar *)cEditwk2, (ushort)(len2), pri_kind );	// 駐車位置番号　印字ﾃﾞｰﾀ登録

	if( pri_kind == R_PRI ){
		inc_dct( MOV_PRNT_CNT, 1 );								// 「ﾚｼｰﾄﾌﾟﾘﾝﾀ印字行数」	動作ｶｳﾝﾄ＋１
		GyouCnt_r++;											// 送信済み印字ﾃﾞｰﾀ行数（ﾚｼｰﾄ）＋１
	}
	else{
		inc_dct( MOV_JPNT_CNT, 1 );								// 「ｼﾞｬｰﾅﾙﾌﾟﾘﾝﾀ印字行数」	動作ｶｳﾝﾄ＋１
		GyouCnt_j++;											// 送信済み印字ﾃﾞｰﾀ行数（ｼﾞｬｰﾅﾙ）＋１
	}

	/*------	＜パスワード＞編集	------*/
	pword = Uketuke->Pword;
	if( pword != 0 ){											// ﾊﾟｽﾜｰﾄﾞあり？

		PCMD_FONT_A_N( pri_kind );								// ﾌｫﾝﾄＡ（通常）指定
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
		PrnCmdLen(												// "暗証番号"　印字ﾃﾞｰﾀ登録
					(uchar *)"暗証番号                  ",
					26,
					pri_kind );

		if( pword > 9999 ){
			pword = 9999;										// ４桁を超える場合、９９９９をｾｯﾄ
		}
		memset( cEditwk1,0,sizeof(cEditwk1) );
		sprintf( cEditwk1,"%04d",pword );						// cEditwk1←ﾊﾟｽﾜｰﾄﾞ印字ﾃﾞｰﾀ
		cEditwk1[4] = LF;

		PCMD_FONT_A_Y( pri_kind );								// ﾌｫﾝﾄＡ（横倍角）指定

		PrnCmdLen( (uchar *)cEditwk1, 5, pri_kind );			// ﾊﾟｽﾜｰﾄﾞ　印字ﾃﾞｰﾀ登録

		if( pri_kind == R_PRI ){
			inc_dct( MOV_PRNT_CNT, 1 );							// 「ﾚｼｰﾄﾌﾟﾘﾝﾀ印字行数」	動作ｶｳﾝﾄ＋１
			GyouCnt_r++;										// 送信済み印字ﾃﾞｰﾀ行数（ﾚｼｰﾄ）＋１
		}
		else{
			inc_dct( MOV_JPNT_CNT, 1 );							// 「ｼﾞｬｰﾅﾙﾌﾟﾘﾝﾀ印字行数」	動作ｶｳﾝﾄ＋１
			GyouCnt_j++;										// 送信済み印字ﾃﾞｰﾀ行数（ｼﾞｬｰﾅﾙ）＋１
		}
	}

	// ｼﾞｬｰﾅﾙ印字ならここで終了
	if (pri_kind != R_PRI) {
		/*------	編集終了	------*/
		p_proc_data->Final = ON;									// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
		return;
	}

	PCMD_FONT_A_N( pri_kind );									// ﾌｫﾝﾄＡ（通常）指定
	PCMD_FONT_K_N( pri_kind );									// 漢字（通常）指定

	// ﾃﾞｰﾀ編集
	if (AcceptFooter_Rsts == 0) {
		line_cnt = (uchar)prm_get(COM_PRM, S_PRN, 17, 1, 3);

		if ( line_cnt ) {
			// 受付券ﾌｯﾀｰありの場合
			for (line_cnt = 0; line_cnt < 4; line_cnt++) {
				if (memcmp(noword, &AcceptFooter_Data[line_cnt][0], 36) != 0) {
					Prn_edit_space(pri_kind);							// 空白
					memset(cEditwk1, 0, sizeof(cEditwk1));
					memcpy(cEditwk1, (char*)&AcceptFooter_Data[line_cnt][0], 36);
					cEditwk1[36] = LF;

					PrnCmdLen((uchar*)cEditwk1, 36, pri_kind);			// 受付券ﾌｯﾀｰ 印字ﾃﾞｰﾀ登録

					if( pri_kind == R_PRI ){
						inc_dct( MOV_PRNT_CNT, 1 );						// 「ﾚｼｰﾄﾌﾟﾘﾝﾀ印字行数」	動作ｶｳﾝﾄ＋１
						GyouCnt_r++;									// 送信済み印字ﾃﾞｰﾀ行数（ﾚｼｰﾄ）＋１
					}
					else{
						inc_dct( MOV_JPNT_CNT, 1 );						// 「ｼﾞｬｰﾅﾙﾌﾟﾘﾝﾀ印字行数」	動作ｶｳﾝﾄ＋１
						GyouCnt_j++;									// 送信済み印字ﾃﾞｰﾀ行数（ｼﾞｬｰﾅﾙ）＋１
					}
				}
			}
			Prn_edit_space(pri_kind);									// 空白
		}
	}

	Prn_edit_space( pri_kind );									// 空白
	Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
				"注意：駐車証明書を失くさないように",			// 文字列１："注意：受付券を失くさないように気を"
				"",												// 文字列２：空白
				pri_kind										// 印字先ﾌﾟﾘﾝﾀ
			);
	Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
				"気をつけて下さい。",							// 文字列１："つけて下さい。"
				"",												// 文字列２：空白
				pri_kind										// 印字先ﾌﾟﾘﾝﾀ
			);

	space = (uchar)prm_get( 0,S_PRN,(short)(17),2,1 );			//行数ｾｯﾄ
	if(space >= 20) space = 20;
	if(pword != 0){												//暗証番号印字あり？
		if(space != 0)space =(uchar)(space - 1);
	}
	/* 空白行印字 */
	if(space != 0)
		Kaigyou_set( pri_kind, FONT_A_NML, space );	// 「ﾌｫﾝﾄＡ縦ｻｲｽﾞ（3mm)＋設定されている改行量」の改行を１回行う

	/*------	編集終了	------*/
	p_proc_data->Final = ON;									// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
}


/*[]-------------------------------------------------------------------------------[]*/
/*|		集計印字ﾃﾞｰﾀ編集処理														|*/
/*[]-------------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit( *Syuukei, pri_kind, *p_proc_data )			|*/
/*|																					|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ					|*/
/*|																					|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|							R_PRI  : ﾚｼｰﾄ											|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ											|*/
/*|																					|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																					|*/
/*|	RETURN VALUE	:	uchar	ret = 編集処理結果									|*/
/*|										YES：編集終了								|*/
/*|										NO ：編集継続								|*/
/*|																					|*/
/*[]-------------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi															|*/
/*|	Date	:	2005-06-17															|*/
/*|	Update	:																		|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.------------[]*/
uchar	SYUUKEI_edit( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	ret = NO;			// 編集処理結果（戻り値）
	uchar	edit_gyou = 0;		// 編集済み行数
	uchar	edit_cnt;			// 編集行数ﾜｰｸ
	uchar	edit_flg = YES;		// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）
	uchar	edit_no;			// 編集する印字内容番号（設定ﾃﾞｰﾀ）
	uchar	next_edit_max;		// 次編集印字内容の最大編集行数
	uchar	edit_hantei;		// 編集項目毎の編集有無ﾌﾗｸﾞ
	uchar	s_add;				// 「集計印字」設定ﾃﾞｰﾀｱﾄﾞﾚｽ


	prn_zero = (uchar)CPrmSS[S_TOT][10];	// 「集計ﾃﾞｰﾀ０時印字有無」設定ﾃﾞｰﾀ取得

	for( ; edit_flg ; ){					// 編集処理ﾙｰﾌﾟ

		// 編集対象（集計印字ｎ番目）とする「集計内容番号」設定ﾃﾞｰﾀ取得
		s_add = (uchar)((p_proc_data->Prn_no / 2)+1);
		if( (p_proc_data->Prn_no % 2) == 0 ){
			// ｎ ＝ 奇数
			edit_no = (uchar)prm_get( COM_PRM, S_TOP, (short)s_add, 3, 4 );	// 「印字内容」	設定ﾃﾞｰﾀ取得（上位３桁）
		}
		else{
			// ｎ ＝ 偶数
			edit_no = (uchar)prm_get( COM_PRM, S_TOP, (short)s_add, 3, 1 );	// 「印字内容」	設定ﾃﾞｰﾀ取得（下位３桁）
		}
		if( p_proc_data->Log_Edit == OFF ){
			// 履歴印字でない場合
			if(	syuukei_kind == F_TSYOUKEI		||	// 複数台Ｔ小計
				syuukei_kind == F_TGOUKEI		||	// 複数台Ｔ合計
				syuukei_kind == F_GTSYOUKEI		||	// 複数台ＧＴ小計
				syuukei_kind == F_GTGOUKEI		||	// 複数台ＧＴ合計
				syuukei_kind == F_TGOUKEI_Z		||	// 複数台Ｔ合計（前回）
				syuukei_kind == F_GTGOUKEI_Z		// 複数台ＧＴ合計（前回）
			){
				//	集計種別　＝　複数台集計
				edit_hantei = syuukei_edit_tbl[edit_no][1];
			}
			else{
				//	集計種別　≠　複数台集計
				edit_hantei = YES;
			}
		}
		else{
			// 履歴印字の場合
			edit_hantei = syuukei_edit_tbl[edit_no][2];
		}

		if( edit_hantei == YES ){	// 印字する項目？

			//	印字する項目の場合

			/*--------------------------------------*/
			/*	１ﾌﾞﾛｯｸ編集最大行数ﾁｪｯｸ処理			*/
			/*--------------------------------------*/
			next_edit_max = syuukei_edit_tbl[edit_no][0];		// 次編集印字内容の最大編集行数ｾｯﾄ
			if( (edit_gyou > 0) && ( (edit_gyou + next_edit_max) > EDIT_GYOU_MAX) ){

				//	１ﾌﾞﾛｯｸ編集の最大行数を超えてしまう場合
				edit_flg = NO;									// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）
			}

			if( edit_flg == YES ){

				// １ﾌﾞﾛｯｸ編集の最大行数を超えない場合

				edit_cnt = 0;		// 編集行数ﾘｾｯﾄ

				/*--------------------------------------*/
				/*	１項目編集処理						*/
				/*--------------------------------------*/
				switch( edit_no ){		// 設定されている印字内容番号により各処理へ分岐

					case	0:		// ＜未使用＞
						break;

					case	1:		// ＜ロゴ＞編集処理
						edit_cnt = Prn_edit_logo( pri_kind );
						break;

					case	2:		// ＜ヘッダー＞編集処理
						edit_cnt = Prn_edit_headhoot( PRI_HEADER, pri_kind );
						break;

					case	3:		// ＜表題＞編集処理
						edit_cnt = SYUUKEI_edit_hyoudai( Syuukei, pri_kind, p_proc_data );
						break;

					case	4:		// ＜総現金売上額＞編集処理
						edit_cnt = SYUUKEI_edit_GenUriTryo( Syuukei, pri_kind, p_proc_data );
						break;

					case	5:		// ＜総掛売額＞編集処理
						edit_cnt = SYUUKEI_edit_KakeUriTryo( Syuukei, pri_kind, p_proc_data );
						break;

					case	6:		// ＜総売上額＞編集処理
						edit_cnt = SYUUKEI_edit_UriTryo( Syuukei, pri_kind, p_proc_data );
						break;

					case	7:		// ＜総税金額＞編集処理
						edit_cnt = SYUUKEI_edit_TaxTryo( Syuukei, pri_kind, p_proc_data );
						break;

					case	8:		// ＜総精算回数＞編集処理
						edit_cnt = SYUUKEI_edit_SeiTcnt( Syuukei, pri_kind, p_proc_data );
						break;

					case	9:		// ＜総入・出庫台数＞編集処理
						edit_cnt = SYUUKEI_edit_InOutTcnt( Syuukei, pri_kind, p_proc_data );
						break;

					case	11:		// ＜料金種別毎精算回数・現金領収額＞編集処理
						edit_cnt = SYUUKEI_edit_RsyuSei( Syuukei, pri_kind, p_proc_data );
						break;

					case	12:		// ＜料金種別毎割引回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_RsyuWari( Syuukei, pri_kind, p_proc_data );
						break;

					case	13:		// ＜ｸﾚｼﾞｯﾄｶｰﾄﾞ精算回数・金額＞編集処理
// MH810103 MH321800(S) 決済リーダー用集計印字設定追加
						// <151=決済リーダ 精算件数・金額>で印字するため、この設定では印字しないこととする
//						if(	syuukei_kind == F_TSYOUKEI		||	// 複数台Ｔ小計
//							syuukei_kind == F_TGOUKEI		||	// 複数台Ｔ合計
//							syuukei_kind == F_TGOUKEI_Z			// 複数台Ｔ合計（前回）
//							){
//								edit_cnt = SYUUKEI_edit_CcrdSei( Syuukei, pri_kind, p_proc_data );
//						}else{
//// MH321800(S) D.Inaba ICクレジット対応
////							if( prm_get( COM_PRM, S_PAY, 24, 1, 2 ) !=0 ){	// クレジットサーバー接続あり?
//// GG119200(S) 使用マネー選択設定(50-0001,2)を参照しない
////							if( isEcBrandNoEnabledForSetting(BRANDNO_CREDIT)// 決済リーダでクレジット設定あり？
//								){
//							if( isEcBrandNoEnabledForRecvTbl(BRANDNO_CREDIT) ||
//								Syuukei->Ccrd_sei_cnt != 0 ||
//								Syuukei->Ccrd_sei_ryo != 0 ){
//								// ブランドテーブルを検索して見つからなくても集計されていれば印字する
//// GG119200(E) 使用マネー選択設定(50-0001,2)を参照しない
//// MH321800(E) D.Inaba ICクレジット対応
//								edit_cnt = SYUUKEI_edit_CcrdSei( Syuukei, pri_kind, p_proc_data );
//							}
//						}
// MH810103 MH321800(E) 決済リーダー用集計印字設定追加
						break;

					case	14:		// ＜基本ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ使用回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_PcrdUse( Syuukei, pri_kind, p_proc_data, KIHON_PKNO );
						break;

					case	15:		// ＜拡張１ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ使用回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_PcrdUse( Syuukei, pri_kind, p_proc_data, KAKUCHOU_1 );
						break;

					case	16:		// ＜拡張２ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ使用回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_PcrdUse( Syuukei, pri_kind, p_proc_data, KAKUCHOU_2 );
						break;

					case	17:		// ＜基本回数券使用回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_KtikUse( Syuukei, pri_kind, p_proc_data, KIHON_PKNO );
						break;

					case	18:		// ＜拡張１回数券使用回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_KtikUse( Syuukei, pri_kind, p_proc_data, KAKUCHOU_1 );
						break;

					case	19:		// ＜拡張２回数券使用回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_KtikUse( Syuukei, pri_kind, p_proc_data, KAKUCHOU_2 );
						break;

					case	20:		// ＜基本ｻｰﾋﾞｽ券種別毎精算枚数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_StikUse( Syuukei, pri_kind, p_proc_data, KIHON_PKNO );
						break;

					case	21:		// ＜拡張１ｻｰﾋﾞｽ券種別毎精算枚数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_StikUse( Syuukei, pri_kind, p_proc_data, KAKUCHOU_1 );
						break;

					case	22:		// ＜拡張２ｻｰﾋﾞｽ券種別毎精算枚数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_StikUse( Syuukei, pri_kind, p_proc_data, KAKUCHOU_2 );
						break;

					case	23:		// ＜基本店Ｎｏ．割引回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_MnoUse( Syuukei, pri_kind, p_proc_data, KIHON_PKNO );
						break;

					case	24:		// ＜拡張１店Ｎｏ．割引回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_MnoUse( Syuukei, pri_kind, p_proc_data, KAKUCHOU_1 );
						break;

					case	25:		// ＜拡張２店Ｎｏ．割引回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_MnoUse( Syuukei, pri_kind, p_proc_data, KAKUCHOU_2 );
						break;

					case	26:		// ＜基本割引券使用　回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_WtikUse( Syuukei, pri_kind, p_proc_data, KIHON_PKNO );
						break;

					case	27:		// ＜拡張１割引券使用　回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_WtikUse( Syuukei, pri_kind, p_proc_data, KAKUCHOU_1 );
						break;

					case	28:		// ＜拡張２割引券使用　回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_WtikUse( Syuukei, pri_kind, p_proc_data, KAKUCHOU_2 );
						break;

					case	32:		// ＜基本定期券種別毎使用　回数＞編集処理
						edit_cnt = SYUUKEI_edit_TeikiUse( Syuukei, pri_kind, p_proc_data, KIHON_PKNO );
						break;

					case	33:		// ＜拡張１定期券種別毎使用　回数＞編集処理
						edit_cnt = SYUUKEI_edit_TeikiUse( Syuukei, pri_kind, p_proc_data, KAKUCHOU_1 );
						break;

					case	34:		// ＜拡張２定期券種別毎使用　回数＞編集処理
						edit_cnt = SYUUKEI_edit_TeikiUse( Syuukei, pri_kind, p_proc_data, KAKUCHOU_2 );
						break;

					case	35:		// ＜基本定期券種別毎更新　回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_TeikiKou( Syuukei, pri_kind, p_proc_data, KIHON_PKNO );
						break;

					case	36:		// ＜拡張１定期券種別毎更新　回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_TeikiKou( Syuukei, pri_kind, p_proc_data, KAKUCHOU_1 );
						break;

					case	37:		// ＜拡張２定期券種別毎更新　回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_TeikiKou( Syuukei, pri_kind, p_proc_data, KAKUCHOU_2 );
						break;

					case	40:		// ＜分類集計＞編集処理
						edit_cnt = SYUUKEI_edit_BunruiSk( Syuukei, pri_kind, p_proc_data );
						break;

					case	42:		// ＜領収証発行回数＞編集処理
						edit_cnt = SYUUKEI_edit_RyousyuuPriCnt( Syuukei, pri_kind, p_proc_data );
						break;

					case	43:		// ＜ｻｰﾋﾞｽﾀｲﾑ内精算回数＞編集処理
						edit_cnt = SYUUKEI_edit_InSvstSei( Syuukei, pri_kind, p_proc_data );
						break;

					case	45:		// ＜強制ｱﾝﾁﾊﾟｽOFF精算回数＞編集処理
						edit_cnt = SYUUKEI_edit_ApassOffSei( Syuukei, pri_kind, p_proc_data );
						break;

					case	47:		// ＜個別追番情報＞編集処理
						edit_cnt = SYUUKEI_edit_Oiban( Syuukei, pri_kind, p_proc_data );
						break;

					case 48:		// ＜ラグタイム延長回数＞編集処理
						edit_cnt = SYUUKEI_edit_LagExtCnt( Syuukei, pri_kind, p_proc_data );
						break;

					case	50:		// ＜電子ｶｰﾄﾞ使用回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_Electron( Syuukei, pri_kind, p_proc_data );
						break;
					case	51:		// ＜電子ｶｰﾄﾞ(PASMO)使用回数・金額＞編集処理
						if( Is_SUICA_STYLE_OLD ){								// 旧版動作設定
							edit_cnt = SYUUKEI_edit_Electron2( Syuukei, pri_kind, p_proc_data );
						}
						break;

// MH321800(S) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
//#ifdef	FUNCTION_MASK_EDY
//					case	52:		// ＜電子ｶｰﾄﾞ(Edy)使用回数・金額＞編集処理
//						edit_cnt = SYUUKEI_edit_Electron3( Syuukei, pri_kind, p_proc_data );
//						break;
//#endif
// MH321800(E) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
// MH810103 GG119202(S) 決済リーダー用集計印字設定追加
					case	151:	// 決済リーダ 決済件数・金額
						edit_cnt = SYUUKEI_edit_ElectronEc( Syuukei, pri_kind, p_proc_data );
						break;
// MH810103 GG119202(E) 決済リーダー用集計印字設定追加
					case	80:		// ＜拡張３ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ使用回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_PcrdUse( Syuukei, pri_kind, p_proc_data, KAKUCHOU_3 );
						break;

					case	81:		// ＜拡張３回数券使用回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_KtikUse( Syuukei, pri_kind, p_proc_data, KAKUCHOU_3 );
						break;

					case	82:		// ＜拡張３ｻｰﾋﾞｽ券種別毎精算枚数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_StikUse( Syuukei, pri_kind, p_proc_data, KAKUCHOU_3 );
						break;

					case	83:		// ＜拡張３店Ｎｏ．割引回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_MnoUse( Syuukei, pri_kind, p_proc_data, KAKUCHOU_3 );
						break;

					case	84:		// ＜拡張３割引券使用　回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_WtikUse( Syuukei, pri_kind, p_proc_data, KAKUCHOU_3 );
						break;

					case	85:		// ＜拡張３定期券種別毎使用　回数＞編集処理
						edit_cnt = SYUUKEI_edit_TeikiUse( Syuukei, pri_kind, p_proc_data, KAKUCHOU_3 );
						break;

					case	86:		// ＜拡張３定期券種別毎更新　回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_TeikiKou( Syuukei, pri_kind, p_proc_data, KAKUCHOU_3 );
						break;

					case	98:		// ＜仕切り行＞編集処理
						if( pri_kind == R_PRI ){
							edit_cnt = Prn_edit_sikiri( pri_kind );
						}
						break;

					case	99:		// ＜スペース＞編集処理
						if( pri_kind == R_PRI ){
							edit_cnt = Prn_edit_space( pri_kind );
						}
						break;

					case	101:	// ＜払出不足回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_HaraiHusoku( Syuukei, pri_kind, p_proc_data );
						break;

					case	102:	// ＜金庫総入金額＞編集処理
						edit_cnt = SYUUKEI_edit_KinkoTryo( Syuukei, pri_kind, p_proc_data );
						break;

					case	103:	// ＜紙幣金庫入金額＞編集処理
						edit_cnt = SYUUKEI_edit_SiheiKinko( Syuukei, pri_kind, p_proc_data );
						break;

					case	104:	// ＜コイン金庫入金額＞編集処理
						edit_cnt = SYUUKEI_edit_CoinKinko( Syuukei, pri_kind, p_proc_data );
						break;

					case	105:	// ＜金銭データ＞編集処理
						edit_cnt = SYUUKEI_edit_KinsenData( Syuukei, pri_kind, p_proc_data );
						break;

					case	110:	// ＜精算中止回数・精算中止現金売上額＞編集処理
						edit_cnt = SYUUKEI_edit_SeiChusi( Syuukei, pri_kind, p_proc_data );
						break;

					case	114:	// ＜ホッパー（循環コイン）合計回数＞編集処理
						edit_cnt = SYUUKEI_edit_JuGouCnt( Syuukei, pri_kind, p_proc_data );
						break;

					case	115:	// ＜紙幣払出機合計回数＞編集処理
						edit_cnt = SYUUKEI_edit_ShGouCnt( Syuukei, pri_kind, p_proc_data );
						break;

					case	116:	// ＜コイン金庫合計回数＞編集処理
						edit_cnt = SYUUKEI_edit_CkGouCnt( Syuukei, pri_kind, p_proc_data );
						break;

					case	117:	// ＜紙幣金庫合計回数＞編集処理
						edit_cnt = SYUUKEI_edit_SkGouCnt( Syuukei, pri_kind, p_proc_data );
						break;

					case	119:	// ＜釣銭払戻額＞編集処理
						edit_cnt = SYUUKEI_edit_TuriModRyo( Syuukei, pri_kind, p_proc_data );
						break;

					case	122:	// ＜預り証発行回数＞編集処理
						edit_cnt = SYUUKEI_edit_AzukariPriCnt( Syuukei, pri_kind, p_proc_data );
						break;

					case	180:	// ＜強制出庫回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_KyouseiOut( Syuukei, pri_kind, p_proc_data );
						break;

					case	181:	// ＜不正出庫回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_HuseiOut( Syuukei, pri_kind, p_proc_data );
						break;

					case	182:	// ＜修正精算回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_SyuuseiSei( Syuukei, pri_kind, p_proc_data );
						break;

					case	183:	// ＜受付券発行回数＞編集処理
						edit_cnt = SYUUKEI_edit_UketukePriCnt( Syuukei, pri_kind, p_proc_data );
						break;

					case	184:	// ＜駐車位置別集計＞編集処理
						edit_cnt = SYUUKEI_edit_ItibetuSk( Syuukei, pri_kind, p_proc_data );
						break;

					case	185:	// ＜修正精算回数・金額＞編集処理
						edit_cnt = SYUUKEI_edit_MinyuSei( Syuukei, pri_kind, p_proc_data );
						break;

					case	190:	// 減額精算
						edit_cnt = SYUUKEI_edit_Gengaku( Syuukei, pri_kind, p_proc_data );
						break;
					case	191:	// 振替精算
						edit_cnt = SYUUKEI_edit_Furikae( Syuukei, pri_kind, p_proc_data );
						break;
// MH322914(S) K.Onodera 2016/12/08 AI-V対応
					case	192:	// 過払い金(後日)
						edit_cnt = SYUUKEI_edit_Kabarai( Syuukei, pri_kind, p_proc_data );
						break;
// MH322914(E) K.Onodera 2016/12/08 AI-V対応
// MH810100(S) 2020/07/10 車番チケットレス(#4531 仕様変更 買物割引の領収証の印字を分けて印字する)
					case	195:		// ＜買物割引＞編集処理
						edit_cnt = SYUUKEI_edit_KaimonoWari( Syuukei, pri_kind, p_proc_data );
						break;
// MH810100(E) 2020/07/10 車番チケットレス(#4531 仕様変更 買物割引の領収証の印字を分けて印字する)

					default:		// その他（印字項目番号ｴﾗｰ）
						break;
				}
				edit_gyou = (uchar)(edit_gyou + edit_cnt);		// 編集済み行数更新

				if( (p_proc_data->Prn_no_data1 == 0) && (p_proc_data->Prn_no_data2 == 0) ){

					// 項目番号の印字ﾃﾞｰﾀを全て編集終了した場合
					p_proc_data->Prn_no++;						// 設定項目番号＋１
// MH321800(S) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
					// ※店割引などは検索データが多く印字しないケースが続くと、タスク占有時間が長くなる。
					//   そのため、E3260が発生してしまうケースがあるので、１印字項目完了で一旦taskchg()を行うこととする
					xPause_PRNTSK(0L);
// MH321800(E) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
				}
			}
		}
		else{
			//	印字しない項目の場合
			p_proc_data->Prn_no++;								// 設定項目番号＋１
		}
		if( p_proc_data->Prn_no >= 100 ){

			// 設定項目番号の最後（１００）まで印字内容編集終了の場合

			edit_flg = NO;										// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）

			p_proc_data->Prn_no			= 0;					// 編集処理ﾜｰｸﾘｾｯﾄ
			p_proc_data->Prn_no_data1	= 0;
			p_proc_data->Prn_no_data2	= 0;

			ret = YES;											// 戻り値←１ﾃﾞｰﾀ編集終了

			if( p_proc_data->Log_Edit == OFF ){
				// 集計情報（Ｔ合計履歴）印字でない場合
				p_proc_data->Final = ON;						// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
			}
		}
	}
	return( ret );
}

/*[]-------------------------------------------------------------------------------[]*/
/*|		＜表題＞印字ﾃﾞｰﾀ編集処理													|*/
/*[]-------------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_hyoudai										|*/
/*|																					|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ					|*/
/*|																					|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|																					|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																					|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数									|*/
/*|																					|*/
/*[]-------------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi															|*/
/*|	Date	:	2005-03-16															|*/
/*|	Update	:																		|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.------------[]*/
uchar	SYUUKEI_edit_hyoudai( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar			edit_cnt = 0;	// 編集行数
	const char		*p_title;		// 表題印字ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
	ST_OIBAN		oiban;			// 追番
	date_time_rec	*now_time;		// 今回集計日時ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
	date_time_rec	*old_time;		// 前回集計日時ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
	uchar			para1;			// 設定ﾃﾞｰﾀﾜｰｸ1
	uchar			para2;			// 設定ﾃﾞｰﾀﾜｰｸ2

	if( (syuukei_kind >= SYUUKEI_SYU_MIN) && (syuukei_kind <= SYUUKEI_SYU_MAX) ){	// 集計種別ﾁｪｯｸ

		p_title		= Syuukei_Ttl_Prn[syuukei_kind-1];		// 表題印字文字列ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
		oiban		= Syuukei->Oiban;						// 追番ﾃﾞｰﾀｾｯﾄ
		now_time	= &Syuukei->NowTime;					// 今回集計日時ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
		old_time	= &Syuukei->OldTime;					// 前回集計日時ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ

		/*------	表題	------*/
		edit_cnt += Prn_edit_Title	(						// 表題印字ﾃﾞｰﾀ編集
										p_title,
										FONT_K_YOKOBAI,
										pri_kind
									);

		/*------	１行空白	------*/
		if( ( pri_kind == R_PRI ) && ( p_proc_data->Log_Edit == OFF ) ){
			// 印字先＝レシート　且つ　ログ印字でない（ジャーナル印字またはログ印字の場合、スペース行なし）
			edit_cnt += Prn_edit_space( pri_kind );
		}

		/*------	再ﾌﾟﾘﾝﾄ日時	------*/
		if( syuukei_kind == TGOUKEI_Z || syuukei_kind == GTGOUKEI_Z || syuukei_kind == MTGOUKEI_Z || syuukei_kind == F_TGOUKEI_Z || syuukei_kind == F_GTGOUKEI_Z ){

			//	前回集計印字の場合

			edit_cnt += Prn_edit_RePriDate( pri_kind );		// 再ﾌﾟﾘﾝﾄ日時印字ﾃﾞｰﾀ編集
		}

		/*------	＜機械NO.／追番＞編集	------*/
		KikaiNoSet(	cEditwk1, Syuukei->Kikai_no );			// 機械NO.印字ﾃﾞｰﾀ編集

		para1 = (uchar)CPrmSS[S_SYS][13];					// 「追番」設定ﾃﾞｰﾀ取得				（０：個別／１：通し／２：追番なし）
		para2 = (uchar)CPrmSS[S_TOT][1];					// 「集計方式」設定ﾃﾞｰﾀ取得			（０：Ｔ＋ＧＴ合計／１：Ｔ＋ＧＴ＋ＭＴ合計）

		sprintf( cEditwk2,"");								// cEditwk2(追番印字ﾃﾞｰﾀ)　←　NULL

		if( para1 == 0 ){									// 「追番」設定？

			//	「追番」設定ﾃﾞｰﾀ＝０（個別）の場合

			switch( syuukei_kind ){							// 集計種別？

				case	TGOUKEI:							// Ｔ合計
				case	TGOUKEI_Z:							// 前回Ｔ合計
					OibanSet( cEditwk2, CountSel( &oiban), 5 );	// cEditwk2			←　追番印字ﾃﾞｰﾀ編集（"Ｔ合No.XXXXXX"）
					break;

				case	GTGOUKEI:							// ＧＴ合計
				case	GTGOUKEI_Z:							// 前回ＧＴ合計
					if( para2 == 1 ){						// ＭＴ集計あり？
						OibanSet( cEditwk2, CountSel( &oiban), 6 );	// ＹＥＳ：cEditwk2	←　追番印字ﾃﾞｰﾀ編集（"ＧＴ合No.XXXXXX"）
					}
					break;

			}
		}
		else if( para1 == 1 ){

			//	「追番」設定ﾃﾞｰﾀ＝１（通し）の場合

			switch( syuukei_kind ){							// 集計種別？

				case	TGOUKEI:							// Ｔ合計
				case	TGOUKEI_Z:							// 前回Ｔ合計
					OibanSet( cEditwk2, CountSel( &oiban ), 0 );	// cEditwk2			←　追番印字ﾃﾞｰﾀ編集（"　　No.XXXXXX"）
					break;

				case	GTGOUKEI:							// ＧＴ合計
				case	GTGOUKEI_Z:							// 前回ＧＴ合計
					if( para2 == 1 ){						// ＭＴ集計あり？
						OibanSet( cEditwk2, CountSel( &oiban), 0 );	// ＹＥＳ：cEditwk2	←　追番印字ﾃﾞｰﾀ編集（"　　No.XXXXXX"）
					}
					break;

			}
		}

		Str_Set1(											// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,								// 文字列１：機械NO.印字ﾃﾞｰﾀ
					cEditwk2,								// 文字列２：追番印字ﾃﾞｰﾀ
					pri_kind								// 印字先ﾌﾟﾘﾝﾀ
				);

		edit_cnt++;											// 編集行数更新

		/*------	＜係員NO.＞編集	------*/
		edit_cnt += Prn_edit_KakariNo( Syuukei->Kakari_no, pri_kind );

		/*------	＜集計日時＞編集	------*/
		edit_cnt += Prn_edit_SkDate	(						// ----- 集計日時印字ﾃﾞｰﾀ編集 -----
										now_time,			// 今回日時
										old_time,			// 前回日時
										pri_kind			// 印字先ﾌﾟﾘﾝﾀ
									);

	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜総現金売上額＞印字ﾃﾞｰﾀ編集処理									|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_GenUriTryo								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-16													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_GenUriTryo( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数

	Prn_edit_Sitei1line	(							// ----- 印字ﾃﾞｰﾀ編集 -----
							"総現金売上額",			// 印字項目	："総現金売上額"
							Syuukei->Genuri_Tryo,	// 印字ﾃﾞｰﾀ	：総現金売上額
							"",						// 単位１	：NULL
							Pri_Tanni[PriT_YEN],	// 単位２	：円
							pri_kind				// 印字先ﾌﾟﾘﾝﾀ
						);

	edit_cnt++;										// 編集行数更新

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜総掛売額＞印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_KakeUriTryo							|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-16													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_KakeUriTryo( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数

	Prn_edit_Sitei1line	(							// ----- 印字ﾃﾞｰﾀ編集 -----
							"総掛売額",				// 印字項目	："総掛売額"
							Syuukei->Kakeuri_Tryo,	// 印字ﾃﾞｰﾀ	：総掛売額
							"",						// 単位１	：NULL
							Pri_Tanni[PriT_YEN],	// 単位２	：円
							pri_kind				// 印字先ﾌﾟﾘﾝﾀ
						);

	edit_cnt++;										// 編集行数更新

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜総売上額＞印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_UriTryo								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-16													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_UriTryo( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数

	Prn_edit_Sitei1line	(							// ----- 印字ﾃﾞｰﾀ編集 -----
							"総売上額",				// 印字項目	："総売上額"
							Syuukei->Uri_Tryo,		// 印字ﾃﾞｰﾀ	：総売上額
							"",						// 単位１	：NULL
							Pri_Tanni[PriT_YEN],	// 単位２	：円
							pri_kind				// 印字先ﾌﾟﾘﾝﾀ
						);

	edit_cnt++;										// 編集行数更新

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜総税金額＞印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_TaxTryo								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-16													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_TaxTryo( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数

	Prn_edit_Sitei1line	(							// ----- 印字ﾃﾞｰﾀ編集 -----
							"総税金額",				// 印字項目	："総税金額"
							Syuukei->Tax_Tryo,		// 印字ﾃﾞｰﾀ	：総税金額
							"",						// 単位１	：NULL
							Pri_Tanni[PriT_YEN],	// 単位２	：円
							pri_kind				// 印字先ﾌﾟﾘﾝﾀ
						);

	edit_cnt++;										// 編集行数更新

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜総精算回数＞印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_SeiTcnt								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-16													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_SeiTcnt( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数

	Prn_edit_Sitei1line	(								// ----- 印字ﾃﾞｰﾀ編集 -----
							"総精算回数",				// 印字項目	："総精算回数"
							(ulong)Syuukei->Seisan_Tcnt,// 印字ﾃﾞｰﾀ	：総精算回数
							"",							// 単位１	：NULL
							Pri_Tanni[PriT_KAI],		// 単位２	：回
							pri_kind					// 印字先ﾌﾟﾘﾝﾀ
						);

	edit_cnt++;											// 編集行数更新

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜総入・出庫台数＞印字ﾃﾞｰﾀ編集処理									|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_InOutTcnt								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-16													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_InOutTcnt( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	uchar	i;					// 処理ﾙｰﾌﾟｶｳﾝﾀｰ
	uchar	settei;				// 設定ﾃﾞｰﾀ取得ﾜｰｸ
	uchar	pri_cnt;			// 印字項目数ﾜｰｸ

	/*------	＜入庫台数＞編集	------*/

	Prn_edit_Sitei1line	(											// ----- 印字ﾃﾞｰﾀ編集 -----
							"総入庫台数",							// 印字項目	："総入庫台数"
							(ulong)Syuukei->In_car_Tcnt,			// 印字ﾃﾞｰﾀ	：総入庫台数
							"",										// 単位１	：NULL
							Pri_Tanni[PriT_DAI],					// 単位２	：台
							pri_kind								// 印字先ﾌﾟﾘﾝﾀ
						);

	edit_cnt++;														// 編集行数更新

	settei = (uchar)prm_get( COM_PRM, S_TOT, 14, 1, 3 );			// 「入庫１，２印字有無」	設定ﾃﾞｰﾀ取得

	if( settei ){													// 入庫１，２印字？

		if( settei == 1 ){											// 印字項目設定？
			pri_cnt = 2;											// 入庫１，２
		}
		else{
			pri_cnt = 3;											// 入庫１，２、３
		}

		for( i=0 ; i<pri_cnt ; i++ ){								// 設定により「入庫１，２」または「入庫１，２，３」編集

			Prn_edit_Sitei1line	(									// ----- 印字ﾃﾞｰﾀ編集 -----
									InCarCnt_Prn[i],				// 印字項目	：入庫１，２
									(ulong)Syuukei->In_car_cnt[i],	// 印字ﾃﾞｰﾀ	：入庫台数
									"",								// 単位１	：NULL
									Pri_Tanni[PriT_DAI],			// 単位２	：台
									pri_kind						// 印字先ﾌﾟﾘﾝﾀ
								);
			edit_cnt++;												// 編集行数更新
		}
	}

	/*------	＜出庫台数＞編集	------*/

	Prn_edit_Sitei1line	(											// ----- 印字ﾃﾞｰﾀ編集 -----
							"総出庫台数",							// 印字項目	："総出庫台数"
							(ulong)Syuukei->Out_car_Tcnt,			// 印字ﾃﾞｰﾀ	：総出庫台数
							"",										// 単位１	：NULL
							Pri_Tanni[PriT_DAI],					// 単位２	：台
							pri_kind								// 印字先ﾌﾟﾘﾝﾀ
						);

	edit_cnt++;														// 編集行数更新

	settei = (uchar)prm_get( COM_PRM, S_TOT, 14, 1, 2 );			// 「出庫１，２印字有無」	設定ﾃﾞｰﾀ取得

	if( settei ){													// 出庫１，２印字？

		if( settei == 1 ){											// 印字項目設定？
			pri_cnt = 2;											// 出庫１，２
		}
		else{
			pri_cnt = 3;											// 出庫１，２、３
		}

		for( i=0 ; i<pri_cnt ; i++ ){								// 設定により「出庫１，２」または「出庫１，２，３」編集

			Prn_edit_Sitei1line	(									// ----- 印字ﾃﾞｰﾀ編集 -----
									OutCarCnt_Prn[i],				// 印字項目	：出庫台数１，２
									(ulong)Syuukei->Out_car_cnt[i],	// 印字ﾃﾞｰﾀ	：出庫台数
									"",								// 単位１	：NULL
									Pri_Tanni[PriT_DAI],			// 単位２	：台
									pri_kind						// 印字先ﾌﾟﾘﾝﾀ
								);
			edit_cnt++;												// 編集行数更新
		}
	}

	/*------	＜現在駐車台数＞編集	------*/
	if( syuukei_kind == TSYOUKEI || syuukei_kind == TGOUKEI || syuukei_kind == TGOUKEI_Z ){
		// T小計／T合計／前回T合計 集計印字の場合

	// 01-0039:⑤が2以外(0,1)のときは現在台数は印字しない
		if (prm_get(COM_PRM,S_SYS,39,1,2) == 2) {

			Prn_edit_Sitei1line	(											// ----- 印字ﾃﾞｰﾀ編集 -----
									"現在駐車台数",							// 印字項目	："現在駐車台数"
									(ulong)Syuukei->Now_car_Tcnt,			// 印字ﾃﾞｰﾀ	：現在駐車台数
									"",										// 単位１	：NULL
									Pri_Tanni[PriT_DAI],					// 単位２	：台
									pri_kind								// 印字先ﾌﾟﾘﾝﾀ
								);

			edit_cnt++;		// 編集行数更新

			settei = (uchar)prm_get( COM_PRM, S_TOT, 14, 1, 1 );			// 「現在台数１，２印字有無」	設定ﾃﾞｰﾀ取得
			if( settei ){													// 現在台数１，２印字？

				if( settei == 1 ){											// 印字項目設定？
					pri_cnt = 2;											// 現在１，２
				}
				else{
					pri_cnt = 3;											// 現在１，２、３
				}

				for( i=0 ; i<pri_cnt ; i++ ){								// 設定により「現在１，２」または「現在１，２，３」編集

					Prn_edit_Sitei1line	(									// ----- 印字ﾃﾞｰﾀ編集 -----
											NowCarCnt_Prn[i],				// 印字項目	：現在台数１，２
											(ulong)Syuukei->Now_car_cnt[i],	// 印字ﾃﾞｰﾀ	：現在台数
											"",								// 単位１	：NULL
											Pri_Tanni[PriT_DAI],			// 単位２	：台
											pri_kind						// 印字先ﾌﾟﾘﾝﾀ
										);

					edit_cnt++;												// 編集行数更新
				}
			}

		}

	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜紛失精算回数・紛失精算現金売上額＞印字ﾃﾞｰﾀ編集処理				|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_HunSei									|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-16													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_HunSei( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数

	edit_cnt = Prn_edit_KaiKin	(							// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
									"紛失精算",				// 印字項目：紛失精算
									Syuukei->Hunsei_Tcnt,	// 回数ﾃﾞｰﾀ
									Syuukei->Hunsei_Tryo,	// 金額ﾃﾞｰﾀ
									pri_kind				// 印字先ﾌﾟﾘﾝﾀ
								);
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜料金種別毎精算回数・現金領収額＞印字ﾃﾞｰﾀ編集処理					|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_RsyuSei								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-17													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_RsyuSei( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	uchar	data_no;			// ﾃﾞｰﾀ番号
	uchar	s_add;				// 「車種設定（役割）」設定ﾃﾞｰﾀｱﾄﾞﾚｽ
	uchar	s_data;				// 「車種設定（役割）」設定ﾃﾞｰﾀ


	data_no = (uchar)p_proc_data->Prn_no_data1;								// 編集対象とする料金種別ﾃﾞｰﾀ番号ｾｯﾄ

	for( ; data_no < RYOUKIN_SYU_MAX ; data_no++ ){							// 料金種別毎精算編集処理ﾙｰﾌﾟ

// GG124100(S) R.Endo 2022/08/23 車番チケットレス3.0 #6543 集計に「定期01」が常に印字される
		if ( CLOUD_CALC_MODE ) {	// クラウド料金計算モード
			s_data = 1;	// 設定ありに相当
		} else {					// 通常料金計算モード
// GG124100(E) R.Endo 2022/08/23 車番チケットレス3.0 #6543 集計に「定期01」が常に印字される

		s_add	= (uchar)(1+(data_no*6));									// 対象料金種別の「車種設定（役割）」設定ﾃﾞｰﾀｱﾄﾞﾚｽ取得
		s_data	= (uchar)prm_get( COM_PRM, S_SHA, (short)s_add, 2, 5 );		// 「車種設定（役割）」	設定ﾃﾞｰﾀ取得

// GG124100(S) R.Endo 2022/08/23 車番チケットレス3.0 #6543 集計に「定期01」が常に印字される
		}
// GG124100(E) R.Endo 2022/08/23 車番チケットレス3.0 #6543 集計に「定期01」が常に印字される

		// 対象料金種別の印字有無判定（「対象料金種別＝使用する」　且つ　「ﾃﾞｰﾀが≠０　または　０でも印字する」場合、印字する）

		if( s_data != 0 && ( (Syuukei->Rsei_cnt[data_no] != 0) || (Syuukei->Rsei_ryo[data_no] != 0) || (prn_zero == YES) ) ){

			edit_cnt += Prn_edit_KaiKin	(									// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
											RsyuSei_Prn[data_no],			// 印字項目：料金種別
											Syuukei->Rsei_cnt[data_no],		// 回数ﾃﾞｰﾀ
											Syuukei->Rsei_ryo[data_no],		// 金額ﾃﾞｰﾀ
											pri_kind						// 印字先ﾌﾟﾘﾝﾀ
										);


			if( (edit_cnt+2) > EDIT_GYOU_MAX ){								// 編集行数ﾁｪｯｸ

				// 次ﾃﾞｰﾀ編集（２行）が不可の場合

				data_no++;													// 次処理で検索する料金種別ﾃﾞｰﾀ番号をｾｯﾄ
				break;														// ﾃﾞｰﾀ編集処理ﾙｰﾌﾟを抜ける
			}
		}
	}

	if( data_no >= RYOUKIN_SYU_MAX ){										// 料金種別毎精算ﾃﾞｰﾀ編集終了？

		// 全ての料金種別について編集終了した場合
		p_proc_data->Prn_no_data1	= 0;									// 料金種別ﾃﾞｰﾀ番号ﾘｾｯﾄ
	}
	else{
		// 未編集の料金種別がある場合
		p_proc_data->Prn_no_data1 = data_no;								// 次に編集する料金種別ﾃﾞｰﾀ番号をｾｰﾌﾞ
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜料金種別毎割引回数・金額＞印字ﾃﾞｰﾀ編集処理						|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_RsyuWari								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-17													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_RsyuWari( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	uchar	data_no;			// ﾃﾞｰﾀ番号
	uchar	s_add;				// 「車種設定（役割）」設定ﾃﾞｰﾀｱﾄﾞﾚｽ
	uchar	s_data;				// 「車種設定（役割）」設定ﾃﾞｰﾀ

	data_no = (uchar)p_proc_data->Prn_no_data1;								// 編集対象とする料金種別ﾃﾞｰﾀ番号ｾｯﾄ

	for( ; data_no < RYOUKIN_SYU_MAX ; data_no++ ){							// 料金種別毎割引編集処理ﾙｰﾌﾟ

// GG124100(S) R.Endo 2022/08/23 車番チケットレス3.0 #6543 集計に「定期01」が常に印字される
		if ( CLOUD_CALC_MODE ) {	// クラウド料金計算モード
			s_data = 1;	// 設定ありに相当
		} else {					// 通常料金計算モード
// GG124100(E) R.Endo 2022/08/23 車番チケットレス3.0 #6543 集計に「定期01」が常に印字される

		s_add	= (uchar)(1+(data_no*6));									// 対象料金種別の「車種設定（役割）」設定ﾃﾞｰﾀｱﾄﾞﾚｽ取得
		s_data	= (uchar)prm_get( COM_PRM, S_SHA, (short)s_add, 2, 5 );		// 「車種設定（役割）」	設定ﾃﾞｰﾀ取得

// GG124100(S) R.Endo 2022/08/23 車番チケットレス3.0 #6543 集計に「定期01」が常に印字される
		}
// GG124100(E) R.Endo 2022/08/23 車番チケットレス3.0 #6543 集計に「定期01」が常に印字される

		// 対象料金種別の印字有無判定（「対象料金種別＝使用する」　且つ　「ﾃﾞｰﾀが≠０　または　０でも印字する」場合、印字する）
		if( s_data != 0 && ( (Syuukei->Rtwari_cnt[data_no] != 0) || (Syuukei->Rtwari_ryo[data_no] != 0) || (prn_zero == YES) ) ){

			edit_cnt += Prn_edit_KaiKin	(									// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
											RsyuWari_Prn[data_no],			// 印字項目：料金種別
											Syuukei->Rtwari_cnt[data_no],	// 回数ﾃﾞｰﾀ
											Syuukei->Rtwari_ryo[data_no],	// 金額ﾃﾞｰﾀ
											pri_kind						// 印字先ﾌﾟﾘﾝﾀ
										);


			if( (edit_cnt+2) > EDIT_GYOU_MAX ){								// 編集行数ﾁｪｯｸ

				// 次ﾃﾞｰﾀ編集（２行）が不可の場合

				data_no++;													// 次処理で検索する料金種別ﾃﾞｰﾀ番号をｾｯﾄ
				break;														// ﾃﾞｰﾀ編集処理ﾙｰﾌﾟを抜ける
			}
		}
	}

	if( data_no >= RYOUKIN_SYU_MAX ){										// 料金種別毎割引ﾃﾞｰﾀ編集終了？

		// 全ての料金種別について編集終了した場合
		p_proc_data->Prn_no_data1	= 0;									// 料金種別ﾃﾞｰﾀ番号ﾘｾｯﾄ
	}
	else{
		// 未編集の料金種別がある場合
		p_proc_data->Prn_no_data1 = data_no;								// 次に編集する料金種別ﾃﾞｰﾀ番号をｾｰﾌﾞ
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜ｸﾚｼﾞｯﾄｶｰﾄﾞ精算回数・金額＞印字ﾃﾞｰﾀ編集処理						|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_CcrdSei								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-17													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_CcrdSei( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数

	edit_cnt = Prn_edit_KaiKin	(							// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
									"ｸﾚｼﾞｯﾄｶｰﾄﾞ",			// 印字項目：ｸﾚｼﾞｯﾄｶｰﾄﾞ精算
									Syuukei->Ccrd_sei_cnt,	// 回数ﾃﾞｰﾀ
									Syuukei->Ccrd_sei_ryo,	// 金額ﾃﾞｰﾀ
									pri_kind				// 印字先ﾌﾟﾘﾝﾀ
								);
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜ラグタイム延長回数＞印字ﾃﾞｰﾀ編集処理								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_LagExtCnt								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	M.Nagashima													|*/
/*|	Date	:	2010-11-01													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2010 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_LagExtCnt( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数

	Prn_edit_Sitei1line	(								// ----- 印字ﾃﾞｰﾀ編集 -----
							"ﾗｸﾞﾀｲﾑ延長回数",			// 印字項目	："ﾗｸﾞﾀｲﾑ延長回数"
							(ulong)Syuukei->Lag_extension_cnt,// 印字ﾃﾞｰﾀ	：ﾗｸﾞﾀｲﾑ延長回数
							"",							// 単位１	：NULL
							Pri_Tanni[PriT_KAI],		// 単位２	：回
							pri_kind					// 印字先ﾌﾟﾘﾝﾀ
						);

	edit_cnt++;											// 編集行数更新

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜電子ｶｰﾄﾞ精算回数・金額＞印字ﾃﾞｰﾀ編集処理							|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_Electron								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	T.Namioka													|*/
/*|	Date	:	2006-07-21													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_Electron( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数
	uchar	i,edit_no,s_add;
	ushort	CardType;
	uchar	CardName[12];
	
// MH810103 GG119202(S) 決済リーダー用集計印字設定追加
//// MH321800(S) hosoda ICクレジット対応
//	if (isEC_USE()) {
//	// 決済リーダ
//		edit_cnt = SYUUKEI_edit_ElectronEc(Syuukei, pri_kind, p_proc_data);
//		return edit_cnt;
//	}
//// MH321800(E) hosoda ICクレジット対応
// MH810103 GG119202(E) 決済リーダー用集計印字設定追加

	if( (prm_get(COM_PRM, S_PAY, 24, 1, 3) == 1) ||				// Suicaﾘｰﾀﾞｰ使用可能
		(syuukei_kind == F_TSYOUKEI ||							// 複数台Ｔ小計
		 syuukei_kind == F_TGOUKEI  ||							// 複数台Ｔ合計
		 syuukei_kind == F_TGOUKEI_Z) )							// 複数台Ｔ合計（前回）
	{

		if( Is_SUICA_STYLE_OLD ){								// 旧版動作設定

			edit_cnt = Prn_edit_KaiKin	(									// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
										"Suica",							// 印字項目：ｸﾚｼﾞｯﾄｶｰﾄﾞ精算
										Syuukei->Electron_sei_cnt,			// 回数ﾃﾞｰﾀ
										Syuukei->Electron_sei_ryo,			// 金額ﾃﾞｰﾀ
										pri_kind							// 印字先ﾌﾟﾘﾝﾀ
										);

			// PASMOは、ﾃﾞｰﾀが０でないときに編集する
			// SUICA対応(50)しか設定されていない状態でPASMOが使われたときの対処
			for( i=0; i<= 100; i++ ){
				s_add = (uchar)((i / 2)+1);
				if( (i % 2) == 0 ){
					// ｎ ＝ 奇数
					edit_no = (uchar)prm_get( COM_PRM, S_TOP, (short)s_add, 3, 4 );	// 「印字内容」	設定ﾃﾞｰﾀ取得（上位３桁）
				}
				else{
					// ｎ ＝ 偶数
					edit_no = (uchar)prm_get( COM_PRM, S_TOP, (short)s_add, 3, 1 );	// 「印字内容」	設定ﾃﾞｰﾀ取得（下位３桁）
				}
				if( edit_no == 51 )
					break;
			}

			if(( Syuukei->Electron_psm_cnt != 0 )&& 				// PASMOｶｰﾄﾞを使用したか
				( edit_no != 51 ) ){
				edit_cnt += Prn_edit_KaiKin	(								// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
										"PASMO",							// 印字項目：ｸﾚｼﾞｯﾄｶｰﾄﾞ精算
										Syuukei->Electron_psm_cnt,			// 回数ﾃﾞｰﾀ
										Syuukei->Electron_psm_ryo,			// 金額ﾃﾞｰﾀ
										pri_kind							// 印字先ﾌﾟﾘﾝﾀ
										);
			}
			edit_cnt += wrtICCard( Syuukei , pri_kind , NO50 );
		}																// 旧版動作設定(e)
		else{															// 新版動作
			CardType = Ope_Disp_Media_Getsub( 0 );						// 設定からカードタイプget
			switch( CardType ){
			case OPE_DISP_MEDIA_TYPE_SUICA:								// Ｓｕｉｃａ
				strcpy( (char*)CardName, "Suica" );
				break;
			case OPE_DISP_MEDIA_TYPE_PASMO:								// ＰＡＳＭＯ
				strcpy( (char*)CardName, "PASMO" );
				break;
			case OPE_DISP_MEDIA_TYPE_ICOCA:								// ＩＣＯＣＡ
				strcpy( (char*)CardName, "ICOCA" );
				break;
			case OPE_DISP_MEDIA_TYPE_ICCARD:							// ＩＣカード（複数カード利用時：現在未使用）
				strcpy( (char*)CardName, "ICｶｰﾄﾞ" );
				break;
			case OPE_DISP_MEDIA_TYPE_eMONEY:							// 電子マネー
			default:
				strcpy( (char*)CardName, "電子ﾏﾈｰ" );
				break;
			}
			edit_cnt = Prn_edit_KaiKin	(								// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
										(char*)CardName,				// 印字項目：ｸﾚｼﾞｯﾄｶｰﾄﾞ精算
										Syuukei->Electron_sei_cnt,		// 回数ﾃﾞｰﾀ
										Syuukei->Electron_sei_ryo,		// 金額ﾃﾞｰﾀ
										pri_kind						// 印字先ﾌﾟﾘﾝﾀ
										);
		}
	}

	return( edit_cnt );
}

// MH321800(S) hosoda ICクレジット対応
/*[]-----------------------------------------------------------------------[]*/
/*|		＜電子ｶｰﾄﾞ精算回数・金額＞印字ﾃﾞｰﾀ編集処理(決済リーダ)　		    |*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_ElectronEc								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	hosoda														|*/
/*|	Date	:	2019-02-06													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2019 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_ElectronEc(SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	uchar	edit_cnt;			// 編集行数
// MH810105 GG119202(S) 処理未了取引集計仕様改善
//	char	str_work[16];
// MH810105 GG119202(E) 処理未了取引集計仕様改善
	ushort	brand_no;
// MH810103 GG119202(S) 決済リーダー用集計印字設定追加
//	static
// MH810103 GG119202(E) 決済リーダー用集計印字設定追加
// MH810105 GG119202(S) 処理未了取引集計仕様改善
//	ulong	cnt, ryo, alm_cnt, alm_ryo;
	ulong	cnt, ryo;
// MH810105 GG119202(E) 処理未了取引集計仕様改善
	int		i;

	edit_cnt = 0;
	if (isEC_USE() != 0 ||												// 決済リーダ使用可能
		(syuukei_kind == F_TSYOUKEI ||									// 複数台Ｔ小計
		 syuukei_kind == F_TGOUKEI  ||									// 複数台Ｔ合計
		 syuukei_kind == F_TGOUKEI_Z))									// 複数台Ｔ合計（前回）
	{
		for (i = 0; BrandOrder[i][0] != 0; i++) {
			switch (BrandOrder[i][0]) {
			case EC_EDY_USED:
				cnt = Syuukei->Electron_edy_cnt;
				ryo = Syuukei->Electron_edy_ryo;
// MH810105 GG119202(S) 処理未了取引集計仕様改善
//				alm_cnt = Syuukei->Electron_Arm_cnt;
//				alm_ryo = Syuukei->Electron_Arm_ryo;
// MH810105 GG119202(E) 処理未了取引集計仕様改善
				break;
			case EC_NANACO_USED:
				cnt = Syuukei->nanaco_sei_cnt;
				ryo = Syuukei->nanaco_sei_ryo;
// MH810105 GG119202(S) 処理未了取引集計仕様改善
//				alm_cnt = Syuukei->nanaco_alm_cnt;
//				alm_ryo = Syuukei->nanaco_alm_ryo;
// MH810105 GG119202(E) 処理未了取引集計仕様改善
				break;
			case EC_WAON_USED:
				cnt = Syuukei->waon_sei_cnt;
				ryo = Syuukei->waon_sei_ryo;
// MH810105 GG119202(S) 処理未了取引集計仕様改善
//				alm_cnt = Syuukei->waon_alm_cnt;
//				alm_ryo = Syuukei->waon_alm_ryo;
// MH810105 GG119202(E) 処理未了取引集計仕様改善
				break;
			case EC_SAPICA_USED:
				cnt = Syuukei->sapica_sei_cnt;
				ryo = Syuukei->sapica_sei_ryo;
// MH810105 GG119202(S) 処理未了取引集計仕様改善
//				alm_cnt = Syuukei->sapica_alm_cnt;
//				alm_ryo = Syuukei->sapica_alm_ryo;
// MH810105 GG119202(E) 処理未了取引集計仕様改善
				break;
			case EC_KOUTSUU_USED:
				cnt = Syuukei->koutsuu_sei_cnt;
				ryo = Syuukei->koutsuu_sei_ryo;
// MH810105 GG119202(S) 処理未了取引集計仕様改善
//				alm_cnt = Syuukei->koutsuu_alm_cnt;
//				alm_ryo = Syuukei->koutsuu_alm_ryo;
// MH810105 GG119202(E) 処理未了取引集計仕様改善
				break;
			case EC_ID_USED:
				cnt = Syuukei->id_sei_cnt;
				ryo = Syuukei->id_sei_ryo;
// MH810105 GG119202(S) 処理未了取引集計仕様改善
//				alm_cnt = Syuukei->id_alm_cnt;
//				alm_ryo = Syuukei->id_alm_ryo;
// MH810105 GG119202(E) 処理未了取引集計仕様改善
				break;
			case EC_QUIC_PAY_USED:
				cnt = Syuukei->quicpay_sei_cnt;
				ryo = Syuukei->quicpay_sei_ryo;
// MH810105 GG119202(S) 処理未了取引集計仕様改善
//				alm_cnt = Syuukei->quicpay_alm_cnt;
//				alm_ryo = Syuukei->quicpay_alm_ryo;
// MH810105 GG119202(E) 処理未了取引集計仕様改善
				break;
// MH810105(S) MH364301 PiTaPa対応
			case EC_PITAPA_USED:
				cnt = Syuukei->pitapa_sei_cnt;
				ryo = Syuukei->pitapa_sei_ryo;
				break;
// MH810105(E) MH364301 PiTaPa対応
			case EC_CREDIT_USED:
// MH810103 GG119202(S) 決済リーダー用集計印字設定追加
//				// T集計は既存のクレジット処理で行う
//				continue;
				cnt = Syuukei->Ccrd_sei_cnt;
				ryo = Syuukei->Ccrd_sei_ryo;
// MH810105 GG119202(S) 処理未了取引集計仕様改善
//				alm_cnt = alm_ryo = 0;
// MH810105 GG119202(E) 処理未了取引集計仕様改善
				break;
// MH810103 GG119202(E) 決済リーダー用集計印字設定追加
// MH810105(S) MH364301 QRコード決済対応
			case EC_QR_USED:
				cnt = Syuukei->qr_sei_cnt;
				ryo = Syuukei->qr_sei_ryo;
				break;
// MH810105(E) MH364301 QRコード決済対応
			default:
				continue;		// ありえない
			}

// MH810103 GG119202(S) 決済リーダー用集計印字設定追加
//			// 使用ブランド選択設定を変更した場合(特に削除した場合)、
//			// 集計には削除したブランドの情報が残っている場合がある。
//			// この場合は使用ブランド選択設定が無くとも印字することとする。
//			brand_no = ConvertEcBrandToNo(BrandOrder[i][0]);
//// GG119200(S) 使用されていない場合でも割引集計データにセットする
////			if ( !isEcBrandNoEnabledForRecvTbl(brand_no)
////				&& cnt == 0L && ryo == 0L
////				&& alm_cnt == 0L && alm_ryo == 0L) {
////				continue;
////			}
//			//　設定なしブランド？
//			if( !isEcBrandNoEnabledForSetting(brand_no) ){
//				continue;
//			}
//// GG119202(E) 使用されていない場合でも割引集計データにセットする
			// ブランドテーブルを参照して集計印字を行う
			// ブランドテーブルから削除されても集計されていれば印字対象とする
			brand_no = ConvertEcBrandToNo(BrandOrder[i][0]);
			if ( !isEcBrandNoEnabledForRecvTbl(brand_no)
				&& cnt == 0L && ryo == 0L
// MH810105 GG119202(S) 処理未了取引集計仕様改善
//				&& alm_cnt == 0L && alm_ryo == 0L) {
				) {
// MH810105 GG119202(E) 処理未了取引集計仕様改善
				continue;
			}
// MH810103 GG119202(E) 決済リーダー用集計印字設定追加

			// 電子マネー種ごとに件数／金額印字
// MH810103 GG119202(S) 集計印字の単位を「回数」にする
//			edit_cnt += Prn_edit_KenKin(									// ----- 件数／金額印字ﾃﾞｰﾀ編集 -----
			edit_cnt += Prn_edit_KaiKin(									// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
// MH810103 GG119202(E) 集計印字の単位を「回数」にする
										EcSyu[BrandOrder[i][1]],			// 印字項目：電子マネー精算
										cnt,								// 件数ﾃﾞｰﾀ
										ryo,								// 金額ﾃﾞｰﾀ
										pri_kind							// 印字先ﾌﾟﾘﾝﾀ
										);
// MH810105 GG119202(S) 処理未了取引集計仕様改善
//			// アラーム取引印字
//			if (alm_cnt > 0L) {
//			// アラーム取引は件数が０件なら印字しない
//				memset(str_work, 0, sizeof(str_work));
//// MH810103 GG119202(S) 決済リーダー用集計印字設定追加
////				if ( BrandOrder[i][0] == EC_KOUTSUU_USED ) {
////					// アラーム用文字列
////					strcpy(str_work, EcSyu[9]);
////				}
////				else
//// MH810103 GG119202(E) 決済リーダー用集計印字設定追加
//				{
//					// タイトル + アラーム
//					sprintf(str_work, "%s%s", EcSyu[BrandOrder[i][1]], EcSyu[0]);
//				}
//// MH810103 GG119202(S) 集計印字の単位を「回数」にする
////				edit_cnt += Prn_edit_KenKin(								// ----- 件数／金額印字ﾃﾞｰﾀ編集 -----
//				edit_cnt += Prn_edit_KaiKin(								// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
//// MH810103 GG119202(E) 集計印字の単位を「回数」にする
//											str_work,						// 印字項目：ｱﾗｰﾑ取引ﾃﾞｰﾀ
//											alm_cnt,						// 件数ﾃﾞｰﾀ
//											alm_ryo,						// 金額ﾃﾞｰﾀ
//											pri_kind						// 印字先ﾌﾟﾘﾝﾀ
//											);
//			}
// MH810105 GG119202(E) 処理未了取引集計仕様改善
			if (BrandOrder[i][0] == EC_EDY_USED) {
				if (EcEdyTerminalNo[0] != 0) {
				// 上位端末IDデータあり
					Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
								"Edy上位端末ID",							// 文字列１：Edy上位端末ID
								EcEdyTerminalNo,						   // 文字列２：Edy上位端末ID印字ﾃﾞｰﾀ
								pri_kind								   // 印字先ﾌﾟﾘﾝﾀ
							);
					edit_cnt++;
				}
			}
		}
// MH810103 MHUT40XX(S) みなし決済の集計を新規に設ける
		// みなし決済の回数が１件でもあれば印字する
		if( Syuukei->Ec_minashi_cnt > 0 ){
			edit_cnt += Prn_edit_KaiKin(									// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
							"みなし決済",			   						// 印字項目：みなし決済
							Syuukei->Ec_minashi_cnt,						// 件数ﾃﾞｰﾀ
							Syuukei->Ec_minashi_ryo,						// 金額ﾃﾞｰﾀ
							pri_kind
						);
		}
// MH810103 MHUT40XX(E) みなし決済の集計を新規に設ける
// MH810105 GG119202(S) 処理未了取引集計仕様改善
		if (Syuukei->miryo_pay_ok_cnt > 0 ||
			Syuukei->miryo_unknown_cnt > 0) {
			// タイトル
			edit_cnt += Prn_edit_Title("＜処理未了取引＞", FONT_K_NML, pri_kind);

			// 支払済み回数・金額
			edit_cnt += Prn_edit_KaiKin(									// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
							"支払済み",										// 印字項目：支払済み
							Syuukei->miryo_pay_ok_cnt,						// 件数ﾃﾞｰﾀ
							Syuukei->miryo_pay_ok_ryo,						// 金額ﾃﾞｰﾀ
							pri_kind
						);

			// 支払不明回数・金額
			edit_cnt += Prn_edit_KaiKin(									// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
							"支払不明",										// 印字項目：支払不明
							Syuukei->miryo_unknown_cnt,						// 件数ﾃﾞｰﾀ
							Syuukei->miryo_unknown_ryo,						// 金額ﾃﾞｰﾀ
							pri_kind
						);
		}
// MH810105 GG119202(E) 処理未了取引集計仕様改善
	}

	return edit_cnt;
}
// MH321800(E) hosoda ICクレジット対応

//------------------------
// PASMO集計項目(51)の編集
//------------------------
uchar	SYUUKEI_edit_Electron2( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数
	uchar	i,edit_no,s_add;	

	if( (prm_get(COM_PRM, S_PAY, 24, 1, 3) == 1) ||				// Suicaﾘｰﾀﾞｰ使用可能
		(syuukei_kind == F_TSYOUKEI ||							// 複数台Ｔ小計
		 syuukei_kind == F_TGOUKEI  ||							// 複数台Ｔ合計
		 syuukei_kind == F_TGOUKEI_Z) )							// 複数台Ｔ合計（前回）
	{
		// Suicaは、ﾃﾞｰﾀが０でないときに編集する
		// PASMO(51)しか設定されていない状態でSuicaが使われたときの対処
		for( i=0; i<= 100; i++ ){
			s_add = (uchar)((i / 2)+1);
			if( (i % 2) == 0 ){
				// ｎ ＝ 奇数
				edit_no = (uchar)prm_get( COM_PRM, S_TOP, (short)s_add, 3, 4 );	// 「印字内容」	設定ﾃﾞｰﾀ取得（上位３桁）
			}
			else{
				// ｎ ＝ 偶数
				edit_no = (uchar)prm_get( COM_PRM, S_TOP, (short)s_add, 3, 1 );	// 「印字内容」	設定ﾃﾞｰﾀ取得（下位３桁）
			}
			if( edit_no == 50 )
				break;
		}

		if(( Syuukei->Electron_sei_cnt != 0 )&& 				// Suicaｶｰﾄﾞを使用したか
			( edit_no != 50 ) ){
			edit_cnt = Prn_edit_KaiKin	(								// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
									"Suica",							// 印字項目：Suica精算
									Syuukei->Electron_sei_cnt,			// 回数ﾃﾞｰﾀ
									Syuukei->Electron_sei_ryo,			// 金額ﾃﾞｰﾀ
									pri_kind							// 印字先ﾌﾟﾘﾝﾀ
									);
		}
		edit_cnt += Prn_edit_KaiKin	(								// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
									"PASMO",						// 印字項目：PASMO精算
									Syuukei->Electron_psm_cnt,		// 回数ﾃﾞｰﾀ
									Syuukei->Electron_psm_ryo,		// 金額ﾃﾞｰﾀ
									pri_kind						// 印字先ﾌﾟﾘﾝﾀ
									);
		edit_cnt += wrtICCard( Syuukei , pri_kind , NO51 );
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		ICOCA/ICｶｰﾄﾞ印刷処理												|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	wrtICCard( unsigned char prnFlg )					|*/
/*|																			|*/
/*|	PARAMETER		:	unsigned char	prnFlg		=	現在の印字モード	|*/
/*|																			|*/
/*|	RETURN VALUE	:	None												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	Y.Katoh														|*/
/*|	Date	:	2007-10-05													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar wrtICCard( SYUKEI *Syuukei , uchar pri_kind , uchar prnFlg )
{
	uchar	edit_cnt = 0;	// 編集行数
	uchar	prnMode;	// 合計印字の時に2度印字しない様にするためのフラグ
	uchar	i,edit_no,s_add;	

	prnMode = 0;		//モードフラグをクリアする

	for( i=0; i<= 100; i++ ){
		s_add = (uchar)((i / 2)+1);
		if( (i % 2) == 0 ){
			// ｎ ＝ 奇数
			edit_no = (uchar)prm_get( COM_PRM, S_TOP, (short)s_add, 3, 4 );	// 「印字内容」	設定ﾃﾞｰﾀ取得（上位３桁）
		}
		else{
			// ｎ ＝ 偶数
			edit_no = (uchar)prm_get( COM_PRM, S_TOP, (short)s_add, 3, 1 );	// 「印字内容」	設定ﾃﾞｰﾀ取得（下位３桁）
		}
		if( edit_no == 50 )
		{
			prnMode |= NO50;
		}
		else if ( edit_no == 51 )
		{
			prnMode |= NO51;
		}
		
	}

	// 印字フラグに50/51両方設定されている場合はPASMOを印字した後で印字する様にする。なので51の印字後に印字する様にする
	if ( Syuukei->Electron_ico_cnt != 0 )
	{
		//印刷する条件
		if ( (( prnFlg == NO51 ) && ( prnMode == NO50 | NO51 )) ||	// 共通パラメータに50/51両方設定されていてPASMO印字の時
		     (( prnFlg == NO50 ) && ( prnMode == NO50        )) ||	// 共通パラメータに50が設定されていてSuica印字の時
		     (( prnFlg == NO51 ) && ( prnMode == NO51        )))	// 共通パラメータに51が設定されていてPASMO印字の時
		{
			edit_cnt += Prn_edit_KaiKin	(								// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
										"ICOCA",						// 印字項目：ｸﾚｼﾞｯﾄｶｰﾄﾞ精算
										Syuukei->Electron_ico_cnt,		// 回数ﾃﾞｰﾀ
										Syuukei->Electron_ico_ryo,		// 金額ﾃﾞｰﾀ
										pri_kind						// 印字先ﾌﾟﾘﾝﾀ
										);
		}
	}

	// 印字フラグに50/51両方設定されている場合はPASMOを印字した後で印字する様にする。なので51の印字後に印字する様にする
	if ( Syuukei->Electron_icd_cnt != 0 )
	{
		//印刷する条件
		if ( (( prnFlg == NO51 ) && ( prnMode == NO50 | NO51 )) ||	// 共通パラメータに50/51両方設定されていてPASMO印字の時
		     (( prnFlg == NO50 ) && ( prnMode == NO50        )) ||	// 共通パラメータに50が設定されていてSuica印字の時
		     (( prnFlg == NO51 ) && ( prnMode == NO51        )))	// 共通パラメータに51が設定されていてPASMO印字の時
		{
			edit_cnt += Prn_edit_KaiKin	(								// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
										"ICｶｰﾄﾞ",						// 印字項目：ｸﾚｼﾞｯﾄｶｰﾄﾞ精算
										Syuukei->Electron_icd_cnt,		// 回数ﾃﾞｰﾀ
										Syuukei->Electron_icd_ryo,		// 金額ﾃﾞｰﾀ
										pri_kind						// 印字先ﾌﾟﾘﾝﾀ
										);
		}
	}
	return edit_cnt;
}

// MH321800(S) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
//#ifdef	FUNCTION_MASK_EDY
////------------------------
//// Edy集計項目(52)の編集
////------------------------
//uchar	SYUUKEI_edit_Electron3( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
//{
//	uchar	edit_cnt = 0;	// 編集行数
//
//	if( (prm_get(COM_PRM, S_PAY, 24, 1, 4) == 1) ||				// Edyﾘｰﾀﾞｰ使用可能
//		(syuukei_kind == F_TSYOUKEI ||							// 複数台Ｔ小計
//		 syuukei_kind == F_TGOUKEI  ||							// 複数台Ｔ合計
//		 syuukei_kind == F_TGOUKEI_Z) )							// 複数台Ｔ合計（前回）
//	{
//			edit_cnt = Prn_edit_KenKin	(								// ----- 件数／金額印字ﾃﾞｰﾀ編集 -----
//										"Edy",							// 印字項目：ｸﾚｼﾞｯﾄｶｰﾄﾞ精算
//										Syuukei->Electron_edy_cnt,		// 件数ﾃﾞｰﾀ
//										Syuukei->Electron_edy_ryo,		// 金額ﾃﾞｰﾀ
//										pri_kind						// 印字先ﾌﾟﾘﾝﾀ
//										);
//			edit_cnt += Prn_edit_KenKin	(								// ----- 件数／金額印字ﾃﾞｰﾀ編集 -----
//										"Edyｱﾗｰﾑ利用",					// 印字項目：ｱﾗｰﾑ取引ﾃﾞｰﾀ
//										Syuukei->Electron_Arm_cnt,		// 件数ﾃﾞｰﾀ
//										Syuukei->Electron_Arm_ryo,		// 金額ﾃﾞｰﾀ
//										pri_kind						// 印字先ﾌﾟﾘﾝﾀ
//										);
//
//	}
//	return( edit_cnt );
//}
//#endif
// MH321800(E) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)

/*[]-----------------------------------------------------------------------[]*/
/*|		＜ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ使用回数・金額＞印字ﾃﾞｰﾀ編集処理						|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_PcrdUse								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|						uchar			pkno_syu	=	駐車場Ｎｏ．種別	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-17													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_PcrdUse( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data, uchar pkno_syu )
{
	uchar	edit_cnt = 0;	// 編集行数
	uchar	s_data;			// 「ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ／回数券の使用」設定ﾃﾞｰﾀ


	if( pkno_syu <= PKNO_SYU_MAX ){												// 駐車場Ｎｏ．種別　ﾁｪｯｸ

		s_data	= (uchar)prm_get( COM_PRM, S_PRP, 1, 1, 1 );					// 「ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ／回数券の使用」	設定ﾃﾞｰﾀ取得

		// 印字有無判定（「ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ使用する」　且つ　「ﾃﾞｰﾀが≠０　または　０でも印字する」場合、印字する）
		if( s_data == 1 && ( (Syuukei->Pcrd_use_cnt[pkno_syu] != 0) || (Syuukei->Pcrd_use_ryo[pkno_syu] != 0) || (prn_zero == YES) ) ){

			edit_cnt = Prn_edit_KaiKin	(										// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
											PripayTicket[pkno_syu],				// 印字項目
											Syuukei->Pcrd_use_cnt[pkno_syu],	// 回数ﾃﾞｰﾀ
											Syuukei->Pcrd_use_ryo[pkno_syu],	// 金額ﾃﾞｰﾀ
											pri_kind							// 印字先ﾌﾟﾘﾝﾀ
										);
		}
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜回数券使用回数・金額＞印字ﾃﾞｰﾀ編集処理							|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_KtikUse								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|						uchar			pkno_syu	=	駐車場Ｎｏ．種別	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-17													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_KtikUse( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data, uchar pkno_syu )
{
	uchar	edit_cnt = 0;	// 編集行数
	uchar	s_data;			// 「ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ／回数券の使用」設定ﾃﾞｰﾀ

	if( pkno_syu <= PKNO_SYU_MAX ){												// 駐車場Ｎｏ．種別　ﾁｪｯｸ

		s_data	= (uchar)prm_get( COM_PRM, S_PRP, 1, 1, 1 );					// 「ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ／回数券の使用」	設定ﾃﾞｰﾀ取得

		// 印字有無判定（ﾃﾞｰﾀが≠０　または　０でも印字する場合、印字する）
		// 印字有無判定（「回数券使用する」　且つ　「ﾃﾞｰﾀが≠０　または　０でも印字する」場合、印字する）
		if( s_data == 2 && ( (Syuukei->Ktik_use_cnt[pkno_syu] != 0) || (Syuukei->Ktik_use_ryo[pkno_syu] != 0) || (prn_zero == YES) ) ){

			edit_cnt = Prn_edit_KaiKin	(										// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
											KaisuuTicket[pkno_syu],				// 印字項目
											Syuukei->Ktik_use_cnt[pkno_syu],	// 回数ﾃﾞｰﾀ
											Syuukei->Ktik_use_ryo[pkno_syu],	// 金額ﾃﾞｰﾀ
											pri_kind							// 印字先ﾌﾟﾘﾝﾀ
										);
		}
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜ｻｰﾋﾞｽ券種別毎精算枚数・金額＞印字ﾃﾞｰﾀ編集処理						|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_StikUse								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|						uchar			pkno_syu	=	駐車場Ｎｏ．種別	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-17													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_StikUse( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data, uchar pkno_syu )
{
	uchar	edit_cnt = 0;	// 編集行数
	uchar	svs_syu;		// ｻｰﾋﾞｽ券種別
	uchar	s_add;			// 「ｻｰﾋﾞｽ券設定」	設定ﾃﾞｰﾀｱﾄﾞﾚｽ
	uchar	s_data1;		// 「役割」			設定ﾃﾞｰﾀ
	uchar	s_data2;		// 「種別切替」		設定ﾃﾞｰﾀ
// MH810105(S) MH364301 WAONの未了残高照会タイムアウト時の精算完了処理修正
//// MH321800(S) hosoda ICクレジット対応 (アラーム取引)
//	ushort	waon_wari;
//// MH321800(E) hosoda ICクレジット対応 (アラーム取引)
// MH810105(E) MH364301 WAONの未了残高照会タイムアウト時の精算完了処理修正

	if( pkno_syu <= PKNO_SYU_MAX ){												// 駐車場Ｎｏ．種別　ﾁｪｯｸ

		for( svs_syu = 0 ; svs_syu < SERVICE_SYU_MAX ; svs_syu++ ){				// ｻｰﾋﾞｽ券種別毎編集処理ﾙｰﾌﾟ

// GG124100(S) R.Endo 2022/08/23 車番チケットレス3.0 #6543 集計に「定期01」が常に印字される
			if ( CLOUD_CALC_MODE ) {	// クラウド料金計算モード
				s_data1 = 1;	// 設定ありに相当
				s_data2 = 0;
			} else {					// 通常料金計算モード
// GG124100(E) R.Endo 2022/08/23 車番チケットレス3.0 #6543 集計に「定期01」が常に印字される

		s_add	= (uchar)(1+(svs_syu*3));										// 対象ｻｰﾋﾞｽ券種別の「ｻｰﾋﾞｽ券設定」設定ﾃﾞｰﾀｱﾄﾞﾚｽ取得
		s_data1	= (uchar)prm_get( COM_PRM, S_SER, (short)s_add,     1, 1 );		// 「役割」		設定ﾃﾞｰﾀ取得
// MH810105(S) MH364301 WAONの未了残高照会タイムアウト時の精算完了処理修正
//// MH321800(S) hosoda ICクレジット対応 (アラーム取引)
//// MH810103 GG119202(S) 店No.100がT集計に印字されてしまう
////		if (s_data1 == 0) {
//		// WAONが有効か？
//		if (s_data1 == 0 && isEcBrandNoEnabledForRecvTbl(BRANDNO_WAON)) {
//// MH810103 GG119202(E) 店No.100がT集計に印字されてしまう
//			waon_wari = (ushort)prm_get(COM_PRM ,S_ECR, 11, 4, 1);
//			if ((waon_wari > 9000) && ((svs_syu + 1 + 9000) == waon_wari)) {
//			// WAON割引の置き換え対象がサービス券
//				s_data1 = 4;
//			}
////			else if (!((waon_wari >= 1 && waon_wari <= 100) && (waon_wari >= 9001 && waon_wari <= 9015))) {
//			else if (!((waon_wari >= 1 && waon_wari <= 100) || (waon_wari >= 9001 && waon_wari <= 9015))) {
//			// WAON割引の置き換え対象が範囲外
//				if (svs_syu == 0) {
//					s_data1 = 4;
//				}
//			}
//		}
//// MH321800(E) hosoda ICクレジット対応 (アラーム取引)
// MH810105(E) MH364301 WAONの未了残高照会タイムアウト時の精算完了処理修正
		s_data2	= (uchar)prm_get( COM_PRM, S_SER, (short)(s_add+2), 2, 1 );		// 「種別切替」	設定ﾃﾞｰﾀ取得

// GG124100(S) R.Endo 2022/08/23 車番チケットレス3.0 #6543 集計に「定期01」が常に印字される
			}
// GG124100(E) R.Endo 2022/08/23 車番チケットレス3.0 #6543 集計に「定期01」が常に印字される

			// 印字有無判定（「対象ｻｰﾋﾞｽ券＝使用する」　且つ　「ﾃﾞｰﾀが≠０　または　０でも印字する」場合、印字する）
			if( ( s_data1 != 0 || s_data2 != 0 )
						&&
				( (Syuukei->Stik_use_cnt[pkno_syu][svs_syu] != 0) || (Syuukei->Stik_use_ryo[pkno_syu][svs_syu] != 0) || (prn_zero == YES) ) ){

				edit_cnt += (uchar)Prn_edit_KaiKin	(												// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
														ServiceTicket[pkno_syu][svs_syu],				// 印字項目
														Syuukei->Stik_use_cnt[pkno_syu][svs_syu],	// 回数ﾃﾞｰﾀ
														Syuukei->Stik_use_ryo[pkno_syu][svs_syu],	// 金額ﾃﾞｰﾀ
														pri_kind									// 印字先ﾌﾟﾘﾝﾀ
													);
			}
		}
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜店Ｎｏ．割引回数・金額＞印字ﾃﾞｰﾀ編集処理							|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_MnoUse									|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|						uchar			pkno_syu	=	駐車場Ｎｏ．種別	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-18													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_MnoUse( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data, uchar pkno_syu )
{
	uchar	inji_settei;		// 店Ｎｏ．割引集計印字設定（設定ﾃﾞｰﾀ）
	uchar	edit_flg = YES;		// 編集継続ﾌﾗｸﾞ
	uchar	edit_cnt = 0;		// 編集行数
	uchar	data_no;			// ﾃﾞｰﾀ番号
	ushort	s_add;				// 「店割引設定」	設定ﾃﾞｰﾀｱﾄﾞﾚｽ
	uchar	s_data1;			// 「役割」			設定ﾃﾞｰﾀ
	uchar	s_data2;			// 「種別切替」		設定ﾃﾞｰﾀ
	ulong	total_cnt;
	ulong	total_ryo;
// MH322914(S) K.Onodera 2017/03/08 AI-V対応：遠隔精算割引
	ulong	ulParam = 0;
// MH322914(E) K.Onodera 2017/03/08 AI-V対応：遠隔精算割引
// MH321800(S) hosoda ICクレジット対応 (アラーム取引)
// MH810103 (s) 電子マネー対応
	uchar	mise_no;			// 店No.
// MH810103 (e) 電子マネー対応
// MH321800(E) hosoda ICクレジット対応 (アラーム取引)
// MH810104(S) R.Endo 2021/08/31 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(割引回数・金額印字データ編集処理の変更)
	uchar	f_PrintExec;		// 1=プリント実行
	uchar	parameter_11_0001;	// 11-0001のパラメータ
// MH810104(E) R.Endo 2021/08/31 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(割引回数・金額印字データ編集処理の変更)

	if( pkno_syu > PKNO_SYU_MAX ){	// 駐車場Ｎｏ．種別　ﾁｪｯｸ
		return( edit_cnt );
	}

	if( (p_proc_data->Prn_no_data1 == 0) && (p_proc_data->Prn_no_data2 == 0) ){

		//	店Ｎｏ．割引印字処理開始の場合

		/*------------------------------------------------------------------------------*/
		/*	編集処理制御ﾜｰｸを以下のように使用する										*/
		/*		Prn_no_data1	：	処理中の印字項目ﾒﾆｭｰｵﾌｾｯﾄ値							*/
		/*		Prn_no_data2	：	店Ｎｏ．毎印字中に店Ｎｏ．ﾃﾞｰﾀのｵﾌｾｯﾄ値を格納		*/
		/*		Prn_no_wk[]	：	印字項目ﾒﾆｭｰ（印字する項目番号の配列）					*/
		/*								1：店Ｎｏ．毎									*/
		/*								2：店Ｎｏ．１～１００合計						*/
		/*								3：店Ｎｏ．１０１～２５５						*/
		/*								4：全店割引合計									*/
		/*------------------------------------------------------------------------------*/

		switch( pkno_syu ){		// 駐車場Ｎｏ．種別により「店Ｎｏ．割引印字ﾌｫｰﾏｯﾄ」	設定ﾃﾞｰﾀ取得

			case	KIHON_PKNO:	// 基本

				inji_settei = (uchar)prm_get( COM_PRM, S_TOT, 16, 1, 1 );
				break;

			case	KAKUCHOU_1:	// 拡張１

				inji_settei = (uchar)prm_get( COM_PRM, S_TOT, 16, 1, 2 );
				break;

			case	KAKUCHOU_2:	// 拡張２

				inji_settei = (uchar)prm_get( COM_PRM, S_TOT, 16, 1, 3 );

				if( inji_settei == 1 ){
					// 「拡張１に加算して印字」の場合
					inji_settei = 0xFF;						// 印字なし
				}
				else if( inji_settei == 2 ){
					// 「拡張２の全割引合計を印字」の場合
					inji_settei = 3;						// 全店割引の合計を印字
				}
				else{
					// その他（設定エラー）
					inji_settei = 0xFF;						// 印字なし
				}
				break;

			case	KAKUCHOU_3:	// 拡張３

				inji_settei = (uchar)prm_get( COM_PRM, S_TOT, 16, 1, 4 );

				if( inji_settei == 1 ){
					// 「拡張１に加算して印字」の場合
					inji_settei = 0xFF;						// 印字なし
				}
				else if( inji_settei == 2 ){
					// 「拡張３の全割引合計を印字」の場合
					inji_settei = 3;						// 全店割引の合計を印字
				}
				else{
					// その他（設定エラー）
					inji_settei = 0xFF;						// 印字なし
				}
				break;
		}

		switch( inji_settei ){	// 印字設定により印字項目ﾒﾆｭｰを編集

			case	0:	// 店Ｎｏ．毎を印字
				p_proc_data->Prn_no_wk[0] = 1;		// ＜店Ｎｏ．毎＞
				p_proc_data->Prn_no_wk[1] = 0;
				break;

			case	1:	// 店Ｎｏ．１～１００合計を印字
				p_proc_data->Prn_no_wk[0] = 2;		// ＜店Ｎｏ．１～１００合計＞
				p_proc_data->Prn_no_wk[1] =0;
				break;

			case	2:	// 店Ｎｏ．１～１００合計＆店Ｎｏ．１０１～９９９合計を印字
				p_proc_data->Prn_no_wk[0] = 2;		// ＜店Ｎｏ．１～１００合計＞
				p_proc_data->Prn_no_wk[1] = 3;		// ＜店Ｎｏ．１０１～９９９合計＞
				p_proc_data->Prn_no_wk[2] = 0;
				break;

			case	3:	// 全店割引合計を印字
				p_proc_data->Prn_no_wk[0] = 4;		// ＜全店割引合計＞
				p_proc_data->Prn_no_wk[1] = 0;
				break;

			case	4:	// 店Ｎｏ．１～１００合計＆店Ｎｏ．毎を印字
				p_proc_data->Prn_no_wk[0] = 2;		// ＜店Ｎｏ．１～１００合計＞
				p_proc_data->Prn_no_wk[1] = 1;		// ＜店Ｎｏ．毎＞
				p_proc_data->Prn_no_wk[2] = 0;
				break;

			case	5:	// 店Ｎｏ．１～１００合計＆店Ｎｏ．１０１～９９９合計＆店Ｎｏ．毎を印字
				p_proc_data->Prn_no_wk[0] = 2;		// ＜店Ｎｏ．１～１００合計＞
				p_proc_data->Prn_no_wk[1] = 3;		// ＜店Ｎｏ．１０１～９９９合計＞
				p_proc_data->Prn_no_wk[2] = 1;		// ＜店Ｎｏ．毎＞
				p_proc_data->Prn_no_wk[3] = 0;
				break;

			case	6:	// 全店割引合計＆店Ｎｏ．毎を印字
				p_proc_data->Prn_no_wk[0] = 4;		// ＜全店割引合計＞
				p_proc_data->Prn_no_wk[1] = 1;		// ＜店Ｎｏ．毎＞
				p_proc_data->Prn_no_wk[2] = 0;
				break;

			default:	// 設定ｴﾗｰ
				return( edit_cnt );
		}
	}

// MH810104(S) R.Endo 2021/08/31 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(割引回数・金額印字データ編集処理の変更)
	// 多店舗割引あり／なし(11-0001)フラグ
	// @note	毎回関数(prm_get)呼び出しを行わないようにforループ外で計算しておく。
	parameter_11_0001 = (uchar)prm_get(COM_PRM, S_TAT, 1, 1, 1);
// MH810104(E) R.Endo 2021/08/31 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(割引回数・金額印字データ編集処理の変更)

	for( ; edit_flg ; ){	// 印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟ

		switch( p_proc_data->Prn_no_wk[p_proc_data->Prn_no_data1] ){	// 印字項目？

			case	1:		// 店Ｎｏ．毎

					data_no = (uchar)p_proc_data->Prn_no_data2;			// 対象とする店Ｎｏ．ﾃﾞｰﾀのｵﾌｾｯﾄ値ｾｯﾄ

					for( ; data_no < MISE_NO_MAX ; data_no++ ){			// 店Ｎｏ．毎ﾃﾞｰﾀ編集処理ﾙｰﾌﾟ

// GG124100(S) R.Endo 2022/08/23 車番チケットレス3.0 #6543 集計に「定期01」が常に印字される
						if ( CLOUD_CALC_MODE ) {	// クラウド料金計算モード
							if ( (Syuukei->Mno_use_cnt4[pkno_syu][data_no] != 0) ||		// 回数データあり
								 (Syuukei->Mno_use_ryo4[pkno_syu][data_no] != 0) ) {	// 金額データあり
								f_PrintExec = 1;	// 印字する
							} else {
								f_PrintExec = 0;	// 印字しない
							}
						} else {					// 通常料金計算モード
// GG124100(E) R.Endo 2022/08/23 車番チケットレス3.0 #6543 集計に「定期01」が常に印字される

						s_add	= (ushort)(1+(data_no*3));										// 対象店Ｎｏ．の「店割引設定」設定ﾃﾞｰﾀｱﾄﾞﾚｽ取得
						s_data1	= (uchar)prm_get( COM_PRM, S_STO, (short)s_add,     1, 1 );		// 「役割」		設定ﾃﾞｰﾀ取得
						s_data2	= (uchar)prm_get( COM_PRM, S_STO, (short)(s_add+2), 2, 1 );		// 「種別切替」	設定ﾃﾞｰﾀ取得
// MH810100(S) 2020/08/20 車番チケットレス(#4756 店100のQRコードを翳して種別切替を行い領収証を発行すると、「0円」の印字がされてしまう)
// MH810103 (s) 電子マネー対応
						mise_no = (uchar)(data_no + 1);
// MH810103 (e) 電子マネー対応
// MH810103 GG119202(S) 店No.100がT集計に印字されてしまう
//						if (s_data1 == 0 && mise_no == (ushort)prm_get(COM_PRM ,S_ECR, 11, 4, 1)) {
						// WAONが有効か？
						if (s_data1 == 0 && mise_no == (ushort)prm_get(COM_PRM ,S_ECR, 11, 4, 1) &&
							isEcBrandNoEnabledForRecvTbl(BRANDNO_WAON)) {
// MH810103 GG119202(E) 店No.100がT集計に印字されてしまう
// MH810103 (s) 電子マネー対応
						// 対象店№の役割設定がなく、WAON割引の置き換え対象の場合
							s_data1 = 4;
							// s_data2 = 0;
						}
// MH810103 (e) 電子マネー対応
//// MH321800(E) hosoda ICクレジット対応 (アラーム取引)
// MH810100(E) 2020/08/20 車番チケットレス(#4756 店100のQRコードを翳して種別切替を行い領収証を発行すると、「0円」の印字がされてしまう)

// MH810104(S) R.Endo 2021/08/31 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(割引回数・金額印字データ編集処理の変更)
// 						// 印字有無判定（「対象店Ｎｏ．割引＝使用する」　且つ　「ﾃﾞｰﾀが≠０　または　０でも印字する」場合、印字する）
// 						if( ( s_data1 != 0 || s_data2 != 0 )
// 									&&
// 							( (Syuukei->Mno_use_cnt4[pkno_syu][data_no] != 0) || (Syuukei->Mno_use_ryo4[pkno_syu][data_no] != 0) || (prn_zero == YES) ) ){
						// 印字有無判定
						// 　店No.1～100は以下の条件で印字する。
						// 　　多店舗割引なし：店割引設定あり AND ( データあり OR データなしでも印字あり )
						// 　　多店舗割引あり：データあり OR ( 店割引設定あり AND データなしでも印字あり )
						// ※GT-4100は店No.毎の印字を店No.1～100に限定しているため店No.101以降は考慮しない。
						// 　店No.101以降に対応する場合は以下の条件で印字する。
						// 　　多店舗割引なし：印字しない
						// 　　多店舗割引あり：データあり
						f_PrintExec = 0;
						if ( parameter_11_0001 == 0 ) {									// 多店舗割引なし
							if( ((s_data1 != 0) || (s_data2 != 0)) &&					// 店割引設定あり かつ
								((Syuukei->Mno_use_cnt4[pkno_syu][data_no] != 0) ||		// 　データあり または
								 (Syuukei->Mno_use_ryo4[pkno_syu][data_no] != 0) ||
								 (prn_zero == YES)) ) {									// 　データなしでも印字あり(14-0010=1)
								f_PrintExec = 1;
							}
						} else {														// 多店舗割引あり
							if( (Syuukei->Mno_use_cnt4[pkno_syu][data_no] != 0) ||		// データあり または
								(Syuukei->Mno_use_ryo4[pkno_syu][data_no] != 0) ||
								(((s_data1 != 0) || (s_data2 != 0)) &&					// 　店割引設定あり かつ
								 (prn_zero == YES)) ) {									// 　データなしでも印字あり(14-0010=1)
								f_PrintExec = 1;
							}
						}

// GG124100(S) R.Endo 2022/08/23 車番チケットレス3.0 #6543 集計に「定期01」が常に印字される
						}
// GG124100(E) R.Endo 2022/08/23 車番チケットレス3.0 #6543 集計に「定期01」が常に印字される

						if ( f_PrintExec ) {
// MH810104(E) R.Endo 2021/08/31 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(割引回数・金額印字データ編集処理の変更)
							sprintf( cEditwk1,"%s%03d", MnoUse_Prn4[pkno_syu], data_no+1 );				// cEditwk1に「店Ｎｏ．印字ﾃﾞｰﾀ」編集

							edit_cnt += Prn_edit_KaiKin	(												// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
															cEditwk1,									// 印字項目
															Syuukei->Mno_use_cnt4[pkno_syu][data_no],	// 回数ﾃﾞｰﾀ
															Syuukei->Mno_use_ryo4[pkno_syu][data_no],	// 金額ﾃﾞｰﾀ
															pri_kind									// 印字先ﾌﾟﾘﾝﾀ
														);

							if( (edit_cnt+2) > EDIT_GYOU_MAX ){											// 編集行数ﾁｪｯｸ

								// 次ﾃﾞｰﾀ編集（２行）が不可の場合
								edit_flg = NO;															// 編集処理終了ﾌﾗｸﾞｾｯﾄ
								data_no++;																// 次処理で対象とする店Ｎｏ．ﾃﾞｰﾀのｵﾌｾｯﾄ値ｾｯﾄ
								break;																	// 店Ｎｏ．毎ﾃﾞｰﾀ編集処理ﾙｰﾌﾟを抜ける
							}
						}
					}
					if( data_no >= MISE_NO_MAX ){														// 全店Ｎｏ．編集終了？

						// 全店Ｎｏ．編集終了の場合
						p_proc_data->Prn_no_data1++;													// 次処理で編集する項目ﾒﾆｭｰｵﾌｾｯﾄ値更新
						p_proc_data->Prn_no_data2 = 0;
					}
					else{
						p_proc_data->Prn_no_data2 = data_no;											// 次処理で対象とする店Ｎｏ．ﾃﾞｰﾀのｵﾌｾｯﾄ値をｾｰﾌﾞ
					}

					break;

			case	2:		// 店Ｎｏ．１～１００合計

					// 印字有無判定（ﾃﾞｰﾀが≠０　または　０でも印字する場合、印字する）
					if( (Syuukei->Mno_use_cnt2[pkno_syu] != 0) || (Syuukei->Mno_use_ryo2[pkno_syu] != 0) || (prn_zero == YES) ){

						edit_cnt += Prn_edit_KaiKin	(										// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
														MnoUse_Prn1[pkno_syu],				// 印字項目
														Syuukei->Mno_use_cnt2[pkno_syu],	// 回数ﾃﾞｰﾀ
														Syuukei->Mno_use_ryo2[pkno_syu],	// 金額ﾃﾞｰﾀ
														pri_kind							// 印字先ﾌﾟﾘﾝﾀ
													);
					}

					if( (edit_cnt+2) > EDIT_GYOU_MAX ){										// 編集行数ﾁｪｯｸ

						// 次ﾃﾞｰﾀ編集（２行）が不可の場合
						edit_flg = NO;														// 編集処理終了ﾌﾗｸﾞｾｯﾄ
					}
					p_proc_data->Prn_no_data1++;											// 次処理で編集する項目ﾒﾆｭｰｵﾌｾｯﾄ値更新

					break;

			case	3:		// 店Ｎｏ．１０１～９９９合計

					// 印字有無判定（ﾃﾞｰﾀが≠０　または　０でも印字する場合、印字する）
					if( (Syuukei->Mno_use_cnt3[pkno_syu] != 0) || (Syuukei->Mno_use_ryo3[pkno_syu] != 0) || (prn_zero == YES) ){

						edit_cnt += Prn_edit_KaiKin	(										// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
														MnoUse_Prn2[pkno_syu],				// 印字項目
														Syuukei->Mno_use_cnt3[pkno_syu],	// 回数ﾃﾞｰﾀ
														Syuukei->Mno_use_ryo3[pkno_syu],	// 金額ﾃﾞｰﾀ
														pri_kind							// 印字先ﾌﾟﾘﾝﾀ
													);
					}

					if( (edit_cnt+2) > EDIT_GYOU_MAX ){										// 編集行数ﾁｪｯｸ

						// 次ﾃﾞｰﾀ編集（２行）が不可の場合
						edit_flg = NO;														// 編集処理終了ﾌﾗｸﾞｾｯﾄ
					}
					p_proc_data->Prn_no_data1++;											// 次処理で編集する項目ﾒﾆｭｰｵﾌｾｯﾄ値更新

					break;

			case	4:		// 全店割引合計

					// 印字有無判定（ﾃﾞｰﾀが≠０　または　０でも印字する場合、印字する）
					total_cnt = Syuukei->Mno_use_cnt1[pkno_syu];
					total_ryo = Syuukei->Mno_use_ryo1[pkno_syu];
					if (pkno_syu == KAKUCHOU_1) {
						if (prm_get( COM_PRM, S_TOT, 16, 1, 3 ) == 1) {
							total_cnt += Syuukei->Mno_use_cnt1[KAKUCHOU_2];
							total_ryo += Syuukei->Mno_use_ryo1[KAKUCHOU_2];
						}
						if (prm_get( COM_PRM, S_TOT, 16, 1, 4 ) == 1) {
							total_cnt += Syuukei->Mno_use_cnt1[KAKUCHOU_3];
							total_ryo += Syuukei->Mno_use_ryo1[KAKUCHOU_3];
						}
					}
					if( (total_cnt != 0) || (total_ryo != 0) || (prn_zero == YES) ){

						edit_cnt += Prn_edit_KaiKin	(										// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
														MnoUse_Prn3[pkno_syu],				// 印字項目
														total_cnt,							// 回数ﾃﾞｰﾀ
														total_ryo,							// 金額ﾃﾞｰﾀ
														pri_kind							// 印字先ﾌﾟﾘﾝﾀ
													);
					}

					if( (edit_cnt+2) > EDIT_GYOU_MAX ){										// 編集行数ﾁｪｯｸ

						// 次ﾃﾞｰﾀ編集（２行）が不可の場合
						edit_flg = NO;														// 編集処理終了ﾌﾗｸﾞｾｯﾄ
					}
					p_proc_data->Prn_no_data1++;											// 次処理で編集する項目ﾒﾆｭｰｵﾌｾｯﾄ値更新

					break;

			case	0:		// 印字項目終了
			default:		// 項目番号ｴﾗｰ
				edit_flg = NO;
				p_proc_data->Prn_no_data1 = 0;
				p_proc_data->Prn_no_data2 = 0;
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
				break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
		}
	}

// MH322914(S) K.Onodera 2017/03/08 AI-V対応：遠隔精算割引
	// ParkingWeb経由のParkiPro対応あり？ 且つ、遠隔精算割引あり？
	if( _is_ParkingWeb_pip() && Syuukei->Mno_use_cnt5 ){
		// 全て終了？
		if( p_proc_data->Prn_no_data1 == 0 && p_proc_data->Prn_no_data2 == 0 ){
			// 編集可能？
			if( (edit_cnt+2) > EDIT_GYOU_MAX ){
				// 終了させない
				p_proc_data->Prn_no_data2 = MISE_NO_MAX;
			}else{
				memset( cEditwk1, 0, sizeof(cEditwk1) );
				ulParam = prm_get( COM_PRM, S_CEN, 45, 4, 1 );
				// 4桁？
				if( ulParam > 999 ){
					sprintf( cEditwk1,"%s%4d", MnoUse_Prn4[0], ulParam );			// cEditwk1に「店Ｎｏ．印字ﾃﾞｰﾀ」編集
				}else{
					sprintf( cEditwk1,"%s%03d", MnoUse_Prn4[0], ulParam );			// cEditwk1に「店Ｎｏ．印字ﾃﾞｰﾀ」編集
				}
				edit_cnt += Prn_edit_KaiKin(										// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
												cEditwk1,							// 印字項目
												Syuukei->Mno_use_cnt5,				// 回数ﾃﾞｰﾀ
												Syuukei->Mno_use_ryo5,				// 金額ﾃﾞｰﾀ
												pri_kind							// 印字先ﾌﾟﾘﾝﾀ
											);
			}
		}
	}
// MH322914(E) K.Onodera 2017/03/08 AI-V対応：遠隔精算割引

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜割引券使用　回数・金額＞印字ﾃﾞｰﾀ編集処理							|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_WtikUse								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|						uchar			pkno_syu	=	駐車場Ｎｏ．種別	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-18													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_WtikUse( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data, uchar pkno_syu )
{
	uchar	inji_settei;		// 割引券集計印字設定（設定ﾃﾞｰﾀ）
	uchar	edit_flg = YES;		// 編集継続ﾌﾗｸﾞ
	uchar	edit_cnt = 0;		// 編集行数
	uchar	data_no;			// ﾃﾞｰﾀ番号
	ushort	s_add;				// 「割引券設定」	設定ﾃﾞｰﾀｱﾄﾞﾚｽ
	uchar	s_data1;			// 「役割」			設定ﾃﾞｰﾀ
	uchar	s_data2;			// 「種別切替」		設定ﾃﾞｰﾀ

	if( pkno_syu > PKNO_SYU_MAX ){	// 駐車場Ｎｏ．種別　ﾁｪｯｸ
		return( edit_cnt );
	}

	s_data1	= (uchar)prm_get( COM_PRM, S_WAR, 1, 1, 1 );	// 「割引券設定（割引券使用）」	設定ﾃﾞｰﾀ取得
	if( s_data1 == 0 ){										// 割引券＝使用しない？

		p_proc_data->Prn_no_data1 = 0;
		p_proc_data->Prn_no_data2 = 0;

		return( edit_cnt );
	}

	if( (p_proc_data->Prn_no_data1 == 0) && (p_proc_data->Prn_no_data2 == 0) ){

		//	割引券集計印字処理開始の場合

		/*------------------------------------------------------------------------------*/
		/*	編集処理制御ﾜｰｸを以下のように使用する										*/
		/*		Prn_no_data1	：	処理中の印字項目ﾒﾆｭｰｵﾌｾｯﾄ値							*/
		/*		Prn_no_data2	：	割引種別毎印字中に割引種別ﾃﾞｰﾀのｵﾌｾｯﾄ値を格納		*/
		/*		Prn_no_wk[]	：	印字項目ﾒﾆｭｰ（印字する項目番号の配列）					*/
		/*								1：割引種別毎									*/
		/*								2：全割引合計									*/
		/*------------------------------------------------------------------------------*/

		switch( pkno_syu ){		// 駐車場Ｎｏ．種別により「割引券印字ﾌｫｰﾏｯﾄ」	設定ﾃﾞｰﾀ取得

			case	KIHON_PKNO:	// 基本

				inji_settei = (uchar)prm_get( COM_PRM, S_TOT, 18, 1, 1 );
				break;

			case	KAKUCHOU_1:	// 拡張１

				inji_settei = (uchar)prm_get( COM_PRM, S_TOT, 18, 1, 2 );
				break;

			case	KAKUCHOU_2:	// 拡張２

				inji_settei = (uchar)prm_get( COM_PRM, S_TOT, 18, 1, 3 );

				if( inji_settei == 0 ){
					// 「拡張１に加算して印字」の場合
					inji_settei = 0xFF;						// 印字なし
				}
				else if( inji_settei == 1 ){
					// 「拡張２の全割引合計を印字」の場合
					inji_settei = 1;						// 全店割引の合計を印字
				}
				else{
					// その他（設定エラー）
					inji_settei = 0xFF;						// 印字なし
				}
				break;

			case	KAKUCHOU_3:	// 拡張３

				inji_settei = (uchar)prm_get( COM_PRM, S_TOT, 18, 1, 4 );

				if( inji_settei == 0 ){
					// 「拡張１に加算して印字」の場合
					inji_settei = 0xFF;						// 印字なし
				}
				else if( inji_settei == 1 ){
					// 「拡張３の全割引合計を印字」の場合
					inji_settei = 1;						// 全店割引の合計を印字
				}
				else{
					// その他（設定エラー）
					inji_settei = 0xFF;						// 印字なし
				}
				break;
		}

		switch( inji_settei ){	// 印字設定により印字項目ﾒﾆｭｰを編集

			case	0:	// 割引種別毎を印字
				p_proc_data->Prn_no_wk[0] = 1;		// ＜割引種別毎＞
				p_proc_data->Prn_no_wk[1] = 0;
				break;

			case	1:	// 全割引合計を印字
				p_proc_data->Prn_no_wk[0] = 2;		// ＜全割引合計＞
				p_proc_data->Prn_no_wk[1] =0;
				break;

			case	2:	// 全割引合計＆割引種別毎を印字
				p_proc_data->Prn_no_wk[0] = 2;		// ＜全割引合計＞
				p_proc_data->Prn_no_wk[1] = 1;		// ＜割引種別毎＞
				p_proc_data->Prn_no_wk[2] = 0;
				break;

			default:	// 設定ｴﾗｰ
				return( edit_cnt );
		}
	}

	for( ; edit_flg ; ){	// 印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟ

		switch( p_proc_data->Prn_no_wk[p_proc_data->Prn_no_data1] ){	// 印字項目？

			case	1:		// 割引種別毎

					data_no = (uchar)p_proc_data->Prn_no_data2;											// 対象とする割引種別毎ﾃﾞｰﾀのｵﾌｾｯﾄ値ｾｯﾄ

					for( ; data_no < WARIBIKI_SYU_MAX ; data_no++ ){									// 割引種別毎ﾃﾞｰﾀ編集処理ﾙｰﾌﾟ

						s_add	= (ushort)(2+(data_no*3));												// 対象割引種別の「割引券設定」設定ﾃﾞｰﾀｱﾄﾞﾚｽ取得
						s_data1	= (uchar)prm_get( COM_PRM, S_WAR, (short)s_add,     1, 1 );				// 「役割」		設定ﾃﾞｰﾀ取得
						s_data2	= (uchar)prm_get( COM_PRM, S_WAR, (short)(s_add+2), 2, 1 );				// 「種別切替」	設定ﾃﾞｰﾀ取得

						// 印字有無判定（「対象割引種別＝使用する」　且つ　「ﾃﾞｰﾀが≠０　または　０でも印字する」場合、印字する）
						if( ( s_data1 != 0 || s_data2 != 0 )
										&&
							( (Syuukei->Wtik_use_cnt2[pkno_syu][data_no] != 0) || (Syuukei->Wtik_use_ryo2[pkno_syu][data_no] != 0) || (prn_zero == YES) ) ){

							sprintf( cEditwk1,"%s%03d", WtikUse_Prn2[pkno_syu], data_no+1 );			// cEditwk1に「券種別＆割引種別印字ﾃﾞｰﾀ」編集

							edit_cnt += Prn_edit_KaiKin	(												// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
															cEditwk1,									// 印字項目
															Syuukei->Wtik_use_cnt2[pkno_syu][data_no],	// 回数ﾃﾞｰﾀ
															Syuukei->Wtik_use_ryo2[pkno_syu][data_no],	// 金額ﾃﾞｰﾀ
															pri_kind									// 印字先ﾌﾟﾘﾝﾀ
														);

							if( (edit_cnt+2) > EDIT_GYOU_MAX ){											// 編集行数ﾁｪｯｸ

								// 次ﾃﾞｰﾀ編集（２行）が不可の場合
								edit_flg = NO;															// 編集処理終了ﾌﾗｸﾞｾｯﾄ
								data_no++;																// 次処理で対象とする割引種別ﾃﾞｰﾀのｵﾌｾｯﾄ値ｾｯﾄ
								break;																	// 割引種別毎ﾃﾞｰﾀ編集処理ﾙｰﾌﾟを抜ける
							}
						}
					}
					if( data_no >= WARIBIKI_SYU_MAX ){													// 全割引種別編集終了？

						// 全割引種別編集終了の場合
						p_proc_data->Prn_no_data1++;													// 次処理で編集する項目ﾒﾆｭｰｵﾌｾｯﾄ値更新
						p_proc_data->Prn_no_data2 = 0;
					}
					else{
						p_proc_data->Prn_no_data2 = data_no;											// 次処理で対象とする店割引種別ﾃﾞｰﾀのｵﾌｾｯﾄ値をｾｰﾌﾞ
					}

					break;

			case	2:		// 全割引合計

					// 印字有無判定（ﾃﾞｰﾀが≠０　または　０でも印字する場合、印字する）
					if( (Syuukei->Wtik_use_cnt1[pkno_syu] != 0) || (Syuukei->Wtik_use_ryo1[pkno_syu] != 0) || (prn_zero == YES) ){

						edit_cnt += Prn_edit_KaiKin	(										// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
														WtikUse_Prn1[pkno_syu],				// 印字項目
														Syuukei->Wtik_use_cnt1[pkno_syu],	// 回数ﾃﾞｰﾀ
														Syuukei->Wtik_use_ryo1[pkno_syu],	// 金額ﾃﾞｰﾀ
														pri_kind							// 印字先ﾌﾟﾘﾝﾀ
													);
					}

					if( (edit_cnt+2) > EDIT_GYOU_MAX ){										// 編集行数ﾁｪｯｸ

						// 次ﾃﾞｰﾀ編集（２行）が不可の場合
						edit_flg = NO;														// 編集処理終了ﾌﾗｸﾞｾｯﾄ
					}
					p_proc_data->Prn_no_data1++;											// 次処理で編集する項目ﾒﾆｭｰｵﾌｾｯﾄ値更新

					break;

			case	0:		// 印字項目終了
			default:		// 項目番号ｴﾗｰ
				edit_flg = NO;
				p_proc_data->Prn_no_data1 = 0;
				p_proc_data->Prn_no_data2 = 0;
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
				break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
		}
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜定期券種別毎使用　回数＞印字ﾃﾞｰﾀ編集処理							|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_TeikiUse								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|						uchar			pkno_syu	=	駐車場Ｎｏ．種別	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-18													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_TeikiUse( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data, uchar pkno_syu )
{
	uchar	edit_cnt = 0;	// 編集行数
	uchar	teiki_syu;		// 定期券種別
	ushort	s_add;			// 「定期設定」	設定ﾃﾞｰﾀｱﾄﾞﾚｽ
	uchar	s_data;			// 「使用目的」	設定ﾃﾞｰﾀ

	if( pkno_syu <= PKNO_SYU_MAX ){																		// 駐車場Ｎｏ．種別　ﾁｪｯｸ
		for( teiki_syu = 0 ; teiki_syu < TEIKI_SYU_MAX ; teiki_syu++ ){									// 定期券種別毎編集処理ﾙｰﾌﾟ

// GG124100(S) R.Endo 2022/08/23 車番チケットレス3.0 #6543 集計に「定期01」が常に印字される
			if ( CLOUD_CALC_MODE ) {	// クラウド料金計算モード
				if ( Syuukei->Teiki_use_cnt[pkno_syu][teiki_syu] ) {	// 回数が0回ではない
					s_data = 1;	// 印字する
				} else {												// 回数が0回
					s_data = 0;	// 印字しない
				}
			} else {					// 通常料金計算モード
// GG124100(E) R.Endo 2022/08/23 車番チケットレス3.0 #6543 集計に「定期01」が常に印字される

			s_add	= (ushort)(1+(teiki_syu*10));														// 対象定期種別の「使用目的」設定ﾃﾞｰﾀｱﾄﾞﾚｽ取得
			s_data	= (uchar)prm_get( COM_PRM, S_PAS, (short)s_add, 2, 1 );								// 「使用目的」	設定ﾃﾞｰﾀ取得

// GG124100(S) R.Endo 2022/08/23 車番チケットレス3.0 #6543 集計に「定期01」が常に印字される
			}
// GG124100(E) R.Endo 2022/08/23 車番チケットレス3.0 #6543 集計に「定期01」が常に印字される

			// 印字有無判定（「対象定期種別＝使用する」場合、印字する）
			if( s_data != 0 ){

				edit_cnt += Prn_edit_Sitei1line	(														// ----- 回数印字ﾃﾞｰﾀ編集 -----
													TeikiTicket[pkno_syu][teiki_syu],					// 印字項目
													(ulong)Syuukei->Teiki_use_cnt[pkno_syu][teiki_syu],	// 回数ﾃﾞｰﾀ
													Pri_Tanni[PriT_KAISUU],								// 単位１：回数
													Pri_Tanni[PriT_KAI],								// 単位２：回
													pri_kind											// 印字先ﾌﾟﾘﾝﾀ
												);
			}
		}
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜定期券種別毎更新　回数・金額＞印字ﾃﾞｰﾀ編集処理					|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_TeikiKou								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|						uchar			pkno_syu	=	駐車場Ｎｏ．種別	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-18													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_TeikiKou( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data, uchar pkno_syu )
{
	uchar	edit_cnt = 0;	// 編集行数
	uchar	teiki_syu;		// 定期券種別
	ushort	s_add;			// 「定期設定」	設定ﾃﾞｰﾀｱﾄﾞﾚｽ
	uchar	s_data;			// 「使用目的」	設定ﾃﾞｰﾀ

	if( pkno_syu <= PKNO_SYU_MAX ){															// 駐車場Ｎｏ．種別　ﾁｪｯｸ

		teiki_syu = (uchar)p_proc_data->Prn_no_data1;										// 編集対象とする定期種別ﾃﾞｰﾀ番号ｾｯﾄ

		for( ; teiki_syu < TEIKI_SYU_MAX ; teiki_syu++ ){									// 定期券種別毎編集処理ﾙｰﾌﾟ

			s_add	= (ushort)(34+(teiki_syu*10));											// 対象定期種別の「更新月数」設定ﾃﾞｰﾀｱﾄﾞﾚｽ取得
			s_data	= (uchar)CPrmSS[S_KOU][s_add];											// 「更新月数」	設定ﾃﾞｰﾀ取得

			// 印字有無判定（「対象定期種別＝使用する」　且つ　「ﾃﾞｰﾀが≠０　または　０でも印字する」場合、印字する）
			if( s_data != 0 &&
				( (Syuukei->Teiki_kou_cnt[pkno_syu][teiki_syu] != 0) || (Syuukei->Teiki_kou_ryo[pkno_syu][teiki_syu] != 0) || (prn_zero == YES) ) ){


				sprintf( cEditwk1,"%s%s", TeikiTicket[pkno_syu][teiki_syu], "更新" );		// cEditwk1に印字項目ﾃﾞｰﾀ編集

				edit_cnt += Prn_edit_KaiKin	(												// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
												cEditwk1,									// 印字項目
												Syuukei->Teiki_kou_cnt[pkno_syu][teiki_syu],// 回数ﾃﾞｰﾀ
												Syuukei->Teiki_kou_ryo[pkno_syu][teiki_syu],// 金額ﾃﾞｰﾀ
												pri_kind									// 印字先ﾌﾟﾘﾝﾀ
											);

				if( (edit_cnt+2) > EDIT_GYOU_MAX ){											// 編集行数ﾁｪｯｸ

					// 次ﾃﾞｰﾀ編集（２行）が不可の場合

					teiki_syu++;															// 次処理で検索する定期種別ﾃﾞｰﾀ番号をｾｯﾄ
					break;																	// ﾃﾞｰﾀ編集処理ﾙｰﾌﾟを抜ける
				}

			}
		}

		if( teiki_syu >= TEIKI_SYU_MAX ){													// 定期種別毎ﾃﾞｰﾀ編集終了？

			// 全ての定期種別について編集終了した場合
			p_proc_data->Prn_no_data1	= 0;												// 定期種別ﾃﾞｰﾀ番号ﾘｾｯﾄ
		}
		else{
			// 未編集の定期種別がある場合
			p_proc_data->Prn_no_data1 = teiki_syu;											// 次に編集する定期種別ﾃﾞｰﾀ番号をｾｰﾌﾞ
		}
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜分類集計＞印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_BunruiSk								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-23													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_BunruiSk( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	uchar	data_no;			// ﾃﾞｰﾀ番号
	uchar	syuukei_syu;		// 分類集計種別
	uchar	bunrui_cnt;			// 分類数
	uchar	edit_flg = YES;		// 編集継続ﾌﾗｸﾞ
	uchar	l1_tani1;			// ４８区分ﾃﾞｰﾀ１行目印字ﾃﾞｰﾀ単位１
	uchar	l1_tani2;			// ４８区分ﾃﾞｰﾀ１行目印字ﾃﾞｰﾀ単位２
	uchar	l2_tani1;			// ４８区分ﾃﾞｰﾀ２行目印字ﾃﾞｰﾀ単位１
	uchar	l2_tani2;			// ４８区分ﾃﾞｰﾀ２行目印字ﾃﾞｰﾀ単位２
	int		i;
	uchar	flg_ok = 0;


	syuukei_syu	= (uchar)CPrmSS[S_BUN][1];		// 「分類集計種別」		設定ﾃﾞｰﾀ取得
	bunrui_cnt	= (uchar)CPrmSS[S_BUN][2];		// 「分類集計分類数」	設定ﾃﾞｰﾀ取得

	if( ( (syuukei_syu >= BUNRUI_SYU_MIN) &&  (syuukei_syu <= BUNRUI_SYU_MAX) )		// 分類集計設定あり？
				&&
		( (bunrui_cnt >= BUNRUI_MIN) && (bunrui_cnt <= BUNRUI_MAX) ) ){

		//	分類集計の設定がされている場合

		/*------------------------------------------------------------------------------*/
		/*	編集処理制御ﾜｰｸを以下のように使用する										*/
		/*		Prn_no_data1	：	処理中の印字項目番号を格納							*/
		/*								0：表題											*/
		/*								1：４８区分のﾃﾞｰﾀ								*/
		/*								2：区分以上のﾃﾞｰﾀ								*/
		/*								3：区分不明のﾃﾞｰﾀ								*/
		/*		Prn_no_data2	：	４８区分のﾃﾞｰﾀ印字中に区分ﾃﾞｰﾀのｵﾌｾｯﾄ値を格納		*/
		/*		Prn_no_wk[5]	:	分類車種の値を格納									*/
		/*------------------------------------------------------------------------------*/

		l1_tani1 = bunruisk_edit_tbl[syuukei_syu-1][1];			// １行目印字ﾃﾞｰﾀ単位１
		l1_tani2 = bunruisk_edit_tbl[syuukei_syu-1][2];			// １行目印字ﾃﾞｰﾀ単位２
		l2_tani1 = bunruisk_edit_tbl[syuukei_syu-1][3];			// ２行目印字ﾃﾞｰﾀ単位１
		l2_tani2 = bunruisk_edit_tbl[syuukei_syu-1][4];			// ２行目印字ﾃﾞｰﾀ単位２

		for( ; edit_flg ; ){	// 分類集計印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟ

			switch( p_proc_data->Prn_no_data1){		// 印字項目？

				case	0:		// ＜表題（分類集計種別）＞
					for(i = 1 ; i <= 6 ; i++){														//分類車種印字項目チェック
						if(p_proc_data->Prn_no_wk[5] == (uchar)(prm_get(COM_PRM, S_BUN, 52, 1, (char)i)-1)){
							flg_ok = 1;
							break;
						}
						if(p_proc_data->Prn_no_wk[5] == (uchar)(prm_get(COM_PRM, S_BUN, 53, 1, (char)i)-1)){
							flg_ok = 1;
							break;
						}
					}
					if(flg_ok == 0){																// 印字項目無
						if(p_proc_data->Prn_no_wk[5] >= 3){											// 分類車種項目終了？
							edit_flg = NO;															// 編集処理終了ﾌﾗｸﾞｾｯﾄ
							p_proc_data->Prn_no_wk[5] = 0;											// 分類車種値クリア
							p_proc_data->Prn_no_data1 = 0;											// 処理中の印字項目番号クリア
							p_proc_data->Prn_no_data2 = 0;											// 区分ﾃﾞｰﾀのｵﾌｾｯﾄ値クリア
							break;
						}
						p_proc_data->Prn_no_wk[5]++;												// 分類車種ｲﾝｸﾘﾒﾝﾄ
						break;
					}
					Str_Set1( BunruiSyu_Prn[p_proc_data->Prn_no_wk[5]] , "" , pri_kind );			// 分類車種編集

					edit_cnt += Prn_edit_Title	(													// 分類集計タイトル編集
													BunruiTtl_Prn[syuukei_syu-1],
													FONT_K_NML,
													pri_kind
												);

					p_proc_data->Prn_no_data1++;													// 次に編集する印字項目番号ｾｯﾄ
					p_proc_data->Prn_no_data2 = 0;

					break;

				case	1:		// ＜４８区分のﾃﾞｰﾀ＞

					data_no = (uchar)p_proc_data->Prn_no_data2;										// 編集対象とする集計区分ﾃﾞｰﾀのｵﾌｾｯﾄ値を取得

					for( ; data_no < bunrui_cnt ; data_no++ ){										// 集計区分毎ﾃﾞｰﾀ編集処理ﾙｰﾌﾟ

						switch( syuukei_syu ){	// 分類集計種別？

							case	1:			// 駐車時間別台数集計
							case	3:			// 駐車料金別台数集計
							case	5:			// 入庫時刻別台数集計
							case	6:			// 精算時刻別台数集計
							case	8:			// 出庫時刻別台数集計

								BunruiSk_Kubun_edit1( syuukei_syu, (uchar)(data_no+1), cEditwk1 );	// 集計範囲印字ﾃﾞｰﾀ編集（４８区分）
								edit_cnt += Prn_edit_Sitei1line	(									// ----- 印字ﾃﾞｰﾀ編集 -----
																	cEditwk1,						// 集計範囲
																	Syuukei->Bunrui1_cnt[p_proc_data->Prn_no_wk[5]][data_no],	// ﾃﾞｰﾀ
																	Pri_Tanni[l1_tani1],			// 単位１
																	Pri_Tanni[l1_tani2],			// 単位２
																	pri_kind						// 印字先ﾌﾟﾘﾝﾀ
																);
								break;

							case	2:			// 駐車時間別台数・料金集計
							case	4:			// 駐車料金別台数・料金集計
							case	7:			// 入庫・精算時刻別台数集計
							case	9:			// 入庫・出庫時刻別台数集計

								BunruiSk_Kubun_edit1( syuukei_syu, (uchar)(data_no+1), cEditwk1 );	// 集計範囲印字ﾃﾞｰﾀ編集（４８区分）
								edit_cnt += Prn_edit_Sitei1line	(									// ----- 印字ﾃﾞｰﾀ編集 -----
																	cEditwk1,						// 集計範囲
																	Syuukei->Bunrui1_cnt[p_proc_data->Prn_no_wk[5]][data_no],	// ﾃﾞｰﾀ
																	Pri_Tanni[l1_tani1],			// 単位１
																	Pri_Tanni[l1_tani2],			// 単位２
																	pri_kind						// 印字先ﾌﾟﾘﾝﾀ
																);
								edit_cnt += Prn_edit_Sitei1line	(									// ----- 印字ﾃﾞｰﾀ編集 -----
																	"",								// 
																	Syuukei->Bunrui1_ryo[p_proc_data->Prn_no_wk[5]][data_no],	// 料金ﾃﾞｰﾀ
																	Pri_Tanni[l2_tani1],			// 単位１
																	Pri_Tanni[l2_tani2],			// 単位２
																	pri_kind						// 印字先ﾌﾟﾘﾝﾀ
																);

						}

						if( (edit_cnt+bunruisk_edit_tbl[syuukei_syu-1][0]) >= EDIT_GYOU_MAX ){		// 編集行数ﾁｪｯｸ
							// 次ﾃﾞｰﾀ編集が不可の場合
							edit_flg = NO;															// 編集処理終了ﾌﾗｸﾞｾｯﾄ
							data_no++;																// 次処理で対象とする区分毎ﾃﾞｰﾀのｵﾌｾｯﾄ値ｾｯﾄ
							break;																	// 集計区分毎ﾃﾞｰﾀ編集処理ﾙｰﾌﾟを抜ける
						}
					}
					if( data_no >= bunrui_cnt ){
						//	全区分編集終了の場合
						p_proc_data->Prn_no_data1++;												// 次に編集する印字項目番号ｾｯﾄ
						p_proc_data->Prn_no_data2 = 0;
					}
					else{
						//	未編集の区分がある場合
						p_proc_data->Prn_no_data2 = data_no;										// 次処理で対象とする集計区分ﾃﾞｰﾀのｵﾌｾｯﾄ値をｾｰﾌﾞ
					}

					break;

				case	2:		// ＜区分以上のﾃﾞｰﾀ＞

					BunruiSk_Kubun_edit2( syuukei_syu, cEditwk1 );							// 集計範囲印字ﾃﾞｰﾀ編集（分類区分以上）

					switch( syuukei_syu ){	// 分類集計種別？

						case	1:			// 駐車時間別台数集計
						case	3:			// 駐車料金別台数集計

							edit_cnt += Prn_edit_Sitei1line	(								// ----- 印字ﾃﾞｰﾀ編集 -----
																cEditwk1,					// 集計範囲
																Syuukei->Bunrui1_cnt1[p_proc_data->Prn_no_wk[5]],		// ﾃﾞｰﾀ
																Pri_Tanni[l1_tani1],		// 単位１
																Pri_Tanni[l1_tani2],		// 単位２
																pri_kind					// 印字先ﾌﾟﾘﾝﾀ
															);
							break;

						case	2:			// 駐車時間別台数・料金集計
						case	4:			// 駐車料金別台数・料金集計

							edit_cnt += Prn_edit_Sitei1line	(								// ----- 印字ﾃﾞｰﾀ編集 -----
																cEditwk1,					// 集計範囲
																Syuukei->Bunrui1_cnt1[p_proc_data->Prn_no_wk[5]],		// ﾃﾞｰﾀ
																Pri_Tanni[l1_tani1],		// 単位１
																Pri_Tanni[l1_tani2],		// 単位２
																pri_kind					// 印字先ﾌﾟﾘﾝﾀ
															);
							edit_cnt += Prn_edit_Sitei1line	(								// ----- 印字ﾃﾞｰﾀ編集 -----
																"",							// 
																Syuukei->Bunrui1_ryo1[p_proc_data->Prn_no_wk[5]],		// ﾃﾞｰﾀ
																Pri_Tanni[l2_tani1],		// 単位１
																Pri_Tanni[l2_tani2],		// 単位２
																pri_kind					// 印字先ﾌﾟﾘﾝﾀ
															);

					}

// MH322914 (s) kasiyama 2016/07/11 分類集計の区分不明を印字しない[共通バグNo.1247](MH341106)
//					p_proc_data->Prn_no_data1++;											// 次に編集する印字項目番号ｾｯﾄ
//
//					if( edit_cnt + 2 >= EDIT_GYOU_MAX ){									// 編集行数ﾁｪｯｸ
//
//						// 次ﾃﾞｰﾀ編集が不可の場合
//						edit_flg = NO;														// 編集処理終了ﾌﾗｸﾞｾｯﾄ
//					}
//
//					break;
//
//				case	3:		// ＜区分不明のﾃﾞｰﾀ＞
//
//					BunruiSk_Kubun_edit3( syuukei_syu, cEditwk1 );							// 集計範囲印字ﾃﾞｰﾀ編集（分類区分不明）
//
//					switch( syuukei_syu ){	// 分類集計種別？
//
//						case	1:			// 駐車時間別台数集計
//						case	3:			// 駐車料金別台数集計
//						case	5:			// 入庫時刻別台数集計
//						case	6:			// 精算時刻別台数集計
//						case	8:			// 出庫時刻別台数集計
//
//							edit_cnt += Prn_edit_Sitei1line	(								// ----- 印字ﾃﾞｰﾀ編集 -----
//																cEditwk1,					// 集計範囲
//																Syuukei->Bunrui1_cnt2[p_proc_data->Prn_no_wk[5]],		// ﾃﾞｰﾀ
//																Pri_Tanni[l1_tani1],		// 単位１
//																Pri_Tanni[l1_tani2],		// 単位２
//																pri_kind					// 印字先ﾌﾟﾘﾝﾀ
//															);
//							break;
//
//						case	2:			// 駐車時間別台数・料金集計
//						case	4:			// 駐車料金別台数・料金集計
//						case	7:			// 入庫・精算時刻別台数集計
//						case	9:			// 入庫・出庫時刻別台数集計
//
//							edit_cnt += Prn_edit_Sitei1line	(								// ----- 印字ﾃﾞｰﾀ編集 -----
//																cEditwk1,					// 集計範囲
//																Syuukei->Bunrui1_cnt2[p_proc_data->Prn_no_wk[5]],		// ﾃﾞｰﾀ
//																Pri_Tanni[l1_tani1],		// 単位１
//																Pri_Tanni[l1_tani2],		// 単位２
//																pri_kind					// 印字先ﾌﾟﾘﾝﾀ
//															);
//							edit_cnt += Prn_edit_Sitei1line	(								// ----- 印字ﾃﾞｰﾀ編集 -----
//																"",							// 
//																Syuukei->Bunrui1_ryo2[p_proc_data->Prn_no_wk[5]],		// ﾃﾞｰﾀ
//																Pri_Tanni[l2_tani1],		// 単位１
//																Pri_Tanni[l2_tani2],		// 単位２
//																pri_kind					// 印字先ﾌﾟﾘﾝﾀ
//															);
//
//					}
// MH322914 (e) kasiyama 2016/07/11 分類集計の区分不明を印字しない[共通バグNo.1247](MH341106)
// MH322914 (S) K.Onodera 2016/09/06 分類集計の区分不明を印字しない[共通バグNo.1247](MH341106)
// 不具合修正(S) K.Onodera 2016/10/26 #1506 分類集計で分類によってあり得ないはずの不明台数が印字されるケースがある
					if( !_is_ParkingWeb_pip() ){
						p_proc_data->Prn_no_wk[5]++;		// 分類車種値ｲﾝｸﾘﾒﾝﾄ
						flg_ok = 0;							// 印字フラグクリア
						p_proc_data->Prn_no_data1 = 0;
						p_proc_data->Prn_no_data2 = 0;
						break;
					}
// 不具合修正(E) K.Onodera 2016/10/26 #1506 分類集計で分類によってあり得ないはずの不明台数が印字されるケースがある
					p_proc_data->Prn_no_data1++;											// 次に編集する印字項目番号ｾｯﾄ

					if( edit_cnt + 2 >= EDIT_GYOU_MAX ){									// 編集行数ﾁｪｯｸ
						// 次ﾃﾞｰﾀ編集が不可の場合
						edit_flg = NO;														// 編集処理終了ﾌﾗｸﾞｾｯﾄ
					}
					break;

				case 3:		// ＜区分不明のﾃﾞｰﾀ＞

// 不具合修正(S) K.Onodera 2016/10/26 #1506 分類集計で分類によってあり得ないはずの不明台数が印字されるケースがある
//					BunruiSk_Kubun_edit3( syuukei_syu, cEditwk1 );							// 集計範囲印字ﾃﾞｰﾀ編集（分類区分不明）
					if( !_is_ParkingWeb_pip() ){
						break;
					}
// 不具合修正(E) K.Onodera 2016/10/26 #1506 分類集計で分類によってあり得ないはずの不明台数が印字されるケースがある

					switch( syuukei_syu ){	// 分類集計種別？
						case	1:			// 駐車時間別台数集計
// 不具合修正(S) K.Onodera 2016/09/30 #1506 分類集計で分類によってあり得ないはずの不明台数が印字されるケースがある
//						case	2:			// 駐車時間別台数・料金集計
//						case	3:			// 駐車料金別台数集計
//						case	4:			// 駐車料金別台数・料金集計
// 不具合修正(E) K.Onodera 2016/09/30 #1506 分類集計で分類によってあり得ないはずの不明台数が印字されるケースがある
						case	5:			// 入庫時刻別台数集計
// 不具合修正(S) K.Onodera 2016/09/30 #1506 分類集計で分類によってあり得ないはずの不明台数が印字されるケースがある
//						case	6:			// 精算時刻別台数集計
// 不具合修正(E) K.Onodera 2016/09/30 #1506 分類集計で分類によってあり得ないはずの不明台数が印字されるケースがある
						case	7:			// 入庫・精算時刻別台数集計
						case	8:			// 出庫時刻別台数集計
						case	9:			// 入庫・出庫時刻別台数集計
// 不具合修正(S) K.Onodera 2016/09/30 #1506 分類集計で分類によってあり得ないはずの不明台数が印字されるケースがある
							BunruiSk_Kubun_edit3( syuukei_syu, cEditwk1 );							// 集計範囲印字ﾃﾞｰﾀ編集（分類区分不明）
// 不具合修正(E) K.Onodera 2016/09/30 #1506 分類集計で分類によってあり得ないはずの不明台数が印字されるケースがある
							edit_cnt += Prn_edit_Sitei1line	(								// ----- 印字ﾃﾞｰﾀ編集 -----
																cEditwk1,					// 集計範囲
																Syuukei->Bunrui1_cnt2[p_proc_data->Prn_no_wk[5]],		// ﾃﾞｰﾀ
																Pri_Tanni[l1_tani1],		// 単位１
																Pri_Tanni[l1_tani2],		// 単位２
																pri_kind					// 印字先ﾌﾟﾘﾝﾀ
															);
							break;

// 不具合修正(S) K.Onodera 2016/09/30 #1506 分類集計で分類によってあり得ないはずの不明台数が印字されるケースがある
						case	2:			// 駐車時間別台数・料金集計
// 不具合修正(S) K.Onodera 2016/09/30 #1506 分類集計で分類によってあり得ないはずの不明台数が印字されるケースがある
							BunruiSk_Kubun_edit3( syuukei_syu, cEditwk1 );							// 集計範囲印字ﾃﾞｰﾀ編集（分類区分不明）
// 不具合修正(E) K.Onodera 2016/09/30 #1506 分類集計で分類によってあり得ないはずの不明台数が印字されるケースがある
							edit_cnt += Prn_edit_Sitei1line	(								// ----- 印字ﾃﾞｰﾀ編集 -----
																cEditwk1,					// 集計範囲
																Syuukei->Bunrui1_cnt2[p_proc_data->Prn_no_wk[5]],		// ﾃﾞｰﾀ
																Pri_Tanni[l1_tani1],		// 単位１
																Pri_Tanni[l1_tani2],		// 単位２
																pri_kind					// 印字先ﾌﾟﾘﾝﾀ
															);
							edit_cnt += Prn_edit_Sitei1line	(								// ----- 印字ﾃﾞｰﾀ編集 -----
																"",							// 
																Syuukei->Bunrui1_ryo2[p_proc_data->Prn_no_wk[5]],		// ﾃﾞｰﾀ
																Pri_Tanni[l2_tani1],		// 単位１
																Pri_Tanni[l2_tani2],		// 単位２
																pri_kind					// 印字先ﾌﾟﾘﾝﾀ
															);
							break;

						default:
							break;
// 不具合修正(E) K.Onodera 2016/09/30 #1506 分類集計で分類によってあり得ないはずの不明台数が印字されるケースがある

					}
// MH322914 (E) K.Onodera 2016/09/06 分類集計の区分不明を印字しない[共通バグNo.1247](MH341106)

					p_proc_data->Prn_no_wk[5]++;		// 分類車種値ｲﾝｸﾘﾒﾝﾄ
					flg_ok = 0;							// 印字フラグクリア
					p_proc_data->Prn_no_data1 = 0;
					p_proc_data->Prn_no_data2 = 0;

					break;

				default:		// ＜項目番号ｴﾗｰ＞
					edit_flg = NO;
					p_proc_data->Prn_no_data1 = 0;
					p_proc_data->Prn_no_data2 = 0;
					p_proc_data->Prn_no_wk[5] = 0;		// 分類車種値クリア
					flg_ok = 0;							// 印字フラグクリア
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
					break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			}
		}
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜分類集計範囲＞印字ﾃﾞｰﾀ編集処理（４８区分）						|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	BunruiSk_Kubun_edit1								|*/
/*|																			|*/
/*|	PARAMETER		:	uchar	syu		=	分類集計種別（１～９）			|*/
/*|																			|*/
/*|						uchar	no		=	区分（１～４８）				|*/
/*|																			|*/
/*|						char	*p_str	=	編集ﾃﾞｰﾀｾｯﾄﾎﾟｲﾝﾀｰ				|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-23													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	BunruiSk_Kubun_edit1( uchar syu, uchar no, char *p_str )
{
	ulong	s_data1;	// 開始ﾃﾞｰﾀ（設定ﾃﾞｰﾀ）
	ulong	s_data2;	// 開始ﾃﾞｰﾀ（印字ﾃﾞｰﾀ１）
	ulong	s_data3;	// 開始ﾃﾞｰﾀ（印字ﾃﾞｰﾀ２）
	ulong	e_data1;	// 終了ﾃﾞｰﾀ（設定ﾃﾞｰﾀ）
	ulong	e_data2;	// 終了ﾃﾞｰﾀ（印字ﾃﾞｰﾀ１）
	ulong	e_data3;	// 終了ﾃﾞｰﾀ（印字ﾃﾞｰﾀ２）
	uchar	bun_cnt;	// 設定されている分類数

	// 入力ﾊﾟﾗﾒｰﾀﾁｪｯｸ
	if(	( (syu >= BUNRUI_SYU_MIN) && (syu <= BUNRUI_SYU_MAX) ) && ( (no >= BUNRUI_MIN) && (no <= BUNRUI_MAX) ) ){

		switch( syu ){	// 分類集計種別？

			case	1:	// 駐車時間別台数集計
			case	2:	// 駐車時間別台数・料金集計

				// 開始時間ﾃﾞｰﾀ
				if( no == 1 ){
					s_data1 = 0;
				}
				else{
					s_data1	= CPrmSS[S_BUN][2+(no-1)]*10 + 1;		// 「分類集計区分」	設定ﾃﾞｰﾀ取得（開始時間）
				}
				// 終了時間ﾃﾞｰﾀ
				e_data1	= CPrmSS[S_BUN][2+(no)]*10 ;				// 「分類集計区分」	設定ﾃﾞｰﾀ取得（終了時間）

				s_data2	= s_data1 / 60;								// 開始（時間）ﾃﾞｰﾀ
				s_data3	= s_data1 % 60;								// 開始（分）ﾃﾞｰﾀ
				e_data2	= e_data1 / 60;								// 終了（時間）ﾃﾞｰﾀ
				e_data3	= e_data1 % 60;								// 終了（分）ﾃﾞｰﾀ

				sprintf( p_str, "%d:%02d～%d:%02d", (int)s_data2, (int)s_data3, (int)e_data2, (int)e_data3 );	// 分類集計範囲の印字ﾃﾞｰﾀをｾｯﾄ

				break;

			case	3:	// 駐車料金別台数集計
			case	4:	// 駐車料金別台数・料金集計


				// 開始料金ﾃﾞｰﾀ
				if( no == 1 ){
					s_data1 = 0;
				}
				else{
					s_data1	= CPrmSS[S_BUN][2+(no-1)]*10 + 1;		// 「分類集計区分」	設定ﾃﾞｰﾀ取得（開始料金）
				}
				// 終了料金ﾃﾞｰﾀ
				e_data1	= CPrmSS[S_BUN][2+(no)]*10 ;				// 「分類集計区分」	設定ﾃﾞｰﾀ取得（終了料金）

				sprintf( p_str, "%ld～%ld円", s_data1, e_data1 );	// 分類集計範囲の印字ﾃﾞｰﾀをｾｯﾄ

				break;

			case	5:	// 入庫時刻別台数集計
			case	6:	// 精算時刻別台数集計
			case	7:	// 入庫・精算時刻別台数集計
			case	8:	// 出庫時刻別台数集計
			case	9:	// 入庫・出庫時刻別台数集計

				// 開始時刻ﾃﾞｰﾀ
				if( no == 1 ){
					bun_cnt	= (uchar)CPrmSS[S_BUN][2];										// 「分類集計分類数」	設定ﾃﾞｰﾀ取得
					s_data2 = prm_get( COM_PRM, S_BUN, (short)(2+(bun_cnt)), 2, 3 );		// 「分類集計区分」	設定ﾃﾞｰﾀ取得（開始時刻：時）
					s_data3 = prm_get( COM_PRM, S_BUN, (short)(2+(bun_cnt)), 2, 1 ) + 1;	// 「分類集計区分」	設定ﾃﾞｰﾀ取得（開始時刻：分）
				}
				else{
					s_data2 = prm_get( COM_PRM, S_BUN, (short)(2+(no-1)), 2, 3 );			// 「分類集計区分」	設定ﾃﾞｰﾀ取得（開始時刻：時）
					s_data3 = prm_get( COM_PRM, S_BUN, (short)(2+(no-1)), 2, 1 ) + 1;		// 「分類集計区分」	設定ﾃﾞｰﾀ取得（開始時刻：分）
				}
				if( s_data3 == 60 ){
					// 開始時刻（分）が６０の場合
					s_data2++;																// 開始時刻（時）＋１
					if( s_data2 == 24 ){
						// 開始時刻（時）が２４の場合
						s_data2 = 0;														// 開始時刻（時）：００
					}
					s_data3 = 0;															// 開始時刻（分）：００
				}

				// 終了時刻ﾃﾞｰﾀ
				e_data2 = prm_get( COM_PRM, S_BUN, (short)(2+no), 2, 3 );					// 「分類集計区分」	設定ﾃﾞｰﾀ取得（終了時刻：時）
				e_data3 = prm_get( COM_PRM, S_BUN, (short)(2+no), 2, 1 );					// 「分類集計区分」	設定ﾃﾞｰﾀ取得（終了時刻：分）

				sprintf( p_str, "%02d:%02d～%02d:%02d", (int)s_data2, (int)s_data3, (int)e_data2, (int)e_data3 );	// 分類集計範囲の印字ﾃﾞｰﾀをｾｯﾄ
		}
	}
	else{
		// 入力ﾊﾟﾗﾒｰﾀが範囲外の場合
		sprintf( p_str, "");																// 分類集計範囲の印字ﾃﾞｰﾀに空白をｾｯﾄ
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜分類集計範囲＞印字ﾃﾞｰﾀ編集処理（４８区分以上）					|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	BunruiSk_Kubun_edit2								|*/
/*|																			|*/
/*|	PARAMETER		:	uchar	syu		=	分類集計種別（１～９）			|*/
/*|																			|*/
/*|						char	*p_str	=	編集ﾃﾞｰﾀｾｯﾄﾎﾟｲﾝﾀｰ				|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-23													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	BunruiSk_Kubun_edit2( uchar syu, char *p_str )
{
	ulong	data1;		// ﾃﾞｰﾀ１（設定ﾃﾞｰﾀ）
	ulong	data2;		// ﾃﾞｰﾀ２（印字ﾃﾞｰﾀ１）
	ulong	data3;		// ﾃﾞｰﾀ３（印字ﾃﾞｰﾀ２）
	uchar	bun_cnt;	// 設定されている分類数

	if( (syu >= BUNRUI_SYU_MIN) && (syu <= BUNRUI_SYU_MAX) ){				// 入力ﾊﾟﾗﾒｰﾀﾁｪｯｸ

		switch( syu ){		// 分類集計種別？

			case	1:	// 駐車時間別台数集計
			case	2:	// 駐車時間別台数・料金集計

				bun_cnt	= (uchar)CPrmSS[S_BUN][2];							// 「分類集計分類数」	設定ﾃﾞｰﾀ取得
				data1	= CPrmSS[S_BUN][2+(bun_cnt)]*10 + 1;				// 「分類集計区分」	設定ﾃﾞｰﾀ取得（開始時間）
				data2	= data1 / 60;										// 時間	ﾃﾞｰﾀ
				data3	= data1 % 60;										// 分	ﾃﾞｰﾀ
				sprintf( p_str, "%d:%02d以上", (int)data2, (int)data3 );	// 分類集計範囲の印字ﾃﾞｰﾀをｾｯﾄ

				break;

			case	3:	// 駐車料金別台数集計
			case	4:	// 駐車料金別台数・料金集計

				bun_cnt	= (uchar)CPrmSS[S_BUN][2];							// 「分類集計分類数」	設定ﾃﾞｰﾀ取得
				data1	= CPrmSS[S_BUN][2+(bun_cnt)]*10 + 1;				// 「分類集計区分」	設定ﾃﾞｰﾀ取得（開始料金）
				sprintf( p_str, "%ld円以上", data1 );						// 分類集計範囲の印字ﾃﾞｰﾀをｾｯﾄ

				break;

			case	5:	// 入庫時刻別台数集計
			case	6:	// 精算時刻別台数集計
			case	7:	// 入庫・精算時刻別台数集計
			case	8:	// 出庫時刻別台数集計
			case	9:	// 入庫・出庫時刻別台数集計

				//	分類区分以上のﾃﾞｰﾀ編集（時刻別集計で分類区分以上の印字なし）
				sprintf( p_str, "" );										// 分類集計範囲の印字ﾃﾞｰﾀに空白をｾｯﾄ
		}
	}
	else{
		// 入力ﾊﾟﾗﾒｰﾀが範囲外の場合
		sprintf( p_str, "");												// 分類集計範囲の印字ﾃﾞｰﾀに空白をｾｯﾄ
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜分類集計範囲＞印字ﾃﾞｰﾀ編集処理（区分不明）						|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	BunruiSk_Kubun_edit3								|*/
/*|																			|*/
/*|	PARAMETER		:	uchar	syu		=	分類集計種別（１～９）			|*/
/*|																			|*/
/*|						char	*p_str	=	編集ﾃﾞｰﾀｾｯﾄﾎﾟｲﾝﾀｰ				|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-23													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	BunruiSk_Kubun_edit3( uchar syu, char *p_str )
{

	if( (syu >= BUNRUI_SYU_MIN) && (syu <= BUNRUI_SYU_MAX) ){	// 入力ﾊﾟﾗﾒｰﾀﾁｪｯｸ

		switch( syu ){		// 分類集計種別？

			case	1:	// 駐車時間別台数集計
			case	2:	// 駐車時間別台数・料金集計

				sprintf( p_str, "駐車時間不明" );

				break;

			case	3:	// 駐車料金別台数集計
			case	4:	// 駐車料金別台数・料金集計

				sprintf( p_str, "駐車料金不明" );

				break;

			case	5:	// 入庫時刻別台数集計
			case	6:	// 精算時刻別台数集計
			case	7:	// 入庫・精算時刻別台数集計
			case	8:	// 出庫時刻別台数集計
			case	9:	// 入庫・出庫時刻別台数集計

				sprintf( p_str, "時刻不明" );
		}
	}
	else{
		// 入力ﾊﾟﾗﾒｰﾀが範囲外の場合
		sprintf( p_str, "");	// 分類集計範囲の印字ﾃﾞｰﾀに空白をｾｯﾄ
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜領収証発行回数＞印字ﾃﾞｰﾀ編集処理									|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_RyousyuuPriCnt							|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-18													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_RyousyuuPriCnt( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	Prn_edit_Sitei1line	(									// ----- 印字ﾃﾞｰﾀ編集 -----
							"領収証発行回数",				// 印字項目	："領収書発行回数"
							(ulong)Syuukei->Ryosyuu_pri_cnt,// 印字ﾃﾞｰﾀ	：領収証発行回数
							"",								// 単位１	：NULL
							Pri_Tanni[PriT_KAI],			// 単位２	：回
							pri_kind						// 印字先ﾌﾟﾘﾝﾀ
						);

	edit_cnt++;												// 編集行数更新

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜ｻｰﾋﾞｽﾀｲﾑ内精算回数＞印字ﾃﾞｰﾀ編集処理								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_InSvstSei								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-18													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_InSvstSei( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	Prn_edit_Sitei1line	(									// ----- 印字ﾃﾞｰﾀ編集 -----
							"ｻｰﾋﾞｽﾀｲﾑ内精算",				// 印字項目	："ｻｰﾋﾞｽﾀｲﾑ内精算"
							(ulong)Syuukei->In_svst_seisan,	// 印字ﾃﾞｰﾀ	：ｻｰﾋﾞｽﾀｲﾑ内精算回数
							"",								// 単位１	：NULL
							Pri_Tanni[PriT_KAI],			// 単位２	：回
							pri_kind						// 印字先ﾌﾟﾘﾝﾀ
						);

	edit_cnt++;												// 編集行数更新

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜強制ｱﾝﾁﾊﾟｽOFF精算回数＞印字ﾃﾞｰﾀ編集処理							|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_ApassOffSei							|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-19													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_ApassOffSei( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
							"ｱﾝﾁﾊﾟｽOFF精算回数",				// 印字項目	："ｱﾝﾁﾊﾟｽOFF精算回数"
							(ulong)Syuukei->Apass_off_seisan,	// 印字ﾃﾞｰﾀ	：強制ｱﾝﾁﾊﾟｽOFF精算回数
							"",									// 単位１	：NULL
							Pri_Tanni[PriT_KAI],				// 単位２	：回
							pri_kind							// 印字先ﾌﾟﾘﾝﾀ
						);

	edit_cnt++;													// 編集行数更新

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜払出不足回数・金額＞印字ﾃﾞｰﾀ編集処理								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_HaraiHusoku							|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-18													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_HaraiHusoku( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数
	uchar	set = (uchar)prm_get(COM_PRM, S_PRN, 29, 1, 5);

	edit_cnt = Prn_edit_KaiKin	(								// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
									(set?"払出不足":"払戻不足"),// 印字項目：払出不足 or 払戻不足
									Syuukei->Harai_husoku_cnt,	// 回数ﾃﾞｰﾀ
									Syuukei->Harai_husoku_ryo,	// 金額ﾃﾞｰﾀ
									pri_kind					// 印字先ﾌﾟﾘﾝﾀ
								);
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜金庫総入金額＞印字ﾃﾞｰﾀ編集処理									|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_KinkoTryo								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-18													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_KinkoTryo( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	Prn_edit_Sitei1line	(								// ----- 印字ﾃﾞｰﾀ編集 -----
							"金庫総入金額",				// 印字項目	："金庫総入金額"
							Syuukei->Kinko_Tryo,		// 印字ﾃﾞｰﾀ	：金庫総入金額
							"",							// 単位１	：NULL
							Pri_Tanni[PriT_YEN],		// 単位２	：円
							pri_kind					// 印字先ﾌﾟﾘﾝﾀ
						);

	edit_cnt++;											// 編集行数更新

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜紙幣金庫入金額＞印字ﾃﾞｰﾀ編集処理									|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_SiheiKinko								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-18													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_SiheiKinko( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	uchar	sihei_syu;			// 紙幣種別
	ulong	sihei_kingaku;		// 紙幣金額（円）

	Prn_edit_Sitei1line	(													// ----- 印字ﾃﾞｰﾀ編集 -----
							"紙幣金庫総入金額",								// 印字項目	："紙幣金庫総入金額"
							Syuukei->Note_Tryo,								// 印字ﾃﾞｰﾀ	：紙幣金庫総入金額
							"",												// 単位１	：NULL
							Pri_Tanni[PriT_YEN],							// 単位２	：円
							pri_kind										// 印字先ﾌﾟﾘﾝﾀ
						);

	edit_cnt++;																// 編集行数更新

	for( sihei_syu=0 ; sihei_syu < SIHEI_SYU_MAX ; sihei_syu++ ){			// 金種毎印字ﾃﾞｰﾀ編集

		sihei_kingaku	= CPrmSS[S_MON][13+sihei_syu];						// 「紙幣金種」	設定ﾃﾞｰﾀ取得

		if( sihei_kingaku ){												// 対象紙幣設定あり？

			Prn_edit_TanKin( cEditwk1, sihei_kingaku );						// cEditwk1←対象紙幣単位（金額）ﾃﾞｰﾀ
			StrAdd( (uchar *)cEditwk1, (uchar *)"  ");						// 単位（金額）ﾃﾞｰﾀに"  "を付加

			Prn_edit_Sitei1line	(											// ----- 印字ﾃﾞｰﾀ編集 -----
									cEditwk1,								// 印字項目	：紙幣単位ﾃﾞｰﾀ（金種）
									Syuukei->Note_cnt[sihei_syu],			// 印字ﾃﾞｰﾀ	：紙幣金庫入金枚数
									"",										// 単位１	：NULL
									Pri_Tanni[PriT_MAI],					// 単位２	：枚
									pri_kind								// 印字先ﾌﾟﾘﾝﾀ
								);

			edit_cnt++;														// 編集行数更新
		}
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜コイン金庫入金額＞印字ﾃﾞｰﾀ編集処理								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_CoinKinko								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-18													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_CoinKinko( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	uchar	coin_syu;			// ｺｲﾝ種別
	ulong	coin_kingaku;		// ｺｲﾝ金額（円）

	Prn_edit_Sitei1line	(													// ----- 印字ﾃﾞｰﾀ編集 -----
							"ｺｲﾝ金庫総入金額",								// 印字項目	："ｺｲﾝ金庫総入金額"
							Syuukei->Coin_Tryo,								// 印字ﾃﾞｰﾀ	：ｺｲﾝ金庫総入金額
							"",												// 単位１	：NULL
							Pri_Tanni[PriT_YEN],							// 単位２	：円
							pri_kind										// 印字先ﾌﾟﾘﾝﾀ
						);

	edit_cnt++;																// 編集行数更新

	for( coin_syu=0 ; coin_syu < COIN_SYU_MAX ; coin_syu++ ){				// 金種毎印字ﾃﾞｰﾀ編集

		coin_kingaku	= CPrmSS[S_MON][7+coin_syu];						// 「ｺｲﾝ金種」	設定ﾃﾞｰﾀ取得

		if( coin_kingaku ){													// 対象ｺｲﾝ設定あり？

			Prn_edit_TanKin( cEditwk1, coin_kingaku );						// cEditwk1←対象ｺｲﾝ単位（金額）ﾃﾞｰﾀ
			StrAdd( (uchar *)cEditwk1, (uchar *)"  ");						// 単位（金額）ﾃﾞｰﾀに"  "を付加

			Prn_edit_Sitei1line	(											// ----- 印字ﾃﾞｰﾀ編集 -----
									cEditwk1,								// 印字項目	：ｺｲﾝ単位（金額）ﾃﾞｰﾀ
									Syuukei->Coin_cnt[coin_syu],			// 印字ﾃﾞｰﾀ	：ｺｲﾝ金庫総入金枚数
									"",										// 単位１	：NULL
									Pri_Tanni[PriT_MAI],					// 単位２	：枚
									pri_kind								// 印字先ﾌﾟﾘﾝﾀ
								);

			edit_cnt++;														// 編集行数更新
		}
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜金銭データ＞印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_KinsenData								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-01													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_KinsenData( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	ushort	pri_no;				// 編集項目No.
	ulong	sihei_kingaku;		// 紙幣金額（円）


	pri_no = p_proc_data->Prn_no_data1;

	switch( pri_no ){	// 編集項目？

		case	0:		// 精算投入金額

																		// ----- 表題 -----
			PCMD_CENTER( pri_kind );									// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
			PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
			PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
			PrnStr( "＜金銭データ＞", pri_kind );						// 印字ﾃﾞｰﾀ登録
			edit_cnt++;													// 編集行数更新

			edit_cnt += Prn_edit_Sitei1line	(							// ----- 精算投入金額	-----
												"精算投入金額",			// 印字項目	："精算投入金額"
												Syuukei->tounyu,		// 印字ﾃﾞｰﾀ	：精算投入金額
												"",						// 単位１	：NULL
												Pri_Tanni[PriT_YEN],	// 単位２	：円
												pri_kind				// 印字先ﾌﾟﾘﾝﾀ
											);

			edit_cnt += KinsenData_Coin( &Syuukei->tou[0], pri_kind );	// 精算投入枚数（ｺｲﾝ金種毎）編集

			sihei_kingaku	= CPrmSS[S_MON][13];						// 「紙幣1金種」設定ﾃﾞｰﾀ取得
			if( sihei_kingaku ){										// 設定あり？

				Prn_edit_TanKin( cEditwk1, sihei_kingaku );				// cEditwk1←紙幣単位（金額）ﾃﾞｰﾀ
				StrAdd( (uchar *)cEditwk1, (uchar *)"  ");				// 単位（金額）ﾃﾞｰﾀ先頭に"  "を付加
				strcat( cEditwk1, "札" );								// 単位（金額）ﾃﾞｰﾀ後に"札"を付加

				edit_cnt += Prn_edit_Sitei1line	(						// ----- 印字ﾃﾞｰﾀ編集 -----
													cEditwk1,			// 印字項目	：紙幣単位ﾃﾞｰﾀ（金種）
													Syuukei->tou[4],	// 印字ﾃﾞｰﾀ	：紙幣金額
													"",					// 単位１	：NULL
													Pri_Tanni[PriT_MAI],// 単位２	：枚
													pri_kind			// 印字先ﾌﾟﾘﾝﾀ
												);
			}

			break;

		case	1:		// 釣銭補充金額

			PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
			PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定

			edit_cnt += Prn_edit_Sitei1line	(							// ----- 釣銭補充金額	-----
												"釣銭補充金額",			// 印字項目	："釣銭補充金額"
												Syuukei->hojyu,			// 印字ﾃﾞｰﾀ	：釣銭補充金額
												"",						// 単位１	：NULL
												Pri_Tanni[PriT_YEN],	// 単位２	：円
												pri_kind				// 印字先ﾌﾟﾘﾝﾀ
											);

			edit_cnt += KinsenData_Coin( &Syuukei->hoj[0], pri_kind );	// 釣銭補充枚数（ｺｲﾝ金種毎）編集

			break;

		case	2:		// 精算払出金額

			PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
			PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定

			edit_cnt += Prn_edit_Sitei1line	(							// ----- 精算払出金額	-----
												"精算払出金額",			// 印字項目	："精算払出金額"
												Syuukei->seisan,		// 印字ﾃﾞｰﾀ	：精算払出金額
												"",						// 単位１	：NULL
												Pri_Tanni[PriT_YEN],	// 単位２	：円
												pri_kind				// 印字先ﾌﾟﾘﾝﾀ
											);

			edit_cnt += KinsenData_Coin( &Syuukei->sei[0], pri_kind );	// 精算払出枚数（ｺｲﾝ金種毎）編集

			break;

		case	3:		// 強制払出金額

			PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
			PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定

			edit_cnt += Prn_edit_Sitei1line	(							// ----- 強制払出金額	-----
												"強制払出金額",			// 印字項目	："強制払出金額"
												Syuukei->kyosei,		// 印字ﾃﾞｰﾀ	：強制払出金額
												"",						// 単位１	：NULL
												Pri_Tanni[PriT_YEN],	// 単位２	：円
												pri_kind				// 印字先ﾌﾟﾘﾝﾀ
											);

			edit_cnt += KinsenData_Coin( &Syuukei->kyo[0], pri_kind );	// 強制払出枚数（ｺｲﾝ金種毎）編集

			break;

		default:	// その他（エラー）

			pri_no = 3;
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
	}

	if( pri_no >= 3 ){													// 全項目編集終了？

		// 編集終了
		p_proc_data->Prn_no_data1 = 0;
	}
	else{
		// 未編集の項目がある場合
		pri_no++;
		p_proc_data->Prn_no_data1 = pri_no;
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜金銭データのコインデータ（金種毎）＞印字ﾃﾞｰﾀ編集処理				|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	KinsenData_Coin										|*/
/*|																			|*/
/*|	PARAMETER		:	ulong			*data		=	ｺｲﾝﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-01													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	KinsenData_Coin( ulong *data, uchar pri_kind )
{
	uchar	edit_cnt = 0;		// 編集行数
	uchar	coin_syu;			// ｺｲﾝ種別
	ulong	coin_kingaku;		// ｺｲﾝ金額（円）

	for( coin_syu=0 ; coin_syu < COIN_SYU_MAX ; coin_syu++ ){	// 金種毎印字ﾃﾞｰﾀ編集

		coin_kingaku	= CPrmSS[S_MON][7+coin_syu];			// 「ｺｲﾝ金種」	設定ﾃﾞｰﾀ取得

		if( coin_kingaku ){										// 対象ｺｲﾝ設定あり？

			Prn_edit_TanKin( cEditwk1, coin_kingaku );			// cEditwk1←対象ｺｲﾝ単位（金額）ﾃﾞｰﾀ
			StrAdd( (uchar *)cEditwk1, (uchar *)"  ");			// 単位（金額）ﾃﾞｰﾀに"  "を付加

			Prn_edit_Sitei1line	(								// ----- 印字ﾃﾞｰﾀ編集 -----
									cEditwk1,					// 印字項目	：ｺｲﾝ単位（金額）ﾃﾞｰﾀ
									*data,						// 印字ﾃﾞｰﾀ	：対象ｺｲﾝ金額
									"",							// 単位１	：NULL
									Pri_Tanni[PriT_MAI],		// 単位２	：枚
									pri_kind					// 印字先ﾌﾟﾘﾝﾀ
								);

			edit_cnt++;											// 編集行数更新
		}
		data++;													// ｺｲﾝﾃﾞｰﾀﾎﾟｲﾝﾀｰ更新
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜精算中止回数・精算中止現金売上額＞印字ﾃﾞｰﾀ編集処理				|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_SeiChusi								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-18													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_SeiChusi( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数

	edit_cnt = Prn_edit_KaiKin	(								// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
									"精算中止",					// 印字項目：精算中止
									Syuukei->Seisan_chusi_cnt,	// 回数ﾃﾞｰﾀ
									Syuukei->Seisan_chusi_ryo,	// 金額ﾃﾞｰﾀ
									pri_kind					// 印字先ﾌﾟﾘﾝﾀ
								);
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜循環コイン合計回数＞印字ﾃﾞｰﾀ編集処理								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_JuGouCnt								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-18													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_JuGouCnt( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数

	edit_cnt += Prn_edit_Sitei1line	(										// ----- 回数印字ﾃﾞｰﾀ編集 -----
										"循環ｺｲﾝ合計",						// 印字項目
										(ulong)Syuukei->Junkan_goukei_cnt,	// 回数ﾃﾞｰﾀ
										Pri_Tanni[PriT_KAISUU],				// 単位１：回数
										Pri_Tanni[PriT_KAI],				// 単位２：回
										pri_kind							// 印字先ﾌﾟﾘﾝﾀ
									);

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜紙幣払出機合計回数＞印字ﾃﾞｰﾀ編集処理								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_ShGouCnt								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-18													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_ShGouCnt( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数

	edit_cnt += Prn_edit_Sitei1line	(										// ----- 回数印字ﾃﾞｰﾀ編集 -----
										"紙幣払出機合計",					// 印字項目
										(ulong)Syuukei->Siheih_goukei_cnt,	// 回数ﾃﾞｰﾀ
										Pri_Tanni[PriT_KAISUU],				// 単位１：回数
										Pri_Tanni[PriT_KAI],				// 単位２：回
										pri_kind							// 印字先ﾌﾟﾘﾝﾀ
									);

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜コイン金庫合計回数＞印字ﾃﾞｰﾀ編集処理								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_CkGouCnt								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-18													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_CkGouCnt( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数

	edit_cnt += Prn_edit_Sitei1line	(										// ----- 回数印字ﾃﾞｰﾀ編集 -----
										"ｺｲﾝ金庫合計",						// 印字項目
										(ulong)Syuukei->Ckinko_goukei_cnt,	// 回数ﾃﾞｰﾀ
										Pri_Tanni[PriT_KAISUU],				// 単位１：回数
										Pri_Tanni[PriT_KAI],				// 単位２：回
										pri_kind							// 印字先ﾌﾟﾘﾝﾀ
									);

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜紙幣金庫合計回数＞印字ﾃﾞｰﾀ編集処理								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_SkGouCnt								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-18													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_SkGouCnt( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数

	edit_cnt += Prn_edit_Sitei1line	(										// ----- 回数印字ﾃﾞｰﾀ編集 -----
										"紙幣金庫合計",						// 印字項目
										(ulong)Syuukei->Skinko_goukei_cnt,	// 回数ﾃﾞｰﾀ
										Pri_Tanni[PriT_KAISUU],				// 単位１：回数
										Pri_Tanni[PriT_KAI],				// 単位２：回
										pri_kind							// 印字先ﾌﾟﾘﾝﾀ
									);

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜釣銭払戻額＞印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_TuriModRyo								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-18													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_TuriModRyo( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	Prn_edit_Sitei1line	(								// ----- 印字ﾃﾞｰﾀ編集 -----
							"釣銭払戻額",				// 印字項目	："釣銭払戻額"
							Syuukei->Turi_modosi_ryo,	// 印字ﾃﾞｰﾀ	：釣銭払戻額
							"",							// 単位１	：NULL
							Pri_Tanni[PriT_YEN],		// 単位２	：円
							pri_kind					// 印字先ﾌﾟﾘﾝﾀ
						);

	edit_cnt++;											// 編集行数更新

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜預り証発行回数＞印字ﾃﾞｰﾀ編集処理									|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_AzukariPriCnt							|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-22													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_AzukariPriCnt( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	Prn_edit_Sitei1line	(									// ----- 印字ﾃﾞｰﾀ編集 -----
							"預り証発行回数",				// 印字項目	："預り証発行回数"
							(ulong)Syuukei->Azukari_pri_cnt,// 印字ﾃﾞｰﾀ	：預り証発行回数
							"",								// 単位１	：NULL
							Pri_Tanni[PriT_KAI],			// 単位２	：回
							pri_kind						// 印字先ﾌﾟﾘﾝﾀ
						);

	edit_cnt++;												// 編集行数更新

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜強制出庫回数・金額＞印字ﾃﾞｰﾀ編集処理								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_KyouseiOut								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-22													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_KyouseiOut( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数

	edit_cnt = Prn_edit_KaiKin	(								// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
									Syuukei_Kou_Prn[1],			// 印字項目：強制出庫
									Syuukei->Kyousei_out_Tcnt,	// 回数ﾃﾞｰﾀ
									Syuukei->Kyousei_out_Tryo,	// 金額ﾃﾞｰﾀ
									pri_kind					// 印字先ﾌﾟﾘﾝﾀ
								);
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜不正出庫回数・金額＞印字ﾃﾞｰﾀ編集処理								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_HuseiOut								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-22													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_HuseiOut( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数

	edit_cnt = Prn_edit_KaiKin	(								// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
									Syuukei_Kou_Prn[2],			// 印字項目：不正出庫
									Syuukei->Husei_out_Tcnt,	// 回数ﾃﾞｰﾀ
									Syuukei->Husei_out_Tryo,	// 金額ﾃﾞｰﾀ
									pri_kind					// 印字先ﾌﾟﾘﾝﾀ
								);
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜修正精算回数・金額＞印字ﾃﾞｰﾀ編集処理								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_SyuuseiSei								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-22													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_SyuuseiSei( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数

	Prn_edit_Sitei1line	(											// ----- 印字ﾃﾞｰﾀ編集 -----
							"修正精算回数",							// 印字項目	："修正精算回数"
							Syuukei->Syuusei_seisan_Tcnt,			// 回数ﾃﾞｰﾀ
							"",										// 単位１	：NULL
							Pri_Tanni[PriT_KAI],					// 単位２	：回
							pri_kind								// 印字先ﾌﾟﾘﾝﾀ
						);
	edit_cnt++;														// 編集行数更新

	if( prm_get(COM_PRM, S_TOT, 20, 1, 1)==1 ){						// [振替額]で印字する
		Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
							"振替額",								// 印字項目	："振替額"
							Syuukei->Syuusei_seisan_Tryo,			// 金額ﾃﾞｰﾀ
							"",										// 単位１	：NULL
							Pri_Tanni[PriT_YEN],					// 単位２	：回
							pri_kind								// 印字先ﾌﾟﾘﾝﾀ
							);
	}else{															// [払戻額]で印字する
		Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
							"払戻額",								// 印字項目	："払戻額"
							Syuukei->Syuusei_seisan_Tryo,			// 金額ﾃﾞｰﾀ
							"",										// 単位１	：NULL
							Pri_Tanni[PriT_YEN],					// 単位２	：回
							pri_kind								// 印字先ﾌﾟﾘﾝﾀ
						);
	}
	edit_cnt++;														// 編集行数更新

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜受付券発行回数＞印字ﾃﾞｰﾀ編集処理									|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_UketukePriCnt							|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-22													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_UketukePriCnt( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

	Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
							"駐車証明書発行回数",				// 印字項目	："駐車証明書発行回数"
							(ulong)Syuukei->Uketuke_pri_Tcnt,	// 印字ﾃﾞｰﾀ	：受付券発行回数
							"",									// 単位１	：NULL
							Pri_Tanni[PriT_KAI],				// 単位２	：回
							pri_kind							// 印字先ﾌﾟﾘﾝﾀ
						);

	edit_cnt++;													// 編集行数更新

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜未入金回数・金額＞印字ﾃﾞｰﾀ編集処理								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_SyuuseiSei								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-22													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_MinyuSei( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数

	edit_cnt = Prn_edit_KaiKin	(									// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
									"未入金",
									Syuukei->Syuusei_seisan_Mcnt,	// 回数ﾃﾞｰﾀ
									Syuukei->Syuusei_seisan_Mryo,	// 金額ﾃﾞｰﾀ
									pri_kind						// 印字先ﾌﾟﾘﾝﾀ
								);

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜駐車位置別集計＞印字ﾃﾞｰﾀ編集処理									|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_ItibetuSk								|*/
/*|																			|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-22													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_ItibetuSk( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar		edit_cnt = 0;	// 編集行数
	ushort		lk_no;			// ﾛｯｸ装置番号
	uchar		lok_syu;		// 「ﾛｯｸ装置接続種別」設定ﾃﾞｰﾀ取得ﾜｰｸ
	ulong		pk_posi;		// 駐車位置ﾃﾞｰﾀ
	LOKTOTAL	*LkData;		// 駐車位置別集計ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
	uchar		work=0;			// 作業用領域
	ushort		wlk_no=0;			// 編集用のﾛｯｸ装置番号

	switch( syuukei_kind ){							// 集計種別？

		case	TSYOUKEI:							// Ｔ小計
		case	TGOUKEI:							// Ｔ合計

			LkData = (LOKTOTAL *)&loktl.tloktl;		// 駐車位置別集計ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ（Ｔ集計用）
			break;

		case	TGOUKEI_Z:							// 前回Ｔ合計

			LkData = (LOKTOTAL *)&loktlbk.tloktl;	// 駐車位置別集計ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ（前回Ｔ集計用）
			break;

		case	GTSYOUKEI:							// ＧＴ小計
		case	GTGOUKEI:							// ＧＴ合計

			LkData = (LOKTOTAL *)&loktl.gloktl;		// 駐車位置別集計ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ（ＧＴ集計用）
			break;

		case	GTGOUKEI_Z:							// 前回ＧＴ合計

			LkData = (LOKTOTAL *)&loktlbk.gloktl;	// 駐車位置別集計ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ（前回ＧＴ集計用）
			break;

		default:									// その他
			return( edit_cnt );
	}


	lk_no = p_proc_data->Prn_no_data1;				// 編集対象とするﾛｯｸ装置No.ｾｯﾄ

	for( ; lk_no < LOCK_MAX ; lk_no++ ){			// ﾛｯｸ装置No.毎編集処理ﾙｰﾌﾟ
		WACDOG;										// 装置ループの際はｳｫｯﾁﾄﾞｯｸﾘｾｯﾄ実行

		lok_syu =LockInfo[lk_no].lok_syu;			// 「ﾛｯｸ装置接続種別」設定ﾃﾞｰﾀ取得

		if( lok_syu ){								// 接続有？

			//	編集対象とするﾛｯｸ装置No.が駐車位置として設定されている場合

			work = GetCarInfoParam();
			if( lk_no < INT_CAR_START_INDEX ){
				if(!( work & 0x02 )){
					continue;
				}
			}else if( lk_no < BIKE_START_INDEX ){
				if(!( work & 0x04 )){
					continue;
				}
			}else{
				if(!( work & 0x01 )){
					continue;
				}
			}

			// 駐車位置（ﾛｯｸ装置番号）
			if (lk_no >= BIKE_START_INDEX) {
				sprintf( cEditwk1,"＜ロック%s%03d＞", Syuukei_Kou_Prn[0], (lk_no-BIKE_START_INDEX)+1 );			// cEditwk←表題"＜ロック装置No.XXX＞"印字ﾃﾞｰﾀ（XXX=ﾛｯｸ装置No.）
			}
			else {
				wlk_no = lk_no;
				if(( work & 0x06 ) == 0x04 ){
					wlk_no = lk_no - INT_CAR_START_INDEX;
				}
				sprintf( cEditwk1,"＜フラップ%s%03d＞", Syuukei_Kou_Prn[0], wlk_no+1 );			// cEditwk←表題"＜フラップ装置No.XXX＞"印字ﾃﾞｰﾀ（XXX=ﾛｯｸ装置No.）
			}
			edit_cnt += Prn_edit_Title	(											// 表題印字ﾃﾞｰﾀ編集
											cEditwk1,
											FONT_K_NML,
											pri_kind
										);

			// ＜駐車位置番号（区画、番号）＞
			pk_posi = Prn_pkposi_make( (ushort)(lk_no+1) );							// 駐車位置（区画＆番号）ﾃﾞｰﾀ取得
// MH810100(S) Y.Yamauchi 2019/11/11 車番チケットレス(メンテナンス)
			memset( cEditwk1, 0, sizeof(cEditwk1) );
// MH810100(E) Y.Yamauchi 2019/11/11 車番チケットレス(メンテナンス)
			Prn_edit_pkposi( cEditwk1, pk_posi, 0 );								// cEditwk1←駐車位置印字ﾃﾞｰﾀ
			Prn_edit_sya_syu( cEditwk2 , (ushort)(lk_no+1), 0, 0);					// cEditwk2←車室番号＆車種ﾃﾞｰﾀ
			Str_Set1(																// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,
						cEditwk1,													// 文字列２：駐車位置印字ﾃﾞｰﾀ
						pri_kind													// 印字先ﾌﾟﾘﾝﾀ
					);

			edit_cnt++;

			// ＜現金売上＞
			edit_cnt += Prn_edit_Sitei1line	(												// ----- 金額印字ﾃﾞｰﾀ編集 -----
												"現金売上額",								// 印字項目
												LkData->loktldat[lk_no].Genuri_ryo,			// ﾃﾞｰﾀ
												"",											// 単位１：NULL
												Pri_Tanni[PriT_YEN],						// 単位２：円
												pri_kind									// 印字先ﾌﾟﾘﾝﾀ
											);
			// ＜精算回数＞
			edit_cnt += Prn_edit_Sitei1line	(												// ----- 回数印字ﾃﾞｰﾀ編集 -----
												"精算回数",									// 印字項目
												(ulong)LkData->loktldat[lk_no].Seisan_cnt,	// ﾃﾞｰﾀ
												"",											// 単位１：NULL
												Pri_Tanni[PriT_KAI],						// 単位２：回
												pri_kind									// 印字先ﾌﾟﾘﾝﾀ
											);
			// ＜不正出庫＞集計ﾃﾞｰﾀ編集
			edit_cnt += Prn_edit_KaiKin	(													// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
											Syuukei_Kou_Prn[2],								// 印字項目：不正出庫
											(ulong)LkData->loktldat[lk_no].Husei_out_cnt,	// 回数ﾃﾞｰﾀ
											LkData->loktldat[lk_no].Husei_out_ryo,			// 金額ﾃﾞｰﾀ
											pri_kind										// 印字先ﾌﾟﾘﾝﾀ
										);
			// ＜強制出庫＞集計ﾃﾞｰﾀ編集
			edit_cnt += Prn_edit_KaiKin	(													// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
											Syuukei_Kou_Prn[1],								// 印字項目：強制出庫
											(ulong)LkData->loktldat[lk_no].Kyousei_out_cnt,	// 回数ﾃﾞｰﾀ
											LkData->loktldat[lk_no].Kyousei_out_ryo,		// 金額ﾃﾞｰﾀ
											pri_kind										// 印字先ﾌﾟﾘﾝﾀ
										);
			// ＜受付券発行回数＞
			edit_cnt += Prn_edit_Sitei1line	(												// ----- 回数印字ﾃﾞｰﾀ編集 -----
												"駐車証明書発行回数",						// 印字項目	："駐車証明書発行回数"
												(ulong)LkData->loktldat[lk_no].Uketuke_pri_cnt,	// ﾃﾞｰﾀ
												"",											// 単位１：NULL
												Pri_Tanni[PriT_KAI],						// 単位２：回
												pri_kind									// 印字先ﾌﾟﾘﾝﾀ
											);
			// ＜修正精算＞集計ﾃﾞｰﾀ編集
			if( prm_get( COM_PRM,S_TYP,62,1,2 ) ){

			edit_cnt += Prn_edit_Sitei1line	(												// ----- 印字ﾃﾞｰﾀ編集 -----
										"修正精算回数",										// 印字項目	："修正精算回数"
										(ulong)LkData->loktldat[lk_no].Syuusei_seisan_cnt,	// 回数ﾃﾞｰﾀ
										"",													// 単位１	：NULL
										Pri_Tanni[PriT_KAI],								// 単位２	：回
										pri_kind											// 印字先ﾌﾟﾘﾝﾀ
										);

				if( prm_get(COM_PRM, S_TOT, 20, 1, 1)==1 ){									// [振替額]で印字する
					Prn_edit_Sitei1line	(													// ----- 印字ﾃﾞｰﾀ編集 -----
											"振替額",										// 印字項目	："振替額"
											LkData->loktldat[lk_no].Syuusei_seisan_ryo,		// 金額ﾃﾞｰﾀ
											"",												// 単位１	：NULL
											Pri_Tanni[PriT_YEN],							// 単位２	：回
											pri_kind										// 印字先ﾌﾟﾘﾝﾀ
										);
				}else{																		// [払戻額]で印字する
					Prn_edit_Sitei1line	(													// ----- 印字ﾃﾞｰﾀ編集 -----
											"払戻額",										// 印字項目	："払戻額"
											LkData->loktldat[lk_no].Syuusei_seisan_ryo,		// 金額ﾃﾞｰﾀ
											"",												// 単位１	：NULL
											Pri_Tanni[PriT_YEN],							// 単位２	：回
											pri_kind										// 印字先ﾌﾟﾘﾝﾀ
										);
				}
			}

			if( (edit_cnt+10) > EDIT_GYOU_MAX ){											// 編集行数ﾁｪｯｸ

				// 次ﾃﾞｰﾀ編集（１０行）が不可の場合

				lk_no++;																	// 次処理で検索するﾛｯｸ装置No.をｾｯﾄ
				break;																		// ﾃﾞｰﾀ編集処理ﾙｰﾌﾟを抜ける
			}
		}
	}

	if( lk_no >= LOCK_MAX ){																// 駐車位置別集計編集終了？

		// 全ての駐車位置（ﾛｯｸ装置No.）について編集終了した場合
		p_proc_data->Prn_no_data1	= 0;													// ﾛｯｸ装置No.ﾘｾｯﾄ
	}
	else{
		// 未編集の駐車位置（ﾛｯｸ装置No.）がある場合
		p_proc_data->Prn_no_data1 = lk_no;													// 次に編集するﾛｯｸ装置No.をｾｰﾌﾞ
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		減額ﾃﾞｰﾀ編集処理													|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_Gengaku								|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:																|*/
/*|	Date	:	2007-03-30													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_Gengaku( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数

// 仕様変更(S) K.Onodera 2016/11/07 集計基本データフォーマット対応
//	Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
//							"減額精算",							// 印字項目	："減額精算"
//							(ulong)Syuukei->Gengaku_seisan_cnt,	// 印字ﾃﾞｰﾀ	：減額精算回数
//							Pri_Tanni[PriT_KAISUU],				// 単位１：回数
//							Pri_Tanni[PriT_KAI],				// 単位２	：回
//							pri_kind							// 印字先ﾌﾟﾘﾝﾀ
//						);
//	edit_cnt++;													// 編集行数更新
//
//	Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
//							"",									// 印字項目	：NULL
//							(ulong)Syuukei->Gengaku_seisan_ryo,	// 印字ﾃﾞｰﾀ	：減額精算金額
//							Pri_Tanni[PriT_KINGAK],				// 単位１：金額
//							Pri_Tanni[PriT_YEN],				// 単位２	：円
//							pri_kind							// 印字先ﾌﾟﾘﾝﾀ
//						);
//	edit_cnt++;													// 編集行数更新
	// ParkingWeb経由でPiP接続あり？
	if( _is_ParkingWeb_pip() ){
		Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
								"遠隔精算",							// 印字項目	："減額精算"
								(ulong)Syuukei->Remote_seisan_cnt,	// 印字ﾃﾞｰﾀ	：減額精算回数
								Pri_Tanni[PriT_KAISUU],				// 単位１：回数
								Pri_Tanni[PriT_KAI],				// 単位２	：回
								pri_kind							// 印字先ﾌﾟﾘﾝﾀ
							);
		edit_cnt++;													// 編集行数更新

		Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
								"",									// 印字項目	：NULL
								(ulong)Syuukei->Remote_seisan_ryo,	// 印字ﾃﾞｰﾀ	：減額精算金額
								Pri_Tanni[PriT_KINGAK],				// 単位１：金額
								Pri_Tanni[PriT_YEN],				// 単位２	：円
								pri_kind							// 印字先ﾌﾟﾘﾝﾀ
							);
		edit_cnt++;													// 編集行数更新
	}
	else{
		Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
								"減額精算",							// 印字項目	："減額精算"
								(ulong)Syuukei->Gengaku_seisan_cnt,	// 印字ﾃﾞｰﾀ	：減額精算回数
								Pri_Tanni[PriT_KAISUU],				// 単位１：回数
								Pri_Tanni[PriT_KAI],				// 単位２	：回
								pri_kind							// 印字先ﾌﾟﾘﾝﾀ
							);
		edit_cnt++;													// 編集行数更新

		Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
								"",									// 印字項目	：NULL
								(ulong)Syuukei->Gengaku_seisan_ryo,	// 印字ﾃﾞｰﾀ	：減額精算金額
								Pri_Tanni[PriT_KINGAK],				// 単位１：金額
								Pri_Tanni[PriT_YEN],				// 単位２	：円
								pri_kind							// 印字先ﾌﾟﾘﾝﾀ
							);
		edit_cnt++;													// 編集行数更新
	}
// 仕様変更(E) K.Onodera 2016/11/07 集計基本データフォーマット対応

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		振替ﾃﾞｰﾀ編集処理													|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEI_edit_Furikae								|*/
/*|	PARAMETER		:	SYUKEI			*Syuukei	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:																|*/
/*|	Date	:	2007-03-30													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	SYUUKEI_edit_Furikae( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
// MH322914(S) K.Onodera 2016/10/11 AI-V対応：振替精算
	ulong	cnt = 0, ryo = 0;
// MH322914(E) K.Onodera 2016/10/11 AI-V対応：振替精算

// MH322914(S) K.Onodera 2016/10/11 AI-V対応：振替精算
	// ParkingWeb経由でPiP接続あり？
	if( _is_ParkingWeb_pip() ){
		cnt = Syuukei->Furikae_seisan_cnt2;
		ryo = Syuukei->Furikae_seisan_ryo2;
	}
	else{
		cnt = Syuukei->Furikae_seisan_cnt;
		ryo = Syuukei->Furikae_seisan_ryo;
	}
// MH322914(E) K.Onodera 2016/10/11 AI-V対応：振替精算
	Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
							"振替精算",							// 印字項目	："振替精算"
// MH322914(S) K.Onodera 2016/10/11 AI-V対応：振替精算
//							(ulong)Syuukei->Furikae_seisan_cnt,	// 印字ﾃﾞｰﾀ	：振替精算回数
							cnt,
// MH322914(E) K.Onodera 2016/10/11 AI-V対応：振替精算
							Pri_Tanni[PriT_KAISUU],				// 単位１：回数
							Pri_Tanni[PriT_KAI],				// 単位２	：回
							pri_kind							// 印字先ﾌﾟﾘﾝﾀ
						);
	edit_cnt++;													// 編集行数更新

	Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
							"",									// 印字項目	：NULL
// MH322914(S) K.Onodera 2016/10/11 AI-V対応：振替精算
//							(ulong)Syuukei->Furikae_seisan_ryo,	// 印字ﾃﾞｰﾀ	：振替精算金額
							ryo,
// MH322914(E) K.Onodera 2016/10/11 AI-V対応：振替精算
							Pri_Tanni[PriT_KINGAK],				// 単位１：金額
							Pri_Tanni[PriT_YEN],				// 単位２	：円
							pri_kind							// 印字先ﾌﾟﾘﾝﾀ
						);
	edit_cnt++;													// 編集行数更新

	return( edit_cnt );
}
// MH322914(S) K.Onodera 2016/12/08 AI-V対応
//[]----------------------------------------------------------------------[]
///	@brief		過払い金(後日返金)印字データ編集処理
//[]----------------------------------------------------------------------[]
///	@param[in]		*Syuukei		: ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in]		pri_kind		: 印字先ﾌﾟﾘﾝﾀ
///	@param[in/out]	*p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			ret				: 編集行数
//[]----------------------------------------------------------------------[]
///	@date		Create	: 2016/08/08<br>
///				Update	: 
//[]------------------------------------- Copyright(C) 2016 AMANO Corp.---[]
uchar	SYUUKEI_edit_Kabarai( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	ushort	n;
	ulong	cnt = 0, ryo = 0;

	// ParkingWeb経由でPiP接続あり？
	if( _is_ParkingWeb_pip() ){
		// 過払い回数、金額を算出(ｸﾚｼﾞｯﾄ+電子ﾏﾈｰ)
		for( n=0; n<MOD_TYPE_MAX; n++ ){
			cnt += Syuukei->Furikae_Card_cnt[n];
			ryo += Syuukei->Furikae_CardKabarai[n];
		}
		Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
								"過払い(後日)",						// 印字項目	："過払い(後日)"
								cnt,
								Pri_Tanni[PriT_KAISUU],				// 単位１：回数
								Pri_Tanni[PriT_KAI],				// 単位２	：回
								pri_kind							// 印字先ﾌﾟﾘﾝﾀ
							);
		edit_cnt++;													// 編集行数更新

		Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
								"",									// 印字項目	：NULL
								ryo,
								Pri_Tanni[PriT_KINGAK],				// 単位１：金額
								Pri_Tanni[PriT_YEN],				// 単位２	：円
								pri_kind							// 印字先ﾌﾟﾘﾝﾀ
							);
		edit_cnt++;													// 編集行数更新
	}

	return( edit_cnt );
}
// MH322914(E) K.Onodera 2016/12/08 AI-V対応

//[]----------------------------------------------------------------------[]
///	@brief			＜個別追番情報＞印字ﾃﾞｰﾀ編集処理
//[]----------------------------------------------------------------------[]
///	@param[in]		Syuukei		: ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in/out]	p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in]		pkno_syu	: 駐車場Ｎｏ．種別
///	@return			ret		: 編集行数
//[]----------------------------------------------------------------------[]
///	@author			MATSUSHITA
///	@date			Create	: 2008/09/22<br>
///					Update	: 
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
#define		ICHI_W3		(210)

uchar	SYUUKEI_edit_Oiban( SYUKEI *Syuukei, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数
	int		ii, from, to;
	ushort	pnt1;

	switch(prm_get(COM_PRM, S_SYS, 13, 1, 1)) {
	default:
//	case	0:	// 個別追い番
		switch(syuukei_kind) {
		case	MTSYOUKEI:
		case	MTGOUKEI:
		case	MTGOUKEI_Z:
			from = to = _OBN_GT_TOTAL;		// GT追い番まで
			break;
		case	GTSYOUKEI:
		case	GTGOUKEI:
		case	GTGOUKEI_Z:
			from = to = _OBN_T_TOTAL;			// T追い番まで
			break;
		default:
	//	case	TSYOUKEI:
	//	case	TGOUKEI:
	//	case	TGOUKEI_Z:
			from = _OBN_PAYMENT;
			to = _OBN_FUSEI;
			break;
		}

		Str_Set1("個別追番情報", "", pri_kind);
		edit_cnt++;
		for (ii = from; ii <= to; ii++) {
			if (*oiban_name[ii] == '\0'){
				continue;
			}
			strcpy(cEditwk1, "  ");
			strcat(cEditwk1, oiban_name[ii]);
			pnt1 = Moj_Point( cEditwk1 );
			if (pnt1 < ICHI_W3) {
				Spc_Add( cEditwk1, (ushort)(ICHI_W3-pnt1));
			}
			sprintf(cEditwk2, "No.%06ld～No.%06ld",
					Syuukei->oiban_range[ii][0],
					Syuukei->oiban_range[ii][1]
					);
			strcat(cEditwk1, cEditwk2);
			Str_Set1(cEditwk1, "", pri_kind);
			edit_cnt++;
		}
		break;

	case	1:	// 通し追い番
		strcpy(cEditwk1, "追番情報");
		pnt1 = Moj_Point( cEditwk1 );
		if (pnt1 < ICHI_W3) {
			Spc_Add( cEditwk1, (ushort)(ICHI_W3-pnt1));
		}
		sprintf(cEditwk2, "No.%06ld～No.%06ld",
				Syuukei->oiban_range[_OBN_WHOLE][0],
				Syuukei->oiban_range[_OBN_WHOLE][1]
				);
		strcat(cEditwk1, cEditwk2);
		Str_Set1(cEditwk1, "", pri_kind);
		edit_cnt++;
		break;

	case	2:	// 追い番なし
		break;
	}
	return( edit_cnt );
}

/*[]---------------------------------------------------------------------------[]*/
/*|		集計履歴印字ﾃﾞｰﾀ編集処理												|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SYUUKEILOG_edit( *msg_data, pri_kind, *p_proc_data)		|*/
/*|																				|*/
/*|	PARAMETER		:	T_FrmLogPriReq2	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|																				|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|	RETURN VALUE	:	void													|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi														|*/
/*|	Date	:	2005-06-16														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
void	SYUUKEILOG_edit( T_FrmLogPriReq2 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ
	ushort	Sdate;				// 検索開始日
	ushort	syuukei_date;		// 集計日ﾃﾞｰﾀ
	uchar	ret2;				// 集計ﾃﾞｰﾀ編集処理結果
	ushort	date[3];			// 年月日
	ushort	index;				// ログ検索位置
	uchar	syu_kind;			// 集計の種類( 0:T集計、1:GT集計)
	if( TGOUKEI == syuukei_kind ){
		syu_kind = 0;
	} else {
		syu_kind = 1;
	}

	if( p_proc_data->Log_Start == OFF ){

		// 編集開始（初回編集）の場合

		/*------	＜表題＞編集	------*/
		Prn_edit_Title	(										// 表題（"Ｔ合計情報"）印字ﾃﾞｰﾀ編集
							Syukei_Ttl_Prn[syu_kind],
							FONT_K_YOKOBAI,
							pri_kind
						);

		/*------	１行空白	------*/
		Prn_edit_space( pri_kind );

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, msg_data->Kikai_no );				// 機械NO.編集
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );							// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnStr( prn_work, pri_kind );							// 時刻　印字ﾃﾞｰﾀ登録

		/*------	集計履歴情報件数検索	------*/

		p_proc_data->Log_DataPt = 0;// 検索インデックスは先頭に指定
			// ﾛｸﾞ情報が正常な場合

			/*------	印字要求内容ﾁｪｯｸ	------*/

			switch( msg_data->BType ){	// 検索方法？

				case	0:	// 全て

					sprintf(										// cEditwk1←検索方法印字ﾃﾞｰﾀ
								cEditwk1,
								"全て(%d件)",
								msg_data->LogCount
							);
					p_proc_data->Log_TotalCount = msg_data->LogCount;

					break;

				case	1:	// 日付指定

					//	指定日ﾁｪｯｸ
					if( OK == DateChk( (date_time_rec *)&msg_data->TSttTime ) ){

						// 指定日が正常な場合
						Sdate = dnrmlzm(							// 指定日ﾃﾞｰﾀ取得
											(short)msg_data->TSttTime.Year,
											(short)msg_data->TSttTime.Mon,
											(short)msg_data->TSttTime.Day
										);

						p_proc_data->Log_Sdate = Sdate;				// 指定日ﾃﾞｰﾀｾｰﾌﾞ
						date[0] = (short)msg_data->TSttTime.Year;
						date[1] = (short)msg_data->TSttTime.Mon;
						date[2] = (short)msg_data->TSttTime.Day;
						p_proc_data->Log_TotalCount = Ope2_Log_CountGet_inDate( Syukei_eLog[syu_kind],
																				&date[0],
																				&index );// 登録件数set
						p_proc_data->Log_DataPt = index;

						sprintf(									// cEditwk1←検索方法印字ﾃﾞｰﾀ
									cEditwk1,
									"%04d/%d/%d分",
									msg_data->TSttTime.Year,
									msg_data->TSttTime.Mon,
									msg_data->TSttTime.Day
								);
					}
					else{
						// 指定日が異常な場合
						Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
						edit_end = ON;								// 編集終了
					}

					break;

				default:	// その他（検索方法指定ｴﾗｰ）

					Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録

					edit_end = ON;									// 編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
					break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			}

			if( edit_end != ON ){

				// 検索方法の指定が正常な場合

				/*------	＜検索方法＞編集	------*/
				PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
				PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録

				/*------	１行空白	------*/
				Prn_edit_space( pri_kind );

				/*------	編集制御ﾜｰｸｾｯﾄ	------*/
				p_proc_data->Log_Start	= ON;						// Log_Start	← ﾛｸﾞﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ
				if( p_proc_data->Log_TotalCount == 0 ){

					// 格納件数が０の場合
					edit_end = ON;									// 編集終了
				}
			}

	}	// 初回編集処理end

	else{

		// ２回目以降の編集処理

		switch( msg_data->BType ){	// 検索方法？

			case	0:	// 全て
				if( p_proc_data->Log_Edit == OFF ){			// 1データ編集中
					// NOTE:ログ1件分の取得に登録時のワークと同じTGOU_LOG_WKを使用しているが、ログ印字とT合計が同時に行なわれることはないため
					// メモリ節約の意味でここで使用する
					if(0 == Ope_Log_1DataGet( Syukei_eLog[syu_kind], p_proc_data->Log_DataPt, (void *)&TSYU_LOG_WK) ){
						// データが取得エラーの場合は印字しない
						p_proc_data->Log_TotalCount = 0;
						edit_end = ON;	// 編集終了
					}
				}
				break;

			case	1:	// 日付指定
				if( p_proc_data->Log_Edit == OFF ){			// 1データ編集中
					for( ; p_proc_data->Log_TotalCount > 0 ; ){	// 日付が一致するﾛｸﾞ情報を格納件数分検索する
						// NOTE:ログ1件分の取得に登録時のワークと同じTGOU_LOG_WKを使用しているが、ログ印字とT合計が同時に行なわれることはないため
						// メモリ節約の意味でここで使用する
						if(0 == Ope_Log_1DataGet( Syukei_eLog[syu_kind], p_proc_data->Log_DataPt, (void *)&TSYU_LOG_WK ) ){
							// データが取得エラーの場合は印字しない
							p_proc_data->Log_TotalCount = 0;
							edit_end = ON;	// 編集終了
							break;
						}
						syuukei_date = dnrmlzm(				// 対象ﾛｸﾞ情報の精算日取得
								(short)TSYU_LOG_WK.NowTime.Year,
								(short)TSYU_LOG_WK.NowTime.Mon,
								(short)TSYU_LOG_WK.NowTime.Day
							);
						if( syuukei_date == p_proc_data->Log_Sdate ){
							// 対象ﾛｸﾞ情報の集計日が指定日と一致した場合
							break;											// 検索ﾙｰﾌﾟを抜ける
						}
						p_proc_data->Log_DataPt++;						// 次に検索するログのインデックスをセット
					}
				}
				break;
		}

		if( p_proc_data->Log_TotalCount > 0 ){				// 格納件数分の検索＆編集終了？(N)

			// 格納件数分の検索＆編集を終了していない場合

			p_proc_data->Log_Edit = ON;						// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞｾｯﾄ

			ret2 = SYUUKEI_edit(							// 印字対象集計ﾃﾞｰﾀ編集
									(SYUKEI *)&TSYU_LOG_WK,
									pri_kind,
									p_proc_data
								);

			if( ret2 == YES ){

				// １集計ﾃﾞｰﾀ編集終了の場合

				p_proc_data->Log_Edit = OFF;				// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞﾘｾｯﾄ

				p_proc_data->Log_TotalCount--;				// 格納件数ﾃﾞｸﾘﾒﾝﾄ
				p_proc_data->Log_DataPt++;					// 次に編集するログの情報のインデックスをセット
			}
		}

		if( p_proc_data->Log_TotalCount == 0 ){				// 全ﾛｸﾞ情報編集終了？

			// 格納件数分の編集が終了した場合
			edit_end = ON;									// 編集終了
		}

	}	// ２回目以降の編集処理end

	/*------	編集終了ﾁｪｯｸ	------*/
	if( edit_end == ON ){	
		p_proc_data->Final = ON;			// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
}

// MH810100(S) 2020/07/10 車番チケットレス(#4531 仕様変更 買物割引の領収証の印字を分けて印字する)
uchar SYUUKEI_edit_KaimonoWari( SYUKEI* Syuukei, uchar pri_kind, PRN_PROC_DATA* p_proc_data )
{
	uchar	edit_cnt = 0;	// 編集行数
	uchar	data_no;		// 買物割引番号(1～10)

	data_no = (uchar)p_proc_data->Prn_no_data1;

	if (data_no == 0) {
		// 割引適用№なしの買物割引
		// 印字有無判定（「ﾃﾞｰﾀが≠０　または　０でも印字する」場合、印字する）
// GG124100(S) R.Endo 2022/10/07 車番チケットレス3.0 #6646 初回精算で使用した買い物割引に割引余力がある場合、再精算完了後、T集計印字時に195=買物割引使用回数・金額が印字されない [共通改善項目 No1536]
// 		if((Syuukei->Kaimono_use_cnt[data_no] != 0) || (prn_zero == YES)) {
		if ( (Syuukei->Kaimono_use_cnt[data_no] != 0) || (Syuukei->Kaimono_use_ryo[data_no] != 0) || (prn_zero == YES) ) {
// GG124100(E) R.Endo 2022/10/07 車番チケットレス3.0 #6646 初回精算で使用した買い物割引に割引余力がある場合、再精算完了後、T集計印字時に195=買物割引使用回数・金額が印字されない [共通改善項目 No1536]
			edit_cnt += (uchar)Prn_edit_KaiKin	(										// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
													"買物割引",							// 印字項目
													Syuukei->Kaimono_use_cnt[data_no],	// 回数ﾃﾞｰﾀ
													Syuukei->Kaimono_use_ryo[data_no],	// 金額ﾃﾞｰﾀ
													pri_kind							// 印字先ﾌﾟﾘﾝﾀ
												);
		}
		data_no++;																		// 次項目へ
	}
	else {
		// 割引適用№あり（1～10）の買物割引
		for ( ; data_no < KAIMONO_WARISYU_MAX + 1; data_no++) {							// 買物割引毎編集処理ﾙｰﾌﾟ
			// 印字有無判定（「対象買物割引＝使用する」　且つ　「ﾃﾞｰﾀが≠０　または　０でも印字する」場合、印字する）
// GG124100(S) R.Endo 2022/10/07 車番チケットレス3.0 #6646 初回精算で使用した買い物割引に割引余力がある場合、再精算完了後、T集計印字時に195=買物割引使用回数・金額が印字されない [共通改善項目 No1536]
// 			if((Syuukei->Kaimono_use_cnt[data_no] != 0) || (prn_zero == YES)) {
			if ( (Syuukei->Kaimono_use_cnt[data_no] != 0) || (Syuukei->Kaimono_use_ryo[data_no] != 0) || (prn_zero == YES) ) {
// GG124100(E) R.Endo 2022/10/07 車番チケットレス3.0 #6646 初回精算で使用した買い物割引に割引余力がある場合、再精算完了後、T集計印字時に195=買物割引使用回数・金額が印字されない [共通改善項目 No1536]
				sprintf(cEditwk1,"買物割引%d", data_no);
				edit_cnt += (uchar)Prn_edit_KaiKin	(												// ----- 回数／金額印字ﾃﾞｰﾀ編集 -----
														cEditwk1,									// 印字項目
														Syuukei->Kaimono_use_cnt[data_no],			// 回数ﾃﾞｰﾀ
														Syuukei->Kaimono_use_ryo[data_no],			// 金額ﾃﾞｰﾀ
														pri_kind									// 印字先ﾌﾟﾘﾝﾀ
													);
				if ((edit_cnt + 2) > EDIT_GYOU_MAX) {		// 編集行数ﾁｪｯｸ
					// 次ﾃﾞｰﾀ編集（２行）が不可の場合
					data_no++;								// 次処理で検索する料金種別ﾃﾞｰﾀ番号をｾｯﾄ
					break;									// ﾃﾞｰﾀ編集処理ﾙｰﾌﾟを抜ける
				}
			}
		}
	}

	if (data_no >= KAIMONO_WARISYU_MAX + 1) {				// 買物割引毎編集終了？
		// 全ての買物割引について編集終了した場合
		p_proc_data->Prn_no_data1	= 0;				// 料金種別ﾃﾞｰﾀ番号ﾘｾｯﾄ
		p_proc_data->Prn_no_data2	= 0;
	}
	else {
		// 未編集の料金種別がある場合
		p_proc_data->Prn_no_data1 = data_no;			// 次に編集する料金種別ﾃﾞｰﾀ番号をｾｰﾌﾞ
	}
	return edit_cnt;
}
// MH810100(E) 2020/07/10 車番チケットレス(#4531 仕様変更 買物割引の領収証の印字を分けて印字する)

/*[]-----------------------------------------------------------------------[]*/
/*|		ｺｲﾝ金庫集計印字ﾃﾞｰﾀ編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	CoKiSk_edit( *Coinkinko, pri_kind, *p_proc_data)	|*/
/*|																			|*/
/*|	PARAMETER		:	COIN_SYU	*Coinkinko	=	集計ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-08													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	CoKiSk_edit( COIN_SYU *Coinkinko, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{

	if( (syuukei_kind >= COKISK_SYU_MIN) && (syuukei_kind <= COKISK_SYU_MAX) ){		// 集計種別ﾁｪｯｸ

		/*------	表題	------*/
		Prn_edit_Title	(											// 表題印字ﾃﾞｰﾀ編集
							CoKiSk_Ttl_Prn[syuukei_kind-1],
							FONT_K_YOKOBAI,
							pri_kind
						);

		/*------	１行空白	------*/
		if( pri_kind == R_PRI ){
			// 印字先＝レシート（ジャーナルの場合、スペース行なし）
			Prn_edit_space( pri_kind );
		}

		/*------	再ﾌﾟﾘﾝﾄ日時	------*/
		if( syuukei_kind == COKINKO_Z ){

			//	前回コイン金庫集計印字の場合

			Prn_edit_RePriDate( pri_kind );							// 再ﾌﾟﾘﾝﾄ日時印字ﾃﾞｰﾀ編集
		}

		/*------	＜機械NO.／追番／集計日時/総入金額/金種毎（料金、枚数）編集＞	------*/

		CoKiSk_edit_sub( Coinkinko, pri_kind );

	}
	/*------	編集終了	------*/
	p_proc_data->Final = ON;										// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
}

/*[]---------------------------------------------------------------------------[]*/
/*|		ｺｲﾝ金庫集計情報印字ﾃﾞｰﾀ編集処理											|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	CoKiJo_edit( *msg_data, pri_kind, *p_proc_data)			|*/
/*|																				|*/
/*|	PARAMETER		:	T_FrmLogPriReq2	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|																				|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|	RETURN VALUE	:	void													|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi														|*/
/*|	Date	:	2005-06-09														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
void	CoKiJo_edit( T_FrmLogPriReq2 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ
	ushort	Sdate;				// 検索開始日
	ushort	syuukei_date;		// 集計日ﾃﾞｰﾀ
	ushort	date[3];			// 年月日
	ushort	index;				// ログ検索位置

	if( p_proc_data->Log_Start == OFF ){

		// 編集開始（初回編集）の場合

		/*------	＜表題＞編集	------*/
		Prn_edit_Title	(										// 表題（"コイン金庫集計情報"）印字ﾃﾞｰﾀ編集
							"コイン金庫合計情報",
							FONT_K_YOKOBAI,
							pri_kind
						);

		/*------	１行空白	------*/
		Prn_edit_space( pri_kind );

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, msg_data->Kikai_no );				// 機械NO.編集
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );							// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnStr( prn_work, pri_kind );							// 時刻　印字ﾃﾞｰﾀ登録

		/*------	ｺｲﾝ金庫集計情報件数検索	------*/

		p_proc_data->Log_DataPt = 0;// 検索インデックスは先頭に指定

			// ﾛｸﾞ情報が正常な場合

			/*------	印字要求内容ﾁｪｯｸ	------*/

			switch( msg_data->BType ){	// 検索方法？

				case	0:	// 全て

					p_proc_data->Log_Count = Ope2_Log_CountGet( LOG_COINBOX );		// 登録件数set
					sprintf(										// cEditwk1←検索方法印字ﾃﾞｰﾀ
								cEditwk1,
								"全て(%d件)",
								p_proc_data->Log_Count
							);
					break;

				case	1:	// 日付指定

					//	指定日ﾁｪｯｸ
					if( OK == DateChk( (date_time_rec *)&msg_data->TSttTime ) ){

						// 指定日が正常な場合
						Sdate = dnrmlzm(							// 指定日ﾃﾞｰﾀ取得
											(short)msg_data->TSttTime.Year,
											(short)msg_data->TSttTime.Mon,
											(short)msg_data->TSttTime.Day
										);
						p_proc_data->Log_Sdate = Sdate;				// 指定日ﾃﾞｰﾀｾｰﾌﾞ
						date[0] = (short)msg_data->TSttTime.Year;
						date[1] = (short)msg_data->TSttTime.Mon;
						date[2] = (short)msg_data->TSttTime.Day;
						p_proc_data->Log_Count = Ope2_Log_CountGet_inDate( eLOG_COINBOX,
																		   &date[0],
																		   &index );// 登録件数set
						p_proc_data->Log_DataPt = index;

						sprintf(									// cEditwk1←検索方法印字ﾃﾞｰﾀ
									cEditwk1,
									"%04d/%d/%d分",
									msg_data->TSttTime.Year,
									msg_data->TSttTime.Mon,
									msg_data->TSttTime.Day
								);
					}
					else{
						// 指定日が異常な場合
						Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
						edit_end = ON;								// 編集終了
					}

					break;

				default:	// その他（検索方法指定ｴﾗｰ）

					Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録

					edit_end = ON;									// 編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
					break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			}

			if( edit_end != ON ){

				// 検索方法の指定が正常な場合

				/*------	＜検索方法＞編集	------*/
				PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
				PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録

				/*------	１行空白	------*/
				Prn_edit_space( pri_kind );

				/*------	編集制御ﾜｰｸｾｯﾄ	------*/
				p_proc_data->Log_Start	= ON;						// Log_Start	← ﾛｸﾞﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ
				if( p_proc_data->Log_Count == 0 ){

					// 格納件数が０の場合
					edit_end = ON;									// 編集終了
				}
			}
	}	// 初回編集処理end

	else{

		// ２回目以降の編集処理

		switch( msg_data->BType ){	// 検索方法？

			case	0:	// 全て
				if(0 == Ope_Log_1DataGet( eLOG_COINBOX, p_proc_data->Log_DataPt, (void *)&Pri_Work[0].coin_syu ) ){
					// データが取得エラーの場合は印字しない
					p_proc_data->Log_Count = 0;
					edit_end = ON;	// 編集終了
				}
				break;

			case	1:	// 日付指定

				for( ; p_proc_data->Log_Count > 0 ; ){	// 日付が一致するﾛｸﾞ情報を格納件数分検索する
					if(0 == Ope_Log_1DataGet( eLOG_COINBOX, p_proc_data->Log_DataPt, (void *)&Pri_Work[0].coin_syu ) ){
						// データが取得エラーの場合は印字しない
						p_proc_data->Log_Count = 0;
						edit_end = ON;								// 編集終了
						break;
					}
					syuukei_date = dnrmlzm(				// 対象ﾛｸﾞ情報の集計日取得
											(short)Pri_Work[0].coin_syu.NowTime.Year,
											(short)Pri_Work[0].coin_syu.NowTime.Mon,
											(short)Pri_Work[0].coin_syu.NowTime.Day
										);

					if( syuukei_date == p_proc_data->Log_Sdate ){

						// 対象ﾛｸﾞ情報の集計日が指定日と一致した場合

						break;											// 検索ﾙｰﾌﾟを抜ける
					}
					p_proc_data->Log_DataPt++;						// 次に検索するログのインデックスをセット
				}

				break;
		}

		if( p_proc_data->Log_Count > 0 ){				// 格納件数分の検索＆編集終了？

			// 格納件数分の検索＆編集を終了していない場合

			Prn_edit_Title	(							// 表題（"コイン金庫合計"）印字ﾃﾞｰﾀ編集
								"コイン金庫合計",
								FONT_K_YOKOBAI,
								pri_kind
							);

			/*------	＜集計ﾃﾞｰﾀ＞編集	------*/
			CoKiSk_edit_sub(&Pri_Work[0].coin_syu, pri_kind );// 印字対象集計ﾃﾞｰﾀ編集

			p_proc_data->Log_Count--;					// 格納件数ﾃﾞｸﾘﾒﾝﾄ
			p_proc_data->Log_DataPt++;					// 次に編集するログの情報のインデックスをセット
		}
		if( p_proc_data->Log_Count == 0 ){				// 全ﾛｸﾞ情報編集終了？

			// 格納件数分の編集が終了した場合
			edit_end = ON;								// 編集終了
		}

	}	// ２回目以降の編集処理end

	/*------	編集終了ﾁｪｯｸ	------*/
	if( edit_end == ON ){	
		p_proc_data->Final = ON;						// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		ｺｲﾝ金庫集計印字ﾃﾞｰﾀ編集ｻﾌﾞ											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	CoKiSk_edit_sub( *Coinkinko, pri_kind )				|*/
/*|																			|*/
/*|	PARAMETER		:	COIN_SYU	*Coinkinko	=	集計ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-08													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	CoKiSk_edit_sub( COIN_SYU *Coinkinko, uchar pri_kind )
{
	uchar	settei;				// 追番設定ﾃﾞｰﾀ
	uchar	coin_syu;			// ｺｲﾝ種別
	ulong	coin_kingaku;		// ｺｲﾝ金額（円）


	/*------	＜機械NO.／追番＞編集	------*/
	KikaiNoSet(	cEditwk1, Coinkinko->Kikai_no );				// 機械NO.印字ﾃﾞｰﾀ編集

	settei = (uchar)CPrmSS[S_SYS][13];							// 「追番」設定ﾃﾞｰﾀ取得	（０：個別／１：通し／２：追番なし）
	sprintf( cEditwk2,"");										// cEditwk2(追番印字ﾃﾞｰﾀ)　←　NULL

	if( settei == 0 ){											// 「追番」設定？
		//	「追番」設定ﾃﾞｰﾀ＝０（個別）の場合

		switch( syuukei_kind ){									// 集計種別？

			case	COKINKO_G:									// ｺｲﾝ金庫合計
			case	COKINKO_Z:									// 前回ｺｲﾝ金庫合計
				OibanSet( cEditwk2, CountSel( &Coinkinko->Oiban), 8 );	// 追番印字ﾃﾞｰﾀ編集（"コ金No.XXXXXX"）
				break;
		}
	}
	else if( settei == 1 ){
		//	「追番」設定ﾃﾞｰﾀ＝１（通し）の場合
		switch( syuukei_kind ){									// 集計種別？

			case	COKINKO_G:									// ｺｲﾝ金庫合計
			case	COKINKO_Z:									// 前回ｺｲﾝ金庫合計
				OibanSet( cEditwk2, CountSel( &Coinkinko->Oiban), 0 );	// 追番印字ﾃﾞｰﾀ編集（"　　No.XXXXXX"）
				break;
		}
	}

	Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
				cEditwk1,										// 文字列１：機械NO.印字ﾃﾞｰﾀ
				cEditwk2,										// 文字列２：追番印字ﾃﾞｰﾀ
				pri_kind										// 印字先ﾌﾟﾘﾝﾀ
			);

	/*------	＜係員NO.＞編集	------*/
	(void)Prn_edit_KakariNo( Coinkinko->Kakari_no, pri_kind );

	/*------	集計日時	------*/
	Prn_edit_SkDate	(											// ----- 集計日時印字ﾃﾞｰﾀ編集 -----
						&Coinkinko->NowTime,					// 今回日時
						&Coinkinko->OldTime,					// 前回日時
						pri_kind								// 印字先ﾌﾟﾘﾝﾀ
					);

	/*------	１行空白	------*/
	if( pri_kind == R_PRI ){
		Prn_edit_space( pri_kind );
	}

	/*------	金庫入金総額	------*/
	Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
							"ｺｲﾝ金庫総入金額",					// 印字項目	："ｺｲﾝ金庫総入金額"
							Coinkinko->Tryo,					// 印字ﾃﾞｰﾀ	：金庫入金総額
							"",									// 単位１	：NULL
							Pri_Tanni[PriT_YEN],				// 単位２	：円
							pri_kind							// 印字先ﾌﾟﾘﾝﾀ
						);

	/*------	金種毎（合計金額・収納枚数）	------*/

	for( coin_syu = 0 ; coin_syu < COIN_SYU_MAX ; coin_syu++ ){	// 金種毎印字ﾃﾞｰﾀ編集ﾙｰﾌﾟ

		coin_kingaku	= CPrmSS[S_MON][7+coin_syu];			// 「ｺｲﾝ金種」	設定ﾃﾞｰﾀ取得

		if( coin_kingaku ){										// 対象ｺｲﾝ設定あり？

			Prn_edit_TanKin( cEditwk1, coin_kingaku );			// cEditwk1←対象ｺｲﾝ単位（金額）ﾃﾞｰﾀ
			StrAdd( (uchar *)cEditwk1, (uchar *)"  ");			// 単位（金額）ﾃﾞｰﾀに"  "を付加

			/*------	合計金額	------*/
			Prn_edit_Sitei1line	(								// ----- 印字ﾃﾞｰﾀ編集 -----
									cEditwk1,					// 印字項目	：ｺｲﾝ単位（金額）ﾃﾞｰﾀ
									Coinkinko->ryo[coin_syu],	// 印字ﾃﾞｰﾀ	：合計金額
									"",							// 単位１	：NULL
									Pri_Tanni[PriT_YEN],		// 単位２	：円
									pri_kind					// 印字先ﾌﾟﾘﾝﾀ
								);
			/*------	収納枚数	------*/
			Prn_edit_Sitei1line	(								// ----- 印字ﾃﾞｰﾀ編集 -----
									"",							// 印字項目	：NULL
									Coinkinko->cnt[coin_syu],	// 印字ﾃﾞｰﾀ	：収納枚数
									"",							// 単位１	：NULL
									Pri_Tanni[PriT_MAI],		// 単位２	：枚
									pri_kind					// 印字先ﾌﾟﾘﾝﾀ
								);
		}
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		紙幣金庫集計印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SiKiSk_edit( *Siheikinko, pri_kind, *p_proc_data )	|*/
/*|																			|*/
/*|	PARAMETER		:	NOTE_SYU	*Siheikinko	=	集計ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-08													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	SiKiSk_edit( NOTE_SYU *Siheikinko, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{

	if( (syuukei_kind >= SIKISK_SYU_MIN) && (syuukei_kind <= SIKISK_SYU_MAX) ){	// 集計種別ﾁｪｯｸ

		/*------	表題	------*/
		Prn_edit_Title	(												// 表題印字ﾃﾞｰﾀ編集
							SiKiSk_Ttl_Prn[syuukei_kind-1],
							FONT_K_YOKOBAI,
							pri_kind
						);

		/*------	１行空白	------*/
		if( pri_kind == R_PRI ){
			// 印字先＝レシート（ジャーナルの場合、スペース行なし）
			Prn_edit_space( pri_kind );
		}

		/*------	再ﾌﾟﾘﾝﾄ日時	------*/
		if( syuukei_kind == SIKINKO_Z ){

			//	前回紙幣金庫集計印字の場合

			Prn_edit_RePriDate( pri_kind );								// 再ﾌﾟﾘﾝﾄ日時印字ﾃﾞｰﾀ編集
		}

		/*------	＜集計日時/総入金額/金種毎（料金、枚数）編集＞	------*/

		SiKiSk_edit_sub( Siheikinko, pri_kind );

	}
	/*------	編集終了	------*/
	p_proc_data->Final = ON;											// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
}

/*[]---------------------------------------------------------------------------[]*/
/*|		紙幣金庫集計情報印字ﾃﾞｰﾀ編集処理										|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SiKiJo_edit( *msg_data, pri_kind, *p_proc_data )		|*/
/*|																				|*/
/*|	PARAMETER		:	T_FrmLogPriReq2	*msg_data 	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|																				|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|	RETURN VALUE	:	void													|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi														|*/
/*|	Date	:	2005-06-10														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
void	SiKiJo_edit( T_FrmLogPriReq2 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ
	ushort	Sdate;				// 検索開始日
	ushort	syuukei_date;		// 集計日ﾃﾞｰﾀ
	ushort	date[3];			// 年月日
	ushort	index;				// ログ検索位置

	if( p_proc_data->Log_Start == OFF ){

		// 編集開始（初回編集）の場合

		/*------	＜表題＞編集	------*/
		Prn_edit_Title	(										// 表題（"紙幣金庫集計情報"）印字ﾃﾞｰﾀ編集
							"紙幣金庫合計情報",
							FONT_K_YOKOBAI,
							pri_kind
						);

		/*------	１行空白	------*/
		Prn_edit_space( pri_kind );

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, msg_data->Kikai_no );				// 機械NO.編集
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );							// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnStr( prn_work, pri_kind );							// 時刻　印字ﾃﾞｰﾀ登録

		/*------	紙幣金庫集計情報件数検索	------*/

		p_proc_data->Log_DataPt = 0;// 検索インデックスは先頭に指定
			// ﾛｸﾞ情報が正常な場合

			/*------	印字要求内容ﾁｪｯｸ	------*/

			switch( msg_data->BType ){	// 検索方法？

				case	0:	// 全て

					p_proc_data->Log_Count = Ope2_Log_CountGet( LOG_NOTEBOX );		// 登録件数set
					sprintf(										// cEditwk1←検索方法印字ﾃﾞｰﾀ
								cEditwk1,
								"全て(%d件)",
								p_proc_data->Log_Count
							);
					break;

				case	1:	// 日付指定

					//	指定日ﾁｪｯｸ
					if( OK == DateChk( (date_time_rec *)&msg_data->TSttTime ) ){

						// 指定日が正常な場合
						Sdate = dnrmlzm(							// 指定日ﾃﾞｰﾀ取得
											(short)msg_data->TSttTime.Year,
											(short)msg_data->TSttTime.Mon,
											(short)msg_data->TSttTime.Day
										);
						p_proc_data->Log_Sdate = Sdate;				// 指定日ﾃﾞｰﾀｾｰﾌﾞ
						date[0] = (short)msg_data->TSttTime.Year;
						date[1] = (short)msg_data->TSttTime.Mon;
						date[2] = (short)msg_data->TSttTime.Day;
						p_proc_data->Log_Count = Ope2_Log_CountGet_inDate( eLOG_NOTEBOX,
																		   &date[0],
																		   &index );// 登録件数set
						p_proc_data->Log_DataPt = index;

						sprintf(									// cEditwk1←検索方法印字ﾃﾞｰﾀ
									cEditwk1,
									"%04d/%d/%d分",
									msg_data->TSttTime.Year,
									msg_data->TSttTime.Mon,
									msg_data->TSttTime.Day
								);
					}
					else{
						// 指定日が異常な場合
						Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
						edit_end = ON;								// 編集終了
					}

					break;

				default:	// その他（検索方法指定ｴﾗｰ）

					Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録

					edit_end = ON;									// 編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
					break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			}

			if( edit_end != ON ){

				// 検索方法の指定が正常な場合

				/*------	＜検索方法＞編集	------*/
				PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
				PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録

				/*------	１行空白	------*/
				Prn_edit_space( pri_kind );

				/*------	編集制御ﾜｰｸｾｯﾄ	------*/
				p_proc_data->Log_Start	= ON;						// Log_Start	← ﾛｸﾞﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ
				if( p_proc_data->Log_Count == 0 ){

					// 格納件数が０の場合
					edit_end = ON;									// 編集終了
				}
			}
	}	// 初回編集処理end

	else{

		// ２回目以降の編集処理

		switch( msg_data->BType ){	// 検索方法？

			case	0:	// 全て
				if(0 == Ope_Log_1DataGet( eLOG_NOTEBOX, p_proc_data->Log_DataPt, (void *)&Pri_Work[0].note_syu ) ){
					// データが取得エラーの場合は印字しない
					p_proc_data->Log_Count = 0;
					edit_end = ON;								// 編集終了
				}
				break;

			case	1:	// 日付指定

				for( ; p_proc_data->Log_Count > 0 ; ){	// 日付が一致するﾛｸﾞ情報を格納件数分検索する

					if(0 == Ope_Log_1DataGet( eLOG_NOTEBOX, p_proc_data->Log_DataPt, (void *)&Pri_Work[0].note_syu ) ){
						// データが取得エラーの場合は印字しない
						p_proc_data->Log_Count = 0;
						edit_end = ON;								// 編集終了
						break;
					}
					syuukei_date = dnrmlzm(				// 対象ﾛｸﾞ情報の集計日取得
											(short)Pri_Work[0].note_syu.NowTime.Year,
											(short)Pri_Work[0].note_syu.NowTime.Mon,
											(short)Pri_Work[0].note_syu.NowTime.Day
										);

					if( syuukei_date == p_proc_data->Log_Sdate ){

						// 対象ﾛｸﾞ情報の集計日が指定日と一致した場合

						break;											// 検索ﾙｰﾌﾟを抜ける
					}
					p_proc_data->Log_DataPt++;						// 次に検索するログのインデックスをセット
				}

				break;
		}

		if( p_proc_data->Log_Count > 0 ){				// 格納件数分の検索＆編集終了？

			// 格納件数分の検索＆編集を終了していない場合

			Prn_edit_Title	(							// 表題（"紙幣金庫合計"）印字ﾃﾞｰﾀ編集
								"紙幣金庫合計",
								FONT_K_YOKOBAI,
								pri_kind
							);

			/*------	＜集計ﾃﾞｰﾀ＞編集	------*/
			SiKiSk_edit_sub(&Pri_Work[0].note_syu, pri_kind );// 印字対象集計ﾃﾞｰﾀ編集

			p_proc_data->Log_Count--;					// 格納件数ﾃﾞｸﾘﾒﾝﾄ
			p_proc_data->Log_DataPt++;					// 次に編集するログの情報のインデックスをセット
		}
		if( p_proc_data->Log_Count == 0 ){				// 全ﾛｸﾞ情報編集終了？

			// 格納件数分の編集が終了した場合
			edit_end = ON;								// 編集終了
		}

	}	// ２回目以降の編集処理end

	/*------	編集終了ﾁｪｯｸ	------*/
	if( edit_end == ON ){	
		p_proc_data->Final = ON;						// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		紙幣金庫集計印字ﾃﾞｰﾀ編集ｻﾌﾞ											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SiKiSk_edit_sub( *Siheikinko, pri_kind )			|*/
/*|																			|*/
/*|	PARAMETER		:	NOTE_SYU	*Siheikinko	=	集計ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-08													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	SiKiSk_edit_sub( NOTE_SYU *Siheikinko, uchar pri_kind )
{
	uchar	settei;				// 追番設定ﾃﾞｰﾀ
	uchar	sihei_syu;			// 紙幣種別
	ulong	sihei_kingaku;		// 紙幣金額（円）


	/*------	＜機械NO.／追番＞編集	------*/
	KikaiNoSet(	cEditwk1, Siheikinko->Kikai_no );					// 機械NO.印字ﾃﾞｰﾀ編集

	settei = (uchar)CPrmSS[S_SYS][13];								// 「追番」設定ﾃﾞｰﾀ取得	（０：個別／１：通し／２：追番なし）
	sprintf( cEditwk2,"");											// cEditwk2(追番印字ﾃﾞｰﾀ)　←　NULL

	if( settei == 0 ){												// 「追番」設定？
		//	「追番」設定ﾃﾞｰﾀ＝０（個別）の場合

		switch( syuukei_kind ){										// 集計種別？

			case	SIKINKO_G:										// 紙幣金庫合計
			case	SIKINKO_Z:										// 前回紙幣金庫合計
				OibanSet( cEditwk2, CountSel( &Siheikinko->Oiban), 9 );	// 追番印字ﾃﾞｰﾀ編集（"紙金No.XXXXXX"）
				break;
		}
	}
	else if( settei == 1 ){
		//	「追番」設定ﾃﾞｰﾀ＝１（通し）の場合
		switch( syuukei_kind ){										// 集計種別？

			case	SIKINKO_G:										// 紙幣金庫合計
			case	SIKINKO_Z:										// 前回紙幣金庫合計
				OibanSet( cEditwk2, CountSel( &Siheikinko->Oiban), 0 );	// 追番印字ﾃﾞｰﾀ編集（"　　No.XXXXXX"）
				break;
		}
	}

	Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
				cEditwk1,											// 文字列１：機械NO.印字ﾃﾞｰﾀ
				cEditwk2,											// 文字列２：追番印字ﾃﾞｰﾀ
				pri_kind											// 印字先ﾌﾟﾘﾝﾀ
			);

	/*------	＜係員NO.＞編集	------*/
	(void)Prn_edit_KakariNo( Siheikinko->Kakari_no, pri_kind );

	/*------	集計日時	------*/
	Prn_edit_SkDate	(												// ----- 集計日時印字ﾃﾞｰﾀ編集 -----
						&Siheikinko->NowTime,						// 今回日時
						&Siheikinko->OldTime,						// 前回日時
						pri_kind									// 印字先ﾌﾟﾘﾝﾀ
					);

	/*------	１行空白	------*/
	if( pri_kind == R_PRI ){
		Prn_edit_space( pri_kind );
	}

	/*------	金庫入金総額	------*/
	Prn_edit_Sitei1line	(	// ----- 印字ﾃﾞｰﾀ編集 -----
							"紙幣金庫総入金額",						// 印字項目	："紙幣金庫総入金額"
							Siheikinko->Tryo,						// 印字ﾃﾞｰﾀ	：金庫入金総額
							"",										// 単位１	：NULL
							Pri_Tanni[PriT_YEN],					// 単位２	：円
							pri_kind								// 印字先ﾌﾟﾘﾝﾀ
						);

	/*------	金種毎（合計金額・収納枚数）	------*/

	for( sihei_syu = 0 ; sihei_syu < SIHEI_SYU_MAX ; sihei_syu++ ){	// 金種毎印字ﾃﾞｰﾀ編集ﾙｰﾌﾟ

		sihei_kingaku	= CPrmSS[S_MON][13+sihei_syu];				// 「紙幣金種」	設定ﾃﾞｰﾀ取得

		if( sihei_kingaku ){										// 対象紙幣設定あり？

			Prn_edit_TanKin( cEditwk1, sihei_kingaku );				// cEditwk1←対象紙幣単位（金額）ﾃﾞｰﾀ
			StrAdd( (uchar *)cEditwk1, (uchar *)"  ");				// 単位（金額）ﾃﾞｰﾀに"  "を付加

			/*------	合計金額	------*/
			Prn_edit_Sitei1line	(									// ----- 印字ﾃﾞｰﾀ編集 -----
									cEditwk1,						// 印字項目	：紙幣単位（金額）ﾃﾞｰﾀ
									Siheikinko->ryo[sihei_syu],		// 印字ﾃﾞｰﾀ	：合計金額
									"",								// 単位１	：NULL
									Pri_Tanni[PriT_YEN],			// 単位２	：円
									pri_kind						// 印字先ﾌﾟﾘﾝﾀ
								);
			/*------	収納枚数	------*/
			Prn_edit_Sitei1line	(									// ----- 印字ﾃﾞｰﾀ編集 -----
									"",								// 印字項目	：NULL
									Siheikinko->cnt[sihei_syu],		// 印字ﾃﾞｰﾀ	：収納枚数
									"",								// 単位１	：NULL
									Pri_Tanni[PriT_MAI],			// 単位２	：枚
									pri_kind						// 印字先ﾌﾟﾘﾝﾀ
								);
		}
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		釣銭管理集計印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	TURIKAN_edit( *TuriKan, pri_kind, *p_proc_data)		|*/
/*|																			|*/
/*|	PARAMETER		:	TURI_KAN	*TuriKan	=	釣銭管理集計ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret = 編集処理結果							|*/
/*|										YES：編集終了						|*/
/*|										NO ：編集継続						|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-01													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	TURIKAN_edit( TURI_KAN *TuriKan, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	ret = NO;			// 編集処理結果（戻り値）
	ushort	pri_no;				// 編集項目No.(0=表題、1=10円、2=50円、3=100円、4=500円)
	uchar	settei;				// 追番設定ﾃﾞｰﾀ

	pri_no = p_proc_data->Prn_no;

	switch( pri_no ){	// 編集項目？

		case	0:		// 表題

			/*------	表題	------*/
			if( syuukei_kind == TURIKAN ){

				// 釣銭管理
				Prn_edit_Title	(								// 表題印字ﾃﾞｰﾀ編集
									"釣銭管理合計",
									FONT_K_YOKOBAI,
									pri_kind
								);
			}
			else{
				// 釣銭管理（小計）
				Prn_edit_Title	(								// 表題印字ﾃﾞｰﾀ編集
									"釣銭管理小計",
									FONT_K_YOKOBAI,
									pri_kind
								);
			}

			/*------	１行空白	------*/
			if( ( pri_kind == R_PRI ) && ( p_proc_data->Log_Edit == OFF ) ){
				// 印字先＝レシート　且つ　ログ印字でない（ジャーナル印字またはログ印字の場合、スペース行なし）
				Prn_edit_space( pri_kind );
			}

			/*------	＜機械NO.／追番＞編集	------*/
			KikaiNoSet(	cEditwk1, TuriKan->Kikai_no );			// 機械NO.印字ﾃﾞｰﾀ編集

			settei = (uchar)CPrmSS[S_SYS][13];					// 「追番」設定ﾃﾞｰﾀ取得	（０：個別／１：通し／２：追番なし）
			sprintf( cEditwk2,"");								// cEditwk2(追番印字ﾃﾞｰﾀ)　←　NULL

			if( syuukei_kind == TURIKAN ){

				// 釣銭管理の場合のみ追番を印字（小計では印字しない）

				if( settei == 0 ){								// 「追番」設定？
					//	「追番」設定ﾃﾞｰﾀ＝０（個別）の場合
					OibanSet( cEditwk2, CountSel( &TuriKan->Oiban), 10 );	// 追番印字ﾃﾞｰﾀ編集（"釣合No.XXXXXX"）
				}
				else if( settei == 1 ){
					//	「追番」設定ﾃﾞｰﾀ＝１（通し）の場合
					OibanSet( cEditwk2, CountSel( &TuriKan->Oiban), 0 );	// 追番印字ﾃﾞｰﾀ編集（"　　No.XXXXXX"）
				}
			}

			Str_Set1(											// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,								// 文字列１：機械NO.印字ﾃﾞｰﾀ
						cEditwk2,								// 文字列２：追番印字ﾃﾞｰﾀ
						pri_kind								// 印字先ﾌﾟﾘﾝﾀ
					);

			/*------	＜係員NO.＞編集	------*/
			Prn_edit_KakariNo( TuriKan->Kakari_no, pri_kind );

			/*------	集計日時	------*/
			Prn_edit_SkDate	(									// ----- 集計日時印字ﾃﾞｰﾀ編集 -----
								&TuriKan->NowTime,				// 今回日時
								&TuriKan->OldTime,				// 前回日時
								pri_kind						// 印字先ﾌﾟﾘﾝﾀ
							);

			/*------	１行空白	------*/
			if( pri_kind == R_PRI ){
				Prn_edit_space( pri_kind );
			}

			break;

		case	1:		// １０円硬貨ﾃﾞｰﾀ

			TuriKanData_Coin( TuriKan, 0, pri_kind );			// １０円硬貨ﾃﾞｰﾀ編集
			break;

		case	2:		// ５０円硬貨ﾃﾞｰﾀ

			TuriKanData_Coin( TuriKan, 1, pri_kind );			// ５０円硬貨ﾃﾞｰﾀ編集
			break;

		case	3:		// １００円硬貨ﾃﾞｰﾀ

			TuriKanData_Coin( TuriKan, 2, pri_kind );			// １００円硬貨ﾃﾞｰﾀ編集
			break;

		case	4:		// ５００円硬貨ﾃﾞｰﾀ

			TuriKanData_Coin( TuriKan, 3, pri_kind );			// ５００円硬貨ﾃﾞｰﾀ編集
			break;

		default:	// その他（エラー）

			pri_no = 4;
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
	}

	if( pri_no >= 4 ){											// 全項目編集終了？

		// 編集終了

		p_proc_data->Prn_no			= 0;						// 編集処理ﾜｰｸﾘｾｯﾄ
		p_proc_data->Prn_no_data1	= 0;
		p_proc_data->Prn_no_data2	= 0;

		ret = YES;												// 戻り値←１ﾃﾞｰﾀ編集終了

		if( p_proc_data->Log_Edit == OFF ){
			// 釣銭管理集計履歴印字でない場合
			p_proc_data->Final = ON;							// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
		}

	}
	else{
		// 未編集の項目がある場合
		pri_no++;
		p_proc_data->Prn_no	= pri_no;
	}
	return( ret );
}
/*[]-----------------------------------------------------------------------[]*/
/*|		＜釣銭管理金種毎＞印字ﾃﾞｰﾀ編集処理									|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	TuriKanData_Coin									|*/
/*|																			|*/
/*|	PARAMETER		:	TURI_KAN		*TuriKan	=	釣銭管理ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|						uchar			coin_syu	=	ｺｲﾝ金種				|*/
/*|																			|*/
/*|											0=10円							|*/
/*|											1=50円							|*/
/*|											2=100円							|*/
/*|											3=500円							|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-01													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	TuriKanData_Coin( TURI_KAN *TuriKan, uchar coin_syu, uchar pri_kind )
{
	uchar			edit_cnt = 0;		// 編集行数
	TURI_kan_rec	*Coin_Data;			// 金銭ﾃﾞｰﾀ(金種毎)ﾎﾟｲﾝﾀｰ
	uchar			sub[2];				// サブチューブ金種（予蓄１、予蓄２）
	uchar			TURIKAN_print_NewStyle = (prm_get(COM_PRM, S_TOT, 25, 1, 1))? 1 : 0;	// 前回設定枚数形式(14-0025⑥=1)

	if( coin_syu <= 3 ){
		sub[0] = (uchar)(TuriKan->sub_tube & 0x000F);
		sub[1] = (uchar)((TuriKan->sub_tube >> 8) & 0x000F);

		Coin_Data = &TuriKan->turi_dat[coin_syu];					// 金銭ﾃﾞｰﾀ(金種毎)ﾎﾟｲﾝﾀｰｾｯﾄ

		/*----- コイン金種 -----*/
		PCMD_CENTER( pri_kind );									// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
		PrnStr( TuriKan_Prn1[coin_syu], pri_kind );					// 印字ﾃﾞｰﾀ登録

		// ------------------------- 循環データ編集 ---------------------------------------------------------
		if ((syuukei_kind == TURIKAN_S)) {	// 小計印字 ＆ 前回設定枚数形式(14-0025⑥=1)
		// 小計印字 -->
			if(!TURIKAN_print_NewStyle){
				/*----- 現在保有枚数 -----*/
				Coin_maiset( 0, (ulong)Coin_Data->gen_mai, pri_kind);
				edit_cnt++;
			}
			/*----- 前回設定枚数 -----*/
			Coin_maiset( TURIKAN_print_NewStyle?8:1, (ulong)Coin_Data->zen_mai, pri_kind);
			edit_cnt++;
			/*----- 精算時入金枚数 -----*/
			Coin_maiset( 2, (ulong)Coin_Data->sei_nyu, pri_kind);
			edit_cnt++;
			/*----- 精算時出金枚数 -----*/
			Coin_maiset( 3, (ulong)Coin_Data->sei_syu, pri_kind);
			edit_cnt++;
			if(TURIKAN_print_NewStyle){
				/*----- 現在保有枚数 -----*/
				Coin_maiset( 0, (ulong)Coin_Data->gen_mai, pri_kind);
				edit_cnt++;
			}
			else {
				/*----- 釣銭補充枚数 -----*/
				Coin_maiset( 4, (ulong)Coin_Data->hojyu, pri_kind);
				edit_cnt++;
				/*----- 強制払出枚数 -----*/
				Coin_maiset( 5, (ulong)Coin_Data->kyosei, pri_kind);
				edit_cnt++;
				/*----- 新規設定枚数 -----*/
				Coin_maiset( 6, (ulong)Coin_Data->sin_mai, pri_kind);
				edit_cnt++;
			}
			// ------------------------- 予蓄データ編集 ---------------------------------------------------------
			if( ( coin_syu == 0 && ((sub[0] & 0x01)||(sub[1] & 0x01)) ) ||
				( coin_syu == 1 && ((sub[0] & 0x02)||(sub[1] & 0x02)) ) ||
				( coin_syu == 2 && ((sub[0] & 0x04)||(sub[1] & 0x04)) ) ){

				// 対象金種が「１０円　且つ　予蓄あり」または「１００円　且つ　予蓄あり」の場合

				/*----- 予蓄ﾀｲﾄﾙ -----*/
				PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
				PrnStr( " ------------( 予 蓄 )-----------", pri_kind );// 印字ﾃﾞｰﾀ登録

				edit_cnt++;

				if(!TURIKAN_print_NewStyle){
					/*----- 現在保有枚数 -----*/
					Coin_maiset( 0, (ulong)Coin_Data->ygen_mai, pri_kind);
					edit_cnt++;
				}
				/*----- 前回設定枚数 -----*/
				Coin_maiset( TURIKAN_print_NewStyle?8:1, (ulong)Coin_Data->yzen_mai, pri_kind);
				edit_cnt++;
				/*----- 精算時出金枚数 -----*/
				Coin_maiset( 3, (ulong)Coin_Data->ysei_syu, pri_kind);
				edit_cnt++;
				if(TURIKAN_print_NewStyle){
					/*----- 現在保有枚数 -----*/
					Coin_maiset( 0, (ulong)Coin_Data->ygen_mai, pri_kind);
					edit_cnt++;
				}
				else{
					/*----- 強制払出枚数 -----*/
					Coin_maiset( 5, (ulong)Coin_Data->ykyosei, pri_kind);
					edit_cnt++;
					/*----- 新規設定枚数 -----*/
					Coin_maiset( 6, (ulong)Coin_Data->ysin_mai, pri_kind);
					edit_cnt++;
				}
			}
			
		}
		else{
		// 合計印字 -->
			/*----- 現在保有枚数 -----*/
			Coin_maiset( TURIKAN_print_NewStyle?7:0, (ulong)Coin_Data->gen_mai, pri_kind);	// "変更前保有枚数" or "現在保有枚数"
			edit_cnt++;
			/*----- 前回保有枚数 -----*/
			Coin_maiset( TURIKAN_print_NewStyle?8:1, (ulong)Coin_Data->zen_mai, pri_kind);	// "前回設定枚数" or "前回保有枚数"
			edit_cnt++;
			/*----- 精算時入金枚数 -----*/
			Coin_maiset( 2, (ulong)Coin_Data->sei_nyu, pri_kind);
			edit_cnt++;
			/*----- 精算時出金枚数 -----*/
			Coin_maiset( 3, (ulong)Coin_Data->sei_syu, pri_kind);
			edit_cnt++;
			/*----- 釣銭補充枚数 -----*/
			Coin_maiset( 4, (ulong)Coin_Data->hojyu, pri_kind);
			edit_cnt++;
			/*----- 補充時金庫搬送枚数 -----*/
			if (TURIKAN_print_NewStyle) {
				Coin_maiset( 9, (ulong)Coin_Data->hojyu_safe, pri_kind);
				edit_cnt++;
			}
			/*----- 強制払出枚数 -----*/
			Coin_maiset( 5, (ulong)Coin_Data->kyosei, pri_kind);
			edit_cnt++;
			/*----- 新規設定枚数 -----*/
			Coin_maiset( 6, (ulong)Coin_Data->sin_mai, pri_kind);
			edit_cnt++;
			// ------------------------- 予蓄データ編集 ---------------------------------------------------------
			if( ( coin_syu == 0 && ((sub[0] & 0x01)||(sub[1] & 0x01)) ) ||
				( coin_syu == 1 && ((sub[0] & 0x02)||(sub[1] & 0x02)) ) ||
				( coin_syu == 2 && ((sub[0] & 0x04)||(sub[1] & 0x04)) ) ){

				// 対象金種が「１０円　且つ　予蓄あり」または「１００円　且つ　予蓄あり」の場合

				/*----- 予蓄ﾀｲﾄﾙ -----*/
				PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
				PrnStr( " ------------( 予 蓄 )-----------", pri_kind );// 印字ﾃﾞｰﾀ登録

				edit_cnt++;
	
				/*----- 現在保有枚数 -----*/
				Coin_maiset( TURIKAN_print_NewStyle?7:0, (ulong)Coin_Data->ygen_mai, pri_kind);	// "変更前保有枚数" or "現在保有枚数"
				edit_cnt++;
				/*----- 前回保有枚数 -----*/
				Coin_maiset( TURIKAN_print_NewStyle?8:1, (ulong)Coin_Data->yzen_mai, pri_kind);	// "前回設定枚数" or "前回保有枚数"
				edit_cnt++;
				/*----- 精算時出金枚数 -----*/
				Coin_maiset( 3, (ulong)Coin_Data->ysei_syu, pri_kind);
				edit_cnt++;
				/*----- 強制払出枚数 -----*/
				Coin_maiset( 5, (ulong)Coin_Data->ykyosei, pri_kind);
				edit_cnt++;
				/*----- 新規設定枚数 -----*/
				Coin_maiset( 6, (ulong)Coin_Data->ysin_mai, pri_kind);
				edit_cnt++;
			}
		}
	}

	return( edit_cnt );
}
/*[]---------------------------------------------------------------------------[]*/
/*|		釣銭管理用印字登録処理													|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Coin_maiset( edit_no, maisuu, pri_kind)					|*/
/*|	PARAMETER		:	short	edit_no	=	印字項目(Turikan_edit[]のインデックス)|*/
/*|						ulong	maisuu	=	枚数データ							|*/
/*|						uchar	pri_kind=	印字先ﾌﾟﾘﾝﾀ							|*/
/*|	RETURN VALUE	:	void													|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	sugata															|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2011 AMANO Corp.--------[]*/
void Coin_maiset(short edit_no, ulong maisuu, uchar pri_kind)
{
	Prn_edit_TanMai( cEditwk1, maisuu );									// 枚数データ編集

	Str_Set1(																// -----印字ﾃﾞｰﾀ編集-----
				Turikan_edit[edit_no],										// 文字列１："現在保有枚数"
				cEditwk1,													// 文字列２：現在保有枚数(循環)
				pri_kind													// 印字先ﾌﾟﾘﾝﾀ
			);
	
}
/*[]---------------------------------------------------------------------------[]*/
/*|		釣銭管理集計履歴印字ﾃﾞｰﾀ編集処理										|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	TURIKANLOG_edit( *msg_data, pri_kind, *p_proc_data)		|*/
/*|																				|*/
/*|	PARAMETER		:	T_FrmLogPriReq2	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|																				|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|	RETURN VALUE	:	void													|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi														|*/
/*|	Date	:	2005-06-24														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
void	TURIKANLOG_edit( T_FrmLogPriReq2 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ
	ushort	Sdate;				// 検索開始日
	ushort	syuukei_date;		// 集計日ﾃﾞｰﾀ
	uchar	ret2;				// 集計ﾃﾞｰﾀ編集処理結果
	ushort	date[3];			// 年月日
	ushort	index;				// ログ検索位置

	if( p_proc_data->Log_Start == OFF ){

		// 編集開始（初回編集）の場合

		/*------	＜表題＞編集	------*/
		Prn_edit_Title	(										// 表題（"釣銭管理情報"）印字ﾃﾞｰﾀ編集
							"釣銭管理情報",
							FONT_K_YOKOBAI,
							pri_kind
						);

		/*------	１行空白	------*/
		Prn_edit_space( pri_kind );

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, msg_data->Kikai_no );				// 機械NO.編集
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );							// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnStr( prn_work, pri_kind );							// 時刻　印字ﾃﾞｰﾀ登録

		/*------	釣銭管理集計履歴件数検索	------*/

		p_proc_data->Log_DataPt = 0;// 検索インデックスは先頭に指定

			// ﾛｸﾞ情報が正常な場合

			/*------	印字要求内容ﾁｪｯｸ	------*/

			switch( msg_data->BType ){	// 検索方法？

				case	0:	// 全て

					p_proc_data->Log_Count = Ope2_Log_CountGet( LOG_MNYMNG_SRAM );		// 登録件数set
					sprintf(										// cEditwk1←検索方法印字ﾃﾞｰﾀ
								cEditwk1,
								"全て(%d件)",
								p_proc_data->Log_Count
							);

					break;

				case	1:	// 日付指定

					//	指定日ﾁｪｯｸ
					if( OK == DateChk( (date_time_rec *)&msg_data->TSttTime ) ){

						// 指定日が正常な場合
						Sdate = dnrmlzm(							// 指定日ﾃﾞｰﾀ取得
											(short)msg_data->TSttTime.Year,
											(short)msg_data->TSttTime.Mon,
											(short)msg_data->TSttTime.Day
										);

						p_proc_data->Log_Sdate = Sdate;				// 指定日ﾃﾞｰﾀｾｰﾌﾞ
						date[0] = (short)msg_data->TSttTime.Year;
						date[1] = (short)msg_data->TSttTime.Mon;
						date[2] = (short)msg_data->TSttTime.Day;
						p_proc_data->Log_Count = Ope2_Log_CountGet_inDate( eLOG_MNYMNG_SRAM,
																		   &date[0],
																		   &index );// 登録件数set
						p_proc_data->Log_DataPt = index;

						sprintf(									// cEditwk1←検索方法印字ﾃﾞｰﾀ
									cEditwk1,
									"%04d/%d/%d分",
									msg_data->TSttTime.Year,
									msg_data->TSttTime.Mon,
									msg_data->TSttTime.Day
								);
					}
					else{
						// 指定日が異常な場合
						Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
						edit_end = ON;								// 編集終了
					}

					break;

				default:	// その他（検索方法指定ｴﾗｰ）

					Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録

					edit_end = ON;									// 編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
					break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			}

			if( edit_end != ON ){

				// 検索方法の指定が正常な場合

				/*------	＜検索方法＞編集	------*/
				PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
				PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録

				/*------	１行空白	------*/
				Prn_edit_space( pri_kind );

				/*------	編集制御ﾜｰｸｾｯﾄ	------*/
				p_proc_data->Log_Start	= ON;						// Log_Start	← ﾛｸﾞﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ
				if( p_proc_data->Log_Count == 0 ){

					// 格納件数が０の場合
					edit_end = ON;									// 編集終了
				}
			}
	}	// 初回編集処理end

	else{

		// ２回目以降の編集処理

		switch( msg_data->BType ){	// 検索方法？

			case	0:	// 全て
					if(0 == Ope_Log_1DataGet( eLOG_MNYMNG_SRAM, p_proc_data->Log_DataPt, (void *)&Pri_Work[0].mny_log) ){
						// データが取得エラーの場合は印字しない
						p_proc_data->Log_Count = 0;
						edit_end = ON;	// 編集終了
						break;
					}
				break;

			case	1:	// 日付指定

				if( p_proc_data->Log_Edit == OFF ){			// １集計ﾃﾞｰﾀ編集中

					// １集計ﾃﾞｰﾀ編集中でない場合

					for( ; p_proc_data->Log_Count > 0 ; ){	// 日付が一致するﾛｸﾞ情報を格納件数分検索する

						if(0 == Ope_Log_1DataGet( eLOG_MNYMNG_SRAM, p_proc_data->Log_DataPt, (void *)&Pri_Work[0].mny_log) ){
							// データが取得エラーの場合は印字しない
							p_proc_data->Log_Count = 0;
							edit_end = ON;	// 編集終了
							break;
						}
						syuukei_date = dnrmlzm(				// 対象ﾛｸﾞ情報の集計日取得
												(short)Pri_Work[0].mny_log.NowTime.Year,
												(short)Pri_Work[0].mny_log.NowTime.Mon,
												(short)Pri_Work[0].mny_log.NowTime.Day
											);
						if( syuukei_date == p_proc_data->Log_Sdate ){
							// 対象ﾛｸﾞ情報の集計日が指定日と一致した場合
								break;
						}
						p_proc_data->Log_DataPt++;						// 次に検索するログのインデックスをセット
					}
				}

				break;
		}

		if( p_proc_data->Log_Count > 0 ){					// 格納件数分の検索＆編集終了？

			// 格納件数分の検索＆編集を終了していない場合

			p_proc_data->Log_Edit = ON;						// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞｾｯﾄ

			ret2 = TURIKAN_edit(							// 印字対象集計ﾃﾞｰﾀ編集
									&(Pri_Work[0].mny_log),
									pri_kind,
									p_proc_data
								);

			if( ret2 == YES ){

				// １集計ﾃﾞｰﾀ編集終了の場合

				p_proc_data->Log_Edit = OFF;				// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞﾘｾｯﾄ

				p_proc_data->Log_Count--;					// 格納件数ﾃﾞｸﾘﾒﾝﾄ
				p_proc_data->Log_DataPt++;					// 次に編集するログの情報のインデックスをセット
			}
		}

		if( p_proc_data->Log_Count == 0 ){					// 全ﾛｸﾞ情報編集終了？

			// 格納件数分の編集が終了した場合
			edit_end = ON;									// 編集終了
		}

	}	// ２回目以降の編集処理end

	/*------	編集終了ﾁｪｯｸ	------*/
	if( edit_end == ON ){	
		p_proc_data->Final = ON;			// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		ｴﾗｰ情報印字ﾃﾞｰﾀ編集													|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	ERRJOU_edit( *Errlog, pri_kind, *p_proc_data )		|*/
/*|																			|*/
/*|	PARAMETER		:	Err_log		*Errlog		=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ				|*/
/*|																			|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-10													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	ERRJOU_edit( Err_log *Errlog, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{

	/*------	ｴﾗｰ情報ﾃﾞｰﾀ編集	------*/
	ERRJOU_edit_data( Errlog, pri_kind, ERRPRI_TYP_JOU );

	/*------	編集終了	------*/
	p_proc_data->Final = ON;							// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
}

/*[]-----------------------------------------------------------------------[]*/
/*|		ｴﾗｰ情報履歴印字ﾃﾞｰﾀ編集												|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	ERRLOG_edit( *msg_data, pri_kind, *p_proc_data )	|*/
/*|																			|*/
/*|	PARAMETER		:	T_FrmLogPriReq1	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-10													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	ERRLOG_edit( T_FrmLogPriReq2 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ
	uchar	f_Printer;			// 出力プリンタ種別（0=レシート、1=ジャーナル）
	ushort	Sdate;				// 検索開始日
	ushort	date[3];			// 年月日
	ushort	index;				// ログ検索位置
	ushort	error_date;			// エラー発生日

	if( J_PRI == pri_kind ){	// 出力プリンタ=ジャーナル
		f_Printer = 1;			// 出力プリンタ種別 = ジャーナル
	}else{
		f_Printer = 0;			// レシート
	}

	if( p_proc_data->Log_Start == OFF ){

		// 編集開始（初回編集）の場合

		/*------	＜表題＞編集	------*/
		Prn_edit_Title	(										// 表題（"エラー情報"）印字ﾃﾞｰﾀ編集
							"エラー情報",
							FONT_K_YOKOBAI,
							pri_kind
						);

		/*------	１行空白	------*/
		Prn_edit_space( pri_kind );

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, msg_data->Kikai_no );				// 機械NO.編集
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );							// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnStr( prn_work, pri_kind );							// 時刻　印字ﾃﾞｰﾀ登録

		/*------	ｴﾗｰ情報件数検索	------*/

		p_proc_data->Log_DataPt = 0;							// 検索インデックスは先頭に指定

			// ﾛｸﾞ情報が正常な場合

			/*------	印字要求内容ﾁｪｯｸ	------*/

			switch( msg_data->BType ){	// 検索方法？

				case	0:	// 全て

					sprintf(										// cEditwk1←検索方法印字ﾃﾞｰﾀ
								cEditwk1,
								"全て(%d件)",
								msg_data->LogCount
							);
					p_proc_data->Log_TotalCount = msg_data->LogCount;

					break;

				case	1:	// 日付指定

					//	指定日ﾁｪｯｸ
					if( OK == DateChk( (date_time_rec *)&msg_data->TSttTime ) ){

						// 指定日が正常な場合
						Sdate = dnrmlzm(							// 指定日ﾃﾞｰﾀ取得
											(short)msg_data->TSttTime.Year,
											(short)msg_data->TSttTime.Mon,
											(short)msg_data->TSttTime.Day
										);

						p_proc_data->Log_Sdate = Sdate;				// 指定日ﾃﾞｰﾀｾｰﾌﾞ
						date[0] = (short)msg_data->TSttTime.Year;
						date[1] = (short)msg_data->TSttTime.Mon;
						date[2] = (short)msg_data->TSttTime.Day;
						p_proc_data->Log_TotalCount = Ope2_Log_CountGet_inDate( eLOG_ERROR,
																				&date[0],
																				&index );// 登録件数set
						p_proc_data->Log_DataPt = index;

						sprintf(									// cEditwk1←検索方法印字ﾃﾞｰﾀ
									cEditwk1,
									"%04d/%d/%d分",
									msg_data->TSttTime.Year,
									msg_data->TSttTime.Mon,
									msg_data->TSttTime.Day
								);
					}
					else{
						// 指定日が異常な場合
						Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
						edit_end = ON;								// 編集終了
					}

					break;


				default:	// その他（検索方法指定ｴﾗｰ）

					Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録

					edit_end = ON;									// 編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
					break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			}

			if( edit_end != ON ){

				// 検索方法の指定が正常な場合

				/*------	＜検索方法＞編集	------*/
				PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
				PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録

				/*------	１行空白	------*/
				Prn_edit_space( pri_kind );

				/*------	編集制御ﾜｰｸｾｯﾄ	------*/
				p_proc_data->Log_Start	= ON;						// Log_Start	← ﾛｸﾞﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ

				if( p_proc_data->Log_TotalCount == 0 ){
					// 格納件数が０の場合
					edit_end = ON;									// 編集終了
				}
			}
	}	// 初回編集処理end

	else{
		// ２回目以降の編集処理
		switch( msg_data->BType ){	// 検索方法？

			case	0:	// 全て

				if( p_proc_data->Log_Edit == OFF ){			// １エラーデータ編集中
					if(0 == Ope_Log_1DataGet( eLOG_ERROR, p_proc_data->Log_DataPt, (void *)&Pri_Work[f_Printer].Err_work ) ){
						// データが取得エラーの場合は印字しない
						p_proc_data->Log_TotalCount = 0;
						edit_end = ON;	// 編集終了
					}
				}
				break;

			case	1:	// 日付指定

				if( p_proc_data->Log_Edit == OFF ){			// １エラーデータ編集中
					for( ; p_proc_data->Log_TotalCount > 0 ; ){	// 日付が一致するﾛｸﾞ情報を格納件数分検索する
						if(0 == Ope_Log_1DataGet( eLOG_ERROR, p_proc_data->Log_DataPt, (void *)&Pri_Work[f_Printer].Err_work ) ){
							// データが取得エラーの場合は印字しない
							p_proc_data->Log_TotalCount = 0;
							edit_end = ON;	// 編集終了
							break;
						}
						error_date = dnrmlzm(				// 対象ﾛｸﾞ情報の精算日取得
								(short)Pri_Work[f_Printer].Err_work.Date_Time.Year,
								(short)Pri_Work[f_Printer].Err_work.Date_Time.Mon,
								(short)Pri_Work[f_Printer].Err_work.Date_Time.Day
							);
						if( error_date == p_proc_data->Log_Sdate ){
							// 対象ﾛｸﾞ情報のエラー発生日が指定日と一致した場合
							break;							// 検索ﾙｰﾌﾟを抜ける
						}
						p_proc_data->Log_DataPt++;			// 次に検索するログのインデックスをセット
					}
				}

				break;

		}

		if( p_proc_data->Log_TotalCount > 0 ){				// 格納件数分の検索＆編集終了？(N)

			// 格納件数分の検索＆編集を終了していない場合

			p_proc_data->Log_Edit = ON;						// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞｾｯﾄ

			ERRJOU_edit_data(								// 印字対象エラーデータ編集
								(Err_log *)&Pri_Work[f_Printer].Err_work,
								pri_kind,
								ERRPRI_TYP_LOG
							);

			// １エラーデータ編集終了
			p_proc_data->Log_Edit = OFF;					// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞﾘｾｯﾄ

			p_proc_data->Log_TotalCount--;					// 格納件数ﾃﾞｸﾘﾒﾝﾄ
			p_proc_data->Log_DataPt++;						// 次に編集するログの情報のインデックスをセット

		}

		if( p_proc_data->Log_TotalCount == 0 ){				// 全ﾛｸﾞ情報編集終了？

			// 格納件数分の編集が終了した場合
			edit_end = ON;										// 編集終了
		}

	}	// ２回目以降の編集処理end

	/*------	編集終了ﾁｪｯｸ	------*/
	if( edit_end == ON ){	
		p_proc_data->Final = ON;			// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		ｴﾗｰ情報（１ﾃﾞｰﾀ）編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	ERRJOU_edit_data( *Errlog, pri_kind )				|*/
/*|																			|*/
/*|	PARAMETER		:	Err_log		*Errlog		=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ				|*/
/*|																			|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-10													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	ERRJOU_edit_data( Err_log *Errlog, uchar pri_kind, uchar type )
{
	uchar	Err_syu;		// ｴﾗｰ種別
	uchar	Err_cod;		// ｴﾗｰｺｰﾄﾞ
	ulong	Err_inf;		// ｴﾗｰ情報(bin)
	uchar	LockArea;
	ushort	LockPosi;
	char	strbuf[12];
	uchar	f_ClearEvent=0;	// 1=ｸﾘｱ通知LOG
// MH321800(S) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
//	union{
//		ulong	err_dat;
//		uchar	err_buf[4];
//	}err_data;
// MH321800(E) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
	uchar	set;
// MH810105(S) MH364301 PiTaPa対応
	char	*Reason_cod=0x0;	// 詳細・理由コード切り分け
// MH810105(E) MH364301 PiTaPa対応

	/* Hostｱﾗｰﾑ解除の印字 */
	if( (255 == Errlog->Errsyu) && (255 == Errlog->Errcod) ){
		f_ClearEvent = 1;
		Err_syu = 255;
		Err_cod = 255;
	}else{
		Err_syu = Errlog->Errsyu;						// ｴﾗｰ種別取得
		if( Err_syu > ERR_INFO_SYU_MAX ){
			Err_syu = ERR_INFO_SYU_MAX;
		}

		Err_cod = Errlog->Errcod;						// ｴﾗｰｺｰﾄﾞ取得
	}

	PCMD_LEFT( pri_kind );								// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );				// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );				// 漢字（通常）指定

	Prn_edit_Date2( cEditwk1, &Errlog->Date_Time );		// cEditwk1 ← 時刻印字ﾃﾞｰﾀ

	switch( Errlog->Errdtc ){
		case 0: //	解除の場合
			strcpy( strbuf , "解除");
			break;
		case 1: //	発生の場合
			if( !(Errlog->ErrDoor & ERR_LOG_RESEND_F) ){
				strcpy( strbuf , "発生");
			}else{
				strcpy( strbuf , "発生(再)");			// ドア閉によるエラー再送
			}
			break;
		case 2: //	発生／解除の場合
		default:
			strcpy( strbuf , "発生/解除");
			break;
	}

	if( ( Err_syu == ERRMDL_IFROCK )&&
		(( Err_cod >= ERR_IFSLAVECOMFAIL )&&( Err_cod <= (ERR_IFSLAVECOMFAIL+8))) )
	{
		// 子機IF盤の通信不良の場合
		Err_inf = Errlog->ErrBinDat % 100;

		sprintf(	prn_work,
						"E%02d%02d-%02ld   %s  %s",
						Err_syu,							// ｴﾗｰ種別（ﾓｼﾞｭｰﾙNo.）
						Err_cod,							// ｴﾗｰｺｰﾄﾞ
						Err_inf,							// ｴﾗｰ情報(bin)
						cEditwk1,							// 時刻印字ﾃﾞｰﾀ
						strbuf								// 発生
					);

	}else if( ( ( Err_syu == ERRMDL_IFROCK )&&
		( ( Err_cod == ERR_LOCKCLOSEFAIL )||( Err_cod == ERR_LOCKOPENFAIL) ) ) ||
		((( Err_syu == ERRMDL_IFFLAP )||( Err_syu == ERRMDL_CRRFLAP )) &&
		  ( ( Err_cod == ERR_FLAPCLOSEFAIL )||( Err_cod == ERR_FLAPOPENFAIL) ||
			( Err_cod == ERR_FLAP_AUTO_UPRETRYOVER )||( Err_cod == ERR_FLAP_AUTO_DOWNRETRYOVER) ||
		  	( Err_cod == ERR_FLAPDOWNRETRYOVER )||( Err_cod == ERR_FLAPDOWNRETRY)) ) )
	{
		// ロック装置の開閉異常の場合
		LockArea = (uchar)(Errlog->ErrBinDat / 10000);
		LockPosi = (ushort)(Errlog->ErrBinDat % 10000);

		if( LockArea ){
			cEditwk2[0] = (char)(0x40 + LockArea);
			intoas( (uchar*)&cEditwk2[1], LockPosi, 4 );
			cEditwk2[5] = 0;
		}else{
			intoas( (uchar*)&cEditwk2[0], LockPosi, 4 );
			cEditwk2[4] = 0;
		}
		sprintf(	prn_work,
						"E%02d%02d-%s %s %s",
						Err_syu,							// ｴﾗｰ種別（ﾓｼﾞｭｰﾙNo.）
						Err_cod,							// ｴﾗｰｺｰﾄﾞ
						cEditwk2,							// ｴﾗｰ情報(bin)
						cEditwk1,							// 時刻印字ﾃﾞｰﾀ
						strbuf								// 発生
					);
	}
	else if( ( Err_syu == ERRMDL_FLAP_CRB )&&
		( ( Err_cod == ERR_FLAPLOCK_LOCKCLOSEFAIL )||( Err_cod == ERR_FLAPLOCK_LOCKOPENFAIL) ||
		  ( Err_cod == ERR_FLAPLOCK_DOWNRETRYOVER )||( Err_cod == ERR_FLAPLOCK_DOWNRETRY) ) ) {
		// ロック装置の開閉異常の場合
		LockArea = (uchar)(Errlog->ErrBinDat / 10000);
		LockPosi = (ushort)(Errlog->ErrBinDat % 10000);

		if( LockArea ){
			cEditwk2[0] = (char)(0x40 + LockArea);
			intoas( (uchar*)&cEditwk2[1], LockPosi, 4 );
			cEditwk2[5] = 0;
		}else{
			intoas( (uchar*)&cEditwk2[0], LockPosi, 4 );
			cEditwk2[4] = 0;
		}
		sprintf(	prn_work,
						"E%02d%02d-%s %s %s",
						Err_syu,							// ｴﾗｰ種別（ﾓｼﾞｭｰﾙNo.）
						Err_cod,							// ｴﾗｰｺｰﾄﾞ
						cEditwk2,							// ｴﾗｰ情報(bin)
						cEditwk1,							// 時刻印字ﾃﾞｰﾀ
						strbuf								// 発生
					);
// MH810100(S) K.Onodera  2019/12/12 車番チケットレス(LCD_IF対応)
	}else if(( Err_syu == ERRMDL_TKLSLCD ) &&				// LCDモジュール間通信エラー
			 (( ERR_TKLSLCD_KSG_SOC <= Err_cod ) &&			// kasagoエラー
			  ( Err_cod <= ERR_TKLSLCD_KSG_CLS ))){
		Err_inf = Errlog->ErrBinDat;
		sprintf(	prn_work,
// MH810100(S) S.Nishimoto 2020/04/08 静的解析(20200407:870)対応
//						"E%02d%02d-%03d %s %s",
						"E%02d%02d-%03ld %s %s",
// MH810100(E) S.Nishimoto 2020/04/08 静的解析(20200407:870)対応
						Err_syu,							// ｴﾗｰ種別（ﾓｼﾞｭｰﾙNo.）
						Err_cod,							// ｴﾗｰｺｰﾄﾞ
						Err_inf,							// ｴﾗｰ情報(bin)
						cEditwk1,							// 時刻印字ﾃﾞｰﾀ
						strbuf								// 発生
					);
// MH810100(E) K.Onodera  2019/12/12 車番チケットレス(LCD_IF対応)
	}else if( f_ClearEvent ){								// ｸﾘｱ通知LOG
		sprintf(	prn_work,
						"EFFFF   %s   %s",
						cEditwk1,							// 時刻印字ﾃﾞｰﾀ
						"ｸﾘｱ "								// 
				);
	}else{

		// 3桁のエラーコード印字に対応
		if (Err_cod >= 100) {
		sprintf(	prn_work,
						"E%02d%03d  %s   %s",
						Err_syu,							// ｴﾗｰ種別（ﾓｼﾞｭｰﾙNo.）
						Err_cod,							// ｴﾗｰｺｰﾄﾞ
						cEditwk1,							// 時刻印字ﾃﾞｰﾀ
						strbuf								// 発生
					);
		} else {

// MH321800(S) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
//#ifdef	FUNCTION_MASK_EDY
//		if( Err_syu == ERRMDL_EDY && Errlog->Errinf == 2 ){	// ｴﾗｰ内容がEdyかつﾊﾞｲﾅﾘﾃﾞｰﾀの補足情報有り
//			err_data.err_dat = Errlog->ErrBinDat;			// ﾃﾞｰﾀをﾜｰｸ領域に設定
//			Prn_Edy_Err_SupplEdit( Err_syu, Err_cod, err_data.err_buf );	// 印字内容編集
//		}else{
//#endif
// MH321800(E) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
			if( Err_syu == ERRMDL_CARD && (Err_cod == ERR_CARD_T || Err_cod == ERR_CARD_H) ) {
				Err_inf = Errlog->ErrBinDat;
				sprintf(	prn_work,
								"E%02d%02d-(%02ld) %s %s",
								Err_syu,							// ｴﾗｰ種別（ﾓｼﾞｭｰﾙNo.）
								Err_cod,							// ｴﾗｰｺｰﾄﾞ
								Err_inf,							// ｴﾗｰ情報
								cEditwk1,							// 時刻印字ﾃﾞｰﾀ
								strbuf								// 発生
							);
				PrnStr( prn_work, pri_kind );
				return;	
			}
			else if( Err_syu == ERRMDL_MAIN && (Err_cod == ERR_MAIN_CALPARAMETER_NG || Err_cod == ERR_MAIN_CALPARAMETER_OK) ) {
				Err_inf = Errlog->ErrBinDat;
				sprintf(	prn_work,
								"E%02d%02d-%04ld %s %s",
								Err_syu,							// ｴﾗｰ種別（ﾓｼﾞｭｰﾙNo.）
								Err_cod,							// ｴﾗｰｺｰﾄﾞ
								Err_inf,							// ｴﾗｰ情報
								cEditwk1,							// 時刻印字ﾃﾞｰﾀ
								strbuf								// 発生
							);
				PrnStr( prn_work, pri_kind );
				return;	
			}
			else if( Err_syu == ERRMDL_MAIN && Err_cod == ERR_MAIN_LOG_WRITE_LOCK ) {
				intoas( (uchar*)&cEditwk2[0], Errlog->ErrBinDat, 4 );
				cEditwk2[4] = 0;
				sprintf(	prn_work,
						"E%02d%02d-%s %s %s",
						Err_syu,							// ｴﾗｰ種別（ﾓｼﾞｭｰﾙNo.）
						Err_cod,							// ｴﾗｰｺｰﾄﾞ
						cEditwk2,							// ｴﾗｰ情報(bin)
						cEditwk1,							// 時刻印字ﾃﾞｰﾀ
						strbuf );							// 発生/解除
			}
// MH322914 (s) kasiyama 2016/07/13 ログ保存できない状態を改善[共通バグNo.1225](MH341106)
			else if(( Err_syu == ERRMDL_MAIN ) && ( Err_cod == ERR_MAIN_SRAM_LOG_BUFFER_FULL )) {
				Err_inf = Errlog->ErrBinDat % 100;

				sprintf(	prn_work,
						"E%02d%02d-%02ld %s  %s",
						Err_syu,							// ｴﾗｰ種別（ﾓｼﾞｭｰﾙNo.）
						Err_cod,							// ｴﾗｰｺｰﾄﾞ
						Err_inf,							// ｴﾗｰ情報(bin)
						cEditwk1,							// 時刻印字ﾃﾞｰﾀ
						strbuf								// 発生
					);										// 発生/解除
		 	}
// MH322914 (e) kasiyama 2016/07/13 ログ保存できない状態を改善[共通バグNo.1225](MH341106)
			else {
				sprintf(	prn_work,
								"E%02d%02d   %s   %s",
								Err_syu,							// ｴﾗｰ種別（ﾓｼﾞｭｰﾙNo.）
								Err_cod,							// ｴﾗｰｺｰﾄﾞ
								cEditwk1,							// 時刻印字ﾃﾞｰﾀ
								strbuf								// 発生
							);
			}
// MH321800(S) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
//#ifdef	FUNCTION_MASK_EDY
//		}
//#endif
// MH321800(E) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
		}
	}
	PrnStr( prn_work, pri_kind );						// 印字ﾃﾞｰﾀ登録

	if( Errlog->Errinf == 1 ){							// ｴﾗｰ情報あり？（アスキー）
// MH321800(S) Y.Tanizaki ICクレジット対応 不要機能削除(CCT)
//		if( Err_syu == ERRMDL_CCT ){
//			memset( prn_work,0, sizeof(prn_work) );
//			memcpy( &prn_work, &Errlog->Errdat, ERR_LOG_ASC_DAT_SIZE);
//			ERRJOU_edit_data_mdat( prn_work);
//			PCMD_LEFT( pri_kind );
//			PrnStr( prn_work, pri_kind );
//		}else if( (Err_syu == ERRMDL_SUICA) && 
		if( (Err_syu == ERRMDL_SUICA) &&
// MH321800(E) Y.Tanizaki ICクレジット対応 不要機能削除(CCT)
					((Err_cod == 61) || (Err_cod == 65))){
			memset( prn_work,0, sizeof(prn_work) );
			if( Err_cod == 61 ){
				sprintf( prn_work,"        (%s)", Errlog->Errdat );
			}else if( Err_cod == 65 ){
				sprintf( prn_work," ...%s", Errlog->Errdat );
			}

			PCMD_LEFT( pri_kind );
			PrnStr( prn_work, pri_kind );			
// MH321800(S) D.Inaba ICクレジット対応
		} else if (Err_syu == ERRMDL_EC) {
		// E32xx
			if (Err_cod == ERR_EC_SETTLE_ERR ||
				Err_cod == ERR_EC_PAY_ERR ||
				Err_cod == ERR_EC_ALARM_TRADE ||
				Err_cod == ERR_EC_ALARM_TRADE_WAON ||
				Err_cod == ERR_EC_RCV_IGL_STS_DATA ||
// MH321800(S) フェーズエラー発生時に決済OK以外はリーダー切り離ししない
				Err_cod == ERR_EC_NOTOK_SETTLE_ERR ||
// MH321800(E) フェーズエラー発生時に決済OK以外はリーダー切り離ししない
// MH810103 GG119202(S) みなし決済扱い時の動作
				Err_cod == ERR_EC_SETTLE_ABORT ||
// MH810103 GG119202(E) みなし決済扱い時の動作
// MH810103 GG119202(S) 決済状態に「みなし決済」追加
				Err_cod == ERR_EC_DEEMED_SETTLEMENT ||
// MH810103 GG119202(E) 決済状態に「みなし決済」追加
// MH810105(S) MH364301 QRコード決済対応
//				(Err_cod <= ERR_EC_CREDIT_ABNORMAL && Err_cod >= ERR_EC_KOUTU_ABNORMAL) ||	// E3270~E3276
				(ERR_EC_KOUTU_ABNORMAL <= Err_cod && Err_cod <= ERR_EC_QR_ABNORMAL) ||			// E3270~E3278
				Err_cod == ERR_EC_PROCESS_FAILURE ||											// E3280
// MH810105(E) MH364301 QRコード決済対応
// MH810103 GG119202(S) 電子マネー系詳細エラーコード追加
//				(Err_cod <= ERR_EC_RCV_SETT_ERR_UNREG && Err_cod >= ERR_EC_RCV_SETT_ERR_100) // E3220~E3243
// MH810105(S) MH364301 みなし決済データ受信エラー追加
//				(Err_cod <= ERR_EC_RCV_EMONEY_ERR && Err_cod >= ERR_EC_RCV_SETT_ERR_100) // E3220~E3245
				(ERR_EC_RCV_SETT_ERR_100 <= Err_cod && Err_cod <= ERR_EC_RCV_SETT_ERR_311) ||	// E3220~E3233
				(ERR_EC_RCV_SETT_ERR_DES <= Err_cod && Err_cod <= ERR_EC_RCV_EMONEY_ERR)		// E3240~E3245
// MH810105(E) MH364301 みなし決済データ受信エラー追加
// MH810103 GG119202(E) 電子マネー系詳細エラーコード追加
				) {
				memset(prn_work, 0, sizeof(prn_work));
				if( (Err_cod == ERR_EC_ALARM_TRADE) || (Err_cod == ERR_EC_ALARM_TRADE_WAON) ){
				// E3266, E3267の場合
					sprintf(prn_work, "   %s", Errlog->Errdat);
				}else{
// MH810105(S) MH364301 PiTaPa対応
					// ジャーナル印字データに理由コードを追加
					Reason_cod = strstr((char *)Errlog->Errdat, "理由コード");
					if(Reason_cod){
						strncpy((char *)cEditwk1, (char *)Errlog->Errdat, 16);
						sprintf(prn_work, "        %s", cEditwk1);
					}else{
// MH810105(E) MH364301 PiTaPa対応
					sprintf(prn_work, "        %s", Errlog->Errdat);
// MH810105(S) MH364301 PiTaPa対応
					}
// MH810105(E) MH364301 PiTaPa対応
				}
				
				// 2行目
				PCMD_LEFT(pri_kind);
				PrnStr(prn_work, pri_kind);
// MH810105(S) MH364301 PiTaPa対応
				if(Reason_cod){
					sprintf(prn_work, "        %s", Reason_cod);
					// 3行目
					PCMD_LEFT(pri_kind);
					PrnStr(prn_work, pri_kind);
				}
// MH810105(E) MH364301 PiTaPa対応
			}
// MH321800(E) D.Inaba ICクレジット対応
		} else if ((Err_syu == ERRMDL_CAPPI) && (type != ERRPRI_TYP_LOG)) {
			// 情報印字では詳細を出さない
		}else{

			//	ｴﾗｰ情報ありの場合
			sprintf( cTmp1,"%s", &Errlog->Errdat );

			memset( prn_work,0, sizeof(prn_work) );
			strncpy( prn_work,cTmp1,FONTA_MAX_COL );							// ｴﾗｰ情報１行目

			if ( type == ERRPRI_TYP_LOG ) {

			    set = (uchar)prm_get( COM_PRM, S_PRN, 19, 1, 2 );				// ｴﾗｰ詳細印字設定参照

			    if ( Err_syu == ERRMDL_CAPPI ) {								// Cappiクレジット
					if( set == 1 ){ 											// ｴﾗｰ詳細印字する
						memset( &prn_work[2], 0x2a, 5 );
						memset( &prn_work[18], 0x2a, 9 );
					}else if( set == 2 ){
					}else{
						memset( prn_work,0, sizeof(prn_work) );
					}
				}
			}
			if( strlen(prn_work) != 0 ){
				PCMD_LEFT( pri_kind );
				PrnStr( prn_work, pri_kind );
			}
			memset( prn_work,0, sizeof(prn_work) );
			strncpy( prn_work,cTmp1+FONTA_MAX_COL,FONTA_MAX_COL );				// ｴﾗｰ情報２行目
			if( strlen(prn_work) != 0 ){
				PCMD_LEFT( pri_kind );
				PrnStr( prn_work, pri_kind );
			}
			memset( prn_work,0, sizeof(prn_work) );
			strncpy( prn_work,cTmp1+(FONTA_MAX_COL*2),FONTA_MAX_COL );			// ｴﾗｰ情報３行目
			if( strlen(prn_work) != 0 ){
				PCMD_LEFT( pri_kind );
				PrnStr( prn_work, pri_kind );
			}
			memset( prn_work,0, sizeof(prn_work) );
			strncpy( prn_work,cTmp1+(FONTA_MAX_COL*3),FONTA_MAX_COL );			// ｴﾗｰ情報４行目
			if( strlen(prn_work) != 0 ){
				PCMD_LEFT( pri_kind );
				PrnStr( prn_work, pri_kind );
			}
			memset( prn_work,0, sizeof(prn_work) );
			strncpy( prn_work,cTmp1+(FONTA_MAX_COL*4),( 160-(FONTA_MAX_COL*4) ) );// ｴﾗｰ情報５行目
			if( strlen(prn_work) != 0 ){
				PCMD_LEFT( pri_kind );
				PrnStr( prn_work, pri_kind );
			}
		}
	}
	else if( Errlog->Errinf == 2 ){								// ﾊﾞｲﾅﾘ補足ﾃﾞｰﾀあり
// MH321800(S) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
//		if( Err_syu == ERRMDL_EDY ){							// ｴﾗｰ種別がEdy
//			sprintf(	prn_work,		
//							"        %s   %s",
//							cEditwk1,							// 時刻印字ﾃﾞｰﾀ
//							strbuf								// 発生
//						);
//			PrnStr( prn_work, pri_kind );
//			return;	
//		}
// MH321800(E) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
	}

}

/*[]-----------------------------------------------------------------------[]*/
/*|		ｱﾗｰﾑ情報印字ﾃﾞｰﾀ編集												|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	ARMJOU_edit( *Errlog, pri_kind, *p_proc_data )		|*/
/*|																			|*/
/*|	PARAMETER		:	Arm_log		*Armlog		=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ				|*/
/*|																			|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-13													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	ARMJOU_edit( Arm_log *Armlog, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{

	/*------	ｱﾗｰﾑ情報ﾃﾞｰﾀ編集	------*/
	ARMJOU_edit_data( Armlog, pri_kind );

	/*------	編集終了	------*/
	p_proc_data->Final = ON;							// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
}

/*[]-----------------------------------------------------------------------[]*/
/*|		ｱﾗｰﾑ情報履歴印字ﾃﾞｰﾀ編集											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	ARMLOG_edit( *msg_data, pri_kind, *p_proc_data )	|*/
/*|																			|*/
/*|	PARAMETER		:	T_FrmLogPriReq1	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-13													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	ARMLOG_edit( T_FrmLogPriReq2 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ
	uchar	f_Printer;			// 出力プリンタ種別（0=レシート、1=ジャーナル）
	ushort	Sdate;				// 検索開始日
	ushort	date[3];			// 年月日
	ushort	index;				// ログ検索位置
	ushort	alarm_date;			// アラーム発生日

	if( J_PRI == pri_kind ){	// 出力プリンタ=ジャーナル
		f_Printer = 1;			// 出力プリンタ種別 = ジャーナル
	}else{
		f_Printer = 0;			// レシート
	}

	if( p_proc_data->Log_Start == OFF ){

		// 編集開始（初回編集）の場合

		/*------	＜表題＞編集	------*/
		Prn_edit_Title	(										// 表題（"アラーム情報"）印字ﾃﾞｰﾀ編集
							"アラーム情報",
							FONT_K_YOKOBAI,
							pri_kind
						);

		/*------	１行空白	------*/
		Prn_edit_space( pri_kind );

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, msg_data->Kikai_no );				// 機械NO.編集
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );							// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnStr( prn_work, pri_kind );							// 時刻　印字ﾃﾞｰﾀ登録

		/*------	ｱﾗｰﾑ情報件数検索	------*/

		p_proc_data->Log_DataPt = 0;							// 検索インデックスは先頭に指定

			// ﾛｸﾞ情報が正常な場合

			/*------	印字要求内容ﾁｪｯｸ	------*/

			switch( msg_data->BType ){	// 検索方法？

				case	0:	// 全て

					sprintf(										// cEditwk1←検索方法印字ﾃﾞｰﾀ
								cEditwk1,
								"全て(%d件)",
								msg_data->LogCount
							);
					p_proc_data->Log_TotalCount = msg_data->LogCount;

					break;

				case	1:	// 日付指定

					//	指定日ﾁｪｯｸ
					if( OK == DateChk( (date_time_rec *)&msg_data->TSttTime ) ){

						// 指定日が正常な場合
						Sdate = dnrmlzm(							// 指定日ﾃﾞｰﾀ取得
											(short)msg_data->TSttTime.Year,
											(short)msg_data->TSttTime.Mon,
											(short)msg_data->TSttTime.Day
										);

						p_proc_data->Log_Sdate = Sdate;				// 指定日ﾃﾞｰﾀｾｰﾌﾞ
						date[0] = (short)msg_data->TSttTime.Year;
						date[1] = (short)msg_data->TSttTime.Mon;
						date[2] = (short)msg_data->TSttTime.Day;
						p_proc_data->Log_TotalCount = Ope2_Log_CountGet_inDate( eLOG_ALARM,
																				&date[0],
																				&index );// 登録件数set
						p_proc_data->Log_DataPt = index;

						sprintf(									// cEditwk1←検索方法印字ﾃﾞｰﾀ
									cEditwk1,
									"%04d/%d/%d分",
									msg_data->TSttTime.Year,
									msg_data->TSttTime.Mon,
									msg_data->TSttTime.Day
								);
					}
					else{
						// 指定日が異常な場合
						Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
						edit_end = ON;								// 編集終了
					}

					break;


				default:	// その他（検索方法指定ｴﾗｰ）

					Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録

					edit_end = ON;									// 編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
					break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			}

			if( edit_end != ON ){

				// 検索方法の指定が正常な場合

				/*------	＜検索方法＞編集	------*/
				PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
				PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録

				/*------	１行空白	------*/
				Prn_edit_space( pri_kind );

				/*------	編集制御ﾜｰｸｾｯﾄ	------*/
				p_proc_data->Log_Start	= ON;						// Log_Start	← ﾛｸﾞﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ

				if( p_proc_data->Log_TotalCount == 0 ){
					// 格納件数が０の場合
					edit_end = ON;									// 編集終了
				}
			}
	}	// 初回編集処理end

	else{
		// ２回目以降の編集処理
		switch( msg_data->BType ){	// 検索方法？

			case	0:	// 全て

				if( p_proc_data->Log_Edit == OFF ){			// １アラームデータ編集中
					if(0 == Ope_Log_1DataGet( eLOG_ALARM, p_proc_data->Log_DataPt, (void *)&Pri_Work[f_Printer].Arm_work ) ){
						// データが取得エラーの場合は印字しない
						p_proc_data->Log_TotalCount = 0;
						edit_end = ON;	// 編集終了
					}
				}
				break;

			case	1:	// 日付指定

				if( p_proc_data->Log_Edit == OFF ){			// １アラームデータ編集中
					for( ; p_proc_data->Log_TotalCount > 0 ; ){	// 日付が一致するﾛｸﾞ情報を格納件数分検索する
						if(0 == Ope_Log_1DataGet( eLOG_ALARM, p_proc_data->Log_DataPt, (void *)&Pri_Work[f_Printer].Arm_work ) ){
							// データが取得エラーの場合は印字しない
							p_proc_data->Log_TotalCount = 0;
							edit_end = ON;	// 編集終了
							break;
						}
						alarm_date = dnrmlzm(				// 対象ﾛｸﾞ情報の精算日取得
								(short)Pri_Work[f_Printer].Arm_work.Date_Time.Year,
								(short)Pri_Work[f_Printer].Arm_work.Date_Time.Mon,
								(short)Pri_Work[f_Printer].Arm_work.Date_Time.Day
							);
						if( alarm_date == p_proc_data->Log_Sdate ){
							// 対象ﾛｸﾞ情報のアラーム発生日が指定日と一致した場合
							break;							// 検索ﾙｰﾌﾟを抜ける
						}
						p_proc_data->Log_DataPt++;			// 次に検索するログのインデックスをセット
					}
				}

				break;

		}

		if( p_proc_data->Log_TotalCount > 0 ){				// 格納件数分の検索＆編集終了？(N)

			// 格納件数分の検索＆編集を終了していない場合

			p_proc_data->Log_Edit = ON;						// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞｾｯﾄ

			ARMJOU_edit_data(								// 印字対象アラームデータ編集
								(Arm_log *)&Pri_Work[f_Printer].Arm_work,
								pri_kind
							);

			// １アラームデータ編集終了
			p_proc_data->Log_Edit = OFF;					// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞﾘｾｯﾄ

			p_proc_data->Log_TotalCount--;					// 格納件数ﾃﾞｸﾘﾒﾝﾄ
			p_proc_data->Log_DataPt++;						// 次に編集するログの情報のインデックスをセット

		}

		if( p_proc_data->Log_TotalCount == 0 ){				// 全ﾛｸﾞ情報編集終了？
			// 格納件数分の編集が終了した場合
			edit_end = ON;									// 編集終了
		}	

	}	// ２回目以降の編集処理end

	/*------	編集終了ﾁｪｯｸ	------*/
	if( edit_end == ON ){	
		p_proc_data->Final = ON;			// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		ｱﾗｰﾑ情報（１ﾃﾞｰﾀ）編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	ARMJOU_edit_data( *Armlog, pri_kind )				|*/
/*|																			|*/
/*|	PARAMETER		:	Arm_log		*Armlog		=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ				|*/
/*|																			|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-13													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	ARMJOU_edit_data( Arm_log *Armlog, uchar pri_kind )
{
	uchar	Arm_syu;		// ｱﾗｰﾑ種別
	uchar	Arm_cod;		// ｱﾗｰﾑｺｰﾄﾞ
	char	strbuf[12];
	uchar	f_ClearEvent=0;	// 1=ｸﾘｱ通知LOG
	ushort	wkus1, wkus2;
	ulong	wkul;
	ulong	wkul1;
	uchar	LockArea;
	ushort	LockPosi;

	/* Hostｱﾗｰﾑ解除の印字 */
	if( (255 == Armlog->Armsyu) && (255 == Armlog->Armcod) ){
		f_ClearEvent = 1;
	}else{
		Arm_syu = Armlog->Armsyu;						// ｱﾗｰﾑ種別取得
		if( Arm_syu > ARM_INFO_SYU_MAX ){
			Arm_syu = ARM_INFO_SYU_MAX;
		}

		Arm_cod = Armlog->Armcod;						// ｱﾗｰﾑｺｰﾄﾞ取得
		if( Arm_cod > ARM_INFO_COD_MAX ){
			Arm_cod = ARM_INFO_COD_MAX;
		}
	}

	PCMD_LEFT( pri_kind );								// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );				// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );				// 漢字（通常）指定

	Prn_edit_Date2( cEditwk1, &Armlog->Date_Time );		// cEditwk1 ← 時刻印字ﾃﾞｰﾀ

	switch( Armlog->Armdtc ){
		case 0: //	解除の場合
			strcpy( strbuf , "解除");
			break;
		case 1: //	発生の場合
			if( !(Armlog->ArmDoor & ERR_LOG_RESEND_F) ){
				strcpy( strbuf , "発生");
			}else{
				strcpy( strbuf , "発生(再)");			// ドア閉によるアラーム再送
			}
			break;
		case 2: //	発生／解除の場合
		default:
			strcpy( strbuf , "発生/解除");
			break;
	}

	if( f_ClearEvent ){									// ｸﾘｱ通知LOG
		sprintf(	prn_work,
					"AFFFF   %s   %s",
					cEditwk1,							// 時刻印字ﾃﾞｰﾀ
					"ｸﾘｱ "								// 
				);
	}
	else if( (Arm_syu == 2) && ((1 <= Arm_cod) && (Arm_cod <= 10)) ){

		wkus1 = (ushort)((Armlog->ArmBinDat) / 100000);	// Masterの駐車場種別（0-3）get
		wkus2 = (ushort)((Armlog->ArmBinDat) % 100000);	// 定期券IDget

		// Masterの駐車場種別から駐車場番号get
		wkul = (ulong)wkus1;
		if( CPrmSS[S_SYS][1] == wkul ) 					// 基本駐車場
			wkus1 = 0;
		else if( CPrmSS[S_SYS][2] == wkul ) 			// 拡張1駐車場
			wkus1 = 1;
		else if( CPrmSS[S_SYS][3] == wkul ) 			// 拡張2駐車場
			wkus1 = 2;
		else if( CPrmSS[S_SYS][4] == wkul ) 			// 拡張3駐車場
			wkus1 = 3;
		else{
			wkus1 = 99;									// 該当駐車場設定なし
		}

		if( wkus1 == 0 ){								// 基本駐車場
			sprintf(	prn_work,
					"A%02d%02d-ID:%05d",
					Arm_syu,							// ｱﾗｰﾑ種別（ﾓｼﾞｭｰﾙNo.）
					Arm_cod,							// ｱﾗｰﾑｺｰﾄﾞ
					wkus2								// 定期券ID
				);
			PrnStr( prn_work, pri_kind );				// 印字ﾃﾞｰﾀ登録
			PCMD_LEFT( pri_kind );

			sprintf(	prn_work,
					"        %s   %s",
					cEditwk1,							// 時刻印字ﾃﾞｰﾀ
					strbuf								// 発生,解除,発生/解除
				);
		}
		else if( wkus1 == 99 ){
			sprintf(	prn_work,
					"A%02d%02d-該当なし,ID:%05d",
					Arm_syu,							// ｱﾗｰﾑ種別（ﾓｼﾞｭｰﾙNo.）
					Arm_cod,							// ｱﾗｰﾑｺｰﾄﾞ
					wkus2								// 定期券ID
				);
			PrnStr( prn_work, pri_kind );				// 印字ﾃﾞｰﾀ登録
			PCMD_LEFT( pri_kind );

			sprintf(	prn_work,
					"        %s   %s",
					cEditwk1,							// 時刻印字ﾃﾞｰﾀ
					strbuf								// 発生,解除,発生/解除
				);
		}
		else{											// 拡張
			sprintf(	prn_work,
					"A%02d%02d-拡%d,ID:%05d",
					Arm_syu,							// ｱﾗｰﾑ種別（ﾓｼﾞｭｰﾙNo.）
					Arm_cod,							// ｱﾗｰﾑｺｰﾄﾞ
					wkus1,								// 拡張X駐車場
					wkus2								// 定期券ID
				);
			PrnStr( prn_work, pri_kind );				// 印字ﾃﾞｰﾀ登録
			PCMD_LEFT( pri_kind );

			sprintf(	prn_work,
					"        %s   %s",
					cEditwk1,							// 時刻印字ﾃﾞｰﾀ
					strbuf								// 発生,解除,発生/解除
				);


		}
	}else if( (Arm_syu == 2) && (((40 <= Arm_cod) && (Arm_cod <= 49)) || (Arm_cod == 54)) ){

		memcpy(&wkul1,&Armlog->Armdat[0],4);			// 駐車場Noセット
		memcpy(&wkus2,&Armlog->Armdat[4],2);			// 定期券IDセット

		wkul = (ulong)wkul1;
		if( CPrmSS[S_SYS][1] == wkul ) 					// 基本駐車場
			wkus1 = 0;
		else if( CPrmSS[S_SYS][2] == wkul ) 			// 拡張1駐車場
			wkus1 = 1;
		else if( CPrmSS[S_SYS][3] == wkul ) 			// 拡張2駐車場
			wkus1 = 2;
		else if( CPrmSS[S_SYS][4] == wkul ) 			// 拡張3駐車場
			wkus1 = 3;
		else{
			wkus1 = 99;									// 該当駐車場設定なし
		}

		if( wkus1 == 0 ){								// 基本駐車場
			sprintf(	prn_work,
					"A%02d%02d-ID:%05d",
					Arm_syu,							// ｱﾗｰﾑ種別（ﾓｼﾞｭｰﾙNo.）
					Arm_cod,							// ｱﾗｰﾑｺｰﾄﾞ
					wkus2								// 定期券ID
				);
			PrnStr( prn_work, pri_kind );				// 印字ﾃﾞｰﾀ登録
			PCMD_LEFT( pri_kind );

			sprintf(	prn_work,
					"        %s   %s",
					cEditwk1,							// 時刻印字ﾃﾞｰﾀ
					strbuf								// 発生,解除,発生/解除
				);
		}else if( wkus1 == 99 ){
			sprintf(	prn_work,
					"A%02d%02d-該当なし,ID:%05d",
					Arm_syu,							// ｱﾗｰﾑ種別（ﾓｼﾞｭｰﾙNo.）
					Arm_cod,							// ｱﾗｰﾑｺｰﾄﾞ
					wkus2								// 定期券ID
				);
			PrnStr( prn_work, pri_kind );				// 印字ﾃﾞｰﾀ登録
			PCMD_LEFT( pri_kind );

			sprintf(	prn_work,
					"        %s   %s",
					cEditwk1,							// 時刻印字ﾃﾞｰﾀ
					strbuf								// 発生,解除,発生/解除
				);
		}else{											// 拡張
			sprintf(	prn_work,
					"A%02d%02d-拡%d,ID:%05d",
					Arm_syu,							// ｱﾗｰﾑ種別（ﾓｼﾞｭｰﾙNo.）
					Arm_cod,							// ｱﾗｰﾑｺｰﾄﾞ
					wkus1,								// 拡張X駐車場
					wkus2								// 定期券ID
				);
			PrnStr( prn_work, pri_kind );				// 印字ﾃﾞｰﾀ登録
			PCMD_LEFT( pri_kind );

			sprintf(	prn_work,
					"        %s   %s",
					cEditwk1,							// 時刻印字ﾃﾞｰﾀ
					strbuf								// 発生,解除,発生/解除
				);
		}
// MH322916(S) A.Iiizumi 2018/05/16 長期駐車検出機能対応
//	}else if( (Arm_syu == 0) && (Arm_cod == 30) ){
	}else if( ((Arm_syu == 0) && (Arm_cod == 30)) ||	// A0030
	          ((Arm_syu == 0) && (Arm_cod == 31)) ){	// A0031
// MH322916(E) A.Iiizumi 2018/05/16 長期駐車検出機能対応
		LockArea = (uchar)(Armlog->ArmBinDat / 10000);
		LockPosi = (ushort)(Armlog->ArmBinDat % 10000);

		if( LockArea ){
			cEditwk2[0] = (char)(0x40 + LockArea);
			intoas( (uchar*)&cEditwk2[1], LockPosi, 4 );
			cEditwk2[5] = 0;
		}else{
			intoas( (uchar*)&cEditwk2[0], LockPosi, 4 );
			cEditwk2[4] = 0;
		}
		sprintf(	prn_work,
					"A%02d%02d-%s %s %s",
					Arm_syu,							// ｱﾗｰﾑ種別（ﾓｼﾞｭｰﾙNo.）
					Arm_cod,							// ｱﾗｰﾑｺｰﾄﾞ
					cEditwk2,							// ｱﾗｰﾑ情報
					cEditwk1,							// 時刻印字ﾃﾞｰﾀ
					strbuf								// 発生,解除,発生/解除
				);
	}else{
		sprintf(	prn_work,
					"A%02d%02d   %s   %s",
					Arm_syu,							// ｱﾗｰﾑ種別（ﾓｼﾞｭｰﾙNo.）
					Arm_cod,							// ｱﾗｰﾑｺｰﾄﾞ
					cEditwk1,							// 時刻印字ﾃﾞｰﾀ
					strbuf								// 発生,解除,発生/解除
				);
	}

	PrnStr( prn_work, pri_kind );						// 印字ﾃﾞｰﾀ登録

	if( Armlog->Arminf == ON ){							// ｱﾗｰﾑ情報あり？

		//	ｱﾗｰﾑ情報ありの場合
		sprintf( cTmp1,"%s", &Armlog->Armdat );

		memset( prn_work,0, sizeof(prn_work) );
		strncpy( prn_work,cTmp1,FONTA_MAX_COL );							// ｱﾗｰﾑ情報１行目
		if( strlen(prn_work) != 0 ){
			PCMD_LEFT( pri_kind );
			PrnStr( prn_work, pri_kind );
		}
		memset( prn_work,0, sizeof(prn_work) );
		strncpy( prn_work,cTmp1+FONTA_MAX_COL,FONTA_MAX_COL );				// ｱﾗｰﾑ情報２行目
		if( strlen(prn_work) != 0 ){
			PCMD_LEFT( pri_kind );
			PrnStr( prn_work, pri_kind );
		}
		memset( prn_work,0, sizeof(prn_work) );
		strncpy( prn_work,cTmp1+(FONTA_MAX_COL*2),FONTA_MAX_COL );			// ｱﾗｰﾑ情報３行目
		if( strlen(prn_work) != 0 ){
			PCMD_LEFT( pri_kind );
			PrnStr( prn_work, pri_kind );
		}
		memset( prn_work,0, sizeof(prn_work) );
		strncpy( prn_work,cTmp1+(FONTA_MAX_COL*3),FONTA_MAX_COL );			// ｱﾗｰﾑ情報４行目
		if( strlen(prn_work) != 0 ){
			PCMD_LEFT( pri_kind );
			PrnStr( prn_work, pri_kind );
		}
		memset( prn_work,0, sizeof(prn_work) );
		strncpy( prn_work,cTmp1+(FONTA_MAX_COL*4),( 160-(FONTA_MAX_COL*4) ) );// ｱﾗｰﾑ情報５行目
		if( strlen(prn_work) != 0 ){
			PCMD_LEFT( pri_kind );
			PrnStr( prn_work, pri_kind );
		}
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		操作情報印字ﾃﾞｰﾀ編集												|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	OPEJOU_edit( *Opelog, pri_kind, *p_proc_data )		|*/
/*|																			|*/
/*|	PARAMETER		:	Ope_log		*Opelog		=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ				|*/
/*|																			|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-13													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	OPEJOU_edit( Ope_log *Opelog, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{

	/*------	操作情報ﾃﾞｰﾀ編集	------*/
	OPEJOU_edit_data( Opelog, pri_kind );

	/*------	編集終了	------*/
	p_proc_data->Final = ON;							// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
}

/*[]-----------------------------------------------------------------------[]*/
/*|		操作情報履歴印字ﾃﾞｰﾀ編集											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	OPELOG_edit( *msg_data, pri_kind, *p_proc_data )	|*/
/*|																			|*/
/*|	PARAMETER		:	T_FrmLogPriReq1	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-13													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	OPELOG_edit( T_FrmLogPriReq2 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ
	uchar	f_Printer;			// 出力プリンタ種別（0=レシート、1=ジャーナル）
	ushort	Sdate;				// 検索開始日
	ushort	date[3];			// 年月日
	ushort	index;				// ログ検索位置
	ushort	ope_date;			// 操作発生日

	if( J_PRI == pri_kind ){	// 出力プリンタ=ジャーナル
		f_Printer = 1;			// 出力プリンタ種別 = ジャーナル
	}else{
		f_Printer = 0;			// レシート
	}

	if( p_proc_data->Log_Start == OFF ){

		// 編集開始（初回編集）の場合

		/*------	＜表題＞編集	------*/
		Prn_edit_Title	(										// 表題（"操作情報"）印字ﾃﾞｰﾀ編集
							"操作情報",
							FONT_K_YOKOBAI,
							pri_kind
						);

		/*------	１行空白	------*/
		Prn_edit_space( pri_kind );

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, msg_data->Kikai_no );				// 機械NO.編集
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );							// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnStr( prn_work, pri_kind );							// 時刻　印字ﾃﾞｰﾀ登録

		/*------	操作情報件数検索	------*/

		p_proc_data->Log_DataPt = 0;							// 検索インデックスは先頭に指定

			// ﾛｸﾞ情報が正常な場合

			/*------	印字要求内容ﾁｪｯｸ	------*/

			switch( msg_data->BType ){	// 検索方法？

				case	0:	// 全て

					sprintf(										// cEditwk1←検索方法印字ﾃﾞｰﾀ
								cEditwk1,
								"全て(%d件)",
								msg_data->LogCount
							);
					p_proc_data->Log_TotalCount = msg_data->LogCount;

					break;

				case	1:	// 日付指定

					//	指定日ﾁｪｯｸ
					if( OK == DateChk( (date_time_rec *)&msg_data->TSttTime ) ){

						// 指定日が正常な場合
						Sdate = dnrmlzm(							// 指定日ﾃﾞｰﾀ取得
											(short)msg_data->TSttTime.Year,
											(short)msg_data->TSttTime.Mon,
											(short)msg_data->TSttTime.Day
										);

						p_proc_data->Log_Sdate = Sdate;				// 指定日ﾃﾞｰﾀｾｰﾌﾞ
						date[0] = (short)msg_data->TSttTime.Year;
						date[1] = (short)msg_data->TSttTime.Mon;
						date[2] = (short)msg_data->TSttTime.Day;
						p_proc_data->Log_TotalCount = Ope2_Log_CountGet_inDate( eLOG_OPERATE,
																				&date[0],
																				&index );// 登録件数set
						p_proc_data->Log_DataPt = index;

						sprintf(									// cEditwk1←検索方法印字ﾃﾞｰﾀ
									cEditwk1,
									"%04d/%d/%d分",
									msg_data->TSttTime.Year,
									msg_data->TSttTime.Mon,
									msg_data->TSttTime.Day
								);
					}
					else{
						// 指定日が異常な場合
						Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
						edit_end = ON;								// 編集終了
					}

					break;


				default:	// その他（検索方法指定ｴﾗｰ）

					Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録

					edit_end = ON;									// 編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
					break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			}

			if( edit_end != ON ){

				// 検索方法の指定が正常な場合

				/*------	＜検索方法＞編集	------*/
				PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
				PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録

				/*------	１行空白	------*/
				Prn_edit_space( pri_kind );

				/*------	編集制御ﾜｰｸｾｯﾄ	------*/
				p_proc_data->Log_Start	= ON;						// Log_Start	← ﾛｸﾞﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ

				if( p_proc_data->Log_TotalCount == 0 ){
					// 格納件数が０の場合
					edit_end = ON;									// 編集終了
				}
			}
	}	// 初回編集処理end

	else{
		// ２回目以降の編集処理
		switch( msg_data->BType ){	// 検索方法？

			case	0:	// 全て

				if( p_proc_data->Log_Edit == OFF ){			// １操作データ編集中
					if(0 == Ope_Log_1DataGet( eLOG_OPERATE, p_proc_data->Log_DataPt, (void *)&Pri_Work[f_Printer].Ope_work ) ){
						// データが取得エラーの場合は印字しない
						p_proc_data->Log_TotalCount = 0;
						edit_end = ON;	// 編集終了
					}
				}
				break;

			case	1:	// 日付指定

				if( p_proc_data->Log_Edit == OFF ){			// １操作データ編集中
					for( ; p_proc_data->Log_TotalCount > 0 ; ){	// 日付が一致するﾛｸﾞ情報を格納件数分検索する
						if(0 == Ope_Log_1DataGet( eLOG_OPERATE, p_proc_data->Log_DataPt, (void *)&Pri_Work[f_Printer].Ope_work ) ){
							// データが取得エラーの場合は印字しない
							p_proc_data->Log_TotalCount = 0;
							edit_end = ON;	// 編集終了
							break;
						}
						ope_date = dnrmlzm(				// 対象ﾛｸﾞ情報の精算日取得
								(short)Pri_Work[f_Printer].Ope_work.Date_Time.Year,
								(short)Pri_Work[f_Printer].Ope_work.Date_Time.Mon,
								(short)Pri_Work[f_Printer].Ope_work.Date_Time.Day
							);
						if( ope_date == p_proc_data->Log_Sdate ){
							// 対象ﾛｸﾞ情報の操作発生日が指定日と一致した場合
							break;							// 検索ﾙｰﾌﾟを抜ける
						}
						p_proc_data->Log_DataPt++;			// 次に検索するログのインデックスをセット
					}
				}

				break;

		}

		if( p_proc_data->Log_TotalCount > 0 ){				// 格納件数分の検索＆編集終了？(N)

			// 格納件数分の検索＆編集を終了していない場合

			p_proc_data->Log_Edit = ON;						// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞｾｯﾄ

			OPEJOU_edit_data(								// 印字対象操作データ編集
								(Ope_log *)&Pri_Work[f_Printer].Ope_work,
								pri_kind
							);

			// １操作データ編集終了
			p_proc_data->Log_Edit = OFF;					// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞﾘｾｯﾄ

			p_proc_data->Log_TotalCount--;					// 格納件数ﾃﾞｸﾘﾒﾝﾄ
			p_proc_data->Log_DataPt++;						// 次に編集するログの情報のインデックスをセット

		}

		if( p_proc_data->Log_TotalCount == 0 ){				// 全ﾛｸﾞ情報編集終了？

			// 格納件数分の編集が終了した場合
			edit_end = ON;										// 編集終了
		}

	}	// ２回目以降の編集処理end

	/*------	編集終了ﾁｪｯｸ	------*/
	if( edit_end == ON ){	
		p_proc_data->Final = ON;								// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		操作情報（１ﾃﾞｰﾀ）編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	OPEJOU_edit_data( *Opelog, pri_kind )				|*/
/*|																			|*/
/*|	PARAMETER		:	Ope_log		*Opelog		=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ				|*/
/*|																			|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-13													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	OPEJOU_edit_data( Ope_log *Opelog, uchar pri_kind )
{
	uchar	Ope_syu;		// 操作種別
	uchar	Ope_cod;		// 操作ｺｰﾄﾞ
	ushort	Ope_no;			// 操作No.
	ushort	LockPosi;
	uchar	LockArea;
	uchar	i;
	ushort	wkus1,wkus2;
	ulong	wkul1;
	struct clk_rec wk_CLK_REC;
	
	Ope_syu = Opelog->OpeKind;							// 操作種別取得
	if( Ope_syu > OPE_INFO_SYU_MAX ){
		Ope_syu = OPE_INFO_SYU_MAX;
	}
	
	Ope_cod = Opelog->OpeCode;							// 操作ｺｰﾄﾞ取得
	if( Ope_cod > OPE_INFO_COD_MAX ){
		Ope_cod = OPE_INFO_COD_MAX;
	}
	
	PCMD_LEFT( pri_kind );								// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );				// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );				// 漢字（通常）指定
	
	Prn_edit_Date2( cEditwk1, &Opelog->Date_Time );		// cEditwk1 ← 時刻印字ﾃﾞｰﾀ
	
	Ope_no = Ope_syu * 100 + Ope_cod;					// 操作No.

	if( Ope_no == OPLOG_LOCK_CLOSE		||	Ope_no == OPLOG_LOCK_OPEN		||
		Ope_no == OPLOG_FLAP_UP 		||	Ope_no == OPLOG_FLAP_DOWN		||
		Ope_no == OPLOG_SET_LOCK_CLOSE 	||	Ope_no == OPLOG_SET_LOCK_OPEN	||
		Ope_no == OPLOG_SET_FLAP_UP 	||	Ope_no == OPLOG_SET_FLAP_DOWN 	||
		Ope_no == OPLOG_CCRFAIL_ON 		||	Ope_no == OPLOG_CCRFAIL_OFF 	||
		Ope_no == OPLOG_T_HOUJIN_DEF 	||
		Ope_no == OPLOG_ANSHOU_B_CLR )
	{
		LockArea = (uchar)(Opelog->OpeAfter / 10000);
		LockPosi = (ushort)(Opelog->OpeAfter % 10000);

		if( LockArea ){
			cEditwk2[0] = (char)(0x40 + LockArea);
			intoas( (uchar*)&cEditwk2[1], LockPosi, 4 );
			cEditwk2[5] = 0;
		}else{
			intoas( (uchar*)&cEditwk2[0], LockPosi, 4 );
			cEditwk2[4] = 0;
		}

		sprintf(	prn_work,
					"M%04d-%s %s",
					Ope_no,								// 操作Ｎｏ．
					cEditwk2,							// 車室Ｎｏ．
					cEditwk1							// 時刻印字ﾃﾞｰﾀ
				);
	}else if( (Ope_no == OPLOG_SET_TEIKI_YUKOMUKO) || (Ope_no == OPLOG_SET_STATUS_CHENGE) ){

		wkus1 = (ushort)((Opelog->OpeAfter) / 100000);	// Masterの駐車場種別（0-3）get
		wkus2 = (ushort)((Opelog->OpeAfter) % 100000);	// 定期券IDget

		// Masterの駐車場種別から駐車場番号get
		if( CPrmSS[S_SYS][1] == wkus1 ) 				// 基本駐車場
			wkus1 = 0;
		else if( CPrmSS[S_SYS][2] == wkus1 ) 			// 拡張1駐車場
			wkus1 = 1;
		else if( CPrmSS[S_SYS][3] == wkus1 ) 			// 拡張2駐車場
			wkus1 = 2;
		else if( CPrmSS[S_SYS][4] == wkus1 ) 			// 拡張3駐車場
			wkus1 = 3;
		else{	
			return;										// 該当駐車場設定なし
		}

		if( wkus1 == 0 ){								// 基本駐車場
			sprintf(	prn_work,
					"M%04d-ID:%05d %s",
					Ope_no,								// 操作No
					wkus2,								// 時刻印字ﾃﾞｰﾀ
					cEditwk1
				);
		}
		else{											// 拡張
			sprintf(	prn_work,
					"M%04d-拡%d,ID:%05d %s",
					Ope_no,								// 操作No
					wkus1,								// 拡張X駐車場
					wkus2,								// 定期券ID
					cEditwk1							// 時刻印字ﾃﾞｰﾀ
				);
		}
	}else if( (Ope_no == OPLOG_GT_SET_TEIKI_YUKOMUKO) || (Ope_no == OPLOG_GT_SET_STATUS_CHENGE) ){

		wkul1 = (ulong)Opelog->OpeBefore;	// Masterの駐車場種別（0-3）get
		wkus2 = (ushort)Opelog->OpeAfter;	// 定期券IDget

		// Masterの駐車場種別から駐車場番号get
		if( CPrmSS[S_SYS][1] == wkul1 ){ 				// 基本駐車場
			wkus1 = 0;
		}else if( CPrmSS[S_SYS][2] == wkul1 ){ 			// 拡張1駐車場
			wkus1 = 1;
		}else if( CPrmSS[S_SYS][3] == wkul1 ){ 			// 拡張2駐車場
			wkus1 = 2;
		}else if( CPrmSS[S_SYS][4] == wkul1 ){ 			// 拡張3駐車場
			wkus1 = 3;
		}else{
			return;										// 該当駐車場設定なし
		}

		if( wkus1 == 0 ){								// 基本駐車場
			sprintf(	prn_work,
					"M%04d-ID:%05d %s",
					Ope_no,								// 操作No
					wkus2,								// 時刻印字ﾃﾞｰﾀ
					cEditwk1
				);
		}
		else{											// 拡張
			sprintf(	prn_work,
					"M%04d-拡%d,ID:%05d %s",
					Ope_no,								// 操作No
					wkus1,								// 拡張X駐車場
					wkus2,								// 定期券ID
					cEditwk1							// 時刻印字ﾃﾞｰﾀ
				);
		}
	}else if((Ope_no == OPLOG_SET_W_BINCODE) || (Ope_no == OPLOG_SET_H_BINCODE)){
		switch(Opelog->OpeAfter){
		case 0:
			sprintf(	prn_work,
					"M%04d-1件追加 %s",
					Ope_no,								// 操作No
					cEditwk1							// 時刻印字ﾃﾞｰﾀ
				);
			break;
		case 1:
			sprintf(	prn_work,
					"M%04d-1件削除 %s",
					Ope_no,								// 操作No
					cEditwk1							// 時刻印字ﾃﾞｰﾀ
				);
			break;
		case 9:
			sprintf(	prn_work,
					"M%04d-全件削除 %s",
					Ope_no,								// 操作No
					cEditwk1							// 時刻印字ﾃﾞｰﾀ
				);
			break;
		default:
			return;
		}
	}else if((Ope_no == OPLOG_SET_TPOINT_BASE) || (Ope_no == OPLOG_SET_TPOINT_TIME)){
		wkus1 = (ushort)(Opelog->OpeAfter >> 16);
		wkus2 = (ushort)(Opelog->OpeAfter & 0x0000ffff);
		sprintf(	prn_work,
				"M%04d-%d円/%dPT %s",
				Ope_no,								// 操作No
				wkus1,
				wkus2,
				cEditwk1							// 時刻印字ﾃﾞｰﾀ
			);
	}else if (Ope_no == OPLOG_SET_TCARD_USE){
		if(Opelog->OpeAfter == 0){
			sprintf(	prn_work,
					"M%04d-利用可 %s",
					Ope_no,								// 操作No
					cEditwk1							// 時刻印字ﾃﾞｰﾀ
				);
		}
		else{
			sprintf(	prn_work,
					"M%04d-利用不可 %s",
					Ope_no,								// 操作No
					cEditwk1							// 時刻印字ﾃﾞｰﾀ
				);
		}
	}else if( Ope_no == OPLOG_REMOTE_DL_REQ || Ope_no == OPLOG_REMOTE_DL_END ||
			  Ope_no == OPLOG_REMOTE_SW_END || Ope_no == OPLOG_REMOTE_RES_UPLD){
		wkus1 = (ushort)(Opelog->OpeBefore % 100);
		if( wkus1 == 0 ){								// 結果正常
			sprintf(	prn_work,
					OpeMonitorFormat[0],
					Ope_no,								// 操作No
					cEditwk1
				);
		}else{											// 結果NG
			sprintf(	prn_work,
					OpeMonitorFormat[1],
					Ope_no,								// 操作No
					wkus1,
					cEditwk1
				);		
		}
	}else if( Ope_no == OPLOG_REMOTE_DISCONNECT || Ope_no == OPLOG_REMOTE_CONNECT ){
			sprintf(	prn_work,
					OpeMonitorFormat[2],
					Ope_no,								// 操作No
					RemoteDLStr[Opelog->OpeBefore],		// 補足情報
					cEditwk1
				);
	}else{
		if (Ope_syu == 80 && Ope_cod == 51) {			// 減額精算
			sprintf(prn_work, "M%02d%02d (-\\%lu)  %s", Ope_syu, Ope_cod, Opelog->OpeAfter, cEditwk1);
		}else if( (Ope_no == OPLOG_TOKEISET2) || (Ope_no == OPLOG_SET_TIME2_COM) ||
					  (Ope_no == OPLOG_SET_TIME2_PIP) || ( Ope_no == OPLOG_SET_TIME2_SNTP ) )
		
		{
			// 1行目
			c_UnNormalize_sec( Opelog->OpeBefore, &wk_CLK_REC );	// 変更前時間 clk_rec化（秒つき）
			sprintf(prn_work, "M%02d%02d   %02d/%02d/%02d %02d:%02d.%02d =>", 
				Ope_syu, Ope_cod,
				wk_CLK_REC.year - 2000, wk_CLK_REC.mont, wk_CLK_REC.date,
				wk_CLK_REC.hour, wk_CLK_REC.minu, wk_CLK_REC.seco );
			PrnStr( prn_work, pri_kind );						// 印字ﾃﾞｰﾀ登録

			// 2行目
			c_UnNormalize_sec( Opelog->OpeAfter, &wk_CLK_REC );	// 変更後時間 clk_rec化（秒つき）
			sprintf(prn_work, "        %02d/%02d/%02d %02d:%02d.%02d", 
				wk_CLK_REC.year - 2000, wk_CLK_REC.mont, wk_CLK_REC.date,
				wk_CLK_REC.hour, wk_CLK_REC.minu, wk_CLK_REC.seco );
			// PrnStr( prn_work, pri_kind );					// これは最後にCallされる
		} else if( Opelog->OpeAfter ){
			if( (111 == Ope_no) ||						// ﾒﾝﾃ開始（ﾊﾟｽﾜｰﾄﾞ）
				(112 == Ope_no)	||						// ﾒﾝﾃ開始（係員ｶｰﾄﾞ）
				(128 == Ope_no) )						// 修正精算操作開始
			{
				sprintf(prn_work, "M%02d%02d-係員No.%02lu 開始 ", Ope_syu, Ope_cod, Opelog->OpeAfter);
			}
			else if( (115 == Ope_no) ||					// ﾒﾝﾃ終了
					 (129 == Ope_no) ){					// 修正精算操作終了
				sprintf(prn_work, "M%02d%02d-係員No.%02lu 終了 ", Ope_syu, Ope_cod, Opelog->OpeAfter);
			}else if(Ope_no == OPLOG_ATTRNDANT_CARD){
				sprintf(prn_work, "M%02d%02d-係員ｶｰﾄﾞ:%05lu ", Ope_syu, Ope_cod, Opelog->OpeAfter);
			}else{
				sprintf(prn_work, "M%02d%02d-%010lu ", Ope_syu, Ope_cod, Opelog->OpeAfter);
			}
			strcat(prn_work, cEditwk1);
		}else{
			/* 文字印字ﾁｪｯｸ */
			for( i=0; 9999 != Pro_OpeLogStrTbl[i].Ope_no; ++i ){
				if( Ope_no == Pro_OpeLogStrTbl[i].Ope_no )
					break;
			}
			if( 9999 != Pro_OpeLogStrTbl[i].Ope_no ){	// 文字印字ｲﾍﾞﾝﾄ
				sprintf(prn_work, "M%02d%02d-%s %s", Ope_syu, Ope_cod, Pro_OpeLogStrTbl[i].String, cEditwk1);
			}else{
				sprintf(prn_work, "M%02d%02d   %s", Ope_syu, Ope_cod, cEditwk1);
			}
		}
	}
	PrnStr( prn_work, pri_kind );						// 印字ﾃﾞｰﾀ登録
}

/*[]-----------------------------------------------------------------------[]*/
/*|		モニタ情報印字ﾃﾞｰﾀ編集												|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	MONJOU_edit( *Monlog, pri_kind, *p_proc_data )		|*/
/*|																			|*/
/*|	PARAMETER		:	Mon_log		*Monlog		=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ				|*/
/*|																			|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	machida kei													|*/
/*|	Date	:	2005-11-30													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	MONJOU_edit( Mon_log *Monlog, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{

	/*------	操作情報ﾃﾞｰﾀ編集	------*/
	MONJOU_edit_data( Monlog, pri_kind );

	/*------	編集終了	------*/
	p_proc_data->Final = ON;							// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
}

/*[]-----------------------------------------------------------------------[]*/
/*|		モニタ情報履歴印字ﾃﾞｰﾀ編集											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	MONLOG_edit( *msg_data, pri_kind, *p_proc_data )	|*/
/*|																			|*/
/*|	PARAMETER		:	T_FrmLogPriReq1	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	R.HARA														|*/
/*|	Date	:	2006-02-28													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
void	MONLOG_edit( T_FrmLogPriReq2 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ
	uchar	f_Printer;			// 出力プリンタ種別（0=レシート、1=ジャーナル）
	ushort	Sdate;				// 検索開始日
	ushort	date[3];			// 年月日
	ushort	index;				// ログ検索位置
	ushort	mon_date;			// モニタ発生日

	if( J_PRI == pri_kind ){	// 出力プリンタ=ジャーナル
		f_Printer = 1;			// 出力プリンタ種別 = ジャーナル
	}else{
		f_Printer = 0;			// レシート
	}
	if( p_proc_data->Log_Start == OFF ){

		// 編集開始（初回編集）の場合

		/*------	＜表題＞編集	------*/
		Prn_edit_Title	(										// 表題（"モニタ情報"）印字ﾃﾞｰﾀ編集
							"モニタ情報",
							FONT_K_YOKOBAI,
							pri_kind
						);

		/*------	１行空白	------*/
		Prn_edit_space( pri_kind );

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, msg_data->Kikai_no );				// 機械NO.編集
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );							// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnStr( prn_work, pri_kind );							// 時刻　印字ﾃﾞｰﾀ登録

		/*------	モニタ情報件数検索	------*/

		p_proc_data->Log_DataPt = 0;							// 検索インデックスは先頭に指定

			// ﾛｸﾞ情報が正常な場合

			/*------	印字要求内容ﾁｪｯｸ	------*/

			switch( msg_data->BType ){	// 検索方法？

				case	0:	// 全て

					sprintf(										// cEditwk1←検索方法印字ﾃﾞｰﾀ
								cEditwk1,
								"全て(%d件)",
								msg_data->LogCount
							);
					p_proc_data->Log_TotalCount = msg_data->LogCount;

					break;

				case	1:	// 日付指定

					//	指定日ﾁｪｯｸ
					if( OK == DateChk( (date_time_rec *)&msg_data->TSttTime ) ){

						// 指定日が正常な場合
						Sdate = dnrmlzm(							// 指定日ﾃﾞｰﾀ取得
											(short)msg_data->TSttTime.Year,
											(short)msg_data->TSttTime.Mon,
											(short)msg_data->TSttTime.Day
										);

						p_proc_data->Log_Sdate = Sdate;				// 指定日ﾃﾞｰﾀｾｰﾌﾞ
						date[0] = (short)msg_data->TSttTime.Year;
						date[1] = (short)msg_data->TSttTime.Mon;
						date[2] = (short)msg_data->TSttTime.Day;
						p_proc_data->Log_TotalCount = Ope2_Log_CountGet_inDate( eLOG_MONITOR,
																				&date[0],
																				&index );// 登録件数set
						p_proc_data->Log_DataPt = index;

						sprintf(									// cEditwk1←検索方法印字ﾃﾞｰﾀ
									cEditwk1,
									"%04d/%d/%d分",
									msg_data->TSttTime.Year,
									msg_data->TSttTime.Mon,
									msg_data->TSttTime.Day
								);
					}
					else{
						// 指定日が異常な場合
						Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
						edit_end = ON;								// 編集終了
					}

					break;


				default:	// その他（検索方法指定ｴﾗｰ）

					Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録

					edit_end = ON;									// 編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
					break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			}

			if( edit_end != ON ){

				// 検索方法の指定が正常な場合

				/*------	＜検索方法＞編集	------*/
				PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
				PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録

				/*------	１行空白	------*/
				Prn_edit_space( pri_kind );

				/*------	編集制御ﾜｰｸｾｯﾄ	------*/
				p_proc_data->Log_Start	= ON;						// Log_Start	← ﾛｸﾞﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ

				if( p_proc_data->Log_TotalCount == 0 ){
					// 格納件数が０の場合
					edit_end = ON;									// 編集終了
				}
			}
	}	// 初回編集処理end

	else{
		// ２回目以降の編集処理
		switch( msg_data->BType ){	// 検索方法？

			case	0:	// 全て

				if( p_proc_data->Log_Edit == OFF ){			// １モニタデータ編集中
					if(0 == Ope_Log_1DataGet( eLOG_MONITOR, p_proc_data->Log_DataPt, (void *)&Pri_Work[f_Printer].Mon_work ) ){
						// データが取得エラーの場合は印字しない
						p_proc_data->Log_TotalCount = 0;
						edit_end = ON;	// 編集終了
					}
				}
				break;

			case	1:	// 日付指定

				if( p_proc_data->Log_Edit == OFF ){			// １モニタデータ編集中
					for( ; p_proc_data->Log_TotalCount > 0 ; ){	// 日付が一致するﾛｸﾞ情報を格納件数分検索する
						if(0 == Ope_Log_1DataGet( eLOG_MONITOR, p_proc_data->Log_DataPt, (void *)&Pri_Work[f_Printer].Mon_work ) ){
							// データが取得エラーの場合は印字しない
							p_proc_data->Log_TotalCount = 0;
							edit_end = ON;	// 編集終了
							break;
						}
						mon_date = dnrmlzm(				// 対象ﾛｸﾞ情報の精算日取得
								(short)Pri_Work[f_Printer].Mon_work.Date_Time.Year,
								(short)Pri_Work[f_Printer].Mon_work.Date_Time.Mon,
								(short)Pri_Work[f_Printer].Mon_work.Date_Time.Day
							);
						if( mon_date == p_proc_data->Log_Sdate ){
							// 対象ﾛｸﾞ情報のモニタ発生日が指定日と一致した場合
							break;							// 検索ﾙｰﾌﾟを抜ける
						}
						p_proc_data->Log_DataPt++;			// 次に検索するログのインデックスをセット
					}
				}

				break;

		}

		if( p_proc_data->Log_TotalCount > 0 ){				// 格納件数分の検索＆編集終了？(N)

			// 格納件数分の検索＆編集を終了していない場合

			p_proc_data->Log_Edit = ON;						// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞｾｯﾄ

			MONJOU_edit_data(								// 印字対象モニタデータ編集
								(Mon_log *)&Pri_Work[f_Printer].Mon_work,
								pri_kind
							);

			// １モニタデータ編集終了
			p_proc_data->Log_Edit = OFF;					// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞﾘｾｯﾄ

			p_proc_data->Log_TotalCount--;					// 格納件数ﾃﾞｸﾘﾒﾝﾄ
			p_proc_data->Log_DataPt++;						// 次に編集するログの情報のインデックスをセット

		}

		if( p_proc_data->Log_TotalCount == 0 ){				// 全ﾛｸﾞ情報編集終了？
			// 格納件数分の編集が終了した場合
			edit_end = ON;										// 編集終了
		}

	}	// ２回目以降の編集処理end

	/*------	編集終了ﾁｪｯｸ	------*/
	if( edit_end == ON ){	
		p_proc_data->Final = ON;								// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		モニタ情報（１ﾃﾞｰﾀ）編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	MONJOU_edit_data( *Monlog, pri_kind )				|*/
/*|																			|*/
/*|	PARAMETER		:	Mon_log		*Monlog		=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ				|*/
/*|																			|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	machida kei													|*/
/*|	Date	:	2005-11-30													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	MONJOU_edit_data( Mon_log *Monlog, uchar pri_kind )
{
	uchar	Mon_syu;		// 操作種別
	uchar	Mon_cod;		// 操作ｺｰﾄﾞ
	ulong	Mon_inf;
	uchar	LockArea;
	ushort	LockPosi;
	uchar	Nml_pri = OFF;	// ﾉｰﾏﾙ印字ﾌﾗｸﾞ
	ushort	wk_S1,wk_S2;
	
	Mon_syu = Monlog->MonKind;							// モニタ種別取得
	if( Mon_syu > MON_INFO_SYU_MAX ){
		Mon_syu = MON_INFO_SYU_MAX;
	}
	
	Mon_cod = Monlog->MonCode;							// モニタｺｰﾄﾞ取得
	if( Mon_cod > MON_INFO_COD_MAX ){
		Mon_cod = MON_INFO_COD_MAX;
	}
	
	PCMD_LEFT( pri_kind );								// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );				// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );				// 漢字（通常）指定
	
	Prn_edit_Date2( cEditwk1, &Monlog->Date_Time );		// cEditwk1 ← 時刻印字ﾃﾞｰﾀ
	
	if (Monlog->MonInfo[0] == 0) {
	/* バイナリデータもしくはデータなし */
		Mon_inf = ((ulong)Monlog->MonInfo[6] << (8 * 3));
		Mon_inf += ((ulong)Monlog->MonInfo[7] << (8 * 2));
		Mon_inf += ((ulong)Monlog->MonInfo[8] << (8 * 1));
		Mon_inf += Monlog->MonInfo[9];

		switch( Mon_syu ){	// ﾓﾆﾀ種別により各処理へ分岐

			case	1:		// Edy通信関連

				switch(  Mon_cod ){	// ﾓﾆﾀｺｰﾄﾞにより各処理へ分岐

// MH321800(S) G.So ICクレジット対応 不要機能削除(Edy)
//					case	50:		// 初回通信開始
//					case	52:		// 手動Ｔ合計によるｾﾝﾀｰ通信開始
//					case	53:		// 自動Ｔ合計によるｾﾝﾀｰ通信開始
//					case	54:		// 手動ｾﾝﾀｰ通信開始（ﾒﾝﾃ操作）
//					case	55:		// 自動ｾﾝﾀｰ通信開始
//						sprintf(prn_work, "R%02d%02d-Edy通信開始 ", Mon_syu, Mon_cod );
//						break;
//						
//					case	51:		// 初回通信終了（OK/NG）
//					case	56:		// ｾﾝﾀｰ通信終了（OK/NG）
//						if( Mon_inf == 1 ){
//							// 正常終了
//							sprintf(prn_work, "R%02d%02d-Edy通信終了OK ", Mon_syu, Mon_cod );
//						}
//						else{
//							// 異常終了
//							sprintf(prn_work, "R%02d%02d-Edy通信終了NG ", Mon_syu, Mon_cod );
//						}
//						
//						break;
//
//					case	57:		// ﾘｰﾀﾞｰ相互認証鍵更新
//						sprintf(prn_work, "R%02d%02d   ", Mon_syu, Mon_cod );
//						break;
// MH321800(E) G.So ICクレジット対応 不要機能削除(Edy)
// GG129001(S) T合計印字がマイナスにならないよう対策(共通改善No.1604)（MH364304流用）
					case 71:		// 集計クリア異常(①印字集計のヘッダーと前回集計のヘッダーの比較)
					case 72:		// 集計クリア異常(②現在集計の追番、今回集計日時、前回集計日時と 印字集計の追番、今回集計日時、前回集計日時の比較)
					case 73:		// 集計クリア異常(③現在集計項目の値と印字集計項目の値の比較)
					case 74:		// 集計クリア異常(④現在集計の今回集計日時が0クリアされているか確認)
						sprintf(prn_work, "R%02d%02d-%01d ", Mon_syu, Mon_cod, Mon_inf );
						break;
// GG129001(E) T合計印字がマイナスにならないよう対策(共通改善No.1604)（MH364304流用）
					case 85:		// クレジットコマンド送信要因
						sprintf(prn_work, "R%02d%02d %02d-%02d ", Mon_syu, Mon_cod, (Mon_inf >> 16) & 0x0000ffff, Mon_inf & 0x0000ffff );
						break;
					case 86:		// クレジットコマンド応答結果
						sprintf(prn_work, "R%02d%02d %02d-%08d ", Mon_syu, Mon_cod, Monlog->MonInfo[5], Mon_inf );
						break;
					case 87:		// クレジットコマンドタイムアウト
						sprintf(prn_work, "R%02d%02d %02d ", Mon_syu, Mon_cod, Mon_inf );
						break;

					default:		// その他
						Nml_pri = ON;						// ﾉｰﾏﾙ印字
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
						break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
				}
				break;

			case	5:		// ﾛｯｸ装置開閉

				switch( Mon_cod ){	// ﾓﾆﾀｺｰﾄﾞにより各処理へ分岐

					case	4:		// ﾗｸﾞﾀｲﾑ延長
					case	5:		// ﾛｯｸ装置開
					case	6:		// ﾛｯｸ装置閉
					case   10:		// ﾌﾗｯﾌﾟ下降
					case   11:		// ﾌﾗｯﾌﾟ上昇
					case   15:		// 手動ﾓｰﾄﾞ発生(ﾌﾗｯﾌﾟ)
					case   16:		// 手動ﾓｰﾄﾞ解除(ﾌﾗｯﾌﾟ)
					case   17:		// 手動ﾓｰﾄﾞ発生(ﾛｯｸ装置)
					case   18:		// 手動ﾓｰﾄﾞ解除(ﾛｯｸ装置)
					case   20:		// 入庫
					case   21:		// 出庫
						LockArea = (uchar)(Mon_inf / 10000);
						LockPosi = (ushort)(Mon_inf % 10000);

						if( LockArea ){
							cEditwk2[0] = (char)(0x40 + LockArea);
							intoas( (uchar*)&cEditwk2[1], LockPosi, 4 );
							cEditwk2[5] = 0;
						}else{
							intoas( (uchar*)&cEditwk2[0], LockPosi, 4 );
							cEditwk2[4] = 0;
						}
						sprintf(prn_work, "R%02d%02d-%s ",
								Mon_syu,					// モニタ種別（ﾓｼﾞｭｰﾙNo.）
								Mon_cod,					// モニタｺｰﾄﾞ
								cEditwk2					// モニタ情報
								);

						break;

					default:		// その他
						Nml_pri = ON;						// ﾉｰﾏﾙ印字
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
						break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
				}
				break;

			default:		// その他
				Nml_pri = ON;								// ﾉｰﾏﾙ印字
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
				break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
		}
		if( Nml_pri == ON ){
			// ﾉｰﾏﾙ印字
			if( Mon_inf == 0 ){
				sprintf(prn_work, "R%02d%02d   ", Mon_syu, Mon_cod );
			}
			else{
				sprintf(prn_work, "R%02d%02d-%010lu ", Mon_syu, Mon_cod, Mon_inf );
			}
		}
	}
	else {
	/* 文字列データ */
		if(Mon_syu == 2 && Mon_cod == 50){
			sprintf(	prn_work,
						"R%02d%02d   %s",
						Mon_syu,							// ｴﾗｰ種別（ﾓｼﾞｭｰﾙNo.）
						Mon_cod,							// ｴﾗｰｺｰﾄﾞ
						cEditwk1							// 時刻印字ﾃﾞｰﾀ
					);
			PrnStr( prn_work, pri_kind );					// 印字ﾃﾞｰﾀ登録
			
			memset( prn_work,0, sizeof(prn_work) );
			memset( cEditwk1,0, sizeof(cEditwk1) );
			
			memcpy(cEditwk1, &Monlog->MonInfo[0], (size_t)2);
			strcat(cEditwk1, "**");
			memcpy(&cEditwk1[4], &Monlog->MonInfo[2], (size_t)4);
			memcpy(&wk_S1, &Monlog->MonInfo[6], (size_t)2);
			memcpy(&wk_S2, &Monlog->MonInfo[8], (size_t)2);
			sprintf(	prn_work,
						"        %s %ld->%ld",
						cEditwk1,
						(ulong)wk_S1,
						(ulong)wk_S2
			);
			PrnStr( prn_work, pri_kind );					// 印字ﾃﾞｰﾀ登録
			return;
		}
// MH321800(S) D.Inaba ICクレジット対応
		// 電子マネー引去り結果電文受信
		else if(Mon_syu == 2 && Mon_cod == 52){
			sprintf(	prn_work,
						"R%02d%02d   %s",
						Mon_syu,							// ｴﾗｰ種別（ﾓｼﾞｭｰﾙNo.）
						Mon_cod,							// ｴﾗｰｺｰﾄﾞ
						cEditwk1							// 時刻印字ﾃﾞｰﾀ
					);
			PrnStr(prn_work, pri_kind);						// 印字ﾃﾞｰﾀ登録

			// ２行目
			memset(prn_work,0, sizeof(prn_work));
			memset(cEditwk1,0, sizeof(cEditwk1));
			memset(cEditwk2,0, sizeof(cEditwk2));
			memset(cEditwk3,0, sizeof(cEditwk3));

			memcpy(cEditwk1, &Monlog->MonInfo[1], (size_t)4);
			cEditwk1[4] = '\0';
// MH810105 GG119202(S) 決済処理中に障害が発生した時の動作
//			cEditwk1[4] = '\0';
			if (Monlog->MonInfo[5] == EPAY_RESULT_MIRYO_ZANDAKA_END ||
				Monlog->MonInfo[5] == EPAY_RESULT_MIRYO) {
				memcpy(&cEditwk1[4], "(A)", 3);
			}
			else if (Monlog->MonInfo[5] == EPAY_RESULT_PAY_MIRYO) {
				memcpy(&cEditwk1[4], "(D)", 3);
			}
			else {
				memcpy(&cEditwk1[4], "   ", 3);
			}
// MH810105 GG119202(E) 決済処理中に障害が発生した時の動作
// MH810104 GG119202(S) nanaco・iD・QUICPay対応
			wk_S1 = Monlog->MonInfo[0] + EC_USED - 1;
// MH810105(S) MH364301 PiTaPa対応
//			if (wk_S1 == EC_ID_USED || wk_S1 == EC_QUIC_PAY_USED ||
			if (EcBrandPostPayCheck((uchar)wk_S1) ||
// MH810105(E) MH364301 PiTaPa対応
				wk_S1 == EC_UNKNOWN_USED || wk_S1 == EC_ZERO_USED) {
				memcpy(&wk_S1, &Monlog->MonInfo[6], 2);		// 取引額
				if (wk_S1 >= 0xffff) {
				// MAX:FFFFH
					memcpy(cEditwk2, "FFFFH", 5);
				} else {
					intoasl_0sup((uchar*)cEditwk2, (ulong)wk_S1, 5); // cEditwk2にwk_S1をセット
				}
				sprintf(prn_work
// MH810105 GG119202(S) 決済処理中に障害が発生した時の動作
//						, "        %s-%s   %s"
						, "        %s-%s%s"
// MH810105 GG119202(E) 決済処理中に障害が発生した時の動作
						, EcBrandKind_prn[Monlog->MonInfo[0]-1]
						, cEditwk1
						, cEditwk2
				);
			}
// MH810105(S) MH364301 QRコード決済対応
			else if(wk_S1 == EC_QR_USED) {
			wk_S1 = (ushort)(Monlog->MonInfo[7] << 8);				// 取引額
			wk_S1 += (ushort)(Monlog->MonInfo[6]);

			memset(prn_work,0, sizeof(prn_work));
			memset(cEditwk1,0, sizeof(cEditwk1));
			memset(cEditwk2,0, sizeof(cEditwk2));
			memset(cEditwk3,0, sizeof(cEditwk3));

			memcpy(cEditwk1, "CD-", 3);
			strcat(cEditwk1, QrBrandKind_prn[Monlog->MonInfo[8]]);	// 決済種別（2文字）セット

			if (Monlog->MonInfo[5] == EPAY_RESULT_PAY_MIRYO) {
				memcpy(cEditwk2, "(D)", 3);
			} else {
				memcpy(cEditwk2, "   ", 3);
			}

			if (wk_S1 >= 0xffff) {
			// MAX:FFFFH
				memcpy(cEditwk3, "FFFFH", 5);
			} else {
				intoasl_0sup((uchar*)cEditwk3, (ulong)wk_S1, 5); 	// cEditwk3にwk_S1をセット
			}

			sprintf(prn_work
						, "        %s%s%s"
						, cEditwk1
						, cEditwk2
						, cEditwk3
				);
			}
// MH810105(E) MH364301 QRコード決済対応
			else {
// MH810104 GG119202(E) nanaco・iD・QUICPay対応
			wk_S1 = (ushort)(Monlog->MonInfo[7] << 8);
			wk_S1 += (ushort)(Monlog->MonInfo[6]);
			if (wk_S1 >= 0xffff) {
			// MAX:FFFFH
				memcpy(cEditwk2, "FFFFH", 5);
			} else {
				intoasl_0sup((uchar*)cEditwk2, (ulong)wk_S1, 5);
			}
			wk_S2 = (ushort)(Monlog->MonInfo[9] << 8);
			wk_S2 += (ushort)(Monlog->MonInfo[8]);
			if (wk_S2 >= 0xffff) {
			// MAX:FFFFH
				memcpy(cEditwk3, "FFFFH", 5);
			} else {
				intoasl_0sup((uchar*)cEditwk3, (ulong)wk_S2, 5);
			}
			sprintf(prn_work
// MH810105 GG119202(S) 決済処理中に障害が発生した時の動作
//					, "        %s-%s%s%s->%s"
					, "        %s-%s%s->%s"
// MH810105 GG119202(E) 決済処理中に障害が発生した時の動作
					, EcBrandKind_prn[Monlog->MonInfo[0]-1]
					, cEditwk1
// MH810105 GG119202(S) 決済処理中に障害が発生した時の動作
//// MH810103(s) 電子マネー対応 ##5405 WAONの処理未了タイムアウト後にモニタ情報をプリントすると、過去の全てのR0252に(A)が印字されてしまう
////					, (Ec_Settlement_Res.Result == EPAY_RESULT_MIRYO)? "(A)" : "   "
//					, (Monlog->MonInfo[5] == EPAY_RESULT_MIRYO_ZANDAKA_END)? "(A)" : "   "
//
//// MH810103(e) 電子マネー対応 ##5405 WAONの処理未了タイムアウト後にモニタ情報をプリントすると、過去の全てのR0252に(A)が印字されてしまう
// MH810105 GG119202(E) 決済処理中に障害が発生した時の動作
					, cEditwk2
					, cEditwk3
			);
// MH810104 GG119202(S) nanaco・iD・QUICPay対応
			}
// MH810104 GG119202(E) nanaco・iD・QUICPay対応
			PrnStr(prn_work, pri_kind);						// 印字ﾃﾞｰﾀ登録
			return;
		}
		// クレジット決済結果電文受信
	else if(Mon_syu == 2 && Mon_cod == 53){
			sprintf(	prn_work,
						"R%02d%02d   %s",
						Mon_syu,							// ｴﾗｰ種別（ﾓｼﾞｭｰﾙNo.）
						Mon_cod,							// ｴﾗｰｺｰﾄﾞ
						cEditwk1							// 時刻印字ﾃﾞｰﾀ
					);
			PrnStr(prn_work, pri_kind);						// 印字ﾃﾞｰﾀ登録

			// ２行目
			memset(prn_work,0, sizeof(prn_work));
			memset(cEditwk1,0, sizeof(cEditwk1));
			memset(cEditwk2,0, sizeof(cEditwk2));

			memcpy(cEditwk1, &Monlog->MonInfo[1], (size_t)4);	// カード番号
			cEditwk1[4] = '\0';
			wk_S1 = (ushort)(Monlog->MonInfo[7] << 8);			// 取引額
			wk_S1 += (ushort)(Monlog->MonInfo[6]);
			if (wk_S1 >= 0xffff) {
			// MAX:FFFFH
				memcpy(cEditwk2, "FFFFH", 5);
			} else {
				intoasl_0sup((uchar*)cEditwk2, (ulong)wk_S1, 5); // cEditwk2にwk_S1をセット
			}
			sprintf(prn_work
					, "        %s-%s%s%s"
					, EcBrandKind_prn[Monlog->MonInfo[0]-1]
					, cEditwk1
					, "   "
					, cEditwk2
			);
			PrnStr(prn_work, pri_kind);						// 印字ﾃﾞｰﾀ登録
			return;
		}
// MH321800(E) D.Inaba ICクレジット対応
		sprintf(prn_work, "R%02d%02d-%-10s ",
				Mon_syu,							// モニタ種別（ﾓｼﾞｭｰﾙNo.）
				Mon_cod,							// モニタｺｰﾄﾞ
				Monlog->MonInfo						// モニタ情報
				);
	}
	strcat(prn_work, cEditwk1);
	
	PrnStr( prn_work, pri_kind );					// 印字ﾃﾞｰﾀ登録
}

/*[]-------------------------------------------------------------------------------[]*/
/*|		一行分の印字文字列設定(印字)３												|*/
/*[]-------------------------------------------------------------------------------[]*/
/*| MODULE NAME		:	Str_Set3( *cFirst, *cSecond, *cThird , pri_kind )			|*/
/*|																					|*/
/*| PARAMETER		:	char *cFirst	= 文字列1ﾃﾞｰﾀﾎﾟｲﾝﾀｰ							|*/
/*|						char *cSecond	= 文字列2ﾃﾞｰﾀﾎﾟｲﾝﾀｰ							|*/
/*|						char *cThird	= 文字列3ﾃﾞｰﾀﾎﾟｲﾝﾀｰ							|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ							|*/
/*|							R_PRI  : ﾚｼｰﾄ											|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ											|*/
/*|																					|*/
/*| RETURN VALUE	:	void														|*/
/*|																					|*/
/*[]-------------------------------------------------------------------------------[]*/
/*|	用紙幅58mm 印字領域54mm 両端の空白各2mm											|*/
/*|	対応フォント	 																|*/
/*|	フォントＡ FONTA_WIDE 															|*/
/*|	漢字       KANJI_WIDE 															|*/
/*|	SJIS  Shift JISとする。															|*/
/*|			 																		|*/
/*[]-------------------------------------------------------------------------------[]*/
/*|	文字列1は左寄せとする															|*/
/*|	文字列2の開始は,15.0mmとする。													|*/
/*|	文字列3の開始は,30.0mmとする。													|*/
/*|	但し、本処理内にて必ず文字列3の後に半角２文字分の余白を挿入する事とする			|*/
/*|					 																|*/
/*|	（備考）cTmp1、cTmp2を編集ｴﾘｱとして使用する										|*/
/*|																					|*/
/*[]-------------------------------------------------------------------------------[]*/
/*|	Author	:	M.Suzuki															|*/
/*|	Date	:	2006-02-22															|*/
/*|	Update	:																		|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.------------[]*/
#define		ICHI3_1		150							// 文字列２の開始位置 15.0mm
#define		ICHI3_2		300							// 文字列３の開始位置 30.0mm
void	Str_Set3( char *cFirst, char *cSecond, char *cThird, uchar pri_kind )
{
	ushort	w_pnt;									// 文字列ﾚﾝｸﾞｽ（ﾎﾟｲﾝﾄ）
	ushort	c_len, s_len, len;						// 文字列ﾚﾝｸﾞｽ（文字数）

	PCMD_LEFT( pri_kind );							// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );			// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );			// 漢字（通常）指定

	memset( cTmp1,0,sizeof(cTmp1) );				// cTmp1ｸﾘｱ（編集した１行分の文字列をｾｯﾄするｴﾘｱとして使用）
	memset( cTmp2,0,sizeof(cTmp2) );				// cTmp2ｸﾘｱ（文字列編集ｴﾘｱとして使用）

	len = 0;

	/* 文字列１セット */
	w_pnt = Moj_Point( cFirst );					// 文字列ﾚﾝｸﾞｽ（ﾎﾟｲﾝﾄ）
	c_len = (ushort)strlen( cFirst );				// 文字列ﾚﾝｸﾞｽ（文字数）
	memcpy( &cTmp1[len], cFirst, (size_t)c_len );	// 文字列セット
	len = len + c_len;

	// スペースセット＆スペース文字数Get
	memset( cTmp2,0,sizeof(cTmp2) );
	memcpy( cTmp2, cTmp1, (size_t)len );
	w_pnt = Moj_Point( cTmp2 );
	if( w_pnt < ICHI3_1 ) {
		s_len = Spc_Add( &cTmp1[len], (ushort)(ICHI3_1-w_pnt) );
		len = len + s_len;
	}
	
	/* 文字列２セット */
	w_pnt = Moj_Point( cSecond );					// 文字列ﾚﾝｸﾞｽ（ﾎﾟｲﾝﾄ）
	c_len = (ushort)strlen( cSecond );				// 文字列ﾚﾝｸﾞｽ（文字数）
	memcpy( &cTmp1[len], cSecond, (size_t)c_len );	// 文字列セット
	len = len + c_len;

	// スペースセット＆スペース文字数Get
	memset( cTmp2,0,sizeof(cTmp2) );
	memcpy( cTmp2, cTmp1, (size_t)len );
	w_pnt = Moj_Point( cTmp2 );
	if( w_pnt < ICHI3_2 ) {
		s_len = Spc_Add( &cTmp1[len], (ushort)(ICHI3_2-w_pnt) );
		len = len + s_len;
	}

	/* 文字列３セット */
	w_pnt = Moj_Point( cThird );					// 文字列ﾚﾝｸﾞｽ（ﾎﾟｲﾝﾄ）
	c_len = (ushort)strlen( cThird );				// 文字列ﾚﾝｸﾞｽ（文字数）
	memcpy( &cTmp1[len], cThird, (size_t)c_len );	// 文字列セット
	len = len + c_len;
	
	cTmp1[len] = LF;								// 改行ﾃﾞｰﾀｾｯﾄ
	len++;

	PrnCmdLen( (uchar *)cTmp1, len, pri_kind );	// 編集印字ﾃﾞｰﾀ登録

	if( pri_kind == R_PRI ){
		inc_dct( MOV_PRNT_CNT, 1 );					// 「ﾚｼｰﾄﾌﾟﾘﾝﾀ印字行数」	動作ｶｳﾝﾄ＋１
		GyouCnt_r++;								// 送信済み印字ﾃﾞｰﾀ行数（ﾚｼｰﾄ）＋１
	}
	else{
		inc_dct( MOV_JPNT_CNT, 1 );					// 「ｼﾞｬｰﾅﾙﾌﾟﾘﾝﾀ印字行数」	動作ｶｳﾝﾄ＋１
		GyouCnt_j++;								// 送信済み印字ﾃﾞｰﾀ行数（ｼﾞｬｰﾅﾙ）＋１
	}
}
/*[]---------------------------------------------------------------------------[]*/
/*|		不正券ログ印字ﾃﾞｰﾀ編集処理												|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	NgLog_edit( *msg_data, pri_kind, *p_proc_data)			|*/
/*|																				|*/
/*|	PARAMETER		:	T_FrmLogPriReq2	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|																				|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|	RETURN VALUE	:	void													|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	M.Suzuki														|*/
/*|	Date	:	2006-02-20														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.--------[]*/
void	NgLog_edit( T_FrmLogPriReq2 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	ushort	Sdate;				// 検索開始日
	ushort	syuukei_date;		// 集計日ﾃﾞｰﾀ

	char	c_Card_type[16+1];	// カード種別
	char	c_Card_No[3+20+1];	// カード番号
	char	c_Log_Date[14+1];	// 検出日時
	uchar	w_Card_No[10];		// カード番号(BCD)

	/* 編集開始（初回編集）の場合 */
	if( p_proc_data->Log_Start == OFF ){
		Prn_edit_Title(	"使用カード情報", FONT_K_YOKOBAI, pri_kind ); 	// ＜表題＞編集
		Prn_edit_space( pri_kind );								// １行空白

		KikaiNoSet(	prn_work, msg_data->Kikai_no );				// 機械NO.編集
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録
		/*------	＜印字日時＞編集	------*/
		Prn_edit_NowDate( prn_work );							// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字日時　印字ﾃﾞｰﾀ登録

		p_proc_data->Log_DataPt = 0;
		// ﾛｸﾞ情報が正常な場合
			switch( msg_data->BType ){	// 印字要求内容ﾁｪｯｸ

				case	0:	// 全て
					sprintf(														// cEditwk1←検索方法印字ﾃﾞｰﾀ
								cEditwk1,
								"全て(%d件)",
								msg_data->LogCount
							);
					break;

				case	1:	// 日付指定				
					if( OK == DateChk( (date_time_rec *)&msg_data->TSttTime ) ){	//	指定日が正常な場合
						msg_data->TEndTime.Year = msg_data->TSttTime.Year;
						msg_data->TEndTime.Mon	= msg_data->TSttTime.Mon;
						msg_data->TEndTime.Day	= msg_data->TSttTime.Day;
						Sdate = dnrmlzm(											// 検索開始日ﾃﾞｰﾀ取得
											(short)msg_data->TSttTime.Year,
											(short)msg_data->TSttTime.Mon,
											(short)msg_data->TSttTime.Day
										);
						p_proc_data->Log_Sdate = Sdate;								// 指定日ﾃﾞｰﾀｾｰﾌﾞ
						sprintf(									// cEditwk1←検索方法印字ﾃﾞｰﾀ
									cEditwk1,
									"%04d/%d/%d分",
									msg_data->TSttTime.Year,
									msg_data->TSttTime.Mon,
									msg_data->TSttTime.Day
								);
					}
					else{															// 指定日が異常な場合
#ifdef DETAIL_INFO_PRINT
						memset( cErrlog,0,sizeof(cErrlog) );
						sprintf( cErrlog,"＜不正券情報印字要求＞ 指定日異常" );
#endif
						Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
						p_proc_data->Prn_no_wk[1] = ON;				// 不正券編集終了
					}
					break;

				default:	// その他（検索方法指定ｴﾗｰ）
#ifdef DETAIL_INFO_PRINT
					memset( cErrlog,0,sizeof(cErrlog) );
					sprintf( cErrlog,"＜不正券情報印字要求＞ 検索方法指定(=%d)異常", msg_data->BType );
#endif
					Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
					p_proc_data->Prn_no_wk[1] = ON;				// 不正券編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
					break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			}

			if( p_proc_data->Prn_no_wk[1] != ON ){				// 検索方法の指定が正常な場合			
				/*------	＜検索方法＞編集	------*/
				PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
				PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録

				/*------	編集制御ﾜｰｸｾｯﾄ	------*/
				p_proc_data->Log_Start	= ON;						// ﾛｸﾞﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ
				p_proc_data->Log_Count	= Ope_Log_TotalCountGet(eLOG_NGLOG);	
				Prn_edit_space( pri_kind );							// １行空白		

				PrnStr( UseCard_Prn[0], pri_kind );					// 項目名称印字ﾃﾞｰﾀ登録

				if( p_proc_data->Log_Count == 0 ){					// 格納件数が０の場合				
					PCMD_LEFT( pri_kind );							// 印字位置を左寄せに設定
					sprintf( cEditwk2," %s","データーなし");		// cEditwk1←”ﾃﾞｰﾀ-なし”ﾃﾞｰﾀ編集
					PrnStr( cEditwk2, pri_kind );					// 編集済みの印字ﾃﾞｰﾀ登録
					Prn_edit_space( pri_kind );						// １行空白		
					PCMD_CENTER( pri_kind );						// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
					PrnStr( UseCard_Prn[1], pri_kind );				// 項目名称印字ﾃﾞｰﾀ登録
					p_proc_data->Prn_no_wk[0] = ON;					// 正常ﾃﾞｰﾀ編集終了
				}
			}
	}	// 初回編集処理end

	/*２回目以降の編集処理 */
	else{
		for(;;){
			switch( msg_data->BType ){	// 検索方法？

				case	0:	// 全て
					if( 0 == Ope_Log_1DataGet(eLOG_NGLOG, p_proc_data->Log_DataPt, &nglog_data)){
						p_proc_data->Log_Count = 0;
						p_proc_data->Prn_no_wk[1] = ON;				// 不正券ﾃﾞｰﾀ編集終了
					}
					break;

				case	1:	// 日付指定
					for( ; p_proc_data->Log_Count > 0 ; ){	// 日付が一致するﾛｸﾞ情報を格納件数分検索する
						if( 0 != Ope_Log_1DataGet(eLOG_NGLOG, p_proc_data->Log_DataPt, &nglog_data)){
							syuukei_date = dnrmlzm(				// 対象ﾛｸﾞ情報の集計日取得
													(short)nglog_data.NowTime.Year,
													(short)nglog_data.NowTime.Mon,
													(short)nglog_data.NowTime.Day);
							if(syuukei_date == p_proc_data->Log_Sdate){
								break;
							}
							else{
								p_proc_data->Log_Count--;
								p_proc_data->Log_DataPt++;
							}
						}
						else{											// 取得できるログがない
							p_proc_data->Prn_no_wk[1] = ON;				// 不正券ﾃﾞｰﾀ編集終了
							p_proc_data->Log_Count = 0;
						}
					}
					break;
			}
			// 格納件数分の検索＆編集終了？
			if( p_proc_data->Log_Count > 0 ){	// 格納件数分の検索＆編集を終了していない場合	
				Prn_edit_Date2( c_Log_Date, &nglog_data.NowTime );	// 検出日時編集
				if( p_proc_data->Prn_no_wk[0] == OFF ){																// 正常ﾃﾞｰﾀ未編集項目あり
					if( nglog_data.Card_type == OK_CARD_AMANO){			// ﾃﾞｰﾀがアマノ係員ｶｰﾄﾞ正常使用の場合
						strcpy(  c_Card_type, "係員カード");
						sprintf( c_Card_No, "No.%02ld", nglog_data.Card_No.card_s );// 印字ﾃﾞｰﾀ作成
						Str_Set3( c_Card_type, c_Card_No, c_Log_Date, R_PRI );										// 印字登録
						p_proc_data->Prn_no_wk[2]++;																// 正常ﾃﾞｰﾀ印字項目数ｶｳﾝﾄｱｯﾌﾟ
					}
				}else{
					/*------	印字ﾃﾞｰﾀ編集	------*/
					switch( nglog_data.Card_type ){						// カード種別・番号編集
						case	NG_CARD_PASS:		// 定期券
							strcpy(  c_Card_type, "定期券");
							sprintf( c_Card_No, "No.%05ld", nglog_data.Card_No.card_s );
							break;
						case	NG_CARD_TICKET:		// 駐車券
							strcpy(  c_Card_type, "駐車券");
							sprintf( c_Card_No, "No.%05ld", nglog_data.Card_No.card_s );
							break;
						case	NG_CARD_CREDIT:		// クレジットカード
							strcpy(  c_Card_type, "クレジットカード");
							strcpy(  c_Card_No, "");
							break;
						case	NG_CARD_BUSINESS:	// ビジネスカード
							strcpy(  c_Card_type, "ビジネスカード");
							strcpy(  c_Card_No, "");
							break;
						case	OK_CARD_AMANO:		// 正常アマノ係員ｶｰﾄﾞ
								break;
						case	NG_CARD_AMANO:		// 不正アマノ係員ｶｰﾄﾞ
							strcpy(  c_Card_type, "係員カード");
							sprintf( c_Card_No, "No.%02ld", nglog_data.Card_No.card_s );
							break;
						default:					// 未定義カード種別
							sprintf( c_Card_type, "未定義(%ld)", nglog_data.Card_type );
							break;
					}
					if( nglog_data.Card_type != OK_CARD_AMANO){
						Str_Set3( c_Card_type, c_Card_No, c_Log_Date, R_PRI );	// １行目印字

						if( (nglog_data.Card_type == NG_CARD_CREDIT) ||			// クレジットカードまたは
							(nglog_data.Card_type == NG_CARD_BUSINESS) ){		// ビジネスカードの時
								memset( c_Card_No, 0, sizeof(c_Card_No));
								strcpy( c_Card_No, "No.");
								memcpy( w_Card_No, nglog_data.Card_No.card_c, 10 );
								BCDtoASCII( w_Card_No, (uchar *)&c_Card_No[3], 10 );
								Str_Set3( "", c_Card_No, "", R_PRI );														// ２行目に印字
						}
						p_proc_data->Prn_no_wk[3]++;					// 不正ﾃﾞｰﾀ印字項目数ｶｳﾝﾄｱｯﾌﾟ
					}
				}
		
				p_proc_data->Log_Count--;					// 格納件数ﾃﾞｸﾘﾒﾝﾄ
				p_proc_data->Log_DataPt++;
			}
			if( p_proc_data->Log_Count == 0 && p_proc_data->Prn_no_wk[0] == ON ){				// 不正ﾃﾞｰﾀ用全ﾛｸﾞ情報編集終了？
				// 格納件数分の編集が終了した場合
				p_proc_data->Prn_no_wk[1] = ON;													// 不正ﾃﾞｰﾀ編集終了
				if( !p_proc_data->Prn_no_wk[3] ){												// 不正ﾃﾞｰﾀ項目がなかった場合
					PCMD_LEFT( pri_kind );														// 印字位置を左寄せに設定
					sprintf( cEditwk2," %s","データーなし");									// cEditwk1←”ﾃﾞｰﾀ-なし”ﾃﾞｰﾀ編集
					PrnStr( cEditwk2, pri_kind );												// 編集済みの印字ﾃﾞｰﾀ登録
				}
				break;
			}else if( p_proc_data->Log_Count == 0 && p_proc_data->Prn_no_wk[0] == OFF ){		// 正常ﾃﾞｰﾀ用全ﾛｸﾞ情報編集終了？
				p_proc_data->Log_Count = Ope_Log_TotalCountGet(eLOG_NGLOG);						// 不正ﾃﾞｰﾀ検索用のｶｳﾝﾀをｾｯﾄ
				p_proc_data->Log_DataPt = 0;

				p_proc_data->Prn_no_wk[0] = ON;													// 正常ﾃﾞｰﾀ編集終了
				if( !p_proc_data->Prn_no_wk[2] ){												// 正常ﾃﾞｰﾀ項目がなかった場合
					PCMD_LEFT( pri_kind );														// 印字位置を左寄せに設定
					sprintf( cEditwk2," %s","データーなし");									// cEditwk1←”ﾃﾞｰﾀ-なし”ﾃﾞｰﾀ編集
					PrnStr( cEditwk2, pri_kind );												// 編集済みの印字ﾃﾞｰﾀ登録
				}	
				PCMD_CENTER( pri_kind );														// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
				Prn_edit_space( pri_kind );														// １行空白		
				PrnStr( UseCard_Prn[1], pri_kind );												// 項目名称印字ﾃﾞｰﾀ登録
				break;
			}else if( (p_proc_data->Log_Count % 20) == 0){
				break;
			}
		}
	}	// ２回目以降の編集処理end
	/*------	編集終了ﾁｪｯｸ	------*/
	if( p_proc_data->Prn_no_wk[1] == ON ){													// 不正ﾃﾞｰﾀ編集が終了している場合
		p_proc_data->Final = ON;						// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
}

short	IoLog_edit_Get_PayLogDate(ST_OIBAN2 oiban, Receipt_data	*data_Buf, date_time_rec *time, ushort room)
{
// MH810100(S) K.Onodera  2019/12/26 車番チケットレス(QR確定・取消データ対応)
//	ushort	LogTotalCount;			// 精算ログﾃﾞｰﾀ件数（SRAM+FlashROMの総件数）
//	ushort	cnt;
//	ulong	paytime, outtime;
//
//	ST_OIBAN	w_oiban;
//	
//	w_oiban.w = oiban.w;
//	w_oiban.i = oiban.i;
//
//	LogTotalCount = Ope_Log_TotalCountGet(eLOG_PAYMENT);
//	for(cnt=0; cnt < LogTotalCount; cnt++) {
//		if( 0 == Ope_Log_1DataGet(eLOG_PAYMENT,cnt, data_Buf)){
//			break;
//		}
//		if(data_Buf->chuusi == 0){
//			if(CountSel( &w_oiban ) == CountSel( &data_Buf->Oiban ) && room == data_Buf->WPlace) {
//				paytime = Nrm_YMDHM(time);
//				outtime = Nrm_YMDHM(&data_Buf->TOutTime);
//				if(paytime == outtime){
//					return 0;
//				}
//			}
//		}
//	}
// MH810100(E) K.Onodera  2019/12/26 車番チケットレス(QR確定・取消データ対応)
	return(-1);
}
short	IoLog_edit_Get_CanLogDate(ST_OIBAN2 oiban, date_time_rec *time, ushort room, Receipt_data *Paydat)
{
// MH810100(S) K.Onodera  2019/12/26 車番チケットレス(QR確定・取消データ対応)
//	ushort	cnt,cnt_total;
//	ulong	paytime, outtime;
//		
//	ST_OIBAN	w_oiban;
//	
//	w_oiban.w = oiban.w;
//	w_oiban.i = oiban.i;
//
//	cnt_total = Ope_Log_TotalCountGet(eLOG_PAYMENT);
//	for(cnt=0; cnt < cnt_total; cnt++) {
//		if( 0 == Ope_Log_1DataGet(eLOG_PAYMENT,cnt, Paydat)){
//			break;
//		}
//		if(Paydat->chuusi == 1){
//			if(CountSel( &w_oiban ) == CountSel( &Paydat->Oiban ) && room == Paydat->WPlace) {
//				paytime = Nrm_YMDHM(time);
//				outtime = Nrm_YMDHM(&Paydat->TOutTime);
//				if(paytime == outtime){
//					return 0;
//				}
//			}
//		}
//	}
// MH810100(E) K.Onodera  2019/12/26 車番チケットレス(QR確定・取消データ対応)
	return(-1);		// 対象の精算中止ログデータがない
}
short	IoLog_edit_Get_KyoufuLogDate( ST_OIBAN2 oiban, ushort knd, date_time_rec *time, ushort room, flp_log *fusei_dat)
{
// MH810100(S) K.Onodera  2019/12/26 車番チケットレス(QR確定・取消データ対応)
//	ushort	cnt,cnt_total;
//	ulong	paytime, outtime;
//		
//	ST_OIBAN	w_oiban;
//	
//	w_oiban.w = oiban.w;
//	w_oiban.i = oiban.i;
//
//	cnt_total = Ope_Log_TotalCountGet(eLOG_ABNORMAL);
//	for(cnt=0; cnt < cnt_total; cnt++) {
//		if( 0 == Ope_Log_1DataGet(eLOG_ABNORMAL,cnt, fusei_dat)){
//			break;
//		}
//		if( (CountSel( &w_oiban ) == CountSel( &fusei_dat->count )) && (room == fusei_dat->WPlace) ){
//			paytime = Nrm_YMDHM(time);
//			outtime = Nrm_YMDHM(&fusei_dat->Date_Time);
//			if(paytime == outtime){
//				return 0;
//			}
//		}
//	}
// MH810100(E) K.Onodera  2019/12/26 車番チケットレス(QR確定・取消データ対応)
	return(-1);		// 対象の強制出庫ログデータがない
}
ushort NextIOLog(ushort offset, ushort no, date_time_rec* sdate, date_time_rec* edate)
{
// MH810100(S) K.Onodera  2019/12/26 車番チケットレス(QR確定・取消データ対応)
//	ulong stdat = 0, eddat = 0;
//	if(sdate)
//	{
//		stdat = enc_nmlz_mdhm(sdate->Year, sdate->Mon, sdate->Day, sdate->Hour, sdate->Min);
//	}
//	if(edate)
//	{
//		eddat = enc_nmlz_mdhm(edate->Year, edate->Mon, edate->Day, edate->Hour, edate->Min);
//	}
//	return	UsMnt_SearchIOLog(offset, no, stdat, eddat, &Io_log_wk);
	return 0;
// MH810100(E) K.Onodera  2019/12/26 車番チケットレス(QR確定・取消データ対応)
}
/*[]---------------------------------------------------------------------------[]*/
/*|		入出庫ログ印字ﾃﾞｰﾀ編集処理												|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	IoLog_edit( *msg_data, pri_kind, *p_proc_data)			|*/
/*|																				|*/
/*|	PARAMETER		:	T_FrmLogPriReq2	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|																				|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|	RETURN VALUE	:	void													|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	M.Suzuki														|*/
/*|	Date	:	2006-03-03														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.--------[]*/
void	IoLog_edit( T_FrmLogPriReq2 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
// MH810100(S) K.Onodera  2019/12/26 車番チケットレス(QR確定・取消データ対応)
//	uchar	edit_end = OFF;				// 編集終了ﾌﾗｸﾞ
//	uchar	date_chk1 = OK;				// 検索開始日ﾁｪｯｸ結果
//	uchar	date_chk2 = OK;				// 検索終了日ﾁｪｯｸ結果
//	ushort	i;							// 事象テーブル参照用変数
//	ushort	Sdate, Stime;				// 検索開始日、時刻
//	ushort	Edate, Etime;				// 検索終了日、時刻
//	char	c_Log_Event[48];			// 入出庫イベント
//	char	c_Log_Date[16];				// 発生日時
//	ushort	w_Log_DataPt;				// 参照するテーブルの位置
//	short	w_ret1;						// 入出庫情報取得結果
//	uchar	w_ret2;						// 入出庫情報印字結果
//	ushort	no = msg_data->Room_no;		// 車室番号
//	ushort	NewOldDate[10];				// ログ件数取得用
//	union ioLogNumberInfo num;			// ログ管理番号取得用構造体
//	date_time_rec	Log_Data_wk;
//	uchar	Flap_Sub_FlgB;				// バックアップ用変数
//	memset( &Log_Data_wk, 0, sizeof( Log_Data_wk ));
//
//	/* 編集開始（初回編集）の場合 */
//	if( p_proc_data->Log_Start == OFF ){
//		Prn_edit_Title(	"入出庫情報", FONT_K_YOKOBAI, pri_kind ); 	// ＜表題＞編集
//		Prn_edit_space( pri_kind );									// １行空白
//
//		KikaiNoSet(	prn_work, msg_data->Kikai_no );					// 機械NO.編集
//		PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
//		PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
//		PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
//		PrnStr( prn_work, pri_kind );								// 印字ﾃﾞｰﾀ登録
//
//		p_proc_data->Log_DataPt = 0;
//			switch( msg_data->BType ){	// 印字要求内容ﾁｪｯｸ
//
//				case	0:	// 全て
//					LogPtrGet2(no, &num.n);
//					if(num.n){									// ﾛｸﾞﾃﾞｰﾀがある場合
//						// 最古＆最新新ﾛｸﾃﾞｰﾀの日付取得
//						if(0 == Ope_Log_1DataGet(eLOG_IOLOG, (ushort)num.log.sdat, &Io_log_wk)){
//							p_proc_data->Log_Count = 0;
//							edit_end = ON;	// 編集終了
//							break;
//						}
//						msg_data->TSttTime.Year	= Io_log_wk.iolog_data[0].NowTime.Year;				// 開始（年）←最古ログ（年）
//						msg_data->TSttTime.Mon	= Io_log_wk.iolog_data[0].NowTime.Mon;				// 開始（月）←最古ログ（月）
//						msg_data->TSttTime.Day	= Io_log_wk.iolog_data[0].NowTime.Day;				// 開始（日）←最古ログ（日）
//						msg_data->TSttTime.Hour	= Io_log_wk.iolog_data[0].NowTime.Hour;				// 開始（時）←最古ログ（時）
//						msg_data->TSttTime.Min	= Io_log_wk.iolog_data[0].NowTime.Min;				// 開始（分）←最古ログ（分）
//						if(0 == Ope_Log_1DataGet(eLOG_IOLOG, (ushort)num.log.edat, &Io_log_wk)){
//							p_proc_data->Log_Count = 0;
//							edit_end = ON;	// 編集終了
//							break;
//						}
//						msg_data->TEndTime.Year	= Io_log_wk.iolog_data[num.log.evnt].NowTime.Year;	// 終了（年）←最新ログ（年）
//						msg_data->TEndTime.Mon	= Io_log_wk.iolog_data[num.log.evnt].NowTime.Mon;		// 終了（月）←最新ログ（月）
//						msg_data->TEndTime.Day	= Io_log_wk.iolog_data[num.log.evnt].NowTime.Day;		// 終了（日）←最新ログ（日）
//						msg_data->TEndTime.Hour	= Io_log_wk.iolog_data[num.log.evnt].NowTime.Hour;	// 終了（時）←最新ログ（時）
//						msg_data->TEndTime.Min	= Io_log_wk.iolog_data[num.log.evnt].NowTime.Min;		// 終了（分）←最新ログ（分）
//					}
//					break;
//
//				case	1:	// 日付指定				
//					if( OK == DateChk( (date_time_rec *)&msg_data->TSttTime ) ){	//	指定日時が正常（開始<=終了）
//						msg_data->TEndTime.Year	= msg_data->TSttTime.Year;
//						msg_data->TEndTime.Mon	= msg_data->TSttTime.Mon;
//						msg_data->TEndTime.Day	= msg_data->TSttTime.Day;
//						msg_data->TEndTime.Hour	= msg_data->TSttTime.Hour;
//						msg_data->TEndTime.Min	= msg_data->TSttTime.Min;
//					}
//					else{															// 指定日時が異常な
//#ifdef DETAIL_INFO_PRINT
//						memset( cErrlog,0,sizeof(cErrlog) );
//						sprintf( cErrlog,"＜入出庫ロ情報印字要求＞ 指定日異常" );
//#endif
//						Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
//						edit_end = ON;								// 編集終了
//					}
//					break;
//
//				case	2:	// 期間指定
//					if( NG == DateChk( (date_time_rec *)&msg_data->TSttTime ) ){	//	検索開始日ﾁｪｯｸ異常
//#ifdef DETAIL_INFO_PRINT
//						memset( cErrlog,0,sizeof(cErrlog) );
//						sprintf( cErrlog,"＜入出庫ロ情報印字要求＞ 期間指定（開始日）異常" );
//#endif
//						Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
//						date_chk1 = NG;
//					}
//					if( NG == DateChk( (date_time_rec *)&msg_data->TEndTime ) ){	//	検索終了日ﾁｪｯｸ異常
//#ifdef DETAIL_INFO_PRINT
//						memset( cErrlog,0,sizeof(cErrlog) );
//						sprintf( cErrlog,"＜入出庫ロ情報印字要求＞ 期間指定（終了日）異常" );
//#endif
//						Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
//						date_chk2 = NG;
//					}
//					if( (date_chk1 == OK) && (date_chk2 == OK) ){	// 検索期間（開始日／終了日）が正常な場合					
//					}
//					else{	// 検索期間（開始日／終了日）が異常な場合
//						edit_end = ON;								// 編集終了
//					}
//					break;
//
//				default:	// その他（検索方法指定ｴﾗｰ）
//#ifdef DETAIL_INFO_PRINT
//					memset( cErrlog,0,sizeof(cErrlog) );
//					sprintf( cErrlog,"＜入出庫情報印字要求＞ 検索方法指定(=%d)異常", msg_data->BType );
//#endif
//					Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
//					edit_end = ON;									// 編集終了
//// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
//					break;
//// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
//			}
//
//			if( edit_end != ON ){	// 検索方法の指定が正常な場合			
//				Sdate = dnrmlzm((short)msg_data->TSttTime.Year,						// 検索開始日ﾃﾞｰﾀ取得
//								(short)msg_data->TSttTime.Mon,
//								(short)msg_data->TSttTime.Day);
//				Edate = dnrmlzm((short)msg_data->TEndTime.Year,						// 検索終了日ﾃﾞｰﾀ取得
//								(short)msg_data->TEndTime.Mon,
//								(short)msg_data->TEndTime.Day);
//				Stime = (msg_data->TSttTime.Hour * 60) + msg_data->TSttTime.Min;	// 検索開始時刻ﾃﾞｰﾀ取得
//				Etime = (msg_data->TEndTime.Hour * 60) + msg_data->TEndTime.Min;	// 検索開始時刻ﾃﾞｰﾀ取得
//
//															// 開始日時／終了日時ﾁｪｯｸ
//				if( (Sdate < Edate) ||							// 開始日 < 終了日 または
//					((Sdate == Edate) && (Stime <= Etime)) ){	// 開始日 == 終了日で、開始時刻 <= 終了時刻なら（ＯＫ）
//					p_proc_data->Log_Sdate = Sdate;			// 検索開始日ﾃﾞｰﾀｾｰﾌﾞ
//					p_proc_data->Log_Edate = Edate;			// 検索終了日ﾃﾞｰﾀｾｰﾌﾞ
//					p_proc_data->Log_Stime = Stime;			// 検索開始時刻ﾃﾞｰﾀｾｰﾌﾞ
//					p_proc_data->Log_Etime = Etime;			// 検索開始時刻ﾃﾞｰﾀｾｰﾌﾞ
//
//					sprintf(								// cEditwk1←検索方法印字ﾃﾞｰﾀ
//								cEditwk1,
//								"開始日時       %04d/%02d/%02d %02d:%02d\n終了日時       %04d/%02d/%02d %02d:%02d",
//								msg_data->TSttTime.Year, msg_data->TSttTime.Mon, msg_data->TSttTime.Day,
//								msg_data->TSttTime.Hour, msg_data->TSttTime.Min,
//								msg_data->TEndTime.Year, msg_data->TEndTime.Mon, msg_data->TEndTime.Day,
//								msg_data->TEndTime.Hour, msg_data->TEndTime.Min
//							);
//					sprintf(cEditwk2, "車室番号%d", no);	// cEditwk2←車室番号ﾃﾞｰﾀ
//				}
//				else{											// 検索開始日時 >検索終了日時（ＮＧ）
//#ifdef DETAIL_INFO_PRINT
//					memset( cErrlog,0,sizeof(cErrlog) );
//					sprintf( cErrlog,"＜不正券情報印字要求＞ 期間指定（開始日＞終了日）異常" );
//#endif
//					Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
//					edit_end = ON;							// 編集終了
//				}
//				NewOldDate[0] = msg_data->TSttTime.Year;												// 検索開始日時情報(年)
//				NewOldDate[1] = msg_data->TSttTime.Mon;													// 検索開始日時情報(月)
//				NewOldDate[2] = msg_data->TSttTime.Day;													// 検索開始日時情報(日)
//				NewOldDate[3] = msg_data->TSttTime.Hour;												// 検索開始日時情報(時)
//				NewOldDate[4] = msg_data->TSttTime.Min;													// 検索開始日時情報(分)
//				NewOldDate[5] = msg_data->TEndTime.Year;												// 検索終了日時情報(年)
//				NewOldDate[6] = msg_data->TEndTime.Mon;													// 検索終了日時情報(月)
//				NewOldDate[7] = msg_data->TEndTime.Day;													// 検索終了日時情報(日)
//				NewOldDate[8] = msg_data->TEndTime.Hour;												// 検索終了日時情報(時)
//				NewOldDate[9] = msg_data->TEndTime.Min;													// 検索終了日時情報(分)
//
//				/*------	＜検索方法＞編集	------*/
//				PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
//				PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録
//				Prn_edit_space( pri_kind );							// １行空白
//				PrnStr( cEditwk2, pri_kind );						// 印字ﾃﾞｰﾀ登録
//
//				/*------	編集制御ﾜｰｸｾｯﾄ	------*/
//				p_proc_data->Log_Start	= ON;						// ﾛｸﾞﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ
//				p_proc_data->Log_Count	= UsMnt_IoLog_GetLogCnt(no, NewOldDate);						// ﾛｸ件数ｾｯﾄ
//				p_proc_data->Log_DataPt	= IO_LOG_REC.iolog_wtp;											// 最古ﾛｸﾞ情報の配列番号ｾｯﾄ
//				p_proc_data->Prn_no_wk[0] = 0;															/* 事象管理配列参照用 */
//
//				if( p_proc_data->Log_Count == 0 ){	// 格納件数が０の場合
//					edit_end = ON;									// 編集終了
//				}
//			}
//	}	// 初回編集処理end
//
//	/*２回目以降の編集処理（ログ１件毎に編集→印字） */
//	else{
//		if(p_proc_data->Log_Edit == OFF)									// 現在事象印字プロセス
//		{
//			for(;p_proc_data->Prn_no_wk[0] <= IO_EVE_CNT;)					// 事象件数は最大20件なので一気に印字(ループ条件は念のため)
//			{
//				if(!p_proc_data->Prn_no_wk[0])
//				{
//					switch( msg_data->BType ){	// 検索方法？
//						case	0:	// 全て
//							p_proc_data->Log_DataPt	= NextIOLog(p_proc_data->Log_DataPt, no, 0, 0);
//							break;
//						case	1:	// 日付指定（開始／終了の年月日・時分が同じ場合）
//							p_proc_data->Log_DataPt	= NextIOLog(p_proc_data->Log_DataPt, no, &msg_data->TSttTime, 0);
//							break;
//						case	2:	// 期間指定
//							p_proc_data->Log_DataPt	= NextIOLog(p_proc_data->Log_DataPt, no, &msg_data->TSttTime, &msg_data->TEndTime);
//							break;
//					}
//					if( p_proc_data->Log_Count && p_proc_data->Log_DataPt == 0 ){
//						p_proc_data->Log_DataPt = 0;
//						continue;
//					}
//					w_Log_DataPt = p_proc_data->Log_DataPt - 1;				// ログ参照用変数更新
//					if( 0 == Ope_Log_1DataGet(eLOG_IOLOG, w_Log_DataPt, &Io_log_wk)){
//						edit_end = ON;	
//						break;
//					}
//					Prn_edit_space( pri_kind );								// １行空白
//				}
//				// 格納件数分の検索＆編集終了？
//				if((p_proc_data->Log_Count > 0) && (p_proc_data->Log_DataPt)){	// 格納件数分の検索＆編集を終了していない場合	
//					/*------	印字ﾃﾞｰﾀ編集	------*/
//					// 検出日時 編集
//					Prn_edit_Date2( c_Log_Date, &Io_log_wk.iolog_data[p_proc_data->Prn_no_wk[0]].NowTime );
//					// 入出庫イベント種別 編集
//					strcpy(c_Log_Event, IO_LOG_EVENT[Io_log_wk.iolog_data[p_proc_data->Prn_no_wk[0]].Event_type]);
//					Str_Set3( c_Log_Event, "", c_Log_Date, pri_kind );		// １行目印字
//				}
//				else {				// 全ﾛｸﾞ情報編集終了？
//						// 格納件数分の編集が終了した場合
//						edit_end = ON;										// 編集終了
//				}
//				p_proc_data->Prn_no_wk[0]++;								// 事象管理テーブル参照位置更新
//				/* 次参照する位置がテーブルの終端　または　事象が発生していない */
//				if((p_proc_data->Prn_no_wk[0] >= IO_EVE_CNT) || (!Io_log_wk.iolog_data[p_proc_data->Prn_no_wk[0]].Event_type))
//				{
//					p_proc_data->Log_Edit = ON;								// 精算情報印字プロセスへ
//					p_proc_data->Prn_no_wk[0] = 0;							// 精算情報印字に備え事象管理テーブル参照変数初期化
//					p_proc_data->Log_Count--;								// 格納件数ﾃﾞｸﾘﾒﾝﾄ
//					if(!p_proc_data->Log_Count)								// 残り件数がなくなった
//					{
//						edit_end = ON;										// 印字処理終了
//					}
//					break;													// 事象印字処理を終了
//				}
//			}
//		}
//		else																// 現在精算情報印字プロセス
//		{
//			w_Log_DataPt = p_proc_data->Log_DataPt - 1;						// ログ参照用変数更新
//			/* 精算開始、精算中止の時は精算内容を印字する */
//			switch( Io_log_wk.iolog_data[p_proc_data->Prn_no_wk[0]].Event_type ){
//				case	IOLOG_EVNT_AJAST_FIN:			// 精算完了
//					// 精算データ取得
//					for(i=p_proc_data->Prn_no_wk[0]; i > 0; i--){
//						if(Io_log_wk.iolog_data[i].Event_type == IOLOG_EVNT_AJAST_STA){
//							memcpy(&Log_Data_wk, &Io_log_wk.iolog_data[i].NowTime, sizeof(date_time_rec));
//							break;
//						}
//					}
//					w_ret1 = IoLog_edit_Get_PayLogDate(	Io_log_wk.iolog_data[p_proc_data->Prn_no_wk[0]].IO_INF.io_l,
//														&Pri_Work[0].Receipt_data, &Log_Data_wk, no);
//					if( w_ret1 != -1) {
//						if(p_proc_data->Log_Edit == ON)				// 1件分の情報印字開始
//						{
//							Prn_edit_space(pri_kind);				// １行空白
//						}
//						p_proc_data->Log_Edit = NOF;				// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞｾｯﾄ
//						Flap_Sub_FlgB = Flap_Sub_Flg;
//						Flap_Sub_Flg = 0;
//						w_ret2 = RYOUSYUU_edit(&Pri_Work[0].Receipt_data, pri_kind, p_proc_data);
//
//						if( w_ret2 == YES ){
//							p_proc_data->Log_Edit = ON;				// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞﾘｾｯﾄ
//						 	Flap_Sub_Flg = Flap_Sub_FlgB;
//						}
//					}
//					else {
//						p_proc_data->Log_Edit = ON;				// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞﾘｾｯﾄ
//					}
//					break;
//
//				case	IOLOG_EVNT_AJAST_STP:			// 精算中止
//					for(i=p_proc_data->Prn_no_wk[0]; i > 0; i--){
//						if(Io_log_wk.iolog_data[i].Event_type == IOLOG_EVNT_AJAST_STA){
//							memcpy(&Log_Data_wk, &Io_log_wk.iolog_data[i].NowTime, sizeof(date_time_rec));
//							break;
//						}
//					}
//					w_ret1 = IoLog_edit_Get_CanLogDate(Io_log_wk.iolog_data[p_proc_data->Prn_no_wk[0]].IO_INF.io_l,
//														 &Log_Data_wk, no, &Pri_Work[0].Receipt_data);
//					if( w_ret1 != -1) {
//						if(p_proc_data->Log_Edit == ON)				// 1件分の情報印字開始
//						{
//							Prn_edit_space(pri_kind);				// １行空白
//						}
//						p_proc_data->Log_Edit = NOF;					// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞｾｯﾄ
//						Flap_Sub_FlgB = Flap_Sub_Flg;
//						Flap_Sub_Flg = 0;
//						w_ret2 = RYOUSYUU_edit(&Pri_Work[0].Receipt_data, pri_kind, p_proc_data);
//						if( w_ret2 == YES ){
//							p_proc_data->Log_Edit = ON;				// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞﾘｾｯﾄ
//							Flap_Sub_Flg = Flap_Sub_FlgB;
//						}
//					}
//					else {
//							p_proc_data->Log_Edit = ON;				// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞﾘｾｯﾄ
//					}
//					break;
//				case	IOLOG_EVNT_OUT_ILLEGAL:			// 不正出庫
//				case	IOLOG_EVNT_FORCE_FIN:			// 強制出庫
//					// 不正出庫が発生した時間を検索時間とする。
//					if( Io_log_wk.iolog_data[p_proc_data->Prn_no_wk[0]].Event_type == IOLOG_EVNT_FORCE_FIN ){
//						memcpy(&Log_Data_wk, &Io_log_wk.iolog_data[p_proc_data->Prn_no_wk[0]].NowTime, sizeof(date_time_rec));					
//					}else{
//						for(i=p_proc_data->Prn_no_wk[0]; i > 0; i--){
//							if(Io_log_wk.iolog_data[i].Event_type == IOLOG_EVNT_OUT_ILLEGAL_START){
//								memcpy(&Log_Data_wk, &Io_log_wk.iolog_data[i].NowTime, sizeof(date_time_rec));
//								break;
//							}
//						}					
//					}
//					w_ret1 = IoLog_edit_Get_KyoufuLogDate(	Io_log_wk.iolog_data[p_proc_data->Prn_no_wk[0]].IO_INF.io_l,
//															Io_log_wk.iolog_data[p_proc_data->Prn_no_wk[0]].Event_type, 
//															&Log_Data_wk, no, &Pri_Work[0].Flp_log);
//					p_proc_data->Log_Edit = ON;				// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞﾘｾｯﾄ
//					if( w_ret1 != -1) {
//						Prn_edit_space(pri_kind);					// １行空白
//						FUSKYO_edit_data(&Pri_Work[0].Flp_log, pri_kind);
//					}
//					break;
//			}
//			if(p_proc_data->Log_Edit == ON)									// 1件分の印字が完了
//			{
//				p_proc_data->Prn_no_wk[0]++;								// 事象管理テーブル参照位置更新
//				/* 次参照する位置がテーブルの終端　または　事象が発生していない */
//				if((p_proc_data->Prn_no_wk[0] >= IO_EVE_CNT) || (!Io_log_wk.iolog_data[p_proc_data->Prn_no_wk[0]].Event_type))
//				{
//					p_proc_data->Log_Edit = OFF;							// 事象印字プロセスへ
//					p_proc_data->Prn_no_wk[0] = 0;							// 事象管理テーブル参照変数初期化
//					if(!p_proc_data->Log_Count)								// 残り件数がなくなった
//					{
//						edit_end = ON;										// 印字処理終了
//					}
//				}
//			}
//		}
//	}	// ２回目以降の編集処理end
//
//	/*------	編集終了ﾁｪｯｸ	------*/
//	if( (edit_end == ON) && (p_proc_data->Log_Edit == OFF) ){	
//		p_proc_data->Final = ON;						// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
//	}
// MH810100(E) K.Onodera  2019/12/26 車番チケットレス(QR確定・取消データ対応)
}

/*[]-----------------------------------------------------------------------[]*/
/*|		設定ﾃﾞｰﾀ印字ﾃﾞｰﾀ編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SETTEI_edit( Kikai_no, pri_kind, *p_proc_data )		|*/
/*|																			|*/
/*|	PARAMETER		:	ushort	Kikai_no	=	機械Ｎｏ．					|*/
/*|																			|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-13													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	SETTEI_edit( ushort Kikai_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data )

{
	uchar	edit_flg = YES;		// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）
	uchar	edit_gyou = 0;		// 編集済み行数
	uchar	edit_cnt;			// 編集行数ﾜｰｸ
	uchar	next_edit_max;		// 次編集印字内容の最大編集行数


	for( ; edit_flg ; ){				// 編集処理ﾙｰﾌﾟ

		edit_cnt = 0;					// 編集行数ﾘｾｯﾄ

		switch( p_proc_data->Prn_no ){	// 編集する項目番号により各処理へ分岐

			case	0:					// ＜表題＞
				edit_cnt = SETTEI_edit_hyoudai( Kikai_no, pri_kind, p_proc_data );
				break;

			case	1:					// ＜ソフトバージョン＞
				edit_cnt = SETTEI_edit_sver( pri_kind, p_proc_data );
				break;

			case	2:					// ＜MACアドレス＞
				edit_cnt = SETTEI_edit_macaddress( pri_kind, p_proc_data );
				break;
			case	3:					// ＜共通ﾊﾟﾗﾒｰﾀ＞
				edit_cnt = SETTEI_edit_cpara( pri_kind, p_proc_data );
				break;

			default:					// その他（項目番号ｴﾗｰ）
					break;
		}

// MH321800(S) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
			// ※共通パラメータ印字は参照データが多く印字しないケースが続くと、タスク占有時間が長くなる。
			//   そのため、E3260が発生してしまうケースがあるので、１セクション完了で一旦taskchg()を行うこととする
			xPause_PRNTSK(0L);
// MH321800(E) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
		//	編集処理終了ﾁｪｯｸ
		if( (p_proc_data->Prn_no >= 3) && ( (p_proc_data->Prn_no_data1 == 0) && (p_proc_data->Prn_no_data2 == 0) ) ){

			//	項目番号の最後（共通ﾊﾟﾗﾒｰﾀ）まで編集終了の場合
			p_proc_data->Final	= ON;													// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
			edit_flg			= NO;													// 編集処理ﾙｰﾌﾟを抜ける
		}
		else{
			//	項目番号の最後（共通ﾊﾟﾗﾒｰﾀ）まで編集終了していない場合

			if( (p_proc_data->Prn_no_data1 == 0) && (p_proc_data->Prn_no_data2 == 0) ){	// １項目の編集終了？
				p_proc_data->Prn_no++;													// YES　→　項目番号更新（＋１）
			}
			edit_gyou = (uchar)(edit_gyou + edit_cnt);									// 編集済み行数更新
			next_edit_max = settei_edit_tbl[p_proc_data->Prn_no];						// 次編集項目の最大編集行数ｾｯﾄ

			if( (edit_gyou + next_edit_max) > EDIT_GYOU_MAX ){							// 次項目編集可能？（１ﾌﾞﾛｯｸ最大編集行数ﾁｪｯｸ）
				edit_flg = NO;															// 最大編集行数を超えてしまう場合　→　編集処理ﾙｰﾌﾟを抜ける
			}
		}
	}
}

/*[]---------------------------------------------------------------------------[]*/
/*|		設定ﾃﾞｰﾀ印字（表題）編集処理											|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SETTEI_edit_hyoudai( Kikai_no, pri_kind, *p_proc_data )	|*/
/*|																				|*/
/*|	PARAMETER		:	ushort	Kikai_no	=	機械Ｎｏ．						|*/
/*|																				|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ						|*/
/*|							R_PRI  : ﾚｼｰﾄ										|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ										|*/
/*|																				|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数								|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi														|*/
/*|	Date	:	2005-04-13														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
uchar	SETTEI_edit_hyoudai( ushort Kikai_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar			edit_cnt = 0;		// 編集行数

	/*------	＜表題＞編集	------*/
	edit_cnt += Prn_edit_Title	(						// 表題（"設定プリント"）印字ﾃﾞｰﾀ編集
									"設定プリント",
									FONT_K_YOKOBAI,
									pri_kind
								);

	/*------	１行空白	------*/
	edit_cnt += Prn_edit_space( pri_kind );

	/*------	＜機械NO.＞編集	------*/
	KikaiNoSet(	prn_work, Kikai_no );					// 機械NO.編集
	PCMD_LEFT( pri_kind );								// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );				// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );				// 漢字（通常）指定
	PrnStr( prn_work, pri_kind );						// 印字ﾃﾞｰﾀ登録

	edit_cnt++;

	/*------	＜時刻＞編集	------*/
	Prn_edit_NowDate( prn_work );						// 現在日時印字ﾃﾞｰﾀ編集

	PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
	PrnFontSize( FONT_A_NML, pri_kind );				// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );				// 漢字（通常）指定
	PrnStr( prn_work, pri_kind );						// 時刻　印字ﾃﾞｰﾀ登録
	edit_cnt++;

	/*------	１行空白	------*/
	edit_cnt += Prn_edit_space( pri_kind );

	return( edit_cnt );
}

/*[]---------------------------------------------------------------------------[]*/
/*|		設定ﾃﾞｰﾀ印字（ｿﾌﾄﾊﾞｰｼﾞｮﾝ）編集処理										|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SETTEI_edit_sver( pri_kind, *p_proc_data )				|*/
/*|																				|*/
/*|	PARAMETER		:	uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ						|*/
/*|							R_PRI  : ﾚｼｰﾄ										|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ										|*/
/*|																				|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数								|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi														|*/
/*|	Date	:	2005-04-13														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
uchar	SETTEI_edit_sver( uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	extern const	ver_rec		VERSNO_SX10CTRL;				// SX-10制御部 ソフトウェア部番
// MH321800(S) hosoda ICクレジット対応
	extern const	ver_rec		VERSNO_EC_COMM;					// 決済リーダ制御部 ソフトウェア部番
// MH321800(E) hosoda ICクレジット対応

	uchar	edit_cnt = 0;		// 編集行数
	char	ap_ver[10];			// ｿﾌﾄﾊﾞｰｼﾞｮﾝ（ｱﾌﾟﾘｹｰｼｮﾝ）

	/*------	＜項目名称＞編集	------*/
	PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
	PrnStr( "====== < Software Version > ======", pri_kind );	// 項目名称印字ﾃﾞｰﾀ登録

	edit_cnt++;

	edit_cnt += edit_SoftVerPrint( pri_kind );

// MH321800(S) hosoda ICクレジット対応
	if (isEC_USE()) {
	// 決済リーダ
		/*------	＜ﾊﾞｰｼﾞｮﾝＮｏ．＞編集	------*/
		ap_ver[0] = (char)VERSNO_EC_COMM.ver_part[0];			// Parts No.
		ap_ver[1] = (char)VERSNO_EC_COMM.ver_part[1];
		ap_ver[2] = (char)VERSNO_EC_COMM.ver_part[2];
		ap_ver[3] = (char)VERSNO_EC_COMM.ver_part[3];
		ap_ver[4] = (char)VERSNO_EC_COMM.ver_part[4];
		ap_ver[5] = (char)VERSNO_EC_COMM.ver_part[5];

		ap_ver[6] = (char)VERSNO_EC_COMM.ver_romn[0];			// Software Version No.
		ap_ver[7] = (char)VERSNO_EC_COMM.ver_romn[1];
		ap_ver[8] = 0;

		sprintf( prn_work,"EC I/F      : %s", ap_ver );			// 決済リーダ制御部 No.印字ﾃﾞｰﾀ編集
		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録
		edit_cnt++;
	}
	else
// MH321800(E) hosoda ICクレジット対応
	if( prm_get(COM_PRM,S_PAY,24,1,3 ) == 1){
		/*------	＜ﾊﾞｰｼﾞｮﾝＮｏ．＞編集	------*/
		ap_ver[0] = (char)VERSNO_SX10CTRL.ver_part[0];			// Parts No.
		ap_ver[1] = (char)VERSNO_SX10CTRL.ver_part[1];
		ap_ver[2] = (char)VERSNO_SX10CTRL.ver_part[2];
		ap_ver[3] = (char)VERSNO_SX10CTRL.ver_part[3];
		ap_ver[4] = (char)VERSNO_SX10CTRL.ver_part[4];
		ap_ver[5] = (char)VERSNO_SX10CTRL.ver_part[5];

		ap_ver[6] = (char)VERSNO_SX10CTRL.ver_romn[0];			// Software Version No.
		ap_ver[7] = (char)VERSNO_SX10CTRL.ver_romn[1];
		ap_ver[8] = 0;

		sprintf( prn_work,"SX-10 I/F   : %s", ap_ver );			// SX-10制御部 No.印字ﾃﾞｰﾀ編集
		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録
		edit_cnt++;
	}

	/*------	１行空白	------*/
	edit_cnt += Prn_edit_space( pri_kind );

	return( edit_cnt );
}

/*[]---------------------------------------------------------------------------[]*/
/*|		設定ﾃﾞｰﾀ印字（MACアドレス）編集処理										|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SETTEI_edit_macaddress( pri_kind, *p_proc_data )		|*/
/*|																				|*/
/*|	PARAMETER		:	uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ						|*/
/*|							R_PRI  : ﾚｼｰﾄ										|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ										|*/
/*|																				|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数								|*/
/*|																				|*/
/*|	NOTE			:															|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	H.takeuchi														|*/
/*|	Date	:	2012-10-17														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2012 AMANO Corp.--------[]*/
uchar	SETTEI_edit_macaddress( uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	int		macAdrgetSts;
	char	w_macAddr[6];
	
	macAdrgetSts = 0;
	memset(w_macAddr, 0, sizeof(w_macAddr));

	/*------	＜項目名称＞編集	------*/
	PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
	PrnStr( "========== < MACｱﾄﾞﾚｽ > ==========", pri_kind );	// 項目名称印字ﾃﾞｰﾀ登録
	edit_cnt++;

	
	macAdrgetSts = EtherGetPhyAddr(OpenHandle, (char TM_FAR *)(&w_macAddr[0]));
	if(macAdrgetSts == TM_DEV_OKAY){
		/*------	＜MACアドレス＞編集	------*/
		sprintf( prn_work,"ｱﾄﾞﾚｽ : %02X-%02X-%02X-%02X-%02X-%02X",	// MACアドレス印字ﾃﾞｰﾀ編集
							 								w_macAddr[0],
															w_macAddr[1],
															w_macAddr[2],
															w_macAddr[3],
															w_macAddr[4],
															w_macAddr[5] );
		PrnStr( prn_work, pri_kind );								// 印字ﾃﾞｰﾀ登録
	}
	else{
		PrnStr( "取得できませんでした", pri_kind );	// 項目名称印字ﾃﾞｰﾀ登録
	}
	edit_cnt++;

	/*------	１行空白	------*/
	edit_cnt += Prn_edit_space( pri_kind );

	return( edit_cnt );
}

/*[]---------------------------------------------------------------------------[]*/
/*|		設定ﾃﾞｰﾀ印字（共通ﾊﾟﾗﾒｰﾀ）編集処理										|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SETTEI_edit_cpara( pri_kind, *p_proc_data )				|*/
/*|																				|*/
/*|	PARAMETER		:	uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ						|*/
/*|							R_PRI  : ﾚｼｰﾄ										|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ										|*/
/*|																				|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数								|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|																				|*/
/*|	共通ﾊﾟﾗﾒｰﾀの印字ﾃﾞｰﾀを編集する場合、編集処理制御ﾜｰｸを以下のように使用する	|*/
/*|																				|*/
/*|		Prn_no_data1	：	処理中のｾｯｼｮﾝ番号を格納								|*/
/*|		Prn_no_data2	：	処理中のｾｯｼｮﾝ毎のｱﾄﾞﾚｽ番号を格納					|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi														|*/
/*|	Date	:	2005-04-13														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
uchar	SETTEI_edit_cpara( uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	ushort	s_no;				// ｾｯｼｮﾝ番号
	ushort	addr;				// ｱﾄﾞﾚｽ番号
	uchar	edit_flg = YES;		// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）
	uchar	edit_pos = OFF;		// 印字ﾃﾞｰﾀ編集位置（OFF：左側／ON：右側）
	char	kind;
	ushort 	pos = 0;			// 探した位置保存
	long	prm_def;			// 取得したパラメータの初期値
	long	secAddr;			// ｾｯｼｮﾝ番号+ｱﾄﾞﾚｽ番号(6桁ｱﾄﾞﾚｽ)
// GG124100(S) R.Endo 2022/06/02 車番チケットレス3.0 #6343 クラウド料金計算対応(設定非表示)
// 	uchar	i;
// GG124100(E) R.Endo 2022/06/02 車番チケットレス3.0 #6343 クラウド料金計算対応(設定非表示)
	uchar	maskAddr;

	s_no	= p_proc_data->Prn_no_data1;							// 編集対象とするｾｯｼｮﾝ番号ｾｯﾄ
	addr	= p_proc_data->Prn_no_data2;							// 編集対象とするｱﾄﾞﾚｽ番号ｾｯﾄ
	pos 	= p_proc_data->Prn_no_wk[0];							// 参照するデフォルトテーブルの位置

	if( (s_no == 0) && (addr == 0) ){								// 共通ﾊﾟﾗﾒｰﾀ印字ﾃﾞｰﾀ編集開始？

		/*------	＜共通ﾊﾟﾗﾒｰﾀ印字項目名称＞編集	------*/
		PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
		PrnStr( "========= < 共通ﾊﾟﾗﾒｰﾀ > =========", pri_kind );	// 項目名称印字ﾃﾞｰﾀ登録
		edit_cnt++;													// 編集行数＋１

		s_no	= 1;												// 編集開始ｾｯｼｮﾝ番号ｾｯﾄ
	}

	for( ; ; ){														// 印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟ

		for( ; ; ){													// ｾｯｼｮﾝ毎の編集処理ﾙｰﾌﾟ
			if( addr == 0 ){										// 新規ｾｯｼｮﾝの編集開始？
				addr = 1;											// 編集開始ｱﾄﾞﾚｽ番号ｾｯﾄ
				PCMD_LEFT( pri_kind );								// [位置揃え(左揃え)]
				PrnFontSize( FONT_A_NML, pri_kind );				// ﾌｫﾝﾄＡ（通常）指定
				PrnFontSize( FONT_K_NML, pri_kind );				// 漢字（通常）指定
				PrnStr( CprmTtl_Prn[s_no], pri_kind );				// ｾｯｼｮﾝ項目名称印字ﾃﾞｰﾀ登録
				edit_cnt++;											// 編集行数＋１

/* 15行以上編集しない限りループを抜けない処理だったため、デフォルト値も設定値も０だった場合、ループを抜けずに */
/* ウォッチドッグタイマーで精算機がリセットしてしまう。１セクション終了毎に処理を抜けるように修正する */
				edit_flg = NO;									// 編集最大行数になった場合：編集終了ﾌﾗｸﾞｾｯﾄ
				break;											// →ｾｯｼｮﾝ毎の編集処理ﾙｰﾌﾟを抜ける
			}

			maskAddr = 0;
			if( addr == 1 ){
// GG124100(S) R.Endo 2022/06/02 車番チケットレス3.0 #6343 クラウド料金計算対応(設定非表示)
// 				if(OPECTL.Mnt_lev < 4){
// 					secAddr = (s_no*10000L) + addr;
// 					for( i=0; i<prm_mask_max; i++ ){
// 						// 以下、マスク判定
// 						if( secAddr < param_mask[i].from ){
// 							// 非マスクアドレス
// 							break;
// 						}
// 						if( secAddr <= param_mask[i].to ){
// 							// マスク対象
// 							maskAddr = 1;
// 							break;
// 						}
// 					}
// // MH321800(S) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
// 					// ※共通パラメータ印字は参照データが多く印字しないケースが続くと、タスク占有時間が長くなる。
// 					//   そのため、E3260が発生してしまうケースがあるので、１セクション完了で一旦taskchg()を行うこととする
// 					xPause_PRNTSK(0L);
// // MH321800(E) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
// 				}
				secAddr = (s_no*10000L) + addr;

				// マスクアドレスであればフラグをセット
				if ( is_nomask(secAddr) == 0 ) {
					maskAddr = 1;
				}

				// ※共通パラメータ印字は参照データが多く印字しないケースが続くと、タスク占有時間が長くなる。
				//   そのため、E3260が発生してしまうケースがあるので、１セクション完了で一旦taskchg()を行うこととする
				xPause_PRNTSK(0L);
// GG124100(E) R.Endo 2022/06/02 車番チケットレス3.0 #6343 クラウド料金計算対応(設定非表示)
			}

			if( maskAddr == 0 ){
				prm_def = default_prm_get((uchar)s_no, addr, &pos);		// 次のパラメータ初期値を取得
				if( (CPrmSS[s_no][addr] != 0 ) ||						// 対象設定ﾃﾞｰﾀ≠０？
					(prm_def != CPrmSS[s_no][addr])) {					// 初期値≠設定値？

					kind = (char)-1;
					if (prm_def != CPrmSS[s_no][addr]) {
						kind = 1;	// "*"あり（デフォルトデータと違う）
					} else if (CPrmSS[s_no][addr] != 0) {
						kind = 0;	// "*"なし（０以外）
					}
					SETTEI_edit_data(									// 設定ﾃﾞｰﾀを印字編集ｴﾘｱ（prn_work）へ登録
										addr,
										(ulong)CPrmSS[s_no][addr],
										edit_pos,
										(uchar)kind
									);

					if( edit_pos == OFF ){								// 編集位置？
						//	左側に編集した場合
						edit_pos = ON;									// 編集位置更新（次の編集位置を右側にする）
					}
					else{
						//	右側に編集した場合
						edit_pos = OFF;									// 編集位置更新（次の編集位置を左側にする）
						PCMD_LEFT( pri_kind );							// [位置揃え(左揃え)]
						PrnFontSize( FONT_A_NML, pri_kind );			// ﾌｫﾝﾄＡ（通常）指定
						PrnFontSize( FONT_K_NML, pri_kind );			// 漢字（通常）指定
						PrnStr( prn_work, pri_kind );					// 編集した印字ﾃﾞｰﾀ登録
						edit_cnt++;										// 編集行数＋１
					}
				}
			}

// GG124100(S) R.Endo 2022/06/02 車番チケットレス3.0 #6343 クラウド料金計算対応(設定非表示)
// 			if(OPECTL.Mnt_lev < 4){
// 				secAddr = (s_no*10000L) + addr;
// 				secAddr = nomask_ses_next( secAddr );
// 				if(secAddr == 0){
// 					addr = CPrmCnt[s_no] + 1;						// 最終ｱﾄﾞﾚｽに変更
// 				}
// 				else{
// 					addr = secAddr%10000L;
// 				}
// 			}
// 			else{
// 				addr++;												// ｱﾄﾞﾚｽ番号＋１
// 			}
			secAddr = (long)((s_no * 10000L) + addr);

			secAddr = nomask_ses_next(secAddr);
			if ( secAddr == 0 ) {
				addr = CPrmCnt[s_no] + 1;	// 最終アドレスに変更
			} else {
				addr = (ushort)(secAddr % 10000L);
			}
// GG124100(E) R.Endo 2022/06/02 車番チケットレス3.0 #6343 クラウド料金計算対応(設定非表示)

// MH321800(S) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
			// ※共通パラメータ印字は参照データが多く印字しないケースが続くと、タスク占有時間が長くなる。
			//   そのため、E3260が発生してしまうケースがあるので、１セクション完了で一旦taskchg()を行うこととする
			xPause_PRNTSK(0L);
// MH321800(E) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
			if( addr > CPrmCnt[s_no] ){								// 最終ｱﾄﾞﾚｽまで検索終了？

				//	ｾｯｼｮﾝ毎の最終ｱﾄﾞﾚｽまで編集終了した場合

				if( edit_pos == ON ){								// 左側に印字するﾃﾞｰﾀあり？
					//	左側に印字するﾃﾞｰﾀがある場合
					edit_pos = OFF;									// 編集位置更新（次の編集位置を左側にする）
					PCMD_LEFT( pri_kind );							// [位置揃え(左揃え)]
					PrnFontSize( FONT_A_NML, pri_kind );			// ﾌｫﾝﾄＡ（通常）指定
					PrnFontSize( FONT_K_NML, pri_kind );			// 漢字（通常）指定
					PrnStr( prn_work, pri_kind );					// 編集済みの印字ﾃﾞｰﾀ登録
					edit_cnt++;										// 編集行数＋１
				}
				Prn_edit_space( pri_kind );							// １行空白ｾｯﾄ
				edit_cnt++;											// 編集行数＋１

				if( edit_cnt >= EDIT_GYOU_MAX ){					// 編集最大行数ﾁｪｯｸ
					edit_flg = NO;									// 編集最大行数になった場合：編集終了ﾌﾗｸﾞｾｯﾄ
				}
				break;												// →ｾｯｼｮﾝ毎の編集処理ﾙｰﾌﾟを抜ける
			}
			else{
				//	ｾｯｼｮﾝ毎の最終ｱﾄﾞﾚｽまで編集終了していない場合

				if( edit_cnt >= EDIT_GYOU_MAX ){					// 編集最大行数ﾁｪｯｸ
					edit_flg = NO;									// 編集最大行数になった場合：編集終了ﾌﾗｸﾞｾｯﾄ
					break;											// →ｾｯｼｮﾝ毎の編集処理ﾙｰﾌﾟを抜ける
				}
			}
		}/*------------------	ｾｯｼｮﾝ毎の編集処理ﾙｰﾌﾟEND	---------------------------------------------------*/

// MH321800(S) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
		// ※共通パラメータ印字は参照データが多く印字しないケースが続くと、タスク占有時間が長くなる。
		//   そのため、E3260が発生してしまうケースがあるので、１セクション完了で一旦taskchg()を行うこととする
		xPause_PRNTSK(0L);
// MH321800(E) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
		if( addr > CPrmCnt[s_no] ){									// 最終ｱﾄﾞﾚｽまで検索終了？

			//	ｾｯｼｮﾝ毎の最終ｱﾄﾞﾚｽまで検索終了した場合
			addr = 0;												// ｱﾄﾞﾚｽ番号ﾘｾｯﾄ
			s_no++;													// ｾｯｼｮﾝ番号＋１
			if( s_no >= C_PRM_SESCNT_MAX ){							// 最終ｾｯｼｮﾝまで終了？
				edit_flg = NO;										// 最終ｾｯｼｮﾝまで終了した場合：編集終了ﾌﾗｸﾞｾｯﾄ
			}
		}

		if( edit_flg == NO ){										// 編集最大行数まで編集　または　最終ｾｯｼｮﾝ最終ｱﾄﾞﾚｽまで編集終了？
			break;													// YES→印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟを抜ける
		}
	}/*----------------------	印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟEND	-------------------------------------------------------*/

	if( s_no >= C_PRM_SESCNT_MAX ){									//	全ｾｯｼｮﾝ編集終了？

		//	全ｾｯｼｮﾝ編集処理終了の場合
		p_proc_data->Prn_no_data1 = 0;								// ｾｯｼｮﾝ番号ｸﾘｱ
		p_proc_data->Prn_no_data2 = 0;								// ｱﾄﾞﾚｽ番号ｸﾘｱ
		p_proc_data->Prn_no_wk[0] = 0;								// デフォルトテーブル位置クリア
	}
	else{
		//	全ｾｯｼｮﾝ編集処理終了でない場合
		p_proc_data->Prn_no_data1 = s_no;							// 次処理で編集対象とするｾｯｼｮﾝ番号ｾｯﾄ
		p_proc_data->Prn_no_data2 = addr;							// 次処理で編集対象とするｱﾄﾞﾚｽ番号ｾｯﾄ
		p_proc_data->Prn_no_wk[0] = pos;							// 次処理で参照するデフォルトテーブルの位置
	}

	return( edit_cnt );
}

/*[]---------------------------------------------------------------------------[]*/
/*|		設定ﾃﾞｰﾀの印字ﾃﾞｰﾀ編集処理（ｱﾄﾞﾚｽ番号＆設定ﾃﾞｰﾀ）						|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SETTEI_edit_data( addr, data, edit_pos )				|*/
/*|																				|*/
/*|	PARAMETER		:	ushort	addr	=	ｱﾄﾞﾚｽ番号							|*/
/*|																				|*/
/*|						ulong	data	=	設定ﾃﾞｰﾀ							|*/
/*|																				|*/
/*|						uchar	pos		=	編集位置							|*/
/*|																				|*/
/*|						uchar	kind	=	*の有無	0=なし、1=あり				|*/
/*|																				|*/
/*|	RETURN VALUE	:	void													|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|																				|*/
/*|	指定されたﾊﾟﾗﾒｰﾀにより設定ﾃﾞｰﾀ印字ﾃﾞｰﾀを編集ｴﾘｱ（prn_work）に編集する		|*/
/*|	編集ﾜｰｸとして、cTmp1を使用する												|*/
/*|																				|*/
/*|	＜編集ﾌｫｰﾏｯﾄ＞																|*/
/*|																				|*/
/*|		（編集位置：左）	（編集位置：右）									|*/
/*|		"  aaaa -> dddddd    aaaa -> dddddd"									|*/
/*|																				|*/
/*|		aaaa=ｱﾄﾞﾚｽ（４桁）	dddddd=ﾃﾞｰﾀ（６桁）									|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi														|*/
/*|	Date	:	2005-04-14														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
void	SETTEI_edit_data( ushort addr, ulong data, uchar pos, uchar	kind )
{
	char	f;

	f = (kind == 0) ? ' ' : '*';
	if( addr > 9999 ){											// ｱﾄﾞﾚｽ番号ﾁｪｯｸ
		addr = 9999;											// ４桁を超えたﾃﾞｰﾀの場合、９９９９として編集する
	}

	if( data > 999999 ){										// ﾃﾞｰﾀﾁｪｯｸ
		data = 999999;											// ６桁を超えたﾃﾞｰﾀの場合、９９９９９９として編集する
	}

	if( pos == OFF ){											// 編集位置？
		//	左側に編集する場合
		sprintf( prn_work,"  %04d ->%c%06ld  ", addr, f, data );// ﾃﾞｰﾀ編集
	}
	else{
		//	右側に編集する場合
		sprintf( cTmp1,"  %04d ->%c%06ld", addr, f, data );		// ﾃﾞｰﾀ編集
		strcat( prn_work, cTmp1 );								// 編集済み（左側）ﾃﾞｰﾀの右側に編集ﾃﾞｰﾀ追加

	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		動作ｶｳﾝﾄ印字ﾃﾞｰﾀ編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	DOUSAC_edit( Kikai_no, pri_kind, *p_proc_data )		|*/
/*|																			|*/
/*|	PARAMETER		:	ushort	Kikai_no	=	機械Ｎｏ．					|*/
/*|																			|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-25													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
// MH810100(S)
//#define		DC_DATA_END		LCD_LIGTH_CNT		// 動作ｶｳﾝﾄﾃﾞｰﾀ最終＝LCDﾊﾞｯｸﾗｲﾄ点灯動作時間
#define		DC_DATA_END		QR_READER_CNT		// 動作ｶｳﾝﾄﾃﾞｰﾀ最終＝QRﾘｰﾀﾞｰ動作時間
// MH810100(E)

void	DOUSAC_edit( ushort Kikai_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar			cnt_syu;			// 動作ｶｳﾝﾄ種別
	ulong			cnt_data;			// 動作ｶｳﾝﾄﾃﾞｰﾀ


	/*------	＜表題＞編集	------*/
	Prn_edit_Title	(										// 表題（"動作カウント"）印字ﾃﾞｰﾀ編集
						"動作カウント",
						FONT_K_YOKOBAI,
						pri_kind
					);

	/*------	１行空白	------*/
	Prn_edit_space( pri_kind );

	/*------	＜機械NO.＞編集	------*/
	KikaiNoSet(	prn_work, Kikai_no );						// 機械NO.編集
	PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
	PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録

	/*------	＜時刻＞編集	------*/
	Prn_edit_NowDate( prn_work );							// 現在日時印字ﾃﾞｰﾀ編集
	PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
	PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
	PrnStr( prn_work, pri_kind );							// 時刻　印字ﾃﾞｰﾀ登録

	/*------	１行空白	------*/
	Prn_edit_space( pri_kind );

	/*------	＜各動作ｶｳﾝﾄﾃﾞｰﾀ＞編集	------*/
	for( cnt_syu = 0 ; cnt_syu <= DC_DATA_END ; cnt_syu++ ){

		cnt_data = Mov_cnt_dat[cnt_syu];					// 動作ｶｳﾝﾄﾃﾞｰﾀ取得
// MH810100(S) Y.Yamauchi 2019/10/18 車番チケットレス(メンテナンス)		
//		if(cnt_syu == LCD_LIGTH_CNT)
		if(cnt_syu == QR_READER_CNT)
// MH810100(E) Y.Yamauchi 2019/10/18 車番チケットレス(メンテナンス)
			cnt_data = Mov_cnt_dat[cnt_syu]/60;					// 動作ｶｳﾝﾄﾃﾞｰﾀ取得
		else
			cnt_data = Mov_cnt_dat[cnt_syu];					// 動作ｶｳﾝﾄﾃﾞｰﾀ取得
		if( cnt_data > 99999999 ){
			cnt_data = 99999999;							// ８桁を超えた場合、９９９９９９９９とする
		}
		sprintf( cEditwk1,"%ld", cnt_data );				// 動作ｶｳﾝﾄ値ﾃﾞｰﾀ編集
		Camma_Set( (uchar *)cEditwk1 );						// ３桁区切り（”、”挿入）
		strcat( cEditwk1, Pri_Tanni[Dc_Tanni[cnt_syu]] );	// 単位追加

		Str_Set1(											// -----印字ﾃﾞｰﾀ編集-----
					DcName_Prn[cnt_syu],					// 文字列１：動作ｶｳﾝﾄ名称
					cEditwk1,								// 文字列２：動作ｶｳﾝﾄ値
					pri_kind								// 印字先ﾌﾟﾘﾝﾀ
				);
	}

	/*------	編集終了	------*/
	p_proc_data->Final = ON;								// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
}

/*[]-----------------------------------------------------------------------------------[]*/
/*|		ﾛｯｸ装置動作ｶｳﾝﾄ印字ﾃﾞｰﾀ編集処理													|*/
/*[]-----------------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	LOCKDCNT_edit( Kikai_no, pri_kind, *p_proc_data )				|*/
/*|																						|*/
/*|	PARAMETER		:	ushort	Kikai_no	=	機械Ｎｏ．								|*/
/*|																						|*/
/*|						uchar	Req_syu		=	要求種別								|*/
/*|													１：ﾌﾗｯﾌﾟ装置動作ｶｳﾝﾄ				|*/
/*|													２：ﾛｯｸ装置動作ｶｳﾝﾄ					|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ								|*/
/*|													R_PRI  : ﾚｼｰﾄ						|*/
/*|													J_PRI  : ｼﾞｬｰﾅﾙ						|*/
/*|																						|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ				|*/
/*|																						|*/
/*|	RETURN VALUE	:	void															|*/
/*|																						|*/
/*[]-----------------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi																|*/
/*|	Date	:	2005-07-21																|*/
/*|	Update	:																			|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----------------[]*/
void	LOCKDCNT_edit( ushort Kikai_no, uchar Req_syu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar			edit_cnt = 0;		// 編集行数ﾜｰｸ
	ushort			lk_no;				// ﾛｯｸ装置No.
	uchar			lok_syu;			// 「ﾛｯｸ装置種別」	設定ﾃﾞｰﾀ取得ﾜｰｸ
	uchar			cnt_syu;			// 動作ｶｳﾝﾄ種別
	ulong			dcnt;				// 動作ｶｳﾝﾄﾃﾞｰﾀ
	ushort			data_no;			// 動作ｶｳﾝﾄﾃﾞｰﾀ配列No.


	if( p_proc_data->Prn_no == 0 ){

		// 編集開始（初回編集）の場合

		/*------	＜表題＞編集	------*/
		switch( Req_syu ){
			case	_MTYPE_LOCK:										// ロック装置
			default:
				edit_cnt += Prn_edit_Title	(							// 表題（"ロック装置動作カウント"）印字ﾃﾞｰﾀ編集
												"ロック装置動作カウント",
												FONT_K_NML,
												pri_kind
											);

				p_proc_data->Prn_no = LOCK_START_NO;					// 編集開始とする装置No.ｾｯﾄ
				p_proc_data->Prn_no_wk[0] = LOCK_END_NO;				// 編集終了とする装置No.ｾｯﾄ
				p_proc_data->Prn_no_wk[1] = BIKE_START_INDEX;			// ﾛｯｸ装置車室ﾊﾟﾗﾒｰﾀｲﾝﾃﾞｯｸｽ

				break;
			case	_MTYPE_FLAP:										// IF盤フラップ装置
				edit_cnt += Prn_edit_Title	(							// 表題（"フラップ装置動作カウント"）印字ﾃﾞｰﾀ編集
												"フラップ装置動作カウント",
												FONT_K_NML,
												pri_kind
											);

				p_proc_data->Prn_no = FLAP_START_NO;					// 編集開始とする装置No.ｾｯﾄ
				p_proc_data->Prn_no_wk[0] = FLAP_END_NO;				// 編集終了とする装置No.ｾｯﾄ
				p_proc_data->Prn_no_wk[1] = CAR_START_INDEX;			// ﾌﾗｯﾌﾟ装置車室ﾊﾟﾗﾒｰﾀｲﾝﾃﾞｯｸｽ
				break;
			case	_MTYPE_INT_FLAP:									// 内蔵フラップ装置
				edit_cnt += Prn_edit_Title	(							// 表題（"フラップ装置動作カウント"）印字ﾃﾞｰﾀ編集
												"フラップ装置動作カウント",
												FONT_K_NML,
												pri_kind
											);

				p_proc_data->Prn_no = INT_FLAP_START_NO;				// 編集開始とする装置No.ｾｯﾄ
				p_proc_data->Prn_no_wk[0] = INT_FLAP_END_NO;			// 編集終了とする装置No.ｾｯﾄ
				p_proc_data->Prn_no_wk[1] = INT_CAR_START_INDEX;		// 内蔵ﾌﾗｯﾌﾟ装置車室ﾊﾟﾗﾒｰﾀｲﾝﾃﾞｯｸｽ
				break;
			case	(_MTYPE_FLAP+_MTYPE_INT_FLAP):						// IF盤＋内蔵フラップ装置
				edit_cnt += Prn_edit_Title	(							// 表題（"フラップ装置動作カウント"）印字ﾃﾞｰﾀ編集
												"フラップ装置動作カウント",
												FONT_K_NML,
												pri_kind
											);

				p_proc_data->Prn_no = FLAP_START_NO;					// 編集開始とする装置No.ｾｯﾄ
				p_proc_data->Prn_no_wk[0] = INT_FLAP_END_NO;			// 編集終了とする装置No.ｾｯﾄ
				p_proc_data->Prn_no_wk[1] = CAR_START_INDEX;			// 内蔵ﾌﾗｯﾌﾟ装置車室ﾊﾟﾗﾒｰﾀｲﾝﾃﾞｯｸｽ
				break;
		}

		/*------	１行空白	------*/
		edit_cnt += Prn_edit_space( pri_kind );

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, Kikai_no );								// 機械NO.編集
		PCMD_LEFT( pri_kind );											// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );							// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );							// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );									// 印字ﾃﾞｰﾀ登録

		edit_cnt++;

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );									// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );										// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnFontSize( FONT_A_NML, pri_kind );							// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );							// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );									// 時刻　印字ﾃﾞｰﾀ登録

		edit_cnt++;

		/*------	１行空白	------*/
		edit_cnt += Prn_edit_space( pri_kind );

	}

	lk_no = p_proc_data->Prn_no;										// 編集対象とするﾛｯｸ装置No.取得

	for( ; lk_no <= p_proc_data->Prn_no_wk[0] ; lk_no++ ){				// ﾛｯｸ装置No.毎編集処理ﾙｰﾌﾟ
		WACDOG;															// 装置ループの際はｳｫｯﾁﾄﾞｯｸﾘｾｯﾄ実行

		lok_syu =LockInfo[lk_no-1].lok_syu;								// 「ﾛｯｸ装置接続種別」設定ﾃﾞｰﾀ取得

		if( lok_syu ){													// 接続有？

			//	編集対象とするﾛｯｸ装置No.が駐車位置として設定されている場合

			/*------	＜ﾛｯｸ装置No.＞編集	------*/
			sprintf( cEditwk1,"＜装置No.%03d＞", (lk_no - p_proc_data->Prn_no_wk[1]) );		// cEditwk1←"＜装置No.XXX＞"印字ﾃﾞｰﾀ（XXX=ﾛｯｸ装置No.）
			edit_cnt += Prn_edit_Title	(								// 印字ﾃﾞｰﾀ編集
											cEditwk1,
											FONT_K_NML,
											pri_kind
										);

			for( cnt_syu = 0 ; cnt_syu <= 2 ; cnt_syu++ ){				// 動作ｶｳﾝﾄﾃﾞｰﾀ編集（0:動作回数、1:手動動作回数、2:故障回数）

				if( Req_syu != _MTYPE_LOCK ){
					data_no = lk_no - 1;								// 動作ｶｳﾝﾄﾃﾞｰﾀ配列No.ｾｯﾄ
					dcnt = MntFlapDoCount[data_no][cnt_syu];			// ﾌﾗｯﾌﾟ装置動作ｶｳﾝﾄﾃﾞｰﾀ取得
				}
				else{
					data_no = lk_no - p_proc_data->Prn_no_wk[1] - 1;	// 動作ｶｳﾝﾄﾃﾞｰﾀ配列No.ｾｯﾄ
					dcnt = MntLockDoCount[data_no][cnt_syu];			// ﾛｯｸ装置動作ｶｳﾝﾄﾃﾞｰﾀ取得
				}

				if( dcnt != 0xffffffffl ){

					// 動作回数を受信している場合

					if( dcnt > 99999999 ){
						dcnt = 99999999;								// ８桁を超えた場合、９９９９９９９９とする
					}
					sprintf( cEditwk1,"%ld", dcnt );					// 動作ｶｳﾝﾄ値ﾃﾞｰﾀ編集
					Camma_Set( (uchar *)cEditwk1 );						// ３桁区切り（”、”挿入）
				}
				else{
					// 動作回数を受信していない場合

					sprintf( cEditwk1,"********" );						// 動作ｶｳﾝﾄ値ﾃﾞｰﾀ編集（********）
				}

				strcat( cEditwk1, Pri_Tanni[PriT_KAI] );				// 単位（回）追加

				Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
							LkDcName_Prn[cnt_syu],						// 文字列１：動作ｶｳﾝﾄ名称
							cEditwk1,									// 文字列２：動作ｶｳﾝﾄ値
							pri_kind									// 印字先ﾌﾟﾘﾝﾀ
						);

				edit_cnt++;
			}
		}
		if( (edit_cnt+4) > EDIT_GYOU_MAX ){								// 編集行数ﾁｪｯｸ

			// 次のﾛｯｸ装置No.ﾃﾞｰﾀ編集（４行）が不可の場合

			lk_no++;													// 次処理で検索するﾛｯｸ装置No.をｾｯﾄ
			break;														// ﾃﾞｰﾀ編集処理ﾙｰﾌﾟを抜ける
		}
	}																	// ﾛｯｸ装置No.毎編集処理ﾙｰﾌﾟＥＮＤ

	if( lk_no > p_proc_data->Prn_no_wk[0] ){							// 全装置No.編集終了？

		// 全てのﾛｯｸ装置No.について編集終了した場合
		p_proc_data->Final	= ON;										// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
	else{
		// 未編集のﾛｯｸ装置No.がある場合
		p_proc_data->Prn_no = lk_no;									// 次に編集するﾛｯｸ装置No.をｾｰﾌﾞ
	}
}

/*[]-----------------------------------------------------------------------------------[]*/
/*|		車室ﾊﾟﾗﾒｰﾀ印字ﾃﾞｰﾀ編集処理														|*/
/*[]-----------------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	LOCKPARA_edit( Kikai_no, pri_kind, *p_proc_data )				|*/
/*|																						|*/
/*|	PARAMETER		:	ushort	Kikai_no	=	機械Ｎｏ．								|*/
/*|																						|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ								|*/
/*|													R_PRI  : ﾚｼｰﾄ						|*/
/*|													J_PRI  : ｼﾞｬｰﾅﾙ						|*/
/*|																						|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ				|*/
/*|																						|*/
/*|	RETURN VALUE	:	void															|*/
/*|																						|*/
/*[]-----------------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi																|*/
/*|	Date	:	2005-05-30																|*/
/*|	Update	:																			|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----------------[]*/
void	LOCKPARA_edit( ushort Kikai_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar			edit_cnt = 0;		// 編集行数ﾜｰｸ
	ushort			lk_no;				// ﾛｯｸ装置No.
	uchar			lok_syu;			// 「ﾛｯｸ装置種別」	設定ﾃﾞｰﾀ取得ﾜｰｸ
	uchar			ryo_syu;			// 「料金種別」		設定ﾃﾞｰﾀ取得ﾜｰｸ
	ulong			pk_posi;			// 「区画、番号」	設定ﾃﾞｰﾀ取得ﾜｰｸ
	uchar			if_oya;				// 「親IF盤No.」	設定ﾃﾞｰﾀ取得ﾜｰｸ
	uchar			lok_no;				// 「装置連番」		設定ﾃﾞｰﾀ取得ﾜｰｸ
	ushort			len;				// 文字ﾃﾞｰﾀﾚﾝｸﾞｽ
	static short	disp_adjuster;		// 表示用調整値
	uchar			work=0;				// 作業用領域
	ulong			param_set = 2L;

	if( p_proc_data->Prn_no == 0 ){

		// 編集開始（初回編集）の場合

		/*------	＜表題＞編集	------*/
		edit_cnt += Prn_edit_Title	(									// 表題（"車室パラメータ"）印字ﾃﾞｰﾀ編集
										"車室パラメータ",
										FONT_K_YOKOBAI,
										pri_kind
									);

		/*------	１行空白	------*/
		edit_cnt += Prn_edit_space( pri_kind );

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, Kikai_no );								// 機械NO.編集
		PCMD_LEFT( pri_kind );											// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );							// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );							// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );									// 印字ﾃﾞｰﾀ登録

		edit_cnt++;

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );									// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );										// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnFontSize( FONT_A_NML, pri_kind );							// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );							// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );									// 時刻　印字ﾃﾞｰﾀ登録

		edit_cnt++;

		/*------	１行空白	------*/
		edit_cnt += Prn_edit_space( pri_kind );

		p_proc_data->Prn_no = 1;										// 編集対象とするﾛｯｸ装置No.ｾｯﾄ
		disp_adjuster = 0;
	}

	lk_no = p_proc_data->Prn_no;										// 編集対象とするﾛｯｸ装置No.取得

	for( ; lk_no <= LOCK_MAX ; lk_no++ ){								// ﾛｯｸ装置No.毎編集処理ﾙｰﾌﾟ
		WACDOG;															// 装置ループの際はｳｫｯﾁﾄﾞｯｸﾘｾｯﾄ実行

		lok_syu =LockInfo[lk_no-1].lok_syu;								// 「ﾛｯｸ装置接続種別」設定ﾃﾞｰﾀ取得

		if( lok_syu ){													// 接続有？

			work = GetCarInfoParam();
			if( lk_no < (INT_CAR_START_INDEX+1) ){
				if(!( work & 0x02 )){
					continue;
				}
			}else if( lk_no < (BIKE_START_INDEX+1) ){
				if(!( work & 0x04 )){
					continue;
				}
			}else{
				if(!( work & 0x01 )){
					continue;
				}
			}
			if( lk_no < (BIKE_START_INDEX+1) && !disp_adjuster ){
				//駐車TOP
				PCMD_LEFT( pri_kind );								// [位置揃え(左揃え)]
				PrnStr( Bunrui_Prn[0], pri_kind );					// 分類（"駐車位置ﾊﾟﾗﾒｰﾀ"）印字ﾃﾞｰﾀ編集
				edit_cnt++;
				if(( work & 0x06 ) == 0x04 ){						// 内蔵フラップ設定のみ
					disp_adjuster = INT_CAR_START_INDEX+1;			// 装置Noの調整値に内蔵の開始インデックスをセット
				}else{												// IF盤のみまたは併用設定時
					disp_adjuster = CAR_START_INDEX+1;				// 装置Noの調整値にIF盤の開始インデックスをセット
				}
			}
			else if (lk_no >= (BIKE_START_INDEX + 1) ) {
				if( disp_adjuster != (BIKE_START_INDEX+1) ){		// 駐輪として初回印字？
				// 以下の行のインデントを修正する
				//駐輪TOP
					/*------	２行空白	------*/
					edit_cnt += Prn_edit_space( pri_kind );
					edit_cnt += Prn_edit_space( pri_kind );
				
					PCMD_LEFT( pri_kind );								// [位置揃え(左揃え)]
					PrnStr( Bunrui_Prn[1], pri_kind );					// 分類（"駐輪位置ﾊﾟﾗﾒｰﾀ"）印字ﾃﾞｰﾀ編集
					edit_cnt++;
					disp_adjuster = BIKE_START_INDEX+1;
				}
			}

			//	編集対象とするﾛｯｸ装置No.が駐車位置として設定されている場合

			ryo_syu	= LockInfo[lk_no-1].ryo_syu;						// 「料金種別」		設定ﾃﾞｰﾀ取得
			pk_posi	= Prn_pkposi_make( lk_no );							// 「区画、番号」	設定ﾃﾞｰﾀ取得
			if_oya	= LockInfo[lk_no-1].if_oya;							// 「親IF盤No.」	設定ﾃﾞｰﾀ取得
			lok_no	= LockInfo[lk_no-1].lok_no;							// 「装置連番」		設定ﾃﾞｰﾀ取得

			/*------	＜ﾛｯｸ装置No.＞編集	------*/
			
			sprintf( cEditwk1,"＜装置No.%03d＞", (lk_no - (disp_adjuster-1)));
																		// cEditwk1←"＜装置No.XXX＞"印字ﾃﾞｰﾀ（XXX=ﾛｯｸ装置No.）
			edit_cnt += Prn_edit_Title	(								// 印字ﾃﾞｰﾀ編集
											cEditwk1,
											FONT_K_NML,
											pri_kind
										);

			/*------	＜装置種別＆料金種別＞編集	------*/
			PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
			PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
			PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定

			memset( cEditwk1,0,sizeof(cEditwk1) );						// cEditwk1：０ｸﾘｱ

			sprintf( cEditwk1,"装置種別 :%02d", lok_syu );				// cEditwk1←「装置種別」印字ﾃﾞｰﾀ

			len = (ushort)strlen( cEditwk1 );							// 「装置種別」印字ﾃﾞｰﾀ文字列ﾚﾝｸﾞｽ検索
			if( len < 20 ){
				for( ; len < 20 ; len++ ){								// ｽﾍﾟｰｽ調整（２０ｶﾗﾑまでｽﾍﾟｰｽで埋める）
					cEditwk1[len] = ' ';
				}
			}
			if( ( rangechk(1, 12, ryo_syu) ) && 
				(  0 != prm_get( COM_PRM,S_SHA,(short)(1+6*(ryo_syu-1)),2,5 ) ) ){
				sprintf( &cEditwk1[20],"料金種別:%02d", ryo_syu );			// cEditwk1←「料金種別」印字ﾃﾞｰﾀを追加編集
			}else{
				sprintf( &cEditwk1[20],"料金%s",Charge_Base[60] );			// cEditwk1←「料金種別」印字ﾃﾞｰﾀを追加編集
				Cal_Parameter_Flg = 1;
			}

			PrnStr( cEditwk1, pri_kind );								// 印字ﾃﾞｰﾀ登録

			edit_cnt++;

			/*------	＜区画-番号＆IF盤No.＞編集	------*/
			memset( cEditwk1,0,sizeof(cEditwk1) );						// cEditwk1：０ｸﾘｱ

			sprintf( cEditwk1,"区画-番号:" );							// cEditwk1←"区画-番号:"
			len = (ushort)strlen( cEditwk1 );							// 印字ﾃﾞｰﾀ文字列ﾚﾝｸﾞｽ検索
			Prn_edit_pkposi( &cEditwk1[len], pk_posi, 0 );				// cEditwk1←駐車位置印字ﾃﾞｰﾀを追加編集

			len = (ushort)strlen( cEditwk1 );							// 印字ﾃﾞｰﾀ文字列ﾚﾝｸﾞｽ検索
			if( len < 20 ){
				for( ; len < 20 ; len++ ){								// ｽﾍﾟｰｽ調整（２０ｶﾗﾑまでｽﾍﾟｰｽで埋める）
					cEditwk1[len] = ' ';
				}
			}

			if(lk_no>INT_CAR_START_INDEX && lk_no<=BIKE_START_INDEX) {
				// サニカフラップは端末内通番を印字しない
				sprintf( &cEditwk1[20],"%sNo. :%02d","Flap",if_oya );// cEditwk1←「FlapNo.」印字ﾃﾞｰﾀを追加編集
			}
			else {
				sprintf( &cEditwk1[20],"%sNo. :%02d-%02d","IF盤",if_oya,lok_no );// cEditwk1←「IF盤No.」印字ﾃﾞｰﾀを追加編集
			}

			PrnStr( cEditwk1, pri_kind );								// 印字ﾃﾞｰﾀ登録
			/*------	＜接点No.＞編集	------*/
			if( LK_TYPE_CONTACT_FLAP == lok_syu ){						// 装置種別が「接点フラップ(16)」の場合
				memset( cEditwk1,0,sizeof(cEditwk1) );						// cEditwk1：０ｸﾘｱ

				len = 0;													// 左側は表示しない
				if( len < 20 ){
					for( ; len < 20 ; len++ ){								// ｽﾍﾟｰｽ調整（２０ｶﾗﾑまでｽﾍﾟｰｽで埋める）
						cEditwk1[len] = ' ';
					}
				}

				sprintf( &cEditwk1[20],"接点No. :%02d-%02d",( lok_no/100 + 1 ),lok_no%100 );// cEditwk1←「接点No.」印字ﾃﾞｰﾀを追加編集

				PrnStr( cEditwk1, pri_kind );								// 印字ﾃﾞｰﾀ登録
			}

			edit_cnt++;

		}
		if( (edit_cnt+3) > EDIT_GYOU_MAX ){								// 編集行数ﾁｪｯｸ

			// 次の駐車位置ﾃﾞｰﾀ編集（３行）が不可の場合

			lk_no++;													// 次処理で検索するﾛｯｸ装置No.をｾｯﾄ
			break;														// ﾃﾞｰﾀ編集処理ﾙｰﾌﾟを抜ける
		}
	}																	// ﾛｯｸ装置No.毎編集処理ﾙｰﾌﾟＥＮＤ

	if( lk_no > LOCK_MAX ){												// 全駐車位置（全ﾛｯｸ装置No.）編集終了？

		if(Cal_Parameter_Flg ==1){											// 料金種別設定間違いあり
			if( (edit_cnt+5) > EDIT_GYOU_MAX ){								// 編集行数ﾁｪｯｸ（現在の行数＋エラー印字5行）
				// 次の駐車位置ﾃﾞｰﾀ編集（３行）が不可の場合
				p_proc_data->Prn_no = lk_no;								// 次に編集するﾛｯｸ装置No.をｾｰﾌﾞ
			}else{

				Prn_edit_space( pri_kind );
				Prn_edit_space( pri_kind );
				PrnFontSize( FONT_K_4BAI, pri_kind );						// ﾌｫﾝﾄ指定（漢字4倍角）
				PrnStr( " ！！！！！！！！", pri_kind );
				PrnStr( "　設定が違います", pri_kind );
				PrnStr( " ！！！！！！！！", pri_kind );
				PrnFontSize( FONT_K_NML, pri_kind );	// 漢字ﾌｫﾝﾄ指定（通常）
				PrnFontSize( FONT_A_NML, pri_kind );	// ﾌｫﾝﾄＡ指定（通常）
				// 全ての駐車位置（ﾛｯｸ装置No.）について編集終了した場合
				p_proc_data->Final	= ON;										// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
				err_chk2( ERRMDL_MAIN, ERR_MAIN_CALPARAMETER_NG, 2, 2, 0, &param_set); 	/* ｴﾗｰﾛｸﾞ登録（発生＆解除）*/
			}
		}else{
			// 全ての駐車位置（ﾛｯｸ装置No.）について編集終了した場合
			p_proc_data->Final	= ON;										// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
			err_chk2( ERRMDL_MAIN, ERR_MAIN_CALPARAMETER_OK, 2, 2, 0, &param_set); 	/* ｴﾗｰﾛｸﾞ登録（発生＆解除）*/
		}
	}
	else{
		// 未編集の駐車位置（ﾛｯｸ装置No.）がある場合
		p_proc_data->Prn_no = lk_no;									// 次に編集するﾛｯｸ装置No.をｾｰﾌﾞ
	}
}

/*[]-----------------------------------------------------------------------------------[]*/
/*|		ﾛｯｸ装置設定印字ﾃﾞｰﾀ編集処理														|*/
/*[]-----------------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	LOCKSETTEI_edit( Kikai_no, pri_kind, *p_proc_data )				|*/
/*|																						|*/
/*|	PARAMETER		:	ushort	Kikai_no	=	機械Ｎｏ．								|*/
/*|																						|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ								|*/
/*|													R_PRI  : ﾚｼｰﾄ						|*/
/*|													J_PRI  : ｼﾞｬｰﾅﾙ						|*/
/*|																						|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ				|*/
/*|																						|*/
/*|	RETURN VALUE	:	void															|*/
/*|																						|*/
/*[]-----------------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi																|*/
/*|	Date	:	2005-05-30																|*/
/*|	Update	:																			|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----------------[]*/
void	LOCKSETTEI_edit( ushort Kikai_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar			edit_cnt = 0;		// 編集行数ﾜｰｸ
	ushort			lk_maker;			// ﾛｯｸ装置種別No.（ﾒｰｶｰNo.）

	if( p_proc_data->Prn_no == 0 ){

		// 編集開始（初回編集）の場合

		/*------	＜表題＞編集	------*/
		edit_cnt += Prn_edit_Title	(								// 表題（"ロック装置設定"）印字ﾃﾞｰﾀ編集
										"ロック装置設定",
										FONT_K_YOKOBAI,
										pri_kind
									);

		/*------	１行空白	------*/
		edit_cnt += Prn_edit_space( pri_kind );

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, Kikai_no );							// 機械NO.編集
		PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );								// 印字ﾃﾞｰﾀ登録

		edit_cnt++;

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );								// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );									// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );								// 時刻　印字ﾃﾞｰﾀ登録

		edit_cnt++;

		/*------	１行空白	------*/
		edit_cnt += Prn_edit_space( pri_kind );

		p_proc_data->Prn_no = 1;									// 編集対象とするﾛｯｸ装置種別No.ｾｯﾄ
	}

	lk_maker = p_proc_data->Prn_no;									// 編集対象とするﾛｯｸ装置種別No.取得

	for( ; lk_maker <= LOCK_MAKER_CNT ; lk_maker++ ){				// ﾛｯｸ装置種別No.毎編集処理ﾙｰﾌﾟ

		/*------	＜装置種別No.＞編集	------*/
		sprintf( cEditwk1,"＜装置種別No.%02d＞", lk_maker );		// cEditwk1←"＜装置種別No.XX＞"印字ﾃﾞｰﾀ（XX=ﾛｯｸ装置種別No.）
		edit_cnt += Prn_edit_Title	(								// 印字ﾃﾞｰﾀ編集
										cEditwk1,
										FONT_K_NML,
										pri_kind
									);

		/*------	＜入庫車両検知タイマー＞編集	------*/
		PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定

		sprintf(													// cEditwk1←「入庫車両検知タイマー」印字ﾃﾞｰﾀ
					cEditwk1,
					"入庫車両検知タイマー   --->     %02d",
					LockMaker[lk_maker-1].in_tm
				);

		PrnStr( cEditwk1, pri_kind );								// 印字ﾃﾞｰﾀ登録

		edit_cnt++;

		/*------	＜出庫車両検知タイマー＞編集	------*/
		sprintf(													// cEditwk1←「出庫車両検知タイマー」印字ﾃﾞｰﾀ
					cEditwk1,
					"出庫車両検知タイマー   --->     %02d",
					LockMaker[lk_maker-1].ot_tm
				);

		PrnStr( cEditwk1, pri_kind );								// 印字ﾃﾞｰﾀ登録

		edit_cnt++;

		/*------	＜ﾛｯｸ装置ﾘﾄﾗｲ回数＞編集	------*/
		sprintf(													// cEditwk1←「ロック装置リトライ回数」印字ﾃﾞｰﾀ
					cEditwk1,
					"ロック装置リトライ回数 --->     %02d",
					LockMaker[lk_maker-1].r_cnt
				);

		PrnStr( cEditwk1, pri_kind );								// 印字ﾃﾞｰﾀ登録

		edit_cnt++;

		/*------	＜ﾛｯｸ装置ﾘﾄﾗｲ間隔＞編集	------*/
		sprintf(													// cEditwk1←「ロック装置リトライ間隔」印字ﾃﾞｰﾀ
					cEditwk1,
					"ロック装置リトライ間隔 --->    %03d",
					LockMaker[lk_maker-1].r_tim
				);

		PrnStr( cEditwk1, pri_kind );								// 印字ﾃﾞｰﾀ登録

		edit_cnt++;

		/*------	＜開動作信号出力時間＞編集	------*/
		sprintf(													// cEditwk1←「開動作信号出力時間」印字ﾃﾞｰﾀ
					cEditwk1,
					"開動作信号出力時間     --->     %02d",
					LockMaker[lk_maker-1].open_tm
				);

		PrnStr( cEditwk1, pri_kind );								// 印字ﾃﾞｰﾀ登録

		edit_cnt++;

		/*------	＜閉動作信号出力時間＞編集	------*/
		sprintf(													// cEditwk1←「閉動作信号出力時間」印字ﾃﾞｰﾀ
					cEditwk1,
					"閉動作信号出力時間     --->     %02d",
					LockMaker[lk_maker-1].clse_tm
				);

		PrnStr( cEditwk1, pri_kind );								// 印字ﾃﾞｰﾀ登録

		edit_cnt++;


		if( (edit_cnt+7) > EDIT_GYOU_MAX ){							// 編集行数ﾁｪｯｸ

			// 次の装置種別ﾃﾞｰﾀ編集（７行）が不可の場合

			lk_maker++;												// 次処理で検索するﾛｯｸ装置種別No.をｾｯﾄ
			break;													// ﾃﾞｰﾀ編集処理ﾙｰﾌﾟを抜ける
		}
	}

	if( lk_maker > LOCK_MAKER_CNT ){								// 全ﾛｯｸ装置種別No.編集終了？

		// 全てのﾛｯｸ装置種別No.について編集終了した場合
		p_proc_data->Final	= ON;									// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
	else{
		// 未編集のﾛｯｸ装置種別No.がある場合
		p_proc_data->Prn_no = lk_maker;								// 次に編集するﾛｯｸ装置No.をｾｰﾌﾞ
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		車室情報（現在）印字ﾃﾞｰﾀ編集処理									|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	PKJOUNOW_edit( Kikai_no, pri_kind, *p_proc_data )	|*/
/*|																			|*/
/*|	PARAMETER		:	ushort	Kikai_no	=	機械Ｎｏ．					|*/
/*|																			|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|													R_PRI  : ﾚｼｰﾄ			|*/
/*|													J_PRI  : ｼﾞｬｰﾅﾙ			|*/
/*|																			|*/
/*|						uchar	prn_menu	=	駐車のみ/空車のみ/全て 印字 |*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-05-11													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	PKJOUNOW_edit( ushort Kikai_no, uchar pri_kind, uchar prn_menu, PRN_PROC_DATA *p_proc_data )
{
	PKJOU_edit_proc( 1, Kikai_no, pri_kind, prn_menu, p_proc_data );	// 車室情報印字ﾃﾞｰﾀ編集処理
}

/*[]-----------------------------------------------------------------------[]*/
/*|		車室情報（退避）印字ﾃﾞｰﾀ編集処理									|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	PKJOUSAV_edit( Kikai_no, pri_kind, *p_proc_data )	|*/
/*|																			|*/
/*|	PARAMETER		:	ushort	Kikai_no	=	機械Ｎｏ．					|*/
/*|																			|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|													R_PRI  : ﾚｼｰﾄ			|*/
/*|													J_PRI  : ｼﾞｬｰﾅﾙ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-05-11													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	PKJOUSAV_edit( ushort Kikai_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	PKJOU_edit_proc( 2, Kikai_no, pri_kind, 2, p_proc_data );	// 車室情報印字ﾃﾞｰﾀ編集処理
}

/*[]-----------------------------------------------------------------------------------[]*/
/*|		車室情報印字ﾃﾞｰﾀ編集処理														|*/
/*[]-----------------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	PKJOU_edit_proc( Edit_no, Kikai_no, pri_kind, *p_proc_data )	|*/
/*|																						|*/
/*|	PARAMETER		:	uchar	Edit_no		=	編集種別								|*/
/*|													１：現在情報						|*/
/*|													２：退避情報						|*/
/*|						ushort	Kikai_no	=	機械Ｎｏ．								|*/
/*|																						|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ								|*/
/*|													R_PRI  : ﾚｼｰﾄ						|*/
/*|													J_PRI  : ｼﾞｬｰﾅﾙ						|*/
/*|						uchar	prn_menu	=	駐車のみ/空車のみ/全て 印字				|*/
/*|																						|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ				|*/
/*|																						|*/
/*|	RETURN VALUE	:	void															|*/
/*|																						|*/
/*[]-----------------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi																|*/
/*|	Date	:	2005-05-11																|*/
/*|	Update	:																			|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----------------[]*/
void	PKJOU_edit_proc( uchar Edit_no, ushort Kikai_no, uchar pri_kind, uchar prn_menu, PRN_PROC_DATA *p_proc_data )
{
	uchar			edit_cnt = 0;		// 編集行数ﾜｰｸ
	ushort			lk_no;				// ﾛｯｸ装置No.
	uchar			lok_syu;			// 「ﾛｯｸ装置種別」	設定ﾃﾞｰﾀ取得ﾜｰｸ
	ulong			pk_posi;			// 駐車位置ﾃﾞｰﾀ
	flp_com			*pk_info;			// 駐車位置情報ﾎﾟｲﾝﾀｰ
	ushort			mode;				// 駐車位置情報取得ﾜｰｸ
	uchar			car_sts;			// 車両有無状態
	uchar			lk_sts;				// ﾛｯｸ装置状態
	date_time_rec	date;				// 日時ﾃﾞｰﾀﾜｰｸ
	ushort			max;
	const char		*str_wk1, *str_wk2;
	uchar			pri_able;
	uchar			car_kind;

	pk_info = 0;
	if( p_proc_data->Prn_no == 0 ){

		// 編集開始（初回編集）の場合

		/*------	＜表題＞編集	------*/
		switch( Edit_no ){											// 編集種別？

			case	1:												// 現在情報
				edit_cnt += Prn_edit_Title	(						// 表題（"車室情報"）印字ﾃﾞｰﾀ編集
												(gCurSrtPara == MNT_BIK) ? "車室情報（駐輪）" : "車室情報（駐車）",
												FONT_K_YOKOBAI,
												pri_kind
											);
				break;

			case	2:												// 退避情報
				edit_cnt += Prn_edit_Title	(						// 表題（"車室情報(退避)"）印字ﾃﾞｰﾀ編集
												"車 室 情 報(退避)",
												FONT_K_YOKOBAI,
												pri_kind
											);
				break;
		}
		/*------	１行空白	------*/
		edit_cnt += Prn_edit_space( pri_kind );

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, Kikai_no );							// 機械NO.編集
		PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );								// 印字ﾃﾞｰﾀ登録

		edit_cnt++;

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );								// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );									// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );								// 時刻　印字ﾃﾞｰﾀ登録

		edit_cnt++;

		/*------	１行空白	------*/
		edit_cnt += Prn_edit_space( pri_kind );

		// 編集対象とするﾛｯｸ装置No.ｾｯﾄ
		switch( gCurSrtPara ){
			case	MNT_CAR:
			case	MNT_INT_CAR:
				car_kind = GetCarInfoParam();
				switch( car_kind&0x06 ){
					case	0x02:
					default:
						p_proc_data->Prn_no = CAR_START_INDEX + 1;
						break;
					case	0x04:
						p_proc_data->Prn_no = INT_CAR_START_INDEX + 1;
						break;
					case	0x06:
						p_proc_data->Prn_no = CAR_START_INDEX + 1;
						break;
				}
				break;
			case	MNT_BIK:
				p_proc_data->Prn_no = BIKE_START_INDEX + 1;
				break;
			default:
				p_proc_data->Prn_no = INT_CAR_START_INDEX + 1;
				break;
		}

		// 駐車/空車 印字
		if (prn_menu != 2) {
			// 駐車、空車に関わらず全て印字ならば以下の1行は印字しない
			edit_cnt += Prn_edit_Title	(
							(prn_menu == 0) ? "-----------   駐　車   -----------" : "-----------   空　車   -----------",
							FONT_K_NML,
							pri_kind
						);
		}

	}
	switch( gCurSrtPara ){
		case	MNT_CAR:
		case	MNT_INT_CAR:
			car_kind = GetCarInfoParam();
			switch( car_kind&0x06 ){
				case	0x02:
				default:
					max = (CAR_START_INDEX + 1 + CAR_LOCK_MAX);
					break;
				case	0x04:
					max = (INT_CAR_START_INDEX + 1 + INT_CAR_LOCK_MAX);
					break;
				
				case	0x06:
					max = (CAR_START_INDEX + 1 + CAR_LOCK_MAX + INT_CAR_LOCK_MAX);
					break;
			}
			break;
		case	MNT_BIK:
			max = BIKE_START_INDEX + 1 + BIKE_LOCK_MAX;
			break;
		default:
			max = (INT_CAR_START_INDEX + 1 + INT_CAR_LOCK_MAX);
			break;
	}

	lk_no = p_proc_data->Prn_no;									// 編集対象とするﾛｯｸ装置No.取得

	for( ; lk_no < max ; lk_no++ ){									// ﾛｯｸ装置No.毎編集処理ﾙｰﾌﾟ

		WACDOG;														// 装置ループの際はｳｫｯﾁﾄﾞｯｸﾘｾｯﾄ実行
		lok_syu =LockInfo[lk_no-1].lok_syu;							// 「ﾛｯｸ装置接続種別」設定ﾃﾞｰﾀ取得
		// 印刷条件判定
		switch (prn_menu) {
		case 0:			// 駐車のみ印字
			if (FLAPDT.flp_data[lk_no-1].nstat.bits.b00 == 0) {	//車両なし
				pri_able = 0;
			} else {
				pri_able = 1;
			}
			break;
		case 1:			// 空車のみ印字
			if (FLAPDT.flp_data[lk_no-1].nstat.bits.b00 == 0) {	//車両なし
				pri_able = 1;
			} else {
				pri_able = 0;
			}
			break;
		case 2:			// 全て印字
		default:
			pri_able = 1;
			break;
		}

		if( lok_syu && pri_able ){									// 接続有？かつ印字OK？

			//	編集対象とするﾛｯｸ装置No.が駐車位置として設定されている場合

			pk_posi = Prn_pkposi_make( lk_no );						// 駐車位置（区画＆番号）ﾃﾞｰﾀ取得

																	// 編集対象の車室情報ﾎﾟｲﾝﾀｰ取得
			switch( Edit_no ){										// 編集種別？

				case	1:											// 現在情報
					pk_info = &FLAPDT.flp_data[lk_no-1];
					break;

				case	2:											// 退避情報
					pk_info = &FLAPDT.flp_data[lk_no-1];			// ＜再検討＞　退避情報のエリアが確定したら変更する
					break;
			}

			/*------	＜駐車位置（ﾛｯｸ装置No.）＞編集	------*/
			sprintf( cEditwk1,"＜装置No.%03d＞", (lk_no - DispAdjuster) );	// cEditwk1←"＜装置No.xxx＞"印字ﾃﾞｰﾀ（xxx=ﾛｯｸ装置No.）
			edit_cnt += Prn_edit_Title	(							// 印字ﾃﾞｰﾀ編集
											cEditwk1,
											FONT_K_NML,
											pri_kind
										);

			/*------	＜駐車位置番号＞編集	------*/
			Prn_edit_pkposi( cEditwk1, pk_posi, 0 );				// cEditwk1←駐車位置印字ﾃﾞｰﾀ
			Prn_edit_sya_syu( cEditwk2 , lk_no , 0, 0);				// cEditwk2←車室番号＆車種ﾃﾞｰﾀ

			Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,									// 文字列１：車室番号＆車種ﾃﾞｰﾀ
						cEditwk1,									// 文字列２：駐車位置印字ﾃﾞｰﾀ
						pri_kind									// 印字先ﾌﾟﾘﾝﾀ
					);

			edit_cnt++;

			/*------	＜駐車位置情報＞編集	------*/
			mode = pk_info->mode;									// 駐車位置情報取得

			switch( mode ){											// ﾌﾗｯﾌﾟ装置／ﾛｯｸ装置の状態？

				case FLAP_CTRL_MODE1:								// 状態＝０
					str_wk1 = (gCurSrtPara != MNT_BIK) ? PkFlpMode_Prn[0] : PkJouMode_Prn[0];
					break;
				case FLAP_CTRL_MODE2:								// 状態＝１
					if( SvsTimChk( lk_no ) == OK ){
						str_wk1 = (gCurSrtPara != MNT_BIK) ? PkFlpMode_Prn[1] : PkJouMode_Prn[1];	// ｻｰﾋﾞｽﾀｲﾑ中
					}
					else{
						str_wk1 = (gCurSrtPara != MNT_BIK) ? PkFlpMode_Prn[2] : PkJouMode_Prn[2];	// ｻｰﾋﾞｽﾀｲﾑ終了
					}
					break;
				case FLAP_CTRL_MODE3:								// 状態＝２
					if( SvsTimChk( lk_no ) == OK ){
						str_wk1 = (gCurSrtPara != MNT_BIK) ? PkFlpMode_Prn[3] : PkJouMode_Prn[3];	// ｻｰﾋﾞｽﾀｲﾑ中
					}
					else{
						str_wk1 = (gCurSrtPara != MNT_BIK) ? PkFlpMode_Prn[4] : PkJouMode_Prn[4];	// ｻｰﾋﾞｽﾀｲﾑ終了
					}
					break;
				case FLAP_CTRL_MODE4:								// 状態＝３
					if( SvsTimChk( lk_no ) == OK ){
						str_wk1 = (gCurSrtPara != MNT_BIK) ? PkFlpMode_Prn[5] : PkJouMode_Prn[5];	// ｻｰﾋﾞｽﾀｲﾑ中
					}
					else{
						str_wk1 = (gCurSrtPara != MNT_BIK) ? PkFlpMode_Prn[6] : PkJouMode_Prn[6];	// ｻｰﾋﾞｽﾀｲﾑ終了
					}
					break;
				case FLAP_CTRL_MODE5:								// 状態＝４
					str_wk1 = (gCurSrtPara != MNT_BIK) ? PkFlpMode_Prn[7] : PkJouMode_Prn[7];
					break;
				case FLAP_CTRL_MODE6:								// 状態＝５
					str_wk1 = (gCurSrtPara != MNT_BIK) ? PkFlpMode_Prn[8] : PkJouMode_Prn[8];
					break;
				default:											// その他
					str_wk1 = (gCurSrtPara != MNT_BIK) ? PkFlpMode_Prn[9] : PkJouMode_Prn[9];
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
					break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			}
			Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
						"車室情報",									// 文字列１："車室情報"
						str_wk1,									// 文字列２：駐車位置情報印字ﾃﾞｰﾀ
						pri_kind									// 印字先ﾌﾟﾘﾝﾀ
					);

			edit_cnt++;

			/*------	＜ロック装置情報＞編集	------*/
																	// 車両有無情報取得
			if( pk_info->nstat.bits.b00 == 0 ){
				car_sts = 0;										// 車なし
			}
			else{
				car_sts = 1;										// 車あり
			}
																	// ﾛｯｸ装置状態取得
			if( pk_info->nstat.bits.b05 == 1 ){
				lk_sts = 2;											// 開ﾛｯｸ状態
			}
			else if( pk_info->nstat.bits.b04 == 1 ){
				lk_sts = 3;											// 閉ﾛｯｸ状態
			}
			else if( pk_info->nstat.bits.b01 == 1 ){
				lk_sts = 1;											// 閉状態
			}
			else{
				lk_sts = 0;											// 開状態
			}

			if (gCurSrtPara != MNT_BIK) {
				str_wk1 = PkFlpCar_Prn[car_sts];
				str_wk2 = PkFlpLok_Prn[lk_sts];
			}
			else {
				str_wk1 = PkJouCar_Prn[car_sts];
				str_wk2 = PkJouLok_Prn[lk_sts];
			}
			Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
						str_wk1,									// 文字列１：車有無印字ﾃﾞｰﾀ
						str_wk2,									// 文字列２：ﾛｯｸ装置状態印字ﾃﾞｰﾀ
						pri_kind									// 印字先ﾌﾟﾘﾝﾀ
					);

			edit_cnt++;

			/*------	＜入庫時刻＞編集	------*/
			date.Year	= pk_info->year;							// 入庫時刻ﾃﾞｰﾀｾｯﾄ
			date.Mon	= pk_info->mont;
			date.Day	= pk_info->date;
			date.Hour	= pk_info->hour;
			date.Min	= pk_info->minu;

			Prn_edit_Date( cEditwk1, &date );						// cEditwk1←入庫時刻印字ﾃﾞｰﾀ

			Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
						"入庫時刻",									// 文字列１："入庫時刻"
						cEditwk1,									// 文字列２：入庫時刻印字ﾃﾞｰﾀ
						pri_kind									// 印字先ﾌﾟﾘﾝﾀ
					);

			edit_cnt++;

		}
		if( (edit_cnt+5) > EDIT_GYOU_MAX ){							// 編集行数ﾁｪｯｸ

			// 次の駐車位置ﾃﾞｰﾀ編集（５行）が不可の場合

			lk_no++;												// 次処理で検索するﾛｯｸ装置No.をｾｯﾄ
			break;													// ﾃﾞｰﾀ編集処理ﾙｰﾌﾟを抜ける
		}
	}																// ﾛｯｸ装置No.毎編集処理ﾙｰﾌﾟＥＮＤ

	if( lk_no >= max ){												// 全駐車位置（全ﾛｯｸ装置No.）編集終了？

		// 全ての駐車位置（ﾛｯｸ装置No.）について編集終了した場合
		p_proc_data->Final	= ON;									// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
	else{
		// 未編集の駐車位置（ﾛｯｸ装置No.）がある場合
		p_proc_data->Prn_no = lk_no;								// 次に編集するﾛｯｸ装置No.をｾｰﾌﾞ
	}
}

/*[]-----------------------------------------------------------------------------------------------[]*/
/*|		定期有効／無効印字ﾃﾞｰﾀ編集処理																|*/
/*[]-----------------------------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	TEIKID1_edit( Kikai_no, Pkno_syu, Req_syu, pri_kind, *p_proc_data )			|*/
/*|																									|*/
/*|	PARAMETER		:	ushort	Kikai_no	=	機械Ｎｏ．											|*/
/*|																									|*/
/*|						ushort	Kakari_no	=	係員Ｎｏ． (NT4700 MOTOHASHI 05/09/28)				|*/
/*|																									|*/
/*|						uchar	Pkno_syu	=	駐車場Ｎｏ．種別									|*/
/*|																									|*/
/*|						uchar	Req_syu		=	要求種別											|*/
/*|													０：全指定										|*/
/*|													１：有効のみ									|*/
/*|													２：無効のみ									|*/
/*|																									|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ											|*/
/*|													R_PRI  : ﾚｼｰﾄ									|*/
/*|													J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																									|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ							|*/
/*|																									|*/
/*|	RETURN VALUE	:	void																		|*/
/*|																									|*/
/*[]-----------------------------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi																			|*/
/*|	Date	:	2005-05-09																			|*/
/*|	Update	:																						|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----------------------------[]*/
void	TEIKID1_edit( ushort Kikai_no, ushort Kakari_no, uchar Pkno_syu, uchar Req_syu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_flg	= YES;		// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）
	uchar	edit_gyou	= 0;		// 編集済み行数
	uchar	edit_cnt	= 0;		// 編集行数ﾜｰｸ
	uchar	next_edit_max;			// 次編集印字内容の最大編集行数
	ushort	kou_no;					// 印字項目番号


	if( p_proc_data->Prn_no == 0 ){

		// 編集開始（初回編集）の場合

		/*------	印字項目ﾒﾆｭｰ作成	------*/
		p_proc_data->Prn_no_wk[0] = 1;												// 印字項目１番目　←　表題

		switch( Req_syu ){	// 要求種別？

			case	0:		// 要求種別＝全指定
				p_proc_data->Prn_no_wk[1] = 2;										// 印字項目２番目　←　有効
				p_proc_data->Prn_no_wk[2] = 3;										// 印字項目３番目　←　無効
				p_proc_data->Prn_no_wk[3] = 0;
				break;

			case	1:		// 要求種別＝有効のみ
				p_proc_data->Prn_no_wk[1] = 2;										// 印字項目２番目　←　有効
				p_proc_data->Prn_no_wk[2] = 0;
				break;

			case	2:		// 要求種別＝無効のみ
				p_proc_data->Prn_no_wk[1] = 3;										// 印字項目２番目　←　無効
				p_proc_data->Prn_no_wk[2] = 0;
				break;
		}
		p_proc_data->Prn_no = 1;													// 印字項目ﾒﾆｭｰ番号ｾｯﾄ
	}

	for( ; edit_flg ; ){															// 編集処理ﾙｰﾌﾟ

		edit_cnt = 0;																// 編集行数ﾘｾｯﾄ
		kou_no = p_proc_data->Prn_no_wk[(p_proc_data->Prn_no)-1];					// 印字項目番号取得

		switch( kou_no ){	// 編集する項目番号により各処理へ分岐

			case	1:		// ＜表題＞印字
				edit_cnt = TEIKID_edit_hyoudai( 1, Kikai_no, Kakari_no, Pkno_syu, pri_kind );
				break;

			case	2:		// ＜有効＞印字
				edit_cnt = TEIKID_edit_sts( 1, Pkno_syu, pri_kind, p_proc_data );
				break;

			case	3:		// ＜無効＞印字
				edit_cnt = TEIKID_edit_sts( 2, Pkno_syu, pri_kind, p_proc_data );
				break;

			default:		// その他（項目番号ｴﾗｰ）
				p_proc_data->Prn_no_data1 = 0;
				p_proc_data->Prn_no_data2 = 0;
				break;
		}
		if( (p_proc_data->Prn_no_data1 == 0) && (p_proc_data->Prn_no_data2 == 0) ){	// １項目の編集終了？

			// １項目の編集が終了した場合
			p_proc_data->Prn_no++;													// 項目ﾒﾆｭｰ番号更新（＋１）
			kou_no = p_proc_data->Prn_no_wk[(p_proc_data->Prn_no)-1];				// 次に編集する印字項目番号取得

			if( kou_no == 0 ){														// 印字項目ﾒﾆｭｰ終了？
				p_proc_data->Final	= ON;											// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
				break;																// 編集処理ﾙｰﾌﾟを抜ける
			}
			edit_gyou = (uchar)(edit_gyou + edit_cnt);								// 編集済み行数更新
			next_edit_max = teikid1_edit_tbl[kou_no];								// 次編集項目の最大編集行数ｾｯﾄ

			if( (edit_gyou + next_edit_max) > EDIT_GYOU_MAX ){						// 次項目編集可能？（１ﾌﾞﾛｯｸ最大編集行数ﾁｪｯｸ）
				edit_flg = NO;														// 最大編集行数を超えてしまう場合　→　編集処理ﾙｰﾌﾟを抜ける
			}
		}
		else{
			// １項目の編集が終了していない場合
			edit_flg = NO;															// 編集処理ﾙｰﾌﾟを抜ける
		}
	}
}

/*[]-----------------------------------------------------------------------------------------------[]*/
/*|		定期入庫／出庫印字ﾃﾞｰﾀ編集処理																|*/
/*[]-----------------------------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	TEIKID2_edit( Kikai_no, Pkno_syu, Req_syu, pri_kind, *p_proc_data )			|*/
/*|																									|*/
/*|	PARAMETER		:	ushort	Kikai_no	=	機械Ｎｏ．											|*/
/*|																									|*/
/*|						ushort	Kakari_no	=	係員Ｎｏ． (NT4700 MOTOHASHI 05/09/28)				|*/
/*|																									|*/
/*|						uchar	Pkno_syu	=	駐車場Ｎｏ．種別									|*/
/*|																									|*/
/*|						uchar	Req_syu		=	要求種別											|*/
/*|													０：全指定										|*/
/*|													１：入庫のみ									|*/
/*|													２：出庫のみ									|*/
/*|													３：初回のみ									|*/
/*|																									|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ											|*/
/*|													R_PRI  : ﾚｼｰﾄ									|*/
/*|													J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																									|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ							|*/
/*|																									|*/
/*|	RETURN VALUE	:	void																		|*/
/*|																									|*/
/*[]-----------------------------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi																			|*/
/*|	Date	:	2005-05-11																			|*/
/*|	Update	:																						|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----------------------------[]*/
void	TEIKID2_edit( ushort Kikai_no, ushort Kakari_no, uchar Pkno_syu, uchar Req_syu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_flg	= YES;		// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）
	uchar	edit_gyou	= 0;		// 編集済み行数
	uchar	edit_cnt	= 0;		// 編集行数ﾜｰｸ
	uchar	next_edit_max;			// 次編集印字内容の最大編集行数
	ushort	kou_no;					// 印字項目番号


	if( p_proc_data->Prn_no == 0 ){

		// 編集開始（初回編集）の場合

		/*------	印字項目ﾒﾆｭｰ作成	------*/
		p_proc_data->Prn_no_wk[0] = 1;												// 印字項目１番目　←　表題

		switch( Req_syu ){	// 要求種別？

			case	0:		// 要求種別＝全指定
				p_proc_data->Prn_no_wk[1] = 2;										// 印字項目２番目　←　入庫
				p_proc_data->Prn_no_wk[2] = 3;										// 印字項目３番目　←　出庫
				p_proc_data->Prn_no_wk[3] = 4;										// 印字項目４番目　←　初回
// GG129000(S) M.Fujikawa 2023/09/26 ゲート式車番チケットレスシステム対応　最終行に「処理未了取引記録なし」と印字してしまう　不具合#7134
// 				p_proc_data->Prn_no_wk[4] = 0;
// GG129000(S) M.Fujikawa 2023/09/26 ゲート式車番チケットレスシステム対応　最終行に「処理未了取引記録なし」と印字してしまう　不具合#7134
				break;

			case	1:		// 要求種別＝入庫のみ
				p_proc_data->Prn_no_wk[1] = 2;										// 印字項目２番目　←　入庫
				p_proc_data->Prn_no_wk[2] = 0;
				break;

			case	2:		// 要求種別＝出庫のみ
				p_proc_data->Prn_no_wk[1] = 3;										// 印字項目２番目　←　出庫
				p_proc_data->Prn_no_wk[2] = 0;
				break;

			case	3:		// 要求種別＝初回のみ
				p_proc_data->Prn_no_wk[1] = 4;										// 印字項目２番目　←　初回
				p_proc_data->Prn_no_wk[2] = 0;
				break;
		}
		p_proc_data->Prn_no = 1;													// 印字項目ﾒﾆｭｰ番号ｾｯﾄ
	}

	for( ; edit_flg ; ){															// 編集処理ﾙｰﾌﾟ

		edit_cnt = 0;																// 編集行数ﾘｾｯﾄ
		kou_no = p_proc_data->Prn_no_wk[(p_proc_data->Prn_no)-1];					// 印字項目番号取得

		switch( kou_no ){	// 編集する項目番号により各処理へ分岐

			case	1:		// ＜表題＞印字
				edit_cnt = TEIKID_edit_hyoudai( 2, Kikai_no, Kakari_no, Pkno_syu, pri_kind );
				break;

			case	2:		// ＜入庫＞印字
				edit_cnt = TEIKID_edit_sts( 3, Pkno_syu, pri_kind, p_proc_data );
				break;

			case	3:		// ＜出庫＞印字
				edit_cnt = TEIKID_edit_sts( 4, Pkno_syu, pri_kind, p_proc_data );
				break;

			case	4:		// ＜初回＞印字
				edit_cnt = TEIKID_edit_sts( 5, Pkno_syu, pri_kind, p_proc_data );
				break;

			default:		// その他（項目番号ｴﾗｰ）
				p_proc_data->Prn_no_data1 = 0;
				p_proc_data->Prn_no_data2 = 0;
				break;
		}
		if( (p_proc_data->Prn_no_data1 == 0) && (p_proc_data->Prn_no_data2 == 0) ){	// １項目の編集終了？

			// １項目の編集が終了した場合
			p_proc_data->Prn_no++;													// 項目ﾒﾆｭｰ番号更新（＋１）
			kou_no = p_proc_data->Prn_no_wk[(p_proc_data->Prn_no)-1];				// 次に編集する印字項目番号取得

			if( kou_no == 0 ){														// 印字項目ﾒﾆｭｰ終了？
				p_proc_data->Final	= ON;											// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
				break;																// 編集処理ﾙｰﾌﾟを抜ける
			}
			edit_gyou = (uchar)(edit_gyou + edit_cnt);								// 編集済み行数更新
			next_edit_max = teikid2_edit_tbl[kou_no];								// 次編集項目の最大編集行数ｾｯﾄ

			if( (edit_gyou + next_edit_max) > EDIT_GYOU_MAX ){						// 次項目編集可能？（１ﾌﾞﾛｯｸ最大編集行数ﾁｪｯｸ）
				edit_flg = NO;														// 最大編集行数を超えてしまう場合　→　編集処理ﾙｰﾌﾟを抜ける
			}
		}
		else{
			// １項目の編集が終了していない場合
			edit_flg = NO;															// 編集処理ﾙｰﾌﾟを抜ける
		}
	}
}

/*[]-----------------------------------------------------------------------------------------------[]*/
/*|		定期印字表題ﾃﾞｰﾀ編集処理																	|*/
/*[]-----------------------------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	TEIKID_edit_hyoudai( Pri_syu, Kikai_no, Kakari_no, Pkno_syu, pri_kind )		|*/
/*|																									|*/
/*|	PARAMETER		:	uchar	Pri_syu		=	表題種別（１：有効／無効、２：入庫／出庫）			|*/
/*|																									|*/
/*|						ushort	Kikai_no	=	機械Ｎｏ．											|*/
/*|																									|*/
/*|						ushort	Kakari_no	=	係員Ｎｏ． (NT4700 MOTOHASHI 05/09/28)				|*/
/*|																									|*/
/*|						uchar	Pkno_syu	=	駐車場Ｎｏ．種別									|*/
/*|																									|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ											|*/
/*|													R_PRI  : ﾚｼｰﾄ									|*/
/*|													J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																									|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数													|*/
/*|																									|*/
/*[]-----------------------------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi																			|*/
/*|	Date	:	2005-05-10																			|*/
/*|	Update	:																						|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----------------------------[]*/
uchar	TEIKID_edit_hyoudai( uchar Pri_syu, ushort Kikai_no, ushort Kakari_no, uchar Pkno_syu, uchar pri_kind )
{
	uchar	edit_cnt = 0;	// 編集行数

	/*------	＜表題＞編集	------*/
	switch( Pri_syu ){

		case	1:
			edit_cnt += Prn_edit_Title	(	// ＜定期有効／無効＞表題印字ﾃﾞｰﾀ編集
											TeikiD1Ttl_Prn[Pkno_syu],
											FONT_K_NML,
											pri_kind
										);
			break;

		case	2:
			edit_cnt += Prn_edit_Title	(	// ＜定期入庫／出庫＞表題印字ﾃﾞｰﾀ編集
											TeikiD2Ttl_Prn[Pkno_syu],
											FONT_K_NML,
											pri_kind
										);
			break;

		default:
			return( edit_cnt );

	}

	/*------	１行空白	------*/
	edit_cnt += Prn_edit_space( pri_kind );

	/*------	＜機械NO.／係員NO.＞編集	------*/
	KikaiNoSet( cEditwk1, Kikai_no );		// 機械NO.編集
	KakariNoSet( cEditwk2, Kakari_no );		// 係員NO.編集

	Str_Set1(								// -----印字ﾃﾞｰﾀ編集-----
				cEditwk1,					// 文字列１：機械NO.印字ﾃﾞｰﾀ
				cEditwk2,					// 文字列２：係員NO.印字ﾃﾞｰﾀ
				pri_kind					// 印字先ﾌﾟﾘﾝﾀ
			);

	edit_cnt++;

	/*------	＜時刻＞編集	------*/
	Prn_edit_NowDate( prn_work );			// 現在日時印字ﾃﾞｰﾀ編集
	PCMD_CENTER( pri_kind );				// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
	PrnFontSize( FONT_A_NML, pri_kind );	// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );	// 漢字（通常）指定
	PrnStr( prn_work, pri_kind );			// 時刻　印字ﾃﾞｰﾀ登録

	edit_cnt++;

	/*------	１行空白	------*/
	edit_cnt += Prn_edit_space( pri_kind );

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------------------------------[]*/
/*|		定期ｽﾃｰﾀｽ印字ﾃﾞｰﾀ編集処理																	|*/
/*[]-----------------------------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	TEIKID_edit_sts( Edit_no, Pkno_syu, pri_kind, *p_proc_data )				|*/
/*|																									|*/
/*|	PARAMETER		:	uchar	Edit_no		=	編集種別											|*/
/*|													１：有効										|*/
/*|													２：無効										|*/
/*|													３：入庫										|*/
/*|													４：出庫										|*/
/*|													５：初回										|*/
/*|																									|*/
/*|						uchar	Pkno_syu	=	駐車場Ｎｏ．種別									|*/
/*|																									|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ											|*/
/*|													R_PRI  : ﾚｼｰﾄ									|*/
/*|													J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																									|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ							|*/
/*|																									|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数													|*/
/*|																									|*/
/*[]-----------------------------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi																			|*/
/*|	Date	:	2005-05-10																			|*/
/*|	Update	:																						|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----------------------------[]*/
uchar	TEIKID_edit_sts( uchar Edit_no, uchar Pkno_syu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	uchar	edit_pos = 0;		// 印字ﾃﾞｰﾀ編集位置（左からの印字位置：１～５）
	short	ans;				// 定期ﾃｰﾌﾞﾙ参照結果
	ushort	sts[3];				// 定期ｽﾃｰﾀｽ
	ushort	id_cnt;				// 定期ID数

	if( p_proc_data->Prn_no_data1 == 0 ){							// ＜有効＞印字ﾃﾞｰﾀ編集開始？

																	/*------	＜項目名称＞編集	------*/
		PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
		PrnStr( TeikiDSts_Prn[Edit_no-1], pri_kind );				// 項目名称印字ﾃﾞｰﾀ登録
		edit_cnt++;													// 編集行数＋１

		id_cnt = TEIKID_edit_idcnt( Pkno_syu );						// 編集対象とする定期ID数	取得
		if( id_cnt == 0 ){
			return(edit_cnt);										// 編集対象とする定期ID数が０の場合 → ＜項目名称＞のみ印字して終了
		}

		p_proc_data->Prn_no_data1 = 1;								// 編集対象とする定期IDｾｯﾄ
		p_proc_data->Prn_no_data2 = id_cnt;							// 編集対象とする定期ID数ｾｯﾄ
	}

	for( ; p_proc_data->Prn_no_data1 <= p_proc_data->Prn_no_data2 ; p_proc_data->Prn_no_data1++ ){	// 印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟ

		switch( Edit_no ){											// 編集種別？

			case	1:												// 編集種別＝＜有効＞
				ans = ReadPassTbl( (ulong)CPrmSS[S_SYS][Pkno_syu+1], p_proc_data->Prn_no_data1, sts );	// 対象定期IDのｽﾃｰﾀｽ読出し

				if( ans == 0 && sts[0] == 0 ){						// 有効？
					ans = ON;										// 編集条件に一致
				}
				else{
					ans = OFF;										// 編集条件に不一致
				}
				break;

			case	2:												// 編集種別＝＜無効＞
				ans = ReadPassTbl( (ulong)CPrmSS[S_SYS][Pkno_syu+1], p_proc_data->Prn_no_data1, sts );	// 対象定期IDのｽﾃｰﾀｽ読出し

				if( ans == 0 && sts[0] == 1 ){						// 無効？
					ans = ON;										// 編集条件に一致
				}
				else{
					ans = OFF;										// 編集条件に不一致
				}
				break;

			case	3:												// 編集種別＝＜入庫＞
				ans = ReadPassTbl( (ulong)CPrmSS[S_SYS][Pkno_syu+1], p_proc_data->Prn_no_data1, sts );	// 対象定期IDのｽﾃｰﾀｽ読出し

				if( ans == 0 && sts[0] == 1 ){						// 無効？
					ans = OFF;										// 編集条件に不一致
				}
				else if( ans == 0 && sts[1] == 2 ){					// 入庫？
					ans = ON;										// 編集条件に一致
				}
				else{
					ans = OFF;										// 編集条件に不一致
				}
				break;

			case	4:												// 編集種別＝＜出庫＞
				ans = ReadPassTbl( (ulong)CPrmSS[S_SYS][Pkno_syu+1], p_proc_data->Prn_no_data1, sts );	// 対象定期IDのｽﾃｰﾀｽ読出し

				if( ans == 0 && sts[0] == 1 ){						// 無効？
					ans = OFF;										// 編集条件に不一致
				}
				else if( ans == 0 && sts[1] == 1 ){					// 出庫？
					ans = ON;										// 編集条件に一致
				}
				else{
					ans = OFF;										// 編集条件に不一致
				}
				break;

			case	5:												// 編集種別＝＜初回＞
				ans = ReadPassTbl( (ulong)CPrmSS[S_SYS][Pkno_syu+1], p_proc_data->Prn_no_data1, sts );	// 対象定期IDのｽﾃｰﾀｽ読出し

				if( ans == 0 && sts[0] == 1 ){						// 無効？
					ans = OFF;										// 編集条件に不一致
				}
				else if( ans == 0 && sts[1] == 0 ){					// 初回？
					ans = ON;										// 編集条件に一致
				}
				else{
					ans = OFF;										// 編集条件に不一致
				}
				break;

			default:												// 編集種別ｴﾗｰ
				ans = OFF;											// 編集条件に不一致
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
				break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
		}

		if( ans == ON ){											// 編集条件に一致する定期ID？

			TEIKID_edit_id( p_proc_data->Prn_no_data1, edit_pos );	// 対象定期IDを印字編集ｴﾘｱ（prn_work）へ登録
			edit_pos++;

			if( edit_pos >= 5 ){									// １行分（ID５個）編集終了

				edit_pos = 0;
																	/*------	＜１行分（ID５個）＞編集	------*/
				PCMD_LEFT( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
				PrnFontSize( FONT_A_NML, pri_kind );				// ﾌｫﾝﾄＡ（通常）指定
				PrnFontSize( FONT_K_NML, pri_kind );				// 漢字（通常）指定
				PrnStr( prn_work, pri_kind );						// 編集した印字ﾃﾞｰﾀ登録
				edit_cnt++;											// 編集行数＋１

				if( edit_cnt >= EDIT_GYOU_MAX ){					// 編集最大行数ﾁｪｯｸ
																	// 編集最大行数になった場合
					p_proc_data->Prn_no_data1++;					// 対象定期ID更新（＋１）
					break;											// 印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟを抜ける
				}
			}
		}
	}																// 印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟＥＮＤ

	if( edit_pos != 0 ){											// 編集済み定期IDあり？
																	/*------	＜編集済みID＞編集	------*/
		PCMD_LEFT( pri_kind );										// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );								// 編集した印字ﾃﾞｰﾀ登録
		edit_cnt++;													// 編集行数＋１
	}
	if( p_proc_data->Prn_no_data1 > p_proc_data->Prn_no_data2 ){	// 編集対象とする定期ID数検索終了？
		edit_cnt += Prn_edit_space( pri_kind );						// １行空白
		p_proc_data->Prn_no_data1 = 0;								// 対象定期ID情報ｸﾘｱ
		p_proc_data->Prn_no_data2 = 0;								// 対象定期ID数情報ｸﾘｱ
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------------------------------[]*/
/*|		定期印字ﾃﾞｰﾀID数検索処理																	|*/
/*[]-----------------------------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	TEIKID_edit_idcnt( Pkno_syu )												|*/
/*|																									|*/
/*|	PARAMETER		:	uchar	Pkno_syu	=	駐車場Ｎｏ．種別									|*/
/*|																									|*/
/*|	RETURN VALUE	:	ushort	ret	=	ID数														|*/
/*|																									|*/
/*[]-----------------------------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi																			|*/
/*|	Date	:	2005-05-10																			|*/
/*|	Update	:																						|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----------------------------[]*/
ushort	TEIKID_edit_idcnt( uchar Pkno_syu )
{
	uchar	i;			// ﾙｰﾌﾟｶｳﾝﾀｰ
	ushort	start_id;	// 開始ID No.
	ushort	end_id;		// 終了ID No.
	ushort	ret = 0;	// 戻り値（ID数）

	for( i = 0 ; i <= 3 ; i++ ){				// 対象とする駐車場Ｎｏ．種別の定期ﾃｰﾌﾞﾙＮｏ．検索
		if( CPrmSS[S_SYS][65+i] == CPrmSS[S_SYS][Pkno_syu+1] ){
			break;
		}
	}
	if( i > 3 ){
		return( ret );							// 対象とする駐車場Ｎｏ．種別の定期ﾃｰﾌﾞﾙ設定なし
	}
	switch( i ){

		case	0:								// 対象とする駐車場Ｎｏ．種別＝定期ﾃｰﾌﾞﾙ１使用

			start_id= 1;
			end_id	= (ushort)CPrmSS[S_SYS][61];
			break;

		case	1:								// 対象とする駐車場Ｎｏ．種別＝定期ﾃｰﾌﾞﾙ２使用

			start_id= (ushort)CPrmSS[S_SYS][61];
			end_id	= (ushort)CPrmSS[S_SYS][62];
			break;

		case	2:								// 対象とする駐車場Ｎｏ．種別＝定期ﾃｰﾌﾞﾙ３使用

			start_id= (ushort)CPrmSS[S_SYS][62];
			end_id	= (ushort)CPrmSS[S_SYS][63];
			break;

		case	3:								// 対象とする駐車場Ｎｏ．種別＝定期ﾃｰﾌﾞﾙ４使用

			start_id= (ushort)CPrmSS[S_SYS][63];
			end_id	= PAS_MAX+1;
			break;
	}

	if( end_id == 0 || end_id > PAS_MAX ){
		end_id = PAS_MAX+1;						// 終了ID No.＝0 または ＞PAS_MAX(12000) の場合：終了ID No.←PAS_MAX+1(12001)
	}

	if( start_id >= end_id ){
		ret = 0;								// 設定ｴﾗｰの場合：ID数＝０
	}
	else{
		ret = end_id - start_id;				// ID数計算
	}
	return( ret );
}

/*[]---------------------------------------------------------------------------[]*/
/*|		定期ID印字ﾃﾞｰﾀ編集処理													|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	TEIKID_edit_id( id, pos )								|*/
/*|																				|*/
/*|	PARAMETER		:	ushort	id		=	定期ID								|*/
/*|																				|*/
/*|						uchar	pos		=	編集位置(０～４)					|*/
/*|																				|*/
/*|	RETURN VALUE	:	void													|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|																				|*/
/*|	指定されたﾊﾟﾗﾒｰﾀにより定期ID印字ﾃﾞｰﾀを編集ｴﾘｱ（prn_work）に編集する			|*/
/*|																				|*/
/*|	＜編集ﾌｫｰﾏｯﾄ＞																|*/
/*|																				|*/
/*| 			012345678901234567890123456789012345							|*/
/*|				xxxxx  xxxxx  xxxxx  xxxxx  xxxxx								|*/
/*|				位置=0 位置=1 位置=2 位置=3 位置=4								|*/
/*|																				|*/
/*|				xxxxx=定期ID（５桁固定）										|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi														|*/
/*|	Date	:	2005-05-11														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
void	TEIKID_edit_id( ushort id, uchar pos )
{

	switch( pos ){

		case	0:	// １番目に定期IDを編集
			sprintf( &prn_work[0]," %05d                            ", id );// prn_work[0]～[33]に編集
			break;

		case	1:	// ２番目に定期IDを編集
			sprintf( &prn_work[6],"  %05d                    ", id );		// prn_work[6]～[33]に編集
			break;

		case	2:	// ３番目に定期IDを編集
			sprintf( &prn_work[13],"  %05d              ", id );			// prn_work[13]～[33]に編集
			break;

		case	3:	// ４番目に定期IDを編集
			sprintf( &prn_work[20],"  %05d       ", id );					// prn_work[20]～[33]に編集
			break;

		case	4:	// ５番目に定期IDを編集
			sprintf( &prn_work[27],"  %05d", id );							// prn_work[27]～[33]に編集
			break;

	}
}

/*[]-----------------------------------------------------------------------------------[]*/
/*|		ｻｰﾋﾞｽ券期限印字ﾃﾞｰﾀ編集処理														|*/
/*[]-----------------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SVSTIKK_edit( Kikai_no, Kakari_no, pri_kind, *p_proc_data )		|*/
/*|																						|*/
/*|	PARAMETER		:	ushort	Kikai_no	=	機械Ｎｏ．								|*/
/*|																						|*/
/*|						ushort	Kakari_no	=	係員Ｎｏ．(NT4700 MOTOHASHI 05/09/28)	|*/
/*|																						|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ								|*/
/*|							R_PRI  : ﾚｼｰﾄ												|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ												|*/
/*|																						|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ				|*/
/*|																						|*/
/*|	RETURN VALUE	:	void															|*/
/*|																						|*/
/*[]-----------------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi																|*/
/*|	Date	:	2005-04-25																|*/
/*|	Update	:																			|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----------------[]*/
void	SVSTIKK_edit( ushort Kikai_no, ushort Kakari_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar			tbl_cnt;			// ｻｰﾋﾞｽ券期限ﾃﾞｰﾀﾃｰﾌﾞﾙ数
	ulong			s_kind;				// ｻｰﾋﾞｽ券種別
	ulong			s_data;				// ｻｰﾋﾞｽ券内容

	uchar			befor_s_year;		// 変更前の開始ﾃﾞｰﾀ（年）
	uchar			befor_s_mon;		// 変更前の開始ﾃﾞｰﾀ（月）
	uchar			befor_s_day;		// 変更前の開始ﾃﾞｰﾀ（日）
	uchar			befor_e_year;		// 変更前の終了ﾃﾞｰﾀ（年）
	uchar			befor_e_mon;		// 変更前の終了ﾃﾞｰﾀ（月）
	uchar			befor_e_day;		// 変更前の終了ﾃﾞｰﾀ（日）

	uchar			after_s_year;		// 変更後の開始ﾃﾞｰﾀ（年）
	uchar			after_s_mon;		// 変更後の開始ﾃﾞｰﾀ（月）
	uchar			after_s_day;		// 変更後の開始ﾃﾞｰﾀ（日）
	uchar			after_e_year;		// 変更後の終了ﾃﾞｰﾀ（年）
	uchar			after_e_mon;		// 変更後の終了ﾃﾞｰﾀ（月）
	uchar			after_e_day;		// 変更後の終了ﾃﾞｰﾀ（日）

	uchar			befor_mukigen;		// 変更前期限
	uchar			after_mukigen;		// 変更後期限


	/*------	＜表題＞編集	------*/
	Prn_edit_Title	(										// 表題（"券 期 限"）印字ﾃﾞｰﾀ編集
						"券 期 限",
						FONT_K_YOKOBAI,
						pri_kind
					);

	/*------	１行空白	------*/
	Prn_edit_space( pri_kind );

	/*------	＜機械NO.／係員NO.＞編集	------*/
	KikaiNoSet( cEditwk1, Kikai_no );						// 機械NO.編集
	KakariNoSet( cEditwk2, Kakari_no );						// 係員NO.編集

	Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
				cEditwk1,									// 文字列１：機械NO.印字ﾃﾞｰﾀ
				cEditwk2,									// 文字列２：係員NO.印字ﾃﾞｰﾀ
				pri_kind									// 印字先ﾌﾟﾘﾝﾀ
			);

	/*------	＜時刻＞編集	------*/
	Prn_edit_NowDate( prn_work );							// 現在日時印字ﾃﾞｰﾀ編集
	PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
	PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
	PrnStr( prn_work, pri_kind );							// 時刻　印字ﾃﾞｰﾀ登録

	/*------	１行空白	------*/
	Prn_edit_space( pri_kind );

	/*------	＜期限ﾃﾞｰﾀ＞編集	------*/
	for( tbl_cnt = 0 ; tbl_cnt < 3 ; tbl_cnt++ ){

		s_kind = CPrmSS[S_DIS][8+(tbl_cnt*6)];				// 「ｻｰﾋﾞｽ券種別」設定ﾃﾞｰﾀ取得

		if( (s_kind > 0) && (s_kind <= 4) ){				// 「ｻｰﾋﾞｽ券種別」設定あり？

			s_data = CPrmSS[S_DIS][9+(tbl_cnt*6)];			// 「ｻｰﾋﾞｽ券内容」設定ﾃﾞｰﾀ取得

			if(	( CPrmSS[S_DIS][10+(tbl_cnt*6)] == 0 )		// 変更前の期限ﾃﾞｰﾀﾁｪｯｸ
					&&
				( CPrmSS[S_DIS][11+(tbl_cnt*6)] == 0 ) ){

				// 開始（年、月、日）／終了（年、月、日）全て０（無期限）の場合
				befor_mukigen = ON;
			}
			else{
				// 無期限でない場合

				befor_mukigen = OFF;

				befor_s_year	= (uchar)prm_get( COM_PRM, S_DIS, (short)(10+(tbl_cnt*6)), 2, 5 );	// 変更前の開始ﾃﾞｰﾀ（年）取得
				befor_s_mon		= (uchar)prm_get( COM_PRM, S_DIS, (short)(10+(tbl_cnt*6)), 2, 3 );	// 変更前の開始ﾃﾞｰﾀ（月）取得
				befor_s_day		= (uchar)prm_get( COM_PRM, S_DIS, (short)(10+(tbl_cnt*6)), 2, 1 );	// 変更前の開始ﾃﾞｰﾀ（日）取得

				befor_e_year	= (uchar)prm_get( COM_PRM, S_DIS, (short)(11+(tbl_cnt*6)), 2, 5 );	// 変更前の終了ﾃﾞｰﾀ（年）取得
				befor_e_mon		= (uchar)prm_get( COM_PRM, S_DIS, (short)(11+(tbl_cnt*6)), 2, 3 );	// 変更前の終了ﾃﾞｰﾀ（月）取得
				befor_e_day		= (uchar)prm_get( COM_PRM, S_DIS, (short)(11+(tbl_cnt*6)), 2, 1 );	// 変更前の終了ﾃﾞｰﾀ（日）取得
			}

			if(	( CPrmSS[S_DIS][12+(tbl_cnt*6)] == 0 )		// 変更後の期限ﾃﾞｰﾀﾁｪｯｸ
					&&
				( CPrmSS[S_DIS][13+(tbl_cnt*6)] == 0 ) ){

				// 開始（年、月、日）／終了（年、月、日）全て０（無期限）の場合
				after_mukigen = ON;
			}
			else{
				// 無期限でない場合

				after_mukigen = OFF;

				after_s_year	= (uchar)prm_get( COM_PRM, S_DIS, (short)(12+(tbl_cnt*6)), 2, 5 );	// 変更後の開始ﾃﾞｰﾀ（年）取得
				after_s_mon		= (uchar)prm_get( COM_PRM, S_DIS, (short)(12+(tbl_cnt*6)), 2, 3 );	// 変更後の開始ﾃﾞｰﾀ（月）取得
				after_s_day		= (uchar)prm_get( COM_PRM, S_DIS, (short)(12+(tbl_cnt*6)), 2, 1 );	// 変更後の開始ﾃﾞｰﾀ（日）取得

				after_e_year	= (uchar)prm_get( COM_PRM, S_DIS, (short)(13+(tbl_cnt*6)), 2, 5 );	// 変更後の終了ﾃﾞｰﾀ（年）取得
				after_e_mon		= (uchar)prm_get( COM_PRM, S_DIS, (short)(13+(tbl_cnt*6)), 2, 3 );	// 変更後の終了ﾃﾞｰﾀ（月）取得
				after_e_day		= (uchar)prm_get( COM_PRM, S_DIS, (short)(13+(tbl_cnt*6)), 2, 1 );	// 変更後の終了ﾃﾞｰﾀ（日）取得
			}

			switch( s_kind ){	// 種別？

				case	1:		// ｻｰﾋﾞｽ券

					if( s_data > 3 ){										// ｻｰﾋﾞｽ券種別？
						// 内容が不正なﾃﾞｰﾀの場合
						s_data = 4;											// ｻｰﾋﾞｽ券種別に"-"を印字する
					}
					sprintf( cEditwk1,"ｻｰﾋﾞｽ券%s", SvsKigen_Prn[s_data] );	// cEditwk1←"ｻｰﾋﾞｽ券×"
					break;

				case	2:		// 掛売券

					if( s_data == 0 ){
						sprintf( cEditwk1, "掛売券全て" );					// cEditwk1←"掛売券全て"
					}
					else{
						sprintf( cEditwk1, "掛売券(店%03d)",(int)s_data );	// cEditwk1←"掛売券（店×××）"
					}
					break;

				case	3:		// 割引券

					if( s_data == 0 ){
						sprintf( cEditwk1, "割引券全て" );					// cEditwk1←"割引券全て"
					}
					else{
						sprintf( cEditwk1, "割引券(店%03d)",(int)s_data );	// cEditwk1←"割引券（店×××）"
					}
					break;

				case	4:		// 全て

					sprintf( cEditwk1, "全ての券" );						// cEditwk1←"全ての券"
					break;
			}

			/*------	＜期限No.／ｻｰﾋﾞｽ券種別＞編集	------*/
			sprintf(	prn_work, "期限%d  %s",								// prn_work←"期限X  ｻｰﾋﾞｽ券種別"
						tbl_cnt+1,											// 期限No.（設定ﾃｰﾌﾞﾙNo.）
						cEditwk1											// ｻｰﾋﾞｽ券種別
					);

			PCMD_LEFT( pri_kind );											// [位置揃え(左揃え)]
			PrnFontSize( FONT_A_NML, pri_kind );							// ﾌｫﾝﾄＡ（通常）指定
			PrnFontSize( FONT_K_NML, pri_kind );							// 漢字（通常）指定
			PrnStr( prn_work, pri_kind );									// 印字ﾃﾞｰﾀ登録

			/*------	＜変更前期限ﾃﾞｰﾀ＞編集	------*/
			if( befor_mukigen == ON ){
				sprintf( cEditwk2, "変更前：無期限" );						// cEditwk2←"変更前：無期限"
			}
			else{
				sprintf(	cEditwk2,
							"変更前：%02d年%2d月%2d日～%02d年%2d月%2d日",	// cEditwk2←"変更前：xx年xx月xx日～xx年xx月xx日"
							befor_s_year,									// 開始（年）
							befor_s_mon,									// 開始（月）
							befor_s_day,									// 開始（日）
							befor_e_year,									// 終了（年）
							befor_e_mon,									// 終了（月）
							befor_e_day										// 終了（日）
						);
			}
			PrnStr( cEditwk2, pri_kind );									// 印字ﾃﾞｰﾀ登録

			/*------	＜変更後期限ﾃﾞｰﾀ＞編集	------*/
			if( after_mukigen == ON ){
				sprintf( cEditwk2, "変更後：無期限" );						// cEditwk2←"変更後：無期限"
			}
			else{
				sprintf(	cEditwk2,
							"変更後：%02d年%2d月%2d日～%02d年%2d月%2d日",	// cEditwk2←"変更後：xx年xx月xx日～xx年xx月xx日"
							after_s_year,									// 開始（年）
							after_s_mon,									// 開始（月）
							after_s_day,									// 開始（日）
							after_e_year,									// 終了（年）
							after_e_mon,									// 終了（月）
							after_e_day										// 終了（日）
						);
			}
			PrnStr( cEditwk2, pri_kind );									// 印字ﾃﾞｰﾀ登録
		}
	}

	/*------	編集終了	------*/
	p_proc_data->Final = ON;												// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
}

/*[]-----------------------------------------------------------------------------------[]*/
/*|		特別日印字ﾃﾞｰﾀ編集処理															|*/
/*[]-----------------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SPLDAY_edit( Kikai_no, Kakari_no, pri_kind, *p_proc_data )		|*/
/*|																						|*/
/*|	PARAMETER		:	ushort	Kikai_no	=	機械Ｎｏ．								|*/
/*|																						|*/
/*|						ushort	Kakari_no	=	係員Ｎｏ．(NT4700 MOTOHASHI 05/09/28)	|*/
/*|																						|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ								|*/
/*|							R_PRI  : ﾚｼｰﾄ												|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ												|*/
/*|																						|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ				|*/
/*|																						|*/
/*|	RETURN VALUE	:	void															|*/
/*|																						|*/
/*[]-----------------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi																|*/
/*|	Date	:	2005-06-07																|*/
/*|	Update	:																			|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----------------[]*/
// ＜備考＞
// １．特別日のﾃﾞｰﾀﾃｰﾌﾞﾙ数を変更する場合、SPLDAY_CNT／SPLDAY_ENDのdefine定義を変更する
// ２．特別日編集処理１回で編集するﾃﾞｰﾀの最大数は、SPLDAY_EDIT_MAXのdefine定義を変更する（最大数は偶数長にする事）
#define		SPLDAY_CNT			31		// 特別日ﾃﾞｰﾀﾃｰﾌﾞﾙ数
void	SPLDAY_edit( ushort Kikai_no, ushort Kakari_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	ushort	pri_no;				// 編集項目No.(0=表題、1=特別期間、2=特別日、3=ﾊｯﾋﾟｰﾏﾝﾃﾞｰ)

	pri_no = p_proc_data->Prn_no;

	switch( pri_no ){	// 編集項目？

		case	0:		// 表題

			/*------	＜表題＞編集	------*/
			Prn_edit_Title	(						// 表題（"特 別 日"）印字ﾃﾞｰﾀ編集
								"特 別 日",
								FONT_K_YOKOBAI,
								pri_kind
							);

			/*------	１行空白	------*/
			Prn_edit_space( pri_kind );

			/*------	＜機械NO.／係員NO.＞編集	------*/
			KikaiNoSet( cEditwk1, Kikai_no );		// 機械NO.編集
			KakariNoSet( cEditwk2, Kakari_no );		// 係員NO.編集

			Str_Set1(								// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,					// 文字列１：機械NO.印字ﾃﾞｰﾀ
						cEditwk2,					// 文字列２：係員NO.印字ﾃﾞｰﾀ
						pri_kind					// 印字先ﾌﾟﾘﾝﾀ
					);

			/*------	＜時刻＞編集	------*/
			Prn_edit_NowDate( prn_work );			// 現在日時印字ﾃﾞｰﾀ編集
			PCMD_CENTER( pri_kind );				// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
			PrnFontSize( FONT_A_NML, pri_kind );	// ﾌｫﾝﾄＡ（通常）指定
			PrnFontSize( FONT_K_NML, pri_kind );	// 漢字（通常）指定
			PrnStr( prn_work, pri_kind );			// 時刻　印字ﾃﾞｰﾀ登録

			/*------	１行空白	------*/
			Prn_edit_space( pri_kind );

			break;

		case	1:		// ＜特別日（期間）＞印字

			SPLDAY_edit_Kikan( pri_kind ,0);			// ＜特別日（期間）＞印字ﾃﾞｰﾀ編集
			break;

		case	2:		// ＜特別日（月日）＞印字

			SPLDAY_edit_Day( pri_kind, p_proc_data ,0);	// ＜特別日（月日）＞印字ﾃﾞｰﾀ編集
			break;
		case	3:		// ＜特別日（ﾊｯﾋﾟｰﾏﾝﾃﾞｰ）＞印字

			if((prm_get( 0,S_TOK,(short)(41),1,1 )) == 0 ){
				SPLDAY_edit_Hmon( pri_kind ,0);			// ＜特別日（ﾊｯﾋﾟｰﾏﾝﾃﾞｰ）＞印字ﾃﾞｰﾀ編集
			}
			break;

		case	4:		// ＜特別日（特別曜日）＞印字

			if((prm_get( 0,S_TOK,(short)(41),1,1 )) == 1 ){
				SPLDAY_edit_SPWEEK( pri_kind ,0);			// ＜特別日（特別曜日）＞印字ﾃﾞｰﾀ編集
			}
			break;

		case	5:		// ＜特別日（特別年月日）＞印字

			SPLDAY_edit_SPYEAR( pri_kind ,0);			// ＜特別日（特別年月日）＞印字ﾃﾞｰﾀ編集
			break;

		default:	// その他（エラー）
			pri_no = 5;
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)


	}

	if( (pri_no != 2) || ( (pri_no == 2) && (p_proc_data->Prn_no_data1 >= SPLDAY_CNT) ) ){
		// 編集項目≠特別日　または　特別日の編集終了

	if( pri_no >= 5 ){								// 全項目編集終了？
		// 編集終了
		p_proc_data->Prn_no	= 0;
		p_proc_data->Final	= ON;					// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ

	}
	else{
		// 未編集の項目がある場合
		pri_no++;
		p_proc_data->Prn_no	= pri_no;
	}
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		特別日（期間）印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SPLDAY_edit_Kikan( pri_kind )						|*/
/*|																			|*/
/*|	PARAMETER		:	uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-07													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	SPLDAY_edit_Kikan( uchar pri_kind, uchar check )
{
	uchar			i;					// 特別期間No.
	uchar			start_mon;			// 開始：月ﾃﾞｰﾀ
	uchar			start_day;			// 開始：日ﾃﾞｰﾀ
	uchar			end_mon;			// 終了：月ﾃﾞｰﾀ
	uchar			end_day;			// 終了：日ﾃﾞｰﾀ
	ushort			Sdate;				// 開始月日ノーマライズ
	ushort			Edate;				// 終了月日ノーマライズ
	uchar			prm = 0;
	uchar			chk_day = 0;

	/*------	＜項目名称＞編集	------*/
	PCMD_LEFT( pri_kind );														// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );										// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );										// 漢字（通常）指定
	PrnStr( SplDay_Prn[0], pri_kind );											// 項目名称印字ﾃﾞｰﾀ登録

	/*------	＜特別日（期間）ﾃﾞｰﾀ＞編集	------*/
	for( i = 0 ; i <= 2 ; i++ ){												// 特別期間１～３編集処理ﾙｰﾌﾟ

		start_mon	= (uchar)prm_get( COM_PRM, S_TOK, (short)(i*2+1), 2, 3 );	// 開始：月　ﾃﾞｰﾀ取得
		start_day	= (uchar)prm_get( COM_PRM, S_TOK, (short)(i*2+1), 2, 1 );	// 開始：日　ﾃﾞｰﾀ取得

		end_mon		= (uchar)prm_get( COM_PRM, S_TOK, (short)(i*2+2), 2, 3 );	// 終了：月　ﾃﾞｰﾀ取得
		end_day		= (uchar)prm_get( COM_PRM, S_TOK, (short)(i*2+2), 2, 1 );	// 終了：日　ﾃﾞｰﾀ取得

		if( start_mon == 0 && start_day == 0 && end_mon == 0 && end_day == 0 ){

			//	未設定の場合（全て０の場合）
			sprintf(	cEditwk1,												// cEditwk1←期間印字ﾃﾞｰﾀ（ -月 -日）編集
						" 期間%d　：　　 -月 -日 ～  -月 -日",
						(uchar)(i+1),
						start_mon,
						start_day,
						end_mon, 
						end_day
					);
		}
		else{
			//	開始（月、日）、終了（月、日）何れかが設定されている場合
			if(!check){
			sprintf(	cEditwk1,												// cEditwk1←期間印字ﾃﾞｰﾀ編集
						" 期間%d　：　　%2d月%2d日 ～ %2d月%2d日",
						(uchar)(i+1),
						start_mon,
						start_day,
						end_mon, 
						end_day
					);
			}else{
				chk_day = 0;
				prm = cm14((short)CLK_REC.year);
				if(rangechk(1, 12, start_mon)){										// 開始月
					if(rangechk(1,monday[ prm ][ start_mon-1 ], start_day)){			// 開始日
						
						Sdate = dnrmlzm((short)CLK_REC.year,(short)start_mon,(short)start_day);			// 開始月日ノーマライズ
						Edate = dnrmlzm((short)CLK_REC.year,(short)end_mon,(short)end_day);				// 終了月日ノーマライズ
						
						if(Sdate >= Edate){											// 開始月日ノーマライズ＞終了月日ノーマライズ
							prm = cm14((short)(CLK_REC.year+1));
						}

						if(rangechk(1, 12, end_mon)){								// 終了月
							if(rangechk(1,monday[ prm ][ end_mon-1 ], end_day)){		// 終了日
								chk_day = 1;
							}
						}
					}
				}
				
				if(chk_day){
					sprintf( cEditwk1, " 期間%d　：　　%2d月%2d日 ～ %2d月%2d日",				// cEditwk1←期間印字ﾃﾞｰﾀ編集
								(uchar)(i+1),start_mon,start_day,end_mon,end_day);
				}else{
					sprintf( cEditwk1, " 期間%d　：　　          %s",(uchar)(i+1),Charge_Base[60]);
					Cal_Parameter_Flg = 1;
				}
			}
		}
		PrnStr( cEditwk1, pri_kind );											// 編集した印字ﾃﾞｰﾀ登録
	}
	/*------	１行空白	------*/
	Prn_edit_space( pri_kind );

}

/*[]-----------------------------------------------------------------------[]*/
/*|		特別日（月日）印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SPLDAY_edit_Day( pri_kind, p_proc_data )			|*/
/*|																			|*/
/*|	PARAMETER		:	uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2006-11-06													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
#define		SPLDAY_START		9		// 特別日ﾃﾞｰﾀﾃｰﾌﾞﾙの開始ｱﾄﾞﾚｽ
#define		SPLDAY_END			39		// 特別日ﾃﾞｰﾀﾃｰﾌﾞﾙの終了ｱﾄﾞﾚｽ
#define		SPLDAY_EDIT_MAX		10		// １回の処理で編集する最大ﾃﾞｰﾀ（特別日）数

void	SPLDAY_edit_Day( uchar pri_kind, PRN_PROC_DATA *p_proc_data, uchar check )
{
	uchar			addr;				// 特別日ﾃﾞｰﾀﾃｰﾌﾞﾙｱﾄﾞﾚｽ
	uchar			addr2;				// 特別日ﾃﾞｰﾀﾃｰﾌﾞﾙｱﾄﾞﾚｽ2
	uchar			edit_pos = 0;		// 印字位置
	uchar			splday_mon;			// 特別日：月ﾃﾞｰﾀ
	uchar			splday_day;			// 特別日：日ﾃﾞｰﾀ
	uchar			splday_sft;			// 特別日：振替有無ﾃﾞｰﾀ
	char			*pEditwk;
	uchar			edit_tbl_no;		// 特別日編集済みﾃｰﾌﾞﾙNo.
	uchar			edit_tbl_cnt = 0;	// 特別日編集ﾃﾞｰﾀｶｳﾝﾄ
	uchar			prm = 0;
	uchar			chk_day = 0;

	edit_tbl_no = (uchar)p_proc_data->Prn_no_data1;								// 編集済みﾃｰﾌﾞﾙNo.ｾｯﾄ
	if( edit_tbl_no == 0 ){														// 特別日編集開始（編集済みﾃｰﾌﾞﾙNo.=0）？

		/*------	＜項目名称＞編集	------*/
		PCMD_LEFT( pri_kind );													// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );									// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );									// 漢字（通常）指定
		PrnStr( SplDay_Prn[1], pri_kind );										// 項目名称印字ﾃﾞｰﾀ登録
	}

	/*------	＜特別日（月日）ﾃﾞｰﾀ＞編集	------*/
	for( addr = (uchar)(SPLDAY_START+edit_tbl_no) ; addr <= SPLDAY_END ; addr++ ){

		splday_mon	= (uchar)prm_get( COM_PRM, S_TOK, (short)addr, 2, 3 );		// 特別日：月　ﾃﾞｰﾀ取得
		splday_day	= (uchar)prm_get( COM_PRM, S_TOK, (short)addr, 2, 1 );		// 特別日：日　ﾃﾞｰﾀ取得
		splday_sft	= (uchar)prm_get( COM_PRM, S_TOK, (short)addr, 1, 6 );		// 特別日：振替有無　ﾃﾞｰﾀ取得

		if( (splday_mon != 0) && (splday_day != 0) ){							// 特別日の設定ﾃﾞｰﾀあり？

			// 印字行の１番目に編集する場合
			if( edit_pos == 0 ){												// 編集位置？
				sprintf( cEditwk1,"%s"," " );									// 印字位置編集
				PrnStr_SPDAY( cEditwk1, 0 );									// 印字ﾃﾞｰﾀ登録

				// 印字するﾃﾞｰﾀを動的に変更する場合（春分・秋分の日のみ）	
				if( splday_sft && (((splday_mon == 3 && splday_day == 20) && (Shunbun_Day[CLK_REC.year-1980] != splday_day))|| 
									((splday_mon == 9 && splday_day == 23) && (Shuubun_Day[CLK_REC.year-1980] != splday_day)))){

					if(splday_mon == 3)											// 春分の日
						splday_day = Shunbun_Day[CLK_REC.year-1980];			// 春分の日のﾃﾞｰﾀをｾｯﾄ
					else														// 秋分の日
						splday_day = Shuubun_Day[CLK_REC.year-1980];			// 秋分の日のﾃﾞｰﾀをｾｯﾄ

					sprintf( cEditwk1,"%2d月%2d日", splday_mon, splday_day );	// 月日ﾃﾞｰﾀ編集
					PCMD_LINESET2( pri_kind );									// 漢字以外の部分にｱﾝﾀﾞｰﾗｲﾝを引く
					PCMD_KANJILINESET2( pri_kind );								// 漢字の部分にｱﾝﾀﾞｰﾗｲﾝを引く						
					PrnStr_SPDAY( cEditwk1, 0 );								// 月日印字ﾃﾞｰﾀ登録
					PCMD_LINECLR( pri_kind );									// ｱﾝﾀﾞｰﾗｲﾝ設定の解除
					PCMD_KANJILINECLR( pri_kind );								// ｱﾝﾀﾞｰﾗｲﾝ設定の解除
				}else{
					if(!check){
						sprintf( cEditwk1,"%2d月%2d日", splday_mon, splday_day );	// 月日ﾃﾞｰﾀ編集
						PrnStr_SPDAY( cEditwk1, 0 );								// 月日印字ﾃﾞｰﾀ登録
					}else{
						chk_day = 0;
// MH321800(S) Y.Tanizaki ICクレジット対応(共通改善No.1357/2月29日を特別日にして閏年以外に運用設定プリントを行うと、設定エラー表示になる)
//						prm = cm14((short)CLK_REC.year);
						prm = 1;
// MH321800(E) Y.Tanizaki ICクレジット対応(共通改善No.1357/2月29日を特別日にして閏年以外に運用設定プリントを行うと、設定エラー表示になる)
						if(rangechk(1, 12, splday_mon)){									// 開始月
							if(rangechk(1,monday[ prm ][ splday_mon - 1 ], splday_day)){			// 開始日
								if(splday_sft <= 1){
									chk_day = 1;
								}
							}
						}
						
						if(chk_day){
							sprintf( cEditwk1,"%2d月%2d日", splday_mon, splday_day );	// 月日ﾃﾞｰﾀ編集
							PrnStr_SPDAY( cEditwk1, 0 );								// 月日印字ﾃﾞｰﾀ登録
						}else{
							sprintf( cEditwk1,"■■■■");
							PrnStr_SPDAY( cEditwk1, 0 );								// 月日印字ﾃﾞｰﾀ登録
							Cal_Parameter_Flg = 1;
						}
					}
				}
				
				if( splday_sft == 1){												// 振替有無設定？
					// 振替設定：有
					sprintf( cEditwk1," 振替有" );		// 振替設定○
				}
				else if( splday_sft == 0){
					// 振替設定：無
					sprintf( cEditwk1," 振替無" );		// 振替設定×
				}
				else{
					sprintf( cEditwk1," ■■■");
					Cal_Parameter_Flg = 1;
				}
				if(addr == SPLDAY_END)											// ﾃﾞｰﾀの最後が一番目の編集場所だった場合
					PrnStr_SPDAY( cEditwk1, 1 );								// 振替ﾃﾞｰﾀ登録(印字行数ｶｳﾝﾄあり)
				else
					PrnStr_SPDAY( cEditwk1, 0 );								// 振替印字ﾃﾞｰﾀ登録
			}
			else{
				sprintf( cEditwk2,"%s","   " );									// 印字位置編集
				PrnStr_SPDAY( cEditwk2, 0 );									// 印字ﾃﾞｰﾀ登録

				// 印字するﾃﾞｰﾀを動的に変更する場合（春分・秋分の日のみ）	
				if( splday_sft && (((splday_mon == 3 && splday_day == 20) && (Shunbun_Day[CLK_REC.year-1980] != splday_day))|| 
									((splday_mon == 9 && splday_day == 23) && (Shuubun_Day[CLK_REC.year-1980] != splday_day)))){

					if(splday_mon == 3)											// 春分の日
						splday_day = Shunbun_Day[CLK_REC.year-1980];			// 春分の日のﾃﾞｰﾀをｾｯﾄ
					else														// 秋分の日
						splday_day = Shuubun_Day[CLK_REC.year-1980];			// 秋分の日のﾃﾞｰﾀをｾｯﾄ

					sprintf( cEditwk2,"%2d月%2d日", splday_mon, splday_day );	// 月日ﾃﾞｰﾀ編集
					PCMD_LINESET2( pri_kind );									// 漢字以外の部分にｱﾝﾀﾞｰﾗｲﾝを引く		
					PCMD_KANJILINESET2( pri_kind );								// 漢字の部分にｱﾝﾀﾞｰﾗｲﾝを引く
					PrnStr_SPDAY( cEditwk2, 0 );								// 月日印字ﾃﾞｰﾀ登録
					PCMD_LINECLR( pri_kind );									// ｱﾝﾀﾞｰﾗｲﾝ設定の解除
					PCMD_KANJILINECLR( pri_kind );								// ｱﾝﾀﾞｰﾗｲﾝ設定の解除
				}else{
					if(!check){
						sprintf( cEditwk2,"%2d月%2d日", splday_mon, splday_day );	// 月日ﾃﾞｰﾀ編集
						PrnStr_SPDAY( cEditwk2, 0 );								// 月日印字ﾃﾞｰﾀ登録
					}else{
						chk_day = 0;
// MH321800(S) Y.Tanizaki ICクレジット対応(共通改善No.1357/2月29日を特別日にして閏年以外に運用設定プリントを行うと、設定エラー表示になる)
//						prm = cm14((short)CLK_REC.year);
						prm = 1;
// MH321800(E) Y.Tanizaki ICクレジット対応(共通改善No.1357/2月29日を特別日にして閏年以外に運用設定プリントを行うと、設定エラー表示になる)
						if(rangechk(1, 12, splday_mon)){									// 開始月
							if(rangechk(1,monday[ prm ][ splday_mon - 1 ], splday_day)){			// 開始日
								if(splday_sft <= 1){
									chk_day = 1;
								}
							}
						}
						
						if(chk_day){
							sprintf( cEditwk1,"%2d月%2d日", splday_mon, splday_day );	// 月日ﾃﾞｰﾀ編集
							PrnStr_SPDAY( cEditwk1, 0 );								// 月日印字ﾃﾞｰﾀ登録
						}else{
							sprintf( cEditwk1,"■■■■");
							Cal_Parameter_Flg = 1;
							PrnStr_SPDAY( cEditwk1, 0 );								// 月日印字ﾃﾞｰﾀ登録
						}
					}
				}

				// 印字行の２番目に編集する場合
				if( splday_sft == 1){												// 振替有無設定？
					// 振替設定：有
					sprintf( cEditwk2," 振替有  " );	// 振替設定○
				}
				else if( splday_sft == 0){
					// 振替設定：無
					sprintf( cEditwk2," 振替無  " );	// 振替設定×
				}
				else{
					sprintf( cEditwk2," ■■■  ");
					Cal_Parameter_Flg = 1;
				}

				PrnStr_SPDAY( cEditwk2, 1 );									// 振替印字ﾃﾞｰﾀ登録
	
			}
			edit_pos++;															// 編集位置更新
			if(edit_pos == 2){													// 一行分の編集が終了
				edit_pos = 0;													// 編集位置初期化
			}
			edit_tbl_cnt++;														// 特別日編集ﾃﾞｰﾀｶｳﾝﾄ＋１
		}
		edit_tbl_no++;															// 特別日編集済みﾃｰﾌﾞﾙNo.＋１

		if( edit_tbl_cnt >= SPLDAY_EDIT_MAX ){									// 最大編集ﾃﾞｰﾀ数ﾁｪｯｸ
			// １回の処理で編集する最大ﾃﾞｰﾀ数まで編集した場合

			// まだ編集すべきﾃﾞｰﾀ（特別日設定）があるかﾁｪｯｸ
			for( addr2 = (uchar)(SPLDAY_START+edit_tbl_no) ; addr2 <= SPLDAY_END ; addr2++ ){

				splday_mon	= (uchar)prm_get( COM_PRM, S_TOK, (short)addr2, 2, 3 );
				splday_day	= (uchar)prm_get( COM_PRM, S_TOK, (short)addr2, 2, 1 );
				if( (splday_mon != 0) && (splday_day != 0) ){					// 特別日の設定ﾃﾞｰﾀあり？
					break;														// 未編集ﾃﾞｰﾀあり
				}
			}
			if( addr2 > SPLDAY_END ){
				// 未編集ﾃﾞｰﾀなし
				edit_tbl_no = SPLDAY_CNT;										// 編集済みﾃｰﾌﾞﾙNo.に特別日ﾃﾞｰﾀﾃｰﾌﾞﾙ数をｾｯﾄ(特別日の編集終了)
			}
			addr = SPLDAY_END;													// 編集済みﾃｰﾌﾞﾙｱﾄﾞﾚｽに最終ｱﾄﾞﾚｽをｾｯﾄ(編集処理ﾙｰﾌﾟを抜ける為)
		}
	}
	if( edit_tbl_no >= SPLDAY_CNT ){											// 特別日ﾃｰﾌﾞﾙを全て編集終了？

		/* 5月6日が振替休日の場合、休日（特別日）とする かつ 5月6日が振り替え休日だった場合 */
		if( !CPrmSS[S_TOK][49] && MAY_6[ CLK_REC.year % 100 ] ){	
			if(edit_pos == 0){
				pEditwk = cEditwk1;
				sprintf( pEditwk,"%s"," " );									// 印字位置編集
			}
			else{
				pEditwk = cEditwk2;
				sprintf( pEditwk,"%s","   " );									// 印字位置編集
			}
			PrnStr_SPDAY( pEditwk, 0 );											// 印字ﾃﾞｰﾀ登録
			sprintf( pEditwk,"%2d月%2d日", 5, 6 );								// 月日ﾃﾞｰﾀ編集
			PCMD_LINESET2( pri_kind );											// 漢字以外の部分にｱﾝﾀﾞｰﾗｲﾝを引く
			PCMD_KANJILINESET2( pri_kind );										// 漢字の部分にｱﾝﾀﾞｰﾗｲﾝを引く						
			PrnStr_SPDAY( pEditwk, 0 );											// 月日印字ﾃﾞｰﾀ登録
			PCMD_LINECLR( pri_kind );											// ｱﾝﾀﾞｰﾗｲﾝ設定の解除
			PCMD_KANJILINECLR( pri_kind );										// ｱﾝﾀﾞｰﾗｲﾝ設定の解除
			sprintf( pEditwk," 振替日" );
			PrnStr_SPDAY( pEditwk, 1 );											// 振替印字ﾃﾞｰﾀ登録
		}
		/*------	空白	------*/
		Prn_edit_space( pri_kind );
		Prn_edit_space( pri_kind );
	}
	p_proc_data->Prn_no_data1 = edit_tbl_no;									// 編集済みﾃｰﾌﾞﾙ数保存
}

/*[]-----------------------------------------------------------------------[]*/
/*|		特別日（曜日）印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SPLDAY_edit_Yobi( pri_kind )						|*/
/*|	PARAMETER		:	uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|	RETURN VALUE	:	void												|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:																|*/
/*|	Date	:	2006-08-29													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
#define		YOBI_START		56			// 特別曜日の開始ｱﾄﾞﾚｽ
#define		YOBI_END		67			// 特別曜日の終了ｱﾄﾞﾚｽ

void	SPLDAY_edit_Yobi( uchar pri_kind )
{
	uchar			addr;				// 曜日ﾃﾞｰﾀﾃｰﾌﾞﾙｱﾄﾞﾚｽ
	uchar			edit_pos = 0;		// 印字位置
	uchar			yobi_mont;			// 曜日：月ﾃﾞｰﾀ
	uchar			yobi_week;			// 曜日：週ﾃﾞｰﾀ
	uchar			yobi_yobi;			// 曜日：曜日ﾃﾞｰﾀ

	/*------	＜項目名称＞編集	------*/
	PCMD_LEFT( pri_kind );														// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );										// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );										// 漢字（通常）指定
	PrnStr( SplDay_Prn[4], pri_kind );											// 項目名称印字ﾃﾞｰﾀ登録

	/*------	＜特別日（曜日）ﾃﾞｰﾀ＞編集	------*/
	for(addr = YOBI_START; addr <= YOBI_END; addr++ ){							// 曜日設定検索（１２対地）
		yobi_mont = (uchar)prm_get( COM_PRM, S_TOK, (short)addr, 2, 3 );		// 曜日：　月ﾃﾞｰﾀ取得
		yobi_week = (uchar)prm_get( COM_PRM, S_TOK, (short)addr, 1, 2 );		// 曜日：　週ﾃﾞｰﾀ取得
		yobi_yobi = (uchar)prm_get( COM_PRM, S_TOK, (short)addr, 1, 1 );		// 曜日：曜日ﾃﾞｰﾀ取得

		if ((yobi_mont != 0) && (yobi_week != 0) && (yobi_yobi != 0)) {			// 曜日の設定ﾃﾞｰﾀあり？
			if( edit_pos == 0 ){												// 編集位置？
				// 印字行の１番目に編集する場合
				// cEditwk1←”xx月 第xＸ曜日”ﾃﾞｰﾀ編集
				if (yobi_mont == 99) 
					sprintf( cEditwk1, " %s月 %s%s曜日", WEKFFNT[8], WKNO[yobi_week], WEKFFNT[yobi_yobi]);
				else
					sprintf( cEditwk1, " %2d月 %s%s曜日", yobi_mont, WKNO[yobi_week], WEKFFNT[yobi_yobi]);
			}
			else{
				// 印字行の２番目に編集する場合
				// cEditwk2←”xx月 第x月曜日”ﾃﾞｰﾀ編集
				if (yobi_mont == 99) 
					sprintf( cEditwk2,"   %s月 %s%s曜日", WEKFFNT[8], WKNO[yobi_week], WEKFFNT[yobi_yobi]);
				else
					sprintf( cEditwk2,"   %2d月 %s%s曜日", yobi_mont, WKNO[yobi_week], WEKFFNT[yobi_yobi]);

				strcat( cEditwk1, cEditwk2 );									// 編集済みﾃﾞｰﾀに追加
			}

			if( ++edit_pos == 2 ){												// 編集位置更新
				// ２件分のﾃﾞｰﾀ編集終了した場合
				PrnStr( cEditwk1, pri_kind );									// 編集済みの印字ﾃﾞｰﾀ登録
				edit_pos = 0;													// 編集位置ﾘｾｯﾄ
			}
		}
	}
	if( edit_pos != 0 ){
		// 未登録の編集済みﾃﾞｰﾀがある場合
		PrnStr( cEditwk1, pri_kind );											// 編集済みの印字ﾃﾞｰﾀ登録
	}
	/*------	１行空白	------*/
	Prn_edit_space( pri_kind );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		特別日（ﾊｯﾋﾟｰﾏﾝﾃﾞｰ）印字ﾃﾞｰﾀ編集処理								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SPLDAY_edit_Hmon( pri_kind )						|*/
/*|																			|*/
/*|	PARAMETER		:	uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-07-19													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
#define		HMON_START		42			// ﾊｯﾋﾟｰﾏﾝﾃﾞｰﾃﾞｰﾀﾃｰﾌﾞﾙの開始ｱﾄﾞﾚｽ

void	SPLDAY_edit_Hmon( uchar pri_kind, uchar check )
{
	uchar			addr;				// ﾊｯﾋﾟｰﾏﾝﾃﾞｰﾃﾞｰﾀﾃｰﾌﾞﾙｱﾄﾞﾚｽ
	uchar			no;					// ﾊｯﾋﾟｰﾏﾝﾃﾞｰﾃﾞｰﾀNo.
	uchar			edit_pos = 0;		// 印字位置
	uchar			hmon_mont;			// ﾊｯﾋﾟｰﾏﾝﾃﾞｰ：月ﾃﾞｰﾀ
	uchar			hmon_week;			// ﾊｯﾋﾟｰﾏﾝﾃﾞｰ：週ﾃﾞｰﾀ
	uchar			chk_day = 0;

	/*------	＜項目名称＞編集	------*/
	PCMD_LEFT( pri_kind );															// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );											// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );											// 漢字（通常）指定
	PrnStr( SplDay_Prn[2], pri_kind );												// 項目名称印字ﾃﾞｰﾀ登録

	/*------	＜特別日（ﾊｯﾋﾟｰﾏﾝﾃﾞｰ）ﾃﾞｰﾀ＞編集	------*/
	addr = HMON_START;
	for( no = 1 ; no <= 12 ; no++ ){												// ﾊｯﾋﾟｰﾏﾝﾃﾞｰ設定検索（１２対地）

		if( (no%2)==1 ){
			hmon_mont	= (uchar)prm_get( COM_PRM, S_TOK, (short)addr, 2, 5 );		// ﾊｯﾋﾟｰﾏﾝﾃﾞｰ：月　ﾃﾞｰﾀ取得
			hmon_week	= (uchar)prm_get( COM_PRM, S_TOK, (short)addr, 1, 4 );		// ﾊｯﾋﾟｰﾏﾝﾃﾞｰ：週　ﾃﾞｰﾀ取得
		}
		else{
			hmon_mont	= (uchar)prm_get( COM_PRM, S_TOK, (short)addr, 2, 2 );		// ﾊｯﾋﾟｰﾏﾝﾃﾞｰ：月　ﾃﾞｰﾀ取得
			hmon_week	= (uchar)prm_get( COM_PRM, S_TOK, (short)addr, 1, 1 );		// ﾊｯﾋﾟｰﾏﾝﾃﾞｰ：週　ﾃﾞｰﾀ取得
		}

		if( (hmon_mont != 0) && (hmon_week != 0) ){									// ﾊｯﾋﾟｰﾏﾝﾃﾞｰの設定ﾃﾞｰﾀあり？

			if(!check){
				if( edit_pos == 0 ){													// 編集位置？
					// 印字行の１番目に編集する場合
					sprintf( cEditwk1," %2d月 第%d月曜日", hmon_mont, hmon_week );		// cEditwk1←”xx月 第x月曜日”ﾃﾞｰﾀ編集
				}
				else{
					// 印字行の２番目に編集する場合
					sprintf( cEditwk2,"    %2d月 第%d月曜日", hmon_mont, hmon_week );	// cEditwk2←”xx月 第x月曜日”ﾃﾞｰﾀ編集
					strcat( cEditwk1, cEditwk2 );										// 編集済みﾃﾞｰﾀに追加
				}
			}else{
				chk_day = 0;
				if(rangechk(1, 12, hmon_mont)){									// 月
					if(rangechk(1, 5, hmon_week)){									// 週
						chk_day = 1;
					}
				}
				
				if(chk_day){
					if( edit_pos == 0 ){													// 編集位置？
						// 印字行の１番目に編集する場合
						sprintf( cEditwk1," %2d月 第%d月曜日", hmon_mont, hmon_week );		// cEditwk1←”xx月 第x月曜日”ﾃﾞｰﾀ編集
					}
					else{
						// 印字行の２番目に編集する場合
						sprintf( cEditwk2,"    %2d月 第%d月曜日", hmon_mont, hmon_week );	// cEditwk2←”xx月 第x月曜日”ﾃﾞｰﾀ編集
						strcat( cEditwk1, cEditwk2 );										// 編集済みﾃﾞｰﾀに追加
					}
				}else{
					if( edit_pos == 0 ){													// 編集位置？
						// 印字行の１番目に編集する場合
						sprintf( cEditwk1,"     %s",Charge_Base[60] );
						Cal_Parameter_Flg = 1;
					}
					else{
						// 印字行の２番目に編集する場合
						sprintf( cEditwk2,"        %s",Charge_Base[60] );
						strcat( cEditwk1, cEditwk2 );										// 編集済みﾃﾞｰﾀに追加
						Cal_Parameter_Flg = 1;
					}
				}
			}
			edit_pos++;																// 編集位置更新

			if( edit_pos == 2 ){

				// ２件分のﾃﾞｰﾀ編集終了した場合

				PrnStr( cEditwk1, pri_kind );										// 編集済みの印字ﾃﾞｰﾀ登録
				edit_pos = 0;														// 編集位置ﾘｾｯﾄ
			}

		}
		if( (no%2) == 0 ){															// ﾊｯﾋﾟｰﾏﾝﾃﾞｰﾃﾞｰﾀｱﾄﾞﾚｽ更新
			addr++;
		}
	}
	if( edit_pos != 0 ){

		// 未登録の編集済みﾃﾞｰﾀがある場合
		PrnStr( cEditwk1, pri_kind );												// 編集済みの印字ﾃﾞｰﾀ登録
	}
	/*------	１行空白	------*/
	Prn_edit_space( pri_kind );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		特別日（特別曜日）印字ﾃﾞｰﾀ編集処理  								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SPLDAY_edit_SPWEEK( pri_kind )						|*/
/*|																			|*/
/*|	PARAMETER		:	uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	T.Namioka													|*/
/*|	Date	:	2006-02-28													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
#define		SPWEEK_START		56			// 特別曜日ﾃﾞｰﾀﾃｰﾌﾞﾙの開始ｱﾄﾞﾚｽ

void	SPLDAY_edit_SPWEEK( uchar pri_kind, uchar check )
{
	uchar			addr;				// 特別曜日ﾃﾞｰﾀﾃｰﾌﾞﾙｱﾄﾞﾚｽ
	uchar			no;					// 特別曜日ﾃﾞｰﾀNo.
	uchar			edit_pos = 0;		// 印字位置
	uchar			sweek_mont;			// 特別曜日：月ﾃﾞｰﾀ
	uchar			sweek_week;			// 特別曜日：週ﾃﾞｰﾀ
	uchar			sweek_weekly;		// 特別曜日：曜日ﾃﾞｰﾀ
	uchar			chk_day = 0;

	/*------	＜項目名称＞編集	------*/
	PCMD_LEFT( pri_kind );															// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );											// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );											// 漢字（通常）指定
	PrnStr( SplDay_Prn[4], pri_kind );												// 項目名称印字ﾃﾞｰﾀ登録

	/*------	＜特別日（特別曜日）ﾃﾞｰﾀ＞編集	------*/
	addr = SPWEEK_START;
	for( no = 1 ; no <= 12 ; no++ ){												// 特別曜日設定検索（１２対地）

		sweek_mont		= (uchar)prm_get( COM_PRM, S_TOK, (short)addr, 2, 3 );		// 特別曜日：月　ﾃﾞｰﾀ取得
		sweek_week		= (uchar)prm_get( COM_PRM, S_TOK, (short)addr, 1, 2 );		// 特別曜日：週　ﾃﾞｰﾀ取得
		sweek_weekly	= (uchar)prm_get( COM_PRM, S_TOK, (short)addr, 1, 1 );		// 特別曜日：週　ﾃﾞｰﾀ取得

		if( (sweek_mont != 0) && (sweek_week != 0) && (sweek_weekly != 0)){			// 特別曜日の設定ﾃﾞｰﾀあり？

			if(!check){
				if( edit_pos == 0 ){													// 編集位置？
					// 印字行の１番目に編集する場合
					sprintf( cEditwk1," %2d月 第%d%2s曜日", sweek_mont, sweek_week, WEEKLYFFNT[sweek_weekly] );		// cEditwk1←”xx月 第xx曜日”ﾃﾞｰﾀ編集
				}
				else{
					// 印字行の２番目に編集する場合
					sprintf( cEditwk2,"    %2d月 第%d%2s曜日", sweek_mont, sweek_week, WEEKLYFFNT[sweek_weekly] );	// cEditwk2←”xx月 第xx曜日”ﾃﾞｰﾀ編集
					strcat( cEditwk1, cEditwk2 );										// 編集済みﾃﾞｰﾀに追加
				}
			}else{
				chk_day = 0;
				if(rangechk(1, 12, sweek_mont)){									// 月
					if(rangechk(1, 5, sweek_week)){									// 週
						if(rangechk(1, 7, sweek_weekly)){							// 曜日
							chk_day = 1;
						}
					}
				}
				
				if(chk_day){
					if( edit_pos == 0 ){													// 編集位置？
						// 印字行の１番目に編集する場合
						sprintf( cEditwk1," %2d月 第%d%2s曜日", sweek_mont, sweek_week, WEEKLYFFNT[sweek_weekly] );		// cEditwk1←”xx月 第xx曜日”ﾃﾞｰﾀ編集
					}
					else{
						// 印字行の２番目に編集する場合
						sprintf( cEditwk2,"    %2d月 第%d%2s曜日", sweek_mont, sweek_week, WEEKLYFFNT[sweek_weekly] );	// cEditwk2←”xx月 第xx曜日”ﾃﾞｰﾀ編集
						strcat( cEditwk1, cEditwk2 );										// 編集済みﾃﾞｰﾀに追加
					}
				}else{
					if( edit_pos == 0 ){													// 編集位置？
						// 印字行の１番目に編集する場合
						sprintf( cEditwk1,"     %s",Charge_Base[60] );
						Cal_Parameter_Flg = 1;
					}
					else{
						// 印字行の２番目に編集する場合
						sprintf( cEditwk2,"        %s",Charge_Base[60] );
						strcat( cEditwk1, cEditwk2 );										// 編集済みﾃﾞｰﾀに追加
						Cal_Parameter_Flg = 1;
					}
				}
			}
			edit_pos++;																// 編集位置更新

			if( edit_pos == 2 ){

				// ２件分のﾃﾞｰﾀ編集終了した場合

				PrnStr( cEditwk1, pri_kind );										// 編集済みの印字ﾃﾞｰﾀ登録
				edit_pos = 0;														// 編集位置ﾘｾｯﾄ
			}

		}
		addr++;

	}
	if( edit_pos != 0 ){

		// 未登録の編集済みﾃﾞｰﾀがある場合
		PrnStr( cEditwk1, pri_kind );												// 編集済みの印字ﾃﾞｰﾀ登録
	}

	/*------	１行空白	------*/
	Prn_edit_space( pri_kind );

}

/*[]-----------------------------------------------------------------------[]*/
/*|		特別日（特別年月日）印字ﾃﾞｰﾀ編集処理  								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SPLDAY_edit_SPYEAR( pri_kind )						|*/
/*|																			|*/
/*|	PARAMETER		:	uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	T.Namioka													|*/
/*|	Date	:	2006-02-28													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
#define		SPYEAR_START		50			// 特別年月日ﾃﾞｰﾀﾃｰﾌﾞﾙの開始ｱﾄﾞﾚｽ

void	SPLDAY_edit_SPYEAR( uchar pri_kind, uchar check )
{
	uchar			addr;				// 特別年月日ﾃﾞｰﾀﾃｰﾌﾞﾙｱﾄﾞﾚｽ
	uchar			no;					// 特別年月日ﾃﾞｰﾀNo.
	uchar			edit_pos = 0;		// 印字位置
	uchar			sweek_year;			// 特別年月日：年ﾃﾞｰﾀ
	uchar			sweek_mont;			// 特別年月日：月ﾃﾞｰﾀ
	uchar			sweek_day;			// 特別年月日：週ﾃﾞｰﾀ
	ushort			NowYear = (CLK_REC.year) % 100;	// 現在年
	uchar			prm = 0;
	uchar			chk_day = 0;

	/*------	＜項目名称＞編集	------*/
	PCMD_LEFT( pri_kind );															// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );											// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );											// 漢字（通常）指定
	PrnStr( SplDay_Prn[3], pri_kind );												// 項目名称印字ﾃﾞｰﾀ登録

	/*------	＜特別日（特別年月日）ﾃﾞｰﾀ＞編集	------*/
	addr = SPYEAR_START;
	for( no = 1 ; no <= SP_YAER_MAX ; no++ ){										// 特別年月日設定検索（１２対地）

		sweek_year		= (uchar)prm_get( COM_PRM, S_TOK, (short)addr, 2, 5 );		// 特別年月日：年　ﾃﾞｰﾀ取得
		sweek_mont		= (uchar)prm_get( COM_PRM, S_TOK, (short)addr, 2, 3 );		// 特別年月日：月　ﾃﾞｰﾀ取得
		sweek_day		= (uchar)prm_get( COM_PRM, S_TOK, (short)addr, 2, 1 );		// 特別年月日：日　ﾃﾞｰﾀ取得

		if( (sweek_year != 0) && (sweek_mont != 0) && (sweek_day != 0)){			// 特別年月日の設定ﾃﾞｰﾀあり？
			if( !check ){
				if( sweek_year == NowYear ){
					sprintf( cEditwk1," 20%02d年 %2d月 %2d日", sweek_year, sweek_mont, sweek_day );	// cEditwk1←”xxxx年 xx月 xx日”ﾃﾞｰﾀ編集
					PrnStr( cEditwk1, pri_kind );										// 編集済みの印字ﾃﾞｰﾀ登録
					edit_pos++;
				}
			}else{
				chk_day = 0;
				if(rangechk(1, 79, sweek_year)){
					prm = cm14((short)(sweek_year+2000));
					if(rangechk(1, 12, sweek_mont)){									// 開始月
						if(rangechk(1,monday[ prm ][ sweek_mont - 1 ], sweek_day)){			// 開始日
							chk_day = 1;
						}
					}
				}
				if(chk_day){
					sprintf( cEditwk1," 20%02d年 %2d月 %2d日", sweek_year, sweek_mont, sweek_day );	// cEditwk1←”xxxx年 xx月 xx日”ﾃﾞｰﾀ編集
				}else{
					sprintf( cEditwk1,"%s",Charge_Base[60]);
					Cal_Parameter_Flg = 1;
				}
				PrnStr( cEditwk1, pri_kind );										// 編集済みの印字ﾃﾞｰﾀ登録
				edit_pos++;
			}

		}
		addr++;
	}
	if(!edit_pos){
		sprintf( cEditwk1," %s","該当日なし");										// cEditwk1←”該当日なし”ﾃﾞｰﾀ編集
		PrnStr( cEditwk1, pri_kind );												// 編集済みの印字ﾃﾞｰﾀ登録
	}
}

/*[]-----------------------------------------------------------------------------------[]*/
/*|		停留車情報印字ﾃﾞｰﾀ編集処理														|*/
/*[]-----------------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	TRJOU_edit( Kikai_no, Day, Cnt, *Data, pri_kind, *p_proc_data )	|*/
/*|																						|*/
/*|	PARAMETER		:	ushort	Kikai_no	=	機械Ｎｏ．								|*/
/*|																						|*/
/*|						ushort	Kakari_no	=	係員Ｎｏ．								|*/
/*|																						|*/
/*|						short	Day			=	停留日数								|*/
/*|																						|*/
/*|						short	Cnt			=	停留車数								|*/
/*|																						|*/
/*|						short	*Data		=	停留車ﾃﾞｰﾀﾎﾟｲﾝﾀｰ						|*/
/*|																						|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ								|*/
/*|													R_PRI  : ﾚｼｰﾄ						|*/
/*|													J_PRI  : ｼﾞｬｰﾅﾙ						|*/
/*|																						|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ				|*/
/*|																						|*/
/*|	RETURN VALUE	:	void															|*/
/*|																						|*/
/*[]-----------------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi																|*/
/*|	Date	:	2005-07-20																|*/
/*|	Update	:																			|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----------------[]*/
void	TRJOU_edit( ushort Kikai_no, ushort Kakari_no, short Day, short Cnt, short *Data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar			edit_cnt = 0;		// 編集行数ﾜｰｸ
	ushort			data_no;			// 停留車情報ﾃﾞｰﾀNo.
	ushort			lk_no;				// ﾛｯｸ装置No.
	ulong			pk_posi;			// 駐車位置ﾃﾞｰﾀ
	flp_com			*pk_info;			// 駐車位置情報ﾎﾟｲﾝﾀｰ
	date_time_rec	date;				// 日時ﾃﾞｰﾀﾜｰｸ


	if( p_proc_data->Prn_no == 0 ){

		// 編集開始（初回編集）の場合

		// 表題（"停留車情報(駐車)"/"停留車情報(駐輪)"）印字ﾃﾞｰﾀ編集
		edit_cnt += Prn_edit_Title	(						
										(char*)((gCurSrtPara != MNT_BIK) ? "停留車情報(駐車)" : "停留車情報(駐輪)"),
										FONT_K_YOKOBAI,
										pri_kind
									);

		/*------	１行空白	------*/
		edit_cnt += Prn_edit_space( pri_kind );

		/*------	＜機械NO.／係員NO.＞編集	------*/
		KikaiNoSet( cEditwk1, Kikai_no );							// 機械NO.編集
		KakariNoSet( cEditwk2, Kakari_no );							// 係員NO.編集

		Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,										// 文字列１：機械NO.印字ﾃﾞｰﾀ
					cEditwk2,										// 文字列２：係員NO.印字ﾃﾞｰﾀ
					pri_kind										// 印字先ﾌﾟﾘﾝﾀ
				);

		edit_cnt++;

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );								// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );									// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );								// 時刻　印字ﾃﾞｰﾀ登録

		edit_cnt++;

		/*------	１行空白	------*/
		edit_cnt += Prn_edit_space( pri_kind );

		/*------	＜停留日数＞編集	------*/
		sprintf	( prn_work, "  停留日数  %d日以上", Day );
		PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );								// 停留日数　印字ﾃﾞｰﾀ登録

		edit_cnt++;

		/*------	＜停留車数＞編集	------*/
		sprintf	( prn_work, "  停留車数  %d台", Cnt );
		PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );								// 停留車数　印字ﾃﾞｰﾀ登録

		edit_cnt++;

		p_proc_data->Prn_no = 1;									// 編集対象とする停留車情報ﾃﾞｰﾀNo.ｾｯﾄ

		if( Cnt != 0 ){												// 停留車あり？

			// 停留車がある場合

			/*------	"＜車室＞        ＜入庫日時＞"編集	------*/
			sprintf	( prn_work, "＜車室＞        ＜入庫日時＞" );
			PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
			PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
			PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
			PrnStr( prn_work, pri_kind );

			edit_cnt++;
		}
	}

	data_no = p_proc_data->Prn_no;									// 編集対象とする停留車情報ﾃﾞｰﾀNo.取得

	for( ; data_no <= Cnt ; data_no++ ){							// 停留車情報ﾃﾞｰﾀNo.毎編集処理ﾙｰﾌﾟ

		/*------	＜駐車位置＆入庫日時＞編集	------*/

		lk_no = Data[data_no-1] + 1;								// 編集対象とするﾛｯｸ装置No.取得
		pk_info = &FLAPDT.flp_data[lk_no-1];						// 編集対象とする車室情報ﾎﾟｲﾝﾀｰ取得
		pk_posi = Prn_pkposi_make( lk_no );							// 駐車位置（区画＆番号）ﾃﾞｰﾀ取得

		date.Year	= pk_info->year;								// 入庫時刻ﾃﾞｰﾀ取得
		date.Mon	= pk_info->mont;
		date.Day	= pk_info->date;
		date.Hour	= pk_info->hour;
		date.Min	= pk_info->minu;

		Prn_edit_pkposi( cEditwk1, pk_posi, 2 );					// cEditwk1←駐車位置印字ﾃﾞｰﾀ（先頭に半角ｽﾍﾟｰｽ２個挿入）
		Prn_edit_Date( cEditwk2, &date );							// cEditwk2←入庫時刻印字ﾃﾞｰﾀ

		Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,										// 文字列１：駐車位置印字ﾃﾞｰﾀ
					cEditwk2,										// 文字列２：入庫時刻印字ﾃﾞｰﾀ
					pri_kind										// 印字先ﾌﾟﾘﾝﾀ
				);

		edit_cnt++;

		if( edit_cnt >= EDIT_GYOU_MAX ){							// 編集行数ﾁｪｯｸ

			// 最大編集行数になった場合

			data_no++;												// 次処理で編集する停留車情報ﾃﾞｰﾀNo.をｾｯﾄ
			break;													// ﾃﾞｰﾀ編集処理ﾙｰﾌﾟを抜ける
		}
	}

	if( data_no > Cnt ){											// 全停留車情報ﾃﾞｰﾀ編集終了？
		// 全ての停留車情報ﾃﾞｰﾀについて編集終了した場合
		p_proc_data->Final	= ON;									// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
	else{
		// 未編集の停留車情報ﾃﾞｰﾀがある場合
		p_proc_data->Prn_no = data_no;								// 次に編集する停留車情報ﾃﾞｰﾀNo.をｾｰﾌﾞ
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		停復電情報印字ﾃﾞｰﾀ編集												|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	TFJOU_edit( *Ponlog, pri_kind, *p_proc_data )		|*/
/*|																			|*/
/*|	PARAMETER		:	Pon_log		*Ponlog		=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ				|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-27													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	TFJOU_edit( Pon_log *Ponlog, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{

	/*------	時刻ﾀｲﾄﾙ印字ﾃﾞｰﾀ編集	------*/
	TFJOU_edit_TimeTtl( pri_kind );

	/*------	停電／復電時刻ﾃﾞｰﾀ編集	------*/
	TFJOU_edit_TimeData( Ponlog, pri_kind );

	/*------	ｸﾘｱ情報付加ﾃﾞｰﾀ編集	------*/
	TFJOU_edit_ClrData( pri_kind );

	/*------	編集終了	------*/
	p_proc_data->Final = ON;							// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ

}

/*[]-----------------------------------------------------------------------[]*/
/*|		停復電情報：時刻ﾀｲﾄﾙ印字ﾃﾞｰﾀ編集処理								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	TFJOU_edit_TimeTtl( pri_kind )						|*/
/*|																			|*/
/*|	PARAMETER		:	uchar				pri_kind	=	印字先ﾌﾟﾘﾝﾀ		|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-27													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	TFJOU_edit_TimeTtl( uchar pri_kind )
{
	uchar	edit_cnt=0;

	PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
	PrnStr( " 停電時刻           復電時刻", pri_kind );		// 時刻ﾀｲﾄﾙ印字ﾃﾞｰﾀ登録

	edit_cnt++;

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		停復電情報：停電／復電時刻ﾃﾞｰﾀ編集処理								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	TFJOU_edit_TimeData( *Ponlog, pri_kind )			|*/
/*|																			|*/
/*|	PARAMETER		:	Pon_log		*Ponlog		=	停復電情報ﾎﾟｲﾝﾀｰ		|*/
/*|																			|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-27													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	TFJOU_edit_TimeData( Pon_log *Ponlog, uchar pri_kind )
{
	uchar	edit_cnt=0;		// 編集行数
	uchar	Tei_year;		// 停電年ﾃﾞｰﾀ（下２桁）
	uchar	Fuk_year;		// 復電年ﾃﾞｰﾀ（下２桁）
	uchar	wkuc[2];


	Tei_year = (uchar)(Ponlog->Pdw_Date.Year % 100);
	Fuk_year = (uchar)(Ponlog->Pon_Date.Year % 100);

	// 停電日時set
	sprintf(	// cEditwk1←停電時刻／復電時刻印字ﾃﾞｰﾀ
			cEditwk1, " %02d/%02d/%02d %02d:%02d",

				Tei_year,					// 停電時刻：年（下２桁）
				Ponlog->Pdw_Date.Mon,		// 停電時刻：月
				Ponlog->Pdw_Date.Day,		// 停電時刻：日
				Ponlog->Pdw_Date.Hour,		// 停電時刻：時
				Ponlog->Pdw_Date.Min		// 停電時刻：分
			);

	// ステータス欄
	// ５文字分のスペースの後ろ３文字を使用して起動時のステータスを表す。
	// 以下3,4,5文字目をORして印字する。例）"  R1D"

	strcat( cEditwk1, "  " );									// 1,2文字目（ｽﾍﾟｰｽ固定）

	// ［起動要因］（3文字目）
	// 		通常PoweON起動時＝"     "
	// 		ﾘｾｯﾄ起動時      ＝"  R  "
	if( Ponlog->Pon_nmi == 1 )									// 通常ではない起動要因
		strcat( cEditwk1, "R" );
	else
		strcat( cEditwk1, " " );

	// ［ｸﾘｱ内容］（4文字目）
	//		F1&F3押し起動   ＝"   1 "
	//		F2&F4押し起動   ＝"   2 "
	//		F3&F5押し起動   ＝"   3 "
	wkuc[0] = (uchar)((Ponlog->Pon_kind) & 0x7f);						// 停復電種類get
	if( (1 <= wkuc[0]) && (wkuc[0] <= 3) ){
		wkuc[0] += '0';
		wkuc[1] = 0;
		strcat( cEditwk1, (const char *)wkuc );
	}
	else
		strcat( cEditwk1, " " );

	// ［共通ﾊﾟﾗﾒｰﾀﾃﾞｰﾀﾀﾞｳﾝﾛｰﾄﾞ（FlashROM→SRAMへのｺﾋﾟｰ）実施］（5文字目）
	//		実施            ＝"    D"
	if( 0 != ((Ponlog->Pon_kind) & 0x80) ){						// FlashROM→SRAMへのｺﾋﾟｰ実施
		wkuc[0] = 'D';
		wkuc[1] = 0;
		strcat( cEditwk1, (const char *)wkuc );
	}
	else
		strcat( cEditwk1, " " );


	// 復電時刻
	sprintf(	// cEditwk1←停電時刻／復電時刻印字ﾃﾞｰﾀ
				cEditwk2, "%02d/%02d/%02d %02d:%02d",

				Fuk_year,					// 復電時刻：年（下２桁）
				Ponlog->Pon_Date.Mon,		// 復電時刻：月
				Ponlog->Pon_Date.Day,		// 復電時刻：日
				Ponlog->Pon_Date.Hour,		// 復電時刻：時
				Ponlog->Pon_Date.Min		// 復電時刻：分
			);

	strcat( cEditwk1, (const char *)cEditwk2 );

	PCMD_LEFT( pri_kind );								// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );				// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );				// 漢字（通常）指定
	PrnStr( cEditwk1, pri_kind );						// 停電／復電時刻印字ﾃﾞｰﾀ登録

	edit_cnt++;

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		停復電情報：ｸﾘｱ情報印字ﾃﾞｰﾀ編集処理									|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	TFJOU_edit_ClrData( pri_kind )						|*/
/*|																			|*/
/*|	PARAMETER		:	uchar				pri_kind	=	印字先ﾌﾟﾘﾝﾀ		|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:                                                               |*/
/*|	Date	:                               								|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	TFJOU_edit_ClrData( uchar pri_kind )
{
	uchar	edit_cnt=0;

	if(( !StartingFunctionKey )&&( !(PowonSts_Param & 0x4000) )&&( !(PowonSts_LockParam & 0x4000) )){
		return( edit_cnt );									// 印字内容による分岐
	}

	PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
	PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
	switch( StartingFunctionKey )							// 印字内容による分岐
	{														//
		case 1:												// RAMｸﾘｱ要求３(F3&F5 ON)
			PrnStr( "*** RAMｸﾘｱ + ﾊﾟﾗﾒｰﾀﾃﾞﾌｫﾙﾄ ***", pri_kind );	// 時刻ﾀｲﾄﾙ印字ﾃﾞｰﾀ登録
			edit_cnt++;
			break;											//

		case 2:												// RAMｸﾘｱ要求１(F1&F3 ON)
			PrnStr( "*** RAMｸﾘｱ ***", pri_kind );			// 時刻ﾀｲﾄﾙ印字ﾃﾞｰﾀ登録
			edit_cnt++;
			break;											//

		case 3:												// RAMｸﾘｱ要求２(F2&F4 ON)
			PrnStr( "*** ﾊﾟﾗﾒｰﾀﾃﾞﾌｫﾙﾄ ***", pri_kind );		// 時刻ﾀｲﾄﾙ印字ﾃﾞｰﾀ登録
			edit_cnt++;
			break;											//

		default:
			break;
	}														//

	if( 0 != (PowonSts_Param & 0x4000) || 0 != (PowonSts_LockParam & 0x4000) ){	// FLASH⇒RAMへのパラメータデータ転送
		PrnStr( "*** ﾊﾟﾗﾒｰﾀﾀﾞｳﾝﾛｰﾄﾞ ***", pri_kind );		// 時刻ﾀｲﾄﾙ印字ﾃﾞｰﾀ登録
		edit_cnt++;
	}

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		停復電履歴印字ﾃﾞｰﾀ編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	TFLOG_edit( Kikai_no, pri_kind, *p_proc_data )		|*/
/*|																			|*/
/*|	PARAMETER		:	ushort	Kikai_no	=	機械Ｎｏ．					|*/
/*|																			|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-27													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	TFLOG_edit( T_FrmLogPriReq2 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ
	uchar	f_Printer;			// 出力プリンタ種別（0=レシート、1=ジャーナル）
	ushort	Sdate;				// 検索開始日
	ushort	date[3];			// 年月日
	ushort	index;				// ログ検索位置
	ushort	tf_date;			// 停復電発生日

	if( J_PRI == pri_kind ){	// 出力プリンタ=ジャーナル
		f_Printer = 1;			// 出力プリンタ種別 = ジャーナル
	}else{
		f_Printer = 0;			// レシート
	}
	if( p_proc_data->Log_Start == OFF ){

		// 編集開始（初回編集）の場合

		/*------	＜表題＞編集	------*/
		Prn_edit_Title	(							// 表題（"停復電情報"）印字ﾃﾞｰﾀ編集
							"停復電情報",
							FONT_K_YOKOBAI,
							pri_kind
						);

		/*------	１行空白	------*/
		Prn_edit_space( pri_kind );

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, msg_data->Kikai_no );				// 機械NO.編集
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );							// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 時刻　印字ﾃﾞｰﾀ登録

		/*------	１行空白	------*/
		p_proc_data->Log_DataPt = 0;							// 検索インデックスは先頭に指定

		// ﾛｸﾞ情報が正常な場合

		/*------	印字要求内容ﾁｪｯｸ	------*/

		switch( msg_data->BType ){	// 検索方法？

			case	0:	// 全て

				sprintf(										// cEditwk1←検索方法印字ﾃﾞｰﾀ
							cEditwk1,
							"全て(%d件)",
							msg_data->LogCount
						);
				p_proc_data->Log_TotalCount = msg_data->LogCount;

				break;

			case	1:	// 日付指定

				//	指定日ﾁｪｯｸ
				if( OK == DateChk( (date_time_rec *)&msg_data->TSttTime ) ){

					// 指定日が正常な場合
					Sdate = dnrmlzm(							// 指定日ﾃﾞｰﾀ取得
										(short)msg_data->TSttTime.Year,
										(short)msg_data->TSttTime.Mon,
										(short)msg_data->TSttTime.Day
									);

					p_proc_data->Log_Sdate = Sdate;				// 指定日ﾃﾞｰﾀｾｰﾌﾞ
					date[0] = (short)msg_data->TSttTime.Year;
					date[1] = (short)msg_data->TSttTime.Mon;
					date[2] = (short)msg_data->TSttTime.Day;
					p_proc_data->Log_TotalCount = Ope2_Log_CountGet_inDate( eLOG_POWERON,
																			&date[0],
																			&index );// 登録件数set
					p_proc_data->Log_DataPt = index;

					sprintf(									// cEditwk1←検索方法印字ﾃﾞｰﾀ
								cEditwk1,
								"%04d/%d/%d分",
								msg_data->TSttTime.Year,
								msg_data->TSttTime.Mon,
								msg_data->TSttTime.Day
							);
				}
				else{
					// 指定日が異常な場合
					Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
					edit_end = ON;								// 編集終了
				}

				break;


			default:	// その他（検索方法指定ｴﾗｰ）

				Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録

				edit_end = ON;									// 編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
				break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
		}

		if( edit_end != ON ){

			// 検索方法の指定が正常な場合

			/*------	＜検索方法＞編集	------*/
			PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
			PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録

			/*------	１行空白	------*/
			Prn_edit_space( pri_kind );

			/*------	編集制御ﾜｰｸｾｯﾄ	------*/
			p_proc_data->Log_Start	= ON;						// Log_Start	← ﾛｸﾞﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ

			if( p_proc_data->Log_TotalCount == 0 ){
				// 格納件数が０の場合
				edit_end = ON;									// 編集終了
			}else{
				/*------	時刻ﾀｲﾄﾙ印字ﾃﾞｰﾀ編集	------*/
				TFJOU_edit_TimeTtl( pri_kind );
			}
		}
	}
	else{
		// ２回目以降の編集処理
		switch( msg_data->BType ){	// 検索方法？

			case	0:	// 全て

				if( p_proc_data->Log_Edit == OFF ){			// １停復電データ編集中
					if(0 == Ope_Log_1DataGet( eLOG_POWERON, p_proc_data->Log_DataPt, (void *)&Pri_Work[f_Printer].Pon_log_work ) ){
						// データが取得エラーの場合は印字しない
						p_proc_data->Log_TotalCount = 0;
						edit_end = ON;	// 編集終了
					}
				}
				break;

			case	1:	// 日付指定

				if( p_proc_data->Log_Edit == OFF ){			// １停復電データ編集中
					for( ; p_proc_data->Log_TotalCount > 0 ; ){	// 日付が一致するﾛｸﾞ情報を格納件数分検索する
						if(0 == Ope_Log_1DataGet( eLOG_POWERON, p_proc_data->Log_DataPt, (void *)&Pri_Work[f_Printer].Pon_log_work ) ){
							// データが取得エラーの場合は印字しない
							p_proc_data->Log_TotalCount = 0;
							edit_end = ON;	// 編集終了
							break;
						}
						tf_date = dnrmlzm(				// 対象ﾛｸﾞ情報の精算日取得
								(short)Pri_Work[f_Printer].Pon_log_work.Pon_Date.Year,
								(short)Pri_Work[f_Printer].Pon_log_work.Pon_Date.Mon,
								(short)Pri_Work[f_Printer].Pon_log_work.Pon_Date.Day
							);
						if( tf_date == p_proc_data->Log_Sdate ){
							// 対象ﾛｸﾞ情報の停電発生日が指定日と一致した場合
							break;							// 検索ﾙｰﾌﾟを抜ける
						}
						p_proc_data->Log_DataPt++;			// 次に検索するログのインデックスをセット
					}
				}

				break;

		}

		if( p_proc_data->Log_TotalCount > 0 ){				// 格納件数分の検索＆編集終了？(N)

			// 格納件数分の検索＆編集を終了していない場合

			p_proc_data->Log_Edit = ON;						// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞｾｯﾄ

			TFJOU_edit_TimeData(								// 印字対象停復電データ編集
								(Pon_log *)&Pri_Work[f_Printer].Pon_log_work,
								pri_kind
							);

			// １停復電データ編集終了
			p_proc_data->Log_Edit = OFF;					// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞﾘｾｯﾄ

			p_proc_data->Log_TotalCount--;					// 格納件数ﾃﾞｸﾘﾒﾝﾄ
			p_proc_data->Log_DataPt++;						// 次に編集するログの情報のインデックスをセット

		}

		if( p_proc_data->Log_TotalCount == 0 ){				// 全ﾛｸﾞ情報編集終了？

			// 格納件数分の編集が終了した場合
			edit_end = ON;										// 編集終了
		}

	}	// ２回目以降の編集処理end

	/*------	編集終了ﾁｪｯｸ	------*/
	if( edit_end == ON ){	
		p_proc_data->Final = ON;			// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
}

/*[]---------------------------------------------------------------------------[]*/
/*|		個別精算情報印字ﾃﾞｰﾀ編集処理											|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SEISANLOG_edit( *msg_data, pri_kind, *p_proc_data)		|*/
/*|																				|*/
/*|	PARAMETER		:	T_FrmLogPriReq2	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|																				|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|	RETURN VALUE	:	void													|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi														|*/
/*|	Date	:	2005-06-14														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
void	SEISANLOG_edit( T_FrmLogPriReq2 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ
	ushort	Sdate;				// 検索開始日
	ushort	seisan_date;		// 精算日ﾃﾞｰﾀ
	uchar	ret2;				// 精算ﾃﾞｰﾀ編集処理結果
	uchar	f_Printer;			// 出力プリンタ種別（0=レシート、1=ジャーナル）
	uchar	Flap_Sub_FlgB;		// バックアップ用変数
	ushort	date[3];			// 年月日
	ushort	index;				// ログ検索位置

	if( J_PRI == pri_kind )		// 出力プリンタ=ジャーナル
		f_Printer = 1;			// 出力プリンタ種別 = ジャーナル
	else
		f_Printer = 0;			// レシート

	if( p_proc_data->Log_Start == OFF ){

		// 編集開始（初回編集）の場合

		/*------	＜表題＞編集	------*/
		Prn_edit_Title	(										// 表題（"個別精算情報"）印字ﾃﾞｰﾀ編集
							"個別精算情報",
							FONT_K_YOKOBAI,
							pri_kind
						);

		/*------	１行空白	------*/
		Prn_edit_space( pri_kind );

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, msg_data->Kikai_no );				// 機械NO.編集
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );							// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnStr( prn_work, pri_kind );							// 時刻　印字ﾃﾞｰﾀ登録

		/*------	個別精算情報件数検索	------*/

		p_proc_data->Log_DataPt = 0;							// 検索インデックスは先頭に指定

			// ﾛｸﾞ情報が正常な場合

			/*------	印字要求内容ﾁｪｯｸ	------*/

			switch( msg_data->BType ){	// 検索方法？

				case	0:	// 全て

					sprintf(										// cEditwk1←検索方法印字ﾃﾞｰﾀ
								cEditwk1,
								"全て(%d件)",
								msg_data->LogCount
							);
					p_proc_data->Log_TotalCount = msg_data->LogCount;

					break;

				case	1:	// 日付指定

					//	指定日ﾁｪｯｸ
					if( OK == DateChk( (date_time_rec *)&msg_data->TSttTime ) ){

						// 指定日が正常な場合
						Sdate = dnrmlzm(							// 指定日ﾃﾞｰﾀ取得
											(short)msg_data->TSttTime.Year,
											(short)msg_data->TSttTime.Mon,
											(short)msg_data->TSttTime.Day
										);

						p_proc_data->Log_Sdate = Sdate;				// 指定日ﾃﾞｰﾀｾｰﾌﾞ
						date[0] = (short)msg_data->TSttTime.Year;
						date[1] = (short)msg_data->TSttTime.Mon;
						date[2] = (short)msg_data->TSttTime.Day;
						p_proc_data->Log_TotalCount = Ope2_Log_CountGet_inDate( eLOG_PAYMENT,
																				&date[0],
																				&index );// 登録件数set
						p_proc_data->Log_DataPt = index;

						sprintf(									// cEditwk1←検索方法印字ﾃﾞｰﾀ
									cEditwk1,
									"%04d/%d/%d分",
									msg_data->TSttTime.Year,
									msg_data->TSttTime.Mon,
									msg_data->TSttTime.Day
								);
					}
					else{
						// 指定日が異常な場合
						Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
						edit_end = ON;								// 編集終了
					}

					break;

				default:	// その他（検索方法指定ｴﾗｰ）

					Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録

					edit_end = ON;									// 編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
					break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			}

			if( edit_end != ON ){

				// 検索方法の指定が正常な場合

				/*------	＜検索方法＞編集	------*/
				PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
				PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録

				/*------	１行空白	------*/
				Prn_edit_space( pri_kind );

				/*------	編集制御ﾜｰｸｾｯﾄ	------*/
				p_proc_data->Log_Start	= ON;						// Log_Start	← ﾛｸﾞﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ

				if( p_proc_data->Log_TotalCount == 0 ){
					// 格納件数が０の場合
					edit_end = ON;									// 編集終了
				}
			}
	}	// 初回編集処理end

	else{

		// ２回目以降の編集処理

		switch( msg_data->BType ){	// 検索方法？

			case	0:	// 全て
				if( p_proc_data->Log_Edit == OFF ){			// １精算ﾃﾞｰﾀ編集中
					if(0 == Ope_Log_1DataGet( eLOG_PAYMENT, p_proc_data->Log_DataPt, (void *)&Pri_Work[f_Printer].Receipt_data ) ){
						// データが取得エラーの場合は印字しない
						p_proc_data->Log_TotalCount = 0;
						edit_end = ON;	// 編集終了
					}
				}
				break;

			case	1:	// 日付指定
				if( p_proc_data->Log_Edit == OFF ){			// １精算ﾃﾞｰﾀ編集中
					for( ; p_proc_data->Log_TotalCount > 0 ; ){	// 日付が一致するﾛｸﾞ情報を格納件数分検索する
						if(0 == Ope_Log_1DataGet( eLOG_PAYMENT, p_proc_data->Log_DataPt, (void *)&Pri_Work[f_Printer].Receipt_data ) ){
							// データが取得エラーの場合は印字しない
							p_proc_data->Log_TotalCount = 0;
							edit_end = ON;	// 編集終了
							break;
						}
						seisan_date = dnrmlzm(				// 対象ﾛｸﾞ情報の精算日取得
								(short)Pri_Work[f_Printer].Receipt_data.TOutTime.Year,
								(short)Pri_Work[f_Printer].Receipt_data.TOutTime.Mon,
								(short)Pri_Work[f_Printer].Receipt_data.TOutTime.Day
							);
						if( seisan_date == p_proc_data->Log_Sdate ){
							// 対象ﾛｸﾞ情報の精算日が指定日と一致した場合
							break;							// 検索ﾙｰﾌﾟを抜ける
						}
						p_proc_data->Log_DataPt++;			// 次に検索するログのインデックスをセット
					}
				}
				break;
		}

		if( p_proc_data->Log_TotalCount > 0 ){				// 格納件数分の検索＆編集終了？(N)

			// 格納件数分の検索＆編集を終了していない場合

			p_proc_data->Log_Edit = ON;						// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞｾｯﾄ

			Flap_Sub_FlgB = Flap_Sub_Flg;
			Flap_Sub_Flg = 0;
// MH321800(S) D.Inaba ICクレジット対応
			if( Pri_Work[f_Printer].Receipt_data.Electron_data.Ec.E_Status.BIT.deemed_receive == 1 ){
			// 決済精算中止(復決済)フラグが立っている
			ret2 = Recv_DeemedData_edit(							// 印字対象精算ﾃﾞｰﾀ編集
								(Receipt_data *)&Pri_Work[f_Printer].Receipt_data,
								pri_kind,
								p_proc_data
							);
			}
			else {
// MH321800(E) D.Inaba ICクレジット対応	
			ret2 = RYOUSYUU_edit(							// 印字対象精算ﾃﾞｰﾀ編集
									(Receipt_data *)&Pri_Work[f_Printer].Receipt_data,
									pri_kind,
									p_proc_data
								);
// MH321800(S) D.Inaba ICクレジット対応
			}
// MH321800(E) D.Inaba ICクレジット対応

			Flap_Sub_Flg = Flap_Sub_FlgB;

			if( ret2 == YES ){

				// １精算ﾃﾞｰﾀ編集終了の場合

				p_proc_data->Log_Edit = OFF;				// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞﾘｾｯﾄ

				p_proc_data->Log_TotalCount--;				// 格納件数ﾃﾞｸﾘﾒﾝﾄ
				p_proc_data->Log_DataPt++;					// 次に編集するログの情報のインデックスをセット

			}
		}

		if( p_proc_data->Log_TotalCount == 0 ){				// 全ﾛｸﾞ情報編集終了？

			// 格納件数分の編集が終了した場合
			edit_end = ON;									// 編集終了
		}

	}	// ２回目以降の編集処理end

	/*------	編集終了ﾁｪｯｸ	------*/
	if( edit_end == ON ){	
		p_proc_data->Final = ON;			// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
}

/*[]-------------------------------------------------------------------------------[]*/
/*|		不正・強制出庫情報印字ﾃﾞｰﾀ編集												|*/
/*[]-------------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	FUSKYOJOU_edit( *fuskyo, pri_kind, *p_proc_data )			|*/
/*|																					|*/
/*|	PARAMETER		:	flp_log		*fuskyo		=	不正・強制出庫情報ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ						|*/
/*|							R_PRI  : ﾚｼｰﾄ											|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ											|*/
/*|																					|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																					|*/
/*|	RETURN VALUE	:	void														|*/
/*|																					|*/
/*[]-------------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi															|*/
/*|	Date	:	2005-08-02															|*/
/*|	Update	:																		|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.------------[]*/
void	FUSKYOJOU_edit( flp_log *fuskyo, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{

	/*------	表題印字ﾃﾞｰﾀ編集	------*/
	if( fuskyo->Lok_inf ){								// 不正ｏｒ強制　？
		// 不正出庫
		Prn_edit_Title	(								// 表題（"不正出庫"）印字ﾃﾞｰﾀ編集
							"不正出庫",
							FONT_K_YOKOBAI,
							pri_kind
						);
	}
	else{
		// 強制出庫
		Prn_edit_Title	(								// 表題（"強制出庫"）印字ﾃﾞｰﾀ編集
							"強制出庫",
							FONT_K_YOKOBAI,
							pri_kind
						);
	}

	/*------	＜不正・強制出庫ﾃﾞｰﾀ＞編集	------*/
	FUSKYO_edit_data( fuskyo, pri_kind );				// 印字ﾃﾞｰﾀ編集

	/*------	編集終了	------*/
	p_proc_data->Final = ON;							// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ

}

/*[]---------------------------------------------------------------------------[]*/
/*|		不正・強制出庫履歴印字ﾃﾞｰﾀ編集処理										|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	FUSKYOLOG_edit( *msg_data, pri_kind, *p_proc_data)		|*/
/*|																				|*/
/*|	PARAMETER		:	T_FrmLogPriReq2	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|																				|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|	RETURN VALUE	:	void													|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi														|*/
/*|	Date	:	2005-06-16														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
void	FUSKYOLOG_edit( T_FrmLogPriReq2 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ
	ushort	Sdate;				// 検索開始日
	ushort	Out_date;			// 不正・強制出庫日ﾃﾞｰﾀ
	ushort	FusCnt;				// 不正出庫ﾃﾞｰﾀ数
	ushort	KyoCnt;				// 強制出庫ﾃﾞｰﾀ数
	uchar	Terget;				// 印字対象（OFF:非対象ﾃﾞｰﾀ／ON:対象ﾃﾞｰﾀ）
	ushort	date[3];			// 年月日
	ushort	index;				// ログ検索位置

	if( p_proc_data->Log_Start == OFF ){

		// 編集開始（初回編集）の場合

		/*------	＜表題＞編集	------*/
		Prn_edit_Title	(										// 表題（"不正・強制出庫情報"）印字ﾃﾞｰﾀ編集
							"不正・強制出庫情報",
							FONT_K_YOKOBAI,
							pri_kind
						);

		/*------	１行空白	------*/
		Prn_edit_space( pri_kind );

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, msg_data->Kikai_no );				// 機械NO.編集
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );							// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnStr( prn_work, pri_kind );							// 時刻　印字ﾃﾞｰﾀ登録

		/*------	不正・強制出庫情報件数検索	------*/
		p_proc_data->Log_DataPt = 0;// 検索インデックスは先頭に指定
		p_proc_data->Log_Count = Ope2_Log_CountGet( LOG_ABNORMAL );		// 登録件数set

			// ﾛｸﾞ情報が正常な場合

			/*------	印字要求内容ﾁｪｯｸ	------*/

			switch( msg_data->BType ){	// 検索方法？

				case	0:	// 全て

					sprintf(										// cEditwk1←検索方法印字ﾃﾞｰﾀ
								cEditwk1,
								"全て"
							);
					p_proc_data->Log_Count = Ope2_Log_CountGet( LOG_ABNORMAL );		// 登録件数set

					break;

				case	1:	// 日付指定

					//	指定日ﾁｪｯｸ
					if( OK == DateChk( (date_time_rec *)&msg_data->TSttTime ) ){

						// 指定日が正常な場合
						Sdate = dnrmlzm(							// 指定日ﾃﾞｰﾀ取得
											(short)msg_data->TSttTime.Year,
											(short)msg_data->TSttTime.Mon,
											(short)msg_data->TSttTime.Day
										);

						p_proc_data->Log_Sdate = Sdate;				// 指定日ﾃﾞｰﾀｾｰﾌﾞ
						date[0] = (short)msg_data->TSttTime.Year;
						date[1] = (short)msg_data->TSttTime.Mon;
						date[2] = (short)msg_data->TSttTime.Day;
						p_proc_data->Log_Count = Ope2_Log_CountGet_inDate( eLOG_ABNORMAL,
																		   &date[0],
																		   &index );// 登録件数set
						p_proc_data->Log_DataPt = index;

						sprintf(									// cEditwk1←検索方法印字ﾃﾞｰﾀ
									cEditwk1,
									"%04d/%d/%d分",
									msg_data->TSttTime.Year,
									msg_data->TSttTime.Mon,
									msg_data->TSttTime.Day
								);
					}
					else{
						// 指定日が異常な場合
						Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
						edit_end = ON;								// 編集終了
					}

					break;

				default:	// その他（検索方法指定ｴﾗｰ）

					Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録

					edit_end = ON;									// 編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
					break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			}

			if( edit_end != ON ){

				// 検索方法の指定が正常な場合

				/*------	＜検索方法＞編集	------*/
				PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
				PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録

				/*------	１行空白	------*/
				Prn_edit_space( pri_kind );

				/*------	編集制御ﾜｰｸｾｯﾄ	------*/
				p_proc_data->Log_Start	= ON;						// Log_Start	← ﾛｸﾞﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ

				if( p_proc_data->Log_Count == 0 ){

					// 格納件数が０の場合
					edit_end = ON;										// 編集終了
				}
				else{
					// 格納件数が０でない場合
					FUSKYOLOG_cnt_get( msg_data, &FusCnt, &KyoCnt, p_proc_data );	// 不正・強制出庫ﾃﾞｰﾀ件数取得
					p_proc_data->Prn_no			= 0;								// Prn_no		←　不正出庫ﾃﾞｰﾀ印字項目番号
					p_proc_data->Prn_no_data1	= FusCnt;							// Prn_no_data1	←　不正出庫ﾃﾞｰﾀ件数
					p_proc_data->Prn_no_data2	= KyoCnt;							// Prn_no_data2	←　強制出庫ﾃﾞｰﾀ件数
					p_proc_data->Prn_no_wk[0]	= OFF;								// Prn_no_wk[0]	←　不正・強制出庫ﾃﾞｰﾀ件数印字ﾌﾗｸﾞ
					p_proc_data->Log_no_wk[0]	= p_proc_data->Log_Count;			// 「格納件数」ｾｰﾌﾞ
					p_proc_data->Log_no_wk[1]	= p_proc_data->Log_DataPt;			// 「最古ﾛｸﾞ情報の配列番号」ｾｰﾌﾞ
				}
			}

	}	// 初回編集処理end

	else{

		// ２回目以降の編集処理

		switch( msg_data->BType ){	// 検索方法？

			case	0:	// 全て
				if(0 == Ope_Log_1DataGet( eLOG_ABNORMAL, p_proc_data->Log_DataPt, (void *)&Pri_Work[0].Flp_log ) ){
					// データが取得エラーの場合は印字しない
					p_proc_data->Log_Count = 0;
					edit_end = ON;	// 編集終了
				}

				break;

			case	1:	// 日付指定

				for( ; p_proc_data->Log_Count > 0 ; ){	// 日付が一致するﾛｸﾞ情報を格納件数分検索する

					if(0 == Ope_Log_1DataGet( eLOG_ABNORMAL, p_proc_data->Log_DataPt, (void *)&Pri_Work[0].Flp_log ) ){
						// データが取得エラーの場合は印字しない
						p_proc_data->Log_Count = 0;
						edit_end = ON;								// 編集終了
						break;
					}
					Out_date = dnrmlzm(		// 対象ﾛｸﾞ情報の不正・強制発生日取得
										(short)Pri_Work[0].Flp_log.Date_Time.Year,
										(short)Pri_Work[0].Flp_log.Date_Time.Mon,
										(short)Pri_Work[0].Flp_log.Date_Time.Day
									);

					if( Out_date == p_proc_data->Log_Sdate ){

						// 対象ﾛｸﾞ情報の発生日が指定日と一致した場合

						break;											// 検索ﾙｰﾌﾟを抜ける
					}
					else if( Out_date > p_proc_data->Log_Sdate ){

						// 対象ﾛｸﾞ情報の発生日が指定日より大きい場合
						p_proc_data->Log_Count = 0;						// 件数ｸﾘｱ（検索を終了する）
					}
					else{
						p_proc_data->Log_DataPt++;						// 次に検索するログのインデックスをセット
					}
				}

				break;
		}

		if( p_proc_data->Log_Count > 0 ){				// 格納件数分の検索＆編集終了？

			// 格納件数分の検索＆編集を終了していない場合

			if( p_proc_data->Prn_no == 0 ){
				// 不正出庫ﾃﾞｰﾀ印字中
				if( Pri_Work[0].Flp_log.Lok_inf != PRI_KYOUSEI ){
					Terget = ON;
				}
				else{
					Terget = OFF;
				}
			}
			else{
				// 強制出庫ﾃﾞｰﾀ印字中
				if( Pri_Work[0].Flp_log.Lok_inf == PRI_KYOUSEI ){
					Terget = ON;
				}
				else{
					Terget = OFF;
				}
			}
			if( Terget == ON ){
				// 印字対象ﾃﾞｰﾀの場合

				if( p_proc_data->Prn_no_wk[0] == OFF ){

					// 不正・強制出庫ﾃﾞｰﾀ印字開始の場合

					/*------	＜不正・強制出庫ﾃﾞｰﾀ件数＞編集	------*/
					PCMD_CENTER( pri_kind );				// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
					PrnFontSize( FONT_A_NML, pri_kind );	// ﾌｫﾝﾄＡ（通常）指定
					PrnFontSize( FONT_K_NML, pri_kind );	// 漢字（通常）指定

					if( p_proc_data->Prn_no == 0 ){

						sprintf( cEditwk1,"不正出庫(%d件)", p_proc_data->Prn_no_data1 );
					}
					else{
						sprintf( cEditwk1,"強制出庫(%d件)", p_proc_data->Prn_no_data2 );
					}
					PrnStr( cEditwk1, pri_kind );			// 「不正・強制出庫ﾃﾞｰﾀ件数」印字ﾃﾞｰﾀ登録
					p_proc_data->Prn_no_wk[0] = ON;			// 「不正・強制出庫ﾃﾞｰﾀ件数」印字ﾌﾗｸﾞｾｯﾄ
				}

				/*------	＜不正・強制出庫ﾃﾞｰﾀ＞編集	------*/
				FUSKYO_edit_data(							// 印字対象ﾃﾞｰﾀ編集
								&Pri_Work[0].Flp_log,
								pri_kind );

			}
			p_proc_data->Log_Count--;						// 格納件数ﾃﾞｸﾘﾒﾝﾄ
			p_proc_data->Log_DataPt++;					// 次に編集するログの情報のインデックスをセット
		}
		if( p_proc_data->Log_Count == 0 ){					// 全ﾛｸﾞ情報編集終了？

			// 格納件数分の編集が終了した場合
			if( p_proc_data->Prn_no == 0 ){

				// 不正出庫ﾃﾞｰﾀ印字だった場合
				p_proc_data->Prn_no			= 1;							// 強制出庫ﾃﾞｰﾀ印字項目番号ｾｯﾄ
				p_proc_data->Prn_no_wk[0]	= OFF;							// 「不正・強制出庫ﾃﾞｰﾀ件数」印字ﾌﾗｸﾞﾘｾｯﾄ
				p_proc_data->Log_Count		= p_proc_data->Log_no_wk[0];	// 「格納件数」ﾘｶﾊﾞｰ
				p_proc_data->Log_DataPt		= p_proc_data->Log_no_wk[1];	// 「最古ﾛｸﾞ情報の配列番号」ﾘｶﾊﾞｰ
			}
			else{
				// 強制出庫ﾃﾞｰﾀ印字だった場合
				edit_end = ON;							// 編集終了
			}
		}

	}	// ２回目以降の編集処理end

	/*------	編集終了ﾁｪｯｸ	------*/
	if( edit_end == ON ){	
		p_proc_data->Final = ON;						// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
}

/*[]---------------------------------------------------------------------------[]*/
/*|		不正・強制出庫ﾃﾞｰﾀ件数検索処理											|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	FUSKYOLOG_cnt_get( *msg_data, *FusCnt, *KyoCnt )		|*/
/*|																				|*/
/*|	PARAMETER		:	T_FrmLogPriReq2	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|						ushort			*FusCnt		=	不正ﾃﾞｰﾀ件数格納ﾎﾟｲﾝﾀｰ	|*/
/*|																				|*/
/*|						ushort			*KyoCnt		=	強制ﾃﾞｰﾀ件数格納ﾎﾟｲﾝﾀｰ	|*/
/*|																				|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|	RETURN VALUE	:	void													|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi														|*/
/*|	Date	:	2005-06-16														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
void	FUSKYOLOG_cnt_get( T_FrmLogPriReq2 *msg_data, ushort *FusCnt, ushort *KyoCnt, PRN_PROC_DATA *p_proc_data )
{
	ushort	cnt;			// ﾃﾞｰﾀ件数
	ushort	dpt;			// ﾃﾞｰﾀﾎﾟｲﾝﾀ－
	ushort	Out_date;		// 発生日
	uchar	Terget;			// ﾁｪｯｸ対象（OFF:非対象ﾃﾞｰﾀ／ON:対象ﾃﾞｰﾀ）
	uchar	FusKyoInf;		// 動作情報（不正／強制）


	*FusCnt = 0;					// 不正出庫ﾃﾞｰﾀ件数ｸﾘｱ
	*KyoCnt = 0;					// 強制出庫ﾃﾞｰﾀ件数ｸﾘｱ
	cnt = p_proc_data->Log_Count;	// 格納ﾃﾞｰﾀ件数ｾｯﾄ
	dpt = p_proc_data->Log_DataPt;	// 検索開始ﾎﾟｲﾝﾀｰｾｯﾄ（最古ﾃﾞｰﾀﾎﾟｲﾝﾀｰ）

	if( cnt != 0 ){

		for( ; cnt > 0 ; ){			// 格納ﾃﾞｰﾀ件数分の検索処理ﾙｰﾌﾟ

			switch( msg_data->BType ){	// 検索方法？

				case	0:		// 全て

					if(0 == Ope_Log_1DataGet( eLOG_ABNORMAL, dpt, (void *)&Pri_Work[0].Flp_log ) ){
						cnt = 0;						// データが取得エラーの場合は検索を終了する
						break;
					}
					Terget = ON;
					break;

				case	1:		// 日付指定

					if(0 == Ope_Log_1DataGet( eLOG_ABNORMAL, dpt, (void *)&Pri_Work[0].Flp_log ) ){
						cnt = 0;						// データが取得エラーの場合は検索を終了する
						break;
					}
					Out_date = dnrmlzm(		// 対象ﾛｸﾞ情報の不正・強制発生日取得
										(short)Pri_Work[0].Flp_log.Date_Time.Year,
										(short)Pri_Work[0].Flp_log.Date_Time.Mon,
										(short)Pri_Work[0].Flp_log.Date_Time.Day
									);

					if( Out_date == p_proc_data->Log_Sdate ){

						// 対象ﾛｸﾞ情報の発生日が指定日と一致した場合
						Terget = ON;
					}
					else{
						// 対象ﾛｸﾞ情報の発生日が指定日と一致しない場合
						Terget = OFF;

						if( Out_date > p_proc_data->Log_Sdate ){

							// 対象ﾛｸﾞ情報の発生日が指定日より大きい場合
							cnt = 0;						// 検索を終了する
						}
					}
					break;

				default:		// その他（検索方法ｴﾗｰ）
					cnt = 0;								// 検索処理を終了する
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
					break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			}

			if( cnt == 0 ){									// 検索終了？
				break;										// YES→検索処理ﾙｰﾌﾟを抜ける
			}
			if( Terget == ON ){

				// 対象ﾛｸﾞが検索指定の対象ﾃﾞｰﾀの場合

				FusKyoInf = Pri_Work[0].Flp_log.Lok_inf;
				if( FusKyoInf == PRI_KYOUSEI ){
					// 強制出庫ﾃﾞｰﾀ
					(*KyoCnt)++;
				}
				else if( FusKyoInf == PRI_FUSEI ){
					// 不正出庫ﾃﾞｰﾀ
					(*FusCnt)++;
				}
				else if( FusKyoInf == 2 ){
					// 不正出庫ﾃﾞｰﾀ
					(*FusCnt)++;
				}
				else{
					// その他のﾃﾞｰﾀ
					Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
				}
				cnt--;										// ﾃﾞｰﾀ件数ﾃﾞｸﾘﾒﾝﾄ
			}
			dpt++;											// 次に検索するログのインデックスをセット
		}
	}
}

/*[]---------------------------------------------------------------------------[]*/
/*|		不正・強制出庫印字ﾃﾞｰﾀ編集												|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	FUSKYO_edit_data( *FusKyo, pri_kind )					|*/
/*|																				|*/
/*|	PARAMETER		:	flp_log		*FusKyo		=	不正・強制出庫ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																				|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|																				|*/
/*|	RETURN VALUE	:	void													|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi														|*/
/*|	Date	:	2005-06-15														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
void	FUSKYO_edit_data( flp_log *FusKyo, uchar pri_kind )
{
	/*------	＜機械NO.／追番＞編集	------*/
	KikaiNoSet(	cEditwk1, FusKyo->Kikai_no );					// 機械NO.印字ﾃﾞｰﾀ編集

	if(FusKyo->Lok_inf == 0){
		OibanSet( cEditwk2, CountSel( &FusKyo->count), 11 );	// 追番印字ﾃﾞｰﾀ編集
	}else{
		OibanSet( cEditwk2, CountSel( &FusKyo->count), 12 );	// 追番印字ﾃﾞｰﾀ編集
	}
	if(FusKyo->Lok_inf == 2 ){
		strcat( cEditwk1, "（修正）" );							// cEditwk1←（修正）ﾃﾞｰﾀ追加
	}
	Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
				cEditwk1,										// 文字列１：機械NO.印字ﾃﾞｰﾀ
				cEditwk2,										// 文字列２：追番印字ﾃﾞｰﾀ
				pri_kind										// 印字先ﾌﾟﾘﾝﾀ
			);

	/*------	駐車位置	------*/
	Prn_edit_pkposi( cEditwk1, FusKyo->WPlace, 0 );		// cEditwk1←駐車位置印字ﾃﾞｰﾀ
	Prn_edit_sya_syu( cEditwk2, (ushort)FusKyo->ryo_syu, 1, 0);	// cEditwk2←車室番号＆車種ﾃﾞｰﾀ

	Str_Set1(											// -----印字ﾃﾞｰﾀ編集-----
				cEditwk2,								// 文字列１：車室番号＆車種ﾃﾞｰﾀ
				cEditwk1,								// 文字列２：駐車位置印字ﾃﾞｰﾀ
				pri_kind								// 印字先ﾌﾟﾘﾝﾀ
			);

	/*------	入庫日時	------*/
	Prn_edit_Date( cEditwk1, &FusKyo->In_Time );		// cEditwk1←入庫日時印字ﾃﾞｰﾀ

	Str_Set1(											// -----印字ﾃﾞｰﾀ編集-----
				" 入庫時刻",							// 文字列１：" 入庫時刻"
				cEditwk1,								// 文字列２：入庫日時印字ﾃﾞｰﾀ
				pri_kind								// 印字先ﾌﾟﾘﾝﾀ
			);

	/*------	発生日時	------*/
	Prn_edit_Date( cEditwk1, &FusKyo->Date_Time );		// cEditwk1←発生日時印字ﾃﾞｰﾀ

	Str_Set1(											// -----印字ﾃﾞｰﾀ編集-----
				" 発生時刻",							// 文字列１：" 発生時刻"
				cEditwk1,								// 文字列２：発生日時印字ﾃﾞｰﾀ
				pri_kind								// 印字先ﾌﾟﾘﾝﾀ
			);

	/*------	駐車料金	------*/

	sprintf( cMnydata , "%ld" , FusKyo->fusei_fee );	// 駐車料金ﾃﾞｰﾀ編集
	Camma_Set( (uchar *)cMnydata );						// 駐車料金３桁区切り（”、”挿入）
	
	Str_Set2(											// -----印字ﾃﾞｰﾀ編集-----
				" 駐車料金",							// 文字列１："駐車料金"
				SyubetuRyokin[FusKyo->ryo_syu],			// 文字列２：料金種別印字ﾃﾞｰﾀ
				cMnydata,								// 文字列３：料金印字ﾃﾞｰﾀ
				Pri_Tanni[PriT_YEN],					// 文字列４："円"
				pri_kind								// 印字先ﾌﾟﾘﾝﾀ
			);
}

/*[]-----------------------------------------------------------------------[]*/
/*|		用紙入替時ﾃｽﾄ印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	IREKAETST_edit( pri_kind, *p_proc_data )			|*/
/*|																			|*/
/*|	PARAMETER		:	uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-12													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	IREKAETST_edit( uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{

	/*------	＜表題＞編集	------*/
	Prn_edit_Title	(							// 表題（"用紙入替テスト印字"）印字ﾃﾞｰﾀ編集
						"用紙入替テスト印字",
						FONT_K_YOKOBAI,
						pri_kind
					);

	/*------	１行空白	------*/
	Prn_edit_space( pri_kind );

	/*------	＜時刻＞編集	------*/
	Prn_edit_NowDate( prn_work );				// 現在日時印字ﾃﾞｰﾀ編集
	PCMD_CENTER( pri_kind );					// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
	PrnFontSize( FONT_A_NML, pri_kind );		// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );		// 漢字（通常）指定
	PrnStr( prn_work, pri_kind );				// 時刻　印字ﾃﾞｰﾀ登録

	/*------	編集終了	------*/
	p_proc_data->Final = ON;					// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ

}

/*[]-----------------------------------------------------------------------[]*/
/*|		ﾌﾟﾘﾝﾀﾃｽﾄ印字ﾃﾞｰﾀ編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	PRITEST_edit(  pri_kind, *p_proc_data)				|*/
/*|																			|*/
/*|	PARAMETER		:	uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-06													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	PRITEST_edit( uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	ushort	pri_no;				// 編集項目No.(0=表題、1=漢字（全角）、2=ﾌｫﾝﾄＡ、3=ﾌｫﾝﾄＢ)
	uchar	para;
	uchar	msg_no;

	pri_no = p_proc_data->Prn_no;

	switch( pri_no ){	// 編集項目？

		case	0:		// 表題

			/*------	表題	------*/
			Prn_edit_Title	(						// 表題印字ﾃﾞｰﾀ編集
								"テ ス ト 印 字",
								FONT_K_YOKOBAI,
								pri_kind
							);

			/*------	１行空白	------*/
			Prn_edit_space( pri_kind );

			/*------	＜時刻＞編集	------*/
			Prn_edit_NowDate( prn_work );			// 現在日時印字ﾃﾞｰﾀ編集
			PCMD_CENTER( pri_kind );				// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
			PrnFontSize( FONT_A_NML, pri_kind );	// ﾌｫﾝﾄＡ（通常）指定
			PrnFontSize( FONT_K_NML, pri_kind );	// 漢字（通常）指定
			PrnStr( prn_work, pri_kind );			// 時刻　印字ﾃﾞｰﾀ登録

			/*------	１行空白	------*/
			Prn_edit_space( pri_kind );

			break;

		case	1:		// ロゴ
		
			PCMD_CENTER( pri_kind );					// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
			PrnStr( PriTest_Title[0], pri_kind );
			Prn_edit_logo( pri_kind );
			break;
			
		case	2:		// ヘッダー
		
			PCMD_CENTER( pri_kind );					// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
			PrnStr( PriTest_Title[1], pri_kind );
			Prn_edit_headhoot( PRI_HEADER, pri_kind );
			break;
			
		case	3:		// 預り証フッター
		
			PCMD_CENTER( pri_kind );					// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
			PrnStr( PriTest_Title[2], pri_kind );
			para = (uchar)CPrmSS[S_PRN][14];			// 「預り証固定ﾒｯｾｰｼﾞ番号」設定ﾃﾞｰﾀ取得
			switch(para){
				case 90 :								// 「釣り切れ固定ﾒｯｾｰｼﾞ１」印字ﾃﾞｰﾀ編集
					msg_no = 1;
					break;
				case 91 :								// 「釣り切れ固定ﾒｯｾｰｼﾞ２」印字ﾃﾞｰﾀ編集
					msg_no = 2;
					break;
				case 92 :								// 「釣り切れ固定ﾒｯｾｰｼﾞ３」印字ﾃﾞｰﾀ編集
					msg_no = 3;
					break;
				case 93 :								// 「釣り切れ固定ﾒｯｾｰｼﾞ４」印字ﾃﾞｰﾀ編集
					msg_no = 4;
					break;
				case 200 :								// 「釣り切れ固定ﾒｯｾｰｼﾞ５」印字ﾃﾞｰﾀ編集
					msg_no = 5;
					break;
				default:									// 釣り切れ可変メッセージ または 未定義
					msg_no = 0;
					break;
			}
			if(msg_no == 0){								// 釣り切れ可変メッセージ または 未定義
				Prn_edit_AzuFtr_edit( pri_kind );
			}
			else{											// 釣り切れ固定メッセージ１～４
				Prn_edit_TurikireMsg(msg_no, pri_kind);
			}
			break;
			
		case	4:		// Tカードフッター
		
			break;
		case	5:		// クレジット署名欄
		
			PCMD_CENTER( pri_kind );					// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
			PrnStr( PriTest_Title[4], pri_kind );
			Prn_edit_SyomeiKamei( PRI_SYOMEI, pri_kind );
			break;
			
		case	6:		// フッター

			PCMD_CENTER( pri_kind );					// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
			PrnStr( PriTest_Title[5], pri_kind );
			Prn_edit_headhoot( PRI_HOOTER, pri_kind );
			break;

		case	7:		// 漢字（全角）ﾃｽﾄ印字

			PRITEST_edit_Kanji( pri_kind );			// 漢字（全角）ﾃｽﾄ印字ﾃﾞｰﾀ編集
			break;

		case	8:		// ﾌｫﾝﾄＡﾃｽﾄ印字

			PRITEST_edit_fontA( pri_kind );			// ﾌｫﾝﾄＡﾃｽﾄ印字ﾃﾞｰﾀ編集
			break;

		case	9:		// ﾌｫﾝﾄＢﾃｽﾄ印字

			PRITEST_edit_fontB( pri_kind );			// ﾌｫﾝﾄＢﾃｽﾄ印字ﾃﾞｰﾀ編集
			break;

		default:	// その他（エラー）

			pri_no = 9;
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
	}

	if( pri_no >= 9 ){								// 全項目編集終了？
		// 編集終了
		p_proc_data->Prn_no	= 0;
		p_proc_data->Final	= ON;					// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ

		PrnFontSize( FONT_A_NML, pri_kind );		// ﾌｫﾝﾄＡ指定（通常）
		PrnFontSize( FONT_K_NML, pri_kind );		// 漢字ﾌｫﾝﾄ指定（通常）

		PCMD_LINECLR( pri_kind );					// ｱﾝﾀﾞｰﾗｲﾝの指定（解除）
		PCMD_KANJILINECLR( pri_kind );				// 漢字ｱﾝﾀﾞｰﾗｲﾝの指定（解除）

		PCMD_EMPHCLR( pri_kind );					// 強調印字（解除）

	}
	else{
		// 未編集の項目がある場合
		pri_no++;
		p_proc_data->Prn_no	= pri_no;
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		ﾌｫﾝﾄＢﾃｽﾄ印字ﾃﾞｰﾀ編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	PRITEST_edit_fontB( pri_kind )						|*/
/*|																			|*/
/*|	PARAMETER		:	uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-06													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	PRITEST_edit_fontB( uchar pri_kind )
{
	uchar	i;

	/*------	印字項目１（印字ﾌｫﾝﾄ名称）	------*/

	PrnFontSize( FONT_B_NML, pri_kind );		// ﾌｫﾝﾄ指定（ﾌｫﾝﾄＢ通常）

	PCMD_CENTER( pri_kind );					// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
	PrnStr( PriTest_FontB[0], pri_kind );

	/*------	印字項目２（ANYﾌｫﾝﾄ）	------*/

	PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]

	for( i = 0 ; i < 0x20 ; i++ ){				// 文字ｺｰﾄﾞ＝0x20～0x3F
		cEditwk1[i] = (char)(i+0x20);
	}
	cEditwk1[0x20] = 0;
	PrnStr( cEditwk1, pri_kind );

	for( i = 0 ; i < 0x20 ; i++ ){				// 文字ｺｰﾄﾞ＝0x40～0x5F
		cEditwk1[i] = (char)(i+0x40);
	}
	cEditwk1[0x20] = 0;
	PrnStr( cEditwk1, pri_kind );

	for( i = 0 ; i < 0x20 ; i++ ){				// 文字ｺｰﾄﾞ＝0x60～0x7F
		cEditwk1[i] = (char)(i+0x60);
	}
	cEditwk1[0x20] = 0;
	PrnStr( cEditwk1, pri_kind );

	for( i = 0 ; i < 0x3f ; i++ ){				// 文字ｺｰﾄﾞ＝0xA1～0xDF
		cEditwk1[i] = (char)(i+0xA1);
	}
	cEditwk1[0x3f] = 0;
	PrnStr( cEditwk1, pri_kind );

	/*------	印字項目３（通常）	------*/

	PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]
	PrnStr( PriTest_FontB[1], pri_kind );
	PCMD_CENTER( pri_kind );					// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
	PrnStr( PriTest_FontB[1], pri_kind );
	PCMD_RIGHT( pri_kind );						// [位置揃え(右揃え)]
	PrnStr( PriTest_FontB[1], pri_kind );

	PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]

	/*------	印字項目４（縦倍角）	------*/

	PrnFontSize( FONT_B_TATEBAI, pri_kind );	// ﾌｫﾝﾄ指定（ﾌｫﾝﾄＢ縦倍角）
	PrnStr( PriTest_FontB[2], pri_kind );

	/*------	印字項目５（横倍角）	------*/
	PrnFontSize( FONT_B_YOKOBAI, pri_kind );	// ﾌｫﾝﾄ指定（ﾌｫﾝﾄＢ横倍角）
	PrnStr( PriTest_FontB[3], pri_kind );

	/*------	印字項目６（４倍角）	------*/
	PrnFontSize( FONT_B_4BAI, pri_kind );		// ﾌｫﾝﾄ指定（ﾌｫﾝﾄＢ４倍角）
	PrnStr( PriTest_FontB[4], pri_kind );

	PrnFontSize( FONT_B_NML, pri_kind );		// ﾌｫﾝﾄ指定（ﾌｫﾝﾄＢ通常）

	/*------	印字項目７（１ﾄﾞｯﾄ幅ｱﾝﾀﾞｰﾗｲﾝ）	------*/
	PCMD_LINESET1( pri_kind );					// ｱﾝﾀﾞｰﾗｲﾝの指定（１ﾄﾞｯﾄ幅）
	PrnStr( PriTest_FontB[5], pri_kind );

	/*------	印字項目８（２ﾄﾞｯﾄ幅ｱﾝﾀﾞｰﾗｲﾝ）	------*/
	PCMD_LINESET2( pri_kind );					// ｱﾝﾀﾞｰﾗｲﾝの指定（２ﾄﾞｯﾄ幅）
	PrnStr( PriTest_FontB[6], pri_kind );

	PCMD_LINECLR( pri_kind );					// ｱﾝﾀﾞｰﾗｲﾝの指定（解除）

	/*------	印字項目９（強調印字）	------*/
	PCMD_EMPHSET( pri_kind );					// 強調印字（指定）
	PrnStr( PriTest_FontB[7], pri_kind );

	PCMD_EMPHCLR( pri_kind );					// 強調印字（解除）

}

/*[]-----------------------------------------------------------------------[]*/
/*|		ﾌｫﾝﾄＡﾃｽﾄ印字ﾃﾞｰﾀ編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	PRITEST_edit_fontA( pri_kind )						|*/
/*|																			|*/
/*|	PARAMETER		:	uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-06													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	PRITEST_edit_fontA( uchar pri_kind )
{
	uchar	i;

	/*------	印字項目１（印字ﾌｫﾝﾄ名称）	------*/

	PrnFontSize( FONT_A_NML, pri_kind );		// ﾌｫﾝﾄ指定（ﾌｫﾝﾄＡ通常）
	PCMD_CENTER( pri_kind );					// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
	PrnStr( PriTest_FontA[0], pri_kind );

	PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]

	/*------	印字項目２（ANYﾌｫﾝﾄ）	------*/

	PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]

	for( i = 0 ; i < 0x20 ; i++ ){				// 文字ｺｰﾄﾞ＝0x20～0x3F
		cEditwk1[i] = (char)(i+0x20);
	}
	cEditwk1[0x20] = 0;
	PrnStr( cEditwk1, pri_kind );

	for( i = 0 ; i < 0x20 ; i++ ){				// 文字ｺｰﾄﾞ＝0x40～0x5F
		cEditwk1[i] = (char)(i+0x40);
	}
	cEditwk1[0x20] = 0;
	PrnStr( cEditwk1, pri_kind );

	for( i = 0 ; i < 0x20 ; i++ ){				// 文字ｺｰﾄﾞ＝0x60～0x7F
		cEditwk1[i] = (char)(i+0x60);
	}
	cEditwk1[0x20] = 0;
	PrnStr( cEditwk1, pri_kind );

	for( i = 0 ; i < 0x3f ; i++ ){				// 文字ｺｰﾄﾞ＝0xA1～0xDF
		cEditwk1[i] = (char)(i+0xA1);
	}
	cEditwk1[0x3f] = 0;
	PrnStr( cEditwk1, pri_kind );

	/*------	印字項目３（通常）	------*/

	PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]
	PrnStr( PriTest_FontA[1], pri_kind );
	PCMD_CENTER( pri_kind );					// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
	PrnStr( PriTest_FontA[1], pri_kind );
	PCMD_RIGHT( pri_kind );						// [位置揃え(右揃え)]
	PrnStr( PriTest_FontA[1], pri_kind );

	PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]

	/*------	印字項目４（縦倍角）	------*/

	PrnFontSize( FONT_A_TATEBAI, pri_kind );	// ﾌｫﾝﾄ指定（ﾌｫﾝﾄＡ縦倍角）
	PrnStr( PriTest_FontA[2], pri_kind );

	/*------	印字項目５（横倍角）	------*/
	PrnFontSize( FONT_A_YOKOBAI, pri_kind );	// ﾌｫﾝﾄ指定（ﾌｫﾝﾄＡ横倍角）
	PrnStr( PriTest_FontA[3], pri_kind );

	/*------	印字項目６（４倍角）	------*/
	PrnFontSize( FONT_A_4BAI, pri_kind );		// ﾌｫﾝﾄ指定（ﾌｫﾝﾄＡ４倍角）
	PrnStr( PriTest_FontA[4], pri_kind );

	PrnFontSize( FONT_A_NML, pri_kind );		// ﾌｫﾝﾄ指定（ﾌｫﾝﾄＡ通常）

	/*------	印字項目７（１ﾄﾞｯﾄ幅ｱﾝﾀﾞｰﾗｲﾝ）	------*/
	PCMD_LINESET1( pri_kind );					// ｱﾝﾀﾞｰﾗｲﾝの指定（１ﾄﾞｯﾄ幅）
	PrnStr( PriTest_FontA[5], pri_kind );

	/*------	印字項目８（２ﾄﾞｯﾄ幅ｱﾝﾀﾞｰﾗｲﾝ）	------*/
	PCMD_LINESET2( pri_kind );					// ｱﾝﾀﾞｰﾗｲﾝの指定（２ﾄﾞｯﾄ幅）
	PrnStr( PriTest_FontA[6], pri_kind );

	PCMD_LINECLR( pri_kind );					// ｱﾝﾀﾞｰﾗｲﾝの指定（解除）

	/*------	印字項目９（強調印字）	------*/
	PCMD_EMPHSET( pri_kind );					// 強調印字（指定）
	PrnStr( PriTest_FontA[7], pri_kind );

	PCMD_EMPHCLR( pri_kind );					// 強調印字（解除）

}

/*[]-----------------------------------------------------------------------[]*/
/*|		漢字（全角）ﾃｽﾄ印字ﾃﾞｰﾀ編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	PRITEST_edit_Kanji( pri_kind )						|*/
/*|																			|*/
/*|	PARAMETER		:	uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-06													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	PRITEST_edit_Kanji( uchar pri_kind )
{
	uchar	i;

	/*------	印字項目１（印字ﾌｫﾝﾄ名称）	------*/

	PrnFontSize( FONT_K_NML, pri_kind );		// ﾌｫﾝﾄ指定（漢字通常）
	PCMD_CENTER( pri_kind );					// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
	PrnStr( PriTest_Kanji[0], pri_kind );

	/*------	印字項目２（ANYﾌｫﾝﾄ）	------*/

	PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]

	for( i =8 ; i < 15 ; i++ ){
		PrnStr( PriTest_Kanji[i], pri_kind );
	}

	/*------	印字項目３（通常）	------*/

	PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]
	PrnStr( PriTest_Kanji[1], pri_kind );
	PCMD_CENTER( pri_kind );					// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
	PrnStr( PriTest_Kanji[1], pri_kind );
	PCMD_RIGHT( pri_kind );						// [位置揃え(右揃え)]
	PrnStr( PriTest_Kanji[1], pri_kind );

	PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]

	/*------	印字項目４（縦倍角）	------*/

	PrnFontSize( FONT_K_TATEBAI, pri_kind );	// ﾌｫﾝﾄ指定（漢字縦倍角）
	PrnStr( PriTest_Kanji[2], pri_kind );

	/*------	印字項目５（横倍角）	------*/
	PrnFontSize( FONT_K_YOKOBAI, pri_kind );	// ﾌｫﾝﾄ指定（漢字横倍角）
	PrnStr( PriTest_Kanji[3], pri_kind );

	/*------	印字項目６（４倍角）	------*/
	PrnFontSize( FONT_K_4BAI, pri_kind );		// ﾌｫﾝﾄ指定（漢字４倍角）
	PrnStr( PriTest_Kanji[4], pri_kind );

	PrnFontSize( FONT_K_NML, pri_kind );		// ﾌｫﾝﾄ指定（漢字通常）

	/*------	印字項目７（１ﾄﾞｯﾄ幅ｱﾝﾀﾞｰﾗｲﾝ）	------*/
	PCMD_KANJILINESET1( pri_kind );				// 漢字ｱﾝﾀﾞｰﾗｲﾝの指定（１ﾄﾞｯﾄ幅）
	PrnStr( PriTest_Kanji[5], pri_kind );

	/*------	印字項目８（２ﾄﾞｯﾄ幅ｱﾝﾀﾞｰﾗｲﾝ）	------*/
	PCMD_KANJILINESET2( pri_kind );				// 漢字ｱﾝﾀﾞｰﾗｲﾝの指定（２ﾄﾞｯﾄ幅）
	PrnStr( PriTest_Kanji[6], pri_kind );

	PCMD_KANJILINECLR( pri_kind );				// 漢字ｱﾝﾀﾞｰﾗｲﾝの指定（解除）

	/*------	印字項目９（強調印字）	------*/
	PCMD_EMPHSET( pri_kind );					// 強調印字（指定）
	PrnStr( PriTest_Kanji[7], pri_kind );

	PCMD_EMPHCLR( pri_kind );					// 強調印字（解除）

}


/*[]-----------------------------------------------------------------------[]*/
/*|		ロゴ印字データ登録処理												|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	LOGOREG_edit( pri_kind, *p_proc_data )				|*/
/*|																			|*/
/*|	PARAMETER		:	uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-08-08													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	LOGOREG_edit( uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	ushort	gyou_line;		// 登録対象とする行数
	ushort	dot_line;		// 読込を行うﾄﾞｯﾄ単位行
	ushort	f_offset;		// 読込を行うﾌﾗｯｼｭﾒﾓﾘのｵﾌｾｯﾄ
	uchar	i,j,k;			// ﾙｰﾌﾟｶｳﾝﾀｰ

	if( p_proc_data->Prn_no == 0 ){
																			//	登録処理開始の場合
		PrnCmdLen( (uchar *)"\x1d\x54\x00" , 3 , pri_kind );				// 定型ビットイメージの登録(ﾊﾟﾀｰﾝ０）ｺﾏﾝﾄﾞ編集
		p_proc_data->Prn_no = 1;											// 登録対象とする行数（文字単位での行数）ｾｯﾄ
	}

	PrnCmdLen( (uchar *)"\x1b\x2a\x23\xb0\x01" , 5 , pri_kind );			// ビットイメージの指定（１ﾗｲﾝ４３２ﾄﾞｯﾄ（５４ｍｍ）指定）ｺﾏﾝﾄﾞ編集

	gyou_line = p_proc_data->Prn_no;										// 登録対象とする行数（１～６）ｾｯﾄ
	memset( Logo_Fdata, 0, sizeof(Logo_Fdata) );							// ロゴ印字データ読込エリア０クリア

	dot_line = 144 - ( LOGO_REG_TATE_DOT*(gyou_line-1) );					// 読込を開始するﾄﾞｯﾄﾗｲﾝ（１～１４４）取得

	for( i=0 ; i < LOGO_REG_TATE_DOT ; i++ ){								// 対象とする行のﾄﾞｯﾄﾗｲﾝ１～２４のﾃﾞｰﾀをﾌﾗｯｼｭﾒﾓﾘから読込む

		f_offset = ( (dot_line - i - 1) * LOGO_1LINE_DSIZE ) + LOGO_HEADER_DSIZE;	// 読込を行うﾃﾞｰﾀのﾌﾗｯｼｭﾒﾓﾘ上のｵﾌｾｯﾄ計算

		FLT_ReadLogoPart	(											// ﾌﾗｯｼｭﾒﾓﾘ読込（ﾄﾞｯﾄﾗｲﾝ単位で上下反転させて読込む）
									(char *)&Logo_Fdata[i][0],
									f_offset,
									LOGO_1LINE_DSIZE
								);
	}

	for( i=0 ; i < LOGO_1LINE_BCNT ; i++ ){									// １行分の印字ﾃﾞｰﾀ（２４×２４ﾄﾞｯﾄのﾋﾞｯﾄﾏｯﾌﾟﾃﾞｰﾀを１８ﾌﾞﾛｯｸ）編集
																			// ※　i =２４×２４ﾄﾞｯﾄのﾋﾞｯﾄﾏｯﾌﾟﾃﾞｰﾀ番号（０～１７）

		for( j=0 ; j < 3 ; j++ ){											// ２４×２４ﾄﾞｯﾄのﾋﾞｯﾄﾏｯﾌﾟﾃﾞｰﾀ（１ﾌﾞﾛｯｸ：ﾃﾞｰﾀ１～７２）を３分割して編集
																			// ※　j = ０（ﾃﾞｰﾀ１～２４）、１（ﾃﾞｰﾀ２５～４８）、０（ﾃﾞｰﾀ４９～７２）、

			for( k=0 ; k < 24 ; k++ ){										// 変換対象とするﾌﾗｯｼｭﾒﾓﾘﾃﾞｰﾀを作成（２４ﾊﾞｲﾄ分）
																			// ※　k = 行単位でのﾄﾞｯﾄﾗｲﾝ（０～２３）
				Logo_Fla_data[k] = Logo_Fdata[k][(i*3)+j];
			}

			LOGOREG_edit_sub1	(											// ﾋﾞｯﾄﾏｯﾌﾟﾃﾞｰﾀ変換（２４ﾊﾞｲﾄ分）
									(char *)&Logo_Fla_data[0],				// 変換元ﾃﾞｰﾀ先頭ﾎﾟｲﾝﾀ
									(char *)&Logo_Reg_data[0]				// 変換ﾃﾞｰﾀ格納先頭ﾎﾟｲﾝﾀ
								);

			PrnCmdLen( (uchar *)&Logo_Reg_data[0], 24, pri_kind );			// 変換ﾃﾞｰﾀ（２４ﾊﾞｲﾄ）登録
		}
	}

	PrnCmdLen( (uchar *)"\x1b\x4a\x18", 3, pri_kind );						// 印字＆紙送り（３ｍｍ）ｺﾏﾝﾄﾞ編集

	if( gyou_line < LOGO_LINE_CNT ){										// 全ﾃﾞｰﾀ（６行分）登録終了？
																			// 登録終了でない場合
		gyou_line++;
		p_proc_data->Prn_no = gyou_line;									// 次に登録する行数ｾｯﾄ
	}
	else{
																			// 全ﾃﾞｰﾀ（６行分）登録終了の場合
		PrnCmdLen( (uchar *)"\x1d\x54\xff" , 3 , pri_kind );				// 定型ビットイメージの登録終了ｺﾏﾝﾄﾞ編集
		p_proc_data->Prn_no = 0;
		p_proc_data->Final = ON;											// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ

		if( pri_kind == R_PRI ){
			Logo_Reg_sts_rct = ON;											// ﾛｺﾞ登録処理状態（ﾚｼｰﾄ）ｾｯﾄ（登録終了）
		}
		else if( pri_kind == J_PRI ){
			Logo_Reg_sts_jnl = ON;											// ﾛｺﾞ登録処理状態（ﾚｼｰﾄ）ｾｯﾄ（登録終了）
		}
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		ﾛｺﾞ印字ﾃﾞｰﾀﾋﾞｯﾄﾏｯﾌﾟﾃﾞｰﾀ変換処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	LOGOREG_edit_sub1( *dptr1, *dptr2 )					|*/
/*|																			|*/
/*|	PARAMETER		:	char	*dptr1	=	変換元ﾃﾞｰﾀ先頭ﾎﾟｲﾝﾀｰ			|*/
/*|						char	*dptr2	=	変換ﾃﾞｰﾀ格納先頭ﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-08-08													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/

// ﾋﾞｯﾄ位置毎のﾋﾞｯﾄﾃｽﾄﾃﾞｰﾀ
const	char	logo_bit_tst[8] =
	{
//		bit0	bit1	bit2	bit3	bit4	bit5	bit6	bit7
		0x01,	0x02,	0x04,	0x08,	0x10,	0x20,	0x40,	0x80
	};

// ﾋﾞｯﾄﾏｯﾌﾟﾃﾞｰﾀ変換ﾃｰﾌﾞﾙ（変換したﾃﾞｰﾀの格納先ｵﾌｾｯﾄ、ﾋﾞｯﾄ位置）
const	uchar	logo_map_tbl[24][8][2] =
	{
//		ﾌﾗｯｼｭﾒﾓﾘ上のﾃﾞｰﾀ
//		bit0	bit1	bit2	bit3	bit4	bit5	bit6	bit7
		21,7,	18,7,	15,7,	12,7,	9,7,	6,7,	3,7,	0,7,	// 変換元ﾃﾞｰﾀ[0]
		21,6,	18,6,	15,6,	12,6,	9,6,	6,6,	3,6,	0,6,	// 変換元ﾃﾞｰﾀ[1]
		21,5,	18,5,	15,5,	12,5,	9,5,	6,5,	3,5,	0,5,	// 変換元ﾃﾞｰﾀ[2]
		21,4,	18,4,	15,4,	12,4,	9,4,	6,4,	3,4,	0,4,	// 変換元ﾃﾞｰﾀ[3]
		21,3,	18,3,	15,3,	12,3,	9,3,	6,3,	3,3,	0,3,	// 変換元ﾃﾞｰﾀ[4]
		21,2,	18,2,	15,2,	12,2,	9,2,	6,2,	3,2,	0,2,	// 変換元ﾃﾞｰﾀ[5]
		21,1,	18,1,	15,1,	12,1,	9,1,	6,1,	3,1,	0,1,	// 変換元ﾃﾞｰﾀ[6]
		21,0,	18,0,	15,0,	12,0,	9,0,	6,0,	3,0,	0,0,	// 変換元ﾃﾞｰﾀ[7]

		22,7,	19,7,	16,7,	13,7,	10,7,	7,7,	4,7,	1,7,	// 変換元ﾃﾞｰﾀ[8]
		22,6,	19,6,	16,6,	13,6,	10,6,	7,6,	4,6,	1,6,	// 変換元ﾃﾞｰﾀ[9]
		22,5,	19,5,	16,5,	13,5,	10,5,	7,5,	4,5,	1,5,	// 変換元ﾃﾞｰﾀ[10]
		22,4,	19,4,	16,4,	13,4,	10,4,	7,4,	4,4,	1,4,	// 変換元ﾃﾞｰﾀ[11]
		22,3,	19,3,	16,3,	13,3,	10,3,	7,3,	4,3,	1,3,	// 変換元ﾃﾞｰﾀ[12]
		22,2,	19,2,	16,2,	13,2,	10,2,	7,2,	4,2,	1,2,	// 変換元ﾃﾞｰﾀ[13]
		22,1,	19,1,	16,1,	13,1,	10,1,	7,1,	4,1,	1,1,	// 変換元ﾃﾞｰﾀ[14]
		22,0,	19,0,	16,0,	13,0,	10,0,	7,0,	4,0,	1,0,	// 変換元ﾃﾞｰﾀ[15]

		23,7,	20,7,	17,7,	14,7,	11,7,	8,7,	5,7,	2,7,	// 変換元ﾃﾞｰﾀ[16]
		23,6,	20,6,	17,6,	14,6,	11,6,	8,6,	5,6,	2,6,	// 変換元ﾃﾞｰﾀ[17]
		23,5,	20,5,	17,5,	14,5,	11,5,	8,5,	5,5,	2,5,	// 変換元ﾃﾞｰﾀ[18]
		23,4,	20,4,	17,4,	14,4,	11,4,	8,4,	5,4,	2,4,	// 変換元ﾃﾞｰﾀ[19]
		23,3,	20,3,	17,3,	14,3,	11,3,	8,3,	5,3,	2,3,	// 変換元ﾃﾞｰﾀ[20]
		23,2,	20,2,	17,2,	14,2,	11,2,	8,2,	5,2,	2,2,	// 変換元ﾃﾞｰﾀ[21]
		23,1,	20,1,	17,1,	14,1,	11,1,	8,1,	5,1,	2,1,	// 変換元ﾃﾞｰﾀ[22]
		23,0,	20,0,	17,0,	14,0,	11,0,	8,0,	5,0,	2,0,	// 変換元ﾃﾞｰﾀ[23]

	};

void	LOGOREG_edit_sub1( char *dptr1, char *dptr2 )
{
	char	s_data;		// 変換元ﾃﾞｰﾀ
	uchar	bit_chk;	// ﾋﾞｯﾄﾁｪｯｸ結果
	uchar	i,j;		// ﾙｰﾌﾟ処理ｶｳﾝﾀｰ

	memset( dptr2, 0, 24 );								// 	変換ﾃﾞｰﾀ格納ｴﾘｱ０ｸﾘｱ

	for( i=0 ; i<24 ; i++ ){							// ２４ﾊﾞｲﾄ分変換

		s_data = dptr1[i];								// 変換元ﾃﾞｰﾀ取得

		for( j=0 ; j<8 ; j++ ){							// ﾋﾞｯﾄ毎ﾁｪｯｸ＆変換

			bit_chk = (uchar)(s_data & logo_bit_tst[j]);// ﾋﾞｯﾄﾁｪｯｸ
			if( bit_chk == 0 ){							// ﾁｪｯｸﾋﾞｯﾄ=OFF？

				// ﾁｪｯｸﾋﾞｯﾄがOFFの場合、変換ﾃﾞｰﾀのﾋﾞｯﾄをONとする（ﾋﾞｯﾄ反転）
				dptr2[logo_map_tbl[i][j][0]] = (char)( dptr2[logo_map_tbl[i][j][0]] | logo_bit_tst[logo_map_tbl[i][j][1]] );
			}
		}
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		ロゴ印字ﾃﾞｰﾀ編集処理												|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_logo( pri_kind )							|*/
/*|																			|*/
/*|	PARAMETER		:	uchar				pri_kind	=	印字先ﾌﾟﾘﾝﾀ		|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-05-07													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	Prn_edit_logo( uchar pri_kind )
{
	PrnCmdLen( (uchar *)"\x1d\x50\x00" , 3 , pri_kind );	// 定型ビットイメージの印字(ﾊﾟﾀｰﾝ０)ｺﾏﾝﾄﾞ編集

	/* 印字行数 動作ｶｳﾝﾄup (ﾛｺﾞは4行固定とする) */
	if( R_PRI == pri_kind ){
		inc_dct( MOV_PRNT_CNT, 4 );							// 「ﾚｼｰﾄﾌﾟﾘﾝﾀ印字行数」動作ｶｳﾝﾄ
	}else{
		inc_dct( MOV_JPNT_CNT, 4 );							// 「ｼﾞｬｰﾅﾙﾌﾟﾘﾝﾀ印字行数」動作ｶｳﾝﾄ
	}

	return(LOGO_LINE_CNT);
}

/*[]-----------------------------------------------------------------------[]*/
/*|		ヘッダー／フッター印字ﾃﾞｰﾀ編集処理									|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_headhoot( edit_kind, pri_kind )			|*/
/*|																			|*/
/*|	PARAMETER		:	uchar	edit_kind	=	ﾍｯﾀﾞｰ／ﾌｯﾀｰ					|*/
/*|							PRI_HEADER  : ﾍｯﾀﾞｰ								|*/
/*|							PRI_HOOTER  : ﾌｯﾀｰ								|*/
/*|																			|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-05-24													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/

/*
	＜ヘッダー印字データ設定の制限事項＞

	１．最大４行（文字ｻｲｽﾞに縦倍角または４倍角を指定した場合、２行としてｶｳﾝﾄする）
	２．４行合計の改行量が１８ｍｍ（ﾛｺ印字ﾃﾞｰﾀﾞ縦ｻｲｽﾞ）以下になるように設定する事
		（超えた場合、ﾚｼｰﾄｶｯﾄ位置が合わなくなりﾍｯﾀﾞｰ印字ﾃﾞｰﾀ途中でｶｯﾄされる）

	備考．ﾍｯﾀﾞｰ、ﾌｯﾀｰともに改行幅（行間）は、１ｍｍ固定とする
*/


// 印字位置指定ｺﾏﾝﾄﾞﾃﾞｰﾀ
const uchar Pri_posi_cmd[3][3] =
	{
		0x1b,0x61,0x00,		// [位置揃え(左揃え)]ｺﾏﾝﾄﾞ
		0x1b,0x61,0x01,		// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]ｺﾏﾝﾄﾞ
		0x1b,0x61,0x02		// [位置揃え(右揃え)]ｺﾏﾝﾄﾞ
	};

// 印字文字ｻｲｽﾞ指定ｺﾏﾝﾄﾞﾃﾞｰﾀ
const uchar Pri_size_cmd[5][9] =
	{
		0x1b,0x21,0x00,		0x1c,0x21,0x00,		0x1b,0x33,0x20,	// ﾌｫﾝﾄA＝通常　／　漢字＝通常　／　改行量＝４ｍｍ（行間１ｍｍ固定）
		0x1b,0x21,0x20,		0x1c,0x21,0x04,		0x1b,0x33,0x20,	// ﾌｫﾝﾄA＝横倍　／　漢字＝横倍　／　改行量＝４ｍｍ（行間１ｍｍ固定）
		0x1b,0x21,0x10,		0x1c,0x21,0x08,		0x1b,0x33,0x38,	// ﾌｫﾝﾄA＝縦倍　／　漢字＝縦倍　／　改行量＝７ｍｍ（行間１ｍｍ固定）
		0x1b,0x21,0x30,		0x1c,0x21,0x0c,		0x1b,0x33,0x38,	// ﾌｫﾝﾄA＝４倍　／　漢字＝４倍　／　改行量＝７ｍｍ（行間１ｍｍ固定）
		0x1b,0x21,0x00,		0x1c,0x21,0x00,		0x1b,0x33,0x1c,	// ﾌｫﾝﾄA＝通常　／　漢字＝通常　／　改行量＝３．５ｍｍ（行間０．５ｍｍ）
	};

uchar	Prn_edit_headhoot( uchar edit_kind, uchar pri_kind )
	/* Local関数追加 従来の Prn_edit_headhoot を Prn_edit_headhoot_new とし、パラメータを追加する */
	/* 新 Prn_edit_headhoot は旧パラメータとし、 Prn_edit_headhoot_new をコールする */
{
	return ( Prn_edit_headhoot_new ( 0, HEAD_GYO_MAX + 1 , edit_kind, pri_kind ) );
}

	//実際 start_num と count が有効になるのは edit_kind が PRI_HEADER の場合のみ.
//
// start_num(in) : 共通パラメータのスタート番号(ヘッダー時のみ有効)
// count(in)	 : 共通パラメータの参照有効数(ヘッダー時のみ有効) MAX値を超えている場合は,共通パラメータに従う.
// edit_kind(in) : ヘッダーかフッターか
// pri_kind(in)  : レシートかジャーナルか
//
uchar	Prn_edit_headhoot_new ( uchar start_num, uchar count, uchar edit_kind, uchar pri_kind )
{
	uchar			edit_cnt = 0;				// 編集行数
	uchar			gyou_cnt;					// 行数
	uchar			fnt_size[HEAD_GYO_MAX];		// 文字ｻｲｽﾞ（ﾍｯﾀﾞｰ行数分）
	uchar			pri_posi[HEAD_GYO_MAX];		// 印字位置（ﾍｯﾀﾞｰ行数分）
	uchar			data_cnt[HEAD_GYO_MAX];		// 文字数（ﾍｯﾀﾞｰ行数分）
	uchar			*pri_data[HEAD_GYO_MAX];	// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰ（ﾍｯﾀﾞｰ行数分）
	uchar			s_data;						// 設定ﾃﾞｰﾀﾜｰｸ
	uchar			size_wrk;					// ﾍｯﾀﾞｰ印字ﾃﾞｰﾀ縦ｻｲｽﾞ（ﾄﾞｯﾄ数）計算処理ﾜｰｸ
	uchar			i;						// 処理ﾙｰﾌﾟｶｳﾝﾀｰ
	ushort			cmd_len;					// 送信ｺﾏﾝﾄﾞﾃﾞｰﾀﾚﾝｸﾞｽ
	PRN_PROC_DATA	*p_proc_data;				// 編集処理制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
	memset ( fnt_size, 0, HEAD_GYO_MAX );
	memset ( pri_posi, 0, HEAD_GYO_MAX );
	memset ( data_cnt, 0, HEAD_GYO_MAX );


	switch( edit_kind ){

		case	PRI_HEADER:	// ﾍｯﾀﾞｰ印字ﾃﾞｰﾀ編集

				header_hight = 0;													// ﾍｯﾀﾞｰ印字ﾃﾞｰﾀの縦ｻｲｽﾞ（ﾄﾞｯﾄ数）ﾘｾｯﾄ

			if( Header_Rsts != 0 ){
				return( edit_cnt );
			}
			if( count > HEAD_GYO_MAX ){
				gyou_cnt = (uchar)prm_get( COM_PRM, S_PRN, 4, 2, 3 );				// 「ﾍｯﾀﾞｰ行数」設定ﾃﾞｰﾀ取得
			}else{
				gyou_cnt = count;													// ロゴ＋ヘッダーの場合のPre / Post から呼ばれたとき
			}

			if( gyou_cnt > HEAD_GYO_MAX ){
				gyou_cnt = HEAD_GYO_MAX;											// 不正ﾃﾞｰﾀの場合、ﾍｯﾀﾞｰ最大行数（４行）とする
			}

			for( i=0 ; i < gyou_cnt ;i++ )
			{

				fnt_size[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(5+i+start_num), 1, 4 );	// 「文字ｻｲｽﾞ」設定ﾃﾞｰﾀ取得
				if( fnt_size[i] > 3 ){
					fnt_size[i] = 0;												// 不正ﾃﾞｰﾀの場合、「標準」とする
				}

				pri_posi[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(5+i+start_num), 1, 3 );	// 「印字位置」設定ﾃﾞｰﾀ取得
				if( pri_posi[i] > 2 ){
					pri_posi[i] = 0;												// 不正ﾃﾞｰﾀの場合、「左揃え」とする
				}

				data_cnt[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(5+i+start_num), 2, 1 );	// 「文字数」設定ﾃﾞｰﾀ取得
				if( data_cnt[i] > FONTA_MAX_COL ){
					data_cnt[i] = FONTA_MAX_COL;									// 不正ﾃﾞｰﾀの場合、ﾌｫﾝﾄＡ最大文字数（３６文字）とする
				}

				if (_FLT_RtnKind(Header_Rsts) == FLT_NODATA) {						// 未登録なら初期値
					pri_data[i] = (uchar *)&Header_Data_dflt[i+start_num][0];		// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
				}else{
					pri_data[i] = (uchar *)&Header_Data[i+start_num][0];			// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
				}

			}

			if( gyou_cnt != 0 ){													// 印字ﾃﾞｰﾀあり？

				// ﾍｯﾀﾞｰ印字ﾃﾞｰﾀの縦ｻｲｽﾞ（ﾄﾞｯﾄ数）を計算する
				s_data = 8;															// 行間１ｍｍ（0.125×8）固定
				size_wrk = 0;

				for( i = 0 ; i < gyou_cnt ; i++ ){									// 各行の改行量検索（設定されている印字行数分）

					switch( fnt_size[i] ){											// ﾌｫﾝﾄｻｲｽﾞ？

						case	0:													// 標準

							size_wrk += FONT_A_N_HDOT;								// ﾌｫﾝﾄＡ 通常	(24×0.125=3mm)
							break;

						case	1:													// 横倍角

							size_wrk += FONT_A_Y_HDOT;								// ﾌｫﾝﾄＡ 横倍角(24×0.125=3mm)
							break;

						case	2:													// 縦倍角

							size_wrk += FONT_A_T_HDOT;								// ﾌｫﾝﾄＡ 縦倍角(48×0.125=6mm)
							break;

						case	3:													// ４倍角

							size_wrk += FONT_A_4_HDOT;								// ﾌｫﾝﾄＡ ４倍角(48×0.125=6mm)
							break;

					}
					size_wrk += s_data;												// 改行幅ｻｲｽﾞを加算
				}

				header_hight = size_wrk;											// ﾍｯﾀﾞｰ印字ﾃﾞｰﾀの縦ｻｲｽﾞ（ﾄﾞｯﾄ数）ｾｯﾄ
			}

			break;

		case	PRI_HOOTER:	// ﾌｯﾀｰ印字ﾃﾞｰﾀ編集

			if( Footer_Rsts != 0 ){
				// ﾌｯﾀｰ印字ﾃﾞｰﾀが正常に読込まれていない場合
				return( edit_cnt );
			}

			gyou_cnt = (uchar)prm_get( COM_PRM, S_PRN, 4, 2, 1 );					// 「ﾌｯﾀｰ行数」設定ﾃﾞｰﾀ取得

			if( gyou_cnt > HOOT_GYO_MAX ){
				gyou_cnt = HOOT_GYO_MAX;											// 不正ﾃﾞｰﾀの場合、ﾌｯﾀｰ最大行数（４行）とする
			}

			for( i=0 ; i<HOOT_GYO_MAX ;i++ ){

				fnt_size[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(9+i), 1, 4 );	// 「文字ｻｲｽﾞ」設定ﾃﾞｰﾀ取得
				if( fnt_size[i] > 3 ){
					fnt_size[i] = 0;												// 不正ﾃﾞｰﾀの場合、「標準」とする
				}

				pri_posi[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(9+i), 1, 3 );	// 「印字位置」設定ﾃﾞｰﾀ取得
				if( pri_posi[i] > 2 ){
					pri_posi[i] = 0;												// 不正ﾃﾞｰﾀの場合、「左揃え」とする
				}

				data_cnt[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(9+i), 2, 1 );	// 「文字数」設定ﾃﾞｰﾀ取得
				if( data_cnt[i] > FONTA_MAX_COL ){
					data_cnt[i] = FONTA_MAX_COL;									// 不正ﾃﾞｰﾀの場合、ﾌｫﾝﾄＡ最大文字数（３６文字）とする
				}

				pri_data[i] = (uchar *)&Footer_Data[i][0];							// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ

			}

			break;
		default:
			return( edit_cnt );
	}

	if( gyou_cnt != 0 ){															// 印字ﾃﾞｰﾀあり？

		for( i = 0 ; i < gyou_cnt ; i++ ){											// 設定されている行数分の印字ﾃﾞｰﾀをﾌﾟﾘﾝﾀ送信ﾊﾞｯﾌｧへ登録

			memset( prn_work, 0, sizeof(prn_work) );								// 印字ｺﾏﾝﾄﾞ編集ｴﾘｱ（prn_work）０ｸﾘｱ
			cmd_len = 0;															// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ０ｸﾘｱ

			// 印字位置
			s_data = pri_posi[i];													// 印字位置設定ﾃﾞｰﾀ取得
			memcpy( &prn_work[0], &Pri_posi_cmd[s_data][0], 3 );					// 印字位置指定ｺﾏﾝﾄﾞｾｯﾄ
			cmd_len += 3;															// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋３

			// 印字文字ｻｲｽﾞ
			s_data = fnt_size[i];													// 文字ｻｲｽﾞ設定ﾃﾞｰﾀ取得
			memcpy( &prn_work[cmd_len], &Pri_size_cmd[s_data][0], 9 );				// 文字ｻｲｽﾞ指定ｺﾏﾝﾄﾞｾｯﾄ
			cmd_len += 9;															// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋６

			// 印字文字ﾃﾞｰﾀ
			memcpy( &prn_work[cmd_len], pri_data[i], (size_t)data_cnt[i] );			// 文字ﾃﾞｰﾀｾｯﾄ
			cmd_len += data_cnt[i];													// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋文字ﾃﾞｰﾀ数

			prn_work[cmd_len] = LF;													// 改行ﾃﾞｰﾀｾｯﾄ
			cmd_len += 1;															// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋１

			PrnCmdLen( (uchar *)prn_work, cmd_len, pri_kind );						// 編集した印字ｺﾏﾝﾄﾞﾃﾞｰﾀを登録

			edit_cnt++;																// 編集行数＋１

		}

		// 文字ｻｲｽﾞ、改行量を初期状態へ戻す

		PrnCmdLen( &Pri_size_cmd[4][0], 9, pri_kind );

		if( pri_kind == R_PRI ){
			p_proc_data = (PRN_PROC_DATA *)&rct_proc_data;							// ﾚｼｰﾄ編集処理制御ﾃﾞｰﾀﾎﾟｲﾝﾀｾｯﾄ
		}
		else{
			p_proc_data = (PRN_PROC_DATA *)&jnl_proc_data;							// ｼﾞｬｰﾅﾙ編集処理制御ﾃﾞｰﾀﾎﾟｲﾝﾀｾｯﾄ
		}
		p_proc_data->Font_size		= FONT_A_NML;
		p_proc_data->Kanji_size		= FONT_K_NML;
		p_proc_data->Kaigyou_size	= 0x1c;

	}

	if( R_PRI == pri_kind )
		inc_dct( MOV_PRNT_CNT, (short)edit_cnt );									// 「ﾚｼｰﾄﾌﾟﾘﾝﾀ印字行数」動作ｶｳﾝﾄ
	else
		inc_dct( MOV_JPNT_CNT, (short)edit_cnt );									// 「ｼﾞｬｰﾅﾙﾌﾟﾘﾝﾀ印字行数」動作ｶｳﾝﾄ

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		仕切り行印字ﾃﾞｰﾀ編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_sikiri( pri_kind )							|*/
/*|																			|*/
/*|	PARAMETER		:	uchar				pri_kind	=	印字先ﾌﾟﾘﾝﾀ		|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-10													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	Prn_edit_sikiri( uchar pri_kind )
{
	uchar	edit_cnt=0;

	PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定

	PrnStr( SikiriLine_Prn[0], pri_kind );						// 仕切り行印字ﾃﾞｰﾀ登録

	edit_cnt++;

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		スペース行印字ﾃﾞｰﾀ編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_space( pri_kind )							|*/
/*|																			|*/
/*|	PARAMETER		:	uchar				pri_kind	=	印字先ﾌﾟﾘﾝﾀ		|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-10													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	Prn_edit_space( uchar pri_kind )
{
	uchar	edit_cnt=0;

	Kaigyou_set( pri_kind, FONT_A_NML, 1 );	// 「ﾌｫﾝﾄＡ縦ｻｲｽﾞ（3mm)＋設定されている改行量」の改行を１回行う

	edit_cnt++;

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		釣り切れ時の固定ﾒｯｾｰｼﾞ印字ﾃﾞｰﾀ編集処理								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_TurikireMsg( msg_no, pri_kind )			|*/
/*|																			|*/
/*|	PARAMETER		:	uchar	msg_no		=	ﾒｯｾｰｼﾞ番号					|*/
/*|																			|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-11													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	Prn_edit_TurikireMsg( uchar msg_no, uchar pri_kind )
{
	uchar	edit_cnt=0;

	if( (msg_no >= 1) && (msg_no <= 5) ){				// ﾒｯｾｰｼﾞ番号ﾁｪｯｸ

		PCMD_LEFT( pri_kind );							// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );			// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );			// 漢字（通常）指定

		switch( msg_no ){

			case	1:	// ﾒｯｾｰｼﾞ１

				PrnStr( TurikireMsg[0], pri_kind );	// １行目印字ﾃﾞｰﾀ登録
				edit_cnt++;

				PrnStr( TurikireMsg[1], pri_kind );	// ２行目印字ﾃﾞｰﾀ登録
				edit_cnt++;

				break;

			case	2:	// ﾒｯｾｰｼﾞ２

				PrnStr( TurikireMsg[0], pri_kind );	// １行目印字ﾃﾞｰﾀ登録
				edit_cnt++;

				PrnStr( TurikireMsg[2], pri_kind );	// ２行目印字ﾃﾞｰﾀ登録
				edit_cnt++;

				break;

			case	3:	// ﾒｯｾｰｼﾞ３

				PrnStr( TurikireMsg[0], pri_kind );	// １行目印字ﾃﾞｰﾀ登録
				edit_cnt++;

				PrnStr( TurikireMsg[3], pri_kind );	// ２行目印字ﾃﾞｰﾀ登録
				edit_cnt++;

				break;

			case	4:	// ﾒｯｾｰｼﾞ４

				PrnStr( TurikireMsg[4], pri_kind );	// １行目印字ﾃﾞｰﾀ登録
				edit_cnt++;

				break;

			case	5:	// ﾒｯｾｰｼﾞ５

				PrnStr( TurikireMsg[5], pri_kind );	// １行目印字ﾃﾞｰﾀ登録
				edit_cnt++;

				PrnStr( TurikireMsg[6], pri_kind );	// ２行目印字ﾃﾞｰﾀ登録
				edit_cnt++;

				PrnStr( TurikireMsg[7], pri_kind );	// ３行目印字ﾃﾞｰﾀ登録
				edit_cnt++;

				PrnStr( TurikireMsg[8], pri_kind );	// ４行目印字ﾃﾞｰﾀ登録
				edit_cnt++;

				break;

		}
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		固定ﾒｯｾｰｼﾞ印字ﾃﾞｰﾀ編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_KoteiMsg( msg_no, pri_kind )				|*/
/*|																			|*/
/*|	PARAMETER		:	uchar	msg_no		=	ﾒｯｾｰｼﾞ番号					|*/
/*|																			|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-11													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	Prn_edit_KoteiMsg( uchar msg_no, uchar pri_kind )
{
	uchar	edit_cnt=0;

	if( (msg_no >= 1) && (msg_no <= 4) ){			// ﾒｯｾｰｼﾞ番号ﾁｪｯｸ

		PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );		// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );		// 漢字（通常）指定

		PrnStr( KoteiMsg[msg_no-1], pri_kind );		// ﾒｯｾｰｼﾞ（１行）印字ﾃﾞｰﾀ登録
		edit_cnt++;

	}
	return( edit_cnt );
}

/*[]---------------------------------------------------------------------------[]*/
/*|		表題印字ﾃﾞｰﾀ編集														|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_Title( *prn_data, pri_kind )					|*/
/*|																				|*/
/*|	PARAMETER		:	char	*prn_data	=	表題文字列ﾎﾟｲﾝﾀｰ				|*/
/*|																				|*/
/*|						uchar	font		=	文字種別						|*/
/*|																				|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ						|*/
/*|							R_PRI  : ﾚｼｰﾄ										|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ										|*/
/*|																				|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数								|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi														|*/
/*|	Date	:	2005-03-22														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
uchar	Prn_edit_Title( const char *prn_data, uchar font, uchar pri_kind )
{
	uchar	edit_cnt=0;

	PCMD_CENTER( pri_kind );				// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
	PrnFontSize( font, pri_kind );			// ﾌｫﾝﾄ指定

	PrnStr( prn_data, pri_kind );			// 表題印字ﾃﾞｰﾀ登録
	edit_cnt++;

	PrnFontSize( FONT_K_NML, pri_kind );	// 漢字ﾌｫﾝﾄ指定（通常）
	PrnFontSize( FONT_A_NML, pri_kind );	// ﾌｫﾝﾄＡ指定（通常）

	return( edit_cnt );
}

/*[]---------------------------------------------------------------------------[]*/
/*|		回数／金額印字ﾃﾞｰﾀ編集													|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_KaiKin( *prn_data, kaisu, kingaku, pri_kind )	|*/
/*|																				|*/
/*|	PARAMETER		:	char	*prn_data	=	項目名称文字列ﾎﾟｲﾝﾀｰ			|*/
/*|																				|*/
/*|						ulong	kaisuu		=	回数ﾃﾞｰﾀ						|*/
/*|																				|*/
/*|						ulong	kingaku		=	金額ﾃﾞｰﾀ						|*/
/*|																				|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ						|*/
/*|							R_PRI  : ﾚｼｰﾄ										|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ										|*/
/*|																				|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数								|*/
/*|																				|*/
/*|																				|*/
/*|-----------------------------------------------------------------------------|*/
/*|	＜編集概要＞																|*/
/*|		項目名称		回数		 x,xxx回									|*/
/*|						金額	xx,xxx,xxx円									|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi														|*/
/*|	Date	:	2005-03-17														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
uchar	Prn_edit_KaiKin( const char *prn_data, ulong kaisuu, ulong kingaku, uchar pri_kind )
{
	uchar	edit_cnt;

	edit_cnt = Prn_edit_KaiKin_sub( 1, prn_data, kaisuu, kingaku, pri_kind );
	return( edit_cnt );
}

/*[]---------------------------------------------------------------------------[]*/
/*|		件数／金額印字ﾃﾞｰﾀ編集													|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_KenKin( *prn_data, kaisu, kingaku, pri_kind )	|*/
/*|																				|*/
/*|	PARAMETER		:	char	*prn_data	=	項目名称文字列ﾎﾟｲﾝﾀｰ			|*/
/*|																				|*/
/*|						ulong	kensuu		=	件数ﾃﾞｰﾀ						|*/
/*|																				|*/
/*|						ulong	kingaku		=	金額ﾃﾞｰﾀ						|*/
/*|																				|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ						|*/
/*|							R_PRI  : ﾚｼｰﾄ										|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ										|*/
/*|																				|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数								|*/
/*|																				|*/
/*|																				|*/
/*|-----------------------------------------------------------------------------|*/
/*|	＜編集概要＞																|*/
/*|		項目名称		件数		 x,xxx件									|*/
/*|						金額	xx,xxx,xxx円									|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	Okuda															|*/
/*|	Date	:	2006/12/27														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.--------[]*/
uchar	Prn_edit_KenKin( const char *prn_data, ulong kensuu, ulong kingaku, uchar pri_kind )
{
	uchar	edit_cnt;

	edit_cnt = Prn_edit_KaiKin_sub( 2, prn_data, kensuu, kingaku, pri_kind );
	return( edit_cnt );
}

/*[]---------------------------------------------------------------------------[]*/
/*|		件数 又は 回数 ／金額印字ﾃﾞｰﾀ編集										|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME	 :	Prn_edit_KenKin_sub( *prn_data, kaisu, kingaku, pri_kind )	|*/
/*|																				|*/
/*|	PARAMETER	 :	char	ptn			=	印字パタン							|*/
/*|											1=回数と金額						|*/
/*|											2=件数と金額						|*/
/*|					char	*prn_data	=	項目名称文字列ﾎﾟｲﾝﾀｰ				|*/
/*|					ulong	kensuu		=	件数ﾃﾞｰﾀ							|*/
/*|					ulong	kingaku		=	金額ﾃﾞｰﾀ							|*/
/*|					uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ							|*/
/*|						R_PRI  : ﾚｼｰﾄ											|*/
/*|						J_PRI  : ｼﾞｬｰﾅﾙ											|*/
/*|																				|*/
/*|	RETURN VALUE :	uchar	ret	=	編集行数									|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	Okuda															|*/
/*|	Date	:	2006/12/27														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.--------[]*/
uchar	Prn_edit_KaiKin_sub( char ptn, const char *prn_data, ulong kaisuu, ulong kingaku, uchar pri_kind )
{
	uchar	edit_cnt=0;

	/*------	＜回数＞編集	------*/

	sprintf( cMnydata,"%ld", kaisuu );		// 回数ﾃﾞｰﾀ編集
	Camma_Set( (uchar *)cMnydata );			// ３桁区切り（”、”挿入）

	if( 1 == ptn ){							// "回数" "回"
		Str_Set2(							// -----印字ﾃﾞｰﾀ編集----- 
				prn_data,					// 文字列１：項目名称
				Pri_Tanni[PriT_KAISUU],		// 文字列２："回数"
				cMnydata,					// 文字列３：回数印字ﾃﾞｰﾀ
				Pri_Tanni[PriT_KAI],		// 文字列４："回"
				pri_kind					// 印字先ﾌﾟﾘﾝﾀ
		);
	}
	else if( 2 == ptn ){					// "件数" "件"
		Str_Set2(							// -----印字ﾃﾞｰﾀ編集----- 
				prn_data,					// 文字列１：項目名称
				Pri_Tanni[PriT_KENSUU],		// 文字列２："件数"
				cMnydata,					// 文字列３：件数印字ﾃﾞｰﾀ
				Pri_Tanni[PriT_KEN],		// 文字列４："件"
				pri_kind					// 印字先ﾌﾟﾘﾝﾀ
		);
	}
	edit_cnt++;								// 編集行数更新

	/*------	＜金額＞編集	------*/

	sprintf( cMnydata,"%ld", kingaku );		// 金額ﾃﾞｰﾀ編集
	Camma_Set( (uchar *)cMnydata );			// ３桁区切り（”、”挿入）

	Str_Set2(								// -----印字ﾃﾞｰﾀ編集-----
				"",							// 文字列１：なし
				Pri_Tanni[PriT_KINGAK],		// 文字列２："金額"
				cMnydata,					// 文字列３：金額印字ﾃﾞｰﾀ
				Pri_Tanni[PriT_YEN],		// 文字列４："円"
				pri_kind					// 印字先ﾌﾟﾘﾝﾀ
			);

	edit_cnt++;								// 編集行数更新

	return( edit_cnt );
}


/*[]-----------------------------------------------------------------------------------[]*/
/*|		単位指定１行印字ﾃﾞｰﾀ編集(*付き表示)												|*/
/*[]-----------------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_Sitei1line( *prn_data, data, *t1, *t2, pri_kind )		|*/
/*|																						|*/
/*|	PARAMETER		:	char	*prn_data	=	項目名称文字列ﾎﾟｲﾝﾀｰ					|*/
/*|																						|*/
/*|						ulong	data		=	ﾃﾞｰﾀ									|*/
/*|																						|*/
/*|						char	*t1			=	単位１文字列ﾎﾟｲﾝﾀｰ						|*/
/*|																						|*/
/*|						char	*t2			=	単位２文字列ﾎﾟｲﾝﾀｰ						|*/
/*|																						|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ								|*/
/*|							R_PRI  : ﾚｼｰﾄ												|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ												|*/
/*|																						|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数										|*/
/*|																						|*/
/*|																						|*/
/*|-------------------------------------------------------------------------------------|*/
/*|	＜編集概要＞																		|*/
/*|		項目名称		単位１		 x,xxx単位２										|*/
/*|																						|*/
/*|	例）定期券使用		回数		1,234回												|*/
/*|																						|*/
/*[]-----------------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi																|*/
/*|	Date	:	2005-03-18																|*/
/*|	Update	:																			|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----------------[]*/
uchar	Prn_edit_Sitei1line( const char *prn_data, ulong data, const char *tanni1, const char *tanni2, uchar pri_kind )
{
	uchar	edit_cnt=0;

	sprintf( cMnydata,"%ld", data );	// 印字ﾃﾞｰﾀ編集
	Camma_Set( (uchar *)cMnydata );		// ３桁区切り（”、”挿入）

	Str_Set2(							// -----印字ﾃﾞｰﾀ編集-----
				prn_data,				// 文字列１：項目名称
				tanni1,					// 文字列２：単位１
				cMnydata,				// 文字列３：印字ﾃﾞｰﾀ
				tanni2,					// 文字列４：単位２
				pri_kind				// 印字先ﾌﾟﾘﾝﾀ
			);

	edit_cnt++;							// 編集行数更新

	return( edit_cnt );
}

// MH321800(S) Y.Tanizaki ICクレジット対応
/*[]-----------------------------------------------------------------------------------[]*/
/*|		単位指定１行印字ﾃﾞｰﾀ編集(*付き表示)													|*/
/*[]-----------------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_Sitei1line_2( *prn_data, data, *t1, *t2, pri_kind )	|*/
/*|																						|*/
/*|	PARAMETER		:	char	*prn_data	=	項目名称文字列ﾎﾟｲﾝﾀｰ					|*/
/*|																						|*/
/*|						ulong	data		=	ﾃﾞｰﾀ									|*/
/*|																						|*/
/*|						char	*t1			=	単位１文字列ﾎﾟｲﾝﾀｰ						|*/
/*|																						|*/
/*|						char	*t2			=	単位２文字列ﾎﾟｲﾝﾀｰ						|*/
/*|																						|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ								|*/
/*|							R_PRI  : ﾚｼｰﾄ												|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ												|*/
/*|																						|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数										|*/
/*|																						|*/
/*|																						|*/
/*|-------------------------------------------------------------------------------------|*/
/*|	＜編集概要＞																		|*/
/*|		項目名称		単位１		 x,xxx単位２										|*/
/*|																						|*/
/*|	例）定期券使用		回数		1,234回												|*/
/*|																						|*/
/*[]-----------------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi																|*/
/*|	Date	:	2005-03-18																|*/
/*|	Update	:																			|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----------------[]*/
uchar	Prn_edit_Sitei1line_2( const char *prn_data, ulong data, const char *tanni1, const char *tanni2, uchar pri_kind )
{
	uchar	edit_cnt=0;

	sprintf( cMnydata,"*%ld", data );	// 印字ﾃﾞｰﾀ編集
	Camma_Set( (uchar *)(cMnydata+1) );	// ３桁区切り（”、”挿入）

	Str_Set2(							// -----印字ﾃﾞｰﾀ編集-----
				prn_data,				// 文字列１：項目名称
				tanni1,					// 文字列２：単位１
				cMnydata,				// 文字列３：印字ﾃﾞｰﾀ
				tanni2,					// 文字列４：単位２
				pri_kind				// 印字先ﾌﾟﾘﾝﾀ
			);

	edit_cnt++;							// 編集行数更新

	return( edit_cnt );
}
// MH321800(E) Y.Tanizaki ICクレジット対応

/*[]-----------------------------------------------------------------------[]*/
/*|		集計日時（今回／前回）印字ﾃﾞｰﾀ編集									|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_SkDate( *NowTime, *OldTime, pri_kind )		|*/
/*|																			|*/
/*|	PARAMETER		:	date_time_rec	*NowTime = 今回集計日時ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|						date_time_rec	*OldTime = 前回集計日時ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|						uchar			pri_kind = 印字先ﾌﾟﾘﾝﾀ				|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-25													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	Prn_edit_SkDate( date_time_rec	*NowTime, date_time_rec	*OldTime, uchar pri_kind )
{
	uchar	edit_cnt=0;

	// 今回集計日時（ﾃﾞｰﾀが全て０の場合、印字しない）
	if(	NowTime->Year	!= 0	||
		NowTime->Mon	!= 0	||
		NowTime->Day 	!= 0	||
		NowTime->Hour 	!= 0	||
		NowTime->Min 	!= 0 ){

		Prn_edit_Date( cEditwk1, NowTime );			// cEditwk1←今回集計日時印字ﾃﾞｰﾀ

		Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
					"今回集計",						// 文字列１："今回集計"
					cEditwk1,						// 文字列２：今回集計日時印字ﾃﾞｰﾀ
					pri_kind						// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;									// 編集行数更新

	}

	// 前回集計日時（ﾃﾞｰﾀが全て０の場合、印字しない）
	if(	OldTime->Year	!= 0	||
		OldTime->Mon	!= 0	||
		OldTime->Day 	!= 0	||
		OldTime->Hour 	!= 0	||
		OldTime->Min 	!= 0 ){

		Prn_edit_Date( cEditwk1, OldTime );			// cEditwk1←前回集計日時印字ﾃﾞｰﾀ

		Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
					"前回集計",						// 文字列１："前回集計"
					cEditwk1,						// 文字列２：前回集計日時印字ﾃﾞｰﾀ
					pri_kind						// 印字先ﾌﾟﾘﾝﾀ
				);

		edit_cnt++;									// 編集行数更新
	}

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		現在日時印字ﾃﾞｰﾀ編集												|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_NowDate( *edit_wk )						|*/
/*|																			|*/
/*|	PARAMETER		:	char	*edit_wk = 現在時刻印字ﾃﾞｰﾀｾｯﾄﾎﾟｲﾝﾀｰ		|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-26													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	Prn_edit_NowDate( char *edit_wk )
{
	date_time_rec	Time_data;					// 日時ﾃﾞｰﾀﾜｰｸ

	Time_data.Year	= (ushort)CLK_REC.year;		// 現在日時ﾃﾞｰﾀｾｯﾄ
	Time_data.Mon	= (uchar)CLK_REC.mont;
	Time_data.Day	= (uchar)CLK_REC.date;
	Time_data.Hour	= (uchar)CLK_REC.hour;
	Time_data.Min	= (uchar)CLK_REC.minu;
	Prn_edit_Date( edit_wk, &Time_data );		// 現在日時印字ﾃﾞｰﾀ編集
}

/*[]-----------------------------------------------------------------------[]*/
/*|		単位金額印字ﾃﾞｰﾀ編集												|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_TanKin( *edit_wk, kingaku )				|*/
/*|																			|*/
/*|	PARAMETER		:	char	*edit_wk	= 編集ﾃﾞｰﾀｾｯﾄﾎﾟｲﾝﾀｰ				|*/
/*|																			|*/
/*|						ulong	kingaku		= 金額							|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-04-08													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	Prn_edit_TanKin( char *edit_wk, ulong kingaku )
{

	sprintf( edit_wk,"%ld", kingaku );		// 金額ﾃﾞｰﾀ編集

	Camma_Set( (uchar *)edit_wk );			// ３桁区切り（”、”挿入）

	strcat( edit_wk, "円" );				// 単位（円）追加

}
/*[]-----------------------------------------------------------------------[]*/
/*|		単位枚数印字ﾃﾞｰﾀ編集												|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_TanMai( *edit_wk, maisuu )					|*/
/*|																			|*/
/*|	PARAMETER		:	char	*edit_wk	= 編集ﾃﾞｰﾀｾｯﾄﾎﾟｲﾝﾀｰ				|*/
/*|																			|*/
/*|						ulong	maisuu		= 枚数							|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-01													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	Prn_edit_TanMai( char *edit_wk, ulong maisuu )
{

	sprintf( edit_wk,"%ld", maisuu );		// 枚数ﾃﾞｰﾀ編集

	Camma_Set( (uchar *)edit_wk );			// ３桁区切り（”、”挿入）

	strcat( edit_wk, "枚" );				// 単位（枚）追加

}

/*[]-----------------------------------------------------------------------[]*/
/*|		駐車位置（区画／番号）印字ﾃﾞｰﾀ編集									|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_pkposi( *edit_wk, pk_posi )				|*/
/*|																			|*/
/*|	PARAMETER		:	char	*edit_wk	= 編集ﾃﾞｰﾀｾｯﾄﾎﾟｲﾝﾀｰ				|*/
/*|																			|*/
/*|						ulong	pk_posi		= 駐車位置ﾃﾞｰﾀ					|*/
/*|																			|*/
/*|						uchar	space		= 先頭挿入ｽﾍﾟｰｽ（半角）数		|*/
/*|												０～３０					|*/
/*|												０:ｽﾍﾟｰｽ挿入なし			|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集文字数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-07-20													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	Prn_edit_pkposi( char *edit_wk, ulong pk_posi, uchar space )
{
	ushort	area;		// 駐車位置ﾃﾞｰﾀ（区画番号）
	ushort	no;			// 駐車位置ﾃﾞｰﾀ（駐車位置番号）
	uchar	ret = 0;	// 駐車位置印字ﾃﾞｰﾀ文字数
	uchar	i;			// ｽﾍﾟｰｽ挿入ﾙｰﾌﾟ処理ｶｳﾝﾀｰ

	if( pk_posi != 0 ){

		Prn_pkposi_chg( pk_posi, &area, &no );	// 駐車位置ﾃﾞｰﾀ変換

		if( area > PKICHI_KU_MAX ){				// 区画番号範囲ﾁｪｯｸ（不正な場合、区画なしとする）
			area = 0;
		}

		if( no > PKICHI_NO_MAX ){				// 駐車位置番号範囲ﾁｪｯｸ（４桁を超える場合、9999とする）
			no = 9999;
		}

		if( space != 0 ){
			// 駐車位置印字ﾃﾞｰﾀの前にｽﾍﾟｰｽを挿入する場合

			if( space > 30 ){
				space = 30;						// ３０個以上のｽﾍﾟｰｽが指定された場合、３０とする
			}
			for( i = 0 ; i < space ; i++ ){		// 指定された数分の半角ｽﾍﾟｰｽを編集
				edit_wk[i] = ' ';
			}
		}

		if( area == 0 ){
			// 区画番号がない場合
			sprintf( &edit_wk[space], "%d", no );							// 駐車位置番号　編集
		}
		else{
			// 区画番号がある場合
			sprintf( &edit_wk[space], "%s-%d", PkKukaku_Prn[area], no );	// 区画番号＆駐車位置番号　編集
		}

		ret = (uchar)strlen( edit_wk );			// 編集文字数検索
	}
	return( ret );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		車室番号印字ﾃﾞｰﾀ編集												|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_sya_syu( *edit_wk, pk_posi )				|*/
/*|																			|*/
/*|	PARAMETER		:	char	*edit_wk	= 編集ﾃﾞｰﾀｾｯﾄﾎﾟｲﾝﾀｰ				|*/
/*|																			|*/
/*|						ushort	lk_no		= ロック装置No.					|*/
/*|																			|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集文字数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	H.Sekiguchi													|*/
/*|	Date	:	2006-09-01													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	Prn_edit_sya_syu( char *edit_wk, ushort lk_no ,uchar R_Flg ,uchar M_Flg)
{
	uchar	r_syu = 0;		// パラメータ番号格納
	ushort syasyu = 0;		// 車種番号格納
	uchar	ret = 0;		// 駐車位置印字ﾃﾞｰﾀ文字数
	uchar	ryosyu = 0;		//料金種別格納
	
	if( R_Flg == 0){
		ryosyu = LockInfo[lk_no-1].ryo_syu;
	}else{
		ryosyu = (uchar)lk_no;
	}
	
	if( (ryosyu >= 1) && (ryosyu <= 6 ) ){		//Ａ～Ｆ
		r_syu = (uchar)(7 - ryosyu);			//
		syasyu = (ushort)prm_get( 0,S_TYP,(short)(121),1,(char)r_syu );
	}else if( (ryosyu >= 7) && (ryosyu <= 12 ) ){	//Ｇ～Ｌ
		r_syu = (uchar)(13 - ryosyu);				//
		syasyu = (ushort)prm_get( 0,S_TYP,(short)(122),1,(char)r_syu );
	}
	
	if(M_Flg == 1){
		sprintf( edit_wk, "間違い車室番号%s", Sya_Prn[syasyu] );	//印字ﾃﾞｰﾀ作成
	}else if(M_Flg == 2){
		sprintf( edit_wk, "振替元車室番号%s", Sya_Prn[syasyu] );	//印字ﾃﾞｰﾀ作成
	}else if(M_Flg == 3){
		sprintf( edit_wk, "  車室番号%s", Sya_Prn[syasyu] );		//印字ﾃﾞｰﾀ作成
	}else{
		sprintf( edit_wk, "車室番号%s", Sya_Prn[syasyu] );	//印字ﾃﾞｰﾀ作成
	}
	ret = (uchar)strlen( edit_wk );			// 編集文字数検索

	return(ret);
}

/*[]-----------------------------------------------------------------------[]*/
/*|		日時印字ﾃﾞｰﾀ編集													|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_Date( *edit_wk, *date )					|*/
/*|																			|*/
/*|	PARAMETER		:	char			*edit_wk= 編集ﾃﾞｰﾀｾｯﾄﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						date_time_rec	*date	= 日時ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	= 日時ﾃﾞｰﾀﾁｪｯｸ結果						|*/
/*|										OK=正常								|*/
/*|										NG=以上								|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-05-13													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
const char *Week_Prn[] =	// 曜日印字ﾃﾞｰﾀ
	{
		"日",				// ０：日曜
		"月",				// １：月曜
		"火",				// ２：火曜
		"水",				// ３：水曜
		"木",				// ４：木曜
		"金",				// ５：金曜
		"土"				// ６：土曜
	};

uchar	Prn_edit_Date( char *edit_wk, date_time_rec *date )
{
	uchar	ret = OK;		// 日時ﾃﾞｰﾀﾁｪｯｸ結果
	short	week;			// 曜日ﾃﾞｰﾀ取得ﾜｰｸ

	/*------	日時ﾃﾞｰﾀﾁｪｯｸ	-----*/
	if( date->Mon == 0 || date->Mon > 12 ){			// 月ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
	if( date->Day == 0 || date->Day > 31 ){			// 日ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
	if( date->Hour > 23 ){							// 時ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
	if( date->Min > 59 ){							// 分ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}

	if( ret == OK ){

		//	日時ﾃﾞｰﾀが正常な場合

		/*------	曜日ﾃﾞｰﾀ取得	-----*/
		week = youbiget( (short)date->Year, (short)date->Mon, (short)date->Day );

		/*------	日時ﾃﾞｰﾀ編集	-----*/
		sprintf(
					edit_wk,
					"%4d年%2d月%2d日(%s) %02d:%02d",	// 編集ﾌｫｰﾏｯﾄ："yyyy年mm月dd日(ｗ) hh:mm"
					date->Year,							// 年ﾃﾞｰﾀ
					date->Mon,							// 月ﾃﾞｰﾀ
					date->Day,							// 日ﾃﾞｰﾀ
					Week_Prn[week],						// 曜日ﾃﾞｰﾀ
					date->Hour,							// 時ﾃﾞｰﾀ
					date->Min							// 分ﾃﾞｰﾀ
				);
	}
	else{
		//	日時ﾃﾞｰﾀが異常な場合

		/*------	日時ﾃﾞｰﾀ編集	-----*/
		sprintf(
					edit_wk,
					"    年  月  日(　)   :  "			// 編集ﾌｫｰﾏｯﾄ："    年  月  日(　)   :  "
				);

	}

	return( ret );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		日時印字ﾃﾞｰﾀ編集２													|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_Date2( *edit_wk, *date )					|*/
/*|																			|*/
/*|	PARAMETER		:	char			*edit_wk= 編集ﾃﾞｰﾀｾｯﾄﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						date_time_rec	*date	= 日時ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	= 日時ﾃﾞｰﾀﾁｪｯｸ結果						|*/
/*|										OK=正常								|*/
/*|										NG=以上								|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-10													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	Prn_edit_Date2( char *edit_wk, date_time_rec *date )
{
	uchar	ret = OK;		// 日時ﾃﾞｰﾀﾁｪｯｸ結果

	/*------	日時ﾃﾞｰﾀﾁｪｯｸ	-----*/
	if( date->Mon == 0 || date->Mon > 12 ){			// 月ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
	if( date->Day == 0 || date->Day > 31 ){			// 日ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
	if( date->Hour > 23 ){							// 時ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
	if( date->Min > 59 ){							// 分ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}

	if( ret == OK ){

		//	日時ﾃﾞｰﾀが正常な場合

		/*------	日時ﾃﾞｰﾀ編集	-----*/
		sprintf(
					edit_wk,
					"%02d/%02d/%02d %02d:%02d",			// 編集ﾌｫｰﾏｯﾄ："yy/mm/dd hh:mm"
					(date->Year%100),					// 年ﾃﾞｰﾀ
					date->Mon,							// 月ﾃﾞｰﾀ
					date->Day,							// 日ﾃﾞｰﾀ
					date->Hour,							// 時ﾃﾞｰﾀ
					date->Min							// 分ﾃﾞｰﾀ
				);

	}
	else{
		//	日時ﾃﾞｰﾀが異常な場合

		/*------	日時ﾃﾞｰﾀ編集	-----*/
		sprintf(
					edit_wk,
					"  /  /     :  "					// 編集ﾌｫｰﾏｯﾄ："  /  /     :  "
				);

	}
	return( ret );
}

// MH810105(S) MH364301 QRコード決済対応
//[]----------------------------------------------------------------------[]
///	@brief			日時印字ﾃﾞｰﾀ編集3
//[]----------------------------------------------------------------------[]
///	@param[in]		edit_wk			編集ﾃﾞｰﾀｾｯﾄﾎﾟｲﾝﾀｰ
///	@param[in]		time			日時ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			ret				日時ﾃﾞｰﾀﾁｪｯｸ結果
///										OK=正常<br>
///										NG=以上
///	@author			T.Sato
///	@note			None
///	@attention		None
//[]----------------------------------------------------------------------[]
///	@date			Create	:	2021/11/30<br>
///					Update	:
//[]------------------------------------- Copyright(C) 2021 AMANO Corp.---[]
uchar	Prn_edit_Date6( char *edit_wk, struct clk_rec *time )
{
	uchar	ret = OK;									// 日時ﾃﾞｰﾀﾁｪｯｸ結果

	/*------	日時ﾃﾞｰﾀﾁｪｯｸ	-----*/
	if( time->mont == 0 || time->mont > 12 ){			// 月ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
	if( time->date == 0 || time->date > 31 ){			// 日ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
	if( time->hour > 23 ){								// 時ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
	if( time->minu > 59 ){								// 分ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
	if( time->seco > 59 ){								// 秒ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}

	if( ret == OK ){

		//	日時ﾃﾞｰﾀが正常な場合

		/*------	日時ﾃﾞｰﾀ編集	-----*/
		sprintf(
					edit_wk,
					"%04d/%02d/%02d %02d:%02d:%02d",	// 編集ﾌｫｰﾏｯﾄ："YYYY/MM/DD HH:mm:SS"
					time->year,							// 年ﾃﾞｰﾀ
					time->mont,							// 月ﾃﾞｰﾀ
					time->date,							// 日ﾃﾞｰﾀ
					time->hour,							// 時ﾃﾞｰﾀ
					time->minu,							// 分ﾃﾞｰﾀ
					time->seco							// 秒ﾃﾞｰﾀ
				);

	}
	else{
		//	日時ﾃﾞｰﾀが異常な場合

		/*------	日時ﾃﾞｰﾀ編集	-----*/
		sprintf(
					edit_wk,
					"**** ** ** **:**:**"				// 編集ﾌｫｰﾏｯﾄ："****/**/** **:**:**"
				);
		// Warning対策で後から'/'を後から追加
		edit_wk[4] = '/';
		edit_wk[7] = '/';

	}
	return( ret );
}
// MH810105(E) MH364301 QRコード決済対応

/*[]-----------------------------------------------------------------------[]*/
/*|		再ﾌﾟﾘﾝﾄ日時印字ﾃﾞｰﾀ編集												|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_RePriDate( pri_kind )						|*/
/*|																			|*/
/*|	PARAMETER		:	uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-05-26													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	Prn_edit_RePriDate( uchar pri_kind )
{
	uchar	edit_cnt = 0;						// 編集行数

	PrnFontSize( FONT_A_NML, pri_kind );		// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );		// 漢字（通常）指定

	/*-----		仕切り行	-----*/
	PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]
	PrnStr( SikiriLine_Prn[3], pri_kind );		// 仕切り行印字ﾃﾞｰﾀ登録
	edit_cnt++;

	/*-----		再ﾌﾟﾘﾝﾄ日時		-----*/
	memset( prn_work,0,sizeof(prn_work) );		// 印字ﾃﾞｰﾀ編集ｴﾘｱｸﾘｱ
	Prn_edit_Date( prn_work, &Repri_Time );		// 再ﾌﾟﾘﾝﾄ日時印字ﾃﾞｰﾀ編集
	strcat( prn_work, " 再ﾌﾟﾘﾝﾄ" );				// " 再ﾌﾟﾘﾝﾄ"追加編集

	PCMD_CENTER( pri_kind );					// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
	PrnStr( prn_work, pri_kind );				// 仕切り行印字ﾃﾞｰﾀ登録
	edit_cnt++;

	/*-----		仕切り行	-----*/
	PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]
	PrnStr( SikiriLine_Prn[3], pri_kind );		// 仕切り行印字ﾃﾞｰﾀ登録
	edit_cnt++;

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		係員NO.印字ﾃﾞｰﾀ編集													|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_KakariNo( Kakari_no, pri_kind )			|*/
/*|																			|*/
/*|	PARAMETER		:	ushort	Kakari_no	=	係員NO.						|*/
/*|																			|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-06-07													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
uchar	Prn_edit_KakariNo( ushort Kakari_no, uchar pri_kind )
{
	uchar	edit_cnt = 0;	// 編集行数

	if( CPrmSS[S_TOT][19] == 0 )					// 集計に係員番号を印字しない
		Kakari_no = 0;

	if( Kakari_no != 0 ){

		//	係員Ｎｏ．≠０の場合

		sprintf( cTmp1,"責 #%02d  ", Kakari_no );		// cTmp1 ←"責 #XX"ｾｯﾄ

		PCMD_RIGHT( pri_kind );						// [位置揃え(右揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );		// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );		// 漢字（通常）指定
		PrnStr( cTmp1, pri_kind );					// 印字ﾃﾞｰﾀ登録
		edit_cnt++;									// 編集行数更新
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		係員№.印字ﾃﾞｰﾀ編集													|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	KakariNoSet( *data, no )							|*/
/*|																			|*/
/*|	PARAMETER		:	char	*data	=	係員№文字列格納ﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						ushort	no		=	係員Ｎｏ．						|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-09-28													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	KakariNoSet( char *data, ushort no )
{
	no = 0;		// 集計以外は係員番号を印字しないので0にする。
				// この行をコメントにすると、以下の印字に係員番号が出力される
				// 定期有効/無効，定期入出庫，券期限，特別日，停留車情報（ログは出ない）

	if( no == 0 ){

		// 係員No.＝０の場合
		sprintf( data,"%s","      " );		// "      "ｾｯﾄ
	}
	else{
		// 係員No.≠０の場合
		sprintf( data,"責 #%02d", no );		// "責 #XX"ｾｯﾄ
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		機械№.印字ﾃﾞｰﾀ編集													|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	KikaiNoSet( *data, no )								|*/
/*|																			|*/
/*|	PARAMETER		:	char	*data	=	機械№文字列格納ﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						ushort	no		=	機械Ｎｏ．						|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-02-25													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	KikaiNoSet( char *data, ushort no )
{
	if( ( no == 0 ) || ( CPrmSS[S_PRN][15] == 0 ) ){

		// 機械No.＝０　または　「機械No.印字有無＝印字しない」場合
		sprintf( data,"%s","          " );	// "          "ｾｯﾄ
	}
	else{
		// 機械No.≠０　且つ　「機械No.印字有無≠印字する」場合
		if( no > 99 ){						// ﾃﾞｰﾀﾁｪｯｸ
			no = 99;						// ２桁を超えたﾃﾞｰﾀの場合、９９として編集する
		}
		sprintf( data,"精算機 #%02d",no );	// "精算機 #XX"ｾｯﾄ
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		精算方式印字ﾃﾞｰﾀ編集（半角１文字＋半角ｽﾍﾟｰｽ１）						|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	SeisanKindSet( *data, kind )						|*/
/*|																			|*/
/*|	PARAMETER		:	char	*data	=	印字ﾃﾞｰﾀ格納ﾎﾟｲﾝﾀｰ				|*/
/*|						uchar	kind	=	精算方式						|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-02-25													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	SeisanKindSet( char *data, uchar kind )
{
	switch( kind ){

		case	0:
			sprintf( data,"%s","A " );	// 自動
			break;

		case	1:
			sprintf( data,"%s","S " );	// 半自動
			break;

		case	2:
			sprintf( data,"%s","M " );	// 手動
			break;

		case  0xFF:
			sprintf( data,"%s","A " );	// 料金計算テスト
			break;

		default:
			sprintf( data,"%s","  " );
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		追番ﾃﾞｰﾀ編集														|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	OibanSet( *data, no, name_no )						|*/
/*|																			|*/
/*|	PARAMETER		:	char	*data	=	印字ﾃﾞｰﾀ格納ﾎﾟｲﾝﾀｰ				|*/
/*|						ulong	no		=	追番							|*/
/*|						uchar	name_no	=	追番名称番号					|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-02-25													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	OibanSet( char *data, ulong no, uchar name_no )
{
	uchar	para;

	para = (uchar)CPrmSS[S_SYS][13];	// 「追番」設定ﾃﾞｰﾀ取得（０：個別／１：通し／２：追番なし）

	if( ( no != 0 )  && ( para != 2 ) ){

		//	追番ﾃﾞｰﾀ≠０　且つ　「追番なし」設定でない場合
		if( no > 999999 ){
			// ６桁を超えたﾃﾞｰﾀの場合、９９９９９９として編集する
			no = 999999;
		}
		if (para == 1){
			name_no = 0;		// 通し追番では名称をつけない
		}
		sprintf( data,"%sNo.%06ld",OibanName_Prn[name_no], no );	// "名称No.xxxxxx"ｾｯﾄ
	}
	else{
		//	追番ﾃﾞｰﾀ＝０　または　「追番なし」設定の場合
		sprintf( data,"             ");								// "             "ｾｯﾄ
	}
}

// GG129000(S) H.Fujinaga 2023/01/04 ゲート式車番チケットレスシステム対応（発券情報印字対応）
//[]----------------------------------------------------------------------[]
///	@brief			発券機№.印字ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		data			発券機№文字列格納ﾎﾟｲﾝﾀｰ
///	@param[in]		no				発券No.
///	@return			void
///	@author			K.Motohashi
///	@note			None
///	@attention		None
//[]----------------------------------------------------------------------[]
///	@date			Create	:	2005/09/26<br>
///					Update	:	
//[]------------------------------------- Copyright(C) 2005 AMANO Corp.---[]
void	HakkenKiNoSet( char *data, uchar no )
{
	if( no == 0 ){

		// 機械No.＝０の場合
		sprintf( data,"%s","          " );	// "          "ｾｯﾄ
	}
	else{
		// 機械No.≠０の場合
		if( no > 99 ){						// ﾃﾞｰﾀﾁｪｯｸ
			no = 99;						// ２桁を超えたﾃﾞｰﾀの場合、９９として編集する
		}
		sprintf( data,"発券機 #%02d",no );	// "発券機 #XX"ｾｯﾄ
	}
}

//[]----------------------------------------------------------------------[]
///	@brief			発券No.印字ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		data			印字ﾃﾞｰﾀ格納ﾎﾟｲﾝﾀｰ
///	@param[in]		no				発券No.
///	@return			void
///	@author			K.Motohashi
///	@note			None
///	@attention		None
//[]----------------------------------------------------------------------[]
///	@date			Create	:	2005/05/26<br>
///					Update	:	
//[]------------------------------------- Copyright(C) 2005 AMANO Corp.---[]
void	HakkenNoSet( char *data, ulong no )
{

	if( no != 0 ){

		//	発券No.ﾃﾞｰﾀ≠０ の場合
		if( no > 999999 ){
			// ６桁を超えたﾃﾞｰﾀの場合、９９９９９９として編集する
			no = 999999;
		}
		sprintf( data,"発券No.%06ld",no );		// "発券No.xxxxxx"ｾｯﾄ
	}
	else{
		//	発券No.ﾃﾞｰﾀ＝０ の場合
		sprintf( data,"             ");			// "             "ｾｯﾄ
	}
}
// GG129000(E) H.Fujinaga 2023/01/04 ゲート式車番チケットレスシステム対応（発券情報印字対応）

/*[]-----------------------------------------------------------------------[]*/
/*|		３桁区切り処理														|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Camma_Set( *ucTmp )									|*/
/*|																			|*/
/*|	PARAMETER		:	uchar	*ucTmp	=	ﾃﾞｰﾀ格納ﾎﾟｲﾝﾀｰ					|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-03													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	Camma_Set( uchar *ucTmp )
{
	ushort		ta;
	ushort		ti,tj;
	ushort		ilen;
	
	if( strlen((char*)ucTmp) <= 3 ) return;

	memset( cTmp1,0,sizeof(cTmp1) );

	strcpy((char*)cTmp1,(char*)ucTmp);

	ilen = (ushort)strlen( (char*)cTmp1 );	//変換する文字列の文字数
	ta = ilen % 3;							//余り

	memcpy( ucTmp , cTmp1 , (size_t)ta );
	for( tj=ti=ta ; ti < ilen ; ti+=3,tj+=3 ){
		if( ti != 0 )
		{
			ucTmp[tj]=',';
			tj++;
		}
		memcpy(  ucTmp + tj , ( cTmp1 + ti ) , 3 );
	}
	ucTmp[tj]=0;
}

/*[]-------------------------------------------------------------------------------[]*/
/*|		一行分の印字文字列設定(印字)１												|*/
/*[]-------------------------------------------------------------------------------[]*/
/*| MODULE NAME		:	Str_Set1( *cFirst, *cSecond, pri_kind )						|*/
/*|																					|*/
/*| PARAMETER		:	char 	*cFirst		= 文字列1ﾃﾞｰﾀﾎﾟｲﾝﾀｰ						|*/
/*|						char 	*cSecond	= 文字列2ﾃﾞｰﾀﾎﾟｲﾝﾀｰ						|*/
/*|						uchar	pri_kind	= 印字先ﾌﾟﾘﾝﾀ							|*/
/*|							R_PRI  : ﾚｼｰﾄ											|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ											|*/
/*|																					|*/
/*| RETURN VALUE	:	void														|*/
/*|																					|*/
/*[]-------------------------------------------------------------------------------[]*/
/*|	用紙幅58mm 印字領域54mm 両端の空白2mm											|*/
/*|	対応フォント	 																|*/
/*|	フォントＡ FONTA_WIDE 															|*/
/*|	漢字       KANJI_WIDE 															|*/
/*|	SJIS  Shift JISとする。															|*/
/*|			 																		|*/
/*[]-------------------------------------------------------------------------------[]*/
/*|	文字列1は左寄せとする															|*/
/*|	文字列2は右寄せとする															|*/
/*|	但し、本処理内にて必ず文字列2の後に半角２文字分の余白を挿入する事とする			|*/
/*|					 																|*/
/*|	指定された文字列をそのまま印字する。											|*/
/*|	但し、文字列1と文字列2の合計が 54mmより小さい場合、1と2の間にｽﾍﾟｰｽ付加する		|*/
/*|																					|*/
/*|	（備考）cTmp1を編集ｴﾘｱとして使用する											|*/
/*|																					|*/
/*[]-------------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi															|*/
/*|	Date	:	2005-07-27															|*/
/*|	Update	:																		|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.------------[]*/
#define		ICHI_WMAX	540				// 印字幅の最大 54mm
void	Str_Set1( const char *cFirst, const char *cSecond, uchar pri_kind )
{
	ushort	pnt1;
	ushort	len1,len2;


	PCMD_LEFT( pri_kind );							// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );			// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );			// 漢字（通常）指定

	memset( cTmp1,0,sizeof(cTmp1) );				// cTmp1ｸﾘｱ（編集した１行分の文字列をｾｯﾄするｴﾘｱとして使用）

	strcpy(	cTmp1, cFirst);							// cTmp1←文字列１ﾃﾞｰﾀ

	pnt1 = Moj_Point( cFirst );						// pnt1←文字列１ｻｲｽﾞ

	pnt1 += Moj_Point( cSecond );					// pnt1←文字列１＋文字列２ｻｲｽﾞ
	pnt1 += FONTA_WIDE*2;							// 半角２文字分のｽﾍﾟｰｽ幅を追加

	if( pnt1 < ICHI_WMAX ){							// ｽﾍﾟｰｽ必要?(Y)

		//	ｽﾍﾟｰｽを挿入する場合
		pnt1 = ICHI_WMAX - pnt1;						// ｽﾍﾟｰｽに割り当てるﾎﾟｲﾝﾄ数
		Spc_Add( cTmp1, pnt1);						// cTmp1←ｽﾍﾟｰｽ追加
	}
	len1 = (ushort)strlen( cTmp1 );					// cTmp1ﾚﾝｸﾞｽ検索
	len2 = (ushort)strlen( cSecond );				// 文字列２ﾚﾝｸﾞｽ検索
	memcpy( &cTmp1[len1], cSecond, (size_t)len2 );	// cTmp1←cSecond（文字列２）を追加
	len1 += len2;									// len1←cTmp1のﾄｰﾀﾙﾚﾝｸﾞｽ
	cTmp1[len1] = LF;								// 改行ﾃﾞｰﾀｾｯﾄ
	len1++;

	PrnCmdLen( (uchar *)cTmp1, len1, pri_kind );	// 編集印字ﾃﾞｰﾀ登録

	if( pri_kind == R_PRI ){
		inc_dct( MOV_PRNT_CNT, 1 );					// 「ﾚｼｰﾄﾌﾟﾘﾝﾀ印字行数」	動作ｶｳﾝﾄ＋１
		GyouCnt_r++;								// 送信済み印字ﾃﾞｰﾀ行数（ﾚｼｰﾄ）＋１
	}
	else{
		inc_dct( MOV_JPNT_CNT, 1 );					// 「ｼﾞｬｰﾅﾙﾌﾟﾘﾝﾀ印字行数」	動作ｶｳﾝﾄ＋１
		GyouCnt_j++;								// 送信済み印字ﾃﾞｰﾀ行数（ｼﾞｬｰﾅﾙ）＋１
	}
}

/*[]-------------------------------------------------------------------------------[]*/
/*|		一行分の印字文字列設定(印字)２												|*/
/*[]-------------------------------------------------------------------------------[]*/
/*| MODULE NAME		:	Str_Set2( *cFirst, *cSecond, *cThird , *cFourth, pri_kind )	|*/
/*|																					|*/
/*| PARAMETER		:	char *cFirst	= 文字列1ﾃﾞｰﾀﾎﾟｲﾝﾀｰ							|*/
/*|						char *cSecond	= 文字列2ﾃﾞｰﾀﾎﾟｲﾝﾀｰ							|*/
/*|						char *cThird	= 文字列3ﾃﾞｰﾀﾎﾟｲﾝﾀｰ							|*/
/*|						char *cFourth	= 文字列4ﾃﾞｰﾀﾎﾟｲﾝﾀｰ							|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ							|*/
/*|							R_PRI  : ﾚｼｰﾄ											|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ											|*/
/*|																					|*/
/*| RETURN VALUE	:	void														|*/
/*|																					|*/
/*[]-------------------------------------------------------------------------------[]*/
/*|	用紙幅58mm 印字領域54mm 両端の空白各2mm											|*/
/*|	対応フォント	 																|*/
/*|	フォントＡ FONTA_WIDE 															|*/
/*|	漢字       KANJI_WIDE 															|*/
/*|	SJIS  Shift JISとする。															|*/
/*|			 																		|*/
/*[]-------------------------------------------------------------------------------[]*/
/*|	文字列1は左寄せとする															|*/
/*|	文字列2の終わりは,30.0mmとする。(両端2mmを除く)									|*/
/*|	文字列3、文字列4は右寄せとする													|*/
/*|	文字列4の終了位置は、54mmとする													|*/
/*|	但し、本処理内にて必ず文字列4の後に半角２文字分の余白を挿入する事とする			|*/
/*|					 																|*/
/*|	指定された文字列をそのまま印字する。											|*/
/*|	但し、以下はスペースを付加する。												|*/
/*|	文字列1と文字列2の合計が 30.0mmより小さい場合、1と2の間にｽﾍﾟｰｽ付加する			|*/
/*|	文字列3と文字列4の合計が 24.0mmより小さい場合、2と3の間にｽﾍﾟｰｽ付加する			|*/
/*|																					|*/
/*|	（備考）cTmp1、cTmp2を編集ｴﾘｱとして使用する										|*/
/*|																					|*/
/*[]-------------------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi															|*/
/*|	Date	:	2005-07-27															|*/
/*|	Update	:																		|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.------------[]*/
#define		ICHI_W1		300						// 文字列１,２の最大 31.0mm
#define		ICHI_W2		(ICHI_WMAX - ICHI_W1)	// 文字列３,４の最大 23.0mm
void	Str_Set2( const char *cFirst, const char *cSecond, const char *cThird, const char *cFourth, uchar pri_kind )
{
	ushort	pnt1;
	ushort	len1,len2;


	PCMD_LEFT( pri_kind );							// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );			// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );			// 漢字（通常）指定

	memset( cTmp1,0,sizeof(cTmp1) );				// cTmp1ｸﾘｱ（編集した１行分の文字列をｾｯﾄするｴﾘｱとして使用）
	memset( cTmp2,0,sizeof(cTmp2) );				// cTmp2ｸﾘｱ（文字列編集ｴﾘｱとして使用）

	/*------------------------------------------------------*/
	/*	文字列１と文字列２の間のｽﾍﾟｰｽを編集する				*/
	/*------------------------------------------------------*/
	strcpy(	cTmp2, cFirst);							// cTmp2←文字列１ﾃﾞｰﾀ

	pnt1 = Moj_Point( cFirst );						// 文字列１ｻｲｽﾞ

	pnt1 += Moj_Point( cSecond );					// 文字列２ｻｲｽﾞ

	if( pnt1 < ICHI_W1 ){							// ｽﾍﾟｰｽ必要?(Y)

		//	ｽﾍﾟｰｽを挿入する場合
		pnt1 = ICHI_W1 - pnt1;						// ｽﾍﾟｰｽに割り当てるﾎﾟｲﾝﾄ数
		len1 = Spc_Add( cTmp2, pnt1);				// cTmp2←ｽﾍﾟｰｽ追加 & len1←ｽﾍﾟｰｽ挿入後のcTmp2ﾚﾝｸﾞｽ
	}
	else{
		//	ｽﾍﾟｰｽを挿入しない場合
		len1 = (ushort)strlen( cTmp2 );				// len1←cTmp2ﾚﾝｸﾞｽ
	}
	memcpy( cTmp1, cTmp2, (size_t)len1 );			// cTmp1←cTmp2
	len2 = len1;									// len2←cTmp1のﾄｰﾀﾙﾚﾝｸﾞｽ

	len1 = (ushort)strlen( cSecond );				// 文字列２ﾚﾝｸﾞｽ検索
	memcpy( &cTmp1[len2], cSecond, (size_t)len1 );	// cTmp1（文字列１＋ｽﾍﾟｰｽ）←cSecond（文字列２）を追加
	len2 += len1;									// len2←cTmp1のﾄｰﾀﾙﾚﾝｸﾞｽ

	/*------------------------------------------------------*/
	/*	文字列２と文字列３の間のｽﾍﾟｰｽを編集する				*/
	/*------------------------------------------------------*/
	memset( cTmp2,0,sizeof(cTmp2) );				// cTmp2ｸﾘｱ

	pnt1 = Moj_Point( cThird );						// 文字列３ｻｲｽﾞ

	pnt1 += Moj_Point( cFourth );					// 文字列４ｻｲｽﾞ
	pnt1 += FONTA_WIDE*2;							// 半角２文字分のｽﾍﾟｰｽ幅を追加

	if( pnt1 < ICHI_W2 ){							// ｽﾍﾟｰｽ必要?(Y)

		//	ｽﾍﾟｰｽを挿入する場合
		pnt1 = ICHI_W2 - pnt1;						// ｽﾍﾟｰｽに割り当てるﾎﾟｲﾝﾄ数
		len1 = Spc_Add( cTmp2, pnt1);				// cTmp2←ｽﾍﾟｰｽ追加 & len1←ｽﾍﾟｰｽ挿入後のcTmp2ﾚﾝｸﾞｽ
	}
	else{
		//	ｽﾍﾟｰｽを挿入しない場合
		len1 = (ushort)strlen( cTmp2 );				// len1←cTmp2ﾚﾝｸﾞｽ
	}
	memcpy( &cTmp1[len2], cTmp2, (size_t)len1 );	// cTmp1←cTmp2（ｽﾍﾟｰｽﾃﾞｰﾀ）を追加
	len2 += len1;									// len2←cTmp1のﾄｰﾀﾙﾚﾝｸﾞｽ

	/*------------------------------------------------------*/
	/*	文字列３と文字列４を追加する						*/
	/*------------------------------------------------------*/
	len1 = (ushort)strlen( cThird );				// 文字列３ﾚﾝｸﾞｽ検索
	memcpy( &cTmp1[len2], cThird, (size_t)len1 );	// cTmp1←cThird（文字列３）を追加
	len2 += len1;									// len2←cTmp1のﾄｰﾀﾙﾚﾝｸﾞｽ

	len1 = (ushort)strlen( cFourth );				// 文字列４ﾚﾝｸﾞｽ検索
	memcpy( &cTmp1[len2], cFourth, (size_t)len1 );	// cTmp1←cFourth（文字列４）を追加
	len2 += len1;									// len2←cTmp1のﾄｰﾀﾙﾚﾝｸﾞｽ

	cTmp1[len2] = LF;								// 改行ﾃﾞｰﾀｾｯﾄ
	len2++;

	PrnCmdLen( (uchar *)cTmp1, len2, pri_kind );	// 編集印字ﾃﾞｰﾀ登録

	if( pri_kind == R_PRI ){
		inc_dct( MOV_PRNT_CNT, 1 );					// 「ﾚｼｰﾄﾌﾟﾘﾝﾀ印字行数」	動作ｶｳﾝﾄ＋１
		GyouCnt_r++;								// 送信済み印字ﾃﾞｰﾀ行数（ﾚｼｰﾄ）＋１
	}
	else{
		inc_dct( MOV_JPNT_CNT, 1 );					// 「ｼﾞｬｰﾅﾙﾌﾟﾘﾝﾀ印字行数」	動作ｶｳﾝﾄ＋１
		GyouCnt_j++;								// 送信済み印字ﾃﾞｰﾀ行数（ｼﾞｬｰﾅﾙ）＋１
	}

}

// MH810105(S) MH364301 QRコード決済対応
//[]----------------------------------------------------------------------[]
///	@brief			一行分の印字文字列設定(印字)２
//[]----------------------------------------------------------------------[]
///	@param[in]		cFirst			文字列1ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in]		cSecond			文字列2ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in]		cThird			文字列3ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in]		cFourth			文字列4ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
///	@param[in]		font_size		ﾌｫﾝﾄｻｲｽﾞ　0：標準　1：横倍角　2：縦倍角　3：４倍角
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
///	@param[in]		pri_kind		印字先ﾌﾟﾘﾝﾀ<br>
///										R_PRI  : ﾚｼｰﾄ<br>
///										J_PRI  : ｼﾞｬｰﾅﾙ
///	@return			void
///	@author			T.Sato
///	@note			文字列1は左寄せとする<br>
///					文字列2の終わりは,30.0mmとする。(両端2mmを除く)<br>
///					文字列3、文字列4は右寄せとする<br>
///					文字列4の終了位置は、54mmとする<br>
///					但し、本処理内にて必ず文字列4の後に半角２文字分の余白を挿入する事とする<br>
///					<br>
///					指定された文字列をそのまま印字する。<br>
///					但し、以下はスペースを付加する。<br>
///					文字列1と文字列2の合計が 30.0mmより小さい場合、1と2の間にｽﾍﾟｰｽ付加する<br>
///					文字列3と文字列4の合計が 24.0mmより小さい場合、2と3の間にｽﾍﾟｰｽ付加する<br>
///					<br>
///					（備考）cTmp1、cTmp2を編集ｴﾘｱとして使用する<br>
///	@attention		用紙幅58mm 印字領域54mm 両端の空白各2mm<br>
///					対応フォント<br>
///					フォントＡ FONTA_WIDE<br>
///					漢字       KANJI_WIDE<br>
///					SJIS  Shift JISとする。<br>
//[]----------------------------------------------------------------------[]
///	@date			Create	:	2021/12/21<br>
///					Update	:
//[]------------------------------------- Copyright(C) 2021 AMANO Corp.---[]
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//void	Str_Set4( const char *cFirst, const char *cSecond, const char *cThird,
//					const char *cFourth, uchar pri_kind )
void	Str_Set4( const char *cFirst, const char *cSecond, const char *cThird, const char *cFourth,
					uchar font_size, uchar pri_kind )
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
{
	ushort	pnt1;
	ushort	len1,len2;
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
	uchar	font_a;
	uchar	font_k;
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）


	PCMD_LEFT( pri_kind );							// [位置揃え(左揃え)]
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//	PrnFontSize( FONT_A_TATEBAI, pri_kind );		// ﾌｫﾝﾄＡ（縦倍角）指定
//	PrnFontSize( FONT_K_TATEBAI, pri_kind );		// 漢字（縦倍角）指定
	switch ( font_size )
	{
		default:
		case	0:									// 標準
			font_a = FONT_A_NML;
			font_k = FONT_K_NML;
			break;
		case	1:									// 横倍角
			font_a = FONT_A_YOKOBAI;
			font_k = FONT_K_YOKOBAI;
			break;
		case	2:									// 縦倍角
			font_a = FONT_A_TATEBAI;
			font_k = FONT_K_TATEBAI;
			break;
		case	3:									// ４倍角
			font_a = FONT_A_4BAI;
			font_k = FONT_K_4BAI;
			break;
	}
	PrnFontSize( font_a, pri_kind );				// ﾌｫﾝﾄＡ（縦倍角）指定
	PrnFontSize( font_k, pri_kind );				// 漢字（縦倍角）指定
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）

	memset( cTmp1,0,sizeof(cTmp1) );				// cTmp1ｸﾘｱ（編集した１行分の文字列をｾｯﾄするｴﾘｱとして使用）
	memset( cTmp2,0,sizeof(cTmp2) );				// cTmp2ｸﾘｱ（文字列編集ｴﾘｱとして使用）

// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
	if( font_size == 1 || font_size == 3 ){
		// 横倍印字の際は Str_SetEmpha を参考に処理させる
		/*------------------------------------------------------*/
		/*	文字列１と文字列２を追加する                          */
		/*------------------------------------------------------*/
		strcpy(	cTmp1, cFirst);							// cTmp1←文字列１ﾃﾞｰﾀ
		len1 = (ushort)strlen( cTmp1 );					// len1←cTmp1ﾚﾝｸﾞｽ

		len2 = (ushort)strlen( cSecond );				// 文字列２ﾚﾝｸﾞｽ検索
		memcpy( &cTmp1[len1], cSecond, (size_t)len2 );	// cTmp1（文字列１＋ｽﾍﾟｰｽ）←cSecond（文字列２）を追加
		len1 += len2;									// len1←cTmp1のﾄｰﾀﾙﾚﾝｸﾞｽ

		/*------------------------------------------------------*/
		/*	文字列２と文字列３の間のｽﾍﾟｰｽを編集する				*/
		/*------------------------------------------------------*/
		pnt1 = Moj_Point( cFirst ) * 2;					// 文字列１ｻｲｽﾞ （横倍なので２倍）
		pnt1 += Moj_Point( cSecond ) * 2;				// 文字列２ｻｲｽﾞ （横倍なので２倍）
		pnt1 += Moj_Point( cThird ) * 2;				// 文字列３ｻｲｽﾞ （横倍なので２倍）
		pnt1 += Moj_Point( cFourth ) * 2;				// 文字列４ｻｲｽﾞ （横倍なので２倍）
		pnt1 += FONTA_WIDE*2;							// 半角2文字分のｽﾍﾟｰｽ幅を追加(右端のスペース)

		if( pnt1 < ICHI_WMAX ){							// ｽﾍﾟｰｽ必要?(Y)
			//	ｽﾍﾟｰｽを挿入する場合
			pnt1 = ICHI_WMAX - pnt1;					// ｽﾍﾟｰｽに割り当てるﾎﾟｲﾝﾄ数
			pnt1 /= 2;									// 横倍で印字するため、通常のｽﾍﾟｰｽ領域の半分が必要
			len1 = Spc_Add( cTmp1, pnt1);				// cTmp1←ｽﾍﾟｰｽ追加 & len1←ｽﾍﾟｰｽ挿入後のcTmp1ﾚﾝｸﾞｽ
		}
		else{
			//	ｽﾍﾟｰｽを挿入しない場合
			len1 = (ushort)strlen( cTmp1 );				// len1←cTmp1ﾚﾝｸﾞｽ
		}

		/*------------------------------------------------------*/
		/*	文字列３と文字列４を追加する						*/
		/*------------------------------------------------------*/
		len2 = (ushort)strlen( cThird );				// 文字列３ﾚﾝｸﾞｽ検索
		memcpy( &cTmp1[len1], cThird, (size_t)len2 );	// cTmp1←cThird（文字列３）を追加
		len1 += len2;									// len1←cTmp1のﾄｰﾀﾙﾚﾝｸﾞｽ

		len2 = (ushort)strlen( cFourth );				// 文字列４ﾚﾝｸﾞｽ検索
		memcpy( &cTmp1[len1], cFourth, (size_t)len2 );	// cTmp1←cFourth（文字列４）を追加
		len1 += len2;									// len1←cTmp1のﾄｰﾀﾙﾚﾝｸﾞｽ

		cTmp1[len1] = LF;								// 改行ﾃﾞｰﾀｾｯﾄ
		len1++;

		PrnCmdLen( (uchar *)cTmp1, len1, pri_kind );	// 編集印字ﾃﾞｰﾀ登録
	}
	else{
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
	/*------------------------------------------------------*/
	/*	文字列１と文字列２の間のｽﾍﾟｰｽを編集する				*/
	/*------------------------------------------------------*/
	strcpy(	cTmp2, cFirst);							// cTmp2←文字列１ﾃﾞｰﾀ

	pnt1 = Moj_Point( cFirst );						// 文字列１ｻｲｽﾞ

	pnt1 += Moj_Point( cSecond );					// 文字列２ｻｲｽﾞ

	if( pnt1 < ICHI_W1 ){							// ｽﾍﾟｰｽ必要?(Y)

		//	ｽﾍﾟｰｽを挿入する場合
		pnt1 = ICHI_W1 - pnt1;						// ｽﾍﾟｰｽに割り当てるﾎﾟｲﾝﾄ数
		len1 = Spc_Add( cTmp2, pnt1);				// cTmp2←ｽﾍﾟｰｽ追加 & len1←ｽﾍﾟｰｽ挿入後のcTmp2ﾚﾝｸﾞｽ
	}
	else{
		//	ｽﾍﾟｰｽを挿入しない場合
		len1 = (ushort)strlen( cTmp2 );				// len1←cTmp2ﾚﾝｸﾞｽ
	}
	memcpy( cTmp1, cTmp2, (size_t)len1 );			// cTmp1←cTmp2
	len2 = len1;									// len2←cTmp1のﾄｰﾀﾙﾚﾝｸﾞｽ

	len1 = (ushort)strlen( cSecond );				// 文字列２ﾚﾝｸﾞｽ検索
	memcpy( &cTmp1[len2], cSecond, (size_t)len1 );	// cTmp1（文字列１＋ｽﾍﾟｰｽ）←cSecond（文字列２）を追加
	len2 += len1;									// len2←cTmp1のﾄｰﾀﾙﾚﾝｸﾞｽ

	/*------------------------------------------------------*/
	/*	文字列２と文字列３の間のｽﾍﾟｰｽを編集する				*/
	/*------------------------------------------------------*/
	memset( cTmp2,0,sizeof(cTmp2) );				// cTmp2ｸﾘｱ

	pnt1 = Moj_Point( cThird );						// 文字列３ｻｲｽﾞ

	pnt1 += Moj_Point( cFourth );					// 文字列４ｻｲｽﾞ
	pnt1 += FONTA_WIDE*2;							// 半角２文字分のｽﾍﾟｰｽ幅を追加

	if( pnt1 < ICHI_W2 ){							// ｽﾍﾟｰｽ必要?(Y)

		//	ｽﾍﾟｰｽを挿入する場合
		pnt1 = ICHI_W2 - pnt1;						// ｽﾍﾟｰｽに割り当てるﾎﾟｲﾝﾄ数
		len1 = Spc_Add( cTmp2, pnt1);				// cTmp2←ｽﾍﾟｰｽ追加 & len1←ｽﾍﾟｰｽ挿入後のcTmp2ﾚﾝｸﾞｽ
	}
	else{
		//	ｽﾍﾟｰｽを挿入しない場合
		len1 = (ushort)strlen( cTmp2 );				// len1←cTmp2ﾚﾝｸﾞｽ
	}
	memcpy( &cTmp1[len2], cTmp2, (size_t)len1 );	// cTmp1←cTmp2（ｽﾍﾟｰｽﾃﾞｰﾀ）を追加
	len2 += len1;									// len2←cTmp1のﾄｰﾀﾙﾚﾝｸﾞｽ

	/*------------------------------------------------------*/
	/*	文字列３と文字列４を追加する						*/
	/*------------------------------------------------------*/
	len1 = (ushort)strlen( cThird );				// 文字列３ﾚﾝｸﾞｽ検索
	memcpy( &cTmp1[len2], cThird, (size_t)len1 );	// cTmp1←cThird（文字列３）を追加
	len2 += len1;									// len2←cTmp1のﾄｰﾀﾙﾚﾝｸﾞｽ

	len1 = (ushort)strlen( cFourth );				// 文字列４ﾚﾝｸﾞｽ検索
	memcpy( &cTmp1[len2], cFourth, (size_t)len1 );	// cTmp1←cFourth（文字列４）を追加
	len2 += len1;									// len2←cTmp1のﾄｰﾀﾙﾚﾝｸﾞｽ

	cTmp1[len2] = LF;								// 改行ﾃﾞｰﾀｾｯﾄ
	len2++;

	PrnCmdLen( (uchar *)cTmp1, len2, pri_kind );	// 編集印字ﾃﾞｰﾀ登録
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
	}
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）

	if( pri_kind == R_PRI ){
		inc_dct( MOV_PRNT_CNT, 1 );					// 「ﾚｼｰﾄﾌﾟﾘﾝﾀ印字行数」	動作ｶｳﾝﾄ＋１
		GyouCnt_r++;								// 送信済み印字ﾃﾞｰﾀ行数（ﾚｼｰﾄ）＋１
	}
	else{
		inc_dct( MOV_JPNT_CNT, 1 );					// 「ｼﾞｬｰﾅﾙﾌﾟﾘﾝﾀ印字行数」	動作ｶｳﾝﾄ＋１
		GyouCnt_j++;								// 送信済み印字ﾃﾞｰﾀ行数（ｼﾞｬｰﾅﾙ）＋１
	}
}
// MH810105(E) MH364301 QRコード決済対応
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//[]----------------------------------------------------------------------[]
///	@brief			一行分の印字文字列設定(印字)５
//[]----------------------------------------------------------------------[]
///	@param[in]		cFirst			文字列1ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in]		cSecond			文字列2ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in]		cThird			文字列3ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in]		cFourth			文字列4ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in]		pri_kind		印字先ﾌﾟﾘﾝﾀ<br>
///										R_PRI  : ﾚｼｰﾄ<br>
///										J_PRI  : ｼﾞｬｰﾅﾙ
///	@return			void
///	@note			従来のStr_Set2と同様に４つの引数文字列を印字する
///					ただし、文字列4の後に半角２文字分の余白を挿入していないので注意すること
///					（備考）cTmp1、cTmp2を編集ｴﾘｱとして使用する<br>
///	@attention		用紙幅58mm 印字領域54mm 左の空白2mm 右の空白なし<br>
///					対応フォント<br>
///					フォントＡ FONTA_WIDE<br>
///					漢字       KANJI_WIDE<br>
///					SJIS  Shift JISとする。<br>
//[]----------------------------------------------------------------------[]
///	@date			Create	:	2022/06/22<br>
///					Update	:
//[]------------------------------------- Copyright(C) 2022 AMANO Corp.---[]
void	Str_Set5( char *cFirst, char *cSecond, char *cThird, char *cFourth, uchar pri_kind )
{
	ushort	pnt1;
	ushort	len1,len2;


	PCMD_LEFT( pri_kind );							// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );			// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );			// 漢字（通常）指定

	memset( cTmp1,0,sizeof(cTmp1) );				// cTmp1ｸﾘｱ（編集した１行分の文字列をｾｯﾄするｴﾘｱとして使用）
	memset( cTmp2,0,sizeof(cTmp2) );				// cTmp2ｸﾘｱ（文字列編集ｴﾘｱとして使用）

	/*------------------------------------------------------*/
	/*	文字列１と文字列２の間のｽﾍﾟｰｽを編集する				*/
	/*------------------------------------------------------*/
	strcpy(	cTmp2, cFirst);							// cTmp2←文字列１ﾃﾞｰﾀ

	pnt1 = Moj_Point( cFirst );						// 文字列１ｻｲｽﾞ

	pnt1 += Moj_Point( cSecond );					// 文字列２ｻｲｽﾞ

	if( pnt1 < ICHI_W1 ){							// ｽﾍﾟｰｽ必要?(Y)

		//	ｽﾍﾟｰｽを挿入する場合
		pnt1 = ICHI_W1 - pnt1;						// ｽﾍﾟｰｽに割り当てるﾎﾟｲﾝﾄ数
		len1 = Spc_Add( cTmp2, pnt1);				// cTmp2←ｽﾍﾟｰｽ追加 & len1←ｽﾍﾟｰｽ挿入後のcTmp2ﾚﾝｸﾞｽ
	}
	else{
		//	ｽﾍﾟｰｽを挿入しない場合
		len1 = (ushort)strlen( cTmp2 );				// len1←cTmp2ﾚﾝｸﾞｽ
	}
	memcpy( cTmp1, cTmp2, (size_t)len1 );			// cTmp1←cTmp2
	len2 = len1;									// len2←cTmp1のﾄｰﾀﾙﾚﾝｸﾞｽ

	len1 = (ushort)strlen( cSecond );				// 文字列２ﾚﾝｸﾞｽ検索
	memcpy( &cTmp1[len2], cSecond, (size_t)len1 );	// cTmp1（文字列１＋ｽﾍﾟｰｽ）←cSecond（文字列２）を追加
	len2 += len1;									// len2←cTmp1のﾄｰﾀﾙﾚﾝｸﾞｽ

	/*------------------------------------------------------*/
	/*	文字列２と文字列３の間のｽﾍﾟｰｽを編集する				*/
	/*------------------------------------------------------*/
	memset( cTmp2,0,sizeof(cTmp2) );				// cTmp2ｸﾘｱ

	pnt1 = Moj_Point( cThird );						// 文字列３ｻｲｽﾞ

	pnt1 += Moj_Point( cFourth );					// 文字列４ｻｲｽﾞ

	if( pnt1 < ICHI_W2 ){							// ｽﾍﾟｰｽ必要?(Y)

		//	ｽﾍﾟｰｽを挿入する場合
		pnt1 = ICHI_W2 - pnt1;						// ｽﾍﾟｰｽに割り当てるﾎﾟｲﾝﾄ数
		len1 = Spc_Add( cTmp2, pnt1);				// cTmp2←ｽﾍﾟｰｽ追加 & len1←ｽﾍﾟｰｽ挿入後のcTmp2ﾚﾝｸﾞｽ
	}
	else{
		//	ｽﾍﾟｰｽを挿入しない場合
		len1 = (ushort)strlen( cTmp2 );				// len1←cTmp2ﾚﾝｸﾞｽ
	}
	memcpy( &cTmp1[len2], cTmp2, (size_t)len1 );	// cTmp1←cTmp2（ｽﾍﾟｰｽﾃﾞｰﾀ）を追加
	len2 += len1;									// len2←cTmp1のﾄｰﾀﾙﾚﾝｸﾞｽ

	/*------------------------------------------------------*/
	/*	文字列３と文字列４を追加する						*/
	/*------------------------------------------------------*/
	len1 = (ushort)strlen( cThird );				// 文字列３ﾚﾝｸﾞｽ検索
	memcpy( &cTmp1[len2], cThird, (size_t)len1 );	// cTmp1←cThird（文字列３）を追加
	len2 += len1;									// len2←cTmp1のﾄｰﾀﾙﾚﾝｸﾞｽ

	len1 = (ushort)strlen( cFourth );				// 文字列４ﾚﾝｸﾞｽ検索
	memcpy( &cTmp1[len2], cFourth, (size_t)len1 );	// cTmp1←cFourth（文字列４）を追加
	len2 += len1;									// len2←cTmp1のﾄｰﾀﾙﾚﾝｸﾞｽ

	cTmp1[len2] = LF;								// 改行ﾃﾞｰﾀｾｯﾄ
	len2++;

	PrnCmdLen( (uchar *)cTmp1, len2, pri_kind );	// 編集印字ﾃﾞｰﾀ登録

	if( pri_kind == R_PRI ){
		inc_dct( MOV_PRNT_CNT, 1 );					// 「ﾚｼｰﾄﾌﾟﾘﾝﾀ印字行数」	動作ｶｳﾝﾄ＋１
		GyouCnt_r++;								// 送信済み印字ﾃﾞｰﾀ行数（ﾚｼｰﾄ）＋１
	}
	else{
		inc_dct( MOV_JPNT_CNT, 1 );					// 「ｼﾞｬｰﾅﾙﾌﾟﾘﾝﾀ印字行数」	動作ｶｳﾝﾄ＋１
		GyouCnt_j++;								// 送信済み印字ﾃﾞｰﾀ行数（ｼﾞｬｰﾅﾙ）＋１
	}

}
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）

/*[]-----------------------------------------------------------------------[]*/
/*|		文字幅演算処理														|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Moj_Point( *data)									|*/
/*|																			|*/
/*|	PARAMETER		:	char	*data	=	計算対象文字列ﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|	RETURN VALUE	:	ushort	ret		=	文字幅のﾎﾟｲﾝﾄ数					|*/
/*|						文字幅の対象は,ﾌｫﾝﾄAと漢字とする					|*/
/*|						ﾌｫﾝﾄA 15(1.5mm) 漢字 30(3.0mm)						|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-03													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
static const ushort wSize[3]=	{ 0, FONTA_WIDE, KANJI_WIDE };

ushort	Moj_Point( const char *data)
{
	ushort	rts;		// 文字ｻｲｽﾞの合計
	ushort	slen;		// 計算対象文字列のﾊﾞｲﾄ数
	ushort	cnt;		// 処理済みﾊﾞｲﾄ数
	uchar	rtc;


	rts = 0;
	cnt = 0;
	slen = (ushort)strlen( (char *)data );		// ﾊﾞｲﾄ数

	for( ; cnt < slen; ){						// 残りﾊﾞｲﾄ数あり?(Y)

		rtc = SJIS_Size( (uchar *)&data[cnt] );	// rtcが1の場合FONTA_WIDE
												// rtcが2の場合KANJI_WIDE
		rts += wSize[rtc];

		cnt += (ushort)rtc;
	}
	return(rts);								// 文字ｻｲｽﾞの合計
}

/*[]-----------------------------------------------------------------------[]*/
/*|		ｽﾍﾟｰｽ挿入処理														|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Spc_Add( *data, cnt)								|*/
/*|																			|*/
/*|	PARAMETER		:	char	*data	=	ｽﾍﾟｰｽを挿入される文字列			|*/
/*|						ushort	cnt		=	ｽﾍﾟｰｽ量[mm]						|*/
/*|																			|*/
/*|	RETURN VALUE	:	ushort	len		=	ｽﾍﾟｰｽ挿入後の文字列ﾚﾝｸﾞｽ		|*/
/*|						*dataにｽﾍﾟｰｽを挿入する（1.5mm～54mmに対応）			|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-03													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
ushort	Spc_Add( char *data, ushort cnt)
{
	ushort	i;
	ushort	j;
	ushort	len;

	len = (ushort)strlen(data);					// 追加する文字数

	if( cnt < FONTA_WIDE ){						// 15(1.5mm)以下?(Y)
		return( len );							// 対応しない
	}
	i = cnt / FONTA_WIDE;						// ｽﾍﾟｰｽ(1.5mm)挿入量
	j = cnt % FONTA_WIDE;						// 1.5mm以下の端数


	if( j == 0 ){
		// 端数なしの場合
		while(i){
			data[len++] = 0x20;					// 挿入するｽﾍﾟｰｽ分のｽﾍﾟｰｽﾃﾞｰﾀを追加
			i--;
		}
	}
	else{
		// 端数ありの場合

		data[len++] = 0x1b;						// 文字ｽﾍﾟｰｽ量を変更する
		data[len++] = 0x20;
		j *= 100;								// j = mm * 1000
		j /= 125;								// j Dot = j mm * 1000 / 125
		data[len++] = (uchar)j;					// 文字ｽﾍﾟｰｽ量（ﾄﾞｯﾄ数）ｾｯﾄ
		data[len++] = 0x20;						// ｽﾍﾟｰｽﾃﾞｰﾀを１個追加

		data[len++] = 0x1b;						// 文字ｽﾍﾟｰｽを基準（0mm）に戻す
		data[len++] = 0x20;
		data[len++] = 0x00;

		i--;									// 端数処理で追加したｽﾍﾟｰｽ１個を減算
		while(i){
			data[len++] = 0x20;					// 挿入するｽﾍﾟｰｽ分のｽﾍﾟｰｽﾃﾞｰﾀを追加
			i--;
		}
	}
	data[len] = 0x00;							// 文字列の終わり

	return( len );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		文字列の追加処理													|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	StrAdd( *ucTmpA, *ucTmpB)							|*/
/*|																			|*/
/*|	PARAMETER		:	uchar	*ucTmpA	=	文字列１						|*/
/*|						uchar	*ucTmpB	=	文字列２						|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*|		ucTmpA = ucTmpB+ucTmpA												|*/
/*|		ﾃﾝﾎﾟﾗﾘｰを使用し、ucTmpAの内容一時退避する							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	K.Motohashi													|*/
/*|	Date	:	2005-03-04													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
void	StrAdd( uchar *ucTmpA , uchar *ucTmpB )
{

	strcpy(cTmp1,(char*)ucTmpA);				// tenpolary save

	strcpy((char*)ucTmpA,(char*)ucTmpB);

	strcat((char*)ucTmpA, cTmp1);				// ucTmpA = ucTmpB + ucTmpA

}

/*[]-----------------------------------------------------------------------[]*/
/*|		Suica通信ﾛｸﾞ印字ﾃﾞｰﾀ編集											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Suica_Log_edit( *msg_data, pri_kind, *p_proc_data )	|*/
/*|																			|*/
/*|	PARAMETER		:	T_FrmLogPriReq1	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	T.Namioka													|*/
/*|	Date	:	2007-02-26													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
void	Suica_Log_edit( T_FrmLogPriReq1 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ
	ushort	print_data_count;
	ushort	CardType;
	uchar	CardName[20];
	struct	suica_log_rec *wlogbuf;

	if( (msg_data->Kikai_no & 0x8000) == 0x8000 ){
		wlogbuf = &SUICA_LOG_REC_FOR_ERR;
	}else{
		wlogbuf = &SUICA_LOG_REC;
	}

	if( p_proc_data->Log_Start == OFF ){

		// 編集開始（初回編集）の場合

		/*------	＜表題＞編集	------*/
// MH810103 GG119202(S) 設定参照変更
//		if( Is_SUICA_STYLE_OLD ){								// 旧版動作設定
		if (isEC_USE()) {
		// 決済リーダー使用時は電子マネー類の有無に左右されない
			CardType = OPE_DISP_MEDIA_TYPE_EC;
		}
		else if( Is_SUICA_STYLE_OLD ){							// 旧版動作設定
// MH810103 GG119202(E) 設定参照変更
			CardType = OPE_DISP_MEDIA_TYPE_SUICA;				// Suica固定
		}
		else{													// 新版動作指定
			CardType = Ope_Disp_Media_Getsub( 0 );				// 設定からカードタイプget
		}
		switch( CardType ){
		case OPE_DISP_MEDIA_TYPE_SUICA:							// Ｓｕｉｃａ
		default:
			strcpy( (char*)CardName, "Ｓｕｉｃａ" );
			break;
		case OPE_DISP_MEDIA_TYPE_PASMO:							// ＰＡＳＭＯ
			strcpy( (char*)CardName, "ＰＡＳＭＯ" );
			break;
		case OPE_DISP_MEDIA_TYPE_ICOCA:							// ＩＣＯＣＡ
			strcpy( (char*)CardName, "ＩＣＯＣＡ" );
			break;
		case OPE_DISP_MEDIA_TYPE_ICCARD:						// ＩＣカード（複数カード利用時：現在未使用）
			strcpy( (char*)CardName, "ＩＣカード" );
			break;
		case OPE_DISP_MEDIA_TYPE_eMONEY:						// 電子マネー
			strcpy( (char*)CardName, "電子マネー" );
			break;
// MH321800(S) D.Inaba ICクレジット対応
		case OPE_DISP_MEDIA_TYPE_EC:							// 決済リーダ
			strcpy( (char*)CardName, "決済リーダ" );
			break;
// MH321800(E) D.Inaba ICクレジット対応
		}
		strcat( (char*)CardName, "通信ログ" );

		Prn_edit_Title	(										// 表題（"ｘｘｘｘｘ通信ログ"）印字ﾃﾞｰﾀ編集
							(char*)CardName,
							FONT_K_YOKOBAI,
							pri_kind
						);
		if( (msg_data->Kikai_no & 0x8000) == 0x8000 ){
			Prn_edit_Title	(										// 表題（"（異常）"）印字ﾃﾞｰﾀ編集
								(char*)"（異常）",
								FONT_K_YOKOBAI,
								pri_kind
							);				
		}

		/*------	１行空白	------*/
		Prn_edit_space( pri_kind );

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, (ushort)(msg_data->Kikai_no&0x7fff) );	// 機械NO.編集
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録

		/*------	＜印字日時＞編集	------*/
		Prn_edit_Date( prn_work, &msg_data->PriTime );			// 日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字日時　印字ﾃﾞｰﾀ登録

		/*------	１行空白	------*/
		Prn_edit_space( pri_kind );

		/*------	Suica通信ﾛｸﾞ情報件数検索	------*/


			// ﾛｸﾞ情報が正常な場合

		p_proc_data->Log_Start	= ON;						// Log_Start	← ﾛｸﾞﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ
		wlogbuf->cNull = (char)NULL;
		p_proc_data->Log_Count	= (ushort)strlen( wlogbuf->log_Buf );	// 印字ﾊﾞｲﾄ数ｾｯﾄ

		if( p_proc_data->Log_Count >= SUICA_LOG_MAXSIZE ){

			p_proc_data->Log_DataPt	= wlogbuf->log_wpt;
			p_proc_data->Log_no_wk[0] = 1;
			p_proc_data->Log_no_wk[1] = 1;
		}else{
			p_proc_data->Log_DataPt	= 0;
			p_proc_data->Log_no_wk[0] = 0;
		}
		if( p_proc_data->Log_Count == 0 ){

			// 格納件数が０の場合
			edit_end = ON;									// 編集終了
		}

	}	// 初回編集処理end

	else{
		// ２回目以降の編集処理

		/*------	印字対象ﾃﾞｰﾀ編集	------*/
		if( p_proc_data->Log_no_wk[0] ){
			print_data_count = Suica_edit_data2( wlogbuf->log_Buf,
												 pri_kind, 
												 p_proc_data, 
												 &p_proc_data->Log_DataPt,
												 wlogbuf );

			p_proc_data->Log_Count  -= print_data_count;			// 印字ﾊﾞｲﾄ数更新
			if( p_proc_data->Log_DataPt == wlogbuf->log_wpt )
				p_proc_data->Log_Count = 0;

		}else{
			print_data_count = Suica_edit_data( &wlogbuf->log_Buf[p_proc_data->Log_DataPt],
												pri_kind, 
												p_proc_data->Log_Count );
			/*------	次編集ﾛｸﾞ情報検索	------*/
			p_proc_data->Log_Count  -= print_data_count;			// 印字ﾊﾞｲﾄ数更新
			p_proc_data->Log_DataPt	+= print_data_count;			// 印字開始位置更新
		}

		if( p_proc_data->Log_Count == 0 ){						// 全ﾛｸﾞ情報編集終了？

			// 格納件数分の編集が終了した場合
			edit_end = ON;										// 編集終了
		}	

	}	// ２回目以降の編集処理end

	/*------	編集終了ﾁｪｯｸ	------*/
	if( edit_end == ON ){	
		p_proc_data->Final = ON;			// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
}
/*[]-----------------------------------------------------------------------[]*/
/*|		Suica通信ログ直近データ用印字ﾃﾞｰﾀ編集								|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Suica_Log_edit2( *msg_data, pri_kind, *p_proc_data )|*/
/*|																			|*/
/*|	PARAMETER		:	T_FrmLogPriReq1	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	A.iiizumi													|*/
/*|	Date	:	2012-09-10													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
void	Suica_Log_edit2( T_FrmLogPriReq1 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ
	ushort	print_data_count;
	ushort	CardType;
	uchar	CardName[20];
	struct	suica_log_rec *wlogbuf;

	wlogbuf = &SUICA_LOG_REC;

	if( p_proc_data->Log_Start == OFF ){

		// 編集開始（初回編集）の場合

		/*------	＜表題＞編集	------*/
		if( Is_SUICA_STYLE_OLD ){								// 旧版動作設定
			CardType = OPE_DISP_MEDIA_TYPE_SUICA;				// Suica固定
		}
		else{													// 新版動作指定
			CardType = Ope_Disp_Media_Getsub( 0 );				// 設定からカードタイプget
		}
		switch( CardType ){
		case OPE_DISP_MEDIA_TYPE_SUICA:							// Ｓｕｉｃａ
		default:
			strcpy( (char*)CardName, "Ｓｕｉｃａ" );
			break;
		case OPE_DISP_MEDIA_TYPE_PASMO:							// ＰＡＳＭＯ
			strcpy( (char*)CardName, "ＰＡＳＭＯ" );
			break;
		case OPE_DISP_MEDIA_TYPE_ICOCA:							// ＩＣＯＣＡ
			strcpy( (char*)CardName, "ＩＣＯＣＡ" );
			break;
		case OPE_DISP_MEDIA_TYPE_ICCARD:						// ＩＣカード（複数カード利用時：現在未使用）
			strcpy( (char*)CardName, "ＩＣカード" );
			break;
		case OPE_DISP_MEDIA_TYPE_eMONEY:						// 電子マネー
			strcpy( (char*)CardName, "電子マネー" );
			break;
// MH321800(S) D.Inaba ICクレジット対応
		case OPE_DISP_MEDIA_TYPE_EC:							// 決済リーダ
			strcpy( (char*)CardName, "決済リーダ" );
			break;
// MH321800(E) D.Inaba ICクレジット対応
		}
		strcat( (char*)CardName, "通信ログ" );

		Prn_edit_Title	(										// 表題（"ｘｘｘｘｘ通信ログ"）印字ﾃﾞｰﾀ編集
							(char*)CardName,
							FONT_K_YOKOBAI,
							pri_kind
						);
		Prn_edit_Title	(										// 表題（"（直近ログ）"）印字ﾃﾞｰﾀ編集
							(char*)"（直近ログ）",
							FONT_K_YOKOBAI,
							pri_kind
						);

		/*------	１行空白	------*/
		Prn_edit_space( pri_kind );

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, (ushort)(msg_data->Kikai_no&0x7fff) );	// 機械NO.編集
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録

		/*------	＜印字日時＞編集	------*/
		Prn_edit_Date( prn_work, &msg_data->PriTime );			// 日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字日時　印字ﾃﾞｰﾀ登録

		/*------	１行空白	------*/
		Prn_edit_space( pri_kind );

		/*------	Suica通信ﾛｸﾞ情報件数検索	------*/


			// ﾛｸﾞ情報が正常な場合

		p_proc_data->Log_Start	= ON;						// Log_Start	← ﾛｸﾞﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ
		wlogbuf->cNull = (char)NULL;
		p_proc_data->Log_Count	= (ushort)strlen( wlogbuf->log_Buf );	// 印字ﾊﾞｲﾄ数ｾｯﾄ

		if( p_proc_data->Log_Count >= SUICA_LOG_MAXSIZE ){
			p_proc_data->Log_no_wk[0] = 1;
			p_proc_data->Log_Count = SUICA_LOG_NEAR_PRINT_SIZE;// データMAXまで存在する

			if( wlogbuf->log_wpt >= (SUICA_LOG_NEAR_PRINT_SIZE + 7)){// ライトポインタが印字サイズより大きい位置にいる場合、[7]はリングバッファ先頭は[XX/XX]7byte固定のため飛ばす
				p_proc_data->Log_DataPt = wlogbuf->log_wpt-SUICA_LOG_NEAR_PRINT_SIZE;
			}else{
				p_proc_data->Log_DataPt = SUICA_LOG_MAXSIZE - SUICA_LOG_NEAR_PRINT_SIZE + (wlogbuf->log_wpt - 7);
			}
		}else if(p_proc_data->Log_Count <= SUICA_LOG_NEAR_PRINT_SIZE){
			p_proc_data->Log_no_wk[0] = 0;
			p_proc_data->Log_DataPt	= 0;
		}else{
			p_proc_data->Log_no_wk[0] = 1;
			p_proc_data->Log_DataPt	= wlogbuf->log_wpt-SUICA_LOG_NEAR_PRINT_SIZE;
			p_proc_data->Log_Count = SUICA_LOG_NEAR_PRINT_SIZE;// データMAXまで存在するので印字行数は4000Byte
		}
		if( p_proc_data->Log_Count == 0 ){

			// 格納件数が０の場合
			edit_end = ON;									// 編集終了
		}

	}	// 初回編集処理end

	else{
		// ２回目以降の編集処理

		/*------	印字対象ﾃﾞｰﾀ編集	------*/
		if( p_proc_data->Log_no_wk[0] ){
			print_data_count = Suica_edit_data2( wlogbuf->log_Buf,
												 pri_kind, 
												 p_proc_data, 
												 &p_proc_data->Log_DataPt,
												 wlogbuf );

			if(p_proc_data->Log_Count < print_data_count){
				p_proc_data->Log_Count = 0;
			}else{
				p_proc_data->Log_Count  -= print_data_count;		// 印字ﾊﾞｲﾄ数更新
			}
		}else{
			print_data_count = Suica_edit_data( &wlogbuf->log_Buf[p_proc_data->Log_DataPt],
												pri_kind, 
												p_proc_data->Log_Count );
			/*------	次編集ﾛｸﾞ情報検索	------*/
			p_proc_data->Log_Count  -= print_data_count;			// 印字ﾊﾞｲﾄ数更新
			p_proc_data->Log_DataPt	+= print_data_count;			// 印字開始位置更新
		}

		if( p_proc_data->Log_Count == 0 ){						// 全ﾛｸﾞ情報編集終了？

			// 格納件数分の編集が終了した場合
			edit_end = ON;										// 編集終了
		}	

	}	// ２回目以降の編集処理end

	/*------	編集終了ﾁｪｯｸ	------*/
	if( edit_end == ON ){	
		p_proc_data->Final = ON;			// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
}
/*[]-----------------------------------------------------------------------[]*/
/*|		Suica通信ﾛｸﾞ編集処理	    										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Suica_edit_data( char *logdata, uchar pri_kind )	|*/
/*|																			|*/
/*|	PARAMETER		:	Arm_log		*Armlog		=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ				|*/
/*|																			|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	T.Namioka													|*/
/*|	Date	:	2005-07-27													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
ushort	Suica_edit_data( char *logdata, uchar pri_kind, ushort data_size )
{
	ushort	wkul;
	
	memset( cTmp1,0,sizeof( cTmp1 ));

	PCMD_LEFT( pri_kind );								// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );				// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );				// 漢字（通常）指定
	
	if( data_size < FONTA_MAX_COL ){
		memcpy( cTmp1, logdata, (size_t)data_size);
		wkul = data_size;
	}else{
		wkul = FONTA_MAX_COL; 
		memcpy( cTmp1, logdata, (size_t)wkul);
	}

	PrnStr( cTmp1, pri_kind );						// 印字ﾃﾞｰﾀ登録
	return( wkul );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		Suica通信ﾛｸﾞ編集処理2	    										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Suica_edit_data2( char *logdata, uchar pri_kind )	|*/
/*|																			|*/
/*|	PARAMETER		:	Arm_log		*Armlog		=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ				|*/
/*|																			|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	T.Namioka													|*/
/*|	Date	:	2006-09-27													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
ushort	Suica_edit_data2( char *logdata, uchar pri_kind, PRN_PROC_DATA *p_proc_data, ushort *wpt, struct suica_log_rec *wlogrec )
{
	ushort	wkul;
	short	work_size;
	
	memset( cTmp1,0,sizeof( cTmp1 ));
	memset( cTmp2,0,sizeof( cTmp2 ));

	PCMD_LEFT( pri_kind );								// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );				// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );				// 漢字（通常）指定

	if( p_proc_data->Log_no_wk[1] ){
		memcpy( cTmp1, &logdata[0], 7);					// 日付印字
	}
	wkul = SUICA_LOG_MAXSIZE-*wpt;						// 印字ｻｲｽﾞ算定
	if( wkul < FONTA_MAX_COL ){							// 一行の印字ｻｲｽﾞ以内？
		memcpy( cTmp1, &logdata[*wpt], (size_t)wkul);	// ﾊﾞｯﾌｧにﾃﾞｰﾀ設定
		work_size = (FONTA_MAX_COL-wkul);				// 残りｻｲｽﾞを選定
// NOTE:リングバッファ1周後は先頭[XX/XX]の7バイトより後ろにライトポインタが来るため以下判定となる
		if( (wlogrec->log_wpt - 7) < work_size ){
			work_size = wlogrec->log_wpt - 7;
		}
		memcpy( &cTmp1[wkul], &logdata[7], (size_t)work_size);	// ﾊﾞｯﾌｧにﾃﾞｰﾀ設定
		wkul = work_size+wkul;							// 印字ｻｲｽﾞ設定
		*wpt = 7+work_size;								// 次回の印字ﾎﾟｲﾝﾀ更新
	}else{
		wkul = FONTA_MAX_COL;
		if( p_proc_data->Log_no_wk[1] ){				// 初回印字？
			memcpy( &cTmp1[7], &logdata[*wpt], (size_t)(wkul-7));	// ﾊﾞｯﾌｧにﾃﾞｰﾀ設定
			wkul = wkul -7;
		}else{
			if( wlogrec->log_wpt > *wpt && (wlogrec->log_wpt - *wpt) < FONTA_MAX_COL ){
				memcpy( cTmp1, &logdata[*wpt], (size_t)(wlogrec->log_wpt - *wpt));	// ﾊﾞｯﾌｧにﾃﾞｰﾀ設定
				wkul = wlogrec->log_wpt - *wpt;	// 印字ｻｲｽﾞ設定
			}else{
				if( SUICA_LOG_MAXSIZE-*wpt < FONTA_MAX_COL ){
					memcpy( cTmp1, &logdata[*wpt], (size_t)SUICA_LOG_MAXSIZE-*wpt);	// ﾊﾞｯﾌｧにﾃﾞｰﾀ設定
					wkul = SUICA_LOG_MAXSIZE-*wpt;		// 印字ｻｲｽﾞ設定
				}else{
					wkul = FONTA_MAX_COL; 
					memcpy( cTmp1, &logdata[*wpt], (size_t)wkul);	// ﾊﾞｯﾌｧにﾃﾞｰﾀ設定
				}
			}
		}
		*wpt += wkul;
	}
	p_proc_data->Log_no_wk[1] = 0;
	PrnStr( cTmp1, pri_kind );						// 印字ﾃﾞｰﾀ登録
	return( wkul );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		ﾃｽﾄﾌﾟﾘﾝﾄ日時印字ﾃﾞｰﾀ編集											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_TstPriDate( pri_kind )						|*/
/*|																			|*/
/*|	PARAMETER		:	uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	M.Yanase(COSMO)												|*/
/*|	Date	:	2006-06-29													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
uchar	Prn_edit_TstPriDate( uchar pri_kind )
{
	uchar	edit_cnt = 0;						// 編集行数

	PrnFontSize( FONT_A_NML, pri_kind );		// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );		// 漢字（通常）指定
	/*-----		仕切り行	-----*/
	PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]
	PrnStr( SikiriLine_Prn[3], pri_kind );		// 仕切り行印字ﾃﾞｰﾀ登録
	edit_cnt++;
	/*-----		再ﾌﾟﾘﾝﾄ日時		-----*/
	memset( prn_work,0,sizeof(prn_work) );		// 印字ﾃﾞｰﾀ編集ｴﾘｱｸﾘｱ
	Prn_edit_Date( prn_work, &Repri_Time );		// 再ﾌﾟﾘﾝﾄ日時印字ﾃﾞｰﾀ編集
	strcat( prn_work, " ﾃｽﾄﾌﾟﾘﾝﾄ" );			// " 再ﾌﾟﾘﾝﾄ"追加編集
	PCMD_CENTER( pri_kind );					// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
	PrnStr( prn_work, pri_kind );				// 仕切り行印字ﾃﾞｰﾀ登録
	edit_cnt++;
	/*-----		仕切り行	-----*/
	PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]
	PrnStr( SikiriLine_Prn[3], pri_kind );		// 仕切り行印字ﾃﾞｰﾀ登録
	edit_cnt++;

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		＜クレジットカード端末識別Ｎｏ．＞印字ﾃﾞｰﾀ編集処理					|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_cctno									|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	M.Yanase(COSMO)												|*/
/*|	Date	:	2006-07-06													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_cctno( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
// MH810103 GG119202(S) ICクレジットみなし決済印字フォーマット変更対応
//// MH321800(S) Y.Tanizaki ICクレジット対応
//	// みなし決済かブランド不一致は印字しない
//	if( Ryousyuu->Electron_data.Ec.e_pay_kind == EC_CREDIT_USED &&
//		(Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||
//		 Ryousyuu->Electron_data.Ec.E_Status.BIT.brand_mismatch == 1) ) {
//		return( edit_cnt );
//	}
//// MH321800(E) Y.Tanizaki ICクレジット対応

	// ブランド不一致は印字しない
	if( Ryousyuu->Electron_data.Ec.e_pay_kind == EC_CREDIT_USED &&
		Ryousyuu->Electron_data.Ec.E_Status.BIT.brand_mismatch == 1 ) {
		return( edit_cnt );
	}
// MH810103 GG119202(E) ICクレジットみなし決済印字フォーマット変更対応
	if( Ryousyuu->credit.pay_ryo != 0 ){

		//	ｸﾚｼﾞｯﾄｶｰﾄﾞ支払料金が０でない場合

		//	ｸﾚｼﾞｯﾄｶｰﾄﾞ端末識別Ｎｏ．印字ﾃﾞｰﾀ編集
		PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]
		memset( cEditwk1,0,sizeof(cEditwk1) );
		memset( cEditwk2,0,sizeof(cEditwk2) );
// MH810103 GG119202(S) ICクレジットみなし決済印字フォーマット変更対応
//		memcpy( cEditwk1 ,(char *)&Ryousyuu->credit.CCT_Num[0] ,CREDIT_TERM_ID_NO_SIZE );
		// みなし決済
		if( Ryousyuu->Electron_data.Ec.e_pay_kind == EC_CREDIT_USED &&
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//				Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ) {
				(Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||
				 Ryousyuu->chuusi == 1) ) {
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk1,"*************" );
		}
		else {
			memcpy( cEditwk1 ,(char *)&Ryousyuu->credit.CCT_Num[0] ,CREDIT_TERM_ID_NO_SIZE );
		}
// MH810103 GG119202(E) ICクレジットみなし決済印字フォーマット変更対応

		sprintf( cEditwk2,"端末No. %s", cEditwk1 );
		Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
					cEditwk2,						// 文字列１：" TNo. " + 端末識別番号
					"",								// 文字列２：NULL
					pri_kind						// 印字先ﾌﾟﾘﾝﾀ
				);

		edit_cnt++;									// 編集行数更新
	}
	return( edit_cnt );
}

// MH810105(S) MH364301 不要関数削除
///*[]-----------------------------------------------------------------------[]*/
///*|		＜クレジットカード加盟店取引番号＞印字ﾃﾞｰﾀ編集処理					|*/
///*[]-----------------------------------------------------------------------[]*/
///*|	MODULE NAME		:	RYOUSYUU_edit_ShopAccountNo							|*/
///*|	PARAMETER		:	Receipt_data	*Ryousyuu	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
///*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
///*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
///*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
///*|																			|*/
///*[]------------------------------------- Copyright(C) 2013 AMANO Corp.----[]*/
//uchar	RYOUSYUU_edit_ShopAccountNo( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
//{
//	uchar	edit_cnt = 0;		// 編集行数
//
//	if( Ryousyuu->credit.pay_ryo != 0 ){
//
//		//	ｸﾚｼﾞｯﾄｶｰﾄﾞ支払料金が０でない場合
//
//		//	ｸﾚｼﾞｯﾄｶｰﾄﾞ端末識別Ｎｏ．印字ﾃﾞｰﾀ編集
//		PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]
//		memset( cEditwk1,0,sizeof(cEditwk1) );
//		memcpy( cEditwk1, Ryousyuu->credit.ShopAccountNo, sizeof(Ryousyuu->credit.ShopAccountNo) );
//		sprintf( cEditwk2, "取引No. %s", cEditwk1 );
//		PrnStr( cEditwk2, pri_kind );								// 印字ﾃﾞｰﾀ登録
//		edit_cnt++;													// 編集行数更新
//	}
//	return( edit_cnt );
//}
// MH810105(E) MH364301 不要関数削除

/*[]-----------------------------------------------------------------------[]*/
/*|		支払コード・署名欄／加盟店名印字ﾃﾞｰﾀ編集処理						|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_SyomeiKamei( edit_kind, pri_kind )			|*/
/*|																			|*/
/*|	PARAMETER		:	uchar	edit_kind	=	支払ｺｰﾄﾞ・署名欄／加盟店名	|*/
/*|							PRI_SYOMEI  : 支払ｺｰﾄﾞ・署名欄					|*/
/*|							PRI_KAMEI   : 加盟店名							|*/
/*|																			|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	M.Yanase(COSMO)												|*/
/*|	Date	:	2006-07-06													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
/*
	＜印字データ設定の制限事項＞

	１．最大４行（文字ｻｲｽﾞに縦倍角または４倍角を指定した場合、２行としてｶｳﾝﾄする）
	備考．改行幅（行間）は、１ｍｍ固定とする
*/
uchar	Prn_edit_SyomeiKamei( uchar edit_kind, uchar pri_kind )
{
	uchar			edit_cnt = 0;				// 編集行数
	uchar			gyou_cnt;					// 行数
	uchar			fnt_size[SYOMEI_GYO_MAX];	// 文字ｻｲｽﾞ（行数分）
	uchar			pri_posi[SYOMEI_GYO_MAX];	// 印字位置（行数分）
	uchar			data_cnt[SYOMEI_GYO_MAX];	// 文字数（行数分）
	uchar			*pri_data[SYOMEI_GYO_MAX];	// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰ（行数分）
					//※署名欄と加盟店名の行数が変更になった場合、大きいほうで領域確保すること
	uchar			s_data;						// 設定ﾃﾞｰﾀﾜｰｸ
	uchar			size_wrk;					// ﾍｯﾀﾞｰ印字ﾃﾞｰﾀ縦ｻｲｽﾞ（ﾄﾞｯﾄ数）計算処理ﾜｰｸ
	uchar			i;						// 処理ﾙｰﾌﾟｶｳﾝﾀｰ
	ushort			cmd_len;					// 送信ｺﾏﾝﾄﾞﾃﾞｰﾀﾚﾝｸﾞｽ
	PRN_PROC_DATA	*p_proc_data;				// 編集処理制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ

	switch( edit_kind ){
		case	PRI_SYOMEI:	// 支払ｺｰﾄﾞ・署名欄印字ﾃﾞｰﾀ編集
			if(( Syomei_Rsts != 0 ) && (_FLT_RtnKind(Syomei_Rsts) != FLT_NODATA) ){
				// ﾍｯﾀﾞｰ印字ﾃﾞｰﾀが正常に読込まれていない場合
				return( edit_cnt );
			}
			gyou_cnt = (uchar)prm_get( COM_PRM, S_PRN, 20, 2, 3 );					// 「支払ｺｰﾄﾞ・署名欄行数」設定ﾃﾞｰﾀ取得
			if( gyou_cnt > SYOMEI_GYO_MAX ){
				gyou_cnt = SYOMEI_GYO_MAX;											// 不正ﾃﾞｰﾀの場合、最大行数（４行）とする
			}
			for( i=0 ; i<SYOMEI_GYO_MAX ;i++ ){
				fnt_size[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(21+i), 1, 4 );	// 「文字ｻｲｽﾞ」設定ﾃﾞｰﾀ取得
				if( fnt_size[i] > 3 ){
					fnt_size[i] = 0;												// 不正ﾃﾞｰﾀの場合、「標準」とする
				}
				pri_posi[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(21+i), 1, 3 );	// 「印字位置」設定ﾃﾞｰﾀ取得
				if( pri_posi[i] > 2 ){
					pri_posi[i] = 0;												// 不正ﾃﾞｰﾀの場合、「左揃え」とする
				}
				data_cnt[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(21+i), 2, 1 );	// 「文字数」設定ﾃﾞｰﾀ取得
				if( data_cnt[i] > FONTA_MAX_COL ){
					data_cnt[i] = FONTA_MAX_COL;									// 不正ﾃﾞｰﾀの場合、ﾌｫﾝﾄＡ最大文字数（３６文字）とする
				}
				if (_FLT_RtnKind(Syomei_Rsts) == FLT_NODATA) {						//未登録なら初期値
					pri_data[i] = (uchar *)&Syomei_Data_dflt[i][0];					// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
				}else{
					pri_data[i] = (uchar *)&Syomei_Data[i][0];						// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
				}
			}
			if( gyou_cnt != 0 ){													// 印字ﾃﾞｰﾀあり？
				// ﾍｯﾀﾞｰ印字ﾃﾞｰﾀの縦ｻｲｽﾞ（ﾄﾞｯﾄ数）を計算する
				s_data = 8;															// 行間１ｍｍ（0.125×8）固定
				size_wrk = 0;
				for( i = 0 ; i < gyou_cnt ; i++ ){									// 各行の改行量検索（設定されている印字行数分）
					switch( fnt_size[i] ){											// ﾌｫﾝﾄｻｲｽﾞ？
						case	0:													// 標準
							size_wrk += FONT_A_N_HDOT;								// ﾌｫﾝﾄＡ 通常	(24×0.125=3mm)
							break;
						case	1:													// 横倍角
							size_wrk += FONT_A_Y_HDOT;								// ﾌｫﾝﾄＡ 横倍角(24×0.125=3mm)
							break;
						case	2:													// 縦倍角
							size_wrk += FONT_A_T_HDOT;								// ﾌｫﾝﾄＡ 縦倍角(48×0.125=6mm)
							break;
						case	3:													// ４倍角
							size_wrk += FONT_A_4_HDOT;								// ﾌｫﾝﾄＡ ４倍角(48×0.125=6mm)
							break;
					}
					size_wrk += s_data;												// 改行幅ｻｲｽﾞを加算
				}
			}
			break;

		case	PRI_KAMEI:	// 加盟店名印字ﾃﾞｰﾀ編集
			if( Kamei_Rsts != 0 ){
				// 加盟店名印字ﾃﾞｰﾀが正常に読込まれていない場合
				return( edit_cnt );
			}
			gyou_cnt = (uchar)prm_get( COM_PRM, S_PRN, 20, 2, 1 );					// 「加盟店名行数」設定ﾃﾞｰﾀ取得
			if( gyou_cnt > KAMEI_GYO_MAX ){
				gyou_cnt = KAMEI_GYO_MAX;											// 不正ﾃﾞｰﾀの場合、ﾌｯﾀｰ最大行数（４行）とする
			}
			for( i=0 ; i<KAMEI_GYO_MAX ;i++ ){
				fnt_size[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(25+i), 1, 4 );	// 「文字ｻｲｽﾞ」設定ﾃﾞｰﾀ取得
				if( fnt_size[i] > 3 ){
					fnt_size[i] = 0;												// 不正ﾃﾞｰﾀの場合、「標準」とする
				}
				pri_posi[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(25+i), 1, 3 );	// 「印字位置」設定ﾃﾞｰﾀ取得
				if( pri_posi[i] > 2 ){
					pri_posi[i] = 0;												// 不正ﾃﾞｰﾀの場合、「左揃え」とする
				}
				data_cnt[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(25+i), 2, 1 );	// 「文字数」設定ﾃﾞｰﾀ取得
				if( data_cnt[i] > FONTA_MAX_COL ){
					data_cnt[i] = FONTA_MAX_COL;									// 不正ﾃﾞｰﾀの場合、ﾌｫﾝﾄＡ最大文字数（３６文字）とする
				}
				pri_data[i] = (uchar *)&Kamei_Data[i][0];							// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
			}
			break;
		default:
			return( edit_cnt );
	}
	if( gyou_cnt != 0 ){															// 印字ﾃﾞｰﾀあり？
		for( i = 0 ; i < gyou_cnt ; i++ ){											// 設定されている行数分の印字ﾃﾞｰﾀをﾌﾟﾘﾝﾀ送信ﾊﾞｯﾌｧへ登録
			memset( prn_work, 0, sizeof(prn_work) );								// 印字ｺﾏﾝﾄﾞ編集ｴﾘｱ（prn_work）０ｸﾘｱ
			cmd_len = 0;															// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ０ｸﾘｱ
			// 印字位置
			s_data = pri_posi[i];													// 印字位置設定ﾃﾞｰﾀ取得
			memcpy( &prn_work[0], &Pri_posi_cmd[s_data][0], 3 );					// 印字位置指定ｺﾏﾝﾄﾞｾｯﾄ
			cmd_len += 3;															// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋３
			// 印字文字ｻｲｽﾞ
			s_data = fnt_size[i];													// 文字ｻｲｽﾞ設定ﾃﾞｰﾀ取得
			memcpy( &prn_work[cmd_len], &Pri_size_cmd[s_data][0], 9 );				// 文字ｻｲｽﾞ指定ｺﾏﾝﾄﾞｾｯﾄ
			cmd_len += 9;															// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋６
			// 印字文字ﾃﾞｰﾀ
			memcpy( &prn_work[cmd_len], pri_data[i], (size_t)data_cnt[i] );			// 文字ﾃﾞｰﾀｾｯﾄ
			cmd_len += data_cnt[i];													// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋文字ﾃﾞｰﾀ数
			prn_work[cmd_len] = LF;													// 改行ﾃﾞｰﾀｾｯﾄ
			cmd_len += 1;															// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋１
			PrnCmdLen( (uchar *)prn_work, cmd_len, pri_kind );						// 編集した印字ｺﾏﾝﾄﾞﾃﾞｰﾀを登録
			edit_cnt++;																// 編集行数＋１
		}
		// 文字ｻｲｽﾞ、改行量を初期状態へ戻す
		PrnCmdLen( &Pri_size_cmd[4][0], 9, pri_kind );
		if( pri_kind == R_PRI ){
			p_proc_data = (PRN_PROC_DATA *)&rct_proc_data;							// ﾚｼｰﾄ編集処理制御ﾃﾞｰﾀﾎﾟｲﾝﾀｾｯﾄ
		}
		else{
			p_proc_data = (PRN_PROC_DATA *)&jnl_proc_data;							// ｼﾞｬｰﾅﾙ編集処理制御ﾃﾞｰﾀﾎﾟｲﾝﾀｾｯﾄ
		}
		p_proc_data->Font_size		= FONT_A_NML;
		p_proc_data->Kanji_size		= FONT_K_NML;
		p_proc_data->Kaigyou_size	= 0x1c;
	}
	if( R_PRI == pri_kind ){
		inc_dct( MOV_PRNT_CNT, (short)edit_cnt );		// 「ﾚｼｰﾄﾌﾟﾘﾝﾀ印字行数」動作ｶｳﾝﾄ
	}else{
		inc_dct( MOV_JPNT_CNT, (short)edit_cnt );		// 「ｼﾞｬｰﾅﾙﾌﾟﾘﾝﾀ印字行数」動作ｶｳﾝﾄ
	}
	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		日時印字ﾃﾞｰﾀ編集													|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_Date3( *edit_wk, *date )					|*/
/*|																			|*/
/*|	PARAMETER		:	char			*edit_wk= 編集ﾃﾞｰﾀｾｯﾄﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						date_time_rec	*date	= 日時ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	= 日時ﾃﾞｰﾀﾁｪｯｸ結果						|*/
/*|										OK=正常								|*/
/*|										NG=以上								|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	M.Yanase(COSMO)												|*/
/*|	Date	:	2006-07-03													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
uchar	Prn_edit_Date3( char *edit_wk, date_time_rec *date )
{
	uchar	ret = OK;		// 日時ﾃﾞｰﾀﾁｪｯｸ結果
	short	week;			// 曜日ﾃﾞｰﾀ取得ﾜｰｸ

	/*------	日時ﾃﾞｰﾀﾁｪｯｸ	-----*/
	if( date->Mon == 0 || date->Mon > 12 ){			// 月ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
	if( date->Day == 0 || date->Day > 31 ){			// 日ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
	if( date->Hour > 23 ){							// 時ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
	if( date->Min > 59 ){							// 分ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
	if( ret == OK ){
		//	日時ﾃﾞｰﾀが正常な場合
		/*------	曜日ﾃﾞｰﾀ取得	-----*/
		week = youbiget( (short)date->Year, (short)date->Mon, (short)date->Day );
		/*------	日時ﾃﾞｰﾀ編集	-----*/
		sprintf(
					edit_wk,
					"%4d年%2d月%2d日(%s) %02d:%02d",	// 編集ﾌｫｰﾏｯﾄ："yyyy年mm月dd日(ｗ) hh:mm"
					date->Year,							// 年ﾃﾞｰﾀ
					date->Mon,							// 月ﾃﾞｰﾀ
					date->Day,							// 日ﾃﾞｰﾀ
					Week_Prn[week],						// 曜日ﾃﾞｰﾀ
					date->Hour,							// 時ﾃﾞｰﾀ
					date->Min							// 分ﾃﾞｰﾀ
				);
	}
	else{
		//	日時ﾃﾞｰﾀが異常な場合
		/*------	日時ﾃﾞｰﾀ編集	-----*/
		sprintf(
					edit_wk,
					"%04d年%2d月%2d日(　) %02d:%02d",	// 編集ﾌｫｰﾏｯﾄ："yyyy年mm月dd日(　) hh:mm"
					date->Year,							// 年ﾃﾞｰﾀ
					date->Mon,							// 月ﾃﾞｰﾀ
					date->Day,							// 日ﾃﾞｰﾀ
					date->Hour,							// 時ﾃﾞｰﾀ
					date->Min							// 分ﾃﾞｰﾀ
				);
	}
	return( ret );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		日時印字ﾃﾞｰﾀ編集													|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_Date4( *edit_wk, *date )					|*/
/*|																			|*/
/*|	PARAMETER		:	char			*edit_wk= 編集ﾃﾞｰﾀｾｯﾄﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|						date_time_rec	*date	= 日時ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	= 日時ﾃﾞｰﾀﾁｪｯｸ結果						|*/
/*|										OK=正常								|*/
/*|										NG=以上								|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	M.Yanase(COSMO)												|*/
/*|	Date	:	2006-07-03													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
uchar	Prn_edit_Date4( char *edit_wk, date_time_rec *date )
{
	uchar	ret = OK;		// 日時ﾃﾞｰﾀﾁｪｯｸ結果
	short	week;			// 曜日ﾃﾞｰﾀ取得ﾜｰｸ

	/*------	日時ﾃﾞｰﾀﾁｪｯｸ	-----*/
	if( date->Mon == 0 || date->Mon > 12 ){			// 月ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
	if( date->Day == 0 || date->Day > 31 ){			// 日ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
	if( ret == OK ){
		//	日時ﾃﾞｰﾀが正常な場合
		/*------	曜日ﾃﾞｰﾀ取得	-----*/
		week = youbiget( (short)date->Year, (short)date->Mon, (short)date->Day );
		/*------	日時ﾃﾞｰﾀ編集	-----*/
		sprintf(
					edit_wk,
					"%4d年%2d月%2d日(%s)",				// 編集ﾌｫｰﾏｯﾄ："yyyy年mm月dd日(ｗ)"
					date->Year,							// 年ﾃﾞｰﾀ
					date->Mon,							// 月ﾃﾞｰﾀ
					date->Day,							// 日ﾃﾞｰﾀ
					Week_Prn[week]						// 曜日ﾃﾞｰﾀ
				);
	}
	else{
		//	日付ﾃﾞｰﾀが異常な場合
		/*------	日付ﾃﾞｰﾀ編集	-----*/
		sprintf(
					edit_wk,
					"    年  月  日(　)"				// 編集ﾌｫｰﾏｯﾄ："    年  月  日(　)"
				);
	}
	return( ret );
}

/*[]-----------------------------------------------------------------------[]*/
/*|		ｴﾗｰﾃﾞｰﾀ・詳細ｴﾗｰ文字列変換											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	ERRJOU_edit_data_mdat( *edit_wk, *date )			|*/
/*|																			|*/
/*|	PARAMETER		:	char	変換したい文字列ポインタ					|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	M.Yanase(COSMO)												|*/
/*|	Date	:	2006-07-12													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
void	ERRJOU_edit_data_mdat( char *dat)
{
	char	sts[5+1];
	char	code[3+1];
	char	info[12+2];

	//それぞれをワークに抽出
	//  0123456789abcdef
	// "12345:123:12345"
	memcpy( sts, &dat[0], 5 );
	sts[5] = 0;
	memcpy( code, &dat[6], 3 );
	code[3] = 0;
	memcpy( info, &dat[5+3+2], 12 );
	info[12] = 0;

	//全スペースは - にする
	if( memcmp( sts, "     ", 5 ) == 0 ){
		memcpy( sts, "-----", 5 );
	}
	if( memcmp( code, "   ", 3 ) == 0 ){
		memcpy( code, "---", 3 );
	}
	if( memcmp( info, "            ", 12 ) == 0 ){
		memcpy( info, "------------", 12 );
	}

	//"        (01110:M13:------------)" など、
	//文字列変換
	sprintf( dat,"        (%s:%s:%s)", sts, code, info );

}

// MH810103 GG119202(S) 不要機能削除(センタークレジット)
///*[]---------------------------------------------------------------------------[]*/
///*|		利用明細ログ印字ﾃﾞｰﾀ編集処理											|*/
///*[]---------------------------------------------------------------------------[]*/
///*|	MODULE NAME		:	CreUseLog_edit( *msg_data, pri_kind, *p_proc_data)		|*/
///*|																				|*/
///*|	PARAMETER		:	T_FrmLogPriReq3	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
///*|																				|*/
///*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
///*|																				|*/
///*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
///*|																				|*/
///*|	RETURN VALUE	:	void													|*/
///*|																				|*/
///*[]---------------------------------------------------------------------------[]*/
///*|	Author	:	M.Yanase(COSMO)													|*/
///*|	Date	:	2006-07-14														|*/
///*|	Update	:																	|*/
///*[]------------------------------------- Copyright(C) 2006 AMANO Corp.--------[]*/
//void	CreUseLog_edit( T_FrmLogPriReq3 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
//{
//	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ
//	ushort	Sdate;				// 検索開始日
//	ushort	Edate;				// 検索終了日
//	ushort	syuukei_date;		// 集計日ﾃﾞｰﾀ
//	uchar	f_Printer;			// 出力プリンタ種別（0=レシート、1=ジャーナル）
//	ushort	len1, index;
//
//	if( J_PRI == pri_kind ){	// 出力プリンタ=ジャーナル
//		f_Printer = 1;			// 出力プリンタ種別 = ジャーナル
//	}else{
//		f_Printer = 0;			// レシート
//	}
//
//	/* 編集開始（初回編集）の場合 */
//	if( p_proc_data->Log_Start == OFF ){
//		Prn_edit_Title(	"クレジット利用明細", FONT_K_YOKOBAI, pri_kind ); 	// ＜表題＞編集
//		Prn_edit_space( pri_kind );								// １行空白
//
//		KikaiNoSet(	prn_work, msg_data->Kikai_no );				// 機械NO.編集
//		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
//		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
//		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
//		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録
//
//		/*------	＜印字日時＞編集	------*/
//		Prn_edit_Date( prn_work, &msg_data->PriTime );			// 日時印字ﾃﾞｰﾀ編集
//		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
//		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
//		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
//		PrnStr( prn_work, pri_kind );							// 印字日時　印字ﾃﾞｰﾀ登録
//
//		p_proc_data->Log_DataPt = 0;							// 検索インデックスは先頭に指定
//			switch( msg_data->BType ){	// 印字要求内容ﾁｪｯｸ
//
//				case	0:	// 全て
//					sprintf(														// cEditwk1←検索方法印字ﾃﾞｰﾀ
//								cEditwk1,
//								"全て(%d件)",
//								msg_data->LogCount
//							);
//					p_proc_data->Log_TotalCount = msg_data->LogCount;
//					break;
//
//				case	1:	// 日付指定				
//					if( OK == DateChk( (date_time_rec *)&msg_data->TSttTime ) ){	//	指定日が正常な場合
//						msg_data->TEndTime.Year = msg_data->TSttTime.Year;
//						msg_data->TEndTime.Mon	= msg_data->TSttTime.Mon;
//						msg_data->TEndTime.Day	= msg_data->TSttTime.Day;
//						Sdate = dnrmlzm(											// 検索開始日ﾃﾞｰﾀ取得
//											(short)msg_data->TSttTime.Year,
//											(short)msg_data->TSttTime.Mon,
//											(short)msg_data->TSttTime.Day
//										);
//						p_proc_data->Log_Sdate = Sdate;								// 指定日ﾃﾞｰﾀｾｰﾌﾞ
//						Edate = dnrmlzm(											// 検索終了日ﾃﾞｰﾀ取得
//											(short)msg_data->TEndTime.Year,
//											(short)msg_data->TEndTime.Mon,
//											(short)msg_data->TEndTime.Day
//										);
//						p_proc_data->Log_TotalCount = UsMnt_CreUseLog_GetLogCnt( Sdate, Edate );
//						sprintf(									// cEditwk1←検索方法印字ﾃﾞｰﾀ
//									cEditwk1,
//									"%04d/%d/%d分",
//									msg_data->TSttTime.Year,
//									msg_data->TSttTime.Mon,
//									msg_data->TSttTime.Day
//								);
//					}
//					else{															// 指定日が異常な場合
//						Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
//						edit_end = ON;								// 編集終了
//					}
//					break;
//
//				default:	// その他（検索方法指定ｴﾗｰ）
//					Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
//					edit_end = ON;								// 編集終了
//// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
//					break;
//// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
//			}
//
//			if( edit_end != ON ){	// 検索方法の指定が正常な場合			
//				/*------	＜検索方法＞編集	------*/
//				PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
//				PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録
//				PCMD_LEFT( pri_kind );								// [位置揃え(左揃え)]
//
//				/*------	編集制御ﾜｰｸｾｯﾄ	------*/
//				p_proc_data->Log_Start	= ON;						// ﾛｸﾞﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ
//				Prn_edit_space( pri_kind );							// １行空白		
//				if( p_proc_data->Log_TotalCount == 0 ){
//					// 格納件数が０の場合
//					edit_end = ON;									// 編集終了
//				}
//			}
//	}	// 初回編集処理end
//
//	/*２回目以降の編集処理 */
//	else{
//		switch( msg_data->BType ){	// 検索方法？
//			case	0:	// 全て
//				if(0 == Ope_Log_1DataGet( eLOG_CREUSE, p_proc_data->Log_DataPt, (void *)&Pri_Work[f_Printer].cre_log ) ){
//					// データが取得エラーの場合は印字しない
//					p_proc_data->Log_TotalCount = 0;
//					edit_end = ON;	// 編集終了
//				}
//				break;
//			case	1:	// 日付指定
//				for( ; p_proc_data->Log_TotalCount > 0 ; ){	// 日付が一致するﾛｸﾞ情報を格納件数分検索する
//					if(0 == Ope_Log_1DataGet( eLOG_CREUSE, p_proc_data->Log_DataPt, (void *)&Pri_Work[f_Printer].cre_log ) ){
//						// データが取得エラーの場合は印字しない
//						p_proc_data->Log_TotalCount = 0;
//						edit_end = ON;	// 編集終了
//						break;
//					}
//					syuukei_date = dnrmlzm(				// 対象ﾛｸﾞ情報の集計日取得
//											(short)Pri_Work[f_Printer].cre_log.PayTime.Year,
//											(short)Pri_Work[f_Printer].cre_log.PayTime.Mon,
//											(short)Pri_Work[f_Printer].cre_log.PayTime.Day);
//					if( syuukei_date == p_proc_data->Log_Sdate ){		// 対象ﾛｸﾞ情報の集計日が指定日と一致した場合					
//						break;											// 検索ﾙｰﾌﾟを抜ける
//					}
//					p_proc_data->Log_DataPt++;							// 次に検索するログのインデックスをセット
//				}
//				break;
//		}
//		// 格納件数分の検索＆編集終了？
//		if( p_proc_data->Log_TotalCount > 0 ){	// 格納件数分の検索＆編集を終了していない場合	
//			/*------	精算日時	------*/
//			Prn_edit_Date( cEditwk1, &Pri_Work[f_Printer].cre_log.PayTime );
//			sprintf( prn_work,"%s 精算",cEditwk1 );
//			PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録
//			/*------	ｶｰﾄﾞ名	------*/
//			memset(cEditwk1,0,sizeof(cEditwk1));
//			if( Pri_Work[f_Printer].cre_log.card_name[0] == '\0' ) {	// NULLデータ
//				strcpy( cEditwk1, "ｸﾚｼﾞｯﾄ明細");
//			}
//			else {
//				memcpy( &cEditwk1,
//						&Pri_Work[f_Printer].cre_log.card_name,
//						 sizeof(Pri_Work[f_Printer].cre_log.card_name));
//				len1 = (ushort)strlen(cEditwk1);
//				for(index = 0; index < len1; ++index) {
//					if(cEditwk1[index] != ' ') {
//						break;
//					}
//				}
//				if(len1 == index) {										// 全て空白
//					strcpy( cEditwk1, "ｸﾚｼﾞｯﾄ明細");					// ｸﾚｼﾞｯﾄ明細と印字する
//				}
//			}
//			sprintf( prn_work,"%s",cEditwk1 );
//			PrnStr( prn_work, pri_kind );								// 印字ﾃﾞｰﾀ登録
//			/*------	ｶｰﾄﾞ番号	------*/
//			CreUseLog_edit_ccid( &Pri_Work[f_Printer].cre_log.card_no[0], pri_kind );
//			/*------	伝票番号	------*/
//			sprintf( cEditwk1,"%05ld",Pri_Work[f_Printer].cre_log.slip_no );
//			Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
//						"　伝票No.",									// 文字列１：
//						cEditwk1,										// 文字列２：
//						pri_kind										// 印字先ﾌﾟﾘﾝﾀ
//					);
//			/*------	承認番号	------*/
//			Edit_AppNoChar( Pri_Work[f_Printer].cre_log.AppNoChar, sizeof(Pri_Work[f_Printer].cre_log.AppNoChar) );
//			Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
//						"　承認No.",									// 文字列１：
//						cEditwk1,										// 文字列２：
//						pri_kind										// 印字先ﾌﾟﾘﾝﾀ
//					);
//			/*------	加盟店取引番号	------*/
//			Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
//				"　取引No.",											// 文字列１：
//				Pri_Work[f_Printer].cre_log.shop_account_no,			// 文字列２：
//				pri_kind												// 印字先ﾌﾟﾘﾝﾀ
//					);
//			/*------	利用額	------*/
//			Prn_edit_Sitei1line	(										// ----- 印字ﾃﾞｰﾀ編集 -----
//								"　利用額",								// 印字項目	：
//								Pri_Work[f_Printer].cre_log.pay_ryo,		// 印字ﾃﾞｰﾀ	：
//								"",										// 単位１	：NULL
//								Pri_Tanni[PriT_YEN],					// 単位２	：円
//								pri_kind								// 印字先ﾌﾟﾘﾝﾀ
//							);
//			p_proc_data->Log_TotalCount--;				// 格納件数ﾃﾞｸﾘﾒﾝﾄ
//			p_proc_data->Log_DataPt++;					// 次に編集するログの情報のインデックスをセット
//		}
//		if( p_proc_data->Log_TotalCount == 0 ){			// 全ﾛｸﾞ情報編集終了？
//			edit_end = ON;								// 編集終了
//		}
//	}	// ２回目以降の編集処理end
//	/*------	編集終了ﾁｪｯｸ	------*/
//	if( edit_end == ON ){	
//		p_proc_data->Final = ON;						// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
//	}
//}
//
///*[]-----------------------------------------------------------------------[]*/
///*|		＜クレジットカード会員コード＞印字ﾃﾞｰﾀ編集処理						|*/
///*[]-----------------------------------------------------------------------[]*/
///*|	MODULE NAME		:	CreUseLog_edit_ccid									|*/
///*|																			|*/
///*|	PARAMETER		:	char				*dat	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
///*|																			|*/
///*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
///*|																			|*/
///*|	RETURN VALUE	:	void												|*/
///*|																			|*/
///*[]-----------------------------------------------------------------------[]*/
///*|	Author	:	M.Yanase(COSMO)												|*/
///*|	Date	:	2006-07-14													|*/
///*|	Update	:																|*/
///*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
//void	CreUseLog_edit_ccid( char *dat, uchar pri_kind )
//{
//	uchar	pri_set;			// 会員No.印字方法（設定ﾃﾞｰﾀ）
//	uchar	len;				// 会員No.桁数
//	uchar	mask_len;			// ﾏｽｸする会員No.桁数
//	uchar	i,j;				// ﾙｰﾌﾟ処理ｶｳﾝﾀｰ
//
//		//	ｸﾚｼﾞｯﾄｶｰﾄﾞ会員Ｎｏ．印字ﾃﾞｰﾀ編集
//		memset( cEditwk1,0,sizeof(cEditwk1) );
//		memset( cEditwk2,0,sizeof(cEditwk2) );
//		memcpy( cEditwk1 ,dat ,20 );
//
//		pri_set = 2;				// クレジットサーバ対応では下4桁固定
//
//		for(i=0,j=0; i<20; i++){
//			if( cEditwk1[i] == 0x20 ){
//				continue;
//			}
//			cEditwk2[j] = cEditwk1[i];
//			j++;
//		}
//		switch( pri_set ){										// 会員No.印字方法？
//
//			case	1:	// 最初の4桁のみ印字し残りは'*'を印字
//
//				len = (uchar)strlen( cEditwk2 );				// 「会員No.桁数」検索
//				if( len >= 5 ){
//
//					// 会員No.桁数＝５桁以上の場合
//					mask_len = (uchar)(len - 4);				// ﾏｽｸする桁数取得
//					for( i=0 ; i<mask_len ; i++ ){				// ５桁目以降の会員No.を＊でﾏｽｸする
//						cEditwk2[4+i] = '*';
//					}
//				}
//
//				break;
//
//			case	2:	// 最後の4桁のみ印字し残りは'*'を印字
//
//				len = (uchar)strlen( cEditwk2 );				// 「会員No.桁数」検索
//				if( len >= 5 ){
//
//					// 会員No.桁数＝５桁以上の場合
//					mask_len = (uchar)(len - 4);				// ﾏｽｸする桁数取得
//					for( i=0 ; i<mask_len ; i++ ){				// 最後の４桁を残し会員No.を＊でﾏｽｸする
//						cEditwk2[i] = '*';
//					}
//				}
//
//				break;
//		}
//
//		Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
//					"  会員No.",								// 文字列１："  会員No."
//					cEditwk2,									// 文字列２：ｸﾚｼﾞｯﾄｶｰﾄﾞ会員No.
//					pri_kind									// 印字先ﾌﾟﾘﾝﾀ
//				);
//
//	return;
//}
//
///*[]---------------------------------------------------------------------------[]*/
///*|		未送信売上データ印字ﾃﾞｰﾀ編集処理										|*/
///*[]---------------------------------------------------------------------------[]*/
///*|	MODULE NAME		:	CreUnSend_edit( *msg_data, pri_kind, *p_proc_data)		|*/
///*|																				|*/
///*|	PARAMETER		:	T_FrmUnSendPriReq	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
///*|																				|*/
///*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
///*|																				|*/
///*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
///*|																				|*/
///*|	RETURN VALUE	:	void													|*/
///*|																				|*/
///*[]---------------------------------------------------------------------------[]*/
///*|	Date	:	2013-07-01														|*/
///*|	Update	:																	|*/
///*[]------------------------------------- Copyright(C) 2013 AMANO Corp.--------[]*/
//void	CreUnSend_edit( T_FrmUnSendPriReq *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
//{
//	struct	DATA_BK	*p_back;
//	Prn_edit_Title( "未送信売上データ", FONT_K_YOKOBAI, pri_kind );		// ＜表題＞編集
//
//	Prn_edit_space( pri_kind );								// １行空白
//
//	KikaiNoSet(	prn_work, msg_data->Kikai_no );				// 機械NO.編集
//	PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
//	PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
//	PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
//	PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録
//
//	/*------	＜印字日時＞編集	------*/
//	Prn_edit_Date( prn_work, &msg_data->PriTime );			// 日時印字ﾃﾞｰﾀ編集
//	PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
//	PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
//	PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
//	PrnStr( prn_work, pri_kind );							// 印字日時　印字ﾃﾞｰﾀ登録
//
//	Prn_edit_space( pri_kind );								// １行空白
//	p_back	= msg_data->back;
//
//	/*------	精算時刻	------*/
//	Prn_edit_Date( cEditwk1, &p_back->time );
//	Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
//				"精算時刻",									// 文字列１：
//				cEditwk1,									// 文字列２：
//				pri_kind									// 印字先ﾌﾟﾘﾝﾀ
//			);
//
//	/*------	精算金額	------*/
//	Prn_edit_Sitei1line	(									// ----- 印字ﾃﾞｰﾀ編集 -----
//						"精算金額",							// 印字項目	：
//						p_back->ryo,						// 印字ﾃﾞｰﾀ	：
//						"",									// 単位１	：NULL
//						Pri_Tanni[PriT_YEN],				// 単位２	：円
//						pri_kind							// 印字先ﾌﾟﾘﾝﾀ
//					);
//
//	/*------	端末処理通番	------*/
//	sprintf( prn_work, "伝票No. %05d", p_back->slip_no );
//	PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録
//
//	/*------	承認番号	------*/
//	Edit_AppNoChar( p_back->AppNoChar, sizeof(p_back->AppNoChar) );
//	strcpy( prn_work, "承認No. " );
//	strcat( prn_work, cEditwk1 );
//	PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録
//
//	/*------	加盟店取引番号	------*/
//
//	strcpy( prn_work, "取引No. " );
//	strcat( prn_work, p_back->shop_account_no );
//	PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録
//
//	/*------	編集終了ﾁｪｯｸ	------*/
//	p_proc_data->Final = ON;								// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
//}
//
///*[]---------------------------------------------------------------------------[]*/
///*|		売上拒否ﾃﾞｰﾀ印字ﾃﾞｰﾀ編集処理											|*/
///*[]---------------------------------------------------------------------------[]*/
///*|	MODULE NAME		:	CreSaleNG_edit( *msg_data, pri_kind, *p_proc_data)		|*/
///*|																				|*/
///*|	PARAMETER		:	T_FrmSaleNGPriReq	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
///*|																				|*/
///*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
///*|																				|*/
///*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
///*|																				|*/
///*|	RETURN VALUE	:	void													|*/
///*|																				|*/
///*[]---------------------------------------------------------------------------[]*/
///*|	Date	:	2013-07-01														|*/
///*|	Update	:																	|*/
///*[]------------------------------------- Copyright(C) 2013 AMANO Corp.--------[]*/
//void	CreSaleNG_edit( T_FrmSaleNGPriReq *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
//{
//	ushort	data_index;			// 編集データ位置
//	ushort	data_max;			// データ登録件数
//	ushort	edit_cnt;			// 編集行数
//	uchar	edit_flg = YES;		// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）
//
//	edit_cnt = 0;
//	data_max = msg_data->ng_data->ken;	// 売上拒否データ登録件数
//	if( data_max == 0 ){
//		data_index	= CRE_SALENG_MAX;
//		data_max	= CRE_SALENG_MAX;
//		goto EDIT_END;
//	}
//
//	if( p_proc_data->Prn_no == 0 )		// 初回
//	{
//		edit_cnt += Prn_edit_Title( "売上拒否データ", FONT_K_YOKOBAI, pri_kind );	// ＜表題＞編集
//
//		edit_cnt += Prn_edit_space( pri_kind );						// １行空白
//
//		KikaiNoSet(	prn_work, msg_data->Kikai_no );					// 機械NO.編集
//		PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
//		PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
//		PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
//		PrnStr( prn_work, pri_kind );								// 印字ﾃﾞｰﾀ登録
//		edit_cnt++;
//
//		/*------	＜印字日時＞編集	------*/
//		Prn_edit_Date( prn_work, &msg_data->PriTime );				// 日時印字ﾃﾞｰﾀ編集
//		PCMD_CENTER( pri_kind );									// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
//		PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
//		PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
//		PrnStr( prn_work, pri_kind );								// 印字日時　印字ﾃﾞｰﾀ登録
//		edit_cnt++;
//
//		edit_cnt += Prn_edit_space( pri_kind );						// １行空白
//
//		data_index = 0;												// 先頭データから
//	} else {
//		data_index = p_proc_data->Prn_no;							// 再開するデータ位置
//
//		if( data_index >= data_max ){
//			edit_flg = NO;											// 範囲チェック（念の為）
//		}
//	}
//
//	for( ; edit_flg ; )		// 編集処理ﾙｰﾌﾟ
//	{
//		/*------	番号／件数	------*/
//		sprintf( prn_work, "[%d/%d]", data_index+1, data_max );
//		PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
//		PrnStr( prn_work, pri_kind );								// 印字ﾃﾞｰﾀ登録
//		edit_cnt++;
//
//		/*------	精算時刻	------*/
//		Prn_edit_Date( cEditwk1, &msg_data->ng_data->back[ data_index ].time );
//		Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
//			"精算時刻",												// 文字列１：
//			cEditwk1,												// 文字列２：
//			pri_kind												// 印字先ﾌﾟﾘﾝﾀ
//		);
//		edit_cnt++;
//
//		/*------	精算金額	------*/
//		edit_cnt += Prn_edit_Sitei1line	(							// ----- 印字ﾃﾞｰﾀ編集 -----
//			"精算金額",												// 印字項目	：
//			msg_data->ng_data->back[ data_index ].ryo,				// 印字ﾃﾞｰﾀ	：
//			"",														// 単位１	：NULL
//			Pri_Tanni[PriT_YEN],									// 単位２	：円
//			pri_kind												// 印字先ﾌﾟﾘﾝﾀ
//		);
//
//		/*------	端末処理通番	------*/
//		sprintf( prn_work, "伝票No. %05d", msg_data->ng_data->back[ data_index ].slip_no );
//		PrnStr( prn_work, pri_kind );								// 印字ﾃﾞｰﾀ登録
//		edit_cnt++;
//
//		/*------	承認番号	------*/
//		Edit_AppNoChar( msg_data->ng_data->back[ data_index ].AppNoChar, sizeof(msg_data->ng_data->back[ data_index ].AppNoChar) );
//		strcpy( prn_work, "承認No. " );
//		strcat( prn_work, cEditwk1 );
//		PrnStr( prn_work, pri_kind );								// 印字ﾃﾞｰﾀ登録
//		edit_cnt++;
//
//		/*------	加盟店取引番号	------*/
//		strcpy( prn_work, "取引No. " );
//		strcat( prn_work, msg_data->ng_data->back[ data_index ].shop_account_no );
//		PrnStr( prn_work, pri_kind );								// 印字ﾃﾞｰﾀ登録
//		edit_cnt++;
//
//		edit_cnt += Prn_edit_space( pri_kind );						// １行空白
//
//		if( ++data_index >= data_max ){
//			edit_flg = NO;											// データ終了
//		} else {
//			if( edit_cnt >= EDIT_GYOU_MAX ){
//				p_proc_data->Prn_no = data_index;					// 次回の先頭データ位置
//				edit_flg = NO;
//			}
//		}
//	}
//
//EDIT_END:
//	/*------	編集終了ﾁｪｯｸ	------*/
//	if( data_index >= data_max ){
//		p_proc_data->Final = ON;									// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
//	}
//}
// MH810103 GG119202(E) 不要機能削除(センタークレジット)

// MH321800(S) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
//#ifdef	FUNCTION_MASK_EDY
// /*[]-----------------------------------------------------------------------[]*/
// /*|		Edy設定＆ステータス印字ﾃﾞｰﾀ編集										|*/
// /*[]-----------------------------------------------------------------------[]*/
// /*|	MODULE NAME		:	Edy_Status_edit(*msg_data, pri_kind, *p_proc_data)	|*/
// /*|																			|*/
// /*|	PARAMETER		:	T_FrmLogPriReq1	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
// /*|																			|*/
// /*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
// /*|							R_PRI  : ﾚｼｰﾄ									|*/
// /*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
// /*|																			|*/
// /*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
// /*|																			|*/
// /*|	RETURN VALUE	:	void												|*/
// /*|																			|*/
// /*[]-----------------------------------------------------------------------[]*/
// /*|	Author	:	Suzuki														|*/
// /*|	Date	:	2007-02-26													|*/
// /*|	Update	:																|*/
// /*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
//void	Edy_Status_edit( T_FrmLogPriReq1 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
//{
//	char	wk_prn_work[64];								// 印字処理ﾜｰｸ
//	ushort	i;
//	uchar	wk_uc1, wk_uc2;
//	ulong	wk_ul1, wk_ul2, wk_ul3, wk_ul4;
//	ushort	wk_us1;
//
//	if( p_proc_data->Prn_no == 0 ){
//
//	/*------	＜表題＞編集	------*/
//		Prn_edit_Title	(										// 表題印字ﾃﾞｰﾀ編集
//							"Ｅｄｙ設定",
//							FONT_K_YOKOBAI,
//							pri_kind
//						);
//
//		/*------	１行空白	------*/
//		Prn_edit_space( pri_kind );
//
//		/*------	＜機械NO.＞編集	------*/
//		KikaiNoSet(	prn_work, msg_data->Kikai_no );				// 機械NO.編集
//		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
//		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
//		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
//		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録
//
//		/*------	＜印字日時＞編集	------*/
//		Prn_edit_Date( prn_work, &msg_data->PriTime );			// 日時印字ﾃﾞｰﾀ編集
//		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
//		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
//		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
//		PrnStr( prn_work, pri_kind );							// 印字日時　印字ﾃﾞｰﾀ登録
//
//	p_proc_data->Prn_no++; 
//}
// else if( p_proc_data->Prn_no == 1 ){
///*------　＜装置診断ｽﾃｰﾀｽ＞　------*/
//	Prn_edit_space( pri_kind );											// １行空白
//	PCMD_CENTER( pri_kind );											// ＜装置診断ｽﾃｰﾀｽ＞
//	PrnFontSize( FONT_A_NML, pri_kind );
//	PrnFontSize( FONT_K_NML, pri_kind );
//	PrnStr( "****** 装置診断ｽﾃｰﾀｽ ******", pri_kind );		
//
//	memcpy( &wk_ul1, Edy_SetStatus_ReadData.Result_Code, 4);			// 診断結果コード
//	sprintf( prn_work, "%08Xh", wk_ul1 );
//	Str_Set1( "診断結果ｺｰﾄﾞ",prn_work, pri_kind);
//
//	sprintf( prn_work, "%02Xh", Edy_SetStatus_ReadData.Mode_Data);		// 動作モード
//	Str_Set1( "動作ﾓｰﾄﾞ",prn_work, pri_kind);
//
//		if(Edy_SetStatus_ReadData.Log_Status == 0x00) {						// ログ状態
//			strcpy(prn_work, "正常");
//		} else if(Edy_SetStatus_ReadData.Log_Status == 0x01) {
//			strcpy(prn_work, "ﾆｱﾌﾙ");
//		} else if(Edy_SetStatus_ReadData.Log_Status == 0x02) {
//			strcpy(prn_work, "ﾌﾙ");
//		} else {
//			sprintf( prn_work, "不明(%02X)", Edy_SetStatus_ReadData.Log_Status);
//		}
//		Str_Set1( "ﾛｸﾞ状態",prn_work, pri_kind);
//
//		if(Edy_SetStatus_ReadData.Power_Status == 0x00) {					// 電源状態
//			strcpy(prn_work, "正常");
//		} else if(Edy_SetStatus_ReadData.Power_Status == 0x12) {
//			strcpy(prn_work, "不安定");
//		} else if(Edy_SetStatus_ReadData.Power_Status == 0x20) {
//			strcpy(prn_work, "未接続");
//		} else if(Edy_SetStatus_ReadData.Power_Status == 0x21) {
//			strcpy(prn_work, "異常");
//		} else {
//			sprintf( prn_work, "不明(%02X)", Edy_SetStatus_ReadData.Power_Status);
//		}
//		Str_Set1( "電源状態",prn_work, pri_kind);
//
//		wk_uc1 = bcdbin( Edy_SetStatus_ReadData.Power_Vol[0] );
//		wk_uc2 = bcdbin( Edy_SetStatus_ReadData.Power_Vol[1] );
//		sprintf( prn_work, "%2d.%02dV", wk_uc1, wk_uc2 );					// 電源電圧
//		Str_Set1( "電源電圧",prn_work, pri_kind);
//
//		if(Edy_SetStatus_ReadData.Backup_Memory_Status == 0x00) {			// ﾊﾞｯｸｱｯﾌﾟﾒﾓﾘﾊﾞｯﾃﾘｰ状態
//			strcpy(prn_work, "満充電");
//		} else if(Edy_SetStatus_ReadData.Backup_Memory_Status == 0x11) {
//			strcpy(prn_work, "容量少");
//		} else if(Edy_SetStatus_ReadData.Backup_Memory_Status == 0x12) {
//			strcpy(prn_work, "容量NG");
//		} else if(Edy_SetStatus_ReadData.Backup_Memory_Status == 0x20) {
//			strcpy(prn_work, "ﾊﾞｯﾃﾘ-NG");
//		} else if(Edy_SetStatus_ReadData.Backup_Memory_Status == 0x21) {
//			strcpy(prn_work, "ﾊﾞｯﾃﾘ-無");
//		} else {
//			sprintf( prn_work, "不明(%02X)", Edy_SetStatus_ReadData.Backup_Memory_Status);
//		}
//		Str_Set1( "ﾊﾞｯｸｱｯﾌﾟﾒﾓﾘ-ﾊﾞｯﾃﾘｰ状態",prn_work, pri_kind);
//
//	wk_uc1 = bcdbin( Edy_SetStatus_ReadData.Backup_Memory_Vol[0] );
//	wk_uc2 = bcdbin( Edy_SetStatus_ReadData.Backup_Memory_Vol[1] );
//	sprintf( prn_work, "%2d.%02dV", wk_uc1, wk_uc2 );					// ﾊﾞｯｸｱｯﾌﾟﾒﾓﾘﾊﾞｯﾃﾘｰ電圧
//	Str_Set1( "ﾊﾞｯｸｱｯﾌﾟﾒﾓﾘ-ﾊﾞｯﾃﾘｰ電圧",prn_work, pri_kind);
//
//	if(Edy_SetStatus_ReadData.Key_Status == 0x00) {						// 運用鍵状態
//		strcpy(prn_work, "本番運用鍵");
//	} else if(Edy_SetStatus_ReadData.Key_Status == 0x01) {
//		strcpy(prn_work, "ﾃｽﾄ運用鍵");
//	} else if(Edy_SetStatus_ReadData.Key_Status == 0xFF) {
//		strcpy(prn_work, "未登録");
//	} else {
//		sprintf( prn_work, "不明(%02X)", Edy_SetStatus_ReadData.Key_Status);
//	}
//	Str_Set1( "運用鍵状態",prn_work, pri_kind);
//
//	wk_uc1 = bcdbin( Edy_SetStatus_ReadData.Log_Num[0] );
//	wk_uc2 = bcdbin( Edy_SetStatus_ReadData.Log_Num[1] );
//	wk_us1 = wk_uc1;
//	wk_us1 = (wk_us1*100)+wk_uc2;
//	sprintf( prn_work, "%d件", wk_us1 );								// 取引ログ件数
//	Str_Set1( "取引ﾛｸﾞ件数",prn_work, pri_kind);
//
//	wk_uc1 = bcdbin( Edy_SetStatus_ReadData.NotSnd_Log_Num[0] );
//		wk_uc2 = bcdbin( Edy_SetStatus_ReadData.NotSnd_Log_Num[1] );
//		wk_us1 = wk_uc1;
//		wk_us1 = (wk_us1*100)+wk_uc2;
//		sprintf( prn_work, "%d件", wk_us1 );								// 取引ログ件数
//		Str_Set1( "未送信取引ﾛｸﾞ件数",prn_work, pri_kind);
//
//	memcpy( &wk_us1, Edy_SetStatus_ReadData.Max_Log_Num, 2);
//	sprintf( prn_work, "%4d件", wk_us1);								// 最大ログ件数
//	Str_Set1( "最大ﾛｸﾞ件数",prn_work, pri_kind);
//
//	if(Edy_SetStatus_ReadData.RW_Com_Speed == 1) {						// R/W通信速度
//		strcpy(prn_work, "9600bps");
//	} else if(Edy_SetStatus_ReadData.RW_Com_Speed == 2) {
//		strcpy(prn_work, "19200bps");
//	} else if(Edy_SetStatus_ReadData.RW_Com_Speed == 3) {
//		strcpy(prn_work, "38400bps");
//	} else if(Edy_SetStatus_ReadData.RW_Com_Speed == 4) {
//		strcpy(prn_work, "57600bps");
//	} else if(Edy_SetStatus_ReadData.RW_Com_Speed == 5) {
//		strcpy(prn_work, "115200bps");
//	} else {
//		sprintf( prn_work, "不明(%02X)", Edy_SetStatus_ReadData.RW_Com_Speed);
//	}
//	Str_Set1( "端末通信速度",prn_work, pri_kind);
//
//	memcpy( &wk_us1, Edy_SetStatus_ReadData.Packet_Count, 2);
//	sprintf( prn_work, "%5d回", wk_us1);								// ｽﾙｰｺﾏﾝﾄﾞﾊﾟｹｯﾄｶｳﾝﾄ
//	Str_Set1( "ｽﾙｰﾊﾟｹｯﾄｶｳﾝﾄ",prn_work, pri_kind);
//
//		p_proc_data->Prn_no++; 
//	}
//	 else if( p_proc_data->Prn_no == 2 ){
//		/*------　＜ｾﾝﾀｰｺｸﾄﾁｪｯｸ＞　------*/
//		Prn_edit_space( pri_kind );											// １行空白
//
//		PCMD_CENTER( pri_kind );											// ＜ｾﾝﾀｰｺｸﾄﾁｪｯｸ＞
//		PrnFontSize( FONT_A_NML, pri_kind );
//		PrnFontSize( FONT_K_NML, pri_kind );
//		PrnStr( "****** ｾﾝﾀｰｺﾈｸﾄﾁｪｯｸ ******", pri_kind );		
//
//		if(Edy_SetStatus_ReadData.Prm_Delivery_End == 0x00) {				// パラメータ配信完了
//			strcpy(prn_work, "未");
//		} else if(Edy_SetStatus_ReadData.Prm_Delivery_End == 0x01) {
//			strcpy(prn_work, "済");
//		} else {
//			sprintf( prn_work, "不明(%02X)", Edy_SetStatus_ReadData.Prm_Delivery_End);
//		}
//		Str_Set1( "ﾊﾟﾗﾒｰﾀ配信",prn_work, pri_kind);
//
//		if(Edy_SetStatus_ReadData.Key_Delivery_End == 0x00) {				// 鍵配信完了
//			strcpy(prn_work, "未");
//		} else if(Edy_SetStatus_ReadData.Key_Delivery_End == 0x01) {
//			strcpy(prn_work, "済");
//		} else {
//			sprintf( prn_work, "不明(%02X)", Edy_SetStatus_ReadData.Key_Delivery_End);
//		}
//		Str_Set1( "鍵配信",prn_work, pri_kind);
//
//		if(Edy_SetStatus_ReadData.NotSnd_Log_Data == 0x00) {				// 未送信ログ有無
//			strcpy(prn_work, "無");
//		} else if(Edy_SetStatus_ReadData.NotSnd_Log_Data == 0x01) {
//			strcpy(prn_work, "有");
//		} else {
//			sprintf( prn_work, "不明(%02X)", Edy_SetStatus_ReadData.NotSnd_Log_Data);
//		}
//		Str_Set1( "未送信ﾛｸﾞ",prn_work, pri_kind);
//
//		if(Edy_SetStatus_ReadData.Snd_Log_Data == 0x00) {					// 送信済みログ有無
//			strcpy(prn_work, "無");
//		} else if(Edy_SetStatus_ReadData.Snd_Log_Data == 0x01) {
//			strcpy(prn_work, "有");
//		} else {
//			sprintf( prn_work, "不明(%02X)", Edy_SetStatus_ReadData.Snd_Log_Data);
//		}
//		Str_Set1( "送信済ﾛｸﾞ",prn_work, pri_kind);
//
//		sprintf( prn_work, "%02Xh", Edy_SetStatus_ReadData.Code);			// 処理コード
//		Str_Set1( "処理ｺｰﾄﾞ",prn_work, pri_kind);
//
//		sprintf( prn_work, "%02Xh", Edy_SetStatus_ReadData.Err_Code);		// 異常コード
//		Str_Set1( "異常ｺｰﾄﾞ",prn_work, pri_kind);
//
//		if(Edy_SetStatus_ReadData.Regist_End == 0) {						// センター登録完了
//			strcpy(prn_work, "未");
//		} else if(Edy_SetStatus_ReadData.Regist_End == 1) {
//			strcpy(prn_work, "済");
//		} else {
//			sprintf( prn_work, "不明(%02X)", Edy_SetStatus_ReadData.Regist_End);
//		}
//		Str_Set1( "ｾﾝﾀｰ登録完了",prn_work, pri_kind);
//
//		p_proc_data->Prn_no++; 
//	}
//	 else if( p_proc_data->Prn_no == 3 ){
//		/*------　＜ﾒｰｶｰ設定＞　------*/
//		Prn_edit_space( pri_kind );											// １行空白
//
//		PCMD_CENTER( pri_kind );											// ＜ﾒｰｶｰ設定＞
//		PrnFontSize( FONT_A_NML, pri_kind );
//		PrnFontSize( FONT_K_NML, pri_kind );
//		PrnStr( "****** ﾒｰｶｰ設定 ******", pri_kind );		
//
//		memset( prn_work,0,sizeof(prn_work));
//		BCDtoASCII( Edy_SetStatus_ReadData.High_TerminalID, (uchar*)prn_work, 4 );
//		Str_Set1( "上位端末ID",prn_work, pri_kind);
//
//		p_proc_data->Prn_no++; 
//	}
//	 else if( p_proc_data->Prn_no == 4 ){
//		/*------　＜ｾﾝﾀｰ通信設定＞　------*/
//		Prn_edit_space( pri_kind );											// １行空白
//
//		PCMD_CENTER( pri_kind );											// ＜ｾﾝﾀｰ通信設定＞
//		PrnFontSize( FONT_A_NML, pri_kind );
//		PrnFontSize( FONT_K_NML, pri_kind );
//		PrnStr( "****** ｾﾝﾀｰ通信設定 ******", pri_kind );		
//
//		if(Edy_SetStatus_ReadData.Line_kind == 2) {							// 回線種別
//			strcpy(prn_work, "LAN");
//		} else if(Edy_SetStatus_ReadData.Line_kind == 3) {
//			strcpy(prn_work, "Dopa");
//		} else if(Edy_SetStatus_ReadData.Line_kind == 4) {
//			strcpy(prn_work, "Modem");
//		} else if(Edy_SetStatus_ReadData.Line_kind == 5) {
//			strcpy(prn_work, "PHS");
//		} else {
//			sprintf( prn_work, "不明(%02X)", Edy_SetStatus_ReadData.Line_kind);
//		}
//		Str_Set1( "回線種別",prn_work, pri_kind);
//
//		PCMD_LEFT( pri_kind );											// [ﾘｰﾀﾞｰ]
//		PrnFontSize( FONT_A_NML, pri_kind );
//		PrnFontSize( FONT_K_NML, pri_kind );
//		PrnStr( "[ﾘｰﾀﾞｰ]", pri_kind );
//
//		if( prm_get(COM_PRM, S_SCA, 71, 1, 1) == 1 ) {					// DHCP使用の有無
//			strcpy(prn_work, "有");
//		} else {
//			strcpy(prn_work, "無");
//		}
//		Str_Set1( "  DHCP",prn_work, pri_kind);
//
//		if(Edy_SetStatus_ReadData.DHCP_Get_Status == 0) {				// DHCPリソース取得状態
//			strcpy(prn_work, "設定OK");
//		} else if(Edy_SetStatus_ReadData.DHCP_Get_Status == 1) {
//			strcpy(prn_work, "DHCP無効");
//		} else if(Edy_SetStatus_ReadData.DHCP_Get_Status == 2) {
//			strcpy(prn_work, "IP設定中");
//		} else if(Edy_SetStatus_ReadData.DHCP_Get_Status == 3) {
//			strcpy(prn_work, "IP重複ｴﾗｰ");
//		} else if(Edy_SetStatus_ReadData.DHCP_Get_Status == 4) {
//			strcpy(prn_work, "設定NG");
//		} else {
//			sprintf( prn_work, "不明(%02X)", Edy_SetStatus_ReadData.DHCP_Get_Status);
//		}
//		Str_Set1( "  IPｱﾄﾞﾚｽ設定状態",prn_work, pri_kind);
//
//		sprintf( prn_work, "%03d.%03d.%03d.%03d",						// EM IPアドレス
//				Edy_SetStatus_ReadData.EM_IPaddress[0], Edy_SetStatus_ReadData.EM_IPaddress[1],
//				Edy_SetStatus_ReadData.EM_IPaddress[2], Edy_SetStatus_ReadData.EM_IPaddress[3]);
//		Str_Set1( "  IPｱﾄﾞﾚｽ",prn_work, pri_kind);
//
//		sprintf( prn_work, "%03d.%03d.%03d.%03d",						// EM サブネットマスク
//				Edy_SetStatus_ReadData.EM_SubNetMask[0], Edy_SetStatus_ReadData.EM_SubNetMask[1],
//				Edy_SetStatus_ReadData.EM_SubNetMask[2], Edy_SetStatus_ReadData.EM_SubNetMask[3]);
//		Str_Set1( "  ｻﾌﾞﾈｯﾄﾏｽｸ",prn_work, pri_kind);
//
//		sprintf( prn_work, "%03d.%03d.%03d.%03d",						// EM ゲートウェイアドレス
//				Edy_SetStatus_ReadData.EM_GateWayAddress[0], Edy_SetStatus_ReadData.EM_GateWayAddress[1],
//				Edy_SetStatus_ReadData.EM_GateWayAddress[2], Edy_SetStatus_ReadData.EM_GateWayAddress[3]);
//		Str_Set1( "  ｹﾞｰﾄｳｪｲ",prn_work, pri_kind);
//
//		p_proc_data->Prn_no++; 
//	}
//	 else if( p_proc_data->Prn_no == 5 ){
//
//		if(	(Edy_SetStatus_ReadData.Line_kind == 3) ||
//			(Edy_SetStatus_ReadData.Line_kind == 4) ||
//			(Edy_SetStatus_ReadData.Line_kind == 5) ) {
//
//			Prn_edit_space( pri_kind );										// １行空白
//			PCMD_LEFT( pri_kind );											// [ATｺﾏﾝﾄﾞ]
//			PrnFontSize( FONT_A_NML, pri_kind );
//			PrnFontSize( FONT_K_NML, pri_kind );
//			PrnStr( "[ATｺﾏﾝﾄﾞ]", pri_kind );
//
//			for(i=0; i<6; i++) {											// ATコマンド
//				memset( wk_prn_work, 0x00, sizeof(wk_prn_work) );
//				memcpy( wk_prn_work, &Edy_SetStatus_ReadData.AT_Command[i], 20 );
//				sprintf( prn_work, "\"%20s\"", wk_prn_work );
//				sprintf( wk_prn_work, "  ｺﾏﾝﾄﾞ%d ： ", i+1);
//				Str_Set1( wk_prn_work, prn_work, pri_kind);
//			}
//		}
//
//		p_proc_data->Prn_no++; 
//	}
//	 else if( p_proc_data->Prn_no == 6 ){
//		/*------　＜動作ﾊﾟﾗﾒｰﾀ＞　------*/
//		Prn_edit_space( pri_kind );											// １行空白
//
//		PCMD_CENTER( pri_kind );											// ＜ｾﾝﾀｰ通信設定＞
//		PrnFontSize( FONT_A_NML, pri_kind );
//		PrnFontSize( FONT_K_NML, pri_kind );
//		PrnStr( "****** 動作ﾊﾟﾗﾒｰﾀ ******", pri_kind );		
//
//		if(Edy_SetStatus_ReadData.Center_Date == 1) {						// センター日時設定
//			strcpy(prn_work, "無効");
//		} else if(Edy_SetStatus_ReadData.Center_Date == 2) {
//			strcpy(prn_work, "有効");
//		} else {
//			sprintf( prn_work, "不明(%02X)", Edy_SetStatus_ReadData.Center_Date);
//		}
//		Str_Set1( "ｾﾝﾀｰ日時設定",prn_work, pri_kind);
//
//		if(Edy_SetStatus_ReadData.Hard_Tampa2 == 1) {						// ハードタンパ２処理選択
//			strcpy(prn_work, "OFF");
//		} else if(Edy_SetStatus_ReadData.Hard_Tampa2 == 2) {
//			strcpy(prn_work, "ON");
//		} else {
//			sprintf( prn_work, "不明(%02X)", Edy_SetStatus_ReadData.Hard_Tampa2);
//		}
//		Str_Set1( "ﾊｰﾄﾞﾀﾝﾊﾟｰ2処理選択",prn_work, pri_kind);
//
//		memcpy( &wk_us1, Edy_SetStatus_ReadData.Log_NearFull_num, 2);
//		sprintf( prn_work, "%4d件", wk_us1);								// 取引ログニアフル件数
//		Str_Set1( "ﾆｱﾌﾙ件数",prn_work, pri_kind);
//
//		p_proc_data->Prn_no++; 
//	}
//	 else if( p_proc_data->Prn_no == 7 ){
//		/*------　＜ﾊﾞｰｼﾞｮﾝ＞　------*/
//		Prn_edit_space( pri_kind );											// １行空白
//
//		PCMD_CENTER( pri_kind );											// ＜ﾊﾞｰｼﾞｮﾝ＞
//		PrnFontSize( FONT_A_NML, pri_kind );
//		PrnFontSize( FONT_K_NML, pri_kind );
//		PrnStr( "****** ﾊﾞｰｼﾞｮﾝ ******", pri_kind );		
//
//		wk_uc1 = bcdbin( Edy_SetStatus_ReadData.IPL_Version[0] );
//		wk_uc2 = bcdbin( Edy_SetStatus_ReadData.IPL_Version[1] );
//		sprintf( prn_work, "%02d%02d", wk_uc1, wk_uc2 );					// IPLバージョン
//		Str_Set1( "IPLﾊﾞｰｼﾞｮﾝ",prn_work, pri_kind);
//
//		wk_uc1 = bcdbin( Edy_SetStatus_ReadData.APL_Version[0] );
//		wk_uc2 = bcdbin( Edy_SetStatus_ReadData.APL_Version[1] );
//		sprintf( prn_work, "%02d%02d", wk_uc1, wk_uc2 );					// アプリケーションバージョン
//		Str_Set1( "ｱﾌﾟﾘﾊﾞｰｼﾞｮﾝ",prn_work, pri_kind);
//
//		wk_uc1 = bcdbin( Edy_SetStatus_ReadData.EachAttestKey_Version[0] );
//		wk_uc2 = bcdbin( Edy_SetStatus_ReadData.EachAttestKey_Version[1] );
//		sprintf( prn_work, "%02d%02d", wk_uc1, wk_uc2 );					// 相互認証鍵ﾊﾞｰｼﾞｮﾝ
//		Str_Set1( "相互認証鍵ﾊﾞｰｼﾞｮﾝ",prn_work, pri_kind);
//
//		wk_ul1 = (ushort)prm_get(COM_PRM, S_SCA, 63, 5, 1);
//		wk_ul2 = (ushort)prm_get(COM_PRM, S_SCA, 64, 5, 1);
//		wk_ul3 = (ushort)prm_get(COM_PRM, S_SCA, 65, 5, 1);
//		wk_ul4 = (ushort)prm_get(COM_PRM, S_SCA, 66, 5, 1);
//		sprintf( prn_work, "%05ld %05ld %05ld %05ld", wk_ul1, wk_ul2, wk_ul3, wk_ul4 );	// 鍵Ａ
//		Str_Set1( "鍵A",prn_work, pri_kind);
//
//		wk_ul1 = (ushort)prm_get(COM_PRM, S_SCA, 67, 5, 1);
//		wk_ul2 = (ushort)prm_get(COM_PRM, S_SCA, 68, 5, 1);
//		wk_ul3 = (ushort)prm_get(COM_PRM, S_SCA, 69, 5, 1);
//		wk_ul4 = (ushort)prm_get(COM_PRM, S_SCA, 70, 5, 1);
//		sprintf( prn_work, "%05ld %05ld %05ld %05ld", wk_ul1, wk_ul2, wk_ul3, wk_ul4 );	// 鍵B
//		Str_Set1( "鍵B",prn_work, pri_kind);
//
//		p_proc_data->Final = ON;			// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
//
//	}
//}
//
// /*[]-----------------------------------------------------------------------[]*/
// /*|		Edyｱﾗｰﾑﾚｼｰﾄ印字ﾃﾞｰﾀ編集												|*/
// /*[]-----------------------------------------------------------------------[]*/
// /*|	MODULE NAME		:	Edy_Arm_edit( *pribuf, pri_kind, pri_kind, *p_proc_data )	|*/
// /*|																			|*/
// /*|	PARAMETER		:	edy_arm_log	*pribuf	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
// /*|																			|*/
// /*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
// /*|							R_PRI  : ﾚｼｰﾄ									|*/
// /*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
// /*|																			|*/
// /*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
// /*|																			|*/
// /*|	RETURN VALUE	:	void												|*/
// /*|																			|*/
// /*[]-----------------------------------------------------------------------[]*/
// /*|	Author	:	T.Namioka													|*/
// /*|	Date	:	2007-02-26													|*/
// /*|	Update	:																|*/
// /*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
//void	Edy_Arm_edit( edy_arm_log *pribuf, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
//{
//
//	uchar	edit_gyou = 0;		// 編集済み行数
//	uchar	edit_cnt;			// 編集行数ﾜｰｸ
//	uchar	edit_flg = YES;		// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）
//
//	char	data_id[19];		// 電子ﾏﾈｰ決算結果Idﾜｰｸ領域
//	ulong	work_id[2];			// 電子ﾏﾈｰ決算結果Idﾜｰｸ領域
//	uchar	work;				// ﾜｰｸ領域
//	uchar	i,k;				
//	uchar	primax;				// 印字最大項目数
//	work_id[0] = work_id[1] = 0;
//
//	if( pri_kind == R_PRI )
//		primax = 15;
//	else				
//		primax = 13;
//
//	for( i=4;i<50;i++ ){									
//		work = 	(uchar)prm_get(COM_PRM, S_RTP, (short)i, 3, 1);	// 印字設定ﾘｰﾄﾞ
//		if( work == 1 )											// ﾛｺﾞ印字設定有り？
//			work_id[0] = 1;
//		else if( work == 2 )									// ﾍｯﾀﾞｰ印字設定有り？
//			work_id[1] = 1;
//
//		if( work_id[0] == 1 && work_id[1] == 1 )				// 両方設定済みの場合検索終了
//			break;
//	}
//
//
//	for( ; edit_flg ; ){	// 編集処理ﾙｰﾌﾟ
//
//			/*--------------------------------------*/
//			/*	１ﾌﾞﾛｯｸ編集最大行数ﾁｪｯｸ処理			*/
//			/*--------------------------------------*/
//		if( (edit_gyou > 0) && ( (edit_gyou + 1 ) > EDIT_GYOU_MAX) ){
//
//				//	１ﾌﾞﾛｯｸ編集の最大行数を超えてしまう場合
//
//				edit_flg = NO;														// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）
//		}
//
//		if( edit_flg == YES ){
//
//			// 対象設定項目番号に設定されている印字内容＝印字する　且つ　１ﾌﾞﾛｯｸ編集の最大行数を超えない場合
//
//			edit_cnt = 0;		// 編集行数ﾘｾｯﾄ
//
//			/*--------------------------------------*/
//			/*	１項目編集処理						*/
//			/*--------------------------------------*/
//			switch( p_proc_data->Prn_no ){		// 設定されている印字内容番号により各処理へ分岐
//
//				case	0:		// ＜未使用＞
//					break;
//
//				case	1:		// ＜ロゴ＞編集処理
//					if( CPrmSS[S_PRN][3] == 0 || CPrmSS[S_PRN][3] == 2 ){
//						if( work_id[0] == 1 ){
//							edit_cnt = Prn_edit_logo( pri_kind );
//						}
//					}
//					break;
//
//				case	2:		// ＜ヘッダー＞編集処理
//					if( CPrmSS[S_PRN][3] == 0 || CPrmSS[S_PRN][3] == 1 ){
//						if( work_id[1] == 1 ){
//							edit_cnt = Prn_edit_headhoot( PRI_HEADER, pri_kind );
//						}
//					}
//					break;
//
//				case	3:		// ＜表題＞編集処理
//
//					Prn_edit_Title	(										// 表題（"アラーム情報"）印字ﾃﾞｰﾀ編集
//										"アラームレシート",
//										FONT_K_YOKOBAI,
//										pri_kind
//									);
//					if( pri_kind == R_PRI ){
//						/*------	１行空白	------*/
//						Prn_edit_space( pri_kind );
//						edit_cnt++ ;
//					}
//					edit_cnt++ ;
//					break;
//
//				case	4:		// ＜精算情報＞編集処理
//					KikaiNoSet(	cEditwk1,(ushort)pribuf->Kikai_no );		// 機械NO.編集
//					PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
//					PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
//					PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
//					PrnStr( cEditwk1, pri_kind );							// 印字ﾃﾞｰﾀ登録
//					edit_cnt++;
//					break;
//
//				case	5:		// ＜発券時刻＞編集処理
//					Prn_edit_Date3( cEditwk1, &pribuf->TOutTime );				// cEditwk1←精算時刻印字ﾃﾞｰﾀ
//					Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
//								"発行時刻",										// 文字列１："精算時刻"
//								cEditwk1,										// 文字列２：精算時刻印字ﾃﾞｰﾀ
//								pri_kind										// 印字先ﾌﾟﾘﾝﾀ
//							);
//					edit_cnt++;
//
//					break;
//
//				case	6:		// ＜車室番号＞編集処理
//					edit_cnt = Edy_ArmEdit_Hakkenj( pribuf, pri_kind, p_proc_data );	// 車室番号編集
//					if( edit_cnt == 0 )
//						edit_cnt = Edy_ArmEdit_Teiki( pribuf, pri_kind, p_proc_data );	// 定期番号編集
//
//					break;
//
//				case	7:		// ＜Edy支払＞編集処理
//					// 支払い額　編集
//					sprintf( cMnydata,"%ld", pribuf->Pay_Ryo );			// 料金印字ﾃﾞｰﾀ編集
//					Camma_Set( (uchar *)cMnydata );									// ３桁区切り（”、”挿入）
//
//					Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//								Electron_prn[25],									// 文字列１："Edy支払"
//								"",													// 文字列２：NULL
//								cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
//								Pri_Tanni[PriT_YEN],								// 文字列４：円
//								pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//							);
//					edit_cnt++;
//
//					break;
//
//				case	8:		// ＜Edy取引前残高＞編集処理
//						// 支払い前残額　編集
//					Prn_edit_Sitei1line	(											// ----- 印字ﾃﾞｰﾀ編集 -----
//											Electron_prn[28],						// 印字項目	："　Edy取引前残高"
//											pribuf->Pay_Befor,// 印字ﾃﾞｰﾀ	：支払い前残額
//											"",										// 単位１	：NULL
//											Pri_Tanni[PriT_YEN],					// 単位２	：円
//											pri_kind								// 印字先ﾌﾟﾘﾝﾀ
//										);
//
//					edit_cnt++;
//					break;
//
//				case	9:		// ＜EdyｶｰﾄﾞNo＞編集処理
//					sprintf( cEditwk1, Electron_prn[27]);								// cEditwk2に「Edy番号 印字ﾃﾞｰﾀ」編集
//
//					if( pri_kind == R_PRI )
//						work = (uchar)prm_get(COM_PRM, S_SCA, 54, 1, 2);			// ﾚｼｰﾄ時ｶｰﾄﾞID印字設定ﾘｰﾄﾞ
//					else
//						work = (uchar)prm_get(COM_PRM, S_SCA, 54, 1, 3);			// ｼﾞｬｰﾅﾙ時ｶｰﾄﾞID印字設定ﾘｰﾄﾞ
//
//					for( i=0,k=0;i<8;i+=2,k+=5 ){									// 印字ﾃﾞｰﾀﾌﾞﾛｯｸ分ﾙｰﾌﾟ
//						BCDtoASCII( &pribuf->Edy_CardNo[i], (uchar*)(&data_id[k]), 2 );
//						switch( work ){												// 印字設定によって『*』表示する箇所を変更する
//							case 0:													// 先頭2文字＋末尾4文字を印字（残りは*表示）
//								break;
//							case 1:													// 先頭4文字を印字（残りは*表示）
//								if( i != 0 )
//									memset( &data_id[k], 0x2a, 4 );
//								break;
//							case 2:													// 末尾4文字を印字（残りは*表示）
//								if( i != 6)
//									memset( &data_id[k], 0x2a, 4 );
//								break;
//							default:
//								break;
//						}
//						if( i != 6 )
//							data_id[(k+4)] = 0x20;									// ｽﾍﾟｰｽを挿入
//					}
//
//					memset( cEditwk2, 0, sizeof( cEditwk2 ));
//					memcpy( cEditwk2, data_id, sizeof( data_id ));					// 編集したﾃﾞｰﾀを結合する
//
//					Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//									cEditwk1,										// 文字列１：Edy印字ﾃﾞｰﾀ
//									cEditwk2,										// 文字列２：EdyＮｏ．印字ﾃﾞｰﾀ
//									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
//								);
//					edit_cnt++;														// 印字行をｶｳﾝﾄｱｯﾌﾟ
//					break;
//
//
//				case	10:		// ＜Edy取引通番＞編集処理
//					if( prm_get(COM_PRM, S_SCA, 54, 1, 4) == 1 ){					// 取引通番印字指定あり？
//						sprintf( cEditwk1,"%s", Electron_prn[0] );					// 【取引通番】
//						memset( cEditwk2, 0, sizeof( cEditwk2 ));					
//						intoasl( (uchar*)cEditwk2, pribuf->Edy_Deal_num, 10 );
//						Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
//										cEditwk1,									// 文字列１：取引通番ﾍｯﾀﾞ印字ﾃﾞｰﾀ
//										cEditwk2,									// 文字列２：取引通番印字ﾃﾞｰﾀ
//										pri_kind									// 印字先ﾌﾟﾘﾝﾀ
//									);
//					}
//					edit_cnt++;														// 印字行をｶｳﾝﾄｱｯﾌﾟ
//					break;
//
//				case	11:		// ＜ｶｰﾄﾞ取引通番＞編集処理
//					if( prm_get(COM_PRM, S_SCA, 54, 1, 5) == 1 ){					// ｶｰﾄﾞ取引通番印字指定あり？
//						sprintf( cEditwk1,"%s", Electron_prn[1] );					// 【ｶｰﾄﾞ取引通番】
//						memset( cEditwk2, 0, sizeof( cEditwk2 ));
//						intoasl( (uchar*)cEditwk2, (ulong)pribuf->Card_Deal_num, 5 );
//
//						Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
//										cEditwk1,									// 文字列１：ｶｰﾄﾞ取引通番ﾍｯﾀﾞ印字ﾃﾞｰﾀ
//										cEditwk2,									// 文字列２：ｶｰﾄﾞ取引通番印字ﾃﾞｰﾀ
//										pri_kind									// 印字先ﾌﾟﾘﾝﾀ
//									);
//					}
//					edit_cnt++;														// 印字行をｶｳﾝﾄｱｯﾌﾟ
//					break;
//
//				case	12:		// ＜上位端末ID＞編集処理
//					sprintf( cEditwk1,"%s", Electron_prn[2] );						// 【上位端末ID】
//					memset( cEditwk2, 0, sizeof( cEditwk2 ));
//					BCDtoASCII( pribuf->High_Terminal_ID, (uchar*)cEditwk2, 4 );
//
//					Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//									cEditwk1,										// 文字列１：上位端末IDﾍｯﾀﾞ印字ﾃﾞｰﾀ
//									cEditwk2,										// 文字列２：上位端末ID印字ﾃﾞｰﾀ
//									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
//								);
//					edit_cnt++;														// 印字行をｶｳﾝﾄｱｯﾌﾟ
//					break;
//
//				case	13:		// ＜仕切り行＞編集処理
//					edit_cnt = Prn_edit_sikiri( pri_kind );
//					break;
//
//				case	14:		// ＜固定ﾒｯｾｰｼﾞ＞編集処理
//					edit_cnt = Prn_edit_EdyKoteiMsg( pri_kind );
//					break;
//
//				default:		// その他（印字項目番号ｴﾗｰ）
//					break;
//			}
//			edit_gyou = (uchar)(edit_gyou + edit_cnt);	// 編集済み行数更新
//
//			if( (p_proc_data->Prn_no_data1 == 0) && (p_proc_data->Prn_no_data2 == 0) ){
//
//				// 項目番号の印字ﾃﾞｰﾀを全て編集終了した場合
//				p_proc_data->Prn_no++;					// 設定項目番号＋１
//			}
//		}
//
//		if( p_proc_data->Prn_no >= primax ){
//
//			// 設定項目番号の最後（５０）まで印字内容編集終了の場合
//
//			edit_flg = NO;								// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）
//
//			p_proc_data->Prn_no			= 0;			// 編集処理ﾜｰｸﾘｾｯﾄ
//			p_proc_data->Prn_no_data1	= 0;
//			p_proc_data->Prn_no_data2	= 0;
//
//			if( p_proc_data->Log_Edit == OFF ){
//				// 精算履歴印字でない場合
//				p_proc_data->Final = ON;				// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
//			}
//		}
//	}
//}
//
// /*[]-----------------------------------------------------------------------[]*/
// /*|		Ｅｄｙ固定ﾒｯｾｰｼﾞ印字ﾃﾞｰﾀ編集処理									|*/
// /*[]-----------------------------------------------------------------------[]*/
// /*|	MODULE NAME		:	Prn_edit_EdyKoteiMsg( pri_kind )					|*/
// /*|																			|*/
// /*|	PARAMETER		:	uchar	msg_no		=	ﾒｯｾｰｼﾞ番号					|*/
// /*|																			|*/
// /*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
// /*|							R_PRI  : ﾚｼｰﾄ									|*/
// /*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
// /*|																			|*/
// /*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
// /*|																			|*/
// /*[]-----------------------------------------------------------------------[]*/
// /*|	Author	:	T.Namioka													|*/
// /*|	Date	:	2006-11-01													|*/
// /*|	Update	:																|*/
// /*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
//uchar	Prn_edit_EdyKoteiMsg( uchar pri_kind )
//{
//	uchar	edit_cnt=0;
//	ushort	prmdata;
//
//	PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]
//	PrnFontSize( FONT_A_NML, pri_kind );		// ﾌｫﾝﾄＡ（通常）指定
//	PrnFontSize( FONT_K_NML, pri_kind );		// 漢字（通常）指定
//	prmdata = (ushort)CPrmSS[S_PRN][30];
//
//	if( prmdata == 1 ){
//		PrnStr( EdyoteiMsg[0], pri_kind );		// ﾒｯｾｰｼﾞ（１行）印字ﾃﾞｰﾀ登録
//		PrnStr( EdyoteiMsg[1], pri_kind );		// ﾒｯｾｰｼﾞ（１行）印字ﾃﾞｰﾀ登録
//		edit_cnt+=2;
//
//	}else if( prmdata == 2 ){
//		PrnStr( EdyoteiMsg[2], pri_kind );		// ﾒｯｾｰｼﾞ（１行）印字ﾃﾞｰﾀ登録
//		edit_cnt++;
//	}
//
//	return( edit_cnt );
//}
//
// /*[]-----------------------------------------------------------------------[]*/
// /*|		＜発券情報＞印字ﾃﾞｰﾀ編集処理										|*/
// /*[]-----------------------------------------------------------------------[]*/
// /*|	MODULE NAME		:	Edy_Armedit_hakkenj									|*/
// /*|																			|*/
// /*|	PARAMETER		:	edy_arm_log		*Armdata	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
// /*|																			|*/
// /*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
// /*|																			|*/
// /*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
// /*|																			|*/
// /*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
// /*|																			|*/
// /*[]-----------------------------------------------------------------------[]*/
// /*|	Author	:	K.Motohashi													|*/
// /*|	Date	:	2005-09-26													|*/
// /*|	Update	:	※本関数はUT8500では車室番号印字用に使用					|*/
// /*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
//uchar	Edy_ArmEdit_Hakkenj( edy_arm_log *Armdata, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
//{
//	uchar	edit_cnt = 0;		// 編集行数
//
//	// 発券機No.、発券No.がともに０でない場合（両方とも０の場合、何も印字しない）
//	if( Armdata->TicketNum ){
//		memset( cEditwk1, 0, sizeof( cEditwk1 ));
//		Prn_edit_pkposi( cEditwk1, Armdata->TicketNum, 0 );		// cEditwk1←駐車位置印字ﾃﾞｰﾀ
//
//		memset( cEditwk2, 0, sizeof( cEditwk2 ));
//		Prn_edit_sya_syu( cEditwk2,(ushort)Armdata->syubet,1,0 );	// 車種ﾃﾞｰﾀ取得
//
//		Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
//					cEditwk2,										// 文字列１：車室番号＆車種ﾃﾞｰﾀ
//					cEditwk1,										// 文字列２：駐車位置印字ﾃﾞｰﾀ
//					pri_kind										// 印字先ﾌﾟﾘﾝﾀ
//				);
//		edit_cnt++;											// 編集行数更新
//	}
//	return( edit_cnt );
//}
//
// /*[]-----------------------------------------------------------------------[]*/
// /*|		＜定期券種別・契約Ｎｏ．＞印字ﾃﾞｰﾀ編集処理							|*/
// /*[]-----------------------------------------------------------------------[]*/
// /*|	MODULE NAME		:	Edy_Armedit_teiki									|*/
// /*|																			|*/
// /*|	PARAMETER		:	edy_arm_log		*Armdata	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
// /*|																			|*/
// /*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
// /*|																			|*/
// /*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
// /*|																			|*/
// /*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
// /*|																			|*/
// /*[]-----------------------------------------------------------------------[]*/
// /*|	Author	:	K.Motohashi													|*/
// /*|	Date	:	2005-03-07													|*/
// /*|	Update	:																|*/
// /*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----[]*/
//uchar	Edy_ArmEdit_Teiki( edy_arm_log *Armdata, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
//{
//	uchar	edit_cnt = 0;		// 編集行数
//	uchar	tei_syu;			// 定期券種別ﾃﾞｰﾀ
//	uchar	pkno_syu;			// 駐車場Ｎｏ．種別
//	uchar	pri_set;			// 有効期限印字有無（設定ﾃﾞｰﾀ）
//	uchar	kigen = 1;			// 有効期限有無（０：無、１：有）
//	uchar	yakuwari;			// 定期券使用目的（設定ﾃﾞｰﾀ）
//
//
//	if( Armdata->teiki.id != 0){							// 定期券使用？
//
//		sprintf( prn_work,"No.     ");						// 契約者Ｎｏ．印字ﾃﾞｰﾀ編集
//		intoasl(	&(uchar)prn_work[3], Armdata->teiki.id, 5 );
//
//		tei_syu		= Armdata->teiki.syu;					// 定期券種別ﾃﾞｰﾀ取得
//		pkno_syu	= Armdata->teiki.pkno_syu;				// 定期券駐車場Ｎｏ．種別取得
//
//		Str_Set2(											// -----印字ﾃﾞｰﾀ編集-----
//					TeikiTicket[pkno_syu][tei_syu -1],		// 文字列１：定期券種別印字ﾃﾞｰﾀ
//					"",										// 文字列２：なし
//					prn_work,								// 文字列３：契約者Ｎｏ．印字ﾃﾞｰﾀ
//					"",										// 文字列４：なし
//					pri_kind								// 印字先ﾌﾟﾘﾝﾀ
//				);
//
//		edit_cnt++;											// 編集行数更新
//
//		pri_set = (uchar)prm_get( COM_PRM, S_RTP, 2, 1, 2 );// 「有効期限印字有無」	設定ﾃﾞｰﾀ取得
//		// 有効期限印字有無＝あり　且つ　定期更新でない　場合のみ有効期限を印字する
//
//
//		if(	(Armdata->teiki.s_year ==  0) && (Armdata->teiki.s_mon ==  0) && (Armdata->teiki.s_day ==  0) &&
//			(Armdata->teiki.e_year == 99) && (Armdata->teiki.e_mon == 99) && (Armdata->teiki.e_day == 99) ){
//			// 無期限定期
//			kigen = 0;										// 有効期限なし
//		}
//
//		if(	( pri_set == 1 ) && ( Armdata->teiki.update_mon == 0 ) && ( kigen == 1 ) ){
//
//			// 有効期限印字有無＝あり　且つ　定期更新でない　且つ　有効期限あり　の場合のみ有効期限を印字する
//
//
//			sprintf	(	prn_work,							// 有効期限印字ﾃﾞｰﾀ編集
//						"期限  %02d年%2d月%2d日～%02d年%2d月%2d日  ",
//						(Armdata->teiki.s_year)%100,
//						Armdata->teiki.s_mon,
//						Armdata->teiki.s_day,
//						(Armdata->teiki.e_year)%100,
//						Armdata->teiki.e_mon,
//						Armdata->teiki.e_day
//					);
//
//			PCMD_RIGHT( pri_kind );							// [位置揃え(右揃え)]
//			PrnFontSize( FONT_A_NML, pri_kind );			// ﾌｫﾝﾄＡ（通常）指定
//			PrnFontSize( FONT_K_NML, pri_kind );			// 漢字（通常）指定
//
//			PrnStr( prn_work, pri_kind );					// 有効期限　印字ﾃﾞｰﾀ登録
//
//			edit_cnt++;
//
//		}
//
//		yakuwari = (uchar)CPrmSS[S_PAS][ ( (tei_syu-1)*10 ) + 1];	// 「定期（種別＝tei_syu）の使用目的」設定ﾃﾞｰﾀ取得
//
//		if( rangechk( 3,14,yakuwari )){ 			// 車種切換定期？
//
//			//	車種切替定期の場合（種別３～１４）
//
//			Str_Set1(								// -----印字ﾃﾞｰﾀ編集-----
//						"",							// 文字列１：空白
//						SyubetuRyokin[yakuwari-2],	// 文字列２：料金種別印字ﾃﾞｰﾀ（車種切替した種別）
//						pri_kind					// 印字先ﾌﾟﾘﾝﾀ
//					);
//
//			edit_cnt++;
//		}
//	}
//
//	return( edit_cnt );
//}
//
// /*[]-----------------------------------------------------------------------[]*/
// /*|		Edy領収証印字編集関数												|*/
// /*[]-----------------------------------------------------------------------[]*/
// /*|	MODULE NAME		:	Edy_Ryosyu_Edit										|*/
// /*|																			|*/
// /*|	PARAMETER		:	Receipt_data *Ryousyuu								|*/
// /*|																			|*/
// /*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
// /*|																			|*/
// /*[]-----------------------------------------------------------------------[]*/
// /*|	Author	:	T.Namioka													|*/
// /*|	Date	:	2006-11-13													|*/
// /*|	Update	:																|*/
// /*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
//uchar	Edy_Ryosyu_Edit( Receipt_data *Ryousyuu, uchar pri_kind )
//{
//	uchar	edit_cnt=0;
//	uchar	i,k;
//	uchar	work=0;
//	uchar	test_mode=0;
//	char	data_id[19];		// 電子ﾏﾈｰ決算結果Idﾜｰｸ領域
//	ulong	test_mode_judge;	// ﾃｽﾄﾓｰﾄﾞ判定用領域
//
//	// 上位端末IDの領域にデータが格納されているかどうかで、ﾃｽﾄﾓｰﾄﾞの判定を行う
//	memcpy( &test_mode_judge, Ryousyuu->Electron_data.Edy.Terminal_ID, 4 );
//
//	if( test_mode_judge == 0 )	// 上位端末IDが０の場合はﾃｽﾄﾓｰﾄﾞ
//		test_mode = 1;			// ﾃｽﾄﾓｰﾄﾞ設定
//
//	PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]
//	PrnFontSize( FONT_A_NML, pri_kind );		// ﾌｫﾝﾄＡ（通常）指定
//	PrnFontSize( FONT_K_NML, pri_kind );		// 漢字（通常）指定
//	PrnStr( EdyoteiMsg[3], pri_kind );			// ﾒｯｾｰｼﾞ（１行）印字ﾃﾞｰﾀ登録
//	edit_cnt++;
//
//	// 支払前残額　編集
//	sprintf( cMnydata,"%ld", Ryousyuu->Electron_data.Suica.pay_befor );			// 料金印字ﾃﾞｰﾀ編集
//	Camma_Set( (uchar *)cMnydata );									// ３桁区切り（”、”挿入）
//
//	Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//				Electron_prn[24],									// 文字列１："　Edy預り"
//				"",													// 文字列２：NULL
//				cMnydata,											// 文字列３：支払前残額印字ﾃﾞｰﾀ
//				Pri_Tanni[PriT_YEN],								// 文字列４：円
//				pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//			);
//	edit_cnt++;
//
//	// 支払い額　編集
//	sprintf( cMnydata,"%ld", Ryousyuu->Electron_data.Suica.pay_ryo );			// 料金印字ﾃﾞｰﾀ編集
//	Camma_Set( (uchar *)cMnydata );									// ３桁区切り（”、”挿入）
//
//	Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//				Electron_prn[25],									// 文字列１："　Edy支払"
//				"",													// 文字列２：NULL
//				cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
//				Pri_Tanni[PriT_YEN],								// 文字列４：円
//				pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//			);
//	edit_cnt++;
//	// 支払い後残額　編集
//	Prn_edit_Sitei1line	(											// ----- 印字ﾃﾞｰﾀ編集 -----
//							Electron_prn[26],						// 印字項目	："　Edy残高"
//							Ryousyuu->Electron_data.Suica.pay_after,// 印字ﾃﾞｰﾀ	：支払い後残額
//							"",										// 単位１	：NULL
//							Pri_Tanni[PriT_YEN],					// 単位２	：円
//							pri_kind								// 印字先ﾌﾟﾘﾝﾀ
//						);
//	edit_cnt++;
//
//	sprintf( cEditwk1, Electron_prn[27]);							// cEditwk2に「Edy番号印字ﾃﾞｰﾀ」編集
//
//	if( pri_kind == R_PRI )
//		work = (uchar)prm_get(COM_PRM, S_SCA, 54, 1, 2);			// ﾚｼｰﾄ時ｶｰﾄﾞID印字設定ﾘｰﾄﾞ
//	else
//		work = (uchar)prm_get(COM_PRM, S_SCA, 54, 1, 3);			// ｼﾞｬｰﾅﾙ時ｶｰﾄﾞID印字設定ﾘｰﾄﾞ
//
//	if( test_mode )
//		work = 99;
//
//
//	for( i=0,k=0;i<8;i+=2,k+=5 ){									// 印字ﾃﾞｰﾀﾌﾞﾛｯｸ分ﾙｰﾌﾟ
//		BCDtoASCII( &Ryousyuu->Electron_data.Edy.Card_ID[i], (uchar*)(&data_id[k]), 2 );
//		switch( work ){												// 印字設定によって『*』表示する箇所を変更する
//			case 0:													// 先頭2文字＋末尾4文字を印字（残りは*表示）
//				break;
//			case 1:													// 先頭4文字を印字（残りは*表示）
//				if( i != 0 )
//					memset( &data_id[k], 0x2a, 4 );
//				break;
//			case 2:													// 末尾4文字を印字（残りは*表示）
//				if( i != 6)
//					memset( &data_id[k], 0x2a, 4 );
//				break;
//			case 99:												// ﾃｽﾄﾓｰﾄﾞ用【N】を印字
//				memset( &data_id[k], 0x4e, 4 );
//				break;
//			default:
//				break;
//		}
//		if( i != 6 )
//			data_id[(k+4)] = 0x20;									// ｽﾍﾟｰｽを挿入
//	}
//
//	memset( cEditwk2, 0, sizeof( cEditwk2 ));
//	memcpy( cEditwk2, data_id, sizeof( data_id ));					// 編集したﾃﾞｰﾀを結合する
//
//	Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//					cEditwk1,										// 文字列１：Edy印字ﾃﾞｰﾀ
//					cEditwk2,										// 文字列２：EdyＮｏ．印字ﾃﾞｰﾀ
//					pri_kind										// 印字先ﾌﾟﾘﾝﾀ
//				);
//	edit_cnt++;														// 印字行をｶｳﾝﾄｱｯﾌﾟ
//
//	if( prm_get(COM_PRM, S_SCA, 54, 1, 4) == 1 ){					// Edy取引通番を印字する設定？
//		sprintf( cEditwk1,"%s", Electron_prn[0] );					// 「Edy取引通番」
//		memset( cEditwk2, 0, sizeof( cEditwk2 ));
//		if( test_mode ){											// ﾃｽﾄﾓｰﾄﾞ？
//			memset( cEditwk2, 0x4E, 10 );							// Edy取引通番の項目に【N】を設定
//		}else{
//			intoasl( (uchar*)cEditwk2, Ryousyuu->Electron_data.Edy.deal_no, 10 );
//		}
//		Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
//						cEditwk1,									// 文字列１：Edy印字項目
//						cEditwk2,									// 文字列２：Edy取引通番印字ﾃﾞｰﾀ
//						pri_kind									// 印字先ﾌﾟﾘﾝﾀ
//					);
//		edit_cnt++;													// 印字行をｶｳﾝﾄｱｯﾌﾟ
//	}
//
//	if( prm_get(COM_PRM, S_SCA, 54, 1, 5) == 1 ){					// 取引通番を印字する設定？
//		sprintf( cEditwk1,"%s", Electron_prn[1] );					// 「ｶｰﾄﾞ取引通番」
//		memset( cEditwk2, 0, sizeof( cEditwk2 ));
//		if( test_mode ){											// ﾃｽﾄﾓｰﾄﾞ？
//			memset( cEditwk2, 0x4E, 5 );							// 取引通番の項目に【N】を設定
//		}else{
//			intoasl( (uchar*)cEditwk2, (ulong)Ryousyuu->Electron_data.Edy.card_deal_no, 5 );
//		}
//		Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
//						cEditwk1,									// 文字列１：Edy印字項目
//						cEditwk2,									// 文字列２：ｶｰﾄﾞ取引通番印字ﾃﾞｰﾀ
//						pri_kind									// 印字先ﾌﾟﾘﾝﾀ
//					);
//		edit_cnt++;													// 印字行をｶｳﾝﾄｱｯﾌﾟ
//	}
//
//	sprintf( cEditwk1,"%s", Electron_prn[2] );						// 「上位端末ID」
//	memset( cEditwk2, 0, sizeof( cEditwk2 ));
//	if( test_mode ){												// ﾃｽﾄﾓｰﾄﾞ？
//		memset( cEditwk2, 0x4E, 8 );								// 上位端末IDの項目に【N】を設定
//	}else{
//		BCDtoASCII( Ryousyuu->Electron_data.Edy.Terminal_ID, (uchar*)cEditwk2, 4 );
//	}
//	Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//					cEditwk1,										// 文字列１：Edy印字項目
//					cEditwk2,										// 文字列２：上位端末ID印字ﾃﾞｰﾀ
//					pri_kind										// 印字先ﾌﾟﾘﾝﾀ
//				);
//
//	edit_cnt++;														// 印字行をｶｳﾝﾄｱｯﾌﾟ
//
//	return( edit_cnt );
//}
//
// /*[]-----------------------------------------------------------------------[]*/
// /*|		仕切り線印字ﾃﾞｰﾀ編集処理											|*/
// /*[]-----------------------------------------------------------------------[]*/
// /*|	MODULE NAME		:	Prn_Line_edit( pri_kind, Line_kind )				|*/
// /*|																			|*/
// /*|	PARAMETER		:	uchar	Line_kind	=	仕切り線種別				|*/
// /*|							0：＝＝＝＝										|*/
// /*|							1：========										|*/
// /*|							2：－－－－										|*/
// /*|							3：--------										|*/
// /*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ					|*/
// /*|							R_PRI  : ﾚｼｰﾄ									|*/
// /*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
// /*|																			|*/
// /*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
// /*|																			|*/
// /*[]-----------------------------------------------------------------------[]*/
// /*|	Author	:	T.Namioka													|*/
// /*|	Date	:	2006-11-07													|*/
// /*|	Update	:																|*/
// /*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
//uchar	Prn_Line_edit( uchar pri_kind, uchar Line_kind )
//{
//	uchar	edit_cnt=0;
//
//	PCMD_LEFT( pri_kind );
//	PrnStr( SikiriLine_Prn[Line_kind], pri_kind );	// 仕切り行印字ﾃﾞｰﾀ登録
//	edit_cnt++;	
//
//	return( edit_cnt );
//}
//
// /*[]---------------------------------------------------------------------------[]*/
// /*|		アラーム取引情報印字ﾃﾞｰﾀ編集処理										|*/
// /*[]---------------------------------------------------------------------------[]*/
// /*|	MODULE NAME		:	EDYARMPAYLOG_edit( *msg_data, pri_kind, *p_proc_data)	|*/
// /*|																				|*/
// /*|	PARAMETER		:	T_FrmLogPriReq2	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
// /*|																				|*/
// /*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
// /*|																				|*/
// /*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
// /*|																				|*/
// /*|	RETURN VALUE	:	void													|*/
// /*|																				|*/
// /*[]---------------------------------------------------------------------------[]*/
// /*|	Author	:	suzuki															|*/
// /*|	Date	:	2007-02-26														|*/
// /*|	Update	:																	|*/
// /*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
//void	EDYARMPAYLOG_edit( T_FrmLogPriReq2 *msg_data, 	uchar pri_kind, PRN_PROC_DATA *p_proc_data )
//{
//// NOTE:FT4000ではログの読み出しの仕組みが変更となったためFT4800ベースのソースでは使用不可
//// Edyが必要となった時改めてコーディングする必要があります。その為いったん中身を削除します
//}
//
// /*[]---------------------------------------------------------------------------[]*/
// /*|		アラーム取引情報印字ﾃﾞｰﾀ編集処理										|*/
// /*[]---------------------------------------------------------------------------[]*/
// /*|	MODULE NAME		:	Edy_ArnPayLog_edit( *msg_data, pri_kind, *p_proc_data)	|*/
// /*|																				|*/
// /*|	PARAMETER		:	T_FrmLogPriReq2	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
// /*|																				|*/
// /*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
// /*|																				|*/
// /*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
// /*|																				|*/
// /*|	RETURN VALUE	:	uchar													|*/
// /*|																				|*/
// /*[]---------------------------------------------------------------------------[]*/
// /*|	Author	:	suzuki															|*/
// /*|	Date	:	2007-02-26														|*/
// /*|	Update	:																	|*/
// /*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
//uchar	Edy_ArnPayLog_edit( edy_arm_log *pribuf, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
//{
//	uchar	ret = NO;			// 編集処理結果（戻り値）
//	uchar	edit_gyou = 0;		// 編集済み行数
//	uchar	edit_cnt;			// 編集行数ﾜｰｸ
//	uchar	edit_flg = YES;		// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）
//
//	char	data_id[19];		// 電子ﾏﾈｰ決算結果Idﾜｰｸ領域
//	ulong	work_id[2];			// 電子ﾏﾈｰ決算結果Idﾜｰｸ領域
//	uchar	work;				// ﾜｰｸ領域
//	uchar	i,k;				
//	uchar	primax;				// 印字最大項目数
//
//	work_id[0] = work_id[1] = 0;
//	primax = 10;
//
//	for( i=4;i<50;i++ ){									
//		work = 	(uchar)prm_get(COM_PRM, S_RTP, (short)i, 3, 1);	// 印字設定ﾘｰﾄﾞ
//		if( work == 1 )											// ﾛｺﾞ印字設定有り？
//			work_id[0] = 1;
//		else if( work == 2 )									// ﾍｯﾀﾞｰ印字設定有り？
//			work_id[1] = 1;
//
//		if( work_id[0] == 1 && work_id[1] == 1 )				// 両方設定済みの場合検索終了
//			break;
//	}
//
//
//	for( ; edit_flg ; ){	// 編集処理ﾙｰﾌﾟ
//
//			/*--------------------------------------*/
//			/*	１ﾌﾞﾛｯｸ編集最大行数ﾁｪｯｸ処理			*/
//			/*--------------------------------------*/
//		if( (edit_gyou > 0) && ( (edit_gyou + 1 ) > EDIT_GYOU_MAX) ){
//
//				//	１ﾌﾞﾛｯｸ編集の最大行数を超えてしまう場合
//
//				edit_flg = NO;														// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）
//		}
//
//		if( edit_flg == YES ){
//
//			// 対象設定項目番号に設定されている印字内容＝印字する　且つ　１ﾌﾞﾛｯｸ編集の最大行数を超えない場合
//
//			edit_cnt = 0;		// 編集行数ﾘｾｯﾄ
//
//			/*--------------------------------------*/
//			/*	１項目編集処理						*/
//			/*--------------------------------------*/
//			switch( p_proc_data->Prn_no ){		// 設定されている印字内容番号により各処理へ分岐
//
//				case	0:		// ＜表題＞編集処理
//					Prn_edit_space( pri_kind );								/*------	１行空白	------*/
//					Prn_edit_Title	(										// 表題（"アラーム情報"）印字ﾃﾞｰﾀ編集
//										"アラームレシート",
//										FONT_K_YOKOBAI,
//										pri_kind
//									);
//					edit_cnt += 2;
//					break;
//
//				case	1:		// ＜精算情報＞編集処理
//					KikaiNoSet(	cEditwk1,(ushort)pribuf->Kikai_no );		// 機械NO.編集
//					PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
//					PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
//					PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
//					PrnStr( cEditwk1, pri_kind );							// 印字ﾃﾞｰﾀ登録
//					edit_cnt++;
//					break;
//
//				case	2:		// ＜発券時刻＞編集処理
//					Prn_edit_Date3( cEditwk1, &pribuf->TOutTime );				// cEditwk1←精算時刻印字ﾃﾞｰﾀ
//					Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
//								"発行時刻",										// 文字列１："精算時刻"
//								cEditwk1,										// 文字列２：精算時刻印字ﾃﾞｰﾀ
//								pri_kind										// 印字先ﾌﾟﾘﾝﾀ
//							);
//					edit_cnt++;
//
//					break;
//
//				case	3:		// ＜車室番号＞編集処理
//					edit_cnt = Edy_ArmEdit_Hakkenj( pribuf, pri_kind, p_proc_data );	// 車室番号編集
//					if( edit_cnt == 0 )
//						edit_cnt = Edy_ArmEdit_Teiki( pribuf, pri_kind, p_proc_data );	// 定期番号編集
//
//					break;
//
//				case	4:		// ＜使用媒体名＞編集処理
//					// 支払い額　編集
//					sprintf( cMnydata,"%ld", pribuf->Pay_Ryo );			// 料金印字ﾃﾞｰﾀ編集
//					Camma_Set( (uchar *)cMnydata );									// ３桁区切り（”、”挿入）
//
//					Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//								Electron_prn[25],									// 文字列１："　Edy支払"
//								"",													// 文字列２：NULL
//								cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
//								Pri_Tanni[PriT_YEN],								// 文字列４：円
//								pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//							);
//					edit_cnt++;
//
//					break;
//
//				case	5:		// ＜使用媒体名＞編集処理
//						// 支払い前残額　編集
//					Prn_edit_Sitei1line	(											// ----- 印字ﾃﾞｰﾀ編集 -----
//											Electron_prn[28],						// 印字項目	："　Edy取引前残高"
//											pribuf->Pay_Befor,// 印字ﾃﾞｰﾀ	：支払い前残額
//											"",										// 単位１	：NULL
//											Pri_Tanni[PriT_YEN],					// 単位２	：円
//											pri_kind								// 印字先ﾌﾟﾘﾝﾀ
//										);
//
//					edit_cnt++;
//					break;
//
//				case	6:		// ＜EdyｶｰﾄﾞNo＞編集処理
//					sprintf( cEditwk1, Electron_prn[27]);							// cEditwk2に「Edy番号印字ﾃﾞｰﾀ」編集
//
//					if( pri_kind == R_PRI )
//						work = (uchar)prm_get(COM_PRM, S_SCA, 54, 1, 2);			// ﾚｼｰﾄ時ｶｰﾄﾞID印字設定ﾘｰﾄﾞ
//					else
//						work = (uchar)prm_get(COM_PRM, S_SCA, 54, 1, 3);			// ｼﾞｬｰﾅﾙ時ｶｰﾄﾞID印字設定ﾘｰﾄﾞ
//
//					for( i=0,k=0;i<8;i+=2,k+=5 ){									// 印字ﾃﾞｰﾀﾌﾞﾛｯｸ分ﾙｰﾌﾟ
//						BCDtoASCII( &pribuf->Edy_CardNo[i], (uchar*)(&data_id[k]), 2 );
//						switch( work ){												// 印字設定によって『*』表示する箇所を変更する
//							case 0:													// 先頭2文字＋末尾4文字を印字（残りは*表示）
//								break;
//							case 1:													// 先頭4文字を印字（残りは*表示）
//								if( i != 0 )
//									memset( &data_id[k], 0x2a, 4 );
//								break;
//							case 2:													// 末尾4文字を印字（残りは*表示）
//								if( i != 6)
//									memset( &data_id[k], 0x2a, 4 );
//								break;
//							default:
//								break;
//						}
//						if( i != 6 )
//							data_id[(k+4)] = 0x20;									// ｽﾍﾟｰｽを挿入
//					}
//
//					memset( cEditwk2, 0, sizeof( cEditwk2 ));
//					memcpy( cEditwk2, data_id, sizeof( data_id ));					// 編集したﾃﾞｰﾀを結合する
//
//					Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//									cEditwk1,										// 文字列１：Edy印字ﾃﾞｰﾀ
//									cEditwk2,										// 文字列２：EdyＮｏ．印字ﾃﾞｰﾀ
//									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
//								);
//					edit_cnt++;														// 印字行をｶｳﾝﾄｱｯﾌﾟ
//					break;
//
//
//				case	7:		// ＜Edy取引通番＞編集処理
//					if( prm_get(COM_PRM, S_SCA, 54, 1, 4) == 1 ){					// 取引通番印字指定あり？
//						sprintf( cEditwk1,"%s", Electron_prn[0] );					// 【取引通番】
//						memset( cEditwk2, 0, sizeof( cEditwk2 ));					
//						intoasl( (uchar*)cEditwk2, pribuf->Edy_Deal_num, 10 );
//						Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
//										cEditwk1,									// 文字列１：取引通番ﾍｯﾀﾞ印字ﾃﾞｰﾀ
//										cEditwk2,									// 文字列２：取引通番印字ﾃﾞｰﾀ
//										pri_kind									// 印字先ﾌﾟﾘﾝﾀ
//									);
//					}
//					edit_cnt++;														// 印字行をｶｳﾝﾄｱｯﾌﾟ
//					break;
//
//				case	8:		// ＜ｶｰﾄﾞ取引通番＞編集処理
//					if( prm_get(COM_PRM, S_SCA, 54, 1, 5) == 1 ){					// ｶｰﾄﾞ取引通番印字指定あり？
//						sprintf( cEditwk1,"%s", Electron_prn[1] );					// 【ｶｰﾄﾞ取引通番】
//						memset( cEditwk2, 0, sizeof( cEditwk2 ));
//						intoasl( (uchar*)cEditwk2, (ulong)pribuf->Card_Deal_num, 5 );
//
//						Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
//										cEditwk1,									// 文字列１：ｶｰﾄﾞ取引通番ﾍｯﾀﾞ印字ﾃﾞｰﾀ
//										cEditwk2,									// 文字列２：ｶｰﾄﾞ取引通番印字ﾃﾞｰﾀ
//										pri_kind									// 印字先ﾌﾟﾘﾝﾀ
//									);
//					}
//					edit_cnt++;														// 印字行をｶｳﾝﾄｱｯﾌﾟ
//					break;
//
//				case	9:		// ＜上位端末ID＞編集処理
//					sprintf( cEditwk1,"%s", Electron_prn[2] );						// 【上位端末ID】
//					memset( cEditwk2, 0, sizeof( cEditwk2 ));
//					BCDtoASCII( pribuf->High_Terminal_ID, (uchar*)cEditwk2, 4 );
//
//					Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//									cEditwk1,										// 文字列１：上位端末IDﾍｯﾀﾞ印字ﾃﾞｰﾀ
//									cEditwk2,										// 文字列２：上位端末ID印字ﾃﾞｰﾀ
//									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
//								);
//					edit_cnt++;														// 印字行をｶｳﾝﾄｱｯﾌﾟ
//					break;
//
//				default:		// その他（印字項目番号ｴﾗｰ）
//					break;
//			}
//			edit_gyou = (uchar)(edit_gyou + edit_cnt);	// 編集済み行数更新
//
//			if( (p_proc_data->Prn_no_data1 == 0) && (p_proc_data->Prn_no_data2 == 0) ){
//
//				// 項目番号の印字ﾃﾞｰﾀを全て編集終了した場合
//				p_proc_data->Prn_no++;					// 設定項目番号＋１
//			}
//		}
//
//		if( p_proc_data->Prn_no >= primax ){
//
//			// 設定項目番号の最後（13）まで印字内容編集終了の場合
//
//			edit_flg = NO;								// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）
//
//			p_proc_data->Prn_no			= 0;			// 編集処理ﾜｰｸﾘｾｯﾄ
//			p_proc_data->Prn_no_data1	= 0;
//			p_proc_data->Prn_no_data2	= 0;
//
//			ret = YES;									// 戻り値←１ﾃﾞｰﾀ編集終了
//
//			if( p_proc_data->Log_Edit == OFF ){
//				// 精算履歴印字でない場合
//				p_proc_data->Final = ON;				// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
//			}
//		}
//	}
//	return( ret );
//}
//
// /*[]-----------------------------------------------------------------------[]*/
// /*|		ｴﾗｰﾃﾞｰﾀ補足情報印字編集処理											|*/
// /*[]-----------------------------------------------------------------------[]*/
// /*|	MODULE NAME		:	Prn_Edy_Err_SupplEdit								|*/
// /*|																			|*/
// /*|	PARAMETER		:	uchar	Err_syu	=	ｴﾗｰ種別							|*/
// /*|						uchar	Err_cod	=   ｴﾗｰｺｰﾄﾞ							|*/
// /*|						uchar	errdat  =	補足情報						|*/
// /*|																			|*/
// /*[]-----------------------------------------------------------------------[]*/
// /*|	Author	:	T.Namioka													|*/
// /*|	Date	:	2006-11-07													|*/
// /*|	Update	:																|*/
// /*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
//void	Prn_Edy_Err_SupplEdit( uchar Err_syu, uchar Err_cod, uchar* errdat )
//{
//
//	if( Err_cod == 42 ){
//		sprintf(	prn_work,
//						"E%02d%02d-Edyｴﾗｰ応答受信(%02X,%02X,%02X,%02X)",
//						Err_syu,							// ｴﾗｰ種別（ﾓｼﾞｭｰﾙNo.）
//						Err_cod,							// ｴﾗｰｺｰﾄﾞ
//						*errdat,							// ｴﾗｰ内容
//						*(errdat+1),						// ｴﾗｰ内容
//						*(errdat+2),						// ｴﾗｰ内容
//						*(errdat+3)							// ｴﾗｰ内容
//		);
//	}else if( Err_cod == 43 ){
//		sprintf(	prn_work,
//						"E%02d%02d-Edyｾﾝﾀｰ通信失敗(%02X)",
//						Err_syu,							// ｴﾗｰ種別（ﾓｼﾞｭｰﾙNo.）
//						Err_cod,							// ｴﾗｰｺｰﾄﾞ
//						*(errdat+3)							// ｴﾗｰ内容
//		);
//
//	}
//}
//
// /*[]-----------------------------------------------------------------------[]*/
// /*|		Ｅｄｙ締め記録印字ﾃﾞｰﾀ編集											|*/
// /*[]-----------------------------------------------------------------------[]*/
// /*|	MODULE NAME		:	Edy_Shime_edit( *pribuf, pri_kind, pri_kind, *p_proc_data )	|*/
// /*|																			|*/
// /*|	PARAMETER		:	edy_arm_log	*pribuf	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ			|*/
// /*|																			|*/
// /*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
// /*|							R_PRI  : ﾚｼｰﾄ									|*/
// /*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
// /*|							RJ_PRI : ﾚｼｰﾄ&ｼﾞｬｰﾅﾙ							|*/
// /*|																			|*/
// /*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
// /*|																			|*/
// /*|	RETURN VALUE	:	void												|*/
// /*|																			|*/
// /*[]-----------------------------------------------------------------------[]*/
// /*|	Author	:	Suzuki														|*/
// /*|	Date	:	2007-02-26													|*/
// /*|	Update	:																|*/
// /*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
//void	Edy_Shime_edit( edy_shime_log *pribuf, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
//{
//
//	uchar	edit_gyou = 0;		// 編集済み行数
//	uchar	edit_cnt;			// 編集行数ﾜｰｸ
//	uchar	edit_flg = YES;		// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）
//
//	char	data_id[19];		// 電子ﾏﾈｰ決算結果Idﾜｰｸ領域
//	ulong	work_id[2];			// 電子ﾏﾈｰ決算結果Idﾜｰｸ領域
//	uchar	work;				// ﾜｰｸ領域
//	uchar	i;				
//	uchar	primax;				// 印字最大項目数
//	work_id[0] = work_id[1] = 0;
//
//	if( pri_kind == R_PRI )
//		primax = 15;
//	else				
//		primax = 13;
//
//	for( i=4;i<50;i++ ){									
//		work = 	(uchar)prm_get(COM_PRM, S_RTP, (short)i, 3, 1);	// 印字設定ﾘｰﾄﾞ
//		if( work == 1 )											// ﾛｺﾞ印字設定有り？
//			work_id[0] = 1;
//		else if( work == 2 )									// ﾍｯﾀﾞｰ印字設定有り？
//			work_id[1] = 1;
//
//		if( work_id[0] == 1 && work_id[1] == 1 )				// 両方設定済みの場合検索終了
//			break;
//	}
//
//
//	for( ; edit_flg ; ){	// 編集処理ﾙｰﾌﾟ
//
//			/*--------------------------------------*/
//			/*	１ﾌﾞﾛｯｸ編集最大行数ﾁｪｯｸ処理			*/
//			/*--------------------------------------*/
//		if( (edit_gyou > 0) && ( (edit_gyou + 1 ) > EDIT_GYOU_MAX) ){
//				//	１ﾌﾞﾛｯｸ編集の最大行数を超えてしまう場合
//				edit_flg = NO;														// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）
//		}
//
//		if( edit_flg == YES ){
//			// 対象設定項目番号に設定されている印字内容＝印字する　且つ　１ﾌﾞﾛｯｸ編集の最大行数を超えない場合
//			edit_cnt = 0;		// 編集行数ﾘｾｯﾄ
//
//			/*--------------------------------------*/
//			/*	１項目編集処理						*/
//			/*--------------------------------------*/
//			switch( p_proc_data->Prn_no ){		// 設定されている印字内容番号により各処理へ分岐
//
//				case	0:		// ＜未使用＞
//					break;
//
//				case	1:		// ＜ロゴ＞編集処理
//					if( CPrmSS[S_PRN][3] == 0 || CPrmSS[S_PRN][3] == 2 ){
//						if( work_id[0] == 1 ){
//							edit_cnt = Prn_edit_logo( pri_kind );
//						}
//					}
//					break;
//
//				case	2:		// ＜ヘッダー＞編集処理
//					if( CPrmSS[S_PRN][3] == 0 || CPrmSS[S_PRN][3] == 1 ){
//						if( work_id[1] == 1 ){
//							edit_cnt = Prn_edit_headhoot( PRI_HEADER, pri_kind );
//						}
//					}
//					break;
//
//				case	3:		// ＜表題＞編集処理
//
//					Prn_edit_Title	(										// 表題（"Ｅｄｙ締め記録"）印字ﾃﾞｰﾀ編集
//										"Ｅｄｙ締め記録",
//										FONT_K_YOKOBAI,
//										pri_kind
//									);
//					if( pri_kind == R_PRI ){
//						/*------	１行空白	------*/
//						Prn_edit_space( pri_kind );
//						edit_cnt++ ;
//					}
//					edit_cnt++ ;
//					break;
//
//				case	4:		// ＜時刻＞編集処理
//					Prn_edit_Date( cEditwk1, &pribuf->ShimeTime );
//					PrnStr( cEditwk1, pri_kind );								// 印字日時　印字ﾃﾞｰﾀ登録
//					edit_cnt++;
//					break;
//
//				case	5:		// １行空白
//					if( pri_kind == R_PRI ){								// ﾚｼｰﾄﾌﾟﾘﾝﾀ時のみ１行空行
//						Prn_edit_space( pri_kind );
//						edit_cnt++;
//					}
//					break;
//
//				case	6:		// ＜上位端末ID＞編集処理
//					memset( data_id, 0, sizeof( data_id ));
//					BCDtoASCII( pribuf->High_Terminal_ID, (uchar*)data_id, 4 );
//					Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//								"上位端末ID",										// 文字列１：
//								"",													// 文字列２：NULL
//								data_id,											// 文字列３：印字ﾃﾞｰﾀ
//								"",													// 文字列４：NULL
//								pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//							);
//					edit_cnt++;														// 印字行をｶｳﾝﾄｱｯﾌﾟ
//					break;
//
//				case	7:		// ＜Edy利用件数＞編集処理
//					sprintf( cMnydata,"%ld", pribuf->Electron_edy_cnt );
//					Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//								"Edy利用件数",										// 文字列１：
//								"",													// 文字列２：NULL
//								cMnydata,											// 文字列３：印字ﾃﾞｰﾀ
//								Pri_Tanni[PriT_KEN],								// 文字列４：件
//								pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//							);
//					edit_cnt++;
//					break;
//
//				case	8:		// ＜Edy利金額＞編集処理
//					sprintf( cMnydata,"%ld", pribuf->Electron_edy_ryo );
//					Camma_Set( (uchar *)cMnydata );									// ３桁区切り（”、”挿入）
//					Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//								"Edy利用金額",											// 文字列１："Edy支払"
//								"",													// 文字列２：NULL
//								cMnydata,											// 文字列３：印字ﾃﾞｰﾀ
//								Pri_Tanni[PriT_YEN],								// 文字列４：円
//								pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//							);
//					edit_cnt++;
//					break;
//
//				case	9:		// ＜ｱﾗｰﾑ利用件数＞編集処理
//					if( pribuf->Electron_Arm_cnt > 0 ) {
//						sprintf( cMnydata,"%ld", pribuf->Electron_Arm_cnt );
//						Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
//									"ｱﾗｰﾑ利用件数",									// 文字列１：
//									"",												// 文字列２：NULL
//									cMnydata,										// 文字列３：印字ﾃﾞｰﾀ
//									Pri_Tanni[PriT_KEN],							// 文字列４：件
//									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
//								);
//					edit_cnt++;
//					}
//					break;
//
//				case	10:		// ＜利用ｱﾗｰﾑ金額＞編集処理
//					if( pribuf->Electron_Arm_cnt > 0 ) {
//						sprintf( cMnydata,"%ld", pribuf->Electron_Arm_ryo );
//						Camma_Set( (uchar *)cMnydata );								// ３桁区切り（”、”挿入）
//						Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
//									"ｱﾗｰﾑ利用金額",									// 文字列１：
//									"",												// 文字列２：NULL
//									cMnydata,										// 文字列３：印字ﾃﾞｰﾀ
//									Pri_Tanni[PriT_YEN],							// 文字列４：円
//									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
//								);
//					edit_cnt++;
//					}
//					break;
//
//				case	11:		// ＜締め結果＞編集処理
//					if( pribuf->Shime_OKorNG == 0 ) {
//						sprintf( data_id, "%s", "成功" );
//					} else {
//						sprintf( data_id, "%s", "失敗" );
//					}
//					Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//								"締め結果",											// 文字列１：
//								"",													// 文字列２：NULL
//								"",													// 文字列３：NULL
//								data_id,											// 文字列４：締め結果
//								pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//							);
//					edit_cnt++;
//					break;
//
//				case	12:		// １行空白
//					if( pribuf->Shime_OKorNG != 0 ) {								// 締め異常終了時
//						Prn_edit_space( pri_kind );
//						edit_cnt++;
//					}
//					break;
//
//				case	13:		// １行空白
//					if( pribuf->Shime_OKorNG != 0 ) {								// 締め異常終了時
//						Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//									" ※もう一度締めを実行して下さい   ",				// 文字列１：
//									"",													// 文字列２：NULL
//									"",													// 文字列３：NULL
//									"",													// 文字列４：NULL
//									pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//								);
//					edit_cnt++;
//					}
//					break;
//
//				default:		// その他（印字項目番号ｴﾗｰ）
//					break;
//			}
//			edit_gyou = (uchar)(edit_gyou + edit_cnt);	// 編集済み行数更新
//
//			if( (p_proc_data->Prn_no_data1 == 0) && (p_proc_data->Prn_no_data2 == 0) ){
//
//				// 項目番号の印字ﾃﾞｰﾀを全て編集終了した場合
//				p_proc_data->Prn_no++;					// 設定項目番号＋１
//			}
//		}
//
//		if( p_proc_data->Prn_no >= primax ){
//
//			// 設定項目番号の最後（５０）まで印字内容編集終了の場合
//
//			edit_flg = NO;								// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）
//
//			p_proc_data->Prn_no			= 0;			// 編集処理ﾜｰｸﾘｾｯﾄ
//			p_proc_data->Prn_no_data1	= 0;
//			p_proc_data->Prn_no_data2	= 0;
//
//			if( p_proc_data->Log_Edit == OFF ){
//				// 精算履歴印字でない場合
//				p_proc_data->Final = ON;				// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
//			}
//		}
//	}
//}
//
// /*[]---------------------------------------------------------------------------[]*/
// /*|		Ｅｄｙ締め記録情報印字ﾃﾞｰﾀ編集処理										|*/
// /*[]---------------------------------------------------------------------------[]*/
// /*|	MODULE NAME		:	EDYSHIMEPAYLOG_edit( *msg_data, pri_kind, *p_proc_data)	|*/
// /*|																				|*/
// /*|	PARAMETER		:	T_FrmLogPriReq2	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
// /*|																				|*/
// /*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
// /*|																				|*/
// /*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
// /*|																				|*/
// /*|	RETURN VALUE	:	void													|*/
// /*|																				|*/
// /*[]---------------------------------------------------------------------------[]*/
// /*|	Author	:	suzuki															|*/
// /*|	Date	:	2007-02-26														|*/
// /*|	Update	:																	|*/
// /*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
//void	EDYSHIMELOG_edit( T_FrmLogPriReq2 *msg_data, 	uchar pri_kind, PRN_PROC_DATA *p_proc_data )
//{
//// NOTE:FT4000ではログの読み出しの仕組みが変更となったためFT4800ベースのソースでは使用不可
//// Edyが必要となった時改めてコーディングする必要があります。その為いったん中身を削除します
//}
//
// /*[]---------------------------------------------------------------------------[]*/
// /*|		Ｅｄｙ締め記録情報印字ﾃﾞｰﾀ編集処理										|*/
// /*[]---------------------------------------------------------------------------[]*/
// /*|	MODULE NAME		:	Edy_ShimeLog_edit( *msg_data, pri_kind, *p_proc_data)|	|*/
// /*|																				|*/
// /*|	PARAMETER		:	T_FrmLogPriReq2	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
// /*|																				|*/
// /*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
// /*|																				|*/
// /*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
// /*|																				|*/
// /*|	RETURN VALUE	:	uchar													|*/
// /*|																				|*/
// /*[]---------------------------------------------------------------------------[]*/
// /*|	Author	:	suzuki															|*/
// /*|	Date	:	2007-02-26														|*/
// /*|	Update	:																	|*/
// /*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
//uchar	Edy_ShimeLog_edit( edy_shime_log *pribuf, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
//{
//	uchar	ret = NO;			// 編集処理結果（戻り値）
//	uchar	edit_gyou = 0;		// 編集済み行数
//	uchar	edit_cnt;			// 編集行数ﾜｰｸ
//	uchar	edit_flg = YES;		// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）
//
//	char	data_id[19];		// 電子ﾏﾈｰ決算結果Idﾜｰｸ領域
//	ulong	work_id[2];			// 電子ﾏﾈｰ決算結果Idﾜｰｸ領域
//	uchar	work;				// ﾜｰｸ領域
//	uchar	i;				
//	uchar	primax;				// 印字最大項目数
//
//	work_id[0] = work_id[1] = 0;
//	primax = 10;
//
//	for( i=4;i<50;i++ ){									
//		work = 	(uchar)prm_get(COM_PRM, S_RTP, (short)i, 3, 1);	// 印字設定ﾘｰﾄﾞ
//		if( work == 1 )											// ﾛｺﾞ印字設定有り？
//			work_id[0] = 1;
//		else if( work == 2 )									// ﾍｯﾀﾞｰ印字設定有り？
//			work_id[1] = 1;
//
//		if( work_id[0] == 1 && work_id[1] == 1 )				// 両方設定済みの場合検索終了
//			break;
//	}
//
//
//	for( ; edit_flg ; ){	// 編集処理ﾙｰﾌﾟ
//
//			/*--------------------------------------*/
//			/*	１ﾌﾞﾛｯｸ編集最大行数ﾁｪｯｸ処理			*/
//			/*--------------------------------------*/
//		if( (edit_gyou > 0) && ( (edit_gyou + 1 ) > EDIT_GYOU_MAX) ){
//
//				//	１ﾌﾞﾛｯｸ編集の最大行数を超えてしまう場合
//
//				edit_flg = NO;														// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）
//		}
//
//		if( edit_flg == YES ){
//
//			// 対象設定項目番号に設定されている印字内容＝印字する　且つ　１ﾌﾞﾛｯｸ編集の最大行数を超えない場合
//
//			edit_cnt = 0;		// 編集行数ﾘｾｯﾄ
//
//			/*--------------------------------------*/
//			/*	１項目編集処理						*/
//			/*--------------------------------------*/
//			switch( p_proc_data->Prn_no ){		// 設定されている印字内容番号により各処理へ分岐
//
//				case	0:		// ＜表題＞編集処理
//					Prn_edit_space( pri_kind );								/*------	１行空白	------*/
//					Prn_edit_Title	(										// 表題（"Ｅｄｙ締め記録"）印字ﾃﾞｰﾀ編集
//										"Ｅｄｙ締め記録",
//										FONT_K_YOKOBAI,
//										pri_kind
//									);
//					edit_cnt += 2;
//					break;
//
//				case	1:		// ＜時刻＞編集処理
//					Prn_edit_Date( cEditwk1, &pribuf->ShimeTime );
//					PrnStr( cEditwk1, pri_kind );								// 印字日時　印字ﾃﾞｰﾀ登録
//					edit_cnt++;
//					break;
//
//				case	2:		// ＜上位端末ID＞編集処理
//					memset( data_id, 0, sizeof( data_id ));
//					BCDtoASCII( pribuf->High_Terminal_ID, (uchar*)data_id, 4 );
//					Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//								"上位端末ID",										// 文字列１：
//								"",													// 文字列２：NULL
//								data_id,											// 文字列３：印字ﾃﾞｰﾀ
//								"",													// 文字列４：NULL
//								pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//							);
//					edit_cnt++;														// 印字行をｶｳﾝﾄｱｯﾌﾟ
//					break;
//
//				case	3:		// ＜Edy利用件数＞編集処理
//					sprintf( cMnydata,"%ld", pribuf->Electron_edy_cnt );
//					Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//								"Edy利用件数",										// 文字列１：
//								"",													// 文字列２：NULL
//								cMnydata,											// 文字列３：印字ﾃﾞｰﾀ
//								Pri_Tanni[PriT_KEN],								// 文字列４：件
//								pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//							);
//					edit_cnt++;
//					break;
//
//				case	4:		// ＜Edy利金額＞編集処理
//					sprintf( cMnydata,"%ld", pribuf->Electron_edy_ryo );
//					Camma_Set( (uchar *)cMnydata );									// ３桁区切り（”、”挿入）
//					Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//								"Edy利用金額",											// 文字列１："Edy支払"
//								"",													// 文字列２：NULL
//								cMnydata,											// 文字列３：印字ﾃﾞｰﾀ
//								Pri_Tanni[PriT_YEN],								// 文字列４：円
//								pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//							);
//					edit_cnt++;
//					break;
//
//				case	5:		// ＜ｱﾗｰﾑ利用件数＞編集処理
//					if( pribuf->Electron_Arm_cnt > 0 ) {
//						sprintf( cMnydata,"%ld", pribuf->Electron_Arm_cnt );
//						Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
//									"ｱﾗｰﾑ利用件数",									// 文字列１：
//									"",												// 文字列２：NULL
//									cMnydata,										// 文字列３：印字ﾃﾞｰﾀ
//									Pri_Tanni[PriT_KEN],							// 文字列４：件
//									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
//								);
//					edit_cnt++;
//					}
//					break;
//
//				case	6:		// ＜ｱﾗｰﾑ利用金額＞編集処理
//					if( pribuf->Electron_Arm_cnt > 0 ) {
//						sprintf( cMnydata,"%ld", pribuf->Electron_Arm_ryo );
//						Camma_Set( (uchar *)cMnydata );								// ３桁区切り（”、”挿入）
//						Str_Set2(													// -----印字ﾃﾞｰﾀ編集-----
//									"ｱﾗｰﾑ利用金額",									// 文字列１：
//									"",												// 文字列２：NULL
//									cMnydata,										// 文字列３：印字ﾃﾞｰﾀ
//									Pri_Tanni[PriT_YEN],							// 文字列４：円
//									pri_kind										// 印字先ﾌﾟﾘﾝﾀ
//								);
//					edit_cnt++;
//					}
//					break;
//
//				case	7:		// ＜締め結果＞編集処理
//					if( pribuf->Shime_OKorNG == 0 ) {
//						sprintf( data_id, "%s", "成功" );
//					} else {
//						sprintf( data_id, "%s", "失敗" );
//					}
//					Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//								"締め結果",											// 文字列１：
//								"",													// 文字列２：NULL
//								"",													// 文字列３：NULL
//								data_id,											// 文字列４：締め結果
//								pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//							);
//					edit_cnt++;
//					break;
//
//				default:		// その他（印字項目番号ｴﾗｰ）
//					break;
//			}
//			edit_gyou = (uchar)(edit_gyou + edit_cnt);	// 編集済み行数更新
//
//			if( (p_proc_data->Prn_no_data1 == 0) && (p_proc_data->Prn_no_data2 == 0) ){
//
//				// 項目番号の印字ﾃﾞｰﾀを全て編集終了した場合
//				p_proc_data->Prn_no++;					// 設定項目番号＋１
//			}
//		}
//
//		if( p_proc_data->Prn_no >= primax ){
//
//			// 設定項目番号の最後（13）まで印字内容編集終了の場合
//
//			edit_flg = NO;								// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）
//
//			p_proc_data->Prn_no			= 0;			// 編集処理ﾜｰｸﾘｾｯﾄ
//			p_proc_data->Prn_no_data1	= 0;
//			p_proc_data->Prn_no_data2	= 0;
//
//			ret = YES;									// 戻り値←１ﾃﾞｰﾀ編集終了
//
//			if( p_proc_data->Log_Edit == OFF ){
//				// 精算履歴印字でない場合
//				p_proc_data->Final = ON;				// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
//			}
//		}
//	}
//	return( ret );
//}
//#endif
// MH321800(E) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)

/*[]-----------------------------------------------------------------------[]*/
/*|		電子媒体領収証印字"新"編集関数										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Electron_Ryosyu_Edit								|*/
/*|																			|*/
/*|	PARAMETER		:	Receipt_data *Ryousyuu								|*/
/*|					:	uchar pri_kind										|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数							|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	T.Namioka													|*/
/*|	Date	:	2008-07-29													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2006 AMANO Corp.----[]*/
uchar	Electron_Ryosyu_Edit( Receipt_data *Ryousyuu, uchar pri_kind )
{
	uchar	edit_cnt=0;
	uchar	work;														// ﾜｰｸ領域
	char	data_id[20];												// 電子ﾏﾈｰ決算結果Idﾜｰｸ領域

	uchar	i,k;				
	
	if( pri_kind == R_PRI )
		work = (uchar)prm_get(COM_PRM, S_SCA, 5, 1, 1);					// ﾚｼｰﾄ時ｶｰﾄﾞID印字設定ﾘｰﾄﾞ
	else
		work = (uchar)prm_get(COM_PRM, S_SCA, 5, 1, 2);					// ｼﾞｬｰﾅﾙ時ｶｰﾄﾞID印字設定ﾘｰﾄﾞ

	memset( data_id, 0, sizeof( data_id ));					

	switch( Ryousyuu->Electron_data.Suica.e_pay_kind ){
		case SUICA_USED:
		case PASMO_USED:
		case ICOCA_USED:
		case ICCARD_USED:
			sprintf( cEditwk1,"%s", "カード番号" );							// 「カード番号」
			for( i=0,k=0;i<16;i+=4 ){											// 印字ﾃﾞｰﾀﾌﾞﾛｯｸ分ﾙｰﾌﾟ
				memcpy( &data_id[k], &Ryousyuu->Electron_data.Suica.Card_ID[i],4);// 先頭の４Byte分をﾜｰｸ領域に格納
				if( k != 15)													// 最後のﾃﾞｰﾀﾌﾞﾛｯｸでない場合
					data_id[(k+4)] = 0x20;										// ｽﾍﾟｰｽを挿入

				switch( work ){													// 印字設定によって『*』表示する箇所を変更する
					case 0:														// 先頭2文字＋末尾4文字を印字（残りは*表示）
						if( k == 0 )
							data_id[2] = data_id[3] = 0x2a;
						else if( k != 15 )
							data_id[k] = data_id[(k+1)] = data_id[(k+2)] = data_id[(k+3)] = 0x2a;
						break;
					case 1:														// 先頭4文字を印字（残りは*表示）
						if( k != 0 )
							data_id[k] = data_id[(k+1)] = data_id[(k+2)] = data_id[(k+3)] = 0x2a;

						break;
					case 2:														// 末尾4文字を印字（残りは*表示）
						if( k != 15)
							data_id[k] = data_id[(k+1)] = data_id[(k+2)] = data_id[(k+3)] = 0x2a;
					
						break;
					case 3:														// 全て印字（残りは*表示）
					default:
						break;
				}
				k+=5;															// 編集ﾎﾟｲﾝﾀを更新
			}

			Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,											// 文字列１："カード番号"
							data_id,											// 文字列２：カード番号印字ﾃﾞｰﾀ
							pri_kind											// 印字先ﾌﾟﾘﾝﾀ
						);
			edit_cnt++;															// 印字行をｶｳﾝﾄｱｯﾌﾟ
				// 支払い前残額　編集
			Prn_edit_Sitei1line	(											// ----- 印字ﾃﾞｰﾀ編集 -----
									"　支払い前残額",						// 印字項目	："　支払い前残額"
									Ryousyuu->Electron_data.Suica.pay_befor,// 印字ﾃﾞｰﾀ	：支払い前残額
									"",										// 単位１	：NULL
									Pri_Tanni[PriT_YEN],					// 単位２	：円
									pri_kind								// 印字先ﾌﾟﾘﾝﾀ
								);
			edit_cnt++;														// 印字行をｶｳﾝﾄｱｯﾌﾟ

			// 支払い額　編集
			sprintf( cMnydata,"%ld", Ryousyuu->Electron_data.Suica.pay_ryo );			// 料金印字ﾃﾞｰﾀ編集
			Camma_Set( (uchar *)cMnydata );									// ３桁区切り（”、”挿入）

			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
						"　カード支払額",									// 文字列１："　カード支払い"
						"",													// 文字列２：NULL
						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
						Pri_Tanni[PriT_YEN],								// 文字列４：円
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;														// 印字行をｶｳﾝﾄｱｯﾌﾟ

			// 支払い後残額　編集
			Prn_edit_Sitei1line	(											// ----- 印字ﾃﾞｰﾀ編集 -----
									"　カード残額",							// 印字項目	："　カード残額"
									Ryousyuu->Electron_data.Suica.pay_after,// 印字ﾃﾞｰﾀ	：支払い後残額
									"",										// 単位１	：NULL
									Pri_Tanni[PriT_YEN],					// 単位２	：円
									pri_kind								// 印字先ﾌﾟﾘﾝﾀ
								);
			edit_cnt++;														// 印字行をｶｳﾝﾄｱｯﾌﾟ

			break;
// MH321800(S) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
//#ifdef	FUNCTION_MASK_EDY 
//		case EDY_USED:
//			edit_cnt = Edy_Ryosyu_Edit( Ryousyuu, pri_kind );
//			break;
//#endif
// MH321800(E) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)

	}
	return( edit_cnt );
}

// MH321800(S) hosoda ICクレジット対応
//[]----------------------------------------------------------------------[]
///	@brief			電子媒体領収証印字"新"編集関数 (決済リーダ)
//[]----------------------------------------------------------------------[]
///	@param[in]		*Ryousyuu		精算データ
///	@param[in]		pri_kind		ﾌﾟﾘﾝﾀ種別<br>
///	@param[in]		p_proc_data	:	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			edit_cnt
///	@author			hosoda
///	@attention		None
///	@note			none
//[]----------------------------------------------------------------------[]
///	@date			Create	:	2019/02/06<br>
///					Update	:	
//[]------------------------------------- Copyright(C) 2019 AMANO Corp.---[]
uchar	ElectronEc_Ryosyu_Edit(Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
// 領収証印字設定=144で決済リーダ使用時はこの関数
	uchar			edit_cnt;
// MH810103 MHUT40XX(S) Edy・WAON対応
//	ulong			wk;
// MH810103 MHUT40XX(E) Edy・WAON対応
	int				use_log;	// 1=利用明細印字
	Electron_info	*einfo;
	uchar			ID_check[20];// 配列要素比較用
// MH810103 GG119202(S) 交通系ブランドの決済結果データフォーマット修正
	ushort			i, j;
// MH810103 GG119202(E) 交通系ブランドの決済結果データフォーマット修正
// MH810105(S) MH364301 QRコード決済対応
	struct			clk_rec	wkClk;
// MH810105(E) MH364301 QRコード決済対応

	use_log = (p_proc_data->Log_Edit != 0)? 1 : 0;
	einfo = &Ryousyuu->Electron_data;
	memset( &ID_check, 0, sizeof( ID_check) );	// 比較用配列を0で埋める

	edit_cnt = 0;
	switch (einfo->Ec.e_pay_kind) {
	case EC_EDY_USED:
		// 見出し
// MH810103 MHUT40XX(S) Edy・WAON対応
//		PrnStr(ElectronEc_prn[4], pri_kind);
		Prn_edit_Title( ElectronEc_prn[4], FONT_K_NML, pri_kind );
// MH810103 MHUT40XX(E) Edy・WAON対応
		edit_cnt++;

// MH810103 MHUT40XX(S) Edy・WAON対応
		if (pri_kind == J_PRI) {
			// 加盟店名はジャーナルのみ印字
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, einfo->Ec.Brand.Edy.Kamei, sizeof(einfo->Ec.Brand.Edy.Kamei));
			Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,												// 文字列１：加盟店名
						"",														// 文字列２：NULL
						pri_kind												// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
		}
// MH810103 MHUT40XX(E) Edy・WAON対応

		// 取引前残高
// MH810103 GG119202(S) 電子マネーみなし決済印字フォーマット変更対応
//		sprintf(cMnydata, "%ld", einfo->Ec.pay_befor);							// 料金印字ﾃﾞｰﾀ編集
		// みなし決済時は*印字
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
// MH810103 MHUT40XX(S) Edy・WAON対応
//			sprintf( cMnydata, "******" );										// 料金印字ﾃﾞｰﾀ編集
			sprintf( cMnydata, "*****" );										// 料金印字ﾃﾞｰﾀ編集
// MH810103 MHUT40XX(E) Edy・WAON対応
		} else {
			sprintf(cMnydata, "%ld", einfo->Ec.pay_befor);						// 料金印字ﾃﾞｰﾀ編集
		}
// MH810103 GG119202(E) 電子マネーみなし決済印字フォーマット変更対応
		Camma_Set((uchar*)cMnydata);											// ３桁区切り（”、”挿入）
		Str_Set2(																// -----印字ﾃﾞｰﾀ編集-----
					Electron_prn[24],											// 文字列１："Edy預り"
					"",															// 文字列２：NULL
					cMnydata,													// 文字列３：料金印字ﾃﾞｰﾀ
					Pri_Tanni[PriT_YEN],										// 文字列４：円
					pri_kind													// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// 支払額
// MH810103 MHUT40XX(S) Edy・WAON対応
//		sprintf(cMnydata, "%ld", einfo->Ec.pay_ryo);							// 料金印字ﾃﾞｰﾀ編集
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if (Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement != 0 &&
//			Ryousyuu->WFlag != 0) {
		if (Ryousyuu->chuusi == 1) {
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			// 決済精算中止時は支払額をマスクする
			sprintf(cMnydata, "*****");											// 料金印字ﾃﾞｰﾀ編集
		}
		else {
			sprintf(cMnydata, "%ld", einfo->Ec.pay_ryo);						// 料金印字ﾃﾞｰﾀ編集
		}
// MH810103 MHUT40XX(E) Edy・WAON対応
		Camma_Set((uchar*)cMnydata);											// ３桁区切り（”、”挿入）
		Str_Set2(																// -----印字ﾃﾞｰﾀ編集-----
					Electron_prn[25],											// 文字列１："Edy支払"
					"",															// 文字列２：NULL
					cMnydata,													// 文字列３：料金印字ﾃﾞｰﾀ
					Pri_Tanni[PriT_YEN],										// 文字列４：円
					pri_kind													// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// 取引後残高
// MH810103 GG119202(S) 電子マネーみなし決済印字フォーマット変更対応
//		sprintf(cMnydata, "%ld", einfo->Ec.pay_after);							// 料金印字ﾃﾞｰﾀ編集
		// みなし決済時は*印字
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
// MH810103 MHUT40XX(S) Edy・WAON対応
//			sprintf( cMnydata, "******" );										// 料金印字ﾃﾞｰﾀ編集
			sprintf( cMnydata, "*****" );										// 料金印字ﾃﾞｰﾀ編集
// MH810103 MHUT40XX(E) Edy・WAON対応
		} else {
			sprintf(cMnydata, "%ld", einfo->Ec.pay_after);						// 料金印字ﾃﾞｰﾀ編集
		}
// MH810103 GG119202(E) 電子マネーみなし決済印字フォーマット変更対応
		Camma_Set((uchar*)cMnydata);											// ３桁区切り（”、”挿入）
		Str_Set2(																// -----印字ﾃﾞｰﾀ編集-----
					Electron_prn[26],											// 文字列１："Edy残高"
					"",															// 文字列２：NULL
					cMnydata,													// 文字列３：料金印字ﾃﾞｰﾀ
					Pri_Tanni[PriT_YEN],										// 文字列４：円
					pri_kind													// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// カード番号
// MH810103 MHUT40XX(S) Edy・WAON対応
//		memset(cEditwk2, 0x20, sizeof(cEditwk2));
// MH810103 MHUT40XX(E) Edy・WAON対応
// MH810103 GG119202(S) 電子マネーみなし決済印字フォーマット変更対応
//		if ((pri_kind == J_PRI)
//		||	(use_log != 0)) {
//		// ジャーナル印字/利用明細印字
//			memcpy(&cEditwk2[0], &einfo->Ec.Card_ID[0], 4);
//			memcpy(&cEditwk2[5], &einfo->Ec.Card_ID[4], 4);
//			memcpy(&cEditwk2[10], &einfo->Ec.Card_ID[8], 4);
//			memcpy(&cEditwk2[15], &einfo->Ec.Card_ID[12], 4);
//			cEditwk2[19] = '\0';	// stopper
//		} else {
//		// レシート印字
//			sprintf(cEditwk2, "**** **** **** ****");
//			memcpy(&cEditwk2[15], &einfo->Ec.Card_ID[12], 4);
//			cEditwk2[19] = '\0';	// stopper
//		}
// MH810103 MHUT40XX(S) Edy・WAON対応
//		// みなし決済時は*印字
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
//			sprintf(cEditwk2, "**** **** **** ****");
//			cEditwk2[19] = '\0';	// stopper
//		} else {
//			if ((pri_kind == J_PRI)
//			||	(use_log != 0)) {
//			// ジャーナル印字/利用明細印字
//				memcpy(&cEditwk2[0], &einfo->Ec.Card_ID[0], 4);
//				memcpy(&cEditwk2[5], &einfo->Ec.Card_ID[4], 4);
//				memcpy(&cEditwk2[10], &einfo->Ec.Card_ID[8], 4);
//				memcpy(&cEditwk2[15], &einfo->Ec.Card_ID[12], 4);
//				cEditwk2[19] = '\0';	// stopper
//			} else {
//			// レシート印字
//				sprintf(cEditwk2, "**** **** **** ****");
//				memcpy(&cEditwk2[15], &einfo->Ec.Card_ID[12], 4);
//				cEditwk2[19] = '\0';	// stopper
//			}
//		}
		memset(cEditwk2, 0, sizeof(cEditwk2));
		// みなし決済時は*印字
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk2, "**** **** **** ****" );
		} else {
			// カード番号を4桁ずつで区切る
			for (i = 0, j = 0; i < 4; i++) {
				memcpy(&cEditwk2[j], &einfo->Ec.Card_ID[i*4], 4);
				if (i < 3) {
					j += 4;
					cEditwk2[j++] = ' ';
				}
			}
		}
// MH810103 MHUT40XX(E) Edy・WAON対応
// MH810103 GG119202(E) 電子マネーみなし決済印字フォーマット変更対応
		Str_Set1(																// -----印字ﾃﾞｰﾀ編集-----
					Electron_prn[27],											// 文字列１：Edy番号
					cEditwk2,													// 文字列２：Edy番号印字ﾃﾞｰﾀ
					pri_kind													// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

// MH810103 GG119202(S) 電子マネーみなし決済印字フォーマット変更対応
//		if ((pri_kind == J_PRI)
//		||	(use_log != 0)) {
//		// ジャーナル印字/利用明細印字
// MH810103 MHUT40XX(S) Edy・WAON対応
//		if (( (pri_kind == J_PRI) || (use_log != 0) ) && 
//			Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 0 ) {
//		// ジャーナル印字/利用明細印字であり、みなし決済ではない
		if ( (pri_kind == J_PRI) || (use_log != 0) ) {
		// ジャーナル印字/利用明細印字
// MH810103 MHUT40XX(E) Edy・WAON対応
// MH810103 GG119202(E) 電子マネーみなし決済印字フォーマット変更対応
			// 取引通番
			memset(cEditwk2, 0, sizeof(cEditwk2));
// MH810103 MHUT40XX(S) Edy・WAON対応
//			intoasl((uchar*)cEditwk2, einfo->Ec.Brand.Edy.DealNo, 10);			// 取引通番（10進数：10桁、0パディング）
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
				sprintf( cEditwk2, "**********" );
			}
			else {
				memcpy(cEditwk2, einfo->Ec.Brand.Edy.DealNo, 10);				// Edy取引通番（10桁）
			}
// MH810103 MHUT40XX(E) Edy・WAON対応
			Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
						Electron_prn[0],										// 文字列１：Edy取引通番
						cEditwk2,												// 文字列２：Edy取引通番印字ﾃﾞｰﾀ
						pri_kind												// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;

			// カード取引通番
			memset(cEditwk2, 0, sizeof(cEditwk2));
// MH810103 MHUT40XX(S) Edy・WAON対応
//			intoasl((uchar*)cEditwk2, einfo->Ec.Brand.Edy.CardDealNo, 5);		// カード取引通番（10進数：5桁、0パディング）
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
				sprintf( cEditwk2, "*****" );
			}
			else {
				memcpy(cEditwk2, einfo->Ec.Brand.Edy.CardDealNo, 5);			// カード取引通番（5桁）
			}
// MH810103 MHUT40XX(E) Edy・WAON対応
			Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
						Electron_prn[1],										// 文字列１：カード取引通番
						cEditwk2,												// 文字列２：カード取引通番印字ﾃﾞｰﾀ
						pri_kind												// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
		}

// MH810103 GG119202(S) 電子マネーみなし決済印字フォーマット変更対応
//		if( memcmp(einfo->Ec.Brand.Edy.TerminalNo, ID_check, sizeof(einfo->Ec.Brand.Edy.TerminalNo)) != 0 ){
//			// 上位端末ID
//			memset(cEditwk2, 0, sizeof(cEditwk2));
//			sprintf(cEditwk2, "%08lX%08lX", einfo->Ec.Brand.Edy.TerminalNo[0]		// 上位端末ID①（16進数：16桁、0パディング）
//										,einfo->Ec.Brand.Edy.TerminalNo[1]);		// 上位端末ID②
//			Str_Set1(																// -----印字ﾃﾞｰﾀ編集-----
//						Electron_prn[2],											// 文字列１：上位端末ID
//						cEditwk2,													// 文字列２：上位端末ID印字ﾃﾞｰﾀ
//						pri_kind													// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//		}
		// みなし決済時は*印字
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			memset( cEditwk2, 0, sizeof(cEditwk2) );
// MH810103 MHUT40XX(S) Edy・WAON対応
//			sprintf( cEditwk2, "****************" );							// 上位端末ID（16進数：16桁）
			sprintf( cEditwk2, "********" );									// 上位端末ID（8桁）
// MH810103 MHUT40XX(E) Edy・WAON対応
			Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
						Electron_prn[2],										// 文字列１：上位端末ID
						cEditwk2,												// 文字列２：上位端末ID印字ﾃﾞｰﾀ
						pri_kind												// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
		} else {
			if( memcmp(einfo->Ec.Brand.Edy.TerminalNo, ID_check, sizeof(einfo->Ec.Brand.Edy.TerminalNo)) != 0 ){
				// 上位端末ID
				memset(cEditwk2, 0, sizeof(cEditwk2));
// MH810103 MHUT40XX(S) Edy・WAON対応
//				sprintf(cEditwk2, "%08lX%08lX", einfo->Ec.Brand.Edy.TerminalNo[0]		// 上位端末ID①（16進数：16桁、0パディング）
//											,einfo->Ec.Brand.Edy.TerminalNo[1]);		// 上位端末ID②
				memcpy(cEditwk2, einfo->Ec.Brand.Edy.TerminalNo, 8);					// 上位端末ID（8桁）
// MH810103 MHUT40XX(E) Edy・WAON対応
				Str_Set1(																// -----印字ﾃﾞｰﾀ編集-----
							Electron_prn[2],											// 文字列１：上位端末ID
							cEditwk2,													// 文字列２：上位端末ID印字ﾃﾞｰﾀ
							pri_kind													// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;
			}
		}
// MH810103 GG119202(E) 電子マネーみなし決済印字フォーマット変更対応

// MH810103 GG119202(S) 電子マネー対応
		// カード問い合わせ番号
		memset(cEditwk3, 0, sizeof(cEditwk3));
// MH810103 MHUT40XX(S) Edy・WAON対応
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||		// みなし決済
			Ryousyuu->chuusi == 1 ){												// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk3, "****-**********" );									// 問い合わせ番号(15桁)
		}
		else {
// MH810103 MHUT40XX(E) Edy・WAON対応
		memcpy(cEditwk3, einfo->Ec.inquiry_num, sizeof(einfo->Ec.inquiry_num));		// 問い合わせ番号(15桁)
// MH810103 MHUT40XX(S) Edy・WAON対応
		}
// MH810103 MHUT40XX(E) Edy・WAON対応
		Str_Set1(																	// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[42],												// 文字列１：問い合わせ番号
					cEditwk3,														// 文字列２：問い合わせ番号印字ﾃﾞｰﾀ
					pri_kind														// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;
// MH810103 GG119202(E) 電子マネー対応
		break;

	case EC_NANACO_USED:
		// 見出し
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		PrnStr(ElectronEc_prn[5], pri_kind);
		Prn_edit_Title( ElectronEc_prn[5], FONT_K_NML, pri_kind );
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		edit_cnt++;

// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
		if (pri_kind == J_PRI) {
			// 加盟店名はジャーナルのみ印字
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, einfo->Ec.Brand.Nanaco.Kamei, sizeof(einfo->Ec.Brand.Nanaco.Kamei));
			Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,												// 文字列１：加盟店名
						"",														// 文字列２：NULL
						pri_kind												// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
		}
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応

// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		// カード番号
//		memset(cEditwk2, 0, sizeof(cEditwk2));
//// GG119202(S) 電子マネーみなし決済印字フォーマット変更対応
////		memcpy(cEditwk2, einfo->Ec.Card_ID, ECARDID_SIZE_SUICA);
//		// みなし決済時は*印字
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
//			sprintf( cEditwk2, "****************" );
//		} else {
//			memcpy(cEditwk2, einfo->Ec.Card_ID, ECARDID_SIZE_SUICA);
//		}
//// GG119202(E) 電子マネーみなし決済印字フォーマット変更対応
//		if ((use_log == 0) && (pri_kind == R_PRI)) {
//		// 領収書(レシートプリンタ)の場合,マスキング
//			memset(cEditwk2, '*', 12);											// 上位12桁マスキング固定
//		}
//		else {
//		// 領収書(ジャーナルプリンタ)、利用明細の場合,マスキング
//			memset(&cEditwk2[12], '*', 4);										// 下位4桁マスキング固定
//		}
//		Str_Set1(																// -----印字ﾃﾞｰﾀ編集-----
//					ElectronEc_prn[6],											// 文字列１：nanaco番号
//					cEditwk2,													// 文字列２：nanaco番号印字ﾃﾞｰﾀ
//					pri_kind													// 印字先ﾌﾟﾘﾝﾀ
//				);
//		edit_cnt++;
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応

		// 支払額
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		sprintf(cMnydata, "%ld", einfo->Ec.pay_ryo);							// 料金印字ﾃﾞｰﾀ編集
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if (Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement != 0 &&
//			Ryousyuu->WFlag != 0) {
		if (Ryousyuu->chuusi == 1) {
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			// 決済精算中止時は支払額をマスクする
			sprintf(cMnydata, "*****");											// 料金印字ﾃﾞｰﾀ編集
		}
		else {
			sprintf(cMnydata, "%ld", einfo->Ec.pay_ryo);						// 料金印字ﾃﾞｰﾀ編集
		}
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		Camma_Set((uchar*)cMnydata);											// ３桁区切り（”、”挿入）
		Str_Set2(																// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[7],											// 文字列１："nanaco支払額"
					"",															// 文字列２：NULL
					cMnydata,													// 文字列３：料金印字ﾃﾞｰﾀ
					Pri_Tanni[PriT_YEN],										// 文字列４：円
					pri_kind													// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// 取引後残高
// MH810103 GG119202(S) 電子マネーみなし決済印字フォーマット変更対応
//		sprintf(cMnydata, "%ld", einfo->Ec.pay_after);							// 料金印字ﾃﾞｰﾀ編集
		// みなし決済時は*印字
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//			sprintf( cMnydata, "******" );										// 料金印字ﾃﾞｰﾀ編集
			sprintf( cMnydata, "*****" );										// 料金印字ﾃﾞｰﾀ編集
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		} else {
			sprintf(cMnydata, "%ld", einfo->Ec.pay_after);						// 料金印字ﾃﾞｰﾀ編集
		}
// MH810103 GG119202(E) 電子マネーみなし決済印字フォーマット変更対応
		Camma_Set((uchar*)cMnydata);											// ３桁区切り（”、”挿入）
		Str_Set2(																// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[8],											// 文字列１："nanaco残高"
					"",															// 文字列２：NULL
					cMnydata,													// 文字列３：料金印字ﾃﾞｰﾀ
					Pri_Tanni[PriT_YEN],										// 文字列４：円
					pri_kind													// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//// GG119202(S) 電子マネーみなし決済印字フォーマット変更対応
////		if( memcmp(einfo->Ec.Brand.Nanaco.TerminalNo, ID_check, sizeof(einfo->Ec.Brand.Nanaco.TerminalNo)) != 0 ){
////			// 上位端末ID
////			memset(cEditwk2, 0, sizeof(cEditwk2));
////			intoasl((uchar*)cEditwk2, einfo->Ec.Brand.Nanaco.TerminalNo[0], 8);			// 上位端末ID①（10進数：20桁　上位9桁マスキング、0パディング）
////			intoasl((uchar*)&cEditwk2[8], einfo->Ec.Brand.Nanaco.TerminalNo[1], 8);		// 上位端末ID②
////			intoasl((uchar*)&cEditwk2[16], einfo->Ec.Brand.Nanaco.TerminalNo[2], 4);	// 上位端末ID③
////			Str_Set1(																// -----印字ﾃﾞｰﾀ編集-----
////						Electron_prn[2],											// 文字列１：上位端末ID
////						cEditwk2,													// 文字列２：上位端末ID印字ﾃﾞｰﾀ
////						pri_kind													// 印字先ﾌﾟﾘﾝﾀ
////					);
////			edit_cnt++;
////		}
////		if( einfo->Ec.Brand.Nanaco.DealNo != 0 ){
////			// 上位端末ID通番
////			memset(cEditwk2, 0, sizeof(cEditwk2));
////			sprintf((char*)cEditwk2, "%09ld", einfo->Ec.Brand.Nanaco.DealNo);		// 上位端末ID 通番（10進数：9桁、0パディング）
////			Str_Set1(																// -----印字ﾃﾞｰﾀ編集-----
////						"",															// 文字列１：""
////						cEditwk2,													// 文字列２：上位端末ID 通番印字ﾃﾞｰﾀ
////						pri_kind													// 印字先ﾌﾟﾘﾝﾀ
////					);
////			edit_cnt++;
////		}
//		// みなし決済時は*印字
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
//			// 上位端末ID
//			memset( cEditwk2, 0, sizeof(cEditwk2) );
//			sprintf( cEditwk2, "********************" );						// 上位端末ID（10進数：20桁　上位9桁マスキング、0パディング）
//			Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
//						Electron_prn[2],										// 文字列１：上位端末ID
//						cEditwk2,												// 文字列２：上位端末ID印字ﾃﾞｰﾀ
//						pri_kind												// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//
//			// 上位端末ID通番
//			memset( cEditwk2, 0, sizeof(cEditwk2) );
//			sprintf( cEditwk2, "*********" );									// 上位端末ID 通番（10進数：9桁、0パディング）
//			Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
//						"",														// 文字列１：""
//						cEditwk2,												// 文字列２：上位端末ID 通番印字ﾃﾞｰﾀ
//						pri_kind												// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//		} else {
//			if( memcmp(einfo->Ec.Brand.Nanaco.TerminalNo, ID_check, sizeof(einfo->Ec.Brand.Nanaco.TerminalNo)) != 0 ){
//				// 上位端末ID
//				memset(cEditwk2, 0, sizeof(cEditwk2));
//				intoasl((uchar*)cEditwk2, einfo->Ec.Brand.Nanaco.TerminalNo[0], 8);			// 上位端末ID①（10進数：20桁　上位9桁マスキング、0パディング）
//				intoasl((uchar*)&cEditwk2[8], einfo->Ec.Brand.Nanaco.TerminalNo[1], 8);		// 上位端末ID②
//				intoasl((uchar*)&cEditwk2[16], einfo->Ec.Brand.Nanaco.TerminalNo[2], 4);	// 上位端末ID③
//				Str_Set1(																// -----印字ﾃﾞｰﾀ編集-----
//							Electron_prn[2],											// 文字列１：上位端末ID
//							cEditwk2,													// 文字列２：上位端末ID印字ﾃﾞｰﾀ
//							pri_kind													// 印字先ﾌﾟﾘﾝﾀ
//						);
//				edit_cnt++;
//			}
//			if( einfo->Ec.Brand.Nanaco.DealNo != 0 ){
//				// 上位端末ID通番
//				memset(cEditwk2, 0, sizeof(cEditwk2));
//				sprintf((char*)cEditwk2, "%09ld", einfo->Ec.Brand.Nanaco.DealNo);		// 上位端末ID 通番（10進数：9桁、0パディング）
//				Str_Set1(																// -----印字ﾃﾞｰﾀ編集-----
//							"",															// 文字列１：""
//							cEditwk2,													// 文字列２：上位端末ID 通番印字ﾃﾞｰﾀ
//							pri_kind													// 印字先ﾌﾟﾘﾝﾀ
//						);
//				edit_cnt++;
//			}
//		}
//// GG119202(E) 電子マネーみなし決済印字フォーマット変更対応
		// カード番号
		memset( cEditwk2, 0, sizeof(cEditwk2) );
		// みなし決済時は*印字
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk2, "**** **** **** ****" );
		} else {
			// カード番号を4桁ずつで区切る
			for (i = 0, j = 0; i < 4; i++) {
				memcpy(&cEditwk2[j], &einfo->Ec.Card_ID[i*4], 4);
				if (i < 3) {
					j += 4;
					cEditwk2[j++] = ' ';
				}
			}
		}
		Str_Set1(																// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[6],											// 文字列１：nanaco番号
					cEditwk2,													// 文字列２：nanaco番号印字ﾃﾞｰﾀ
					pri_kind													// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// 端末取引通番
		memset( cEditwk2, 0, sizeof(cEditwk2) );
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk2, "******" );
		}
		else {
			memcpy(cEditwk2, einfo->Ec.Brand.Nanaco.DealNo, 6);					// 端末取引通番（ASCII：6桁）
		}
		Str_Set1(																// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[48],											// 文字列１：端末取引通番
					cEditwk2,													// 文字列２：端末取引通番印字ﾃﾞｰﾀ
					pri_kind													// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// 上位端末ID
		memset( cEditwk2, 0, sizeof(cEditwk2) );
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk2, "********************" );
		}
		else {
			memcpy(cEditwk2, einfo->Ec.Brand.Nanaco.TerminalNo, 20);			// 上位端末ID（ASCII：20桁）
		}
		Str_Set1(																// -----印字ﾃﾞｰﾀ編集-----
					Electron_prn[2],											// 文字列１：上位端末ID
					cEditwk2,													// 文字列２：上位端末ID印字ﾃﾞｰﾀ
					pri_kind													// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応

// MH810103 GG119202(S) 電子マネー対応
		// カード問い合わせ番号
		memset(cEditwk3, 0, sizeof(cEditwk3));
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||		// みなし決済
			Ryousyuu->chuusi == 1 ){												// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk3, "****-**********" );									// 問い合わせ番号(15桁)
		}
		else {
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		memcpy(cEditwk3, einfo->Ec.inquiry_num, sizeof(einfo->Ec.inquiry_num));		// 問い合わせ番号(15桁)
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
		}
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		Str_Set1(																	// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[42],												// 文字列１：問い合わせ番号
					cEditwk3,														// 文字列２：問い合わせ番号印字ﾃﾞｰﾀ
					pri_kind														// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;
// MH810103 GG119202(E) 電子マネー対応
		break;

	case EC_WAON_USED:
		// 見出し
// MH810103 MHUT40XX(S) Edy・WAON対応
//		PrnStr(ElectronEc_prn[9], pri_kind);
		Prn_edit_Title( ElectronEc_prn[9], FONT_K_NML, pri_kind );
// MH810103 MHUT40XX(E) Edy・WAON対応
		edit_cnt++;

// MH810103 MHUT40XX(S) Edy・WAON対応
		if (pri_kind == J_PRI) {
			// 加盟店名はジャーナルのみ印字
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, einfo->Ec.Brand.Waon.Kamei, sizeof(einfo->Ec.Brand.Waon.Kamei));
			Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,										// 文字列１：加盟店名
						"",												// 文字列２：NULL
						pri_kind										// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
		}
// MH810103 MHUT40XX(E) Edy・WAON対応

		// カード番号
		memset(cEditwk2, 0, sizeof(cEditwk2));
// MH810103 GG119202(S) 電子マネーみなし決済印字フォーマット変更対応
//		memcpy(cEditwk2, einfo->Ec.Card_ID, ECARDID_SIZE_SUICA);
		// みなし決済時は*印字
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
// MH810103 MHUT40XX(S) Edy・WAON対応
//			sprintf( cEditwk2, "****************" );
			sprintf( cEditwk2, "**** **** **** ****" );
// MH810103 MHUT40XX(E) Edy・WAON対応
		} else {
// MH810103 MHUT40XX(S) Edy・WAON対応
//			memcpy(cEditwk2, einfo->Ec.Card_ID, ECARDID_SIZE_SUICA);
			// カード番号を4桁ずつで区切る
			for (i = 0, j = 0; i < 4; i++) {
				memcpy(&cEditwk2[j], &einfo->Ec.Card_ID[i*4], 4);
				if (i < 3) {
					j += 4;
					cEditwk2[j++] = ' ';
				}
			}
// MH810103 MHUT40XX(E) Edy・WAON対応
		}
// MH810103 GG119202(E) 電子マネーみなし決済印字フォーマット変更対応
// MH810103 MHUT40XX(S) Edy・WAON対応
//		if (use_log != 0 || pri_kind == J_PRI) {
//		// 領収書(ジャーナルプリンタ)/利用明細印字の場合、上位4桁マスキング
//			memset(cEditwk2, '*', 4);											// 上位4桁マスキング固定
//		} else {
//		// 領収書(レシートプリンタ)の場合,マスキング
//			memset(cEditwk2, '*', 12);											// 上位12桁マスキング固定
//		}
// MH810103 MHUT40XX(E) Edy・WAON対応
		Str_Set1(																// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[10],											// 文字列１：WAONカードID
					cEditwk2,													// 文字列２：WAONカードID印字ﾃﾞｰﾀ
					pri_kind													// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// 支払額
// MH810103 MHUT40XX(S) Edy・WAON対応
//		sprintf(cMnydata, "%ld", einfo->Ec.pay_ryo);							// 料金印字ﾃﾞｰﾀ編集
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if (Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement != 0 &&
//			Ryousyuu->WFlag != 0) {
		if (Ryousyuu->chuusi == 1) {
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			// 決済精算中止時は支払額をマスクする
			sprintf(cMnydata, "*****");											// 料金印字ﾃﾞｰﾀ編集
		}
		else {
			sprintf(cMnydata, "%ld", einfo->Ec.pay_ryo);						// 料金印字ﾃﾞｰﾀ編集
		}
// MH810103 MHUT40XX(E) Edy・WAON対応
		Camma_Set((uchar*)cMnydata);											// ３桁区切り（”、”挿入）
		Str_Set2(																// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[11],											// 文字列１："WAON支払額"
					"",															// 文字列２：NULL
					cMnydata,													// 文字列３：料金印字ﾃﾞｰﾀ
					Pri_Tanni[PriT_YEN],										// 文字列４：円
					pri_kind													// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// 取引後残高
// MH810103 GG119202(S) 電子マネーみなし決済印字フォーマット変更対応
//		sprintf(cMnydata, "%ld", einfo->Ec.pay_after);							// 料金印字ﾃﾞｰﾀ編集
		// みなし決済時は*印字
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
// MH810103 MHUT40XX(S) Edy・WAON対応
//			sprintf( cMnydata, "******" );										// 料金印字ﾃﾞｰﾀ編集
			sprintf( cMnydata, "*****" );										// 料金印字ﾃﾞｰﾀ編集
// MH810103 MHUT40XX(E) Edy・WAON対応
		} else {
			sprintf(cMnydata, "%ld", einfo->Ec.pay_after);						// 料金印字ﾃﾞｰﾀ編集
		}
// MH810103 GG119202(E) 電子マネーみなし決済印字フォーマット変更対応
		Camma_Set((uchar*)cMnydata);											// ３桁区切り（”、”挿入）
		Str_Set2(																// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[12],											// 文字列１："WAON残高"
					"",															// 文字列２：NULL
					cMnydata,													// 文字列３：料金印字ﾃﾞｰﾀ
					Pri_Tanni[PriT_YEN],										// 文字列４：円
					pri_kind													// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

// MH810103 MHUT40XX(S) Edy・WAON対応
//		if (einfo->Ec.Brand.Waon.point_status == 0x01) {
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if (Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement != 0 ||
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ||											// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			Ryousyuu->Electron_data.Ec.Brand.Waon.point_status == 0xFF) {
			// みなし決済時、未了残高照会完了時はポイント関連メッセージは印字しない
		}
		else if (einfo->Ec.Brand.Waon.point_status == 0) {
// MH810103 MHUT40XX(E) Edy・WAON対応
		// ポイント利用可
			// 今回ポイント
// MH810103 MHUT40XX(S) ジャーナルにポイント情報を印字する
//// MHUT40XX(S) Edy・WAON対応
//			if (use_log == 0 && pri_kind == R_PRI) {
//// MHUT40XX(E) Edy・WAON対応
			{
// MH810103 MHUT40XX(E) ジャーナルにポイント情報を印字する
			sprintf(cMnydata, "%ld", einfo->Ec.Brand.Waon.point);				// ポイント印字ﾃﾞｰﾀ編集
			Camma_Set((uchar*)cMnydata);										// ３桁区切り（”、”挿入）
			Str_Set2(															// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[13],										// 文字列１："今回ポイント"
						"",														// 文字列２：NULL
						cMnydata,												// 文字列３：ポイント印字ﾃﾞｰﾀ
						Pri_Tanni[PriT_POINT],									// 文字列４： P
						pri_kind												// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
// MH810103 MHUT40XX(S) Edy・WAON対応
			}
// MH810103 MHUT40XX(E) Edy・WAON対応

// MH810103 MHUT40XX(S) Edy・WAON対応
//			// 累計ポイント
//			sprintf(cMnydata, "%ld", einfo->Ec.Brand.Waon.point_total);			// ポイント印字ﾃﾞｰﾀ編集
//			Camma_Set((uchar*)cMnydata);										// ３桁区切り（”、”挿入）
//			Str_Set2(															// -----印字ﾃﾞｰﾀ編集-----
//						ElectronEc_prn[14],										// 文字列１："累計ポイント"
//						"",														// 文字列２：NULL
//						cMnydata,												// 文字列３：ポイント印字ﾃﾞｰﾀ
//						Pri_Tanni[PriT_POINT],									// 文字列４： P
//						pri_kind												// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//
//			// ポイント有効期限メッセージ
//			if (((use_log == 0) && (pri_kind == R_PRI))
//			&&	(einfo->Ec.Brand.Waon.period_point != 0)) {
//				memset(cEditwk2, 0, sizeof(cEditwk2));
//				wk = einfo->Ec.Brand.Waon.period;
//// GG119202(S) 静的解析反映
////				sprintf((char*)cEditwk2, "  （内%2d年%2d月末日まで有効"
////									, (wk / 10000) % 100
////									, (wk / 100) % 100);
//				sprintf((char*)cEditwk2, "  （内%2d年%2d月末日まで有効"
//									, (int)((wk / 10000) % 100)
//									, (int)((wk / 100) % 100));
//// GG119202(E) 静的解析反映
//				PrnStr(cEditwk2, pri_kind);										// "  （内12年 9月末日まで有効"
//				edit_cnt++;
//
//				memset(cEditwk2, 0, sizeof(cEditwk2));
//				sprintf(cMnydata, "%ld", einfo->Ec.Brand.Waon.period_point);// ポイント印字ﾃﾞｰﾀ編集
//				Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
//				sprintf((char*)cEditwk2, "                    %s P）", cMnydata);
//				Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//							"",													// 文字列１：NULL
//							cEditwk2,											// 文字列２：ポイント(右寄せ)
//							pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//						);
//				edit_cnt++;
//
//				PrnStr(ElectronEc_prn[30], pri_kind);						// "有効期限を過ぎるとポイントが無効に"
//				edit_cnt++;
//
//				PrnStr(ElectronEc_prn[31], pri_kind);						// "なります。お早めにご利用下さい。"
//				edit_cnt++;
//			}
//		} else {
//			//Waon.card_typeではデータセット有無を判断できないため、SPRW_IDで全て判断する
//			if( memcmp(einfo->Ec.Brand.Waon.SPRW_ID, ID_check, sizeof(einfo->Ec.Brand.Waon.SPRW_ID)) != 0 ){
// MH810103 MHUT40XX(S) ジャーナルにポイント情報を印字する
//			if (use_log == 0 && pri_kind == R_PRI) {
			{
// MH810103 MHUT40XX(E) ジャーナルにポイント情報を印字する
				PrnStr(ElectronEc_prn[30], pri_kind);						// "累計WAONポイント数は、"
				edit_cnt++;

				PrnStr(ElectronEc_prn[31], pri_kind);						// "お近くのWAONステーションなどで"
				edit_cnt++;

				PrnStr(ElectronEc_prn[46], pri_kind);						// "確認ください。"
				edit_cnt++;
			}
		} else {
// MH810103 MHUT40XX(E) Edy・WAON対応
			// ポイント利用不可
				// スペース
				if ((use_log == 0) && (pri_kind == R_PRI)) {
				// 領収書(レシート)/領収書再発行の場合
				/*------	１行空白	------*/
					Prn_edit_space(pri_kind);
					edit_cnt++;
				}

// MH810103 MHUT40XX(S) Edy・WAON対応
//				if (einfo->Ec.Brand.Waon.card_type == WAON_POINT_JMB_MILE) {
				if (einfo->Ec.Brand.Waon.point_status == 2) {
// MH810103 MHUT40XX(E) Edy・WAON対応
				// JMB提携カード
					PrnStr(ElectronEc_prn[16], pri_kind);						// "JMB WAONはマイルがつきます"
				} else {
				// それ以外
					PrnStr(ElectronEc_prn[15], pri_kind);						// "このカードはポイント対象外です"
				}
				edit_cnt++;

				// スペース
				if ((use_log == 0) && (pri_kind == R_PRI)) {
				// 領収書(レシート)/領収書再発行の場合
				/*------	１行空白	------*/
					Prn_edit_space(pri_kind);
					edit_cnt++;
				}
// MH810103 MHUT40XX(S) Edy・WAON対応
//			}
// MH810103 MHUT40XX(E) Edy・WAON対応
		}

// MH810103 GG119202(S) 電子マネーみなし決済印字フォーマット変更対応
//		if( memcmp(einfo->Ec.Brand.Waon.SPRW_ID, ID_check, sizeof(einfo->Ec.Brand.Waon.SPRW_ID)) != 0 ){
//			// SPRWID
//			memset(cEditwk2, 0, sizeof(cEditwk2));
//			memcpy(cEditwk2, einfo->Ec.Brand.Waon.SPRW_ID, 13);
//			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//						ElectronEc_prn[17],									// 文字列１：SPRWID
//						cEditwk2,											// 文字列２：SPRWID印字ﾃﾞｰﾀ
//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//		}
		// みなし決済時は*印字
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			memset( cEditwk2, 0, sizeof(cEditwk2) );
			sprintf( cEditwk2, "*************" );
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[17],									// 文字列１：SPRWID
						cEditwk2,											// 文字列２：SPRWID印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
		} else {
			if( memcmp(einfo->Ec.Brand.Waon.SPRW_ID, ID_check, sizeof(einfo->Ec.Brand.Waon.SPRW_ID)) != 0 ){
				// SPRWID
				memset(cEditwk2, 0, sizeof(cEditwk2));
				memcpy(cEditwk2, einfo->Ec.Brand.Waon.SPRW_ID, 13);
				Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
							ElectronEc_prn[17],								// 文字列１：SPRWID
							cEditwk2,										// 文字列２：SPRWID印字ﾃﾞｰﾀ
							pri_kind										// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;
			}
		}
// MH810103 GG119202(E) 電子マネーみなし決済印字フォーマット変更対応

// MH810103 GG119202(S) 電子マネー対応
		// カード問い合わせ番号
		memset(cEditwk3, 0, sizeof(cEditwk3));
// MH810103 MHUT40XX(S) Edy・WAON対応
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk3, "****-**********" );									// 問い合わせ番号(15桁)
		}
		else {
// MH810103 MHUT40XX(E) Edy・WAON対応
		memcpy(cEditwk3, einfo->Ec.inquiry_num, sizeof(einfo->Ec.inquiry_num));		// 問い合わせ番号(15桁)
// MH810103 MHUT40XX(S) Edy・WAON対応
		}
// MH810103 MHUT40XX(E) Edy・WAON対応
		Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[42],										// 文字列１：問い合わせ番号
					cEditwk3,												// 文字列２：問い合わせ番号印字ﾃﾞｰﾀ
					pri_kind												// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;
// MH810103 GG119202(E) 電子マネー対応
		break;

	case EC_SAPICA_USED:
		// 見出し
		PrnStr(ElectronEc_prn[18], pri_kind);
		edit_cnt++;

		// カード番号
		memset(cEditwk2, 0, sizeof(cEditwk2));
		memcpy(cEditwk2, einfo->Ec.Card_ID, ECARDID_SIZE_SAPICA);
		if ((use_log == 0) && (pri_kind == R_PRI)) {
		// 領収書(レシートプリンタ)の場合,マスキング
			memset(&cEditwk2[2], '*', 11);								// マスキング固定
		}
		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[19],									// 文字列１：カード番号
					cEditwk2,											// 文字列２：カード番号印字ﾃﾞｰﾀ
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// 支払額
		sprintf(cMnydata, "%ld", einfo->Ec.pay_ryo);					// 料金印字ﾃﾞｰﾀ編集
		Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
		Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[20],									// 文字列１："カード支払額"
					"",													// 文字列２：NULL
					cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
					Pri_Tanni[PriT_YEN],								// 文字列４：円
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// 取引後残高
		sprintf(cMnydata, "%ld", einfo->Ec.pay_after);					// 料金印字ﾃﾞｰﾀ編集
		Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
		Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[21],									// 文字列１："カード残高"
					"",													// 文字列２：NULL
					cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
					Pri_Tanni[PriT_YEN],								// 文字列４：円
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		if( memcmp(einfo->Ec.Brand.Sapica.Terminal_ID, ID_check, sizeof(einfo->Ec.Brand.Sapica.Terminal_ID)) != 0 ){
			// 端末ID
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, einfo->Ec.Brand.Sapica.Terminal_ID, 7);		// 物販端末ID（ASCII:7桁）
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[22],									// 文字列１：端末ID
						cEditwk2,											// 文字列２：端末ID印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
		}
		if( einfo->Ec.Brand.Sapica.Details_ID != 0 ){
			// 明細ID
			memset(cEditwk2, 0, sizeof(cEditwk2));
			sprintf((char*)cEditwk2, "%10ld", einfo->Ec.Brand.Sapica.Details_ID);	// 一件明細ID（10進数:最大10桁。0サプレス右詰め）
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[23],									// 文字列１：明細ID
						cEditwk2,											// 文字列２：明細ID 通番印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
		}

// MH810103 GG119202(S) 電子マネー対応
		// カード問い合わせ番号
		memset(cEditwk3, 0, sizeof(cEditwk3));
		memcpy(cEditwk3, einfo->Ec.inquiry_num, sizeof(einfo->Ec.inquiry_num));		// 問い合わせ番号(15桁)
		Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[42],										// 文字列１：問い合わせ番号
					cEditwk3,												// 文字列２：問い合わせ番号印字ﾃﾞｰﾀ
					pri_kind												// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;
// MH810103 GG119202(E) 電子マネー対応
		break;
	case EC_KOUTSUU_USED:
		// 見出し
// MH810103 GG119202(S) 交通系ブランドの決済結果データフォーマット修正
//		PrnStr(ElectronEc_prn[36], pri_kind);
		Prn_edit_Title( ElectronEc_prn[36], FONT_K_NML, pri_kind );
// MH810103 GG119202(E) 交通系ブランドの決済結果データフォーマット修正
		edit_cnt++;

// MH810103 GG119202(S) 交通系ブランドの決済結果データフォーマット修正
//		// カード番号
//		memset(cEditwk2, 0, sizeof(cEditwk2));
//// GG119200(S) 電子マネーみなし決済印字フォーマット変更対応
////		memcpy(cEditwk2, einfo->Ec.Card_ID, ECARDID_SIZE_KOUTSUU);
//		// みなし決済時は*印字
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
//			sprintf( cEditwk2, "*****************" );
//		} else {
//			memcpy(cEditwk2, einfo->Ec.Card_ID, ECARDID_SIZE_KOUTSUU);
//		}
//// GG119200(E) 電子マネーみなし決済印字フォーマット変更対応
//		// 領収書(レシートプリンタ)の場合,マスキング
//		memset(&cEditwk2[2], '*', 11);									// マスキング固定
//		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//					ElectronEc_prn[19],									// 文字列１：カード番号
//					cEditwk2,											// 文字列２：カード番号印字ﾃﾞｰﾀ
//					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//				);
//		edit_cnt++;
		if (pri_kind == J_PRI) {
			// 加盟店名はジャーナルのみ印字
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, einfo->Ec.Brand.Koutsuu.Kamei, sizeof(einfo->Ec.Brand.Koutsuu.Kamei));
			Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,										// 文字列１：加盟店名
						"",												// 文字列２：NULL
						pri_kind										// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
		}
// MH810103 GG119202(E) 交通系ブランドの決済結果データフォーマット修正

		// カード支払額
// MH810103 GG119202(S) 交通系ブランドの決済結果データフォーマット修正
		memset(cEditwk2, 0, sizeof(cEditwk2));
		sprintf(cEditwk2, "  %s", ElectronEc_prn[36]);
// MH810103 GG119202(E) 交通系ブランドの決済結果データフォーマット修正
// MH810103 GG119202(S) 決済精算中止時は決済額をマスクする
//		sprintf(cMnydata, "%ld", einfo->Ec.pay_ryo);					// 料金印字ﾃﾞｰﾀ編集
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if (Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement != 0 &&
//			Ryousyuu->WFlag != 0) {
		if (Ryousyuu->chuusi == 1) {
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			// 決済精算中止時は支払額をマスクする
			sprintf(cMnydata, "*****");									// 料金印字ﾃﾞｰﾀ編集
		}
		else {
			sprintf(cMnydata, "%ld", einfo->Ec.pay_ryo);				// 料金印字ﾃﾞｰﾀ編集
		}
// MH810103 GG119202(E) 決済精算中止時は決済額をマスクする
		Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
		Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
// MH810103 GG119202(S) 交通系ブランドの決済結果データフォーマット修正
//					ElectronEc_prn[20],									// 文字列１："カード支払額"
					cEditwk2,											// 文字列１："交通系支払"
// MH810103 GG119202(E) 交通系ブランドの決済結果データフォーマット修正
					"",													// 文字列２：NULL
					cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
					Pri_Tanni[PriT_YEN],								// 文字列４：円
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// カード残高
// MH810103 GG119202(S) 電子マネーみなし決済印字フォーマット変更対応
//		sprintf(cMnydata, "%ld", einfo->Ec.pay_after);					// 料金印字ﾃﾞｰﾀ編集
		// みなし決済時は*印字
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
// MH810103 GG119202(S) みなし決済時の印字修正（交通系IC）
//			sprintf( cMnydata, "******" );								// 料金印字ﾃﾞｰﾀ編集
			sprintf( cMnydata, "*****" );								// 料金印字ﾃﾞｰﾀ編集
// MH810103 GG119202(E) みなし決済時の印字修正（交通系IC）
		} else {
			sprintf(cMnydata, "%ld", einfo->Ec.pay_after);				// 料金印字ﾃﾞｰﾀ編集
		}
// MH810103 GG119202(E) 電子マネーみなし決済印字フォーマット変更対応
		Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
		Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
// MH810103 GG119202(S) 交通系ブランドの決済結果データフォーマット修正
//					ElectronEc_prn[21],									// 文字列１："カード残高"
					ElectronEc_prn[44],									// 文字列１："交通系残高"
// MH810103 GG119202(E) 交通系ブランドの決済結果データフォーマット修正
					"",													// 文字列２：NULL
					cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
					Pri_Tanni[PriT_YEN],								// 文字列４：円
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

// MH810103 GG119202(S) 交通系ブランドの決済結果データフォーマット修正
		// カード番号
		memset(cEditwk2, 0, sizeof(cEditwk2));
// MH810103 GG119202(S) 交通系ブランドの決済結果データフォーマット修正
//		// みなし決済時は*印字
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
//			sprintf( cEditwk2, "*****************" );
//		} else {
//			memcpy(cEditwk2, einfo->Ec.Card_ID, ECARDID_SIZE_KOUTSUU);
//		}
//		// 領収書(レシートプリンタ)の場合,マスキング
//		memset(&cEditwk2[2], '*', 11);									// マスキング固定
		// みなし決済時は*印字
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk2, "***** **** **** ****" );
		} else {
			// カード番号を4桁ずつで区切る(先頭は5桁で区切る)
			memcpy(&cEditwk2[0], &einfo->Ec.Card_ID[0], 5);
			j = 5;
			cEditwk2[j++] = ' ';
			for (i = 0; i < 3; i++) {
				memcpy(&cEditwk2[j], &einfo->Ec.Card_ID[5+(i*4)], 4);
				if (i < 2) {
					j += 4;
					cEditwk2[j++] = ' ';
				}
			}
		}
// MH810103 GG119202(E) 交通系ブランドの決済結果データフォーマット修正
		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[19],									// 文字列１：カード番号
					cEditwk2,											// 文字列２：カード番号印字ﾃﾞｰﾀ
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// SPRWID
		memset(cEditwk2, 0, sizeof(cEditwk2));
		// みなし決済時は*印字
// MH810103 GG119202(S) 領収証再発行要求時の端末番号
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ||											// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			!memcmp(einfo->Ec.Brand.Koutsuu.SPRW_ID, ID_check, sizeof(einfo->Ec.Brand.Koutsuu.SPRW_ID))){
			// 領収証再発行要求受信時は'*'印字とする
// MH810103 GG119202(E) 領収証再発行要求時の端末番号
			sprintf( cEditwk2, "*************" );
		} else {
			memcpy(cEditwk2, einfo->Ec.Brand.Koutsuu.SPRW_ID, sizeof(einfo->Ec.Brand.Koutsuu.SPRW_ID));
		}
		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
// MH810103 GG119202(S) 接客画面の電子マネー対応
//					ElectronEc_prn[17],									// 文字列１：SPRWID
					ElectronEc_prn[43],									// 文字列１：端末番号
// MH810103 GG119202(E) 接客画面の電子マネー対応
					cEditwk2,											// 文字列２：SPRWID印字ﾃﾞｰﾀ
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;
// MH810103 GG119202(E) 交通系ブランドの決済結果データフォーマット修正

// MH810103 GG119202(S) 電子マネー対応
		// カード問い合わせ番号
		memset(cEditwk3, 0, sizeof(cEditwk3));
// MH810103 GG119202(S) 電子マネーみなし決済印字フォーマット変更対応
//		memcpy(cEditwk3, einfo->Ec.inquiry_num, sizeof(einfo->Ec.inquiry_num));		// 問い合わせ番号(15桁)
		// みなし決済時は*印字
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||		// みなし決済
			Ryousyuu->chuusi == 1 ){												// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk3, "****-**********" );									// 問い合わせ番号(15桁)
		} else {
			memcpy(cEditwk3, einfo->Ec.inquiry_num, sizeof(einfo->Ec.inquiry_num));	// 問い合わせ番号(15桁)
		}
// MH810103 GG119202(E) 電子マネーみなし決済印字フォーマット変更対応
		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[42],									// 文字列１：問い合わせ番号
					cEditwk3,											// 文字列２：問い合わせ番号印字ﾃﾞｰﾀ
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;
// MH810103 GG119202(E) 電子マネー対応
		break;
	case EC_ID_USED:
// TODO: 個別の内容は今後調整
		// 見出し
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		PrnStr(ElectronEc_prn[39], pri_kind);
		Prn_edit_Title( ElectronEc_prn[38], FONT_K_NML, pri_kind );
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		edit_cnt++;

// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
		if (pri_kind == J_PRI) {
			// 加盟店名はジャーナルのみ印字
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, einfo->Ec.Brand.Id.Kamei, sizeof(einfo->Ec.Brand.Id.Kamei));
			Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,												// 文字列１：加盟店名
						"",														// 文字列２：NULL
						pri_kind												// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
		}
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応

// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		// カード番号
//		memset(cEditwk2, 0, sizeof(cEditwk2));
//// GG119202(S) 電子マネーみなし決済印字フォーマット変更対応
////		memcpy(cEditwk2, einfo->Ec.Card_ID, ECARDID_SIZE_SUICA);
//		// みなし決済時は*印字
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
//			sprintf( cEditwk2, "****************" );
//		} else {
//			memcpy(cEditwk2, einfo->Ec.Card_ID, ECARDID_SIZE_SUICA);
//		}
//// GG119202(E) 電子マネーみなし決済印字フォーマット変更対応
//		// 領収書(レシートプリンタ)の場合,マスキング
//		memset(&cEditwk2[2], '*', 11);									// マスキング固定
//		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//					ElectronEc_prn[19],									// 文字列１：カード番号
//					cEditwk2,											// 文字列２：カード番号印字ﾃﾞｰﾀ
//					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//				);
//		edit_cnt++;
		// 取引内容
		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[39],									// 文字列１：取引内容
					"売上",												// 文字列２："売上"
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応

		// カード支払額
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		sprintf(cMnydata, "%ld", einfo->Ec.pay_ryo);					// 料金印字ﾃﾞｰﾀ編集
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if (Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement != 0 &&
//			Ryousyuu->WFlag != 0) {
		if (Ryousyuu->chuusi == 1) {
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			// 決済精算中止時は支払額をマスクする
			sprintf(cMnydata, "******");								// 料金印字ﾃﾞｰﾀ編集
		}
		else {
			sprintf(cMnydata, "%ld", einfo->Ec.pay_ryo);				// 料金印字ﾃﾞｰﾀ編集
		}
		memset(cEditwk2, 0, sizeof(cEditwk2));
		sprintf(cEditwk2, "  %s", ElectronEc_prn[38]);
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
		Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//					ElectronEc_prn[20],									// 文字列１："カード支払額"
					cEditwk2,											// 文字列１："iD支払"
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
					"",													// 文字列２：NULL
					cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
					Pri_Tanni[PriT_YEN],								// 文字列４：円
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		// カード残高
//// GG119202(S) 電子マネーみなし決済印字フォーマット変更対応
////		sprintf(cMnydata, "%ld", einfo->Ec.pay_after);					// 料金印字ﾃﾞｰﾀ編集
//		// みなし決済時は*印字
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
//			sprintf( cMnydata, "******" );								// 料金印字ﾃﾞｰﾀ編集
//		} else {
//			sprintf(cMnydata, "%ld", einfo->Ec.pay_after);				// 料金印字ﾃﾞｰﾀ編集
//		}
//// GG119202(E) 電子マネーみなし決済印字フォーマット変更対応
//		Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
//		Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//					ElectronEc_prn[21],									// 文字列１："カード残高"
//					"",													// 文字列２：NULL
//					cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
//					Pri_Tanni[PriT_YEN],								// 文字列４：円
//					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//				);
//		edit_cnt++;
//
//// GG119202(S) 電子マネー対応
		// カード番号
		memset(cEditwk2, 0, sizeof(cEditwk2));
		// みなし決済時は*印字
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk2, "**** **** **** ****" );
		} else {
// MH810104(S) nanaco・iD・QUICPay対応2
			// iD決済時はカード番号がマスクなしで通知されるため、印字時にマスクする
			memset(cEditwk3, 0, sizeof(cEditwk3));
			memcpy(cEditwk3, einfo->Ec.Card_ID, sizeof(einfo->Ec.Card_ID));
			if ((use_log == 0) && (pri_kind == R_PRI)) {
				// お客様控え
				memset(&cEditwk3[0], '*', 12);							// 下位4桁以外をマスク
			}
			else {
				// 店舗控え
				memset(&cEditwk3[13], '*', 3);							// 下位3桁をマスク
			}
// MH810104(E) nanaco・iD・QUICPay対応2

			// カード番号を4桁ずつで区切る
			for (i = 0, j = 0; i < 4; i++) {
// MH810104(S) nanaco・iD・QUICPay対応2
//				memcpy(&cEditwk2[j], &einfo->Ec.Card_ID[i*4], 4);
				memcpy(&cEditwk2[j], &cEditwk3[i*4], 4);
// MH810104(E) nanaco・iD・QUICPay対応2
				if (i < 3) {
					j += 4;
					cEditwk2[j++] = ' ';
				}
			}
		}
		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[41],									// 文字列１：会員番号
					cEditwk2,											// 文字列２：会員番号印字ﾃﾞｰﾀ
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// 承認番号
		memset(cEditwk2, 0, sizeof(cEditwk2));
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||		// みなし決済
			Ryousyuu->chuusi == 1 ){												// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk2, "*******" );
		}
		else {
			memcpy(cEditwk2, einfo->Ec.Brand.Id.Approval_No, 7);					// 承認番号（7桁）
		}
// MH810105 GG119202(S) オーソリなしで決済OKの場合は「承認番号」を印字しない
		if (cEditwk2[0] != '\0') {
		// オンラインオーソリなしの場合は「承認番号」の先頭1バイトにNULLがセットされる
		// 「承認番号」の先頭1バイトがNULLの場合は「承認番号」を印字しない
// MH810105 GG119202(E) オーソリなしで決済OKの場合は「承認番号」を印字しない
		Str_Set1(																	// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[49],												// 文字列１：承認番号
					cEditwk2,														// 文字列２：承認番号印字ﾃﾞｰﾀ
					pri_kind														// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;
// MH810105 GG119202(S) オーソリなしで決済OKの場合は「承認番号」を印字しない
		}
// MH810105 GG119202(E) オーソリなしで決済OKの場合は「承認番号」を印字しない

		// 上位端末ID
		memset(cEditwk2, 0, sizeof(cEditwk2));
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||		// みなし決済
			Ryousyuu->chuusi == 1 ){												// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk2, "*************" );
		}
		else {
			memcpy(cEditwk2, einfo->Ec.Brand.Id.TerminalNo, 13);					// 上位端末ID（13桁）
		}
		Str_Set1(																	// -----印字ﾃﾞｰﾀ編集-----
					Electron_prn[2],												// 文字列１：上位端末ID
					cEditwk2,														// 文字列２：上位端末ID印字ﾃﾞｰﾀ
					pri_kind														// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

// MH810104(S) nanaco・iD・QUICPay対応2
//		// 有効期限
//		Str_Set1(																	// -----印字ﾃﾞｰﾀ編集-----
//					ElectronEc_prn[50],												// 文字列１：有効期限
//					"XX/XX",														// 文字列２：XX/XX
//					pri_kind														// 印字先ﾌﾟﾘﾝﾀ
//		);
//		edit_cnt++;
// MH810104(E) nanaco・iD・QUICPay対応2
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応

		// カード問い合わせ番号
		memset(cEditwk3, 0, sizeof(cEditwk3));
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||		// みなし決済
			Ryousyuu->chuusi == 1 ){												// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk3, "****-**********" );									// 問い合わせ番号(15桁)
		}
		else {
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		memcpy(cEditwk3, einfo->Ec.inquiry_num, sizeof(einfo->Ec.inquiry_num));		// 問い合わせ番号(15桁)
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
		}
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[42],									// 文字列１：問い合わせ番号
					cEditwk3,											// 文字列２：問い合わせ番号印字ﾃﾞｰﾀ
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;
// MH810103 GG119202(E) 電子マネー対応
		break;
	case EC_QUIC_PAY_USED:
// TODO: 個別の内容は今後調整
		// 見出し
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		PrnStr(ElectronEc_prn[41], pri_kind);
		Prn_edit_Title( ElectronEc_prn[40], FONT_K_NML, pri_kind );
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		edit_cnt++;

// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
		if (pri_kind == J_PRI) {
			// 加盟店名はジャーナルのみ印字
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, einfo->Ec.Brand.Quickpay.Kamei, sizeof(einfo->Ec.Brand.Quickpay.Kamei));
			Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,												// 文字列１：加盟店名
						"",														// 文字列２：NULL
						pri_kind												// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
		}
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応

// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		// カード番号
//		memset(cEditwk2, 0, sizeof(cEditwk2));
//// GG119202(S) 電子マネーみなし決済印字フォーマット変更対応
////		memcpy(cEditwk2, einfo->Ec.Card_ID, ECARDID_SIZE_SUICA);
//		// みなし決済時は*印字
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
//			sprintf( cEditwk2, "****************" );
//		} else {
//			memcpy(cEditwk2, einfo->Ec.Card_ID, ECARDID_SIZE_SUICA);
//		}
//// GG119202(E) 電子マネーみなし決済印字フォーマット変更対応
//		// 領収書(レシートプリンタ)の場合,マスキング
//		memset(&cEditwk2[2], '*', 11);									// マスキング固定
//		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//					ElectronEc_prn[19],									// 文字列１：カード番号
//					cEditwk2,											// 文字列２：カード番号印字ﾃﾞｰﾀ
//					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//				);
//		edit_cnt++;
		// 取引内容
		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[39],									// 文字列１：取引内容
					"売上",												// 文字列２："売上"
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応

		// カード支払額
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		sprintf(cMnydata, "%ld", einfo->Ec.pay_ryo);					// 料金印字ﾃﾞｰﾀ編集
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if (Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement != 0 &&
//			Ryousyuu->WFlag != 0) {
		if (Ryousyuu->chuusi == 1) {
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			// 決済精算中止時は支払額をマスクする
			sprintf(cMnydata, "******");								// 料金印字ﾃﾞｰﾀ編集
		}
		else {
			sprintf(cMnydata, "%ld", einfo->Ec.pay_ryo);				// 料金印字ﾃﾞｰﾀ編集
		}
		memset(cEditwk2, 0, sizeof(cEditwk2));
		sprintf(cEditwk2, "  %s", ElectronEc_prn[40]);
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
		Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//					ElectronEc_prn[20],									// 文字列１："カード支払額"
					cEditwk2,											// 文字列１："QUICPay支払"
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
					"",													// 文字列２：NULL
					cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
					Pri_Tanni[PriT_YEN],								// 文字列４：円
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		// カード残高
//// GG119202(S) 電子マネーみなし決済印字フォーマット変更対応
////		sprintf(cMnydata, "%ld", einfo->Ec.pay_after);					// 料金印字ﾃﾞｰﾀ編集
//		// みなし決済時は*印字
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
//			sprintf( cMnydata, "******" );								// 料金印字ﾃﾞｰﾀ編集
//		} else {
//			sprintf(cMnydata, "%ld", einfo->Ec.pay_after);				// 料金印字ﾃﾞｰﾀ編集
//		}
//// GG119202(E) 電子マネーみなし決済印字フォーマット変更対応
//		Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
//		Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//					ElectronEc_prn[21],									// 文字列１："カード残高"
//					"",													// 文字列２：NULL
//					cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
//					Pri_Tanni[PriT_YEN],								// 文字列４：円
//					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//				);
//		edit_cnt++;
//
//// GG119202(S) 電子マネー対応
		// カード番号
		memset(cEditwk2, 0, sizeof(cEditwk2));
		// みなし決済時は*印字
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk2, "**** **** **** **** ****" );
		} else {
// MH810104(S) nanaco・iD・QUICPay対応2
			// QP決済時はカード番号がマスクなしで通知されるため、印字時にマスクする
			memset(cEditwk3, 0, sizeof(cEditwk3));
			memcpy(cEditwk3, einfo->Ec.Card_ID, sizeof(einfo->Ec.Card_ID));
			if ((use_log == 0) && (pri_kind == R_PRI)) {
				// お客様控え
				memset(&cEditwk3[0], '*', 16);							// 下位4桁以外をマスク
			}
			else {
				// 店舗控え
				memset(&cEditwk3[16], '*', 4);							// 下位4桁をマスク
			}
// MH810104(E) nanaco・iD・QUICPay対応2

			// カード番号を4桁ずつで区切る
			for (i = 0, j = 0; i < 5; i++) {
// MH810104(S) nanaco・iD・QUICPay対応2
//				memcpy(&cEditwk2[j], &einfo->Ec.Card_ID[i*4], 4);
				memcpy(&cEditwk2[j], &cEditwk3[i*4], 4);
// MH810104(E) nanaco・iD・QUICPay対応2
				if (i < 4) {
					j += 4;
					cEditwk2[j++] = ' ';
				}
			}
		}
		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[41],									// 文字列１：会員番号
					cEditwk2,											// 文字列２：会員番号印字ﾃﾞｰﾀ
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// 承認番号
		memset(cEditwk2, 0, sizeof(cEditwk2));
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||		// みなし決済
			Ryousyuu->chuusi == 1 ){												// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk2, "*******" );
		}
		else {
			memcpy(cEditwk2, einfo->Ec.Brand.Quickpay.Approval_No, 7);				// 承認番号（7桁）
		}
// MH810105(S) MH364301 QPのオフライン決済印字対応
		if (cEditwk2[0] != '\0') {
		// オンラインオーソリなしの場合は「承認番号」の先頭1バイトにNULLがセットされる
		// 「承認番号」の先頭1バイトがNULLの場合は「承認番号」を印字しない
// MH810105(E) MH364301 QPのオフライン決済印字対応
		Str_Set1(																	// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[49],												// 文字列１：承認番号
					cEditwk2,														// 文字列２：承認番号印字ﾃﾞｰﾀ
					pri_kind														// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;
// MH810105(S) MH364301 QPのオフライン決済印字対応
		}
// MH810105(E) MH364301 QPのオフライン決済印字対応

		// 上位端末ID
		memset(cEditwk2, 0, sizeof(cEditwk2));
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||		// みなし決済
			Ryousyuu->chuusi == 1 ){												// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk2, "*************" );
		}
		else {
			memcpy(cEditwk2, einfo->Ec.Brand.Quickpay.TerminalNo, 13);				// 上位端末ID（13桁）
		}
		Str_Set1(																	// -----印字ﾃﾞｰﾀ編集-----
					Electron_prn[2],												// 文字列１：上位端末ID
					cEditwk2,														// 文字列２：上位端末ID印字ﾃﾞｰﾀ
					pri_kind														// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応

		// カード問い合わせ番号
		memset(cEditwk3, 0, sizeof(cEditwk3));
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
//		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ){
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||		// みなし決済
			Ryousyuu->chuusi == 1 ){												// 精算中止
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善
			sprintf( cEditwk3, "****-**********" );									// 問い合わせ番号(15桁)
		}
		else {
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		memcpy(cEditwk3, einfo->Ec.inquiry_num, sizeof(einfo->Ec.inquiry_num));		// 問い合わせ番号(15桁)
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
		}
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[42],									// 文字列１：問い合わせ番号
					cEditwk3,											// 文字列２：問い合わせ番号印字ﾃﾞｰﾀ
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;
// MH810103 GG119202(E) 電子マネー対応
		break;
// MH810105(S) MH364301 QRコード決済対応
	case EC_QR_USED:
		// 見出し
		// 支払種別
		memset(cEditwk2, 0, sizeof(cEditwk2));
		EcGetSubBrandName(BRANDNO_QR, 1, einfo->Ec.Brand.Qr.PayKind, (uchar*)cEditwk2);
		Prn_edit_Title(cEditwk2, FONT_K_NML, pri_kind);
		edit_cnt++;

		if (pri_kind == J_PRI) {
			// 加盟店名はジャーナルのみ印字
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, einfo->Ec.QR_Kamei, sizeof(einfo->Ec.QR_Kamei));
			Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,												// 文字列１：加盟店名
						"",														// 文字列２：NULL
						pri_kind												// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
		}
		// 利用日時
		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		if (Ryousyuu->chuusi == 1 || Ryousyuu->Electron_data.Ec.pay_datetime == 0) {
			// 決済精算中止時もしくは0である時は利用日時をマスクする
			memset(&wkClk, 0, sizeof(wkClk));
		} else {
			c_UnNormalize_sec( Ryousyuu->Electron_data.Ec.pay_datetime, &wkClk );
		}
		Prn_edit_Date6( cEditwk2, &wkClk );
		sprintf(cEditwk1, "  %s", ElectronEc_prn[54]);							// 利用日時
		Str_Set1(																// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,													// 文字列１：利用日時
					cEditwk2,													// 文字列２：利用日時印字ﾃﾞｰﾀ
					pri_kind													// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// 利用額
		if (Ryousyuu->chuusi == 1) {
			// 決済精算中止時は利用額をマスクする
			sprintf(cMnydata, "******");										// 料金印字ﾃﾞｰﾀ編集
		} else {
			sprintf(cMnydata, "%ld", einfo->Ec.pay_ryo);						// 料金印字ﾃﾞｰﾀ編集
		}
		memset(cEditwk1, 0, sizeof(cEditwk1));
		sprintf(cEditwk1, "  %s", ElectronEc_prn[55]);							// 利用額
		Camma_Set((uchar*)cMnydata);											// ３桁区切り（”、”挿入）
		Str_Set2(																// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,													// 文字列１："利用額"
					"",															// 文字列２：NULL
					cMnydata,													// 文字列３：料金印字ﾃﾞｰﾀ
					Pri_Tanni[PriT_YEN],										// 文字列４：円
					pri_kind													// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		if (Ryousyuu->EcResult == EPAY_RESULT_PAY_MIRYO ||
			Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_sett_fin != 0 ||
			Ryousyuu->chuusi == 1) {
			// 支払端末ID
			memset(cEditwk2, 0, sizeof(cEditwk2));
			if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||		// みなし決済
				Ryousyuu->chuusi == 1 ){												// 精算中止
				sprintf(cEditwk2, "*************");
			} else {
				memcpy(cEditwk2, einfo->Ec.Brand.Qr.PayTerminalNo, 20);					// 支払端末ID
			}
			Str_Set1(																	// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[22],												// 文字列１：支払端末ID
						cEditwk2,														// 文字列２：支払端末ID印字ﾃﾞｰﾀ
						pri_kind														// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;

			// 取引番号
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memset(cEditwk1, 0, sizeof(cEditwk1));
			sprintf(cEditwk1, "  %s", ElectronEc_prn[53]);								// 取引番号
			if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||		// みなし決済
				Ryousyuu->chuusi == 1 ){												// 精算中止
				sprintf(cEditwk2, "***************");
			} else {
				memcpy(cEditwk2, einfo->Ec.inquiry_num, sizeof(einfo->Ec.inquiry_num));	// 取引番号
			}
			Str_Set1(																	// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,														// 文字列１：取引番号
						cEditwk2,														// 文字列２：取引番号印字ﾃﾞｰﾀ
						pri_kind														// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
		} else {
			// Mch取引番号
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, einfo->Ec.Brand.Qr.MchTradeNo, 20);				// Mch取引番号:1行目印字処理
			Str_Set1(
						ElectronEc_prn[56],										// 文字列１：Mch取引番号
						cEditwk2,												// 文字列２：Mch取引番号印字ﾃﾞｰﾀ
						pri_kind												// 印字先ﾌﾟﾘﾝﾀ
			);
			edit_cnt++;

			if(strlen((char *)einfo->Ec.Brand.Qr.MchTradeNo) > 20){				// Mch取引番号:2行目(20桁以上受信した場合)印字処理
				memset(cEditwk2, 0, sizeof(cEditwk2));
				memcpy(cEditwk2, &einfo->Ec.Brand.Qr.MchTradeNo[20], 12);
				memset(cEditwk2+strlen(cEditwk2), ' ', 20-strlen(cEditwk2));	// 2行目の残りに空白セット
				Str_Set1(
							"",													// 文字列１：Mch取引番号
							cEditwk2,											// 文字列２：Mch取引番号印字ﾃﾞｰﾀ
							pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
				edit_cnt++;
			}
		}
		break;
// MH810105(E) MH364301 QRコード決済対応
// MH810105(S) MH364301 PiTaPa対応
	case EC_PITAPA_USED:
		// 見出し
		Prn_edit_Title( ElectronEc_prn[57], FONT_K_NML, pri_kind );
		edit_cnt++;

		if (pri_kind == J_PRI) {
			// 加盟店名はジャーナルのみ印字
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, einfo->Ec.Brand.Pitapa.Kamei, sizeof(einfo->Ec.Brand.Pitapa.Kamei));
			Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,												// 文字列１：加盟店名
						"",														// 文字列２：NULL
						pri_kind												// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
		}

		// 利用日時
		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		if (Ryousyuu->chuusi == 1 || Ryousyuu->Electron_data.Ec.pay_datetime == 0) {
			// 決済精算中止時もしくは0である時は利用日時をマスクする
			memset(&wkClk, 0, sizeof(wkClk));
		} else {
			c_UnNormalize_sec( Ryousyuu->Electron_data.Ec.pay_datetime, &wkClk );
		}
		Prn_edit_Date6( cEditwk2, &wkClk );
		sprintf(cEditwk1, "  %s", ElectronEc_prn[54]);						// 利用日時
		Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,												// 文字列１：利用日時
					cEditwk2,												// 文字列２：利用日時印字ﾃﾞｰﾀ
					pri_kind												// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// 伝票番号
		memset(cEditwk2, 0, sizeof(cEditwk2));
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
			sprintf( cEditwk2, "*****" );									// '*'(5桁)
		} else {
			memcpy(cEditwk2, einfo->Ec.Brand.Pitapa.Slip_No, 5);			// 伝票番号（5桁）
		}
		Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[58],										// 文字列１：伝票番号
					cEditwk2,												// 文字列２：伝票番号印字ﾃﾞｰﾀ
					pri_kind												// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// 端末番号
		memset(cEditwk2, 0, sizeof(cEditwk2));
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
			sprintf( cEditwk2, "*************" );
		} else {
			memcpy(cEditwk2, einfo->Ec.Brand.Pitapa.TerminalNo, 13);		// 端末番号（13桁）
		}
		Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[43],										// 文字列１：端末番号
					cEditwk2,												// 文字列２：端末番号ID印字ﾃﾞｰﾀ
					pri_kind												// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// カード番号
		memset(cEditwk2, 0, sizeof(cEditwk2));

		// みなし決済時は*印字
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
			sprintf( cEditwk2, "***** **** **** ****" );
		} else {
			// PiTaPa決済時はカード番号がマスクなしで通知されるため、印字時にマスクする
			memset(cEditwk3, 0, sizeof(cEditwk3));
			memcpy(cEditwk3, einfo->Ec.Card_ID, sizeof(einfo->Ec.Card_ID));
			if ((use_log == 0) && (pri_kind == R_PRI)) {
				// お客様控えのみマスク
				memset(&cEditwk3[2], '*', 11);								// 上位2桁、下位4桁以外をマスク
			}
			// カード番号を4桁ずつで区切る(先頭は5桁で区切る)
			memcpy(&cEditwk2[0], &cEditwk3[0], 5);
			j = 5;
			cEditwk2[j++] = ' ';
			for (i = 0; i < 3; i++) {
				memcpy(&cEditwk2[j], &cEditwk3[5+(i*4)], 4);
				if (i < 2) {
					j += 4;
					cEditwk2[j++] = ' ';
				}
			}
		}
		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[19],									// 文字列１：カード番号
					cEditwk2,											// 文字列２：会員番号印字ﾃﾞｰﾀ
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// 取引内容
		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[39],									// 文字列１：取引内容
					"売上",												// 文字列２："売上"
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// 支払い区分
		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[59],									// 文字列１：支払区分
					ElectronEc_prn[52],									// 文字列２：ポストペイ
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// 取引金額
		if (Ryousyuu->chuusi == 1) {
			// 決済精算中止時は支払額をマスクする
			sprintf(cMnydata, "******");								// 料金印字ﾃﾞｰﾀ編集
		}
		else {
			sprintf(cMnydata, "%ld", einfo->Ec.pay_ryo);				// 料金印字ﾃﾞｰﾀ編集
		}
		Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
		Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[27],									// 文字列１："取引金額"
					"",													// 文字列２：NULL
					cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
					Pri_Tanni[PriT_YEN],								// 文字列４：円
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		// 承認番号
		memset(cEditwk2, 0, sizeof(cEditwk2));
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
			sprintf( cEditwk2, "********" );							// '*'(8桁)
		}
		else {
			memcpy(cEditwk2, einfo->Ec.Brand.Pitapa.Approval_No, 8);	// 承認番号（8桁）
		}
		if (cEditwk2[0] != '\0') {
			// オンラインオーソリなしの場合は「承認番号」の先頭1バイトにNULLがセットされる
			// 「承認番号」の先頭1バイトがNULLの場合は「承認番号」を印字しない
			Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[49],								// 文字列１：承認番号
						cEditwk2,										// 文字列２：承認番号印字ﾃﾞｰﾀ
						pri_kind										// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
		}

		// カード問い合わせ番号
		memset(cEditwk3, 0, sizeof(cEditwk3));
		if( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||	// みなし決済
			Ryousyuu->chuusi == 1 ){											// 精算中止
			sprintf( cEditwk3, "****-**********" );									// 問い合わせ番号(15桁)
		}
		else {
			memcpy(cEditwk3, einfo->Ec.inquiry_num, sizeof(einfo->Ec.inquiry_num));	// 問い合わせ番号(15桁)
		}
		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[42],									// 文字列１：問い合わせ番号
					cEditwk3,											// 文字列２：問い合わせ番号印字ﾃﾞｰﾀ
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		edit_cnt++;

		if (pri_kind == R_PRI && p_proc_data->Log_Edit == OFF) {
			// 領収証（レシート）のみ「お客様控え」を印字する
			Prn_edit_space( pri_kind );
			edit_cnt++;
			Prn_edit_Title( ElectronEc_prn[60], FONT_K_NML, pri_kind );
			edit_cnt++;
		}
		break;
// MH810105(E) MH364301 PiTaPa対応
	default	:
		break;
	}
	return edit_cnt;
}
// MH321800(E) hosoda ICクレジット対応

//[]----------------------------------------------------------------------[]
///	@brief			条件一致・不一致判定処理
//[]----------------------------------------------------------------------[]
///	@param[in]		p_dat			精算情報へのアドレス
///	@param[in]		Sdate			期間指定開始日時(または指定日付)
///	@param[in]		Edate			期間指定終了日時
///	@param[in]		MsgId			追加条件判断用変数
///	@return			char			条件一致・不一致(0:不一致/1:一致)
///	@author			Y.Ise
///	@note			None
///	@attention		None
//[]----------------------------------------------------------------------[]
///	@date			Create	:	2008/11/11<br>
///					Update	:	
//[]------------------------------------- Copyright(C) 2005 AMANO Corp.---[]
uchar is_match_receipt(Receipt_data* p_dat, ulong Sdate, ulong Edate, ushort MsgId)
{
	uchar	ret = 0;					// 戻り値(0:条件不一致/1:条件一致)
	uchar	date_len;					// 検索期間の種類
	uchar	f_match = 0;				// 条件一致フラグ
	ulong	seisan_date;				// 精算日ﾃﾞｰﾀ
	ushort	date;

	if(Sdate)							// 検索開始日時が設定されている
	{
		if(Edate)						// 検索終了日時が設定されている
		{
			date_len = 2;				// 検索条件：期間指定
		}
		else							// 検索開始日時のみの設定
		{
			date_len = 1;				// 検索条件：日付指定
		}
	}
	else								// 検索開始日時が設定されてない
	{
		date_len = 0;					// 検索条件：全て
	}
	// 対象ﾛｸﾞ情報の精算日取得
	seisan_date = Nrm_YMDHM((date_time_rec*)&p_dat->TOutTime);
	// 日時までノーマライズすると日付指定で比較できない
	date = dnrmlzm( (short)p_dat->TOutTime.Year, (short)p_dat->TOutTime.Mon, (short)p_dat->TOutTime.Day );
	
	switch(date_len)					// 指定日時の期間内であるかを判断
	{
	case	0:	// 全て
		f_match = 1;					// 条件一致
		break;
	case	1:	// 日付指定
		if( date == Sdate )		// 対象ﾛｸﾞ情報の精算日と指定日が一致
		{
			f_match = 1;				// 条件一致
		}
		break;
	case	2:	// 期間指定
		// 対象ﾛｸﾞ情報の精算日と指定期間が一致
		if((seisan_date >= Sdate) && (seisan_date <= Edate))
		{
			f_match = 1;				// 条件一致
		}
		break;
	}

	switch(MsgId)						// 追加条件と一致するかを判断(一致したらフラグをインクリメント)
	{
	case 0:								// 全て
		f_match++;						// 条件一致
		break;
// MH321800(S) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
//#ifdef	FUNCTION_MASK_EDY
//	case LOG_EDYMEISAI:					// Edy
//		/* 有効データ判定 */
//		if(p_dat->Electron_data.Edy.e_pay_kind == EDY_USED)
//		{								// 利用カード種別が一致
//			f_match++;					// 条件一致
//		}
//		break;
//#endif
// MH321800(E) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
	case LOG_SCAMEISAI:					// Suica
		/* 有効データ判定 */
// MH810105(S) MH364301 利用明細プリントに「決済精算中止」が含まれてしまう
//		if( SuicaUseKindCheck( p_dat->Electron_data.Suica.e_pay_kind ))
		if( p_dat->chuusi == 0 &&
			SuicaUseKindCheck( p_dat->Electron_data.Suica.e_pay_kind ))
// MH810105(E) MH364301 利用明細プリントに「決済精算中止」が含まれてしまう
		{								// 利用カード種別が一致
			f_match++;					// 条件一致
		}
		break;
// MH321800(S) D.Inaba ICクレジット対応
	case LOG_ECMEISAI:					// 決済リーダ
		/* 有効データ判定 */
// MH810105(S) MH364301 利用明細プリントに「決済精算中止」が含まれてしまう
//		if( EcUseKindCheck( p_dat->Electron_data.Ec.e_pay_kind )
//		 || p_dat->Electron_data.Ec.e_pay_kind == EC_CREDIT_USED
		if( p_dat->chuusi == 0 &&
			(EcUseKindCheck( p_dat->Electron_data.Ec.e_pay_kind )
		 	|| p_dat->Electron_data.Ec.e_pay_kind == EC_CREDIT_USED)
// MH810105(E) MH364301 利用明細プリントに「決済精算中止」が含まれてしまう
		)
		{								// 利用カード種別が一致
			f_match++;					// 条件一致
		}
		break;
// MH321800(E) D.Inaba ICクレジット対応
// MH810103 MHUT40XX(S) みなし決済の集計を新規に設ける
	case LOG_ECMINASHI:					// みなし決済(決済リーダ)
		/* みなし決済データ判定 */
// MH810105 GG119202(S) みなし決済プリントに直前取引内容を印字する
//		if( p_dat->Electron_data.Ec.E_Status.BIT.deemed_sett_fin == 1 )
		if( p_dat->Electron_data.Ec.E_Status.BIT.deemed_sett_fin == 1 ||
			p_dat->Electron_data.Ec.E_Status.BIT.deemed_receive == 1 )
// MH810105 GG119202(E) みなし決済プリントに直前取引内容を印字する
		{								// みなし決済フラグONのデータを取得する
			f_match++;					// 条件一致
		}
		break;
// MH810103 MHUT40XX(E) みなし決済の集計を新規に設ける
	}
	if(f_match >= 2)					// 日時・追加条件共に一致
	{
		ret = 1;						// 検索結果：条件一致
	}
	return ret;							// 検索結果を返す
}

// MH321800(S) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
//#ifdef	FUNCTION_MASK_EDY
// //[]----------------------------------------------------------------------[]
// ///	@brief			Ｅｄｙ利用明細ログ印字ﾃﾞｰﾀ編集処理
// //[]----------------------------------------------------------------------[]
// ///	@param[in]		msg_data		ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ
// ///	@param[in]		pri_kind		印字先ﾌﾟﾘﾝﾀ
// ///										R_PRI  : ﾚｼｰﾄ<br>
// ///										J_PRI  : ｼﾞｬｰﾅﾙ
// ///	@param[in]		p_proc_data		編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
// ///	@return			void
// ///	@author			Y.Ise
// ///	@note			None
// ///	@attention		None
// //[]----------------------------------------------------------------------[]
// ///	@date			Create	:	2008/11/11<br>
// ///					Update	:	
// //[]------------------------------------- Copyright(C) 2005 AMANO Corp.---[]
//void EdyUseLog_edit( T_FrmLogPriReq4 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
//{
//// NOTE:FT4000ではログの読み出しの仕組みが変更となったためFT4800ベースのソースでは使用不可
//// Edyが必要となった時改めてコーディングする必要があります。その為いったん中身を削除します
//}
//#endif
//MH321800(E) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)

//[]----------------------------------------------------------------------[]
///	@brief			Ｓｕｉｃａ利用明細ログ印字ﾃﾞｰﾀ編集処理
//[]----------------------------------------------------------------------[]
///	@param[in]		msg_data		ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in]		pri_kind		印字先ﾌﾟﾘﾝﾀ
///										R_PRI  : ﾚｼｰﾄ<br>
///										J_PRI  : ｼﾞｬｰﾅﾙ
///	@param[in]		p_proc_data		編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
// MH810103 MHUT40XX(S) みなし決済の集計を新規に設ける
///	@param[in]		log_id			ﾒｯｾｰｼﾞｺﾏﾝﾄﾞ(ﾒｯｾｰｼﾞid)
// MH810103 MHUT40XX(E) みなし決済の集計を新規に設ける
///	@return			void
///	@author			Y.Ise
///	@note			None
///	@attention		None
//[]----------------------------------------------------------------------[]
///	@date			Create	:	2008/11/11<br>
///					Update	:	
//[]------------------------------------- Copyright(C) 2005 AMANO Corp.---[]
// MH810103 MHUT40XX(S) みなし決済の集計を新規に設ける
//void SuicaUseLog_edit( T_FrmLogPriReq4 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
void SuicaUseLog_edit( T_FrmLogPriReq4 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data, short log_id )
// MH810103 MHUT40XX(E) みなし決済の集計を新規に設ける
{
	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ
	ushort	Sdate;				// 検索開始日
	uchar	ret2;				// 精算ﾃﾞｰﾀ編集処理結果
	uchar	f_Printer;			// 出力プリンタ種別（0=レシート、1=ジャーナル）
	uchar	Flap_Sub_FlgB;		// バックアップ用変数
	long	cnt = prm_get(COM_PRM, S_SCA, 1, 1, 1);
// MH810103 MHUT40XX(S) みなし決済の集計を新規に設ける
	ushort	MsgId = LOG_SCAMEISAI;
// MH810103 MHUT40XX(E) みなし決済の集計を新規に設ける
// MH810105 GG119202(S) T合計連動印字対応
	ulong	StartTime;			// 期間開始日時情報
	ulong	EndTime;			// 期間終了日時情報
// MH810105 GG119202(E) T合計連動印字対応

// MH321800(S) D.Inaba ICクレジット対応
	if ( isEC_USE() ) {
// MH810103 MHUT40XX(S) みなし決済の集計を新規に設ける
//		cnt = 10;
	// 決済リーダ接続ありで決済リーダログ印字要求の場合は
	// 利用明細プリント、みなし決済プリントで分ける
		switch ( log_id )
		{
		case PREQ_EC_USE_LOG:
			cnt = 10;
			MsgId = LOG_ECMEISAI;
			break;
		case PREQ_EC_MINASHI_LOG:
			cnt = 12;
			MsgId = LOG_ECMINASHI;
		default:
			break;
		}
// MH810103 MHUT40XX(E) みなし決済の集計を新規に設ける
	}
// MH321800(E) D.Inaba ICクレジット対応

	if( J_PRI == pri_kind )		// 出力プリンタ=ジャーナル
		f_Printer = 1;			// 出力プリンタ種別 = ジャーナル
	else
		f_Printer = 0;			// レシート

	if( p_proc_data->Log_Start == OFF ){

		// 編集開始（初回編集）の場合

		/*------	＜表題＞編集	------*/
		Prn_edit_Title	(										// 表題（"Ｓｕｉｃａ利用明細報"）印字ﾃﾞｰﾀ編集
							LogTitle_prt[2 + cnt],
							FONT_K_YOKOBAI,
							pri_kind
						);

		/*------	１行空白	------*/
		Prn_edit_space( pri_kind );

// MH810105 GG119202(S) T合計連動印字対応
		// T合計連動印字時は機械No.、印字時刻を印字しない
		if (p_proc_data->Prn_no_wk[9] == 0) {
// MH810105 GG119202(E) T合計連動印字対応
		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, msg_data->Kikai_no );				// 機械NO.編集
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );							// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnStr( prn_work, pri_kind );							// 時刻　印字ﾃﾞｰﾀ登録
// MH810105 GG119202(S) T合計連動印字対応
		}
// MH810105 GG119202(E) T合計連動印字対応

		/*------	個別精算情報件数検索	------*/

		p_proc_data->Log_DataPt = 0;							// 検索インデックスは先頭に指定

			// ﾛｸﾞ情報が正常な場合

			/*------	印字要求内容ﾁｪｯｸ	------*/

			switch( msg_data->BType ){	// 検索方法？

				case	0:	// 全て

					sprintf(										// cEditwk1←検索方法印字ﾃﾞｰﾀ
								cEditwk1,
								"全て(%d件)",
								msg_data->LogCount
							);
					p_proc_data->Log_TotalCount = msg_data->LogCount;

					break;

				case	1:	// 日付指定

					//	指定日ﾁｪｯｸ
					if( OK == DateChk( (date_time_rec *)&msg_data->TSttTime ) ){

						// 指定日が正常な場合
						Sdate = dnrmlzm(							// 指定日ﾃﾞｰﾀ取得
											(short)msg_data->TSttTime.Year,
											(short)msg_data->TSttTime.Mon,
											(short)msg_data->TSttTime.Day
										);

						p_proc_data->Log_Sdate = Sdate;				// 指定日ﾃﾞｰﾀｾｰﾌﾞ
						p_proc_data->Log_TotalCount = msg_data->LogCount;
						p_proc_data->Log_DataPt = msg_data->Ffst_no;

						sprintf(									// cEditwk1←検索方法印字ﾃﾞｰﾀ
									cEditwk1,
									"%04d/%d/%d分",
									msg_data->TSttTime.Year,
									msg_data->TSttTime.Mon,
									msg_data->TSttTime.Day
								);
					}
					else{
						// 指定日が異常な場合
						Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
						edit_end = ON;								// 編集終了
					}

					break;

// MH810105 GG119202(S) T合計連動印字対応
				case 2:		// 期間指定
					//	検索開始日ﾁｪｯｸ
					if( NG == DateChk( (date_time_rec *)&msg_data->TSttTime ) ){
						// 指定日が異常な場合
						Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
						edit_end = ON;								// 編集終了
						break;
					}
					//	検索終了日ﾁｪｯｸ
					if( NG == DateChk( (date_time_rec *)&msg_data->TEndTime ) ){
						// 指定日が異常な場合
						Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
						edit_end = ON;								// 編集終了
						break;
					}
					// 検索期間（開始日／終了日）が正常な場合
					StartTime = Nrm_YMDHM((date_time_rec*)&msg_data->TSttTime);
					EndTime = Nrm_YMDHM((date_time_rec*)&msg_data->TEndTime);
					if (StartTime <= EndTime) {
						// 検索開始日　＜＝　検索終了日（ＯＫ）
						p_proc_data->Log_TotalCount = msg_data->LogCount;
						p_proc_data->Log_DataPt = msg_data->Ffst_no;
					}
					else {
						// 検索開始日　＞　検索終了日（ＮＧ）
						Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
						edit_end = ON;								// 編集終了
					}
					break;
// MH810105 GG119202(E) T合計連動印字対応

				default:	// その他（検索方法指定ｴﾗｰ）

					Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録

					edit_end = ON;									// 編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
					break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			}

			if( edit_end != ON ){

				// 検索方法の指定が正常な場合

// MH810105 GG119202(S) T合計連動印字対応
				// T合計連動印字時は検索範囲を印字しない
				if (p_proc_data->Prn_no_wk[9] == 0) {
// MH810105 GG119202(E) T合計連動印字対応
				/*------	＜検索方法＞編集	------*/
				PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
				PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録

				/*------	１行空白	------*/
				Prn_edit_space( pri_kind );
// MH810105 GG119202(S) T合計連動印字対応
				}
// MH810105 GG119202(E) T合計連動印字対応

				/*------	編集制御ﾜｰｸｾｯﾄ	------*/
				p_proc_data->Log_Start	= ON;						// Log_Start	← ﾛｸﾞﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ
// MH810105 GG119202(S) みなし決済プリントに直前取引内容を印字する
				p_proc_data->Prn_no_wk[5] = 1;						// 直取印字のセパレータ印字フラグ
// MH810105 GG119202(E) みなし決済プリントに直前取引内容を印字する

				if( p_proc_data->Log_TotalCount == 0 ){
					// 格納件数が０の場合
					edit_end = ON;									// 編集終了
// MH810105 GG119202(S) T合計連動印字対応
					if (p_proc_data->Prn_no_wk[9] != 0) {
						Prn_edit_Title( "みなし決済情報なし", FONT_K_NML, pri_kind );
					}
// MH810105 GG119202(E) T合計連動印字対応
				}
			}
	}	// 初回編集処理end

	else{

		// ２回目以降の編集処理

		switch( msg_data->BType ){	// 検索方法？

			case	0:	// 全て
				if( p_proc_data->Log_Edit == OFF ){			// １精算ﾃﾞｰﾀ編集中
					for( ; p_proc_data->Log_TotalCount > 0 ; ){	// 日付が一致するﾛｸﾞ情報を格納件数分検索する
						if(0 == Ope_Log_1DataGet( eLOG_PAYMENT, p_proc_data->Log_DataPt, (void *)&Pri_Work[f_Printer].Receipt_data ) ){
							// データが取得エラーの場合は印字しない
							p_proc_data->Log_TotalCount = 0;
							edit_end = ON;	// 編集終了
							break;
						}
// MH321800(S) D.Inaba ICクレジット対応
// 						if(is_match_receipt((Receipt_data*)&Pri_Work[f_Printer].Receipt_data, 0, 0, LOG_SCAMEISAI)){
// 							// 対象ﾛｸﾞ情報の精算日が指定日と一致した場合
// 							break;							// 検索ﾙｰﾌﾟを抜ける
// 						}
// MH810103 MHUT40XX(S) みなし決済の集計を新規に設ける
//						if ( isEC_USE() ) {
//							if(is_match_receipt((Receipt_data*)&Pri_Work[f_Printer].Receipt_data, 0, 0, LOG_ECMEISAI)){
//								// 対象ﾛｸﾞ情報の精算日が指定日と一致した場合
//								break;						// 検索ﾙｰﾌﾟを抜ける
//							}
//						} else {
//							if(is_match_receipt((Receipt_data*)&Pri_Work[f_Printer].Receipt_data, 0, 0, LOG_SCAMEISAI)){
//								// 対象ﾛｸﾞ情報の精算日が指定日と一致した場合
//								break;						// 検索ﾙｰﾌﾟを抜ける
//							}
//						}
						if(is_match_receipt((Receipt_data*)&Pri_Work[f_Printer].Receipt_data, 0, 0, MsgId)){
							// 対象ﾛｸﾞ情報の精算日が指定日と一致した場合
							break;						// 検索ﾙｰﾌﾟを抜ける
						}
// MH810103 MHUT40XX(E) みなし決済の集計を新規に設ける
// MH321800(E) D.Inaba ICクレジット対応						
						p_proc_data->Log_DataPt++;			// 次に検索するログのインデックスをセット
					}
				}
				break;

			case	1:	// 日付指定
				if( p_proc_data->Log_Edit == OFF ){			// １精算ﾃﾞｰﾀ編集中
					for( ; p_proc_data->Log_TotalCount > 0 ; ){	// 日付が一致するﾛｸﾞ情報を格納件数分検索する
						if(0 == Ope_Log_1DataGet( eLOG_PAYMENT, p_proc_data->Log_DataPt, (void *)&Pri_Work[f_Printer].Receipt_data ) ){
							// データが取得エラーの場合は印字しない
							p_proc_data->Log_TotalCount = 0;
							edit_end = ON;	// 編集終了
							break;
						}
//						if( seisan_date == p_proc_data->Log_Sdate ){
// MH321800(S) D.Inaba ICクレジット対応
// 						if(is_match_receipt((Receipt_data*)&Pri_Work[f_Printer].Receipt_data, 0, 0, LOG_SCAMEISAI)){
// 							// 対象ﾛｸﾞ情報の精算日が指定日と一致した場合
// 							break;							// 検索ﾙｰﾌﾟを抜ける
// 						}
// MH810103 MHUT40XX(S) みなし決済の集計を新規に設ける
//						if ( isEC_USE() ) {
//							if(is_match_receipt((Receipt_data*)&Pri_Work[f_Printer].Receipt_data, 0, 0, LOG_ECMEISAI)){
//								// 対象ﾛｸﾞ情報の精算日が指定日と一致した場合
//								break;						// 検索ﾙｰﾌﾟを抜ける
//							}
//						} else {
//							if(is_match_receipt((Receipt_data*)&Pri_Work[f_Printer].Receipt_data, 0, 0, LOG_SCAMEISAI)){
//								// 対象ﾛｸﾞ情報の精算日が指定日と一致した場合
//								break;						// 検索ﾙｰﾌﾟを抜ける
//							}
//						}
						if(is_match_receipt((Receipt_data*)&Pri_Work[f_Printer].Receipt_data, 0, 0, MsgId)){
							// 対象ﾛｸﾞ情報の精算日が指定日と一致した場合
							break;						// 検索ﾙｰﾌﾟを抜ける
						}
// MH810103 MHUT40XX(E) みなし決済の集計を新規に設ける
// MH321800(E) D.Inaba ICクレジット対応	
						p_proc_data->Log_DataPt++;			// 次に検索するログのインデックスをセット
					}
				}
				break;

// MH810105 GG119202(S) T合計連動印字対応
			case	2:	// 期間指定
				StartTime = Nrm_YMDHM((date_time_rec*)&msg_data->TSttTime);	// 期間開始日時情報取得
				EndTime = Nrm_YMDHM((date_time_rec*)&msg_data->TEndTime);	// 期間終了日時情報取得
				if( p_proc_data->Log_Edit == OFF ){			// １精算ﾃﾞｰﾀ編集中
					for( ; p_proc_data->Log_TotalCount > 0 ; ){	// 日付が一致するﾛｸﾞ情報を格納件数分検索する
						if(0 == Ope_Log_1DataGet( eLOG_PAYMENT, p_proc_data->Log_DataPt, (void *)&Pri_Work[f_Printer].Receipt_data ) ){
							// データが取得エラーの場合は印字しない
							p_proc_data->Log_TotalCount = 0;
							edit_end = ON;	// 編集終了
							break;
						}
						if(is_match_receipt((Receipt_data*)&Pri_Work[f_Printer].Receipt_data, StartTime, EndTime, MsgId)){
							// 対象ﾛｸﾞ情報の精算日が指定日と一致した場合
							break;							// 検索ﾙｰﾌﾟを抜ける
						}
						p_proc_data->Log_DataPt++;			// 次に検索するログのインデックスをセット
					}
				}
				break;
// MH810105 GG119202(E) T合計連動印字対応
		}

		if( p_proc_data->Log_TotalCount > 0 ){				// 格納件数分の検索＆編集終了？(N)

			// 格納件数分の検索＆編集を終了していない場合

			p_proc_data->Log_Edit = ON;						// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞｾｯﾄ

			Flap_Sub_FlgB = Flap_Sub_Flg;
			Flap_Sub_Flg = 0;
// MH321800(S) D.Inaba ICクレジット対応
			if( Pri_Work[f_Printer].Receipt_data.Electron_data.Ec.E_Status.BIT.deemed_receive == 1 ){
			// 決済精算中止(復決済)フラグが立っている
			ret2 = Recv_DeemedData_edit(							// 印字対象精算ﾃﾞｰﾀ編集
								(Receipt_data *)&Pri_Work[f_Printer].Receipt_data,
								pri_kind,
								p_proc_data
							);
			}
			else {
// MH321800(E) D.Inaba ICクレジット対応	
// MH810103 MHUT40XX(S) みなし決済の集計を新規に設ける
			if( MsgId == LOG_ECMINASHI && Pri_Work[f_Printer].Receipt_data.Electron_data.Ec.E_Status.BIT.deemed_sett_fin == 1 ){
// MH810105(S) MH364301 QRコード決済対応
//				// みなし決済プリントよりみなし決済情報の印字要求を処理する際のみ、発生時刻を印字したいため、使用していないdummyに仮のフラグを格納しておく
//				// ここでのみdummyに値を入れるため、本来のPaydataには影響しない
//				Pri_Work[f_Printer].Receipt_data.Electron_data.Ec.dummy = 1;
				// みなし決済プリントよりみなし決済情報の印字要求を処理する際のみ、発生時刻を印字したいため、ﾌﾗｸﾞON
				Pri_Work[f_Printer].Receipt_data.Electron_data.Ec.E_Flag.BIT.minashi_tim_pri = 1;
// MH810105(E) MH364301 QRコード決済対応
			}
// MH810103 MHUT40XX(E) みなし決済の集計を新規に設ける
			ret2 = RYOUSYUU_edit(							// 印字対象精算ﾃﾞｰﾀ編集
									(Receipt_data *)&Pri_Work[f_Printer].Receipt_data,
									pri_kind,
									p_proc_data
								);
// MH321800(S) D.Inaba ICクレジット対応
			}
// MH321800(E) D.Inaba ICクレジット対応	

			Flap_Sub_Flg = Flap_Sub_FlgB;

			if( ret2 == YES ){

				// １精算ﾃﾞｰﾀ編集終了の場合

				p_proc_data->Log_Edit = OFF;				// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞﾘｾｯﾄ

				p_proc_data->Log_TotalCount--;				// 格納件数ﾃﾞｸﾘﾒﾝﾄ
				p_proc_data->Log_DataPt++;					// 次に編集するログの情報のインデックスをセット

			}
		}

		if( p_proc_data->Log_TotalCount == 0 ){				// 全ﾛｸﾞ情報編集終了？

			// 格納件数分の編集が終了した場合
			edit_end = ON;									// 編集終了
		}

	}	// ２回目以降の編集処理end

	/*------	編集終了ﾁｪｯｸ	------*/
	if( edit_end == ON ){	
		p_proc_data->Final = ON;			// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
// MH810105 GG119202(S) みなし決済プリントに直前取引内容を印字する
		p_proc_data->Prn_no_wk[5] = 0;
// MH810105 GG119202(E) みなし決済プリントに直前取引内容を印字する
	}
}

// MH321800(S) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)
//#ifdef	FUNCTION_MASK_EDY
// //[]----------------------------------------------------------------------[]
// ///	@brief			Ｅｄｙ日毎集計印字ﾃﾞｰﾀ編集処理
// //[]----------------------------------------------------------------------[]
// ///	@param[in]		msg_data		ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ
// ///	@param[in]		pri_kind		印字先ﾌﾟﾘﾝﾀ
// ///										R_PRI  : ﾚｼｰﾄ<br>
// ///										J_PRI  : ｼﾞｬｰﾅﾙ
// ///	@param[in]		p_proc_data		編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
// ///	@return			void
// ///	@author			Y.Ise
// ///	@note			None
// ///	@attention		None
// //[]----------------------------------------------------------------------[]
// ///	@date			Create	:	2008/11/11<br>
// ///					Update	:	
// //[]------------------------------------- Copyright(C) 2005 AMANO Corp.---[]
//void EdySyuLog_edit( T_FrmLogPriReq2 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
//{
//	uchar	ret;				// ﾛｸﾞ情報ﾁｪｯｸ結果
//	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ（OFF：印字継続／ON：印字終了）
//	uchar	edit_flg = YES;		// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）
//	uchar	edit_cnt = 0;		// 編集行数
//	uchar	f_cond_match = 0;	// 印字条件クリアフラグ(0:印字可能/1:印字不可)
//	ushort	seisan_date;		// 集計日ﾃﾞｰﾀ
//	ushort	Sdate, Edate;		// 検索開始日, 検索終了日情報
//	long	cnt;				// 印字する表題の文字列テーブルの番号
//
//	syuukei_info	*buf;		// 集計情報が保存されている領域のアドレス
//	date_time_rec	b_tim;		// 集計日時
//
//	buf = &Syuukei_sp.edy_inf;
//	cnt = 1;
//
//	// 編集開始（初回編集）の場合
//	if( p_proc_data->Log_Start == OFF ) {
//
//		/*------	＜表題＞編集	------*/
//		// 表題（"Edy集計"）印字ﾃﾞｰﾀ編集
//		Prn_edit_Title( LogTitle_prt[cnt], FONT_K_YOKOBAI, pri_kind );
//
//		/*------	１行空白	------*/
//		if( pri_kind == R_PRI ) {
//			// 印字先＝レシートでない（ジャーナル印字またはログ印字の場合、スペース行なし）
//			Prn_edit_space( pri_kind );
//		}
//
//		/*------	＜機械NO.＞編集	------*/
//		KikaiNoSet( cEditwk1, msg_data->Kikai_no );					// 機械NO.編集
//		Str_Set1( cEditwk1,	"", pri_kind );							// 文字列１：機械NO.印字ﾃﾞｰﾀ
//																	// 文字列２：なし
//																	// 印字先ﾌﾟﾘﾝﾀ
//
//		/*------	＜時刻＞編集	------*/
//		Prn_edit_NowDate( prn_work );								// 現在日時印字ﾃﾞｰﾀ編集
//		PCMD_CENTER( pri_kind );									// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
//		PrnStr( prn_work, pri_kind );								// 時刻　印字ﾃﾞｰﾀ登録
//
//		Sdate = dnrmlzm(							// 検索開始日ﾃﾞｰﾀ取得
//							(short)msg_data->TSttTime.Year,
//							(short)msg_data->TSttTime.Mon,
//							(short)msg_data->TSttTime.Day
//						);
//		Edate = dnrmlzm(							// 検索終了日ﾃﾞｰﾀ取得
//							(short)msg_data->TEndTime.Year,
//							(short)msg_data->TEndTime.Mon,
//							(short)msg_data->TEndTime.Day
//						);
//
//		if( Sdate <= Edate ){	// 開始日／終了日ﾁｪｯｸ：検索開始日　＜＝　検索終了日（ＯＫ）
//			p_proc_data->Log_Sdate = Sdate;			// 検索開始日ﾃﾞｰﾀｾｰﾌﾞ
//			p_proc_data->Log_Edate = Edate;			// 検索終了日ﾃﾞｰﾀｾｰﾌﾞ
//			ret = OK;
//		}
//		else{					// 検索開始日　＞　検索終了日（ＮＧ）
//			Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
//			ret = NG;
//		}
//
//		if( ret == OK ) {
//
//			// ﾛｸﾞ情報が正常な場合
//
//			// 検索方法・指定日時印字
//			edit_end = SearchTypeData_edit2(msg_data, p_proc_data, SearchKind_prt[cnt]);
//
//			/*------	＜検索方法＞編集	------*/
//			PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
//			PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録
//
//			p_proc_data->Log_Start	= ON;							// Log_Start	← ﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ
//			p_proc_data->Log_Count	= buf->cnt;						// Log_Count	← 件数ｾｯﾄ 
//
//			// Log_DataPt	←最古ﾃﾞｰﾀ配列番号ｾｯﾄ
//			p_proc_data->Log_DataPt	= ((buf->ptr + SYUUKEI_DAY) - (buf->cnt - 1)) % SYUUKEI_DAY;
//			// 次の印字対象検索処理
//			for(f_cond_match = 0; (!f_cond_match) && (p_proc_data->Log_Count); )
//			{
//				// 格納件数ﾃﾞｸﾘﾒﾝﾄ
//				p_proc_data->Log_Count--;
//				/* 有効データ判定 */
//				seisan_date = dnrmlzm(					// 対象ﾛｸﾞ情報の精算日取得
//						(short)buf->bun[p_proc_data->Log_DataPt].SyuTime.Year,
//						(short)buf->bun[p_proc_data->Log_DataPt].SyuTime.Mon,
//						(short)buf->bun[p_proc_data->Log_DataPt].SyuTime.Day
//					);
//				switch( msg_data->BType )	// 検索方法？
//				{
//				default:	// 規定にない値(異常)
//				case	0:	// 全て
//					f_cond_match = 1;						// 印字可能
//					break;
//				case	1:	// 日付指定
//					/* 対象ﾛｸﾞ情報の精算日と指定日が一致 */
//					if(seisan_date == p_proc_data->Log_Sdate)
//					{
//						f_cond_match = 1;					// 印字可能
//					}
//					break;
//				case	2:	// 期間指定
//					/* 対象ﾛｸﾞ情報の精算日と指定日が一致 */
//					if((seisan_date >= p_proc_data->Log_Sdate) && (seisan_date <= p_proc_data->Log_Edate))
//					{
//						f_cond_match = 1;					// 印字可能
//					}
//					break;
//				}
//				if(!f_cond_match)
//				{
//					/* Log_DataPt ← 次に編集するﾛｸﾞ情報の配列番号ｾｯﾄ */
//					p_proc_data->Log_DataPt	= Prn_log_search2( p_proc_data->Log_DataPt, SYUUKEI_DAY );
//				}
//			}
//			// ﾃﾞｰﾀ番号（印字ｼｰｹﾝｼｬﾙNo.）ｾｯﾄ
//			p_proc_data->Log_no_wk[0] = 1;
//
//			// 格納件数が０の場合＝集計データなしの場合
//			if( !p_proc_data->Log_Count ) {
//				// １行空白
//				if( pri_kind == R_PRI ) {
//					Prn_edit_space( pri_kind );
//				}
//				// Suica PASMO集計データなしの場合の印字
//				Prn_edit_Title( "集計データなし", FONT_K_NML, pri_kind );
//				// １行空白
//				if( pri_kind == R_PRI ) {
//					Prn_edit_space( pri_kind );
//				}
//				// 印字終了
//				edit_end = ON;
//			}
//		}
//		// ﾛｸﾞ情報が異常な場合
//		else{
//			// 印字終了
//			edit_end = ON;
//		}
//	}	// 初回編集処理end
//
//	// ２回目以降の編集処理	
//	else {
//
//		/*------------------------------------------------------------------------------*/
//		/*	編集処理制御ﾜｰｸを以下のように使用する										*/
//		/*		Prn_no_data1	：	処理中の印字項目番号を格納							*/
//		/*								0：表題											*/
//		/*								1：SuicaPASMO集計印字ﾃﾞｰﾀ						*/
//		/*		Prn_no_data2	：	未使用												*/
//		/*------------------------------------------------------------------------------*/
//		// 集計印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟ
//		for( ; ((edit_flg == YES) || (edit_end == OFF)) ; ) {
//
//			switch( p_proc_data->Prn_no_data1){		// 印字項目？
//
//				case	0:		// ＜（Edy集計日時）＞
//					// １行空白
//					if( pri_kind == R_PRI ) {
//						// 印字先＝レシートでない（ジャーナル印字またはログ印字の場合、スペース行なし）
//						Prn_edit_space( pri_kind );
//						edit_cnt++;
//					}
//					// Edy集計集計の年月日を取得
//					memcpy( &b_tim, &buf->bun[p_proc_data->Log_DataPt].SyuTime, sizeof(date_time_rec) );
//					sprintf( cEditwk1, "%04d/%02d/%02d分", b_tim.Year, b_tim.Mon, b_tim.Day );
//
//					// 印字ﾃﾞｰﾀ編集
//					edit_cnt += Prn_edit_Sitei1line( cEditwk1, (ulong)buf->bun[p_proc_data->Log_DataPt].cnt,
//													Pri_Tanni[PriT_KAISUU], Pri_Tanni[PriT_KAI], pri_kind );
//													// 集計範囲、ﾃﾞｰﾀ
//													// 単位１、単位２、印字先ﾌﾟﾘﾝﾀ
//					// 印字ﾃﾞｰﾀ編集
//					edit_cnt += Prn_edit_Sitei1line( "", buf->bun[p_proc_data->Log_DataPt].ryo,
//													Pri_Tanni[PriT_KINGAK], Pri_Tanni[PriT_YEN], pri_kind );
//													// 集計範囲、ﾃﾞｰﾀ
//													// 単位１、単位２、印字先ﾌﾟﾘﾝﾀ
//
//					// 編集行数ﾁｪｯｸ
//					edit_flg = NO;
//					p_proc_data->Prn_no_data1 = 0xff;
//					p_proc_data->Prn_no_data2 = 0;
//					break;
//
//				default:		// ＜項目番号ｴﾗｰ＞
//					edit_flg = NO;
//					edit_end = ON;	// 編集終了
//					p_proc_data->Prn_no_data1 = 0;
//					p_proc_data->Prn_no_data2 = 0;
//					break;
//			}
//
//			// 編集処理終了フラグＯＮ
//			if( edit_flg == NO ) { 
//
//				// 項目印字データ作成終了
//				if( p_proc_data->Prn_no_data1 == 0xFF ) {
//					//－－－－－　次編集ﾛｸﾞ情報検索　－－－－－
//					p_proc_data->Prn_no_data1 = 0;
//					p_proc_data->Prn_no_data2 = 0;
//
//					// 次の印字対象検索処理
//					for(f_cond_match = 0; (!f_cond_match) && (p_proc_data->Log_Count); )
//					{
//						// 格納件数ﾃﾞｸﾘﾒﾝﾄ
//						p_proc_data->Log_Count--;
//						/* Log_DataPt ← 次に編集するﾛｸﾞ情報の配列番号ｾｯﾄ */
//						p_proc_data->Log_DataPt	= Prn_log_search2( p_proc_data->Log_DataPt, SYUUKEI_DAY );
//						/* 有効データ判定 */
//						seisan_date = dnrmlzm(					// 対象ﾛｸﾞ情報の精算日取得
//								(short)buf->bun[p_proc_data->Log_DataPt].SyuTime.Year,
//								(short)buf->bun[p_proc_data->Log_DataPt].SyuTime.Mon,
//								(short)buf->bun[p_proc_data->Log_DataPt].SyuTime.Day
//							);
//						switch( msg_data->BType )	// 検索方法？
//						{
//						default:	// 規定にない値(異常)
//						case	0:	// 全て
//							f_cond_match = 1;						// 印字可能
//							break;
//						case	1:	// 日付指定
//							/* 対象ﾛｸﾞ情報の精算日と指定日が一致 */
//							if(seisan_date == p_proc_data->Log_Sdate)
//							{
//								f_cond_match = 1;					// 印字可能
//							}
//							break;
//						case	2:	// 期間指定
//							/* 対象ﾛｸﾞ情報の精算日と指定日が一致 */
//							if((seisan_date >= p_proc_data->Log_Sdate) && (seisan_date <= p_proc_data->Log_Edate))
//							{
//								f_cond_match = 1;					// 印字可能
//							}
//							break;
//						}
//					}
//
//					// ﾃﾞｰﾀ番号（印字ｼｰｹﾝｼｬﾙNo.）更新
//					p_proc_data->Log_no_wk[0]++;
//
//					// 全ﾛｸﾞ情報編集終了
//					if( !p_proc_data->Log_Count ) {
//						// 格納件数分の編集が終了した場合
//						edit_end = ON;	// 編集終了
//					}
//				} 
//				break;
//			}
//		}
//	}	// ２回目以降の編集処理end
//	// 編集終了ﾁｪｯｸ
//	if( edit_end == ON ){	
//		// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
//		p_proc_data->Final = ON;
//	}
//}
//#endif
// MH321800(E) Y.Tanizaki ICクレジット対応 不要機能削除(Edy)

//[]----------------------------------------------------------------------[]
///	@brief			Suica日毎集計印字ﾃﾞｰﾀ編集処理
//[]----------------------------------------------------------------------[]
///	@param[in]		msg_data		ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in]		pri_kind		印字先ﾌﾟﾘﾝﾀ
///										R_PRI  : ﾚｼｰﾄ<br>
///										J_PRI  : ｼﾞｬｰﾅﾙ
///	@param[in]		p_proc_data		編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
///	@author			Y.Ise
///	@note			None
///	@attention		None
//[]----------------------------------------------------------------------[]
///	@date			Create	:	2008/11/11<br>
///					Update	:	
//[]------------------------------------- Copyright(C) 2005 AMANO Corp.---[]
void SuicaSyuLog_edit( T_FrmLogPriReq2 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	ret;				// ﾛｸﾞ情報ﾁｪｯｸ結果
	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ（OFF：印字継続／ON：印字終了）
	uchar	edit_flg = YES;		// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）
	uchar	edit_cnt = 0;		// 編集行数
	uchar	f_cond_match = 0;	// 印字条件クリアフラグ(0:印字可能/1:印字不可)
	ushort	seisan_date;		// 集計日ﾃﾞｰﾀ
	ushort	Sdate, Edate;		// 検索開始日, 検索終了日情報
	long	cnt;				// 印字する表題の文字列テーブルの番号

	syuukei_info	*buf;		// 集計情報が保存されている領域のアドレス
	date_time_rec	b_tim;		// 集計日時

	buf = &Syuukei_sp.sca_inf;	// 集計ログへのアドレスをセット
	cnt = prm_get(COM_PRM, S_SCA, 1, 1, 1) + 7;

	// 編集開始（初回編集）の場合
	if( p_proc_data->Log_Start == OFF ) {

		/*------	＜表題＞編集	------*/
		// 表題（"Suica集計"）印字ﾃﾞｰﾀ編集
		Prn_edit_Title( LogTitle_prt[cnt], FONT_K_YOKOBAI, pri_kind );

		/*------	１行空白	------*/
		if( pri_kind == R_PRI ) {
			// 印字先＝レシートでない（ジャーナル印字またはログ印字の場合、スペース行なし）
			Prn_edit_space( pri_kind );
		}

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet( cEditwk1, msg_data->Kikai_no );					// 機械NO.編集
		Str_Set1( cEditwk1,	"", pri_kind );							// 文字列１：機械NO.印字ﾃﾞｰﾀ
																	// 文字列２：なし
																	// 印字先ﾌﾟﾘﾝﾀ

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );								// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );									// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnStr( prn_work, pri_kind );								// 時刻　印字ﾃﾞｰﾀ登録

		Sdate = dnrmlzm(							// 検索開始日ﾃﾞｰﾀ取得
							(short)msg_data->TSttTime.Year,
							(short)msg_data->TSttTime.Mon,
							(short)msg_data->TSttTime.Day
						);
		Edate = dnrmlzm(							// 検索終了日ﾃﾞｰﾀ取得
							(short)msg_data->TEndTime.Year,
							(short)msg_data->TEndTime.Mon,
							(short)msg_data->TEndTime.Day
						);

		if( Sdate <= Edate ){	// 開始日／終了日ﾁｪｯｸ：検索開始日　＜＝　検索終了日（ＯＫ）
			p_proc_data->Log_Sdate = Sdate;			// 検索開始日ﾃﾞｰﾀｾｰﾌﾞ
			p_proc_data->Log_Edate = Edate;			// 検索終了日ﾃﾞｰﾀｾｰﾌﾞ
			ret = OK;
		}
		else{					// 検索開始日　＞　検索終了日（ＮＧ）
			Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
			ret = NG;
		}

		if( ret == OK ) {

			// ﾛｸﾞ情報が正常な場合

			// 検索方法・指定日時印字
			edit_end = SearchTypeData_edit2(msg_data, p_proc_data, SearchKind_prt[cnt]);

			/*------	＜検索方法＞編集	------*/
			PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
			PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録

			p_proc_data->Log_Start	= ON;							// Log_Start	← ﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ
			p_proc_data->Log_Count	= buf->cnt;						// Log_Count	← 件数ｾｯﾄ 

			// Log_DataPt	←最古ﾃﾞｰﾀ配列番号ｾｯﾄ
			p_proc_data->Log_DataPt	= ((buf->ptr + SYUUKEI_DAY) - (buf->cnt - 1)) % SYUUKEI_DAY;
			// 次の印字対象検索処理
			for(f_cond_match = 0; (!f_cond_match) && (p_proc_data->Log_Count); )
			{
				// 格納件数ﾃﾞｸﾘﾒﾝﾄ
				p_proc_data->Log_Count--;
				/* 有効データ判定 */
				seisan_date = dnrmlzm(					// 対象ﾛｸﾞ情報の精算日取得
						(short)buf->bun[p_proc_data->Log_DataPt].SyuTime.Year,
						(short)buf->bun[p_proc_data->Log_DataPt].SyuTime.Mon,
						(short)buf->bun[p_proc_data->Log_DataPt].SyuTime.Day
					);
				switch( msg_data->BType )	// 検索方法？
				{
				default:	// 規定にない値(異常)
				case	0:	// 全て
					f_cond_match = 1;						// 印字可能
					break;
				case	1:	// 日付指定
					/* 対象ﾛｸﾞ情報の精算日と指定日が一致 */
					if(seisan_date == p_proc_data->Log_Sdate)
					{
						f_cond_match = 1;					// 印字可能
					}
					break;
				case	2:	// 期間指定
					/* 対象ﾛｸﾞ情報の精算日と指定日が一致 */
					if((seisan_date >= p_proc_data->Log_Sdate) && (seisan_date <= p_proc_data->Log_Edate))
					{
						f_cond_match = 1;					// 印字可能
					}
					break;
				}
				if(!f_cond_match)
				{
					/* Log_DataPt ← 次に編集するﾛｸﾞ情報の配列番号ｾｯﾄ */
					p_proc_data->Log_DataPt	= Prn_log_search2( p_proc_data->Log_DataPt, SYUUKEI_DAY );
				}
			}
			// ﾃﾞｰﾀ番号（印字ｼｰｹﾝｼｬﾙNo.）ｾｯﾄ
			p_proc_data->Log_no_wk[0] = 1;

			// 格納件数が０の場合＝集計データなしの場合
			if( !p_proc_data->Log_Count ) {
				// １行空白
				if( pri_kind == R_PRI ) {
					Prn_edit_space( pri_kind );
				}
				// Suica PASMO集計データなしの場合の印字
				Prn_edit_Title( "集計データなし", FONT_K_NML, pri_kind );
				// １行空白
				if( pri_kind == R_PRI ) {
					Prn_edit_space( pri_kind );
				}
				// 印字終了
				edit_end = ON;
			}
		}
		// ﾛｸﾞ情報が異常な場合
		else{
			// 印字終了
			edit_end = ON;
		}
	}	// 初回編集処理end

	// ２回目以降の編集処理	
	else {

		/*------------------------------------------------------------------------------*/
		/*	編集処理制御ﾜｰｸを以下のように使用する										*/
		/*		Prn_no_data1	：	処理中の印字項目番号を格納							*/
		/*								0：表題											*/
		/*								1：SuicaPASMO集計印字ﾃﾞｰﾀ						*/
		/*		Prn_no_data2	：	未使用												*/
		/*------------------------------------------------------------------------------*/
		// 集計印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟ
		for( ; ((edit_flg == YES) || (edit_end == OFF)) ; ) {

			switch( p_proc_data->Prn_no_data1){		// 印字項目？

				case	0:		// ＜（Edy集計日時）＞
					// １行空白
					if( pri_kind == R_PRI ) {
						// 印字先＝レシートでない（ジャーナル印字またはログ印字の場合、スペース行なし）
						Prn_edit_space( pri_kind );
						edit_cnt++;
					}
					// Suica集計集計の年月日を取得
					memcpy( &b_tim, &buf->bun[p_proc_data->Log_DataPt].SyuTime, sizeof(date_time_rec) );
					sprintf( cEditwk1, "%04d/%02d/%02d分", b_tim.Year, b_tim.Mon, b_tim.Day );

					// 印字ﾃﾞｰﾀ編集
					edit_cnt += Prn_edit_Sitei1line( cEditwk1, (ulong)buf->bun[p_proc_data->Log_DataPt].cnt,
													Pri_Tanni[PriT_KAISUU], Pri_Tanni[PriT_KAI], pri_kind );
													// 集計範囲、ﾃﾞｰﾀ
													// 単位１、単位２、印字先ﾌﾟﾘﾝﾀ
					// 印字ﾃﾞｰﾀ編集
					edit_cnt += Prn_edit_Sitei1line( "", buf->bun[p_proc_data->Log_DataPt].ryo,
													Pri_Tanni[PriT_KINGAK], Pri_Tanni[PriT_YEN], pri_kind );
													// 集計範囲、ﾃﾞｰﾀ
													// 単位１、単位２、印字先ﾌﾟﾘﾝﾀ

					// 編集行数ﾁｪｯｸ
					edit_flg = NO;
					p_proc_data->Prn_no_data1 = 0xff;
					p_proc_data->Prn_no_data2 = 0;
					break;

				default:		// ＜項目番号ｴﾗｰ＞
					edit_flg = NO;
					edit_end = ON;	// 編集終了
					p_proc_data->Prn_no_data1 = 0;
					p_proc_data->Prn_no_data2 = 0;
					break;
			}

			// 編集処理終了フラグＯＮ
			if( edit_flg == NO ) { 

				// 項目印字データ作成終了
				if( p_proc_data->Prn_no_data1 == 0xFF ) {
					//－－－－－　次編集ﾛｸﾞ情報検索　－－－－－
					p_proc_data->Prn_no_data1 = 0;
					p_proc_data->Prn_no_data2 = 0;

					// 次の印字対象検索処理
					for(f_cond_match = 0; (!f_cond_match) && (p_proc_data->Log_Count); )
					{
						// 格納件数ﾃﾞｸﾘﾒﾝﾄ
						p_proc_data->Log_Count--;
						/* Log_DataPt ← 次に編集するﾛｸﾞ情報の配列番号ｾｯﾄ */
						p_proc_data->Log_DataPt	= Prn_log_search2( p_proc_data->Log_DataPt, SYUUKEI_DAY );
						/* 有効データ判定 */
						seisan_date = dnrmlzm(					// 対象ﾛｸﾞ情報の精算日取得
								(short)buf->bun[p_proc_data->Log_DataPt].SyuTime.Year,
								(short)buf->bun[p_proc_data->Log_DataPt].SyuTime.Mon,
								(short)buf->bun[p_proc_data->Log_DataPt].SyuTime.Day
							);
						switch( msg_data->BType )	// 検索方法？
						{
						default:	// 規定にない値(異常)
						case	0:	// 全て
							f_cond_match = 1;						// 印字可能
							break;
						case	1:	// 日付指定
							/* 対象ﾛｸﾞ情報の精算日と指定日が一致 */
							if(seisan_date == p_proc_data->Log_Sdate)
							{
								f_cond_match = 1;					// 印字可能
							}
							break;
						case	2:	// 期間指定
							/* 対象ﾛｸﾞ情報の精算日と指定日が一致 */
							if((seisan_date >= p_proc_data->Log_Sdate) && (seisan_date <= p_proc_data->Log_Edate))
							{
								f_cond_match = 1;					// 印字可能
							}
							break;
						}
					}

					// ﾃﾞｰﾀ番号（印字ｼｰｹﾝｼｬﾙNo.）更新
					p_proc_data->Log_no_wk[0]++;

					// 全ﾛｸﾞ情報編集終了
					if( !p_proc_data->Log_Count ) {
						// 格納件数分の編集が終了した場合
						edit_end = ON;	// 編集終了
					}
				} 
				break;
			}
		}
	}	// ２回目以降の編集処理end
	// 編集終了ﾁｪｯｸ
	if( edit_end == ON ){	
		// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
		p_proc_data->Final = ON;
	}
}

//[]----------------------------------------------------------------------[]
///	@brief			ログ情報の検索方法印字データ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		data		: ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in/out]	p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in]		str			: エラー時の印字文字列
///	@return			編集終了ﾌﾗｸﾞ
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/07/14<br>
///					Update	: 
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
uchar	SearchTypeData_edit(T_FrmLogPriReq2 *data, PRN_PROC_DATA *p_proc_data, const uchar *str)
{
	uchar	ret = OFF;			// 編集終了ﾌﾗｸﾞ
	uchar	date_chk1 = OK;		// 検索開始日ﾁｪｯｸ結果
	uchar	date_chk2 = OK;		// 検索終了日ﾁｪｯｸ結果
	ushort	Sdate;				// 検索開始日
	ushort	Edate;				// 検索終了日
	ushort	Stime;				// 検索開始時
	ushort	Etime;				// 検索終了時

	//------印字要求内容ﾁｪｯｸ------
	switch(data->BType) {
	case	0:	// 全て
		sprintf(cEditwk1, "全て(%d件)", data->LogCount);
		break;
	case	1:	// 日付指定
		//	指定日ﾁｪｯｸ
		if (OK == DateChk((date_time_rec *)&data->TSttTime)) {
			// 指定日が正常な場合
			Sdate = dnrmlzm(							// 指定日ﾃﾞｰﾀ取得
							(short)data->TSttTime.Year,
							(short)data->TSttTime.Mon,
							(short)data->TSttTime.Day);
			p_proc_data->Log_Sdate = Sdate;				// 指定日ﾃﾞｰﾀｾｰﾌﾞ
			sprintf(cEditwk1, "%04d/%02d/%02d分",
						data->TSttTime.Year,
						data->TSttTime.Mon,
						data->TSttTime.Day);
		} else {
			// 指定日が異常な場合
			Prn_errlg(ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI);	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
			ret = ON;									// 編集終了
		}
		break;
	case	2:	// 期間指定
		//	検索開始日ﾁｪｯｸ
		if (NG == DateChk((date_time_rec *)&data->TSttTime)) {
			Prn_errlg(ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI);	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
			date_chk1 = NG;
		}
		//	検索終了日ﾁｪｯｸ
		if (NG == DateChk((date_time_rec *)&data->TEndTime)) {
			Prn_errlg(ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI);	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
			date_chk2 = NG;
		}
		if ((date_chk1 == OK) && (date_chk2 == OK)) {
			// 検索期間（開始日／終了日）が正常な場合
			Sdate = dnrmlzm(							// 検索開始日ﾃﾞｰﾀ取得
							(short)data->TSttTime.Year,
							(short)data->TSttTime.Mon,
							(short)data->TSttTime.Day);
			Stime = data->TSttTime.Hour;
			Edate = dnrmlzm(							// 検索終了日ﾃﾞｰﾀ取得
							(short)data->TEndTime.Year,
							(short)data->TEndTime.Mon,
							(short)data->TEndTime.Day);
			Etime = data->TEndTime.Hour;
			if ((Sdate < Edate) || (Sdate == Edate && Stime <= Etime)) {		// 開始日／終了日 && 開始時／終了時ﾁｪｯｸ
				// 検索開始日　＜＝　検索終了日（ＯＫ）
				p_proc_data->Log_Sdate = Sdate;			// 検索開始日ﾃﾞｰﾀｾｰﾌﾞ
				p_proc_data->Log_Edate = Edate;			// 検索終了日ﾃﾞｰﾀｾｰﾌﾞ
				p_proc_data->Log_no_wk[0] = Stime;		// 検索開始時ﾃﾞｰﾀｾｰﾌﾞ
				p_proc_data->Log_no_wk[1] = Etime;		// 検索終了時ﾃﾞｰﾀｾｰﾌﾞ
				sprintf(cEditwk1, "%02d/%02d/%02d %02d:%02d～%02d/%02d/%02d %02d:%02d",
							data->TSttTime.Year%100,	// 開始"年"
							data->TSttTime.Mon,			// 開始"月"
							data->TSttTime.Day,			// 開始"日"
							data->TSttTime.Hour,		// 開始"時"
							0,							// 開始"分(=0)"
							data->TEndTime.Year%100,	// 終了"年"
							data->TEndTime.Mon,			// 終了"月"
							data->TEndTime.Day,			// 終了"日"
							data->TEndTime.Hour,		// 終了"時"
							59);						// 終了"分(=59)"
			} else {
				// 検索開始日　＞　検索終了日（ＮＧ）
				Prn_errlg(ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI);	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
				ret = ON;								// 編集終了
			}
		} else {
			// 検索期間（開始日／終了日）が異常な場合
			ret = ON;									// 編集終了
		}
		break;
	default:	// その他（検索方法指定ｴﾗｰ）
		Prn_errlg(ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI);	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
		ret = ON;										// 編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
		break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
	}
	return(ret);
}

//[]----------------------------------------------------------------------[]
///	@brief			ログ情報の検索方法印字データ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		data		: ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in/out]	p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in]		str			: エラー時の印字文字列
///	@return			編集終了ﾌﾗｸﾞ
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/08/08<br>
///					Update	: 
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
uchar	SearchTypeData_edit2(T_FrmLogPriReq2 *data, PRN_PROC_DATA *p_proc_data, const uchar *str)
{
	uchar	ret = OFF;			// 編集終了ﾌﾗｸﾞ
	uchar	date_chk1 = OK;		// 検索開始日ﾁｪｯｸ結果
	uchar	date_chk2 = OK;		// 検索終了日ﾁｪｯｸ結果
	ushort	Sdate;				// 検索開始日
	ushort	Edate;				// 検索終了日

	//------印字要求内容ﾁｪｯｸ------
	switch(data->BType) {
	case	0:	// 全て
		sprintf(cEditwk1, "全て(%d件)", data->LogCount);
		break;
	case	1:	// 日付指定
		//	指定日ﾁｪｯｸ
		if (OK == DateChk((date_time_rec *)&data->TSttTime)) {
			// 指定日が正常な場合
			Sdate = dnrmlzm(							// 指定日ﾃﾞｰﾀ取得
							(short)data->TSttTime.Year,
							(short)data->TSttTime.Mon,
							(short)data->TSttTime.Day);
			p_proc_data->Log_Sdate = Sdate;				// 指定日ﾃﾞｰﾀｾｰﾌﾞ
			sprintf(cEditwk1, "%04d/%02d/%02d分",
						data->TSttTime.Year,
						data->TSttTime.Mon,
						data->TSttTime.Day);
		} else {
			// 指定日が異常な場合
			Prn_errlg(ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI);	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
			ret = ON;									// 編集終了
		}
		break;
	case	2:	// 期間指定
		//	検索開始日ﾁｪｯｸ
		if (NG == DateChk((date_time_rec *)&data->TSttTime)) {
			Prn_errlg(ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI);	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
			date_chk1 = NG;
		}
		//	検索終了日ﾁｪｯｸ
		if (NG == DateChk((date_time_rec *)&data->TEndTime)) {
			Prn_errlg(ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI);	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
			date_chk2 = NG;
		}
		if ((date_chk1 == OK) && (date_chk2 == OK)) {
			// 検索期間（開始日／終了日）が正常な場合
			Sdate = dnrmlzm(							// 検索開始日ﾃﾞｰﾀ取得
							(short)data->TSttTime.Year,
							(short)data->TSttTime.Mon,
							(short)data->TSttTime.Day);
			Edate = dnrmlzm(							// 検索終了日ﾃﾞｰﾀ取得
							(short)data->TEndTime.Year,
							(short)data->TEndTime.Mon,
							(short)data->TEndTime.Day);
			if (Sdate <= Edate) {						// 開始日／終了日ﾁｪｯｸ
				// 検索開始日　＜＝　検索終了日（ＯＫ）
				p_proc_data->Log_Sdate = Sdate;			// 検索開始日ﾃﾞｰﾀｾｰﾌﾞ
				p_proc_data->Log_Edate = Edate;			// 検索終了日ﾃﾞｰﾀｾｰﾌﾞ
				sprintf(cEditwk1, "%04d/%02d/%02d～%04d/%02d/%02d分",
							data->TSttTime.Year,		// 開始"年"
							data->TSttTime.Mon,			// 開始"月"
							data->TSttTime.Day,			// 開始"日"
							data->TEndTime.Year,		// 終了"年"
							data->TEndTime.Mon,			// 終了"月"
							data->TEndTime.Day);		// 終了"日"
			} else {
				// 検索開始日　＞　検索終了日（ＮＧ）
				Prn_errlg(ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI);	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
				ret = ON;								// 編集終了
			}
		} else {
			// 検索期間（開始日／終了日）が異常な場合
			ret = ON;									// 編集終了
		}
		break;
	default:	// その他（検索方法指定ｴﾗｰ）
		Prn_errlg(ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI);	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
		ret = ON;										// 編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
		break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
	}
	return(ret);
}

/*[]-----------------------------------------------------------------------------------------------[]*/
/*|		係員有効印字ﾃﾞｰﾀ編集処理																	|*/
/*[]-----------------------------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	AtendValidData_edit( ushort Kikai_no, ushort Kakari_no, uchar	pri_kind, PRN_PROC_DATA	*p_proc_data )|*/
/*|																									|*/
/*|	PARAMETER		:	uchar	Kikai_no	=	機械Ｎｏ．											|*/
/*|																									|*/
/*|						uchar	Kakari_no	=	係員Ｎｏ．      									|*/
/*|																									|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ											|*/
/*|													R_PRI  : ﾚｼｰﾄ									|*/
/*|													J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																									|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ							|*/
/*|																									|*/
/*|	RETURN VALUE	:	none																		|*/
/*|																									|*/
/*[]-----------------------------------------------------------------------------------------------[]*/
/*|	Author	:	T.namioka																			|*/
/*|	Date	:	2006-03-07																			|*/
/*|	Update	:																						|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----------------------------[]*/

void	AtendValidData_edit( ushort Kikai_no, ushort Kakari_no, uchar	pri_kind, PRN_PROC_DATA	*p_proc_data )
{
	uchar	edit_flg	= YES;		// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）
	uchar	edit_gyou	= 0;		// 編集済み行数
	uchar	edit_cnt	= 0;		// 編集行数ﾜｰｸ
	uchar	next_edit_max;			// 次編集印字内容の最大編集行数
	ushort	kou_no;					// 印字項目番号


	if( p_proc_data->Prn_no == 0 ){

		// 編集開始（初回編集）の場合

		/*------	印字項目ﾒﾆｭｰ作成	------*/
		p_proc_data->Prn_no_wk[0] = 1;												// 印字項目１番目　←　表題
		p_proc_data->Prn_no_wk[1] = 2;												// 印字項目２番目　←　係員無効ﾃﾞｰﾀ
		p_proc_data->Prn_no_wk[2] = 0;

		p_proc_data->Prn_no = 1;													// 印字項目ﾒﾆｭｰ番号ｾｯﾄ
	}

	for( ; edit_flg ; ){															// 編集処理ﾙｰﾌﾟ

		edit_cnt = 0;																// 編集行数ﾘｾｯﾄ
		kou_no = p_proc_data->Prn_no_wk[(p_proc_data->Prn_no)-1];					// 印字項目番号取得

		switch( kou_no ){	// 編集する項目番号により各処理へ分岐

			case	1:		// ＜表題＞印字
				edit_cnt = AtendValid_edit_hyoudai( Kikai_no, Kakari_no, pri_kind );
				break;

			case	2:		// ＜係員無効ﾃﾞｰﾀ＞印字
				edit_cnt = AtendValid_edit_sts( pri_kind, p_proc_data );
				break;

			default:		// その他（項目番号ｴﾗｰ）
				p_proc_data->Prn_no_data1 = 0;
				p_proc_data->Prn_no_data2 = 0;
				break;
		}
		if( (p_proc_data->Prn_no_data1 == 0) && (p_proc_data->Prn_no_data2 == 0) ){	// １項目の編集終了？

			// １項目の編集が終了した場合
			p_proc_data->Prn_no++;													// 項目ﾒﾆｭｰ番号更新（＋１）
			kou_no = p_proc_data->Prn_no_wk[(p_proc_data->Prn_no)-1];				// 次に編集する印字項目番号取得

			if( kou_no == 0 ){														// 印字項目ﾒﾆｭｰ終了？
				p_proc_data->Final	= ON;											// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
				break;																// 編集処理ﾙｰﾌﾟを抜ける
			}
			edit_gyou = (uchar)(edit_gyou + edit_cnt);								// 編集済み行数更新
			next_edit_max = teikid1_edit_tbl[kou_no];								// 次編集項目の最大編集行数ｾｯﾄ

			if( (edit_gyou + next_edit_max) > EDIT_GYOU_MAX ){						// 次項目編集可能？（１ﾌﾞﾛｯｸ最大編集行数ﾁｪｯｸ）
				edit_flg = NO;														// 最大編集行数を超えてしまう場合　→　編集処理ﾙｰﾌﾟを抜ける
			}
		}
		else{
			// １項目の編集が終了していない場合
			edit_flg = NO;															// 編集処理ﾙｰﾌﾟを抜ける
		}
	}
}

/*[]-----------------------------------------------------------------------------------------------[]*/
/*|		係員有効ｶｰﾄﾞ印字表題ﾃﾞｰﾀ編集処理															|*/
/*[]-----------------------------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	AtendValid_edit_hyoudai( Pri_syu, Kikai_no, Kakari_no, Pkno_syu, pri_kind )	|*/
/*|																									|*/
/*|	PARAMETER		:	ushort	Kikai_no	=	機械Ｎｏ．											|*/
/*|																									|*/
/*|						ushort	Kakari_no	=	係員Ｎｏ． (NT4700 MOTOHASHI 05/09/28)				|*/
/*|																									|*/
/*|						uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ											|*/
/*|													R_PRI  : ﾚｼｰﾄ									|*/
/*|													J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																									|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数													|*/
/*|																									|*/
/*[]-----------------------------------------------------------------------------------------------[]*/
/*|	Author	:	T.namioka																			|*/
/*|	Date	:	2006-03-07																			|*/
/*|	Update	:																						|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----------------------------[]*/
uchar	AtendValid_edit_hyoudai( ushort Kikai_no, ushort Kakari_no, uchar pri_kind )
{
	uchar	edit_cnt = 0;	// 編集行数

	/*------	＜表題＞編集	------*/

	edit_cnt += 		Prn_edit_Title	(									// 表題（"係員有効データ"）印字ﾃﾞｰﾀ編集
							"係員有効データ",
							FONT_K_YOKOBAI,
							pri_kind
						);


	/*------	１行空白	------*/
	edit_cnt += Prn_edit_space( pri_kind );

	/*------	＜機械NO.／係員NO.＞編集	------*/
	KikaiNoSet( cEditwk1, Kikai_no );		// 機械NO.編集
	KakariNoSet( cEditwk2, Kakari_no );		// 係員NO.編集

	Str_Set1(								// -----印字ﾃﾞｰﾀ編集-----
				cEditwk1,					// 文字列１：機械NO.印字ﾃﾞｰﾀ
				cEditwk2,					// 文字列２：係員NO.印字ﾃﾞｰﾀ
				pri_kind					// 印字先ﾌﾟﾘﾝﾀ
			);

	edit_cnt++;

	/*------	＜時刻＞編集	------*/
	Prn_edit_NowDate( prn_work );			// 現在日時印字ﾃﾞｰﾀ編集
	PCMD_CENTER( pri_kind );				// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
	PrnFontSize( FONT_A_NML, pri_kind );	// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );	// 漢字（通常）指定
	PrnStr( prn_work, pri_kind );			// 時刻　印字ﾃﾞｰﾀ登録

	edit_cnt++;

	/*------	１行空白	------*/
	edit_cnt += Prn_edit_space( pri_kind );

	return( edit_cnt );
}

/*[]-----------------------------------------------------------------------------------------------[]*/
/*|		係員有効ｶｰﾄﾞ印字ﾃﾞｰﾀ編集処理																|*/
/*[]-----------------------------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	AtendVaild_edit_sts( pri_kind, *p_proc_data )								|*/
/*|																									|*/
/*|	PARAMETER		:	uchar	pri_kind	=	印字先ﾌﾟﾘﾝﾀ											|*/
/*|													R_PRI  : ﾚｼｰﾄ									|*/
/*|													J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																									|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ							|*/
/*|																									|*/
/*|	RETURN VALUE	:	uchar	ret	=	編集行数													|*/
/*|																									|*/
/*[]-----------------------------------------------------------------------------------------------[]*/
/*|	Author	:	T.namioka																			|*/
/*|	Date	:	2006-03-07																			|*/
/*|	Update	:																						|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.----------------------------[]*/
uchar	AtendValid_edit_sts( uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_cnt = 0;		// 編集行数
	uchar	edit_pos = 0;		// 印字ﾃﾞｰﾀ編集位置（左からの印字位置：１～５）

	if( p_proc_data->Prn_no_data1 == 0 ){							// ＜有効＞印字ﾃﾞｰﾀ編集開始？

																	/*------	＜項目名称＞編集	------*/
		PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
		edit_cnt++;													// 編集行数＋１

		p_proc_data->Prn_no_data2 = ADN_VAILD_MAX;					// 編集対象とするID数ｾｯﾄ

	}

	for( ; p_proc_data->Prn_no_data1 < p_proc_data->Prn_no_data2 ; p_proc_data->Prn_no_data1++ ){	// 印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟ
					
		if( Attend_Invalid_table.aino[p_proc_data->Prn_no_data1]!=0 ){

			AtendValid_edit_id( Attend_Invalid_table.aino[dispPos(0,p_proc_data->Prn_no_data1)], edit_pos );	// 対象IDを印字編集ｴﾘｱ（prn_work）へ登録
			edit_pos++;

			if( edit_pos >= 5 ){									// １行分（ID５個）編集終了

				edit_pos = 0;
																	/*------	＜１行分（ID５個）＞編集	------*/
				PCMD_LEFT( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
				PrnFontSize( FONT_A_NML, pri_kind );				// ﾌｫﾝﾄＡ（通常）指定
				PrnFontSize( FONT_K_NML, pri_kind );				// 漢字（通常）指定
				PrnStr( prn_work, pri_kind );						// 編集した印字ﾃﾞｰﾀ登録
				edit_cnt++;											// 編集行数＋１

				if( edit_cnt >= EDIT_GYOU_MAX ){					// 編集最大行数ﾁｪｯｸ
																	// 編集最大行数になった場合
					p_proc_data->Prn_no_data1++;					// 対象ID更新（＋１）
					break;											// 印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟを抜ける
				}
			}
		}
	}

	if(p_proc_data->Prn_no_data1 == 0)
		return(edit_cnt);
															
	if( p_proc_data->Prn_no_data1 >= p_proc_data->Prn_no_data2 ){	// 編集対象とするID数検索終了？
		if( edit_pos != 0 ){										// 編集中のIDあり？
			PrnStr( prn_work, pri_kind );							// 編集した印字ﾃﾞｰﾀ登録
			edit_cnt++;												// 編集行数＋１		
		}
		edit_cnt += Prn_edit_space( pri_kind );						// １行空白
		p_proc_data->Prn_no_data1 = 0;								// 対象ID情報ｸﾘｱ
		p_proc_data->Prn_no_data2 = 0;								// 対象ID数情報ｸﾘｱ
	}
	return( edit_cnt );
}

/*[]---------------------------------------------------------------------------[]*/
/*|		係員無効ID印字ﾃﾞｰﾀ編集処理	 											|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	AtendValid_edit_id( id, pos )							|*/
/*|																				|*/
/*|	PARAMETER		:	ushort	id		=	無効係員ID							|*/
/*|																				|*/
/*|						uchar	pos		=	編集位置(０～４)					|*/
/*|																				|*/
/*|	RETURN VALUE	:	void													|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|																				|*/
/*|	指定されたﾊﾟﾗﾒｰﾀにより無効係員ID印字ﾃﾞｰﾀを編集ｴﾘｱ（prn_work）に編集する		|*/
/*|																				|*/
/*|	＜編集ﾌｫｰﾏｯﾄ＞																|*/
/*|																				|*/
/*| 			012345678901234567890123456789012345							|*/
/*|				xxxxx  xxxxx  xxxxx  xxxxx  xxxxx								|*/
/*|				位置=0 位置=1 位置=2 位置=3 位置=4								|*/
/*|																				|*/
/*|				xxxxx=無効係員ID（５桁固定）									|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	T.namioka														|*/
/*|	Date	:	2006-03-07														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
void	AtendValid_edit_id( ushort id, uchar pos )
{

	switch( pos ){

		case	0:	// １番目に無効係員IDを編集
			sprintf( &prn_work[0],"    %02d                            ", id );// prn_work[0]～[33]に編集
			break;

		case	1:	// ２番目に無効係員IDを編集
			sprintf( &prn_work[6],"     %02d                    ", id );		// prn_work[6]～[33]に編集
			break;

		case	2:	// ３番目に無効係員IDを編集
			sprintf( &prn_work[13],"     %02d              ", id );			// prn_work[13]～[33]に編集
			break;

		case	3:	// ４番目に無効係員IDを編集
			sprintf( &prn_work[20],"     %02d       ", id );					// prn_work[20]～[33]に編集
			break;

		case	4:	// ５番目に無効係員IDを編集
			sprintf( &prn_work[27],"     %02d", id );							// prn_work[27]～[33]に編集
			break;

	}
}

#define  AUTO_PAYMENT_CHARGE_PRINT  8
//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント印字ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in/out]	p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in]		msg			: 精算機No.用
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/01/17<br>
///					Update	: 2008/07/23<br>
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_edit(uchar pri_kind, PRN_PROC_DATA *p_proc_data, T_FrmChargeSetup *msg)
{
	uchar 	store_kind;						// 店割引 or 多店舗割引(11-0001)
	ushort	pri_no = 0;						// 編集項目No.(0=ﾀｲﾄﾙ、1=基本設定、2=車種設定、3=定期設定、4=サービス券設定
											//			5=掛売券設定(店割引or多店舗割引))

#if (5 == AUTO_PAYMENT_PROGRAM)
	if(msg->NowTime.Mon == 0xff && p_proc_data->Prn_no == 0){
		p_proc_data->Prn_no_data1 = 0;
		p_proc_data->Prn_no_data2 = msg->NowTime.Year;
		p_proc_data->Prn_no_wk[0] = 0;
		p_proc_data->Prn_no = AUTO_PAYMENT_CHARGE_PRINT;
	}
#endif
	pri_no = p_proc_data->Prn_no;
	switch (pri_no) {
	case 0:		// 時刻ﾀｲﾄﾙ印字ﾃﾞｰﾀ編集
		ChargeSetup_edit_TimeTitle( msg->Kikai_no, msg->Oiban,(ushort)OPECTL.Kakari_Num, pri_kind, p_proc_data);
		break;
	case C_SOFTVER:	// ソフトウェアバージョン
		if(p_proc_data->Prn_no_data1 == 0){
			ChargeSetup_edit_Title((uchar)pri_no, pri_kind, p_proc_data);		// タイトル印字
		}
		ChargeSetup_edit_SoftVer( pri_kind, p_proc_data );
		p_proc_data->Prn_no_data1++;
		if(p_proc_data->Prn_no_data1 >= 1){					// 全ての項目印字完了
			pri_no++;
			p_proc_data->Prn_no	= pri_no;
			p_proc_data->Prn_no_data1 = 0;
		}
		break;

	case C_BASE_SET:
		if(p_proc_data->Prn_no_data1 == 0){
			ChargeSetup_edit_Title((uchar)pri_no, pri_kind, p_proc_data);		// タイトル印字
		}
		ChargeSetup_edit_BaseData(pri_kind, p_proc_data);						// 基本設定データ編集
		p_proc_data->Prn_no_data1++;
		if(p_proc_data->Prn_no_data1 >= CHARGE_BASEDATAMAX){					// 全ての項目印字完了
			pri_no++;
			p_proc_data->Prn_no	= pri_no;
			p_proc_data->Prn_no_data1 = 0;
		}
		break;
	case C_CAR_SET:		// 車種ﾃﾞｰﾀ編集
		if (p_proc_data->Prn_no_data1 == 0 && p_proc_data->Prn_no_data2 == 0
		&& p_proc_data->Prn_no_wk[0] == 0) {
		// タイトル
			ChargeSetup_edit_Title((uchar)pri_no, pri_kind, p_proc_data);
			p_proc_data->Prn_no_data1++;			// A車種へ
			p_proc_data->Prn_no_wk[3] = 0;			// 車室番号印字有無フラグ0クリア
		} else if (p_proc_data->Prn_no_data2 == 0 && p_proc_data->Prn_no_wk[0] == 0) {
		// 車種データ
			if (p_proc_data->Prn_no_data1 > CHARGE_CARKINDMAX) {
				p_proc_data->Prn_no_data1 = 0;
				pri_no++;							// 定期設定へ
				p_proc_data->Prn_no	= pri_no;
			} else {
				if(p_proc_data->Prn_no_wk[1] == 0 && p_proc_data->Prn_no_wk[2] ==0){									// 初回
					ChargeSetup_edit_Title((uchar)pri_no, pri_kind, p_proc_data);	// タイトル印字
				}
				ChargeSetup_edit_CarkindData( (uchar)(p_proc_data->Prn_no_data1-1), pri_kind ,p_proc_data);		// 種別毎の印字項目
// MH810100(S) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）	
//				if(p_proc_data->Prn_no_wk[1] >= 4){									// 最後まで編集終了
				if(p_proc_data->Prn_no_wk[1] >= 3){									// 最後まで編集終了
// MH810100(E) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）	
					p_proc_data->Prn_no_data2++;		// 料金体系①へ
					p_proc_data->Prn_no_wk[1] = 0;
				}
			}
		} else if (p_proc_data->Prn_no_wk[0] == 0) {
		// 料金体系
			if (p_proc_data->Prn_no_data2 > CHARGE_SYSMAX) {
				p_proc_data->Prn_no_data2 = 0;
				p_proc_data->Prn_no_data1++;		// 次の車種へ
			} else {
				ChargeSetup_edit_ChargeSysData((uchar)(p_proc_data->Prn_no_data2-1),
										(uchar)(p_proc_data->Prn_no_data1-1), pri_kind, p_proc_data);
				p_proc_data->Prn_no_wk[0]++;		// 料金帯①orパターン①へ
			}
		} else {
			if (charge_ctrl.cal_kind == 0) {
		// 料金帯(昼夜帯)
				if (p_proc_data->Prn_no_wk[0] > CHARGE_TYPEMAX) {
					p_proc_data->Prn_no_wk[0] = 0;
					p_proc_data->Prn_no_data2++;	// 次の料金体系へ
				} else {
					ChargeSetup_edit_ChargeTypeData((uchar)(p_proc_data->Prn_no_data2-1), (uchar)(p_proc_data->Prn_no_wk[0]-1),
										(uchar)(p_proc_data->Prn_no_data1-1), pri_kind, p_proc_data);
					p_proc_data->Prn_no_wk[0]++;	// 次の料金帯へ
				}
			} else {
		// パターン(逓減帯)
				if (p_proc_data->Prn_no_wk[0] > PATTERN_MAX) {
					p_proc_data->Prn_no_wk[0] = 0;
					p_proc_data->Prn_no_data2++;	// 次の料金体系へ
				} else {
					ChargeSetup_edit_ChargePatternData((uchar)(p_proc_data->Prn_no_data2-1), (uchar)(p_proc_data->Prn_no_wk[0]-1),
										(uchar)(p_proc_data->Prn_no_data1-1), pri_kind, p_proc_data);
					p_proc_data->Prn_no_wk[0]++;	// 次のパターンへ
				}
			}
		}
		break;
	case C_PAS_SET:		// 定期設定ﾃﾞｰﾀ編集
		if (p_proc_data->Prn_no_data1 == 0) {
		// 定期設定
			ChargeSetup_PassDataGet(0, 0);
			ChargeSetup_edit_Title((uchar)pri_no, pri_kind, p_proc_data);
			if (charge_ctrl.discount_useflag != ON) {
				p_proc_data->Prn_no_data1 = 0;
				pri_no++;
				p_proc_data->Prn_no	= pri_no;
			} else {
				ChargeSetup_edit_PassData(pri_kind, p_proc_data);
				p_proc_data->Prn_no_data1++;
			}
		} else {
			if (p_proc_data->Prn_no_data1 > PASS_KINDMAX) {
				p_proc_data->Prn_no_data1 = 0;
				pri_no++;
				p_proc_data->Prn_no	= pri_no;
			} else {
		// 定期種別設定
				ChargeSetup_edit_PassKindData((uchar)(p_proc_data->Prn_no_data1-1), pri_kind, p_proc_data);
				p_proc_data->Prn_no_data1++;
			}
		}
		break;
	case C_DIS_S_SET:		// サービス券設定ﾃﾞｰﾀ編集
		if (p_proc_data->Prn_no_data1 == 0) {
			ChargeSetup_edit_Title((uchar)pri_no, pri_kind, p_proc_data);
			p_proc_data->Prn_no_data2 = 0;
			ChargeSetup_edit_DiscountData_Lmt( pri_kind, p_proc_data );
			p_proc_data->Prn_no_data2++;
			ChargeSetup_DiscountUseflagGet(S_SER);
			p_proc_data->Prn_no_data1++;
			if (charge_ctrl.discount_useflag != ON) {
				p_proc_data->Prn_no_data1 = 0;
				p_proc_data->Prn_no_data2 = 0;
				pri_no++;
				p_proc_data->Prn_no	= pri_no;
			}
		}else if(p_proc_data->Prn_no_data1 == 1 && p_proc_data->Prn_no_data2 ){
			if (p_proc_data->Prn_no_data2 > SIRVICE_NUMMAX) {
				p_proc_data->Prn_no_data2 = 0;
			}else{
				ChargeSetup_edit_DiscountData_Lmt( pri_kind, p_proc_data );
				p_proc_data->Prn_no_data2++;
			}
		} else {
			if (p_proc_data->Prn_no_data1 > SIRVICE_NUMMAX) {
				p_proc_data->Prn_no_data1 = 0;
				p_proc_data->Prn_no_data2 = 0;
				pri_no++;
				p_proc_data->Prn_no	= pri_no;
			} else {
				ChargeSetup_edit_DiscountData( S_SER, pri_kind, p_proc_data);
				p_proc_data->Prn_no_data1++;
			}
		}
		break;
	case C_DIS_M_SET:		// 店割引 or 多店舗割引設定ﾃﾞｰﾀ編集
		store_kind = (uchar)prm_get(COM_PRM, S_TAT, 1, 1, 1);
		if (store_kind == 0) {		// 掛売券(店割引)
			if (p_proc_data->Prn_no_data1 == 0) {
				ChargeSetup_DiscountUseflagGet(S_STO);
				ChargeSetup_edit_Title((uchar)pri_no, pri_kind, p_proc_data);
				p_proc_data->Prn_no_data1++;
				if (charge_ctrl.discount_useflag != ON) {
					p_proc_data->Prn_no_data1 = 0;
					pri_no++;
					p_proc_data->Prn_no	= pri_no;
				}
			} else {
				if (p_proc_data->Prn_no_data1 > STORE_NUMMAX) {
					pri_no++;
					p_proc_data->Prn_no	= pri_no;
				} else {
					ChargeSetup_edit_DiscountData( S_STO, pri_kind, p_proc_data);
					p_proc_data->Prn_no_data1++;
				}
			}
		} else {					// 掛売券(多店舗割引)
			if (p_proc_data->Prn_no_data1 == 0 && p_proc_data->Prn_no_data2 == 0) {
				ChargeSetup_DiscountUseflagGet(S_TAT);
				ChargeSetup_edit_Title((uchar)pri_no, pri_kind, p_proc_data);
				p_proc_data->Prn_no_data1++;
				if (charge_ctrl.discount_useflag != ON) {
					p_proc_data->Prn_no_data1 = 0;
					pri_no++;
					p_proc_data->Prn_no	= pri_no;
				}
			} else if (p_proc_data->Prn_no_data1 <= STORES_KINDMAX) {
				ChargeSetup_edit_DiscountData( S_TAT, pri_kind, p_proc_data);
				p_proc_data->Prn_no_data1++;
			} else {
				if (p_proc_data->Prn_no_data2 > STORES_NUMMAX) {
					pri_no++;
					p_proc_data->Prn_no	= pri_no;
				} else {
					ChargeSetup_edit_DiscountData( 0, pri_kind, p_proc_data);
					p_proc_data->Prn_no_data2++;
				}
			}
		}
		break;
	case C_PREPAID_SET:							// ﾌﾟﾘﾍﾟｲﾄﾞ設定
		ChargeSetup_edit_PriCard((uchar)pri_no, pri_kind, p_proc_data);
		if(p_proc_data->Prn_no_wk[1] >= 3)
		{
			pri_no++;
			p_proc_data->Prn_no	= pri_no;
			p_proc_data->Prn_no_wk[1] = 0;
		}
		break;
// MH810100(S) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）	
//	case C_UKETUKE_SET:						// 駐車証明書設定
// 		ChargeSetup_edit_Uketuke((uchar)pri_no, pri_kind, p_proc_data);
// 		if(p_proc_data->Prn_no_wk[1] >= 2){
// 			pri_no++;
// 			p_proc_data->Prn_no	= pri_no;
// 			p_proc_data->Prn_no_wk[1] = 0;
// 		}
// 		break;
// MH810100(E) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）	
	case C_VOL_SET:							// 音量設定
		ChargeSetup_edit_Vol((uchar)pri_no, pri_kind, p_proc_data);
		if(p_proc_data->Prn_no_wk[1] >= 2){
			pri_no++;
			p_proc_data->Prn_no	= pri_no;
			p_proc_data->Prn_no_wk[1] = 0;
		}
		break;
		
	case C_SPLDAY_SET:						// 特別日設定
		ChargeSetup_edit_Splday((uchar)pri_no, pri_kind, p_proc_data);
		if(p_proc_data->Prn_no_wk[1] >= 6)
		{
			pri_no++;
			p_proc_data->Prn_no	= pri_no;
			p_proc_data->Prn_no_wk[1] = 0;
		}
		break;
		
	case C_HOOT_SET:							// フッター設定
		ChargeSetup_edit_Hoot((uchar)pri_no, pri_kind, p_proc_data);
		if(p_proc_data->Prn_no_wk[1] >= 4)
		{
			pri_no++;
			p_proc_data->Prn_no	= pri_no;
			p_proc_data->Prn_no_wk[1] = 0;
		}
		break;
		
	case C_IN_OUT_SET:						// 入出力端子設定
		ChargeSetup_edit_InOut((uchar)pri_no, pri_kind, p_proc_data);
		if(p_proc_data->Prn_no_wk[1] >= 4)
		{
			pri_no++;
			p_proc_data->Prn_no	= pri_no;
			p_proc_data->Prn_no_wk[1] = 0;
			p_proc_data->Prn_no_wk[2] = 0;
		}
		break;
	
	case C_ARCNET_SET:							// ARCNET設定
			pri_no++;
			p_proc_data->Prn_no	= pri_no;
			p_proc_data->Prn_no_wk[1] = 0;
			p_proc_data->Prn_no_wk[2] = 0;
		break;
// MH810100(S) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）			
//	case C_LOCK_PRA_SET:						// 車室パラメータ設定
//		ChargeSetup_edit_LockPr((uchar)pri_no, pri_kind, p_proc_data);
//		if(p_proc_data->Prn_no_wk[1] >= 2)
//		{
//			pri_no++;
//			p_proc_data->Prn_no	= pri_no;
//			p_proc_data->Prn_no_wk[1] = 0;
//			p_proc_data->Prn_no_wk[2] = 0;
//		}
//		break;
// MH810100(E) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）		

// MH810105(S) MH364301 インボイス対応
	case C_INVOICE_SET:						// インボイス設定
// GG129001(S) データ保管サービス対応（運用設定プリントにインボイス設定チェック追加）
//		if (IS_INVOICE && p_proc_data->Prn_no_wk[1] <= 6) {	// 01-0016①インボイス 0=領収証を適格簡易請求書 でない場合は印字しない
//			ChargeSetup_edit_InVoice((uchar)pri_no, pri_kind, p_proc_data);
//		} else {
//			pri_no++;
//			p_proc_data->Prn_no	= pri_no;
//			p_proc_data->Prn_no_wk[1] = 0;
//		}
		ChargeSetup_edit_InVoice((uchar)pri_no, pri_kind, p_proc_data);
		if(p_proc_data->Prn_no_wk[1] >= 6)
		{
			pri_no++;
			p_proc_data->Prn_no	= pri_no;
			p_proc_data->Prn_no_wk[1] = 0;
			p_proc_data->Prn_no_wk[2] = 0;
		}
// GG129001(E) データ保管サービス対応（運用設定プリントにインボイス設定チェック追加）
		break;
// MH810105(E) MH364301 インボイス対応
	
	case C_STAMP_MARK:						// 検収、担当マーク
		ChargeSetup_edit_StampMark((uchar)pri_no, pri_kind, p_proc_data);
		if(!p_proc_data->Prn_no_wk[1])
		{
			pri_no++;
			p_proc_data->Prn_no	= pri_no;
			p_proc_data->Prn_no_wk[1] = 0;
		}
		break;
	
	default :
		pri_no = C_ITEMMAX;
		break;
#if (5 == AUTO_PAYMENT_PROGRAM)
	case AUTO_PAYMENT_CHARGE_PRINT:
	case (AUTO_PAYMENT_CHARGE_PRINT+1):
		if(msg->NowTime.Mon == 0xff){
			Pri_mc10_Editdata((uchar)(p_proc_data->Prn_no_data2-1), (uchar)(p_proc_data->Prn_no_data1), pri_kind, p_proc_data);
			pri_no = p_proc_data->Prn_no;
		}
		else {
			pri_no = (AUTO_PAYMENT_CHARGE_PRINT+2);
		}
		break;
#endif
	}

#if (5 == AUTO_PAYMENT_PROGRAM)
	if( pri_no >= (AUTO_PAYMENT_CHARGE_PRINT+2) ){
#else
	if( pri_no >= C_ITEMMAX ){											// 全項目編集終了？
#endif
		// 編集終了
		p_proc_data->Prn_no			= 0;						// 編集処理ﾜｰｸﾘｾｯﾄ
		p_proc_data->Prn_no_data1	= 0;
		p_proc_data->Prn_no_data2	= 0;
		p_proc_data->Final = ON;								// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
	else{
		if (pri_no == 0) {
			// 未編集の項目がある場合
			pri_no++;
			p_proc_data->Prn_no	= pri_no;
		}
	}
}

//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:ﾀｲﾄﾙ印字ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		titlekind	: 印字タイトル種類(=pri_no)
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/01/17<br>
///					Update	: 2008/07/23<br>
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_edit_Title(uchar titlekind, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	uchar	i;			// ループ
	uchar	carkind;	// 車種

	PCMD_LEFT( pri_kind );					// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );	// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );	// 漢字（通常）指定

	memset(cEditwk1, 0, sizeof(cEditwk1));
	switch(titlekind) {
	case C_SOFTVER:
		PrnStr( "***********  Software  ***********", pri_kind );
		break;
	case C_BASE_SET:
		PrnStr( "***********  基本設定  ***********", pri_kind );
		break;
	case C_CAR_SET:
		// 車種タイトル
		if (p_proc_data->Prn_no_data1 == 0) {
			for (i = 0; i < CHARGE_CARKINDMAX; i++) {
				ChargeSetup_edit_ChargeData(i, 0);				// 料金設定データ取得
				if (charge_ctrl.carkind_useflag == ON) {		// 車種使用あり
					PrnStr( "***********  車種設定  ***********", pri_kind );
					break;		// 一つでも使用があればタイトル印字
				}
			}
		} else {
		// 車種毎
			carkind = (uchar)(p_proc_data->Prn_no_data1-1);
			ChargeSetup_edit_ChargeData(carkind, 1);			// 料金設定データ取得
			if (charge_ctrl.carkind_useflag == ON) {			// 車種使用あり
				/*------	１行空白	------*/
				if( pri_kind == R_PRI){
					Prn_edit_space( pri_kind );
				}
				sprintf(cEditwk1, "-------------  %s種  -------------", DAT1_4[p_proc_data->Prn_no_data1-1]);
				PrnStr(cEditwk1, pri_kind );
				if (prm_get(COM_PRM, S_SHA, (short)(1+(p_proc_data->Prn_no_data1-1)*6), 2, 5) != 1) {
					sprintf(cEditwk1, "役割                    ■■■■■");
					PrnStr(cEditwk1, pri_kind );
					Cal_Parameter_Flg = 1;
				}
				/*------	１行空白	------*/
				if( pri_kind == R_PRI){
					Prn_edit_space( pri_kind );
				}
			}
		}
		break;
	case C_PAS_SET:
		if (charge_ctrl.discount_useflag == ON) {				// 定期設定あり
			PrnStr( "***********  定期設定  ***********", pri_kind );
		}
		break;

	case C_DIS_S_SET:
			PrnStr( "********  サービス券設定  ********", pri_kind );	// サービス券使用限度枚数印字追加により設定参照しない
		break;
	case C_DIS_M_SET:
		if (charge_ctrl.discount_useflag == ON) {				// 掛売券設定あり
			PrnStr( "**********  掛売券設定  **********", pri_kind );
		}
		break;
	case C_PREPAID_SET:
		PrnStr( "***  ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ／回数券設定  ***", pri_kind );
		break;
// MH810100(S) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）	
//	case C_UKETUKE_SET:
//	 	PrnStr( "********  駐車証明書設定  ********", pri_kind );
//		break;
// MH810100(E) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）	
	case C_VOL_SET:
		PrnStr( "***********  音量設定  ***********", pri_kind );
		break;
	case C_SPLDAY_SET:
		PrnStr( "**********  特別日設定  **********", pri_kind );
		break;
	case C_HOOT_SET:
		PrnStr( "***********  フッター  ***********", pri_kind );
		break;
	case C_IN_OUT_SET:
		PrnStr( "**********  入出力端子  **********", pri_kind );
		break;
	case C_ARCNET_SET:
		PrnStr( "********  Module Software  *******", pri_kind );
		break;
// MH810105(S) MH364301 インボイス対応
	case C_INVOICE_SET:
		PrnStr( "**********  インボイス  **********", pri_kind );
		break;
// MH810105(E) MH364301 インボイス対応
	default :
		break;
	}
}

//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:時刻ﾀｲﾄﾙ印字ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		Kikai_no	: 精算機No
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/01/17<br>
///					Update	: 2008/07/15<br>
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_edit_TimeTitle(ushort Kikai_no, ulong oiban,ushort kakari_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	/*------	＜表題＞編集	------*/
	Prn_edit_Title	(										// 表題（"料金設定"）印字ﾃﾞｰﾀ編集
						"運用設定",
						FONT_K_YOKOBAI,
						pri_kind
					);

	/*------	１行空白	------*/
	if( pri_kind == R_PRI){
		Prn_edit_space( pri_kind );
	}

	/*------	＜機械NO.／係員NO.＞編集	------*/
	/*機械№／追番*/
	
	KikaiNoSet(	cEditwk1, Kikai_no );						// 機械NO.印字ﾃﾞｰﾀ編集

	sprintf( cEditwk2,"");									// cEditwk2(追番印字ﾃﾞｰﾀ)　←　NULL

	OibanSet( cEditwk2, oiban, 13 );						// cEditwk2			←　追番印字ﾃﾞｰﾀ編集（"SNo.XXXXXX"）

	Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
				cEditwk1,									// 文字列１：機械NO.印字ﾃﾞｰﾀ
				cEditwk2,									// 文字列２：追番印字ﾃﾞｰﾀ
				pri_kind									// 印字先ﾌﾟﾘﾝﾀ
			);
			
	/*係員№*/
	Prn_edit_KakariNo( kakari_no, pri_kind );
	
	/*------	＜時刻＞編集	------*/
	Prn_edit_NowDate( prn_work );							// 現在日時印字ﾃﾞｰﾀ編集
	PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
	PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
	PrnStr( prn_work, pri_kind );							// 時刻　印字ﾃﾞｰﾀ登録

	/*------	１行空白	------*/
	if( pri_kind == R_PRI){
		Prn_edit_space( pri_kind );
	}
	memset(&charge_ctrl, 0, sizeof(charge_ctrl));			// クリア
}

void	ChargeSetup_edit_SoftVer(uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	edit_SoftVerPrint( pri_kind );
	
	/*------	＜駐車場№＞編集	------*/
	memset(cEditwk1, 0, sizeof(cEditwk1));
	sprintf(cEditwk1, "PKNo.%06ld.%06ld.%06ld.%06ld",
		(ulong)CPrmSS[S_SYS][1],(ulong)CPrmSS[S_SYS][2],(ulong)CPrmSS[S_SYS][3],(ulong)CPrmSS[S_SYS][4]);
	PrnStr(cEditwk1, pri_kind);
}

//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:基本設定ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/01/17<br>
///					Update	: 2008/07/15<br>
///					Update	: 2008/07/25<br>
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_edit_BaseData(uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	char				carkind[2]; 		// 車種セット
	uchar				i, j;				// ループ
	uchar				index_print = NG;	// 項目の印字
	uchar				cnt;				// 紛失料金の種別
	uchar				print_flag = NG;	// 印字するかどうか
	ushort				index;				// 項目
	CHARGE_BASEDATA		base_data;			// 基本情報

	/*----- data -----*/
	PCMD_LEFT( pri_kind );					// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );	// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );	// 漢字（通常）指定
	
	memset(&base_data, 0, sizeof(base_data));
	ChargeSetup_BaseDataGet(&base_data);	// 基本設定データ取得

	/* 印字項目数が増えたため、１項目毎にタスクチェンジさせる */
	index = p_proc_data->Prn_no_data1;				// 次に印字する項目
		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		print_flag = NG;
		switch (index) {
		case FLAP_ROCK_TIME:		// ﾌﾗｯﾌﾟ上昇ﾀｲﾏｰ
			Carkind_Base_Edit(0,FLAP_UP_TIMER, pri_kind, &base_data );			// フラップ上昇タイム
			Carkind_Base_Edit(0,ROCK_CLOSE_TIMER, pri_kind, &base_data );		// ロック装置閉タイム
			print_flag = NG;							// 印字なし
			break;
		case SERVICE_TIME:		// サービスタイム
			sprintf(cEditwk2, "%s", Charge_Base[0]);

			if(prm_get(COM_PRM, S_STM, 1, 1, 1) == 1){			// 使用するサービスタイム設定が種別毎
				sprintf(cEditwk1, "%s", Charge_Base[36]);				// "種別毎"
			}else if(prm_get(COM_PRM, S_STM, 1, 1, 1) == 0){
				if(base_data.service_time <= 720){
					sprintf(cEditwk1, "%d分", base_data.service_time);
				}else{
					sprintf(cEditwk1, "%s", Charge_Base[60]);
					Cal_Parameter_Flg = 1;
				}
			}else{
				sprintf(cEditwk1, "%s", Charge_Base[60]);
				Cal_Parameter_Flg = 1;
			}
			print_flag = OK;
			break;
		case GRACE_TIME:		// グレースタイム
			sprintf(cEditwk2, "%s", Charge_Base[1]);
			if(prm_get(COM_PRM, S_STM, 1, 1, 1) == 1){			// 使用するサービスタイム設定が種別毎
				sprintf(cEditwk1, "%s", Charge_Base[36]);				// "種別毎"
			}else if(prm_get(COM_PRM, S_STM, 1, 1, 1) == 0){			// 使用するサービスタイム設定が種別毎
				if(base_data.grace_time <= 120){
					sprintf(cEditwk1, "%d分", base_data.grace_time);
				}else{
					sprintf(cEditwk1, "%s", Charge_Base[60]);
					Cal_Parameter_Flg = 1;
				}
			}else{
				sprintf(cEditwk1, "%s", Charge_Base[60]);
				Cal_Parameter_Flg = 1;
			}
			print_flag = OK;
			break;
		case LAG_TIME:		// リペイ(ラグ)タイム
			sprintf(cEditwk2, "%s", Charge_Base[3]);		// CPS:リペイタイム/EPS:ラグタイム
			if(prm_get(COM_PRM, S_STM, 1, 1, 1) == 1){			// 使用するサービスタイム設定が種別毎
				sprintf(cEditwk1, "%s", Charge_Base[36]);				// "種別毎"
			}else if(prm_get(COM_PRM, S_STM, 1, 1, 1) == 0){			// 使用するサービスタイム設定が種別毎
				if(base_data.lag_time <= 120){
					sprintf(cEditwk1, "%d分", base_data.lag_time);
				}else{
					sprintf(cEditwk1, "%s", Charge_Base[60]);
					Cal_Parameter_Flg = 1;
				}
			}else{
				sprintf(cEditwk1, "%s", Charge_Base[60]);
				Cal_Parameter_Flg = 1;
			}
			print_flag = OK;
			break;
		case EXT_TIME_SEI:		// フラップ上昇タイム内精算・ラグタイム延長
			Carkind_Base_Edit(0,FLP_ROCK_INTIME, pri_kind, &base_data );
			print_flag = NG;
			break;
		case RYO_CAL_TYPE:		// 料金計算方式
			charge_ctrl.cal_kind = base_data.cal_type;
			sprintf(cEditwk2, "%s", Charge_Base[4]);
			if(CPrmSS[S_CAL][1] <= 1){
				sprintf(cEditwk1, "%s", Charge_Base[18+base_data.cal_type]);
			}else{
				sprintf(cEditwk1, "%s", Charge_Base[60]);
				Cal_Parameter_Flg = 1;
			}
			print_flag = OK;
			break;
		case LOST_CHARGE_TYPE:		// 紛失料金
			for (i = 0; i < LOST_TYPEMAX; i++) {
				if (base_data.lostcharge_type[i] != 0) {	// 設定あり
					sprintf(cEditwk2, "%s", Charge_Base[5]);
					sprintf(cEditwk1, "");
					print_flag = OK;
					index_print = OK;
					break;		// 一つでも設定があれば終了
				}
			}
			break;
		case LOST_CHARGE_BASE:		// 　基本
		case LOST_CHARGE_CHANGE1:		// 　車種切替1
		case LOST_CHARGE_CHANGE2:		// 　車種切替2
		case LOST_CHARGE_CHANGE3:		// 　車種切替3
			if (index_print == NG) {
				break;
			}
			cnt = (uchar)(index-6);		// 紛失料金種別
			if ((base_data.lostcharge_type[cnt] != 0)					// 取り方設定あり
			&&	(rangechk(1, 12, base_data.lostcharge_kind[cnt]))) {	// 車種切替範囲内
				j = (uchar)(base_data.lostcharge_kind[cnt]-1);
				carkind[0] = (char)('A' + j);							// 車種セット
				carkind[1] = '\0';
				if (base_data.lostcharge_type[cnt] == 1) {				// 固定料金
					sprintf(cEditwk1, "%ld", base_data.lostcharge_data[cnt]);
					Camma_Set((uchar *)cEditwk1);
					strcat(cEditwk1, Pri_Tanni[0]);
					sprintf(cEditwk2, "%s　%s料金(%s)", Charge_Base[index], carkind, Charge_Base[21]);
				} else {												// 指定時刻
					sprintf(cEditwk1, "%02d:%02d", base_data.lost_time[HOUR][cnt], base_data.lost_time[MIN][cnt]);
					sprintf(cEditwk2, "%s　%s料金(%s)", Charge_Base[index], carkind, Charge_Base[22]);
				}
				print_flag = OK;
			}
			break;
		case CONS_TAX_RATIO:	// 消費税
			sprintf(cEditwk2, "%s", Charge_Base[10]);
			if (base_data.tax_type == 0 || base_data.tax_type == 1) {
			// 内税
				strcat(cEditwk2, Charge_Base[26]);
			} else if (base_data.tax_type == 2 || base_data.tax_type == 3) {
			// 外税
				strcat(cEditwk2, Charge_Base[27]);
			}
			else{
				sprintf(cEditwk2, "%s", Charge_Base[60]);
				Cal_Parameter_Flg = 1;
			}
			if (base_data.tax[0] == 0 && base_data.tax[1] == 0) {
			// 設定なし
				memset(cEditwk1, 0, sizeof(cEditwk1));
				strcat(cEditwk1, Charge_Base[20]);
			} else {
			// 設定あり
				sprintf(cEditwk1, "%d.%02d", base_data.tax[0], base_data.tax[1]);
				strcat(cEditwk1, Pri_Tanni[15] );
			}
			print_flag = OK;
			break;
		default :
			break;
		}

		if (print_flag == OK) {
			Str_Set1(					// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,		// 文字列１：料金設定名称
						cEditwk1,		// 文字列２：料金設定値
						pri_kind		// 印字先ﾌﾟﾘﾝﾀ
					);
		}
}

//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:料金設定ﾃﾞｰﾀ使用の有無の取得
//[]----------------------------------------------------------------------[]
///	@param[in]		kind	: 車種指定
///	@param[in]		type	: 0:指定車種のみ、1:指定車種の料金体系＋料金帯の使用
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/01/17<br>
///					Update	: 2008/07/17<br>
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_edit_ChargeData(uchar kind, uchar type)
{
	uchar			i, j;
	uchar			data;
	uchar			k;				// ループ変数
	uchar			seg;

	if (type == 0){
		if(!RYO_CAL_EXTEND){
			/* インデントを合わせるため以下の行にインデントを追加 */
			charge_ctrl.daymax_type = (char)CPrmSS[S_CAL][2];
			switch(charge_ctrl.daymax_type){
				case SP_MX_N_MHOUR_W:
					charge_ctrl.daymax_maxtime1 = (uchar)prm_get(COM_PRM, S_CAL, 41, 2, 3);	// 時間回最大の時間１
					// no break
				case SP_MX_N_MH_NEW:
					charge_ctrl.daymax_cnt = (uchar)prm_get(COM_PRM, S_CAL, 38, 2, 1);		// 時間回最大の回数
					charge_ctrl.daymax_maxtime2 = (uchar)prm_get(COM_PRM, S_CAL, 38, 2, 3);	// 時間回最大の時間２
					break;
				default:
					charge_ctrl.daymax_hour = (uchar)prm_get(COM_PRM, S_CAL, 13, 6, 1);	// 入庫時間最大時の時間
					charge_ctrl.daymax_cnt = (uchar)prm_get(COM_PRM, S_CAL, 14, 6, 1);	// 入庫時間最大時の回数
					break;
			}
		}
	}
	memset(&charge_ctrl.type_useflag, 0, sizeof(charge_ctrl.type_useflag));		// 料金帯使用フラグクリア
	charge_ctrl.carkind_useflag = OFF;											// 車種使用フラグクリア
	if (prm_get(COM_PRM, S_SHA, (short)(1+kind*6), 2, 5) != 0) {				// 役割
		ChargeSetup_DayOfWeekGet(kind, charge_ctrl.day_of_week, S_SHA);			// 使用曜日取得
		for (i = 0; i < CHARGE_SYSMAX; i++) {
			charge_ctrl.sys_useflag[i] = OFF;									// 料金体系使用フラグクリア
			seg = GET_PARSECT_NO((char)(i+1));
			data = (uchar)prm_get(COM_PRM, (short)seg, (short)(3+(i%3)*RYO_TAIKEI_SETCNT), 1, 1);
			if (data != 0 && data <= CHARGE_TYPEMAX) {							// 料金体系使用設定ありかつ設定範囲内
				for (j = 0; j < CHARGE_DAYOFWEEKMAX; j++) {
					if ((i == 0 && charge_ctrl.day_of_week[j] == 0) || (i+1 == charge_ctrl.day_of_week[j])) {
						charge_ctrl.carkind_useflag = ON;						// 車種使用あり
						charge_ctrl.sys_useflag[i] = ON;						// 料金体系使用あり
						if (type == 0 || charge_ctrl.cal_kind == 1) {
						// 車種使用設定 || 逓減帯なら終了
							break;
						}
						for (k = 0; k < data; k++) {
							charge_ctrl.type_useflag[k+i*6] = ON;				// 料金帯使用あり(共通パラメータ設定分)
						}
						break;
					}
				}
			}
		}
// MH321800(S) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
		// ※料金設定パラメータ印字は参照データが多く印字しないケースが続くと、タスク占有時間が長くなる。
		//   そのため、E3260が発生してしまうケースがあるので、１印字項目完了で一旦taskchg()を行うこととする
		xPause_PRNTSK(0L);
// MH321800(E) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
		if(RYO_CAL_EXTEND && charge_ctrl.carkind_useflag == ON){
			charge_ctrl.daymax_type = (uchar)prm_get(COM_PRM, S_CLX, (short)(2+(kind/3)), 2, (char)(6-((kind%3+1)*2)+1) );		// 日毎最大料金タイプ
			if(charge_ctrl.daymax_type == SP_MX_N_MH_NEW || charge_ctrl.daymax_type == SP_MX_N_MHOUR_W){
				charge_ctrl.daymax_maxtime2 = (uchar)prm_get(COM_PRM, S_CLX, (short)(32+kind), 2, 3);	// 時間回最大の時間２
				charge_ctrl.daymax_cnt = (uchar)prm_get(COM_PRM, S_CLX, (short)(32+kind), 2, 1);				// 時間回最大の回数
				if(charge_ctrl.daymax_type == SP_MX_N_MHOUR_W){
					charge_ctrl.daymax_maxtime1 = (uchar)prm_get(COM_PRM, S_CLX, (short)(20+kind), 2, 3);			// 時間回最大時の時間
				}
			}
		}
	}
}
//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:料金設定ﾃﾞｰﾀ編集(車種毎のデータ)
//[]----------------------------------------------------------------------[]
///	@param[in]		sys			: 第n料金体系
///	@param[in]		carkind		: 車種
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@date			Create	: 2008/07/17<br>
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_edit_CarkindData(uchar carkind, uchar pri_kind , PRN_PROC_DATA *p_proc_data)
{

	ushort				i;
	CHARGE_CARKIND		sys_data;				// 車種データ
	char				prm_pos[SYUSET_MAX] = { 1, 0, 2, 3 ,4 ,5 ,6 };	// 種別毎印字テーブル
	
	if(charge_ctrl.carkind_useflag == ON){
		memset(&sys_data, 0, sizeof(sys_data));				// クリア
		/* 種別毎サービスタイムの編集 */
		ChargeSetup_CarkindDataGet(carkind, &sys_data);		// 車種毎データ取得
		switch(p_proc_data->Prn_no_wk[1]){

// MH810100(S) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）
//		case 0:					// 車室番号
//
//			//車室番号4項目ずつ印字
//			ChargeSetup_LockNoEdit( (uchar)(carkind+1), pri_kind ,p_proc_data);
//			
//			if( p_proc_data->Prn_no_wk[2] >= LOCK_MAX ){		// 全駐車位置（全ﾛｯｸ装置No.）編集終了？
//				if( p_proc_data->Prn_no_wk[3] == 0){
//					sprintf(cEditwk1, "　なし");
//					PrnStr(cEditwk1, pri_kind);
//				}
//				/*------	１行空白	------*/
//				if( pri_kind == R_PRI){
//					Prn_edit_space( pri_kind );
//				}
//				p_proc_data->Prn_no_wk[1]++;
//				p_proc_data->Prn_no_wk[2] = 0;
//				p_proc_data->Prn_no_wk[3] = 0;
//			}
//			break;
//		case 1:
		case 0:
// MH810100(E) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）
			if(prm_get(COM_PRM, S_STM, 1, 1, 1) == 1)			// 使用するサービスタイム設定が種別毎
			{
				sprintf(cEditwk2, "%s", Charge_Base[0]);			// サービスタイム

				if(sys_data.service_time <= 720){
					sprintf(cEditwk1, "%d分", sys_data.service_time);
				}else{
					sprintf(cEditwk1, "%s", Charge_Base[60]);
					Cal_Parameter_Flg = 1;
				}
				Str_Set1(cEditwk2, cEditwk1, pri_kind);
				sprintf(cEditwk2, "%s", Charge_Base[1]);			// グレースタイム
				if(sys_data.grace_time <= 120){
					sprintf(cEditwk1, "%d分", sys_data.grace_time);
				}else{
					sprintf(cEditwk1, "%s", Charge_Base[60]);
					Cal_Parameter_Flg = 1;
				}
				Str_Set1(cEditwk2, cEditwk1, pri_kind);
				sprintf(cEditwk2, "%s", Charge_Base[3]);			// ラグタイム
				
				if(sys_data.lag_time <= 120){
					sprintf(cEditwk1, "%d分", sys_data.lag_time);
				}else{
					sprintf(cEditwk1, "%s", Charge_Base[60]);
					Cal_Parameter_Flg = 1;
				}
				Str_Set1(cEditwk2, cEditwk1, pri_kind);
			}
			p_proc_data->Prn_no_wk[1]++;
			break;
// MH810100(S) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）
//		case 2:
		case 1:
// MH810100(E) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）
			i = p_proc_data->Prn_no_wk[2];
			/* 車種毎に印字する項目の編集 */
			for( ; i < SYUSET_MAX; i++){
				if(Get_Pram_Syubet((char)prm_pos[i]) == 1){								// 種別毎に印字する設定
					Carkind_Base_Edit(1,(uchar)prm_pos[i],pri_kind, &sys_data);		// 印字登録
					p_proc_data->Prn_no_wk[2] = i+1;
					break;
				}
			}
			if(i >= SYUSET_MAX){
				p_proc_data->Prn_no_wk[1]++;
				p_proc_data->Prn_no_wk[2] = 0;
			}
			break;
// MH810100(S) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）
//		case 3:
		case 2:
// MH810100(E) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）
			/* 最大料金タイプの編集 */
			memset( cEditwk1,0,sizeof(cEditwk1) );
			memset( cEditwk2,0,sizeof(cEditwk2) );
			memcpy(cEditwk1, Charge_Base[34], 14);				// "最大料金タイプ"
			switch(charge_ctrl.daymax_type){
			case SP_MX_N_MH_NEW:								// ｎ時間ｍ回最大
				i = 4;
				break;
			case SP_MX_N_MHOUR_W:								// ２種類のｎ時間ｍ回最大
				i = 6;
				break;
			case SP_MX_INTIME:
			case SP_MX_N_HOUR:
				i = 99;											// 範囲外
				break;
			default:
				if(charge_ctrl.daymax_type >= 6){
					i = 99;										// 範囲外
				}
				else{
					i = charge_ctrl.daymax_type;
				}
				break;
			}
			if( ( charge_ctrl.cal_kind == 1 ) &&				// 逓減帯で
				( ( charge_ctrl.daymax_type != 0 ) && 			// 日毎最大料金なしではない
				( charge_ctrl.daymax_type != 2 ) ) ) {			// 時刻指定日毎最大ではない
				i = 99;
			}
			if( ( CPrmSS[S_CLX][1] != 0 ) && ( CPrmSS[S_CLX][1] != 1 ) ){
				i = 99;
			}
			if(i==99){
				sprintf(cEditwk2, "%s", Charge_Base[60]);
				Cal_Parameter_Flg = 1;
			}else{
				sprintf(cEditwk2, "%s", daymax_type[i]);
			}
			Str_Set1(cEditwk1, cEditwk2, pri_kind);
			p_proc_data->Prn_no_wk[1]++;
			break;
		}
	}
	else {
		p_proc_data->Prn_no_wk[1] = 4;
	}
}

//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:料金設定ﾃﾞｰﾀ編集(料金体系)
//[]----------------------------------------------------------------------[]
///	@param[in]		sys			: 第n料金体系
///	@param[in]		carkind		: 車種
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/07/17<br>
///					Update	: 
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_edit_ChargeSysData(uchar sys, uchar carkind, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	char			title[36];				// タイトル
	uchar			i;						// ループ
	uchar			print_flag = NG;		// 印字有無
	ulong			data;					// data temp
	CHARGE_SYS		sys_data;				// 料金体系データ
	uchar			max;					// 最大数格納エリア
	short	seg, pri_wk1, pri_wk2;

	PCMD_LEFT( pri_kind );					// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );	// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );	// 漢字（通常）指定

	if (charge_ctrl.carkind_useflag == ON && charge_ctrl.sys_useflag[sys] == ON) {
	// 指定料金体系使用あり
		memset(&sys_data, 0, sizeof(sys_data));				// クリア
		ChargeSetup_SysDataGet(sys, carkind, &sys_data);	// 料金体系データ取得

		//----- title -----
		sprintf(title, "［第%d料金体系］", sys+1);
		PrnStr(title, pri_kind);

		//----- ０時区切り設定 -----
		memset( cEditwk1,0,sizeof(cEditwk1) );
		memset( cEditwk2,0,sizeof(cEditwk2) );
		memcpy(cEditwk2, Charge_Base[35], 14);		/* "曜日の区切り" */
		if(GET_RYO_SETMODE(carkind, sys) == 2){
			sprintf(cEditwk1, "00:00");				// 自動判定(する)
		}else{
			if(prm_get(COM_PRM, S_CAL, 11, 1, 1) <= 1){
			seg = GET_PARSECT_NO((char)(sys+1));
			data = (ushort)prm_get(COM_PRM, seg, (short)(4+(sys%3)*RYO_TAIKEI_SETCNT), 4, 1);
			pri_wk1 = (short)(data / 100);
			pri_wk2 = (short)(data % 100);
			sprintf(cEditwk1, "%02d:%02d", pri_wk1, pri_wk2);	// しない(第１料金帯開始時刻を印字)
			}else{
				sprintf(cEditwk1, "%s",Charge_Base[60]);				// 自動判定(する)
				Cal_Parameter_Flg = 1;
			}
		}
		Str_Set1(										// -----印字ﾃﾞｰﾀ編集-----
					cEditwk2,							// 文字列１：料金設定名称
					cEditwk1,							// 文字列２：料金設定値
					pri_kind							// 印字先ﾌﾟﾘﾝﾀ
				);
		print_flag = NG;
		//----- 曜日 -----
		memset(cEditwk1, 0, sizeof(cEditwk1));
		sprintf(cEditwk2, "");
		for (i = 0; i < CHARGE_DAYOFWEEKMAX; i++) {			// 月～期3
			if ((sys == 0 && charge_ctrl.day_of_week[i] == 0)
			 || (sys+1 == charge_ctrl.day_of_week[i])) {
			// 曜日使用設定あり
				strcat(cEditwk1, Charge_Week[i]);
				print_flag = OK;
				if (i != 10) {
					strcat(cEditwk1, " ");
				}
			}
		}
		if (print_flag == OK) {
			Str_Set1(										// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,							// 文字列１：料金設定名称
						cEditwk2,							// 文字列２：料金設定値
						pri_kind							// 印字先ﾌﾟﾘﾝﾀ
					);
			print_flag = NG;
		}
		
		//----- 最大料金 -----
		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		sprintf(cEditwk1, "%s", Charge_Carkind[0]);
		sprintf(cEditwk2, "%ld", sys_data.max_charge);
		Camma_Set((uchar *)cEditwk2);
		strcat(cEditwk2, Pri_Tanni[0]);

		Str_Set1(										// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,							// 文字列１：料金設定名称
					cEditwk2,							// 文字列２：料金設定値
					pri_kind							// 印字先ﾌﾟﾘﾝﾀ
				);

		//----- 日毎最大料金 -----
		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		if( ( CPrmSS[S_CLX][1] == 0 ) || ( CPrmSS[S_CLX][1] == 1 ) ){
		switch(charge_ctrl.daymax_type) {					// 日毎最大料タイプ
		case 0:		// なし
			sprintf(cEditwk1, "%s", Charge_Carkind[1]);
			sprintf(cEditwk2, "%s", Charge_Base[20]);
			print_flag = OK;
			break;
		case 1:		// 入庫時間最大
			break;
		case 2:		// 時刻指定日毎最大
			sprintf(cEditwk1, "%s", Charge_Carkind[5]);
			data = sys_data.chargemax_day1;
			print_flag = OK;
			break;
		case 3:		// 2種類の時刻指定日毎最大
			if (charge_ctrl.cal_kind == 1) {				// 逓減帯ならNG
				break;
			}
			// 第①
			sprintf(cEditwk1, "%s", Charge_Carkind[5]);
			strcat(cEditwk1, Charge_Carkind[7]);
			sprintf(cEditwk2, "%ld", sys_data.chargemax_day1);
			Camma_Set((uchar *)cEditwk2);
			strcat(cEditwk2, Pri_Tanni[0]);
			Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,						// 文字列１：料金設定名称
						cEditwk2,						// 文字列２：料金設定値
						pri_kind						// 印字先ﾌﾟﾘﾝﾀ
					);

			// 第②
			memset(cEditwk1, 0, sizeof(cEditwk1));
			memset(cEditwk2, 0, sizeof(cEditwk2));
			sprintf(cEditwk1, "%s", Charge_Carkind[5]);
			strcat(cEditwk1, Charge_Carkind[8]);
			data = sys_data.chargemax_day2;
			print_flag = OK;
			break;
		case 4:		// ｎ時間ｍ回最大
			break;
		case 10:	// 新ｎ時間ｍ回最大
			if (charge_ctrl.cal_kind == 1) {				// 逓減帯ならNG
				break;
			}

			if( rangechk(1, 24, charge_ctrl.daymax_maxtime2 ) ){
				sprintf(cEditwk1, Charge_Carkind[28], charge_ctrl.daymax_maxtime2);
			}else{
				sprintf( cEditwk1,"■■■時間" );
				Cal_Parameter_Flg = 1;
			}
			sprintf(cEditwk2, "%ld", sys_data.chargemax_day1);
			Camma_Set((uchar *)cEditwk2);
			strcat(cEditwk2, Pri_Tanni[0]);
			Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,						// 文字列１：料金設定名称
						cEditwk2,						// 文字列２：料金設定値
						pri_kind						// 印字先ﾌﾟﾘﾝﾀ
					);

			memset(cEditwk1, 0, sizeof(cEditwk1));
			memset(cEditwk2, 0, sizeof(cEditwk2));
			sprintf(cEditwk1, "%s", Charge_Carkind[29] );

			if( !charge_ctrl.daymax_cnt ){							// 繰り返し回数が0
				strcpy(cEditwk2, Charge_Carkind[30]);				// 無限設定に置き換える
			}else{													// 0回以外
				sprintf(cEditwk2, "%d", charge_ctrl.daymax_cnt);	// 回数設定反映
				Camma_Set((uchar *)cEditwk2);						// カンマ付け処理
			}
			strcat(cEditwk2, Pri_Tanni[2]);							// 回数の後ろに単位付加
			Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,						// 文字列１：料金設定名称
						cEditwk2,						// 文字列２：料金設定値
						pri_kind						// 印字先ﾌﾟﾘﾝﾀ
					);
			print_flag = NG;
			break;
		case 5:		// 時間帯最大
			if (charge_ctrl.cal_kind == 1) {				// 逓減帯ならNG
				break;
			}
			seg = GET_PARSECT_NO((char)(sys+1));
			max = (uchar)prm_get(COM_PRM, seg, (short)(3+((sys%3)*RYO_TAIKEI_SETCNT)), 1, 1);
			for( i=0;i<max;i++ ){
				memset(cEditwk1, 0, sizeof(cEditwk1));
				memset(cEditwk2, 0, sizeof(cEditwk2));
				sprintf(cEditwk1, Charge_Carkind[31], (i+1));

				sprintf(cEditwk2, "%ld", sys_data.charge_range_max[i]);
				Camma_Set((uchar *)cEditwk2);
				strcat(cEditwk2, Pri_Tanni[0]);
				Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,						// 文字列１：料金設定名称
							cEditwk2,						// 文字列２：料金設定値
							pri_kind						// 印字先ﾌﾟﾘﾝﾀ
						);
			}
			print_flag = NG;
			break;
		case SP_MX_N_MHOUR_W:
			if (charge_ctrl.cal_kind == 1) {				// 逓減帯ならNG
				break;
			}

			if( ( rangechk(1, 24, charge_ctrl.daymax_maxtime1 ) ) &&
				( rangechk(1, 24, charge_ctrl.daymax_maxtime2 ) ) &&
				( charge_ctrl.daymax_maxtime1 < charge_ctrl.daymax_maxtime2 ) ){
			/* 最大１料金 */
			sprintf(cEditwk1, Charge_Carkind[32], charge_ctrl.daymax_maxtime1);
			sprintf(cEditwk2, "%ld", sys_data.chargemax_day2);
			Camma_Set((uchar *)cEditwk2);
			strcat(cEditwk2, Pri_Tanni[0]);
			Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,						// 文字列１：料金設定名称
						cEditwk2,						// 文字列２：料金設定値
						pri_kind						// 印字先ﾌﾟﾘﾝﾀ
					);

			/* 最大２料金 */
			memset(cEditwk1, 0, sizeof(cEditwk1));
			memset(cEditwk2, 0, sizeof(cEditwk2));
			sprintf(cEditwk1, Charge_Carkind[33], charge_ctrl.daymax_maxtime2);
			sprintf(cEditwk2, "%ld", sys_data.chargemax_day1);
			Camma_Set((uchar *)cEditwk2);
			strcat(cEditwk2, Pri_Tanni[0]);
			Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,						// 文字列１：料金設定名称
						cEditwk2,						// 文字列２：料金設定値
						pri_kind						// 印字先ﾌﾟﾘﾝﾀ
					);
			}else{
				PrnStr("■■■時間(上限１)", pri_kind);
				PrnStr("■■■時間(上限２)", pri_kind);
				Cal_Parameter_Flg = 1;
			}
	
			/* 繰り返し回数 */
			memset(cEditwk1, 0, sizeof(cEditwk1));
			memset(cEditwk2, 0, sizeof(cEditwk2));
			sprintf(cEditwk1, "%s", Charge_Carkind[29] );

			if( !charge_ctrl.daymax_cnt ){							// 繰り返し回数が0
				strcpy(cEditwk2, Charge_Carkind[30]);				// 無限設定に置き換える
			}else{													// 0回以外
				sprintf(cEditwk2, "%d", charge_ctrl.daymax_cnt);	// 回数設定反映
				Camma_Set((uchar *)cEditwk2);						// カンマ付け処理
			}
			strcat(cEditwk2, Pri_Tanni[2]);							// 回数の後ろに単位付加
			Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,						// 文字列１：料金設定名称
						cEditwk2,						// 文字列２：料金設定値
						pri_kind						// 印字先ﾌﾟﾘﾝﾀ
					);

			print_flag = NG;
			break;
		default :
			break;
		}
			if (print_flag == OK) {
				if (charge_ctrl.daymax_type != 0) {				// "なし"以外
					sprintf(cEditwk2, "%ld", data);
					Camma_Set((uchar *)cEditwk2);
					strcat(cEditwk2, Pri_Tanni[0]);
				}

				Str_Set1(										// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,							// 文字列１：料金設定名称
							cEditwk2,							// 文字列２：料金設定値
							pri_kind							// 印字先ﾌﾟﾘﾝﾀ
						);
				print_flag = NG;
			}
		
		}
// MH810100(S) Y.Yamauchi 2019/12/03 車番チケットレス（印字修正）
////		 出庫台数カウント
//		 memset(cEditwk1, 0, sizeof(cEditwk1));
//		 memset(cEditwk2, 0, sizeof(cEditwk2));
//		 sprintf(cEditwk1, "%s", Charge_Pass[15]);
//		 if(charge_ctrl.outcar_cnt <= 3){
//		 	sprintf(cEditwk2, "%s", Charge_Pass[(charge_ctrl.outcar_cnt == 0) ? 4 : 28+charge_ctrl.outcar_cnt]);
//			}else{
//		 	sprintf(cEditwk2, "%s", Charge_Base[60]);
//		 	Cal_Parameter_Flg = 1;
//		 }
//		 Str_Set1(										// -----印字ﾃﾞｰﾀ編集-----
//		 			cEditwk1,							// 文字列１：料金設定名称
//		 			cEditwk2,							// 文字列２：料金設定値
//		 			pri_kind							// 印字先ﾌﾟﾘﾝﾀ
//		 		);
//
//		// カウント信号
//		memset(cEditwk1, 0, sizeof(cEditwk1));
//		memset(cEditwk2, 0, sizeof(cEditwk2));
//		sprintf(cEditwk1, "%s", Charge_Pass[16]);
//
//		if(charge_ctrl.cnt_signal <= 3){
//			sprintf(cEditwk2, "%s", Charge_Pass[32+charge_ctrl.cnt_signal]);
//		}else{
//			sprintf(cEditwk2, "%s", Charge_Base[60]);
//			Cal_Parameter_Flg = 1;
//		}
//		Str_Set1(										// -----印字ﾃﾞｰﾀ編集-----
//					cEditwk1,							// 文字列１：料金設定名称
//					cEditwk2,							// 文字列２：料金設定値
//					pri_kind							// 印字先ﾌﾟﾘﾝﾀ
//				);
// MH810100(E) Y.Yamauchi 2019/12/03 車番チケットレス（印字修正）

		//----- 車種切替 -----
		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		sprintf(cEditwk1, "%s ", Charge_Carkind[24]);
		strcat(cEditwk1, Charge_Carkind[25]);
		if (sys_data.discount == ON) {						// 割引設定あり
		// 割引時間

			if(ChargeSetup_Time_Chek(1,sys_data.dis_time[HOUR], sys_data.dis_time[MIN]) == 1){
				if (sys_data.dis_time[HOUR] != 0) {
					sprintf(cEditwk2, "%2d時間%02d分", sys_data.dis_time[HOUR], sys_data.dis_time[MIN]);
				} else {
					sprintf(cEditwk2, "%2d分", sys_data.dis_time[MIN]);
				}
			}else{
				sprintf(cEditwk2, "%s", Charge_Base[60]);
				Cal_Parameter_Flg = 1;
			}
			Str_Set1(										// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,							// 文字列１：料金設定名称
						cEditwk2,							// 文字列２：料金設定値
						pri_kind							// 印字先ﾌﾟﾘﾝﾀ
					);

		// 割引対象期間
			memset(cEditwk1, 0, sizeof(cEditwk1));
			memset(cEditwk2, 0, sizeof(cEditwk2));
			sprintf(cEditwk1, "         %s", Charge_Carkind[26]);

			if( ( ChargeSetup_Time_Chek(0,sys_data.target_Stime[HOUR], sys_data.target_Stime[MIN]) == 1 ) &&
				( ChargeSetup_Time_Chek(0,sys_data.target_Etime[HOUR], sys_data.target_Etime[MIN]) == 1 ) ){
				sprintf(cEditwk2, "%02d:%02d～%02d:%02d", sys_data.target_Stime[HOUR], sys_data.target_Stime[MIN],
														sys_data.target_Etime[HOUR], sys_data.target_Etime[MIN]);
			}else{
				sprintf(cEditwk2, "%s", Charge_Base[60]);
				Cal_Parameter_Flg = 1;
			}
			Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,						// 文字列１：料金設定名称
						cEditwk2,						// 文字列２：料金設定値
						pri_kind						// 印字先ﾌﾟﾘﾝﾀ
					);
		}

		// 逓減帯のみ
		if (charge_ctrl.cal_kind == 1) {
			//----- 逓減帯 -----
			memset(cEditwk1, 0, sizeof(cEditwk1));
			memset(cEditwk2, 0, sizeof(cEditwk2));
			if( ( ChargeSetup_Time_Chek(0,sys_data.reg_Stime[HOUR], sys_data.reg_Stime[MIN]) == 1 ) &&
				( ChargeSetup_Time_Chek(0,sys_data.reg_Etime[HOUR], sys_data.reg_Etime[MIN]) == 1 ) &&
				( ChargeSetup_Time_Chek(2,sys_data.reg_repeat_time[HOUR], sys_data.reg_repeat_time[MIN]) == 1 ) ){
				sprintf(cEditwk1, "%02d:%02d～%02d:%02d %s %s",
								sys_data.reg_Stime[HOUR], sys_data.reg_Stime[MIN],
								sys_data.reg_Etime[HOUR], sys_data.reg_Etime[MIN],
								Charge_Base[19], Charge_Carkind[15]);
			}else{
				sprintf(cEditwk1, "%s   %s", Charge_Base[60],Charge_Base[19]);
				Cal_Parameter_Flg = 1;
			}
			sprintf(cEditwk2, "%d", sys_data.repeat_cnt);
			Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,						// 文字列１：料金設定名称
						cEditwk2,						// 文字列２：料金設定値
						pri_kind						// 印字先ﾌﾟﾘﾝﾀ
					);

			//----- 深夜帯 -----
			memset(cEditwk1, 0, sizeof(cEditwk1));
			memset(cEditwk2, 0, sizeof(cEditwk2));
			if (sys_data.mnight_use == 2) {
			// 深夜帯使用あり && データチェックOK
				if( ( ChargeSetup_Time_Chek(0,sys_data.mnight_Stime[HOUR], sys_data.mnight_Stime[MIN]) == 1 ) &&
					( ChargeSetup_Time_Chek(0,sys_data.mnight_Etime[HOUR], sys_data.mnight_Etime[MIN]) == 1 ) &&
					( ChargeSetup_Time_Chek(2,sys_data.mnight_repeat_time[HOUR], sys_data.mnight_repeat_time[MIN]) == 1 ) ){
					sprintf(cEditwk1, "%02d:%02d～%02d:%02d %s %s",
									sys_data.mnight_Stime[HOUR], sys_data.mnight_Stime[MIN],
									sys_data.mnight_Etime[HOUR], sys_data.mnight_Etime[MIN],
									Charge_Carkind[14], Charge_Carkind[16]);
				}else{
					sprintf(cEditwk1, "%s   %s", Charge_Base[60],Charge_Carkind[14]);
					Cal_Parameter_Flg = 1;
				}
				sprintf(cEditwk2, "%ld", sys_data.mnight_charge);
				Camma_Set((uchar *)cEditwk2);
				strcat(cEditwk2, Pri_Tanni[0]);
				Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,						// 文字列１：料金設定名称
							cEditwk2,						// 文字列２：料金設定値
							pri_kind						// 印字先ﾌﾟﾘﾝﾀ
						);
			}
		}
	}
}
//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:料金設定ﾃﾞｰﾀ編集(種別)
//[]----------------------------------------------------------------------[]
///	@param[in]		no			: 印字項目
///	@param[in]		kind		: 車種
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		data		: 料金設定ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@date			Create	: 2010/09/13<br>
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
#define SYU_INJI_CHK(a,b)	( a || (!a && !b))
void Carkind_Base_Edit(unsigned char mod, unsigned char no, unsigned char pri_kind, void *data)
{
	short	pri_wk1,pri_wk2;
	ushort	data_s1, data_s2;
	uchar	data_c;
	char	syuparm;
	ulong	data_l;
	typedef union{ 
		CHARGE_BASEDATA		basedata;
		CHARGE_CARKIND		kinddata;
	} PRI_DT;
	
	PRI_DT	*p = (PRI_DT*)data;
	
	memset(cEditwk1, 0, sizeof(cEditwk1));
	memset(cEditwk2, 0, sizeof(cEditwk2));
	memset(cEditwk3, 0, sizeof(cEditwk3));
	pri_wk1 = GetCarInfoParam();
	syuparm = Get_Pram_Syubet((char)no);
	switch(no){
		case ROCK_CLOSE_TIMER:							// ロック閉タイマー
			if( pri_wk1 & 0x01 ){
				sprintf(cEditwk2, "%s", Charge_Base[32]);
				if(SYU_INJI_CHK(mod,syuparm)){
					if(mod){										// 種別毎の印字
						data_s1 = p->kinddata.lock_close_min;
						data_s2 = p->kinddata.lock_close_sec;
					}
					else {											// 基本設定の印字
						data_s1 = p->basedata.lock_close_min;
						data_s2 = p->basedata.lock_close_sec;
					}
					
					data_l = data_s1;
					data_l = data_l * 100;
					data_l += data_s2;

					if(data_l <= 72000){
						if(rangechk(0, 720, (short)data_s1) && rangechk(0, 59, (short)data_s2)){
							sprintf(cEditwk1, "%d分%02d秒", data_s1, data_s2);
						}else{
							sprintf(cEditwk1, "%s", Charge_Base[60]);
							Cal_Parameter_Flg = 1;
						}
					}else{
						sprintf(cEditwk1, "%s", Charge_Base[60]);
						Cal_Parameter_Flg = 1;
					}
				}
				else {
					if(syuparm == 1){
						sprintf(cEditwk1, "%s", Charge_Base[36]);				// "種別毎"
					}else{
						sprintf(cEditwk1, "%s", Charge_Base[60]);
						Cal_Parameter_Flg = 1;
					}
				}
				Str_Set1(					// -----印字ﾃﾞｰﾀ編集-----
							cEditwk2,		// 文字列１：料金設定名称
							cEditwk1,		// 文字列２：料金設定値
							pri_kind		// 印字先ﾌﾟﾘﾝﾀ
						);
			}
			break;
		case FLAP_UP_TIMER:							// フラップ上昇タイマー
			if( pri_wk1 & 0x06 ){
				sprintf(cEditwk2, "%s", Charge_Base[28]);
				if(SYU_INJI_CHK(mod,syuparm)){
					if(mod){										// 種別毎の印字
						data_s1 = p->kinddata.flap_up_min;
						data_s2 = p->kinddata.flap_up_sec;
					}
					else {											// 基本設定の印字
						data_s1 = p->basedata.flap_up_min;
						data_s2 = p->basedata.flap_up_sec;
					}
					
					data_l = data_s1;
					data_l = data_l * 100;
					data_l += data_s2;
					
					if(data_l <= 72000){
						if(rangechk(0, 720, (short)data_s1) && rangechk(0, 59, (short)data_s2)){
							sprintf(cEditwk1, "%d分%02d秒", data_s1, data_s2);
						}else{
							sprintf(cEditwk1, "%s", Charge_Base[60]);
							Cal_Parameter_Flg = 1;
						}
					}else{
						sprintf(cEditwk1, "%s", Charge_Base[60]);
						Cal_Parameter_Flg = 1;
					}
				}
				else{
					if(syuparm == 1){
						sprintf(cEditwk1, "%s", Charge_Base[36]);				// "種別毎"
					}else{
						sprintf(cEditwk1, "%s", Charge_Base[60]);
						Cal_Parameter_Flg = 1;
					}
				}
				Str_Set1(					// -----印字ﾃﾞｰﾀ編集-----
							cEditwk2,		// 文字列１：料金設定名称
							cEditwk1,		// 文字列２：料金設定値
							pri_kind		// 印字先ﾌﾟﾘﾝﾀ
						);
			}
			break;
		case FLP_ROCK_INTIME:							// ロック閉・フラップ上昇・ラグタイム内制御
			if(pri_wk1 == 0){				// 設定無し
				break;						// 印字しない
			}
			else if( pri_wk1 == 0x01 ){		// 駐輪のみ
				pri_wk2 = 33;
			} else if( pri_wk1&0x01 ){		// 駐輪併設
				PrnStr(Charge_Base[37], pri_kind);
				pri_wk2 = 38;
			}
			else{										// 駐車のみ
				pri_wk2 = 29;
			}
			sprintf(cEditwk2, "%s", Charge_Base[pri_wk2]);
			if(SYU_INJI_CHK(mod,syuparm)){
				if(mod){										// 種別毎の印字
					data_s1 = p->kinddata.in_up_time_sei;
				}
				else {											// 基本設定の印字
					data_s1 = p->basedata.in_up_time_sei;
				}

				if(data_s1 == 1){
					pri_wk2 = 31;
				}
				else if(data_s1 == 0){
					pri_wk2 = 20;
				}
				else{
					pri_wk2 = 60;
				}
			}
			else {
				if(syuparm == 1){
					pri_wk2 = 36;							// "種別毎"
				}else{
					pri_wk2 = 60;							// "■■■■■"
				}
			}
			strcat(cEditwk1, Charge_Base[pri_wk2]);		// なし
			Str_Set1(					// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,		// 文字列１：料金設定名称
						cEditwk1,		// 文字列２：料金設定値
						pri_kind		// 印字先ﾌﾟﾘﾝﾀ
					);
			if( pri_wk2 == 60 ){
				Cal_Parameter_Flg = 1;
			}
			memset(cEditwk1, 0, sizeof(cEditwk1));
			memset(cEditwk2, 0, sizeof(cEditwk2));
			sprintf(cEditwk2, "%s", Charge_Base[30]);
			if(SYU_INJI_CHK(mod,syuparm)){
				if(mod){										// 種別毎の印字
					data_s1 = p->kinddata.ext_lagtime_sei;
				}
				else {											// 基本設定の印字
					data_s1 = p->basedata.ext_lagtime_sei;
				}

				if(data_s1 == 1){
					pri_wk2 = 31;
				}
				else if(data_s1 == 0){
					pri_wk2 = 20;
				}
				else{
					pri_wk2 = 60;
				}
			}
			else {
				if(syuparm == 1){
					pri_wk2 = 36;							// "種別毎"
				}else{
					pri_wk2 = 60;							// "■■■■■"
				}
			}
			strcat(cEditwk1, Charge_Base[pri_wk2]);		// なし
			Str_Set1(					// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,		// 文字列１：料金設定名称
						cEditwk1,		// 文字列２：料金設定値
						pri_kind		// 印字先ﾌﾟﾘﾝﾀ
					);
			if( pri_wk2 == 60 ){
				Cal_Parameter_Flg = 1;
			}
			break;
		case LAG_PAY_PTN:								// ラグタイム後の料金
			if(pri_wk1 == 0){					// 設定無し
				break;							// 印字しない
			}
			sprintf(cEditwk2, "%s", Charge_Base[55]);
			if(SYU_INJI_CHK(mod,syuparm)){
				if(mod){										// 種別毎の印字
					data_c = p->kinddata.ryo_after_lagtimeup;
				}
				else{											// 基本設定の印字
					data_c = 0;									// 全車種共通の場合は基本からで固定
				}
				if(data_c == 0){
					pri_wk2 = 57;
				}
				else if(data_c == 1){
					pri_wk2 = 58;
				}else{
					pri_wk2 = 60;
				
				}
			}
			else {
				if(syuparm == 1){
					pri_wk2 = 36;							// "種別毎"
				}else{
					pri_wk2 = 60;							// "■■■■■"
				}
			}
			sprintf(cEditwk1, "%s", Charge_Base[pri_wk2]);	// "追加から取る"
			Str_Set1(					// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,		// 文字列１：料金設定名称
						cEditwk1,		// 文字列２：料金設定値
						pri_kind		// 印字先ﾌﾟﾘﾝﾀ
					);
			if( pri_wk2 == 60 ){
				Cal_Parameter_Flg = 1;
			}
			break;
		
	}
	
}

//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:料金設定ﾃﾞｰﾀ編集(料金帯)
//[]----------------------------------------------------------------------[]
///	@param[in]		sys			: 第n料金体系
///	@param[in]		type		: 料金帯
///	@param[in]		carkind		: 車種
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/01/17<br>
///					Update	: 2008/07/24<br>
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_edit_ChargeTypeData(uchar sys, uchar type, uchar carkind, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	char			temp[36];			// temp
	CHARGE_TYPE		charge_type;		// 料金帯データ(昼夜帯)

	PCMD_LEFT( pri_kind );							// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );			// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );			// 漢字（通常）指定
	
	if (charge_ctrl.type_useflag[sys*6+type] == ON) {
	// 料金帯使用あり
		memset(&charge_type, 0, sizeof(charge_type));
		// 料金帯データ取得
		ChargeSetup_TypeDataGet(sys, type, carkind, &charge_type);
		// 基本時間
		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		if (charge_type.fixed_charge == ON) {
		// 一定料金帯
			if( ( ChargeSetup_Time_Chek(0,charge_type.start_time[HOUR], charge_type.start_time[MIN]) == 1 ) &&
				( ChargeSetup_Time_Chek(0,charge_type.end_time[HOUR], charge_type.end_time[MIN]) == 1 )){
				sprintf(cEditwk1, "%02d:%02d～%02d:%02d　 %s",
									charge_type.start_time[HOUR], charge_type.start_time[MIN],
									charge_type.end_time[HOUR], charge_type.end_time[MIN], Charge_Carkind[27]);
			}else{
				sprintf( cEditwk1,"%s     %s",Charge_Base[60] , Charge_Carkind[27]);
				Cal_Parameter_Flg = 1;
			}
		} else {
		// 基本時間
			memset(temp, 0, sizeof(temp));
			if( ( ChargeSetup_Time_Chek(0,charge_type.start_time[HOUR], charge_type.start_time[MIN]) == 1 ) &&	//開始時刻
				( ChargeSetup_Time_Chek(0,charge_type.end_time[HOUR], charge_type.end_time[MIN]) == 1 ) ){
				sprintf(cEditwk1, "%02d:%02d～%02d:%02d%s",
								charge_type.start_time[HOUR], charge_type.start_time[MIN],
								charge_type.end_time[HOUR], charge_type.end_time[MIN], Charge_Carkind[10]);
			}else{
				sprintf(cEditwk1, "%s  %s", Charge_Base[60], Charge_Carkind[10]);
				Cal_Parameter_Flg = 1;
			}

			if( ChargeSetup_Time_Chek(1,charge_type.base_time[HOUR], charge_type.base_time[MIN]) == 1 ) {		// 基本時刻
				if (charge_type.base_time[HOUR] != 0) {
					sprintf(temp, ((charge_type.base_time[HOUR]/10)?"%d時間%02d分":
																	" %d時間%02d分"),
									charge_type.base_time[HOUR], charge_type.base_time[MIN]);
				} else {
					sprintf(temp, "  　　%2d分", charge_type.base_time[MIN]);
				}
			}else{
				
				sprintf( temp,"%s",Charge_Base[60]);
				Cal_Parameter_Flg = 1;
			}

			strcat(cEditwk1, temp);
		}
		sprintf(cEditwk2, "%ld", charge_type.base_charge);
		Camma_Set((uchar *)cEditwk2);
		strcat(cEditwk2, Pri_Tanni[0]);
		Str_Set1(								// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,					// 文字列１：料金設定名称
					cEditwk2,					// 文字列２：料金設定値
					pri_kind					// 印字先ﾌﾟﾘﾝﾀ
				);

		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		if (charge_type.fixed_charge == ON) {
		// 一定料金帯
			if(ChargeSetup_Time_Chek(2,charge_type.repeat_time[HOUR], charge_type.repeat_time[MIN])){
			if (charge_type.repeat_time[HOUR] != 0 || charge_type.repeat_time[MIN] != 0) {
			// 重複時間設定あり"(重複n)"
				sprintf(cEditwk1, "   %s  ", Charge_Carkind[(charge_type.repeat_sys == 0) ? 12 :13]);
			} else {
			// 重複時間設定なし(空白行)
				sprintf(cEditwk1, "");
			}
			}else{
				sprintf(cEditwk1, "%s", Charge_Base[60]);
				Cal_Parameter_Flg = 1;
			}
			sprintf(cEditwk2, "");
		} else {
		// 追加時間
			memset(temp, 0, sizeof(temp));
			if(ChargeSetup_Time_Chek(2,charge_type.repeat_time[HOUR], charge_type.repeat_time[MIN])){	// 重複帯
			if (charge_type.repeat_time[HOUR] != 0 || charge_type.repeat_time[MIN] != 0) {
			// 重複時間設定あり"(重複n)"
				sprintf(cEditwk1, "   %s  ", Charge_Carkind[(charge_type.repeat_sys == 0) ? 12 :13]);
			} else {
			// 重複時間設定なし
				sprintf(cEditwk1, "    　  　　");
			}
			}else{
				sprintf(cEditwk1, "%s  ", Charge_Base[60]);
				Cal_Parameter_Flg = 1;
			}
			strcat(cEditwk1, Charge_Carkind[11]);
			if(ChargeSetup_Time_Chek(1,charge_type.add_time[HOUR], charge_type.add_time[MIN])){			// 追加時間
			if (charge_type.add_time[HOUR] != 0) {
				sprintf(temp, ((charge_type.add_time[HOUR]/10)?"%d時間%02d分":
															   " %d時間%02d分"), charge_type.add_time[HOUR], charge_type.add_time[MIN]);
			} else {
				sprintf(temp, "  　　%2d分", charge_type.add_time[MIN]);
			}
			}else{
				sprintf( temp,"%s",Charge_Base[60]);
				Cal_Parameter_Flg = 1;
			}
			strcat(cEditwk1, temp);
			sprintf(cEditwk2, "%ld", charge_type.add_charge);
			Camma_Set((uchar *)cEditwk2);
			strcat(cEditwk2, Pri_Tanni[0]);
		}
		Str_Set1(								// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,					// 文字列１：料金設定名称
					cEditwk2,					// 文字列２：料金設定値
					pri_kind					// 印字先ﾌﾟﾘﾝﾀ
				);
	}
}

//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:料金設定ﾃﾞｰﾀ編集(パターン)
//[]----------------------------------------------------------------------[]
///	@param[in]		sys			: 第n料金体系
///	@param[in]		pattern		: 料金帯
///	@param[in]		carkind		: 車種
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/07/18<br>
///					Update	: 
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_edit_ChargePatternData(uchar sys, uchar pattern, uchar carkind, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	CHARGE_REGTYPE	charge_regtype;			// パターンデータ

	PCMD_LEFT( pri_kind );					// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );	// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );	// 漢字（通常）指定
	
	if (charge_ctrl.carkind_useflag == ON && charge_ctrl.sys_useflag[sys] == ON
	&& pattern <= charge_ctrl.repeat_end) {
	// 車種・料金体系使用あり && 繰り返し終了でない
		memset(&charge_regtype, 0, sizeof(charge_regtype));
		// パターンデータ取得
		ChargeSetup_PatternDataGet(sys, pattern, carkind, &charge_regtype);
// MH322914 (s) kasiyama 2016/07/08 逓減帯で深夜帯後の取り方でパターンを飛び越した時に印字できない(共通改善No.1214)(MH341106)
// 単位時間が0:00は使用しないパターンと判断し印字しない
		if( charge_regtype.pattern_time[HOUR] == 0 && charge_regtype.pattern_time[MIN] == 0 ){
			return;
		}
// MH322914 (e) kasiyama 2016/07/08 逓減帯で深夜帯後の取り方でパターンを飛び越した時に印字できない(共通改善No.1214)(MH341106)
		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		// 単位時間
		if (pattern >= 9) {		// ２桁
			sprintf(cEditwk1, "%s%2d     %s", Charge_Carkind[17], pattern+1, Charge_Carkind[18]);
		} else {				// １桁
			sprintf(cEditwk1, "%s%d      %s", Charge_Carkind[17], pattern+1, Charge_Carkind[18]);
		}
		if(ChargeSetup_Time_Chek(1,charge_regtype.pattern_time[HOUR], charge_regtype.pattern_time[MIN]) == 1){
			if (charge_regtype.pattern_time[HOUR] != 0) {
				sprintf(cEditwk2, "%2d時間%02d分", charge_regtype.pattern_time[HOUR], charge_regtype.pattern_time[MIN]);
			} else {
				sprintf(cEditwk2, "%d分", charge_regtype.pattern_time[MIN]);
			}
		}else{
			sprintf(cEditwk2, "%s", Charge_Base[60]);
			Cal_Parameter_Flg = 1;
		}
		Str_Set1(						// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,			// 文字列１：料金設定名称
					cEditwk2,			// 文字列２：料金設定値
					pri_kind			// 印字先ﾌﾟﾘﾝﾀ
				);

		// 単位係数
		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		if ((charge_ctrl.pattern_start-1 == pattern) && (charge_ctrl.pattern_end-1 == pattern)) {
		// 繰り返し開始と終了と現在のパターンが一致
			sprintf(cEditwk1, "%s %s", Charge_Carkind[23], Charge_Carkind[19]);	// (単独繰り返し)
		} else if ((charge_ctrl.pattern_start-1 != charge_ctrl.pattern_end-1)
				&& (charge_ctrl.pattern_start-1 == pattern)) {
		// 繰り返し開始と一致
			sprintf(cEditwk1, "%s %s", Charge_Carkind[21], Charge_Carkind[19]);	// (繰り返し開始)
		} else if ((charge_ctrl.pattern_start-1 != charge_ctrl.pattern_end-1)
				&& (charge_ctrl.pattern_end-1 == pattern)) {
		// 繰り返し終了と一致
			sprintf(cEditwk1, "%s %s", Charge_Carkind[22], Charge_Carkind[19]);	// (繰り返し終了)
		} else {
		// 不一致
			sprintf(cEditwk1, "               %s", Charge_Carkind[19]);
		}
		sprintf(cEditwk2, "%4d回", charge_regtype.pattern_cnt);
		Str_Set1(							// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,				// 文字列１：料金設定名称
					cEditwk2,				// 文字列２：料金設定値
					pri_kind				// 印字先ﾌﾟﾘﾝﾀ
				);

		// 単位料金
		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		sprintf(cEditwk1, "               %s", Charge_Carkind[20]);
		sprintf(cEditwk2, "%ld", charge_regtype.pattern_charge);
		Camma_Set((uchar *)cEditwk2);
		strcat(cEditwk2, Pri_Tanni[0]);
		Str_Set1(						// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,			// 文字列１：料金設定名称
					cEditwk2,			// 文字列２：料金設定値
					pri_kind			// 印字先ﾌﾟﾘﾝﾀ
				);
	}
}

//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:定期設定を取得
//[]----------------------------------------------------------------------[]
///	@param[in]		kind	: 指定定期種別
///	@param[in]		type	: 0:定期設定(kind==0)、1:定期種別設定
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/07/23<br>
///					Update	: 
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_PassDataGet(uchar kind, uchar type)
{
	uchar	i, j;	// ループ
	ushort	data;	// temp

	charge_ctrl.discount_useflag = OFF;		// 定期券使用フラグクリア
	if ((prm_get(COM_PRM, S_SYS, 70, 1, 6) != 0) || (prm_get(COM_PRM, S_SYS, 70, 1, 3) != 0)
	 || (prm_get(COM_PRM, S_SYS, 70, 1, 2) != 0) || (prm_get(COM_PRM, S_SYS, 70, 1, 1) != 0)) {
	// 定期券使用設定あり(01-0070①④⑤⑥)
		if (type == 0) {
		// 定期設定
			for (i = 0; i < PASS_KINDMAX; i++) {
				// 使用目的(07-0001～⑤⑥)
				data =  (short)CPrmSS[S_PAS][1+10*i];
				if (data != 0) {
				// 使用曜日取得(07-0006,7～)
					ChargeSetup_DayOfWeekGet(i, charge_ctrl.day_of_week, S_PAS);
					for (j = 0; j < CHARGE_DAYOFWEEKMAX; j++) {
						if (charge_ctrl.day_of_week[j] == 0) {
						// 有効曜日があれば終了
							charge_ctrl.discount_useflag = ON;
							break;
						}
					}
				}
				if (charge_ctrl.discount_useflag == ON) {
				// 使用あり設定なら終了
					break;
				}
			}
			// 定期券チェック
			charge_ctrl.pass_check = (uchar)PPrmSS[S_P01][3];
			// 初回定期
			charge_ctrl.pass_first = CPrmSS[S_TIK][8];
			// 同一カード連続利用禁止時間
			charge_ctrl.samepass_time = (uchar)prm_get(COM_PRM, S_TIK, 9, 2, 1);
			// 駐車券の併用
		} else {
		// 定期種別設定
			data =  (short)CPrmSS[S_PAS][1+10*kind];
			if (data != 0) {
			// 使用曜日取得(07-0006,7～)
				ChargeSetup_DayOfWeekGet(kind, charge_ctrl.day_of_week, S_PAS);
				for (j = 0; j < CHARGE_DAYOFWEEKMAX; j++) {
					if (charge_ctrl.day_of_week[j] == 0) {
					// 有効曜日があれば終了
						charge_ctrl.discount_useflag = ON;
						break;
					}
				}
			}
		}
// MH321800(S) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
		// ※料金設定パラメータ印字は参照データが多く印字しないケースが続くと、タスク占有時間が長くなる。
		//   そのため、E3260が発生してしまうケースがあるので、１印字項目完了で一旦taskchg()を行うこととする
		xPause_PRNTSK(0L);
// MH321800(E) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
	}
}

//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:割引設定ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		kind	: 定割引種類
///										S_SER = サービス券<br>
///										S_STO = 店割引<br>
///										S_TAT = 多店舗割引
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/01/17<br>
///					Update	: 2008/07/23<br>
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_DiscountUseflagGet(short kind)
{
// MH810104(S) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5793 多店舗割引店№999対応
// 	uchar	i;		// ループ
	ushort	i;		// ループ
// MH810104(E) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5793 多店舗割引店№999対応
	uchar 	data;	// temp

	charge_ctrl.discount_useflag = OFF;		// 割引券使用フラグクリア
	// 各割引券が使用されてるかどうか
	switch(kind) {
	case S_SER:			// サービス券
		if ((prm_get(COM_PRM, S_SYS, 71, 1, 6) != 0) || (prm_get(COM_PRM, S_SYS, 71, 1, 3) != 0)
		 || (prm_get(COM_PRM, S_SYS, 71, 1, 2) != 0) || (prm_get(COM_PRM, S_SYS, 71, 1, 1) != 0)) {
		// サービス券使用設定あり(01-0071①④⑤⑥)
			for (i = 0; i < SIRVICE_NUMMAX; i++) {
				data = (uchar)prm_get(COM_PRM, S_SER, (short)(1+i*3), 1, 1);
				if (data != 0) {
					charge_ctrl.discount_useflag = ON;
					break;
				}
				data = (uchar)prm_get(COM_PRM, S_SER, (short)(3+i*3), 2, 1);
				if (data != 0) {
					charge_ctrl.discount_useflag = ON;
					break;
				}
			}
		}
		break;
	case S_STO:			// 店割引
		if ((prm_get(COM_PRM, S_SYS, 71, 1, 6) != 0) || (prm_get(COM_PRM, S_SYS, 71, 1, 3) != 0)
		 || (prm_get(COM_PRM, S_SYS, 71, 1, 2) != 0) || (prm_get(COM_PRM, S_SYS, 71, 1, 1) != 0)) {
		// 掛売券(店)使用設定あり(01-0071①④⑤⑥)
			for (i = 0; i < STORE_NUMMAX; i++) {
				data = (uchar)prm_get(COM_PRM, S_STO, (short)(1+i*3), 1, 1);
				if (data != 0) {
					charge_ctrl.discount_useflag = ON;
					break;
				}
				data = (uchar)prm_get(COM_PRM, S_STO, (short)(3+i*3), 2, 1);
				if (data != 0) {
					charge_ctrl.discount_useflag = ON;
					break;
				}
			}
		}
		break;
	case S_TAT:			// 多店舗割引
		if ((prm_get(COM_PRM, S_SYS, 71, 1, 6) != 0) || (prm_get(COM_PRM, S_SYS, 71, 1, 3) != 0)
		 || (prm_get(COM_PRM, S_SYS, 71, 1, 2) != 0) || (prm_get(COM_PRM, S_SYS, 71, 1, 1) != 0)) {
		// 掛売券(多店舗)使用設定あり(01-0071①④⑤⑥)
			for (i = 0; i < STORES_KINDMAX; i++) {
			// 種別
				data = (uchar)prm_get(COM_PRM, kind, (short)(2+i*2), 1, 1);
				if (data != 0) {
					charge_ctrl.discount_useflag = ON;
					break;
				}
			}
			if (charge_ctrl.discount_useflag == OFF) {
			// 店(101～255)
// MH810104(S) R.Endo 2021/08/18 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(多店舗割引使用チェックの不具合修正)
//				for (i = 0; i < STORES_NUMMAX; i++) {
				for ( i = 0; i < (STORES_NUMMAX - STORE_NUMMAX); i++ ) {
// MH810104(E) R.Endo 2021/08/18 車番チケットレス フェーズ2.3 #5792 多店舗割引対応(多店舗割引使用チェックの不具合修正)
					data = (uchar)prm_get(COM_PRM, kind, (short)(32+i), 1, 1);
					if (data != 0) {
						charge_ctrl.discount_useflag = ON;
						break;
					}
				}
			}
			for (i = 0; i < STORE_NUMMAX; i++) {
				if (charge_ctrl.discount_useflag == OFF) {
				// 店(1～100)
					// 役割
					data = (uchar)prm_get(COM_PRM, S_STO, (short)(1+i*3), 1, 1);
					if (data != 0) {
						charge_ctrl.discount_useflag = ON;
						break;
					}
					data = (uchar)prm_get(COM_PRM, S_STO, (short)(3+i*3), 2, 1);
					if (data != 0) {
						charge_ctrl.discount_useflag = ON;
						break;
					}
				}
			}
		}
		break;
	default :
		break;
	}
// MH321800(S) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
	// ※料金設定パラメータ印字は参照データが多く印字しないケースが続くと、タスク占有時間が長くなる。
	//   そのため、E3260が発生してしまうケースがあるので、１印字項目完了で一旦taskchg()を行うこととする
	xPause_PRNTSK(0L);
// MH321800(E) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
}

//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:定期設定ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/07/23<br>
///					Update	: 
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_edit_PassData(uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	PCMD_LEFT( pri_kind );							// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );			// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );			// 漢字（通常）指定

	if (charge_ctrl.discount_useflag == ON) {
	// 定期使用設定あり
		// 定期券チェック
		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		sprintf(cEditwk1, "%s", Charge_Pass[0]);
		sprintf(cEditwk2, "%s", Charge_Pass[(charge_ctrl.pass_check == 0) ? 5 : 4]);
		Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,						// 文字列１：料金設定名称
					cEditwk2,						// 文字列２：料金設定値
					pri_kind						// 印字先ﾌﾟﾘﾝﾀ
				);

		// 初回定期
		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		sprintf(cEditwk1, "%s", Charge_Pass[1]);
		if(charge_ctrl.pass_first == 0){
			sprintf(cEditwk2, "%s", Charge_Base[23]);
		}else if(charge_ctrl.pass_first == 1){
			sprintf(cEditwk2, "%s", Charge_Pass[7]);
		}else{
			sprintf(cEditwk2, "%s", Charge_Base[60]);
			Cal_Parameter_Flg = 1;
		}
		Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,						// 文字列１：料金設定名称
					cEditwk2,						// 文字列２：料金設定値
					pri_kind						// 印字先ﾌﾟﾘﾝﾀ
				);
	}
}

//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:定期種別設定ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		kind		: 定期種別
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/07/23<br>
///					Update	: 
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_edit_PassKindData(uchar kind, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	uchar		i;					// ループ
	ushort		type;				// 使用目的(1:時間帯定期、2:割引時間定期、3～14:種別切換定期)
	uchar		print_flag = NG;	// 印字有無
	char		carkind[2];			// 車種
	sPASS_DATA	pass_data;			// 定期種別データ

		ChargeSetup_PassDataGet(kind, 1);				// 定期種別設定取得
		if (charge_ctrl.discount_useflag == OFF) {
		// 未使用設定なら終了
			return;
		}
		// タイトル
		memset(cEditwk1, 0, sizeof(cEditwk1));
		sprintf(cEditwk1, "------------  定期%02d  ------------", kind+1);
		PrnStr(cEditwk1, pri_kind);

		memset(&pass_data, 0, sizeof(pass_data));
		ChargeSetup_PassKindDataGet(kind, &pass_data);	// 定期種別設定データ取得
		// 使用目的
		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		if (rangechk(1, 14, pass_data.pass_kind)) {
			type = pass_data.pass_kind;
			switch(type) {
			case 1:
				sprintf(cEditwk1, "%s", Charge_Pass[8]);
				break;
			case 2:
				sprintf(cEditwk1, "%s", Charge_Pass[9]);
				break;
			default :
				sprintf(cEditwk1, "%s", Charge_Pass[10]);
				break;
			}
			sprintf(cEditwk2, "");
			Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,						// 文字列１：料金設定名称
						cEditwk2,						// 文字列２：料金設定値
						pri_kind						// 印字先ﾌﾟﾘﾝﾀ
					);
		}
		else{
			if( pass_data.pass_kind ){
				sprintf(cEditwk1, "%s", Charge_Base[60]);
				sprintf(cEditwk2, "");
				Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,						// 文字列１：料金設定名称
							cEditwk2,						// 文字列２：料金設定値
							pri_kind						// 印字先ﾌﾟﾘﾝﾀ
						);
				Cal_Parameter_Flg = 1;
			}
		}

		// 曜日
		ChargeSetup_DayOfWeekGet(kind, charge_ctrl.day_of_week, S_PAS);
		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		sprintf(cEditwk2, "");
		for (i = 0; i < CHARGE_DAYOFWEEKMAX; i++) {		// 月～期3
			if (charge_ctrl.day_of_week[i] == 0) {
			// 曜日有効
				strcat(cEditwk1, Charge_Week[i]);
				print_flag = OK;
				if (i != 10) {
					strcat(cEditwk1, " ");
				}
			}
		}
		if (print_flag == OK) {
			Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,						// 文字列１：料金設定名称
						cEditwk2,						// 文字列２：料金設定値
						pri_kind						// 印字先ﾌﾟﾘﾝﾀ
					);
			print_flag = NG;
		}

		// ステータスチェック
		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		sprintf(cEditwk1, "%s", Charge_Pass[11]);
		if( pass_data.status_check <= 4){
			sprintf(cEditwk2, "%s", Charge_Pass[(pass_data.status_check == 0) ? 4 : 24+pass_data.status_check]);
		}else{
			sprintf(cEditwk2, "%s", Charge_Base[60]);
			Cal_Parameter_Flg = 1;
		}
		Str_Set1(										// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,							// 文字列１：料金設定名称
					cEditwk2,							// 文字列２：料金設定値
					pri_kind							// 印字先ﾌﾟﾘﾝﾀ
				);

		// 料金種別
		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		if (type >= 3) {
			// 種別切換定期
			print_flag = OK;
		}
		if (print_flag == OK && rangechk(1, 12, pass_data.charge_kind)) {
			sprintf(cEditwk1, "%s    %s", Charge_Pass[12], Charge_Pass[14]);
			carkind[0] = (char)('A' + (pass_data.charge_kind-1));
			carkind[1] = '\0';
			sprintf(cEditwk2, "%s種", carkind);
			Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,						// 文字列１：料金設定名称
						cEditwk2,						// 文字列２：料金設定値
						pri_kind						// 印字先ﾌﾟﾘﾝﾀ
					);
			print_flag = NG;
		}

		// 期限切れ受付
		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		sprintf(cEditwk1, "%s", Charge_Pass[18]);
		if(pass_data.expire <= 1){
			sprintf(cEditwk2, "%s", Charge_Pass[4+pass_data.expire]);
		}else{
			sprintf(cEditwk2, "%s", Charge_Base[60]);
			Cal_Parameter_Flg = 1;
		}
		Str_Set1(										// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,							// 文字列１：料金設定名称
					cEditwk2,							// 文字列２：料金設定値
					pri_kind							// 印字先ﾌﾟﾘﾝﾀ
				);

		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		sprintf(cEditwk1, "%s", Charge_Pass[38]);
		if(pass_data.indefinite <= 3){
			sprintf(cEditwk2, "%s", Charge_Pass[(pass_data.indefinite <= 1) ? 4+pass_data.indefinite : 37+pass_data.indefinite]);
		}else{
			sprintf(cEditwk2, "%s", Charge_Base[60]);
			Cal_Parameter_Flg = 1;
		}
		Str_Set1(										// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,							// 文字列１：料金設定名称
					cEditwk2,							// 文字列２：料金設定値
					pri_kind							// 印字先ﾌﾟﾘﾝﾀ
				);

		// 第n料金体系
		if (type < 3) {
		// 種別切換定期でない
			for (i = 0; i < CHARGE_SYSMAX; i++) {
				memset(cEditwk1, 0, sizeof(cEditwk1));
				memset(cEditwk2, 0, sizeof(cEditwk2));
				if (pass_data.sys_priflag[i] == ON) {
				// 料金体系印字設定あり
					if (type == 1) {
						// 時間帯定期
						if(i<3){
							sprintf(cEditwk1, "%s %s", Charge_Pass[21+i], Charge_Pass[24]);
						}
						else {
							sprintf(cEditwk1, "%s %s", Charge_Pass[45+i-3], Charge_Pass[24]);
						}
						if( ( ChargeSetup_Time_Chek(0, pass_data.start_time[i][HOUR], pass_data.start_time[i][MIN])==1 )&&
							( ChargeSetup_Time_Chek(0,pass_data.end_time[i][HOUR], pass_data.end_time[i][MIN])==1) ){
							sprintf(cEditwk2, "%02d:%02d～%02d:%02d", pass_data.start_time[i][HOUR], pass_data.start_time[i][MIN],
																	pass_data.end_time[i][HOUR], pass_data.end_time[i][MIN]);
						}else{
							sprintf(cEditwk2, "%s", Charge_Base[60]);
							Cal_Parameter_Flg = 1;
						}
						print_flag = OK;
					} else {
						// 割引時間定期
						if(i<3){
							sprintf(cEditwk1, "%s %s", Charge_Pass[21+i], Charge_Discount[0]);
						}
						else {
							sprintf(cEditwk1, "%s %s", Charge_Pass[45+i-3], Charge_Discount[0]);
						}
						if(ChargeSetup_Time_Chek(1,pass_data.start_time[i][HOUR], pass_data.start_time[i][MIN])){
							if (pass_data.start_time[i][HOUR] != 0) {
								sprintf(cEditwk2, "%2d時間%02d分", pass_data.start_time[i][HOUR], pass_data.start_time[i][MIN]);
							} else {
								sprintf(cEditwk2, "%2d分", pass_data.start_time[i][MIN]);
							}
						}else{
							sprintf(cEditwk2, "%s", Charge_Base[60]);
							Cal_Parameter_Flg = 1;
						}
						print_flag = OK;
					}
					if (print_flag == OK) {
						Str_Set1(						// -----印字ﾃﾞｰﾀ編集-----
									cEditwk1,			// 文字列１：料金設定名称
									cEditwk2,			// 文字列２：料金設定値
									pri_kind			// 印字先ﾌﾟﾘﾝﾀ
								);
						print_flag = NG;
					}
				}
			}
// MH321800(S) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
			// ※料金設定パラメータ印字は参照データが多く印字しないケースが続くと、タスク占有時間が長くなる。
			//   そのため、E3260が発生してしまうケースがあるので、１印字項目完了で一旦taskchg()を行うこととする
			xPause_PRNTSK(0L);
// MH321800(E) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
		}
}

// MH810100(S)
////[]----------------------------------------------------------------------[]
/////	@brief			運用設定プリント車室番号印字ﾃﾞｰﾀ編集
////[]----------------------------------------------------------------------[]
/////	@param[in]		car_kind		: 車種
/////	@param[in]		pri_kind		: 印字先ﾌﾟﾘﾝﾀ
/////	@param[in]		nop_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
/////	@return			void
////[]----------------------------------------------------------------------[]
/////	@author			Sekiguchi
/////	@date			Create	: 2011/07/27<br>
////[]------------------------------------- Copyright(C) 2011 AMANO Corp.---[]
// void	ChargeSetup_LockNoEdit(uchar car_kind, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
// {
//
// 	ushort	lk_no;						// ﾛｯｸ装置No.
// 	ulong	pk_posi;					// 「区画、番号」	設定ﾃﾞｰﾀ取得ﾜｰｸ
// 	uchar	edit_pos = 0;				// 印字ﾃﾞｰﾀ編集位置（左からの印字位置：１～４）
// 	short	ans;						// 種別ﾃｰﾌﾞﾙ参照結果
// 	uchar	work=0;						// 作業用領域
//
// 	lk_no = p_proc_data->Prn_no_wk[2] + 1;
//	
// 	if(p_proc_data->Prn_no_wk[2] == 0){
// 		// IF盤、内蔵フラップ開始位置取得
// 		work = GetCarInfoParam();
// 		if(( work & 0x06 ) == 0x04 ){							// 内蔵フラップ設定のみ
// 			lk_no = INT_CAR_START_INDEX+1;				// 装置Noの調整値に内蔵の開始インデックスをセット
// 		}else{													// IF盤のみまたは併用設定時
// 			lk_no = CAR_START_INDEX+1;					// 装置Noの調整値にIF盤の開始インデックスをセット
// 		}
// 		sprintf(prn_work, "【車室番号】");
// 		PrnStr( prn_work, pri_kind );						// 編集した印字ﾃﾞｰﾀ登録
// 	}
//	
// 	work = GetCarInfoParam();
// 	for( ; lk_no <= LOCK_MAX ; lk_no++ ){	// 印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟ
// 		WACDOG;
// 		if( lk_no-1 < INT_CAR_START_INDEX ) {
// 			if( !( work & 0x02 ) ) {
// 				continue;
// 			}
// 		} else if( lk_no-1 < BIKE_START_INDEX ) {
// 			if( !( work & 0x04 ) ) {
// 				continue;
// 			}
// 		} else {
// 			if( !( work & 0x01 ) ) {
// 				continue;
// 			}
// 		}
//	
// 		if(car_kind == LockInfo[lk_no-1].ryo_syu){//種別
// 			ans = ON;
// 		}else{
// 			ans = OFF;
// 		}
//	
// 		if( ans == ON ){											// 編集条件に一致する定期ID？
// 			pk_posi	= Prn_pkposi_make( lk_no );
// 			pk_posi %= 10000L;
// 			ChargeSetup_LockNo_edit_id( (ushort)pk_posi, edit_pos );	// 対象車室番号を印字編集ｴﾘｱ（prn_work）へ登録
// 			edit_pos++;
//
// 			if( edit_pos >= 4 ){									// １行分（ID4個）編集終了
// 																	/*------	＜１行分（ID５個）＞編集	------*/
// 				PCMD_LEFT( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
// 				PrnFontSize( FONT_A_NML, pri_kind );				// ﾌｫﾝﾄＡ（通常）指定
// 				PrnFontSize( FONT_K_NML, pri_kind );				// 漢字（通常）指定
// 				PrnStr( prn_work, pri_kind );						// 編集した印字ﾃﾞｰﾀ登録
// 				p_proc_data->Prn_no_wk[2] = lk_no;
// 				p_proc_data->Prn_no_wk[3] = 1;
// 				return ;
// 			}
// 		}
// 	}																// 印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟＥＮＤ
// 	if( edit_pos != 0 ){											// 編集済み車室番号あり？
// 																	/*------	＜編集済みID＞編集	------*/
// 		PCMD_LEFT( pri_kind );										// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
// 		PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
// 		PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
// 		PrnStr( prn_work, pri_kind );								// 編集した印字ﾃﾞｰﾀ登録
// 		p_proc_data->Prn_no_wk[2] = lk_no;
// 		p_proc_data->Prn_no_wk[3] = 1;
// 		return;
// 	}
// 	p_proc_data->Prn_no_wk[2] = lk_no;
// 	return;
// }
// MH810100(E)
//[]----------------------------------------------------------------------[]
///	@brief			運用設定プリント車室番号印字ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		id			: 車室番号
///	@param[in]		pos			: 編集番号
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Sekiguchi
///	@date			Create	: 2011/07/27<br>
//[]------------------------------------- Copyright(C) 2011 AMANO Corp.---[]
void	ChargeSetup_LockNo_edit_id( ushort id, uchar pos )
{

	switch( pos ){

		case	0:	// １番目に車室番号を編集
			sprintf( &prn_work[0],"No.%04d                       ", id );		// prn_work[0]～[33]に編集
			break;

		case	1:	// ２番目に車室番号を編集
			sprintf( &prn_work[7],"  No.%04d                 ", id );			// prn_work[7]～[33]に編集
			break;

		case	2:	// ３番目に車室番号を編集
			sprintf( &prn_work[16],"  No.%04d          ", id );					// prn_work[16]～[33]に編集
			break;

		case	3:	// ４番目に車室番号を編集
			sprintf( &prn_work[25],"  No.%04d  ", id );							// prn_work[25]～[33]に編集
			break;

	}
}

//[]----------------------------------------------------------------------[]
///	@brief			運用設定プリントサービス券使用限度枚数印字ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Sekiguchi
///	@date			Create	: 2011/07/27<br>
//[]------------------------------------- Copyright(C) 2011 AMANO Corp.---[]
void	ChargeSetup_edit_DiscountData_Lmt( uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
		
	short	mai;							// 枚数
	char	service_num[2];					// 車種
	char	data_adr,data_pos;
	char	prm_pos[4] = { 0, 5, 3, 1 };	
	ushort	type;								// No.
	long	use_flag;							// 割引種類
	CHARGE_DISCOUNTDATA		discount_data;		// 割引データ
	
	data_pos = 0;
	data_adr = 0;
	if(p_proc_data->Prn_no_data2 == 0){				// 初回のみ印字
		// サービス券券種毎使用制限設定
		if( prm_get(COM_PRM, S_DIS, 1, 1, 6 )  > 1){
			sprintf(cEditwk1, "サービス券券種毎使用制限%s",Charge_Base[60]);
			Cal_Parameter_Flg = 1;
			PrnStr(cEditwk1, pri_kind);
		}
		// サービス券使用限度枚数
		mai = (uchar)prm_get(COM_PRM, S_DIS, 1, 2, 1);
		sprintf(cEditwk2, "サービス券");
		strcat(cEditwk2, Charge_Discount[5]);
		/* 枚数 */
		if(rangechk(0, 99, mai)){
			sprintf(cEditwk1, "%d枚", mai);
		}else{
			sprintf(cEditwk1, "%s", Charge_Base[60]);
			Cal_Parameter_Flg = 1;
		}

		Str_Set1(								// -----印字ﾃﾞｰﾀ編集-----
					cEditwk2,					// 文字列１：サービス券名称
					cEditwk1,					// 文字列２：使用限度枚数設定値
					pri_kind					// 印字先ﾌﾟﾘﾝﾀ
				);
		return;
	}

	//券種毎の使用限度枚数
	if( prm_get(COM_PRM, S_DIS, 1, 1, 6 )  == 1){
		type = p_proc_data->Prn_no_data2 - 1;
		memset(&discount_data, 0, sizeof(discount_data));

		// データ取得
		ChargeSetup_DiscountDataGet(S_SER, type, &discount_data);
		use_flag 	= discount_data.kind;

		if( (type+1) <= 3 ){
			data_adr = 106;									// 使用限度枚数別のﾃﾞｰﾀｱﾄﾞﾚｽ取得
			data_pos = (char)prm_pos[(type+1)];				// 使用限度枚数のﾃﾞｰﾀ位置取得
		}else if( (type+1) <= 6 ){
			data_adr = 107;									// 使用限度枚数のﾃﾞｰﾀｱﾄﾞﾚｽ取得
			data_pos = (char)prm_pos[((type+1)-3)];			// 使用限度枚数のﾃﾞｰﾀ位置取得
		}else if( (type+1) <= 9 ){
			data_adr = 108;									// 使用限度枚数のﾃﾞｰﾀｱﾄﾞﾚｽ取得
			data_pos = (char)prm_pos[((type+1)-6)];			// 使用限度枚数のﾃﾞｰﾀ位置取得
		}else if( (type+1) <= 12 ){
			data_adr = 109;									// 使用限度枚数のﾃﾞｰﾀｱﾄﾞﾚｽ取得
			data_pos = (char)prm_pos[((type+1)-9)];			// 使用限度枚数のﾃﾞｰﾀ位置取得
		}else if( (type+1) <= 15 ){
			data_adr = 110;									// 使用限度枚数のﾃﾞｰﾀｱﾄﾞﾚｽ取得
			data_pos = (char)prm_pos[((type+1)-12)];			// 使用限度枚数のﾃﾞｰﾀ位置取得
		}
		mai = (uchar)prm_get(COM_PRM, S_SER, (short)data_adr, 2, data_pos);
		
		if( (use_flag == 1 || use_flag == 2 || use_flag == 4)
			|| (rangechk(1, 12, discount_data.kind_change))) {

			/* タイトル */
			service_num[0] = (char)('A' + type);
			service_num[1] = '\0';
			sprintf(cEditwk2, "サービス券%s ", service_num);
			strcat(cEditwk2, Charge_Discount[5]);
			/* 枚数 */
			if(rangechk(0, 99, mai)){
				sprintf(cEditwk1, "%d枚", mai);
			}else{
				sprintf(cEditwk1, "%s", Charge_Base[60]);
				Cal_Parameter_Flg = 1;
			}

			Str_Set1(								// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,					// 文字列１：サービス券名称
						cEditwk1,					// 文字列２：使用限度枚数設定値
						pri_kind					// 印字先ﾌﾟﾘﾝﾀ
					);
		}
	}
}
//[]----------------------------------------------------------------------[]
///	@brief			運用設定プリントﾌﾟﾘﾍﾟｲﾄﾞ設定印字ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		pri_no		: 編集項目No.
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Sekiguchi
///	@date			Create	: 2011/07/27<br>
//[]------------------------------------- Copyright(C) 2011 AMANO Corp.---[]
void	ChargeSetup_edit_PriCard(uchar pri_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	
	long				cnt;				// ﾌﾟﾘﾍﾟｲﾄﾞの種別
	ushort				kigen;				// ﾌﾟﾘﾍﾟｲﾄﾞ有効期間
	
	PCMD_LEFT( pri_kind );												// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );								// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );								// 漢字（通常）指定
	memset(cEditwk1, 0, sizeof(cEditwk1));								// カード名領域初期化
	memset(cEditwk2, 0, sizeof(cEditwk2));								// 可否状態領域初期化
	cnt = CPrmSS[S_PRP][1];
	kigen = (ushort)prm_get( COM_PRM,S_PRP,11,2,1 );

	if( kigen == 0 ){
		kigen = 6;
	}

	p_proc_data->Prn_no_wk[1]++;										// 処理番号更新
	switch(p_proc_data->Prn_no_wk[1])									// 処理番号毎に印字処理を分岐
	{
	case 1:																// 表題 "***  ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ／回数券設定  ***"
		if (cnt != 0) {
			ChargeSetup_edit_Title(pri_no, pri_kind, p_proc_data);		// 表題印字処理
		}
		break;															// 分岐処理終了
	case 2:																// ﾌﾟﾘﾍﾟｲﾄﾞ情報
		if (cnt != 0) {
			if ((prm_get(COM_PRM, S_SYS, 72, 1, 6) != 0) || (prm_get(COM_PRM, S_SYS, 72, 1, 3) != 0)
			 || (prm_get(COM_PRM, S_SYS, 72, 1, 2) != 0) || (prm_get(COM_PRM, S_SYS, 72, 1, 1) != 0)) {
			// 使用設定あり(01-0072①④⑤⑥)
				if(cnt == 1){
					sprintf(cEditwk1, "%s", Charge_Base[16]);	// プリペイドカード
					sprintf(cEditwk2, "%s", Charge_Base[25]);	// 使用可能
				}else if(cnt == 2){
					sprintf(cEditwk1, "%s", Charge_Base[17]);	// 回数券
					sprintf(cEditwk2, "%s", Charge_Base[25]);	// 使用可能
				}else{
					sprintf(cEditwk1, "%s", Charge_Base[16]);	// プリペイドカード
					sprintf(cEditwk2, "%s", Charge_Base[60]);	// ■■■■■
					Cal_Parameter_Flg = 1;
				}
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
				if( prm_get( COM_PRM, S_PRP, 1, 1, 2 ) == 0 ){	// 課税対象
					strcat(cEditwk1, Charge_Discount[6]);		// "[税]"
				}
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
				Str_Set1(cEditwk1,cEditwk2,pri_kind);
				
			// 有効期間
				if(cnt == 1){
					sprintf(cEditwk1, "有効期間");
					if ( kigen == 99 ){
						strcpy( cEditwk2, "期限なし" );
					}else if( kigen <= 6){
						sprintf( cEditwk2,"%dヶ月",kigen );
					}else{
						sprintf( cEditwk2,"%s",Charge_Base[60] );
						Cal_Parameter_Flg = 1;
					}
					Str_Set1(cEditwk1,cEditwk2,pri_kind);
				}
			}
		}
		break;
	}
}

//[]----------------------------------------------------------------------[]
///	@brief			運用設定プリント駐車証明書設定印字ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		pri_no		: 編集項目No.
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Sekiguchi
///	@date			Create	: 2011/07/27<br>
//[]------------------------------------- Copyright(C) 2011 AMANO Corp.---[]
// MH810100(S) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）	
// void	ChargeSetup_edit_Uketuke(uchar pri_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
// {
//
// 	uchar	set,mai;
//
// 	PCMD_LEFT( pri_kind );												// [位置揃え(左揃え)]
// 	PrnFontSize( FONT_A_NML, pri_kind );								// ﾌｫﾝﾄＡ（通常）指定
// 	PrnFontSize( FONT_K_NML, pri_kind );								// 漢字（通常）指定
// 	memset(cEditwk1, 0, sizeof(cEditwk1));								// カード名領域初期化
// 	memset(cEditwk2, 0, sizeof(cEditwk2));								// 可否状態領域初期化
// 	p_proc_data->Prn_no_wk[1]++;										// 処理番号更新
// 	switch(p_proc_data->Prn_no_wk[1])									// 処理番号毎に印字処理を分岐
// 	{
// 	case 1:																// 表題 "********  駐車証明書設定  ********"
// 		ChargeSetup_edit_Title(pri_no, pri_kind, p_proc_data);			// 表題印字処理
// 		break;															// 分岐処理終了
// 	case 2:																// クレジット
//		
// 		set = (uchar)prm_get(COM_PRM, S_TYP, 62, 1, 1);					//発行設定
// 		mai = (uchar)prm_get(COM_PRM, S_TYP, 62, 1, 3);					//発行枚数
//		
// 		// 発行設定
// 		strcpy(cEditwk1, "発行設定");									// "発行設定"
//
// 		if(set == 0){
// 			sprintf(cEditwk2, "発行なし(%d)",set);						// "発行なし"
// 		}else if(set <= 2){
// 			sprintf(cEditwk2, "発行あり(%d)",set);						// "発行有り"
// 		}else{
// 			sprintf(cEditwk2, "%s",Charge_Base[60]);						// "範囲外"
// 			Cal_Parameter_Flg = 1;
// 		}
//
// 		Str_Set1(cEditwk1, cEditwk2, pri_kind);							// 駐車証明書発行設定印字
//		
// 		// 発行枚数
// 		strcpy(cEditwk1, "発行枚数");								// "発行枚数"
// 		sprintf(cEditwk2, "%d枚",mai);								// "枚数"
// 		Str_Set1(cEditwk1, cEditwk2, pri_kind);						// 駐車証明書発行枚数
//
// 		break;
// 	}
// }
// MH810100(E) Y.Yamauchi 2019/12/03 車番チケットレス（運用設定印字修正）	
//[]----------------------------------------------------------------------[]
///	@brief			運用設定プリント音量設定印字ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		pri_no		: 編集項目No.
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Sekiguchi
///	@date			Create	: 2011/07/27<br>
//[]------------------------------------- Copyright(C) 2011 AMANO Corp.---[]

void	ChargeSetup_edit_Vol(uchar pri_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{

	uchar	set,vol0,vol1,i;
	uchar	stim[_TIME]={0,0},etim[_TIME]={0,0};
	ushort	wk_time,pos;
	const char prm_pos[3] = {5, 3, 1};

	PCMD_LEFT( pri_kind );												// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );								// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );								// 漢字（通常）指定
	memset(cEditwk1, 0, sizeof(cEditwk1));								// カード名領域初期化
	memset(cEditwk2, 0, sizeof(cEditwk2));								// 可否状態領域初期化
	p_proc_data->Prn_no_wk[1]++;										// 処理番号更新
	switch(p_proc_data->Prn_no_wk[1])									// 処理番号毎に印字処理を分岐
	{
	case 1:																// 表題 "********  音量設定  ********"
		ChargeSetup_edit_Title(pri_no, pri_kind, p_proc_data);			// 表題印字処理
		break;
	case 2:																// 音量設定
		// 音量設定
		set = (uchar)prm_get(COM_PRM, S_SYS, 53, 1, 1);

		if(set > 3){
			sprintf(cEditwk1, "音量P");
			sprintf(cEditwk2, "%s",Charge_Base[60]);
			Cal_Parameter_Flg = 1;
			Str_Set1(cEditwk1, cEditwk2, pri_kind);						// 音量ﾊﾟﾗﾒｰﾀ1印字
			break;
		}

		if(set == 0 ){
			set = 1;
		}
		for( i = 0 ; i < set ; i++ ){
			//終了時間
			if(i != set-1 ){
				pos = 55+i;
			}else{
				pos = 54;
			}
			wk_time = (ushort)prm_get(COM_PRM, S_SYS, (short)pos, 4, 1);
			wk_time = ChargeSetup_TimeDataCal(wk_time, 1, 1);	// -
			etim[HOUR] =  (uchar)(wk_time / 100);
			etim[MIN] =  (uchar)(wk_time % 100);
			
			//開始時間
			stim[HOUR] = (uchar)prm_get(COM_PRM, S_SYS, (short)(54+i), 2, 3);
			stim[MIN] = (uchar)prm_get(COM_PRM, S_SYS, (short)(54+i), 2, 1);
			
			sprintf(cEditwk1, "音量P%d", (i+1));
			if(ChargeSetup_Time_Chek(0,stim[HOUR],stim[MIN]) == 1){
				//音量
				sprintf(&cEditwk2[0], "%02d:%02d～%02d:%02d",
								stim[HOUR], stim[MIN],
								etim[HOUR], etim[MIN]);
			}else{
				sprintf(&cEditwk2[0], "  %s",Charge_Base[60]);
				Cal_Parameter_Flg = 1;
			}
			// 音量設定
			vol0 = (uchar)prm_get(COM_PRM, S_SYS, 51, 2, prm_pos[i]);
			vol1 = (uchar)prm_get(COM_PRM, S_SYS, 49, 2, prm_pos[i]);
			
			// ch0
			if( rangechk(0,31,(short)vol0) ){
				sprintf(&cEditwk2[12], " ch0:%02d",vol0);
			}else{
				sprintf(&cEditwk2[12], " ch0:%s",DAT1_1[9]);			// ■
				Cal_Parameter_Flg = 1;
			}
			// ch1
			if( rangechk(0,31,(short)vol1) ){
				sprintf(&cEditwk2[19], " ch1:%02d",vol1);
			}else{
				if(vol1 == 99){
					sprintf(&cEditwk2[19], " ch1:%02d",vol1);
				}else{
					sprintf(&cEditwk2[19], " ch1:%s",DAT1_1[9]);			// ■
					Cal_Parameter_Flg = 1;
				}
			}
			
			Str_Set1(cEditwk1, cEditwk2, pri_kind);					// 音量ﾊﾟﾗﾒｰﾀ印字
		}
		break;
	}
}

//[]----------------------------------------------------------------------[]
///	@brief			運用設定プリント特別日設定印字ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		pri_no		: 編集項目No.
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Sekiguchi
///	@date			Create	: 2011/07/27<br>
//[]------------------------------------- Copyright(C) 2011 AMANO Corp.---[]
void	ChargeSetup_edit_Splday(uchar pri_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{


	switch(p_proc_data->Prn_no_wk[1])										// 処理番号毎に印字処理を分岐
	{
		case	0:		// 表題

			/*------	＜表題＞編集	------*/
			ChargeSetup_edit_Title(pri_no, pri_kind, p_proc_data);			// 表題印字処理
			p_proc_data->Prn_no_data1 = 0;									// 特別日（月日）で使用する為クリア
			p_proc_data->Prn_no_wk[1]++;									// 処理番号更新
			break;

		case	1:		// ＜特別日（期間）＞印字

			SPLDAY_edit_Kikan( pri_kind ,1);								// ＜特別日（期間）＞印字ﾃﾞｰﾀ編集
			p_proc_data->Prn_no_wk[1]++;									// 処理番号更新
			break;

		case	2:		// ＜特別日（月日）＞印字

			SPLDAY_edit_Day( pri_kind, p_proc_data ,1);						// ＜特別日（月日）＞印字ﾃﾞｰﾀ編集
			if(p_proc_data->Prn_no_data1 >= SPLDAY_CNT){
				p_proc_data->Prn_no_wk[1]++;								// 処理番号更新
			}
			break;
		case	3:		// ＜特別日（ﾊｯﾋﾟｰﾏﾝﾃﾞｰ）＞印字

			if((prm_get( 0,S_TOK,(short)(41),1,1 )) == 0 ){
				SPLDAY_edit_Hmon( pri_kind ,1);								// ＜特別日（ﾊｯﾋﾟｰﾏﾝﾃﾞｰ）＞印字ﾃﾞｰﾀ編集
			}
			p_proc_data->Prn_no_wk[1]++;									// 処理番号更新
			break;

		case	4:		// ＜特別日（特別曜日）＞印字

			if((prm_get( 0,S_TOK,(short)(41),1,1 )) == 1 ){
				SPLDAY_edit_SPWEEK( pri_kind ,1);							// ＜特別日（特別曜日）＞印字ﾃﾞｰﾀ編集
			}
			p_proc_data->Prn_no_wk[1]++;									// 処理番号更新
			break;

		case	5:		// ＜特別日（特別年月日）＞印字

			SPLDAY_edit_SPYEAR( pri_kind ,1);									// ＜特別日（特別年月日）＞印字ﾃﾞｰﾀ編集
			p_proc_data->Prn_no_wk[1]++;									// 処理番号更新
			break;

		default:	// その他（エラー）
			break;															// 分岐処理終了
	}
}


//[]----------------------------------------------------------------------[]
///	@brief			運用設定プリントフッター設定印字ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		pri_no		: 編集項目No.
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Sekiguchi
///	@date			Create	: 2011/07/27<br>
//[]------------------------------------- Copyright(C) 2011 AMANO Corp.---[]
void	ChargeSetup_edit_Hoot(uchar pri_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	uchar	para;
	uchar	msg_no;

	p_proc_data->Prn_no_wk[1]++;										// 処理番号更新

	switch(p_proc_data->Prn_no_wk[1])									// 処理番号毎に印字処理を分岐
	{
	case 1:																// 表題 "********  フッター  ********"
		ChargeSetup_edit_Title(pri_no, pri_kind, p_proc_data);			// 表題印字処理
		break;
		
	case 2:																// 預り証フッター
		PCMD_CENTER( pri_kind );										// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnStr( PriTest_Title[2], pri_kind );
		para = (uchar)CPrmSS[S_PRN][14];				// 「預り証固定ﾒｯｾｰｼﾞ番号」設定ﾃﾞｰﾀ取得
		switch(para){
			case 90 :									// 「釣り切れ固定ﾒｯｾｰｼﾞ１」印字ﾃﾞｰﾀ編集
				msg_no = 1;
				break;
			case 91 :									// 「釣り切れ固定ﾒｯｾｰｼﾞ２」印字ﾃﾞｰﾀ編集
				msg_no = 2;
				break;
			case 92 :									// 「釣り切れ固定ﾒｯｾｰｼﾞ３」印字ﾃﾞｰﾀ編集
				msg_no = 3;
				break;
			case 93 :									// 「釣り切れ固定ﾒｯｾｰｼﾞ４」印字ﾃﾞｰﾀ編集
				msg_no = 4;
				break;
			case 200 :									// 「釣り切れ固定ﾒｯｾｰｼﾞ５」印字ﾃﾞｰﾀ編集
				msg_no = 5;
				break;
			default:									// 釣り切れ可変メッセージ または 未定義
				msg_no = 0;
				break;
		}
		if(msg_no == 0){								// 釣り切れ可変メッセージ または 未定義
			Prn_edit_AzuFtr_edit( pri_kind );
		}
		else{											// 釣り切れ固定メッセージ１～４
			Prn_edit_TurikireMsg(msg_no, pri_kind);
		}
		break;
		
	case 3:																// Tカードフッター
		break;
		
	default:															// 上記以外(フッターの印字処理が完了)
		break;															// 分岐処理終了
	}

}

//[]----------------------------------------------------------------------[]
///	@brief			運用設定プリント入出力端子設定印字ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		pri_no		: 編集項目No.
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Sekiguchi
///	@date			Create	: 2011/07/27<br>
//[]------------------------------------- Copyright(C) 2011 AMANO Corp.---[]
void	ChargeSetup_edit_InOut(uchar pri_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	long				cnt;
	uchar				i;

	p_proc_data->Prn_no_wk[1]++;										// 処理番号更新

	switch(p_proc_data->Prn_no_wk[1])									// 処理番号毎に印字処理を分岐
	{
	case 1:																// 表題 "********  入出力端子  ********"
		ChargeSetup_edit_Title(pri_no, pri_kind, p_proc_data);			// 表題印字処理
		break;															// 分岐処理終了
	case 2:																// 出力端子
// MH322914 (s) kasiyama 2016/07/11 運用設定プリントの出力信号数修正[共通バグNo.1266](MH341106)
//		for(i=0 ; i < 4 ; i++){
		for(i=0 ; i < OutPortMax ; i++){
// MH322914 (e) kasiyama 2016/07/11 運用設定プリントの出力信号数修正[共通バグNo.1266](MH341106)
			cnt = CPrmSS[S_OTP][(i*2)+1];
			if(cnt){
				sprintf(cEditwk2, "出力%d", i+1);
				if(OutPortTableNo[cnt]){
					if(cnt <= 99){
						sprintf(cEditwk1, "%s", OutPortType[OutPortTableNo[cnt]]);
					}else{
						sprintf(cEditwk1, "%s", Charge_Base[60]);
						Cal_Parameter_Flg = 1;
					}
				}else{
					sprintf(cEditwk1, "%s", Charge_Base[60]);
					Cal_Parameter_Flg = 1;
				}
				Str_Set1(cEditwk2,cEditwk1,pri_kind);
			}
		}
		break;
	case 3:																// 入力端子
// MH322914 (s) kasiyama 2016/07/11 運用設定プリントの出力信号数修正[共通バグNo.1266](MH341106)
//		for(i=0 ; i < 2 ; i++){
		for(i=0 ; i < InPortMax ; i++){
// MH322914 (e) kasiyama 2016/07/11 運用設定プリントの出力信号数修正[共通バグNo.1266](MH341106)
			cnt = CPrmSS[S_INP][i+1];
			if(cnt){
				sprintf(cEditwk2, "入力%d", i+1);
				if(InPortTableNo[cnt]){
					if(cnt <= 99){
						sprintf(cEditwk1, "%s", InPortType[InPortTableNo[cnt]]);
					}else{
						sprintf(cEditwk1, "%s", Charge_Base[60]);
						Cal_Parameter_Flg = 1;
					}
				}else{
					sprintf(cEditwk1, "%s", Charge_Base[60]);
					Cal_Parameter_Flg = 1;
				}
				Str_Set1(cEditwk2,cEditwk1,pri_kind);
			}
		}
		break;
	}
}

// MH810100(S)
////[]----------------------------------------------------------------------[]
/////	@brief			運用設定プリント車室ﾊﾟﾗﾒｰﾀ印字ﾃﾞｰﾀ編集
////[]----------------------------------------------------------------------[]
/////	@param[in]		pri_no		: 編集項目No.
/////	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
/////	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
/////	@return			void
////[]----------------------------------------------------------------------[]
/////	@author			Sekiguchi
/////	@date			Create	: 2011/07/27<br>
////[]------------------------------------- Copyright(C) 2011 AMANO Corp.---[]
// void	ChargeSetup_edit_LockPr(uchar pri_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
// {
// 	ushort			lk_no;						// ﾛｯｸ装置No.
// 	uchar			lok_syu;					// 「ﾛｯｸ装置種別」	設定ﾃﾞｰﾀ取得ﾜｰｸ
// 	uchar			ryo_syu;					// 「料金種別」		設定ﾃﾞｰﾀ取得ﾜｰｸ
// 	ulong			pk_posi;					// 「区画、番号」	設定ﾃﾞｰﾀ取得ﾜｰｸ
// 	uchar			if_oya;						// 「親IF盤No.」	設定ﾃﾞｰﾀ取得ﾜｰｸ
// 	uchar			lok_no;						// 「装置連番」		設定ﾃﾞｰﾀ取得ﾜｰｸ
// 	ushort			len;						// 文字ﾃﾞｰﾀﾚﾝｸﾞｽ
// 	static short	disp_adjuster;				// 表示用調整値
// 	uchar			work=0;						// 作業用領域
// 	ushort	area;		// 駐車位置ﾃﾞｰﾀ（区画番号）
// 	ushort	no;			// 駐車位置ﾃﾞｰﾀ（駐車位置番号）.
// 	ushort	Pri_Flg = 0;			// 駐車位置ﾃﾞｰﾀ（駐車位置番号）.
//	
// 	lk_no = 0;
//
// 	switch(p_proc_data->Prn_no_wk[1])									// 処理番号毎に印字処理を分岐
// 	{
// 	case 0:																// 表題 "********  駐車位置ﾊﾟﾗﾒｰﾀ  ********"
// 		PrnStr( "********  駐車位置ﾊﾟﾗﾒｰﾀ  ********", pri_kind );
// 		p_proc_data->Prn_no_wk[1]++;									// 処理番号更新
// 		lk_no=0;														// ﾛｯｸ装置No.
// 		break;															// 分岐処理終了
// 	case 1:
//	
// 		if(p_proc_data->Prn_no_wk[2] == 0){
// 			disp_adjuster = 0;
// 		}
// 		lk_no = p_proc_data->Prn_no_wk[2]+1;							// 編集対象とするﾛｯｸ装置No.取得
//		
// 		lok_syu =LockInfo[lk_no-1].lok_syu;								// 「ﾛｯｸ装置接続種別」設定ﾃﾞｰﾀ取得
// 		if( lok_syu ){													// 接続有？
// 			work = GetCarInfoParam();
// 			if( lk_no < (INT_CAR_START_INDEX+1) ){
// 				if(!( work & 0x02 )){
// 					p_proc_data->Prn_no_wk[2] = lk_no;					// 次に編集するﾛｯｸ装置No.をｾｰﾌﾞ
// 					break;
// 				}
// 			}else if( lk_no < (BIKE_START_INDEX+1) ){
// 				if(!( work & 0x04 )){
// 					p_proc_data->Prn_no_wk[2] = lk_no;					// 次に編集するﾛｯｸ装置No.をｾｰﾌﾞ
// 					break;
// 				}
// 			}else{
// 				if(!( work & 0x01 )){
// 					p_proc_data->Prn_no_wk[2] = lk_no;					// 次に編集するﾛｯｸ装置No.をｾｰﾌﾞ
// 					break;
// 				}
// 			}
// 			if( lk_no < (BIKE_START_INDEX+1) && !disp_adjuster ){
// 				//駐車TOP
// 				PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
// 				if(( work & 0x06 ) == 0x04 ){							// 内蔵フラップ設定のみ
// 					disp_adjuster = INT_CAR_START_INDEX+1;				// 装置Noの調整値に内蔵の開始インデックスをセット
// 				}else{													// IF盤のみまたは併用設定時
// 					disp_adjuster = CAR_START_INDEX+1;					// 装置Noの調整値にIF盤の開始インデックスをセット
// 				}
// 			}
// 			else if (lk_no >= (BIKE_START_INDEX + 1) ) {
// 				if( disp_adjuster != (BIKE_START_INDEX+1) ){		// 駐輪として初回印字？
// 				// 以下の行のインデントを修正する
// 			//駐輪TOP
// 				/*------	２行空白	------*/
// 				Prn_edit_space( pri_kind );
// 				Prn_edit_space( pri_kind );
//				
// 				PrnStr( "********  駐輪位置ﾊﾟﾗﾒｰﾀ  ********", pri_kind );
// 				PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
// 				disp_adjuster = BIKE_START_INDEX+1;
// 				}
// 			}
//
// 			//	編集対象とするﾛｯｸ装置No.が駐車位置として設定されている場合
//
// 			ryo_syu	= LockInfo[lk_no-1].ryo_syu;						// 「料金種別」		設定ﾃﾞｰﾀ取得
// 			pk_posi	= Prn_pkposi_make( lk_no );							// 「区画、番号」	設定ﾃﾞｰﾀ取得
// 			if_oya	= LockInfo[lk_no-1].if_oya;							// 「親IF盤No.」	設定ﾃﾞｰﾀ取得
// 			lok_no	= LockInfo[lk_no-1].lok_no;							// 「装置連番」		設定ﾃﾞｰﾀ取得
//
// 			if(lk_no == CAR_LOCK_MAX+1){
// 			}
//
// 			/*------	＜ﾛｯｸ装置No.＞編集	------*/
//			
// 			sprintf( cEditwk1,"＜装置No.%03d＞", (lk_no - (disp_adjuster-1)));
// 																		// cEditwk1←"＜装置No.XXX＞"印字ﾃﾞｰﾀ（XXX=ﾛｯｸ装置No.）
// 			Prn_edit_Title	(											// 印字ﾃﾞｰﾀ編集
// 											cEditwk1,
// 											FONT_K_NML,
// 											pri_kind
// 										);
//
// 			/*------	＜装置種別＆料金種別＞編集	------*/
// 			PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
// 			PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
// 			PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
//
// 			memset( cEditwk1,0,sizeof(cEditwk1) );						// cEditwk1：０ｸﾘｱ
//
// 			if(CAR_START_INDEX < lk_no && lk_no<=BIKE_START_INDEX ){
// 				len = rangechk(LK_TYPE_SANICA_FLAP, LK_TYPE_CONTACT_FLAP, lok_syu);	// 対象は「サニカ(15)」と「接点(16)」のみ
// 			}else{
// 				len = rangechk(1, 6, lok_syu);
// 			}
//			
// 			if(len){
// 				sprintf( cEditwk1,"装置種別 :%02d", lok_syu );				// cEditwk1←「装置種別」印字ﾃﾞｰﾀ
// 			}else{
// 				sprintf( cEditwk1,"装置種別 %s",Charge_Base[60] );				// cEditwk1←「装置種別」印字ﾃﾞｰﾀ
// 				Cal_Parameter_Flg = 1;
// 			}
//
// 			len = (ushort)strlen( cEditwk1 );							// 「装置種別」印字ﾃﾞｰﾀ文字列ﾚﾝｸﾞｽ検索
// 			if( len < 20 ){
// 				for( ; len < 20 ; len++ ){								// ｽﾍﾟｰｽ調整（２０ｶﾗﾑまでｽﾍﾟｰｽで埋める）
// 					cEditwk1[len] = ' ';
// 				}
// 			}
// 			if( ( rangechk(1, 12, ryo_syu) ) && 
// 				(  0 != prm_get( COM_PRM,S_SHA,(short)(1+6*(ryo_syu-1)),2,5 ) ) ){
// 				sprintf( &cEditwk1[20],"料金種別:%s", PkKukaku_Prn[ryo_syu] );			// cEditwk1←「料金種別」印字ﾃﾞｰﾀを追加編集
// 			}else{
// 				sprintf( &cEditwk1[20],"料金%s",Charge_Base[60] );			// cEditwk1←「料金種別」印字ﾃﾞｰﾀを追加編集
// 				Cal_Parameter_Flg = 1;
// 			}
//
// 			PrnStr( cEditwk1, pri_kind );								// 印字ﾃﾞｰﾀ登録
//
// 			/*------	＜区画-番号＆IF盤No.＞編集	------*/
// 			memset( cEditwk1,0,sizeof(cEditwk1) );						// cEditwk1：０ｸﾘｱ
//
// 			Prn_pkposi_chg( pk_posi, &area, &no );	// 駐車位置ﾃﾞｰﾀ変換
//
// 			if( area == 0 && rangechk(1, 9900, no)){
// 				sprintf( cEditwk1,"区画-番号:" );							// cEditwk1←"区画-番号:"
// 				len = (ushort)strlen( cEditwk1 );							// 印字ﾃﾞｰﾀ文字列ﾚﾝｸﾞｽ検索
// 				Prn_edit_pkposi( &cEditwk1[len], pk_posi, 0 );				// cEditwk1←駐車位置印字ﾃﾞｰﾀを追加編集
// 			}else{
// 				sprintf( cEditwk1,"区画-番号%s",Charge_Base[60] );							// cEditwk1←"区画-番号:"
// 				Cal_Parameter_Flg = 1;
// 			}
// 			len = (ushort)strlen( cEditwk1 );							// 印字ﾃﾞｰﾀ文字列ﾚﾝｸﾞｽ検索
// 			if( len < 20 ){
// 				for( ; len < 20 ; len++ ){								// ｽﾍﾟｰｽ調整（２０ｶﾗﾑまでｽﾍﾟｰｽで埋める）
// 					cEditwk1[len] = ' ';
// 				}
// 			}
//
// 			if( lk_no < (INT_CAR_START_INDEX+1) ){			//駐車IF
// 				if( work & 0x02 ){
// 					if(rangechk(1, 10, if_oya) && rangechk(1, 10, lok_no)){
// 						Pri_Flg = 1;
// 					}
// 				}
// 			}else if( lk_no < (BIKE_START_INDEX+1) ){		// CRR
// 				if( work & 0x04 ){
// 					if(rangechk(1, 29, if_oya)){
// 						Pri_Flg = 1;
// 					}
// 				}
// 			}else{											// 駐輪
// 				if( work & 0x01 ){
// 					if(rangechk(1, 29, if_oya) && rangechk(1, 6, lok_no)){
// 						Pri_Flg = 1;
// 					}
// 				}
// 			}
//
// 			if(Pri_Flg){
// 				if (lk_no>INT_CAR_START_INDEX && lk_no<=BIKE_START_INDEX ) {
// 					sprintf( &cEditwk1[20],"%sNo. :%02d","Flap",if_oya);
// 				}
// 				else {
// 					sprintf( &cEditwk1[20],"%sNo. :%02d-%02d","IF盤",if_oya,lok_no );
// 				}
// 			}else{
// 				sprintf( &cEditwk1[20],"%s%s",((lk_no>INT_CAR_START_INDEX && lk_no<=BIKE_START_INDEX )?"Flap":"IF盤") ,Charge_Base[60]);// cEditwk1←「IF盤No.」印字ﾃﾞｰﾀを追加編集
// 				Cal_Parameter_Flg = 1;
// 			}
// 			PrnStr( cEditwk1, pri_kind );								// 印字ﾃﾞｰﾀ登録
// 			/*------	＜接点No.＞編集	------*/
// 			if( LK_TYPE_CONTACT_FLAP == lok_syu ){						// 装置種別が「接点フラップ(16)」の場合
// 				memset( cEditwk1,0,sizeof(cEditwk1) );						// cEditwk1：０ｸﾘｱ
//
// 				len = 0;													// 左側は表示しない
// 				if( len < 20 ){
// 					for( ; len < 20 ; len++ ){								// ｽﾍﾟｰｽ調整（２０ｶﾗﾑまでｽﾍﾟｰｽで埋める）
// 						cEditwk1[len] = ' ';
// 					}
// 				}
//
// 				if(lok_no%100 > 10){			// CRRに接続されているフラップ台数が10枚を超えた場合はNG
// 					sprintf( &cEditwk1[20],"接点%s",Charge_Base[60] );// cEditwk1←「接点No.」印字ﾃﾞｰﾀを追加編集
// 					Cal_Parameter_Flg = 1;
// 				}else{
// 					sprintf( &cEditwk1[20],"接点No. :%02d-%02d",( lok_no/100 + 1 ),lok_no%100 );// cEditwk1←「接点No.」印字ﾃﾞｰﾀを追加編集
// 				}
// 				PrnStr( cEditwk1, pri_kind );								// 印字ﾃﾞｰﾀ登録
// 			}
// 		}
// 	}
//
// 	if( lk_no >= LOCK_MAX ){										// 全駐車位置（全ﾛｯｸ装置No.）編集終了？
//
// 		// 全ての駐車位置（ﾛｯｸ装置No.）について編集終了した場合
// 		Prn_edit_space( pri_kind );
// 		p_proc_data->Prn_no_wk[1]++;								// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
// 	}
// 	else{
// 		// 未編集の駐車位置（ﾛｯｸ装置No.）がある場合
// 		p_proc_data->Prn_no_wk[2] = lk_no;							// 次に編集するﾛｯｸ装置No.をｾｰﾌﾞ
// 	}
// }
// MH810100(E)

//[]----------------------------------------------------------------------[]
///	@brief			運用設定プリント検収、担当印字ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		pri_no		: 編集項目No.
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Sekiguchi
///	@date			Create	: 2011/07/27<br>
//[]------------------------------------- Copyright(C) 2011 AMANO Corp.---[]
void	ChargeSetup_edit_StampMark(uchar pri_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	ulong	param_set = 1L;
	
	if( Cal_Parameter_Flg ){
		Prn_edit_space( pri_kind );
		Prn_edit_space( pri_kind );
		PrnFontSize( FONT_K_4BAI, pri_kind );						// ﾌｫﾝﾄ指定（漢字4倍角）
		PrnStr( " ！！！！！！！！", pri_kind );
		PrnStr( "　設定が違います ", pri_kind );
		PrnStr( " ！！！！！！！！", pri_kind );
		PrnFontSize( FONT_K_NML, pri_kind );						// 漢字ﾌｫﾝﾄ指定（通常）
		PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ指定（通常）
		Prn_edit_space( pri_kind );
		Prn_edit_space( pri_kind );
	}

	// 改行ピッチを-2する。
	PCMD_KAIGYO_NORMAL_1(pri_kind);

	PrnStr( " ┌─────┐　　┌─────┐", pri_kind );
	PrnStr( " │　検　収　│　　│　担　当　│", pri_kind );
	PrnStr( " ├─────┤　　├─────┤", pri_kind );
	PrnStr( " │　　　　　│　　│　　　　　│", pri_kind );
	PrnStr( " │　　　　　│　　│　　　　　│", pri_kind );
	PrnStr( " │　　　　　│　　│　　　　　│", pri_kind );
	PrnStr( " │　　　　　│　　│　　　　　│", pri_kind );
	PrnStr( " └─────┘　　└─────┘", pri_kind );

	// 改行ピッチを元に戻す。
	PCMD_KAIGYO_NORMAL(pri_kind);
	if( Cal_Parameter_Flg ){
		err_chk2( ERRMDL_MAIN, ERR_MAIN_CALPARAMETER_NG, 2, 2, 0, &param_set); 	/* ｴﾗｰﾛｸﾞ登録（発生＆解除）*/
	}else{
		err_chk2( ERRMDL_MAIN, ERR_MAIN_CALPARAMETER_OK, 2, 2, 0, &param_set); 	/* ｴﾗｰﾛｸﾞ登録（発生＆解除）*/
	}

}

//[]----------------------------------------------------------------------[]
///	@brief			運用設定プリント時刻範囲チェック
//[]----------------------------------------------------------------------[]
///	@param[in]		type	: タイプ
///	@param[in]		hour	: 時
///	@param[in]		min		: 分
///	@return			ret		: 0/1　範囲外/範囲内
//[]----------------------------------------------------------------------[]
///	@author			Sekiguchi
///	@date			Create	: 2011/08/25<br>
//[]------------------------------------- Copyright(C) 2011 AMANO Corp.---[]
uchar	ChargeSetup_Time_Chek(uchar type , uchar hour , uchar min)
{
	uchar ret;
	
	ret = 0;
	
	switch(type){
	case 0:	
		if(rangechk(0, 23, (short)hour) && rangechk(0, 59, (short)min)){			// 00:00～23:59まで
			ret = 1;
		}
		break;
	case 1:
		if(rangechk(0, 99, (short)hour) && rangechk(0, 59, (short)min)){			// 00:00～99:59まで
			ret = 1;
		}
		break;
	case 2:
		if(rangechk(0, 9, (short)hour) && rangechk(0, 59, (short)min)){			// 00:00～09:59まで
			ret = 1;
		}
		break;
	default:
		break;
	}
	
	return(ret);
}

//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:割引設定ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		datakind	: 印字データ種類
///										S_SER = サービス券<br>
///										S_STO = 店割引<br>
///										S_TAT = 多店舗割引(種別)<br>
///										0 	  = 多店舗割引(店)
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/01/17<br>
///					Update	: 2008/07/23<br>
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_edit_DiscountData(short datakind, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	char	service_num[2];						// 車種
	uchar	j;									// ループ
	long	use_flag;							// 割引種類
	uchar	t_sno_flg = 0;
	uchar	print_flag = NG;					// 印字するかどうか
	ushort	type;								// No.
	CHARGE_DISCOUNTDATA		discount_data;		// 割引データ

	PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );		// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );		// 漢字（通常）指定
	memset(cEditwk1, 0, sizeof(cEditwk1));
	memset(cEditwk2, 0, sizeof(cEditwk2));

	if(datakind == 0){					// 多店舗割引(店)
	 	type = p_proc_data->Prn_no_data2;
	 	// 多店舗設定時の店№100までは店割引と同じ印字を行う。
		if (type < 100) {
			datakind = S_STO;
			t_sno_flg = 1;
		}
	}

	if (datakind != 0) {
		// 多店舗割引で無い時
		if(!t_sno_flg){
			type = p_proc_data->Prn_no_data1-1;
		}
		memset(&discount_data, 0, sizeof(discount_data));
		// データ取得
		ChargeSetup_DiscountDataGet(datakind, type, &discount_data);
		use_flag 	= discount_data.kind;
		if (use_flag != 0) {
			/*----- title -----*/
			service_num[0] = (char)('A' + type);
			service_num[1] = '\0';
			switch (datakind){
			case S_SER:
				sprintf(cEditwk2, "サービス券%s ", service_num);
				break;
			case S_STO:
				sprintf(cEditwk2, "店No.%03d　　", type+1);
				break;
			case S_TAT:
// MH810104(S) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5793 多店舗割引店№999対応
// 				sprintf(cEditwk2, "割引種別%d 　", type+1);
				sprintf(cEditwk2, "割引種別%02d　", type + 1);
// MH810104(E) R.Endo 2021/08/30 車番チケットレス フェーズ2.3 #5793 多店舗割引店№999対応
				break;
			default :
				break;
			}
			switch (use_flag) {
			case 1:				// 割引時間
				strcat(cEditwk2, Charge_Discount[0]);

				if(ChargeSetup_Time_Chek(1,discount_data.time[HOUR], discount_data.time[MIN]) == 1){
					if (discount_data.time[HOUR] != 0) {
						sprintf(cEditwk1, "%2d時間%02d分", discount_data.time[HOUR], discount_data.time[MIN]);
					} else {
						sprintf(cEditwk1, "%2d分", discount_data.time[MIN]);
					}
				}else{
					sprintf(cEditwk1, "%s",Charge_Base[60]);
					Cal_Parameter_Flg = 1;
				}
				print_flag = OK;
				break;
			case 2:				// 割引料金
				strcat(cEditwk2, Charge_Discount[1]);
				sprintf(cEditwk1, "%d", discount_data.data);
				Camma_Set((uchar*)cEditwk1);
				strcat(cEditwk1, Pri_Tanni[0]);
				print_flag = OK;
				break;
			case 4:				// 全額割引
				strcat(cEditwk2, Charge_Discount[1]);
				sprintf(cEditwk1, "%s", Charge_Discount[4]);
				print_flag = OK;
				break;
			case 0:
				break;
			default :
				sprintf(cEditwk1, "%s", Charge_Base[60]);
				Cal_Parameter_Flg = 1;
				print_flag = OK;
				break;
			}
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
			if( datakind != S_TAT ){
				if( prm_get( COM_PRM, datakind, (short)(1+type*3), 1, 2 ) == 1 ){
					strcat(cEditwk2, Charge_Discount[6]);
				}
			}
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
			if (print_flag == OK) {
				Str_Set1(								// -----印字ﾃﾞｰﾀ編集-----
							cEditwk2,					// 文字列１：料金設定名称
							cEditwk1,					// 文字列２：料金設定値
							pri_kind					// 印字先ﾌﾟﾘﾝﾀ
						);
				print_flag = NG;
				// 車種切替
				if (datakind != S_TAT && (use_flag == 1 || use_flag == 2 || use_flag == 4)
					){
					memset(cEditwk2, 0, sizeof(cEditwk2));
					memset(cEditwk1, 0, sizeof(cEditwk1));
					if(rangechk(1, 12, discount_data.kind_change)){
					j = (uchar)(discount_data.kind_change-1);
					service_num[0] = (char)('A' + j);
					service_num[1] = '\0';
					sprintf(cEditwk2, "　　　　　　%s", Charge_Discount[2]);
					sprintf(cEditwk1, "%s種", service_num);

					Str_Set1(							// -----印字ﾃﾞｰﾀ編集-----
								cEditwk2,				// 文字列１：料金設定名称
								cEditwk1,				// 文字列２：料金設定値
								pri_kind				// 印字先ﾌﾟﾘﾝﾀ
							);
					}else{
						if(discount_data.kind_change){
							sprintf(cEditwk2, "　　　　　　%s", Charge_Discount[2]);
							sprintf(cEditwk1, "%s",Charge_Base[60]);
							Str_Set1(							// -----印字ﾃﾞｰﾀ編集-----
										cEditwk2,				// 文字列１：料金設定名称
										cEditwk1,				// 文字列２：料金設定値
										pri_kind				// 印字先ﾌﾟﾘﾝﾀ
									);
							Cal_Parameter_Flg = 1;
						}
					}

				}
			}
		}
		else {
		// 車種切替のみ
			if ( datakind != S_TAT ) {
				memset(cEditwk2, 0, sizeof(cEditwk2));
				memset(cEditwk1, 0, sizeof(cEditwk1));
				/*----- title -----*/
				service_num[0] = (char)('A' + type);
				service_num[1] = '\0';
				switch (datakind){
				case S_SER:
					sprintf(cEditwk2, "サービス券%s ", service_num);
					break;
				case S_STO:
					sprintf(cEditwk2, "店No.%03d　　", type+1);
					break;
				default :
					break;
				}
				strcat(cEditwk2, Charge_Discount[2]);
				if(rangechk(1, 12, discount_data.kind_change)){			// A～L
				j = (uchar)(discount_data.kind_change-1);
				service_num[0] = (char)('A' + j);
				service_num[1] = '\0';
				sprintf(cEditwk1, "%s種", service_num);

				Str_Set1(							// -----印字ﾃﾞｰﾀ編集-----
							cEditwk2,				// 文字列１：料金設定名称
							cEditwk1,				// 文字列２：料金設定値
							pri_kind				// 印字先ﾌﾟﾘﾝﾀ
						);

				}else{
					if(discount_data.kind_change){
						sprintf(cEditwk1, "%s",Charge_Base[60]);
						Str_Set1(							// -----印字ﾃﾞｰﾀ編集-----
									cEditwk2,				// 文字列１：料金設定名称
									cEditwk1,				// 文字列２：料金設定値
									pri_kind				// 印字先ﾌﾟﾘﾝﾀ
								);
						Cal_Parameter_Flg = 1;
					}
				}
			}
		}
	} else {
		/*----- 店 -----*/
	 	type = p_proc_data->Prn_no_data2;
		memset(&discount_data, 0, sizeof(discount_data));
		if (type < 100) {
			ChargeSetup_DiscountDataGet(S_STO, type, &discount_data);
		} else {
			ChargeSetup_DiscountDataGet(S_TAT, (ushort)(type-100), &discount_data);
		}
		if (rangechk(1, 12, discount_data.kind_change)) {
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memset(cEditwk1, 0, sizeof(cEditwk1));
			j = (uchar)(discount_data.kind_change-1);
			service_num[0] = (char)('A' + j);
			service_num[1] = '\0';
			sprintf(cEditwk2, "店No.%03d　　", type+1);
			strcat(cEditwk2, Charge_Discount[2]);
			sprintf(cEditwk1, "%s種", service_num);
			Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,						// 文字列１：料金設定名称
						cEditwk1,						// 文字列２：料金設定値
						pri_kind						// 印字先ﾌﾟﾘﾝﾀ
					);
		}
		else{
			if(discount_data.kind_change){
				memset(cEditwk2, 0, sizeof(cEditwk2));
				memset(cEditwk1, 0, sizeof(cEditwk1));
				sprintf(cEditwk2, "店No.%03d　　", type+1);
				strcat(cEditwk2, Charge_Discount[2]);
				sprintf(cEditwk1, "%s",Charge_Base[60]);
				Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
							cEditwk2,						// 文字列１：料金設定名称
							cEditwk1,						// 文字列２：料金設定値
							pri_kind						// 印字先ﾌﾟﾘﾝﾀ
						);
				Cal_Parameter_Flg = 1;
			}
		}
	}
}

//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:使用曜日取得
//[]----------------------------------------------------------------------[]
///	@param[in]		kind	: 車種or定期No
///	@param[out]		day_of_week	: 曜日
///	@param[in]		section	: セクション
///									S_SHA = 車種<br>
///									S_PAS = 定期
///	@return			void
///	@note			曜日の配列は"月火水木金土日特期1期2期3"の順(印字用に編集)
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/01/17<br>
///					Update	: 
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_DayOfWeekGet(uchar kind, uchar *day_of_week, uchar section)
{
	uchar 	i;

	if (section == S_SHA) {
		day_of_week[6] = (uchar)prm_get(COM_PRM, S_SHA, (short)(3+kind*6), 1, 6);	// 日曜
		for (i = 0; i < 5; i++) {									// 曜日(月～金)
			day_of_week[i] = (uchar)prm_get(COM_PRM, S_SHA, (short)(3+kind*6), 1, (char)(5-i));
		}
		day_of_week[5] = (uchar)prm_get(COM_PRM, S_SHA, (short)(4+kind*6), 1, 6);	// 土曜
		for (i = 7; i < CHARGE_DAYOFWEEKMAX; i++) {					// 曜日(特～特別期間3)
			day_of_week[i] = (uchar)prm_get(COM_PRM, S_SHA, (short)(4+kind*6), 1, (char)(CHARGE_DAYOFWEEKMAX-i+1));
		}
	} else {
		day_of_week[6] = (uchar)prm_get(COM_PRM, S_PAS, (short)(6+kind*10), 1, 6);	// 日曜
		for (i = 0; i < 5; i++) {									// 曜日(月～金)
			day_of_week[i] = (uchar)prm_get(COM_PRM, S_PAS, (short)(6+kind*10), 1, (char)(5-i));
		}
		day_of_week[5] = (uchar)prm_get(COM_PRM, S_PAS, (short)(7+kind*10), 1, 6);	// 土曜
		for (i = 7; i < CHARGE_DAYOFWEEKMAX; i++) {					// 曜日(特～特別期間3)
			day_of_week[i] = (uchar)prm_get(COM_PRM, S_PAS, (short)(7+kind*10), 1, (char)(CHARGE_DAYOFWEEKMAX-i+1));
		}
	}
// MH321800(S) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
	// ※料金設定パラメータ印字は参照データが多く印字しないケースが続くと、タスク占有時間が長くなる。
	//   そのため、E3260が発生してしまうケースがあるので、１印字項目完了で一旦taskchg()を行うこととする
	xPause_PRNTSK(0L);
// MH321800(E) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
}

//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:時刻データ計算
//[]----------------------------------------------------------------------[]
///	@param[in]		data	: データ１
///	@param[in]		data2	: データ２
///	@param[in]		type	: 0:＋、1:－
///	@return			計算後の時刻データ
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/07/18<br>
///					Update	: 
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
ushort	ChargeSetup_TimeDataCal(ushort data, ushort data2, uchar type)
{
	short	ret;
	ushort	temp, temp2;
	ushort	hour, hour2;
	ushort	min, min2;
	ushort	daymax_min = 60 * 24;	// １日の最大分

	hour = data / 100;			// data1 edit
	min  = data % 100;
	hour2 = data2 / 100;		// data2 edit
	min2  = data2 % 100;
	temp = hour * 60 + min;		// data1(min data)
	temp2 = hour2 * 60 + min2;	// data2(min data)
	if (type == 0) {
	// ＋
		ret = temp + temp2;		// cal
	} else {
	// －
		ret = temp - temp2;		// cal
	}
	if (ret < 0) {
		ret += daymax_min;		// ＋(24*60)
	}
	if (ret >= daymax_min) {
		ret -= daymax_min;		// －(24*60)
	}
	hour = ret / 60;			// edit
	min  = ret % 60;			// edit
	ret = hour * 100 + min;
	return((ushort)ret);
}

//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:基本設定ﾃﾞｰﾀ取得
//[]----------------------------------------------------------------------[]
///	@param[out]		basedata	: 基本情報
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/01/17<br>
///					Update	: 2008/07/23<br>
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_BaseDataGet(CHARGE_BASEDATA *basedata)
{	
	char	i;
	uchar	type;		// 紛失料金取り方

 	// サービスタイム・グレースタイム・ラグ(リペイ)タイム
	basedata->service_time 	= (ushort)CPrmSS[S_STM][2];
	basedata->grace_time 	= (ushort)CPrmSS[S_STM][3];
	basedata->lag_time 		= (ushort)CPrmSS[S_STM][4];
	
	if(CPrmSS[S_CAL][1] != 1){					// 28-0001
		basedata->cal_type = 0;					// 昼夜帯
	}else{
		basedata->cal_type = 1;					// 逓減帯
	}
	
 	// 紛失料金
	for (i = 0; i < LOST_TYPEMAX; i++) {
		// 紛失料金取り方
		basedata->lostcharge_type[i]	= (uchar)prm_get(COM_PRM, S_CAL, (short)(3+i*2), 2, 3);
		type = basedata->lostcharge_type[i];
		if (type != 0) {
			// 紛失料金種別
			basedata->lostcharge_kind[i] = (uchar)prm_get(COM_PRM, S_CAL, (short)(3+i*2), 2, 1);
			if (type == 1) {
			// 紛失料金
				basedata->lostcharge_data[i] = prm_get(COM_PRM, S_CAL, (short)(4+i*2), 6, 1);
			} else {
		 	// 紛失料金
				basedata->lost_time[HOUR][i] = (uchar)prm_get(COM_PRM, S_CAL, (short)(4+i*2), 2, 3);
				basedata->lost_time[MIN][i] = (uchar)prm_get(COM_PRM, S_CAL, (short)(4+i*2), 2, 1);
			}
		}
	}
	// 消費税
	basedata->tax_type = (uchar)prm_get(COM_PRM, S_CAL, 20, 1, 1);
	basedata->tax[0] = (ushort)prm_get(COM_PRM, S_CAL, 19, 2, 3);
	basedata->tax[1] = (ushort)prm_get(COM_PRM, S_CAL, 19, 2, 1);
	// 紙幣受付
	for (i = 0; i < SIHEI_SYU_MAX; i++) {
		basedata->billkind_set[i] = (uchar)prm_get(COM_PRM, S_MON, 61, 1, (char)(4-i));
	}

	basedata->flap_up_min = (ushort)( CPrmSS[S_TYP][118] / 100 );									// ﾌﾗｯﾌﾟ上昇ﾀｲﾏｰ(分)
	basedata->flap_up_sec = (ushort)( CPrmSS[S_TYP][118] % 100 );									// ﾌﾗｯﾌﾟ上昇ﾀｲﾏｰ(秒)

	basedata->in_up_time_sei = (uchar)prm_get(COM_PRM, S_TYP, 68, 1, 1);							// フラップ上昇・ロック閉タイマー内で精算 有り/無し
	basedata->ext_lagtime_sei = (uchar)prm_get(COM_PRM, S_TYP, 68, 1, 4);							// ラグタイム延長 有り/無し

	basedata->lock_close_min = (ushort)( CPrmSS[S_TYP][69] / 100 );							// ﾌﾗｯﾌﾟ上昇ﾀｲﾏｰ(分)
	basedata->lock_close_sec = (ushort)( CPrmSS[S_TYP][69] % 100 );							// ﾌﾗｯﾌﾟ上昇ﾀｲﾏｰ(秒)
	basedata->lagtimeup_incount = (uchar)prm_get(COM_PRM, S_TYP, 68, 1, 3);							// ラグタイムアップ後の再入庫
	basedata->ryo_after_lagtimeup = (uchar)prm_get(COM_PRM, S_CAL, 18, 1, 1);						// ラグタイム後の料金
	basedata->ryo_after_tei = (uchar)prm_get(COM_PRM, S_CAL, 17, 1, 1);								// 時間割引/定期後の料金
	basedata->in_count = (uchar)prm_get(COM_PRM, S_SYS, 39, 1, 4);									// 入庫カウント
	basedata->out_count = (uchar)prm_get(COM_PRM, S_SYS, 39, 1, 3);									// 出庫カウント
	basedata->flap_incount_timer = (ushort)prm_get(COM_PRM, S_TYP, 47, 3, 4);							// ﾌﾗｯﾌﾟ入庫判定ﾀｲﾏｰ(分)
	basedata->lock_incount_timer = (ushort)prm_get(COM_PRM, S_TYP, 47, 3, 1);							// ロック入庫判定ﾀｲﾏｰ(秒)
}
//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:車種毎ﾃﾞｰﾀ取得
//[]----------------------------------------------------------------------[]
///	@param[in]		carkind	: 車種
///	@param[out]		data	: 料金体系データ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@date			Create	: 2010/09/13<br>
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void ChargeSetup_CarkindDataGet( uchar carkind, CHARGE_CARKIND *data)
{
	short	adr;
	
	adr = 0;
	data->service_time = (ushort)CPrmSS[S_STM][((carkind * 3) + 5)];						// 種別毎サービスタイム
	data->grace_time = (ushort)CPrmSS[S_STM][((carkind * 3) + 6)];							// 種別毎グレースタイム
	data->lag_time = (ushort)CPrmSS[S_STM][((carkind * 3) + 7)];							// 種別毎ラグタイム
	data->flap_up_min = (ushort)prm_get(COM_PRM, S_LTM, (short)(carkind + 31), 3, 3);		// 種別毎フラップ上昇タイム（分）
	data->flap_up_sec = (ushort)prm_get(COM_PRM, S_LTM, (short)(carkind + 31), 2, 1);		// 種別毎フラップ上昇タイム（秒）
	data->lock_close_min = (ushort)prm_get(COM_PRM, S_LTM, (short)(carkind + 11), 3, 3);		// 種別毎ロック装置閉タイム（分）
	data->lock_close_sec = (ushort)prm_get(COM_PRM, S_LTM, (short)(carkind + 11), 2, 1);		// 種別毎ロック装置閉タイム（秒）
	data->in_up_time_sei = (uchar)prm_get(COM_PRM, S_LTM, (short)(carkind + 51), 1, 1);		// ロック閉/フラップ上昇タイマー内精算
	data->ext_lagtime_sei = (uchar)prm_get(COM_PRM, S_LTM, (short)(carkind + 51), 1, 4);	// ラグタイム延長
	data->lagtimeup_incount = (uchar)prm_get(COM_PRM, S_LTM, (short)(carkind + 51), 1, 3);			// ラグタイムアップ後の再入庫
	switch(carkind){				// 種別毎のアドレスの指定
		case 0:
		case 1:
		case 2:
			adr = 71;
			break;
		case 3:
		case 4:
		case 5:
			adr = 72;
			break;
		case 6:
		case 7:
		case 8:
			adr = 73;
			break;
		case 9:
		case 10:
		case 11:
			adr = 74;
			break;
	}
	data->ryo_after_lagtimeup = (uchar)prm_get(COM_PRM, S_LTM, adr, 2, (char)(6-((carkind%3)*2)-1));		// ラグタイムアップ後の課金
	data->ryo_after_tei = (uchar)prm_get(COM_PRM, S_LTM, (short)(adr+10), 2, (char)(6-((carkind%3)*2)-1));			// 時間割引/定期後の課金
	data->in_count = (uchar)prm_get(COM_PRM, S_LTM, (short)(carkind+ 91), 1, 4);					// 入庫カウント
	data->out_count = (uchar)prm_get(COM_PRM, S_LTM, (short)(carkind+ 91), 1, 3);					// 出庫カウント
	data->flap_incount_timer = (ushort)prm_get(COM_PRM, S_LTM, (short)(carkind + 111), 3, 4);		// ﾌﾗｯﾌﾟ入庫判定ﾀｲﾏｰ(分)
	data->lock_incount_timer = (ushort)prm_get(COM_PRM, S_LTM, (short)(carkind + 111), 3, 1);		// ロック入庫判定ﾀｲﾏｰ(秒)
}

//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:料金体系ﾃﾞｰﾀ取得
//[]----------------------------------------------------------------------[]
///	@param[in]		sys		: 料金体系
///	@param[in]		carkind	: 車種
///	@param[out]		data	: 料金体系データ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/07/17<br>
///					Update	: 
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_SysDataGet(uchar sys, uchar carkind, CHARGE_SYS *data)
{
	ushort	i;		// ループ
	ushort	data2;	// 時刻データ
	ushort	data3;	// 時刻データ
	ushort	max;	// MAX
	short	seg;				// セクション番号

	seg = GET_PARSECT_NO((char)(sys+1));
	// 絶対最大料金
	data->max_charge = prm_get(COM_PRM, seg, (short)(61+(sys%3)*RYO_TAIKEI_SETCNT+carkind*RYO_SYUBET_SETCNT), 6, 1);
	if (charge_ctrl.daymax_type != 0) {
		// 日毎最大料金(第１)
		data->chargemax_day1 = prm_get(COM_PRM, seg, (short)(62+(sys%3)*RYO_TAIKEI_SETCNT+carkind*RYO_SYUBET_SETCNT), 6, 1);
		data->chargemax_day2 = prm_get(COM_PRM, seg, (short)(63+(sys%3)*RYO_TAIKEI_SETCNT+carkind*RYO_SYUBET_SETCNT), 6, 1);
	}
	max = (uchar)prm_get(COM_PRM, seg, (short)(3+((sys%3)*RYO_TAIKEI_SETCNT)), 1, 1);
	for( i = 0; i<max;i++ ){
		if( i == 5 ){
			data->charge_range_max[i] = prm_get(COM_PRM, seg, (short)(63+((sys%3)*RYO_TAIKEI_SETCNT)+(carkind*RYO_SYUBET_SETCNT)), 6, 1);
		}else{
			data->charge_range_max[i] = prm_get(COM_PRM, seg, (short)((76+i)+((sys%3)*RYO_TAIKEI_SETCNT)+(carkind*RYO_SYUBET_SETCNT)), 6, 1);
		}
	}
	if (prm_get(COM_PRM, S_SHA, (short)(1+carkind*6), 4, 1) != 0) {
	// 種別時間割引設定あり
		// 割引時間
		data->dis_time[HOUR] = (uchar)prm_get(COM_PRM, S_SHA, (short)(1+carkind*6), 2, 3);
		data->dis_time[MIN] = (uchar)prm_get(COM_PRM, S_SHA, (short)(1+carkind*6), 2, 1);
		// 割引対象期間
		data->target_Stime[HOUR] = (uchar)prm_get(COM_PRM, seg, (short)(1+(sys%3)*RYO_TAIKEI_SETCNT), 2, 3);
		data->target_Stime[MIN] = (uchar)prm_get(COM_PRM, seg, (short)(1+(sys%3)*RYO_TAIKEI_SETCNT), 2, 1);
		data->target_Etime[HOUR] = (uchar)prm_get(COM_PRM, seg, (short)(2+(sys%3)*RYO_TAIKEI_SETCNT), 2, 3);
		data->target_Etime[MIN] = (uchar)prm_get(COM_PRM, seg, (short)(2+(sys%3)*RYO_TAIKEI_SETCNT), 2, 1);
	
		data->discount = ON;	// 割引設定印字あり
	}

	// 現在台数カウント
	charge_ctrl.outcar_cnt = (uchar)prm_get(COM_PRM, S_SHA, (short)(2+carkind*6), 1, 1);
	// カウント信号
// MH810100(S) Y.Yamauchi 2019/12/03 車番チケットレス（印字修正）
//	charge_ctrl.cnt_signal = (uchar)prm_get(COM_PRM, S_SHA, (short)(2+carkind*6), 1, 2);
// MH810100(E) Y.Yamauchi 2019/12/03 車番チケットレス（印字修正）
	// 逓減帯のみ
	if (charge_ctrl.cal_kind == 1) {
		// 深夜帯使用有無
		data->mnight_use = (uchar)prm_get(COM_PRM, seg, (short)(3+(sys%3)*RYO_TAIKEI_SETCNT), 1, 1);
		// 繰り返し回数
		data->repeat_cnt = (uchar)prm_get(COM_PRM, seg, (short)(10+(sys%3)*RYO_TAIKEI_SETCNT), 2, 1);
		// 逓減帯開始時間
		data->reg_Stime[HOUR] = (uchar)prm_get(COM_PRM, seg, (short)(4+(sys%3)*RYO_TAIKEI_SETCNT), 2, 3);
		data->reg_Stime[MIN] = (uchar)prm_get(COM_PRM, seg, (short)(4+(sys%3)*RYO_TAIKEI_SETCNT), 2, 1);
		// 逓減帯重複時間
		data->reg_repeat_time[HOUR] = (uchar)prm_get(COM_PRM, seg, (short)(5+(sys%3)*RYO_TAIKEI_SETCNT), 1, 3);
		data->reg_repeat_time[MIN] = (uchar)prm_get(COM_PRM, seg, (short)(5+(sys%3)*RYO_TAIKEI_SETCNT), 2, 1);
		// 深夜帯重複時間
		data->mnight_repeat_time[HOUR] = (uchar)prm_get(COM_PRM, seg, (short)(7+(sys%3)*RYO_TAIKEI_SETCNT), 1, 3);
		data->mnight_repeat_time[MIN] = (uchar)prm_get(COM_PRM, seg, (short)(7+(sys%3)*RYO_TAIKEI_SETCNT), 2, 1);
		// 逓減帯終了時間(深夜帯開始時間+深夜帯重複時間)
		data2 = (ushort)prm_get(COM_PRM, seg, (short)(6+(sys%3)*RYO_TAIKEI_SETCNT), 4, 1);		// 深夜帯開始時間
		data3 = (ushort)prm_get(COM_PRM, seg, (short)(7+(sys%3)*RYO_TAIKEI_SETCNT), 3, 1);		// 深夜帯重複時間
		data2 = ChargeSetup_TimeDataCal(data2, data3, 0);	// ＋
		data->reg_Etime[HOUR] = (uchar)(data2 / 100);
		data->reg_Etime[MIN] = (uchar)(data2 % 100);
		if (data->mnight_use == 2) {
			if (prm_get(COM_PRM, seg, (short)(4+(sys%3)*RYO_TAIKEI_SETCNT), 4, 1) == prm_get(COM_PRM, seg, (short)(6+(sys%3)*RYO_TAIKEI_SETCNT), 4, 1)) {
			// 逓減帯開始時刻＝＝深夜帯開始時刻(深夜帯表示なし)
				data->mnight_use = 1;
			} else {
				// 深夜帯開始時間
				data->mnight_Stime[HOUR] = (uchar)prm_get(COM_PRM, seg, (short)(6+(sys%3)*RYO_TAIKEI_SETCNT), 2, 3);
				data->mnight_Stime[MIN] = (uchar)prm_get(COM_PRM, seg, (short)(6+(sys%3)*RYO_TAIKEI_SETCNT), 2, 1);
				// 深夜帯終了時間(逓減帯開始時間+逓減帯重複時間)
				data2 = (ushort)prm_get(COM_PRM, seg, (short)(4+(sys%3)*RYO_TAIKEI_SETCNT), 4, 1);	// 逓減帯開始時間
				data3 = (ushort)prm_get(COM_PRM, seg, (short)(5+(sys%3)*RYO_TAIKEI_SETCNT), 3, 1);	// 逓減帯重複時間
				data2 = ChargeSetup_TimeDataCal(data2, data3, 0);
				data->mnight_Etime[HOUR] = (uchar)(data2 / 100);
				data->mnight_Etime[MIN] = (uchar)(data2 % 100);
				// 深夜帯料金
				data->mnight_charge = prm_get(COM_PRM, seg, (short)(63+(sys%3)*RYO_TAIKEI_SETCNT+carkind*RYO_SYUBET_SETCNT), 5, 1);
			}
		}

		// 繰り返し終了
		max = PATTERN_MAX;
		if (data->repeat_cnt == 0) {	// 繰り返し回数が０
			// 繰り返し終了＝繰り返し終了パターン
			data2 = (ushort)prm_get(COM_PRM, seg, (short)(9+(sys%3)*RYO_TAIKEI_SETCNT), 2, 1);
			if (data2 != 0) {
				data2--;
// MH322914 (s) kasiyama 2016/07/08 逓減帯で深夜帯後の取り方でパターンを飛び越した時に印字できない(共通改善No.1214)(MH341106)
//			}
//			max = data2;
				max = data2;
			}
// MH322914 (e) kasiyama 2016/07/08 逓減帯で深夜帯後の取り方でパターンを飛び越した時に印字できない(共通改善No.1214)(MH341106)
		}
		// ０以外(単位係数が０のパターンで終了)
		for (i = 0; i < max; i++) {
			// 繰り返し終了＝単位係数０
// MH322914 (s) kasiyama 2016/07/08 逓減帯で深夜帯後の取り方でパターンを飛び越した時に印字できない(共通改善No.1214)(MH341106)
//    28-0017: 00010(深夜帯後は第4パターンから取る)
//    例1：8:00-23:00  P1:400円/30分/4回、P2:200円/30分/1回、P3:0円/30分/0回、P4:400円/30分/0回  23:00-8:00 深夜帯:1000円
//    例2：8:00-23:00  P1:400円/30分/4回、P2:0円/0分/0回、P3:0円/0分/0回、P4:400円/30分/0回  23:00-8:00 深夜帯:1000円
//			data3 = (ushort)prm_get(COM_PRM, seg, (short)(12+(sys%3)*RYO_TAIKEI_SETCNT+i*2), 4, 1);
//			if (data3 == 0) {
//				break;	// 単位係数が０のパターンが繰り返しの終了
//			}
// MH322914 (e) kasiyama 2016/07/08 逓減帯で深夜帯後の取り方でパターンを飛び越した時に印字できない(共通改善No.1214)(MH341106)
		}
		data2 = i;
		charge_ctrl.repeat_end = (uchar)data2;
		// 繰り返し開始パターン
		charge_ctrl.pattern_start = (uchar)prm_get(COM_PRM, seg, (short)(8+(sys%3)*RYO_TAIKEI_SETCNT), 2, 1);
		// 繰り返し終了パターン
		charge_ctrl.pattern_end = (uchar)prm_get(COM_PRM, seg, (short)(9+(sys%3)*RYO_TAIKEI_SETCNT), 2, 1);
	}
}

//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:料金帯ﾃﾞｰﾀ取得(昼夜帯)
//[]----------------------------------------------------------------------[]
///	@param[in]		sys		: 料金体系
///	@param[in]		type	: 料金帯
///	@param[in]		carkind	: 車種
///	@param[out]		chargetype	: 料金帯情報
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/01/17<br>
///					Update	: 2008/07/25<br>
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_TypeDataGet(uchar sys, uchar type, uchar carkind, CHARGE_TYPE *chargetype)
{
	uchar	cnt;	// 使用料金帯数
	ushort	data;	// 時刻データ
	ushort	data2;	// 時刻データ
	short	seg;

	// 料金帯使用数
	seg = GET_PARSECT_NO((char)(sys+1));
	cnt = (uchar)prm_get(COM_PRM, seg, (short)(3+(sys%3)*RYO_TAIKEI_SETCNT), 1, 1);
	// 開始時刻
	data = (ushort)prm_get(COM_PRM, seg, (short)(4+(sys%3)*RYO_TAIKEI_SETCNT+type*4), 4, 1);
	chargetype->start_time[HOUR] = (uchar)(data / 100);
	chargetype->start_time[MIN] = (uchar)(data % 100);
	// 終了時刻
	if (type == cnt-1) {
	// 最終料金帯
		data = (ushort)prm_get(COM_PRM, seg, (short)(4+(sys%3)*RYO_TAIKEI_SETCNT), 4, 1);				// 第1料金帯の開始時刻
		data2 = (ushort)prm_get(COM_PRM, seg, (short)(5+(sys%3)*RYO_TAIKEI_SETCNT), 3, 1);				// 第1料金帯の重複時刻
		data = ChargeSetup_TimeDataCal(data, data2, 0);	// 開始時刻 + 重複時間
	} else {
		data  = (ushort)prm_get(COM_PRM, seg, (short)(4+(sys%3)*RYO_TAIKEI_SETCNT+(type+1)*4), 4, 1);	// 次料金帯の開始時刻
		data2 = (ushort)prm_get(COM_PRM, seg, (short)(5+(sys%3)*RYO_TAIKEI_SETCNT+(type+1)*4), 3, 1);	// 次料金帯の重複時刻
		data = ChargeSetup_TimeDataCal(data, data2, 0);	// 開始時刻 + 重複時間
	}
	chargetype->end_time[HOUR] = (uchar)(data / 100);
	chargetype->end_time[MIN] = (uchar)(data % 100);
	if ((prm_get(COM_PRM, seg, (short)(6+(sys%3)*RYO_TAIKEI_SETCNT+type*4), 4, 1) == 0)
	|| (prm_get(COM_PRM, seg, (short)(7+(sys%3)*RYO_TAIKEI_SETCNT+type*4), 4, 1) == 0)) {	// 基本時間==0 || 追加時間==0
		// 一定料金帯
		chargetype->fixed_charge = ON;
	} else {
		// 基本時間
		chargetype->base_time[HOUR] = (uchar)prm_get(COM_PRM, seg, (short)(6+(sys%3)*RYO_TAIKEI_SETCNT+type*4), 2, 3);
		chargetype->base_time[MIN] 	= (uchar)prm_get(COM_PRM, seg, (short)(6+(sys%3)*RYO_TAIKEI_SETCNT+type*4), 2, 1);
		// 追加時間
		chargetype->add_time[HOUR] 	= (uchar)prm_get(COM_PRM, seg, (short)(7+(sys%3)*RYO_TAIKEI_SETCNT+type*4), 2, 3);
		chargetype->add_time[MIN]  	= (uchar)prm_get(COM_PRM, seg, (short)(7+(sys%3)*RYO_TAIKEI_SETCNT+type*4), 2, 1);
	}
	// 重複方式
	chargetype->repeat_sys 	 	= (uchar)prm_get(COM_PRM, seg, (short)(5+(sys%3)*RYO_TAIKEI_SETCNT+type*4), 1, 4);
	// 重複時間
	chargetype->repeat_time[HOUR] = (uchar)prm_get(COM_PRM, seg, (short)(5+(sys%3)*RYO_TAIKEI_SETCNT+type*4), 1, 3);
	chargetype->repeat_time[MIN]  = (uchar)prm_get(COM_PRM, seg, (short)(5+(sys%3)*RYO_TAIKEI_SETCNT+type*4), 2, 1);
	// 基本料金
	chargetype->base_charge = prm_get(COM_PRM, seg, (short)((64+(sys%3)*RYO_TAIKEI_SETCNT)+type*2+(carkind*RYO_SYUBET_SETCNT)), 5, 1);
	// 追加料金
	chargetype->add_charge = prm_get(COM_PRM, seg, (short)((65+(sys%3)*RYO_TAIKEI_SETCNT)+type*2+(carkind*RYO_SYUBET_SETCNT)), 5, 1);
}

//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:料金帯ﾃﾞｰﾀ取得(逓減帯)
//[]----------------------------------------------------------------------[]
///	@param[in]		sys		: 料金体系
///	@param[in]		pattern	: パターン
///	@param[in]		carkind	: 車種
///	@param[out]		data	: パターン情報
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/01/17<br>
///					Update	: 2008/07/23<br>
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_PatternDataGet(uchar sys, uchar pattern, uchar carkind, CHARGE_REGTYPE *data)
{	
	short	seg;
	
	seg = GET_PARSECT_NO((char)(sys+1));
	// 単位時間
	data->pattern_time[HOUR] = (uchar)prm_get(COM_PRM, seg, (short)(11+(sys%3)*RYO_TAIKEI_SETCNT+pattern*2), 2, 3);
	data->pattern_time[MIN] = (uchar)prm_get(COM_PRM, seg, (short)(11+(sys%3)*RYO_TAIKEI_SETCNT+pattern*2), 2, 1);
	// 単位係数
	data->pattern_cnt = (ushort)prm_get(COM_PRM, seg, (short)(12+(sys%3)*RYO_TAIKEI_SETCNT+pattern*2), 4, 1);
	// 単位料金
	data->pattern_charge = prm_get(COM_PRM, seg, (short)((64+(sys%3)*RYO_TAIKEI_SETCNT)+pattern+(carkind*RYO_SYUBET_SETCNT)), 5, 1);
}

//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:定期種別設定ﾃﾞｰﾀ取得
//[]----------------------------------------------------------------------[]
///	@param[in]		kind	: 定期種別
///	@param[out]		data	: 定期種別データ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/07/23<br>
///					Update	: 
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_PassKindDataGet(uchar kind, sPASS_DATA *data)
{
	uchar	i, j;						// ループ
	short	type;						// 駐車券併用/使用目的
	uchar	week[CHARGE_DAYOFWEEKMAX];	// 使用曜日
	ushort	time;						// temp

	// 使用目的
	data->pass_kind = (short)CPrmSS[S_PAS][1+10*kind];
	// ステータスチェック
	data->status_check = (uchar)prm_get(COM_PRM, S_PAS, (short)(2+kind*10), 1, 1);
	// 料金種別
	if (rangechk(3, 14, data->pass_kind)) {
	// 種別切替定期(併用する)
		data->charge_kind = (uchar)(data->pass_kind-2);
	} else {
	// 種別切替定期でない
	}
// MH810100(S) Y.Yamauchi 2019/12/03 車番チケットレス（印字修正）
//	// 出庫台数カウント
//	data->outcar_cnt = (uchar)prm_get(COM_PRM, S_PAS, (short)(4+kind*10), 1, 1);
//	// カウント信号
//	data->cnt_signal = (uchar)prm_get(COM_PRM, S_PAS, (short)(4+kind*10), 1, 2);
// MH810100(E) Y.Yamauchi 2019/12/03 車番チケットレス（印字修正）
	// リードライトモード
	data->read_write = (uchar)prm_get(COM_PRM, S_PAS, (short)(8+kind*10), 1, 1);
	// 期限切れ受付
	data->expire = (uchar)prm_get(COM_PRM, S_PAS, (short)(5+kind*10), 1, 1);
	// 受付する
	data->indefinite = (uchar)prm_get(COM_PRM, S_PAS, (short)(5+kind*10), 1, 2);
	// 定期券回収
	if (prm_get(COM_PRM, S_PAY, 1, 1, 1) != 0) {
		// 事前精算機でない
		data->collect = (uchar)prm_get(COM_PRM, S_PAS, (short)(5+kind*10), 1, 3);
	}
	// 保留モード
	if (data->collect == 0) {
		// 定期券回収する
		data->suspend_mode = (uchar)prm_get(COM_PRM, S_PAS, (short)(8+kind*10), 1, 2);
	}
	// 料金体系印字フラグ
		// 駐車券併用可
		for (i = 0; i < CHARGE_CARKINDMAX; i++) {
			ChargeSetup_edit_ChargeData(i, 0);				// 車種設定データ取得
			if (charge_ctrl.carkind_useflag == ON) {		// 車種使用あり
				ChargeSetup_DayOfWeekGet(i, week, S_SHA);	// 車種の使用曜日取得
				for (j = 0; j < CHARGE_DAYOFWEEKMAX; j++) {
					switch(week[j]) {
					case 0:
					case 1:
						if (charge_ctrl.sys_useflag[0] == ON) {
							data->sys_priflag[0] = ON;		// 第１料金体系表示あり
						}
						break;
					case 2:
						if (charge_ctrl.sys_useflag[1] == ON) {
							data->sys_priflag[1] = ON;		// 第２料金体系表示あり
						}
						break;
					case 3:
						if (charge_ctrl.sys_useflag[2] == ON) {
							data->sys_priflag[2] = ON;		// 第３料金体系表示あり
						}
						break;
					case 4:
						if (charge_ctrl.sys_useflag[3] == ON) {
							data->sys_priflag[3] = ON;			// 第４料金体系表示あり
						}
						break;
					case 5:
						if (charge_ctrl.sys_useflag[4] == ON) {
							data->sys_priflag[4] = ON;			// 第５料金体系表示あり
						}
						break;
					case 6:
						if (charge_ctrl.sys_useflag[5] == ON) {
							data->sys_priflag[5] = ON;			// 第６料金体系表示あり
						}
						break;
					case 7:
						if (charge_ctrl.sys_useflag[6] == ON) {
							data->sys_priflag[6] = ON;			// 第７料金体系表示あり
						}
						break;
					case 8:
						if (charge_ctrl.sys_useflag[7] == ON) {
							data->sys_priflag[7] = ON;			// 第８料金体系表示あり
						}
						break;
					case 9:
						if (charge_ctrl.sys_useflag[8] == ON) {
							data->sys_priflag[8] = ON;			// 第９料金体系表示あり
						}
						break;
					default :
						break;
					}
				}
			}
			if(check_TEIKI_priflg(data)){
				// 全料金体系印字設定ありなら終了
				break;
			}
		}
// MH321800(S) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
	// ※料金設定パラメータ印字は参照データが多く印字しないケースが続くと、タスク占有時間が長くなる。
	//   そのため、E3260が発生してしまうケースがあるので、１印字項目完了で一旦taskchg()を行うこととする
	xPause_PRNTSK(0L);
// MH321800(E) Y.Tanizaki ICクレジット対応(領収証印字や設定印字を行うとE3260が発生する)
	// 時刻
	type = data->pass_kind;
	for (i = 0; i < CHARGE_SYSMAX; i++) {
		if (data->sys_priflag[i] == ON) {
			// 開始時刻(割引時刻)
			if(i < 3){
				time = (ushort)prm_get(COM_PRM, S_PTM, (short)(1+((i%3)*30)+(kind*2)), 4, 1);
			}
			else{
				time = (ushort)prm_get(COM_PRM, S_CLC, (short)(1+((((i/3)-1)*90)+(i%3)*30)+(kind*2)), 4, 1);
			}
			data->start_time[i][HOUR] = (uchar)(time / 100);
			data->start_time[i][MIN] = (uchar)(time % 100);
			if (type == 1) {
			// 時間帯定期(終了時刻)
				if(i < 3){
					time = (ushort)prm_get(COM_PRM, S_PTM, (short)(2+((i%3)*30)+(kind*2)), 4, 1);
				}
				else{
					time = (ushort)prm_get(COM_PRM, S_CLC, (short)(2+((((i/3)-1)*90)+(i%3)*30)+(kind*2)), 4, 1);
				}
				data->end_time[i][HOUR] = (uchar)(time / 100);
				data->end_time[i][MIN] = (uchar)(time % 100);
			}
		}
	}
}
char check_TEIKI_priflg(sPASS_DATA *data)
{
	char i;
	for(i = 0; i < CHARGE_SYSMAX; i++){
		if(data->sys_priflag[i] != ON){
			return 0;
		}
	}
	
	return 1;
}
//[]----------------------------------------------------------------------[]
///	@brief			料金設定プリント:サービス券or店割引or多店舗割引設定ﾃﾞｰﾀ取得
//[]----------------------------------------------------------------------[]
///	@param[in]		kind	: サービス券or店割引or多店舗割引
///										S_SER = サービス券<br>
///										S_STO = 店割引<br>
///										S_TAT = 多店舗割引(種別)
///	@param[in]		num		: サービス券or店割引or多店舗割引No
///	@param[out]		discount_data	: サービス券or店割引情報or多店舗割引情報
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Imai
///	@date			Create	: 2008/01/17<br>
///					Update	: 
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
void	ChargeSetup_DiscountDataGet(short kind, ushort num, CHARGE_DISCOUNTDATA *discount_data)
{
	if (kind != S_TAT) {		// サービス券 or 店割引
		// 割引役割
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//		discount_data->kind 		= CPrmSS[kind][(1+num*3)];
		discount_data->kind 		= prm_get( COM_PRM, kind, (short)(1+num*3), 1, 1 );
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
		if (discount_data->kind != 1) {
			// 割引データ
			discount_data->data 	= (ushort)prm_get(COM_PRM, kind, (short)(2+num*3), 4, 1);
		} else {
			// 割引時刻
			discount_data->time[HOUR] = (uchar)prm_get(COM_PRM, kind, (short)(2+num*3), 2, 3);
			discount_data->time[MIN]  = (uchar)prm_get(COM_PRM, kind, (short)(2+num*3), 2, 1);
		}
		// 割引種別切替
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//		discount_data->kind_change 	= CPrmSS[kind][(3+num*3)];
		discount_data->kind_change 	= prm_get( COM_PRM, kind, (short)(3+num*3), 2, 1 );
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
	} else {					// 多店舗割引
		// 割引役割
		discount_data->kind 		= CPrmSS[kind][(2+num*2)];
		if (discount_data->kind != 1) {
			// 割引データ
			discount_data->data 	= (ushort)prm_get(COM_PRM, kind, (short)(3+num*2), 4, 1);
		} else {
			// 割引時刻
			discount_data->time[HOUR] = (uchar)prm_get(COM_PRM, kind, (short)(3+num*2), 2, 3);
			discount_data->time[MIN]  = (uchar)prm_get(COM_PRM, kind, (short)(3+num*2), 2, 1);
		}
		// 割引種別切替
		discount_data->kind_change 	= CPrmSS[kind][(32+num)];
	}
}

// MH810105(S) MH364301 インボイス対応
//[]----------------------------------------------------------------------[]
///	@brief			運用設定プリントインボイス設定印字ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
///	@param[in]		pri_no		: 編集項目No.
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author
///	@date			Create	: 2022/03/14<br>
//[]------------------------------------- Copyright(C) 2011 AMANO Corp.---[]
void	ChargeSetup_edit_InVoice(uchar pri_no, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	uchar			gyou_cnt;			// 行数
	uchar			data_cnt;			// 文字数（ﾍｯﾀﾞｰ行数分）
	uchar			tax_rate;			// 適用税率
	int				i;
	short			save_error_type;
	short			vertif_error;		// ヘッダーフッター各一行のエラーを保存
	date_time_rec	now_time;
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//	uchar			is_total_amount;	// 合計が適用されているかのフラグ
//	uchar			is_tax_rate;		// 税率表示が適用されているかのフラグ
	ushort			f_print_set;		// 税関連設定フラグ(bitとして使用)
										// (00000001)124設定有
										// (00000010)197設定有
										// (00000100)224設定有
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
// GG129001(S) データ保管サービス対応（運用設定プリントにインボイス設定チェック追加）
	ushort			wk;
// GG129001(E) データ保管サービス対応（運用設定プリントにインボイス設定チェック追加）

	p_proc_data->Prn_no_wk[1]++;		// 処理番号更新
	// 初期化
	vertif_error	= -1;
	save_error_type = -1;				//-1: ヘッダーフッターが設定されていない
										// 0: エラー無し
										// 1: T番号無し
										// 2: 登録番号無し
										// 3: 登録番号、T番号無し
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//	is_total_amount = FALSE;
//	is_tax_rate		= FALSE;
	f_print_set		= 0;
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
	memset(cTmp2, 0, sizeof(cTmp2));
	memset(cEditwk2, 0, sizeof(cEditwk2));
	memset(cEditwk3, 0, sizeof(cEditwk3));
	// 精算機の日付をdate_time_rec2に変換
	now_time.Year = CLK_REC.year;
	now_time.Mon  = CLK_REC.mont;
	now_time.Day  = CLK_REC.date;

	switch(p_proc_data->Prn_no_wk[1])												// 処理番号毎に印字処理を分岐
	{
	case 1:																			// 表題 "********  インボイス  ********"
		ChargeSetup_edit_Title(pri_no, pri_kind, p_proc_data);						// 表題印字処理
		break;
	case 2:																			// 登録番号、消費税率
// GG129001(S) データ保管サービス対応（運用設定プリントにインボイス設定チェック追加）
		wk = (ushort)prm_get(COM_PRM, S_SYS, 16, 1, 6);
		if (wk > 1) {
			Str_Set1(																// -----印字ﾃﾞｰﾀ編集-----
						InVoice_Prn[11],											// 文字列１：適格請求書発行事業者
						Charge_Base[60],											// 文字列２：■
						pri_kind													// 印字先ﾌﾟﾘﾝﾀ
					);
			Cal_Parameter_Flg = 1;
			break;
		}
// GG129001(E) データ保管サービス対応（運用設定プリントにインボイス設定チェック追加）

		// ヘッダーもしくはフッターに登録番号とTxxxxxxxxxxxxx(数字13桁)があるかチェック
		gyou_cnt = (uchar)prm_get( COM_PRM, S_PRN, 4, 2, 3 );						// 「ﾍｯﾀﾞｰ行数」設定ﾃﾞｰﾀ取得
		if( Header_Rsts == 0 ){														// Headerが正常に読み込めているか
			for( i=0 ; i < gyou_cnt ;i++ ) {
				data_cnt = (uchar)prm_get( COM_PRM, S_PRN, (short)(5+i), 2, 1 );	// 「文字数」設定ﾃﾞｰﾀ取得
				if( data_cnt > FONTA_MAX_COL ){
					data_cnt = FONTA_MAX_COL;										// 不正ﾃﾞｰﾀの場合、ﾌｫﾝﾄＡ最大文字数（３６文字）とする
				}
				memcpy( &cTmp2, &Header_Data[i], FONTA_MAX_COL );
				vertif_error = Search_Registry_Number(cTmp2, data_cnt, cEditwk2, cEditwk3);				// '登録番号'と'Txxxxxxxxxxxxx'文字列検索
				if ( vertif_error == 0 ) {											// 正常値の場合
					break;
				}
				if ( !(save_error_type == 1 || save_error_type == 2) ) {
					save_error_type = vertif_error;									// 一番上のエラーを表示するので保持しておく(登録番号とT番号のどちらもない場合はスルー)
				}
			}
		}
		if ( Footer_Rsts == 0 && vertif_error != 0 ) {								// Footerが正常に読み込めているか
			gyou_cnt = (uchar)prm_get( COM_PRM, S_PRN, 4, 2, 1 );					// 「ﾌｯﾀｰ行数」設定ﾃﾞｰﾀ取得
			for( i=0 ; i < gyou_cnt ;i++ ) {
				data_cnt = (uchar)prm_get( COM_PRM, S_PRN, (short)(9+i), 2, 1 );	// 「文字数」設定ﾃﾞｰﾀ取得
				if( data_cnt > FONTA_MAX_COL ){
					data_cnt = FONTA_MAX_COL;										// 不正ﾃﾞｰﾀの場合、ﾌｫﾝﾄＡ最大文字数（３６文字）とする
				}
				memcpy( &cTmp2, &Footer_Data[i], FONTA_MAX_COL );
				vertif_error = Search_Registry_Number(cTmp2, data_cnt, cEditwk2, cEditwk3);				// '登録番号'と'Txxxxxxxxxxxxx'文字列検索

				if ( vertif_error == 0 ) {											// 正常値の場合
					break;
				}
				if ( !(save_error_type == 1 || save_error_type == 2) ) {
					save_error_type = vertif_error;									// 一番上のエラーを表示するので保持しておく(登録番号とT番号のどちらもない場合はスルー)
				}
			}
		}
		memset(cEditwk1, 0, sizeof(cEditwk1));
		if( vertif_error != 0 ){													// エラーがあるか先に確認
// GG129001(S) データ保管サービス対応（運用設定プリントにインボイス設定チェック追加）
			sprintf(cEditwk1, "%s", InVoice_Prn[12+wk]);							// 対象／対象外
			Str_Set1(																// -----印字ﾃﾞｰﾀ編集-----
						InVoice_Prn[11],											// 文字列１：適格請求書発行事業者
						cEditwk1,													// 文字列２：設定値
						pri_kind													// 印字先ﾌﾟﾘﾝﾀ
					);
			if (wk == 1) {
				// 適格請求書発行事業者対象外は運用設定OKとする
				break;
			}
// GG129001(E) データ保管サービス対応（運用設定プリントにインボイス設定チェック追加）
			Cal_Parameter_Flg = 1;
			switch ( save_error_type ) {
			case -1:
			case 1:
			case 3:
				sprintf(cEditwk1, "%s%s", InVoice_Prn[2], InVoice_Prn[3]);			// "登録番号 ■■■■■■■"
				break;
			case 2:
				sprintf(cEditwk1, "%s%s", InVoice_Prn[4], cEditwk2);				// "■■■■ Txxxxxxxxxxxxx"
				break;
			default:
				// 通らない
				break;
			}
		} else {
// GG129001(S) データ保管サービス対応（運用設定プリントにインボイス設定チェック追加）
			if (wk == 0) {
				sprintf(cEditwk1, "%s", InVoice_Prn[12]);							// 対象
			}
			else {
				sprintf(cEditwk1, "■%s", InVoice_Prn[13]);							// ■対象外
				Cal_Parameter_Flg = 1;
			}
			Str_Set1(																// -----印字ﾃﾞｰﾀ編集-----
						InVoice_Prn[11],											// 文字列１：適格請求書発行事業者
						cEditwk1,													// 文字列２：設定値
						pri_kind													// 印字先ﾌﾟﾘﾝﾀ
					);
// GG129001(E) データ保管サービス対応（運用設定プリントにインボイス設定チェック追加）
			sprintf(cEditwk1, "%s", cEditwk3);										// "登録番号 Txxxxxxxxxxxxx"
		}
		PCMD_CENTER( pri_kind );													// [位置揃え(中央揃え)]
		PrnStr( cEditwk1, pri_kind );												// 印字ﾃﾞｰﾀ登録
		break;
	case 3:
		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//		for( i = 0; i < 50; i++ ){
//			if( prm_get( COM_PRM, S_RTP, (short)(4 + i), 3, 1 ) == 124 ){			// 17-0004以降の印字内容④⑤⑥取得
//				is_total_amount = TRUE;												// 印字項目に124があれば何も表示しない
//				break;
//			}
//		}
//		if ( is_total_amount != TRUE ) {
//			Cal_Parameter_Flg = 1;
//			RYOUSYUU_edit_title_sub(NULL, 0, cEditwk2, p_proc_data);
//			sprintf( cEditwk1, " ■%s ※", cEditwk2);									// ■合  計 ※
//			PCMD_CENTER( pri_kind );												// [位置揃え(中央揃え)]
//			PrnStr( cEditwk1, pri_kind );											// 印字ﾃﾞｰﾀ登録
//		}
		tax_rate = Disp_Tax_Value( &now_time );
		// 124,197,224を検索
		for( i = 0; i < 50; i++ ){
			if( prm_get( COM_PRM, S_RTP, (short)(4 + i), 3, 1 ) == 124 ){
				f_print_set |= 0x01;
			}
			else if( prm_get( COM_PRM, S_RTP, (short)(4 + i), 3, 1 ) == 197 ){
				f_print_set |= 0x02;
			}
			else if( prm_get( COM_PRM, S_RTP, (short)(4 + i), 3, 1 ) == 224 ){
				f_print_set |= 0x04;
			}
		}
		// is_tax_rate = 000 X(224)X(197)X(124)
		// 0x00 = 124,197,224どれも設定なし
		// 0x07 = 124,197,224全て設定あり
		// 0x04 = 224設定有 (00000100)
		// 0x03 = 124,197設定有 (00000011)
// GG121802(S) R.Endo 2023/09/14 #7131 インボイスの領収証プリント設定チェックが仕様と異なる＆現仕様では領収証プリント設定に【224】のみある場合は常に設定誤りとなる
// 		if ( f_print_set == 0x00 || f_print_set == 0x07 || f_print_set == 0x04 ) {
// GG121802(E) R.Endo 2023/09/14 #7131 インボイスの領収証プリント設定チェックが仕様と異なる＆現仕様では領収証プリント設定に【224】のみある場合は常に設定誤りとなる
			// 税率取得
			if( tax_rate == 0 ){													// 税率設定無
				sprintf( cEditwk1, "(%s■%s", InVoice_Prn[8], InVoice_Prn[9] );		// "(内税■％対象"
				Cal_Parameter_Flg = 1;
			}
			else {
				sprintf( cEditwk1, "(%s%d%s", InVoice_Prn[8], tax_rate, InVoice_Prn[9] );	// "(内税xx％対象"
			}
			// 料金取得
			memset( cMnydata, 0, sizeof(cMnydata) );
			f_print_set &= 0x04;
			// 224あり
			if( f_print_set == 0x04 ){
				sprintf( cMnydata,"%ld", (ulong)9990 );								// 料金印字ﾃﾞｰﾀ編集
				Camma_Set( (uchar *)cMnydata );										// ３桁区切り（”、”挿入）
			}
			else{
				sprintf( cMnydata, "■■■■");											// 内税対象額■■■■
				Cal_Parameter_Flg = 1;
			}
			Str_Set2(																// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,													// データ１："(内税"X"％対象額"
						"",															// データ２：なし
						cMnydata,													// データ３：内税対象額
						"円)",														// データ４："円)"
						pri_kind													// 印字先ﾌﾟﾘﾝﾀ
					);
// GG121802(S) R.Endo 2023/09/14 #7131 インボイスの領収証プリント設定チェックが仕様と異なる＆現仕様では領収証プリント設定に【224】のみある場合は常に設定誤りとなる
// 		}
// 		else {
// 			// 197のみ有
// 			if( f_print_set == 0x02 ){
// 				Cal_Parameter_Flg = 1;
// 				RYOUSYUU_edit_title_sub(NULL, 0, cEditwk2, p_proc_data);
// 				sprintf( cEditwk1, " ■%s ※", cEditwk2);								// ■合  計 ※
// 				PCMD_CENTER( pri_kind );											// [位置揃え(中央揃え)]
// 				PrnStr( cEditwk1, pri_kind );										// 印字ﾃﾞｰﾀ登録
// 			}
// 			else{
// 				// 税率取得
// 				if( tax_rate == 0 ){
// 					sprintf( cEditwk2, "%s■%s", InVoice_Prn[0], InVoice_Prn[1]);	// "※印は消費税率■％対象です。"
// 					Cal_Parameter_Flg = 1;
// 				} else {
// 					sprintf( cEditwk2, "%s%d%s", InVoice_Prn[0], tax_rate, InVoice_Prn[1]);	// "※印は消費税率xx％対象です。"
// 				}
// 				f_print_set &= (0x01|0x02);
// 				// (124,197)ペアあり
// 				if ( f_print_set == (0x01|0x02) ) {
// 					memcpy( cEditwk1, cEditwk2, sizeof(cEditwk2) );
// 				} else {
// 					sprintf( cEditwk1, "■%s", cEditwk2 );							// "■※印は消費税率xx％対象です。"
// 					Cal_Parameter_Flg = 1;
// 				}
// 				PCMD_CENTER( pri_kind );											// [位置揃え(中央揃え)]
// 				PrnStr( cEditwk1, pri_kind );										// 印字ﾃﾞｰﾀ登録
// 			}
// 		}
// GG121802(E) R.Endo 2023/09/14 #7131 インボイスの領収証プリント設定チェックが仕様と異なる＆現仕様では領収証プリント設定に【224】のみある場合は常に設定誤りとなる
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
		break;
	case 4:																			// 消費税率
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//		// 消費税率をチェック
//		memset(cEditwk1, 0, sizeof(cEditwk1));
//		memset(cEditwk2, 0, sizeof(cEditwk2));
//		// 日付計算
//		tax_rate = Disp_Tax_Value( &now_time );
//		if( tax_rate == 0 ){
//			sprintf( cEditwk2, "%s■%s", InVoice_Prn[0], InVoice_Prn[1]);			// "※印は消費税率■％対象です。"
//			Cal_Parameter_Flg = 1;
//		} else {
//			sprintf( cEditwk2, "%s%d%s", InVoice_Prn[0], tax_rate, InVoice_Prn[1]);	// "※印は消費税率xx％対象です。"
//		}
//		// 197があるか確認
//		for( i = 0; i < 50; i++ ){
//			if( prm_get( COM_PRM, S_RTP, (short)(4 + i), 3, 1 ) == 197 ){			// 17-0004以降の印字内容④⑤⑥取得
//				is_tax_rate = TRUE;													// 印字項目に197があれば何も表示しない
//				break;
//			}
//		}
//		if ( is_tax_rate != TRUE ) {
//			sprintf( cEditwk1, "■%s", cEditwk2 );									// "■※印は消費税率xx％対象です。"
//			Cal_Parameter_Flg = 1;
//		} else {
//			memcpy( cEditwk1, cEditwk2, sizeof(cEditwk2) );
//		}
//		PCMD_CENTER( pri_kind );													// [位置揃え(中央揃え)]
//		PrnStr( cEditwk1, pri_kind );												// 印字ﾃﾞｰﾀ登録
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
		break;
	case 5:																			// ヘッダー
		PCMD_LEFT( pri_kind );														// [位置揃え(左揃え)]
		PrnStr( InVoice_Prn[5], pri_kind );
		Prn_edit_headhoot( PRI_HEADER, pri_kind );
		break;
	case 6:																			// フッター
		PCMD_LEFT( pri_kind );														// [位置揃え(左揃え)]
		PrnStr( InVoice_Prn[6], pri_kind );
		Prn_edit_headhoot( PRI_HOOTER, pri_kind );
		break;
	}
}

//[]----------------------------------------------------------------------[]
///	@brief			インボイス登録番号検索処理
//[]----------------------------------------------------------------------[]
///	@param[in]		str				: 文字列
///	@param[in]		size			: 文字列長
///	@param[in]		registry_num	: T13文字列のアドレス
///	@param[in]		output_str		: 表示用文字列
///	@return			int				: エラー値
///					"登録番号"、"Txxxxxxxxxxxxx"(x:数字)文字列を検索してエラー値を返す
///					0: 正常な場合
///					1: Tが無い場合
///					2: 登録番号がない場合
///					3: どちらもない場合						
//[]----------------------------------------------------------------------[]
///	@author			
///	@date			Create	: 2022/03/14<br>
//[]------------------------------------- Copyright(C) 2011 AMANO Corp.---[]
short	Search_Registry_Number(char* in_str, uchar size, char* registry_num, char* output_str)
{
	char*	first_registry_str;										// 初めの登録番号のアドレス
	char*	first_T_str;											// 初めのTのアドレス
	short	error_type;												// エラー種別
	int		before_registry_count;									// 登録番号の前の文字数
	int		original_str_count;										// 表示用文字列の文字数

	original_str_count = 0;
	error_type = 0;

	// 登録番号を検索
	first_registry_str = strstr(in_str, "登録番号");

	// Tを検索
	if ( strstr(in_str, "Ｔ") == NULL ) {							// 全角から探索
		first_T_str = strstr(in_str, "T");
	} else {
		first_T_str = strstr(in_str, "Ｔ");
	}
	// 登録番号とT13桁を検索
	Search_Registry_T_Num( in_str, first_registry_str, first_T_str, &error_type );

	// 登録番号とT13桁が両方ない or T13桁がない 場合は処理終了。
	// 登録番号がないパターンはT13桁を取得する必要があるのでここでは終了しない。
	if ( error_type == 0x01 || error_type == 0x03 ) {
		return error_type;
	}

	// 順序が正しいか確認
	Search_Order_Check( first_registry_str, first_T_str, &error_type );

	if ( error_type != 0x02 ) {										// 登録番号がTより前にある時のみ確認
		// 登録番号の文字列の前に不適なものがあるか確認
		before_registry_count = Search_Before_Registry_Str_Check( in_str, first_registry_str, &error_type );
	}

	// Tの後ろに13桁の数字があるか確認
	original_str_count = Search_After_T_Num( first_T_str, &error_type );
	// T13桁が不適
	if ( error_type == 0x01 ) {
		return error_type;
	}

	if ( error_type == 0x02 ) {												// 登録番号がなかった場合
		memcpy(registry_num, first_T_str, (size_t)(original_str_count));	// T13桁を設定
		return error_type;
	}

	original_str_count += before_registry_count + 8;						// 先頭から登録番号の終わりまでの文字数
	original_str_count += (int)(first_T_str - first_registry_str - 8);		// 登録番号とT13桁の間の文字数

	// 14行目以降に余計なものがついていないかチェック
	original_str_count = Search_After_T13_Str( (uchar*)(in_str + original_str_count), size, original_str_count, &error_type );
	// T13桁が不適
	if ( error_type == 0x01 ) {
		return error_type;
	}

	// 登録番号文字列とT13文字列の間の文字列のチェック
	Search_between_registry_T13( (uchar*)(first_registry_str + 8), (int)(first_T_str-first_registry_str-8), &error_type);
	// T13桁が不適
	if ( error_type == 0x01 ) {
		return error_type;
	}

	memcpy( output_str, first_registry_str, (size_t)(original_str_count) );
	return error_type;
}

//[]----------------------------------------------------------------------[]
///	@brief			登録番号文字列とT13の文字列の存在チェック
//[]----------------------------------------------------------------------[]
///	@param[in]		in_str 　			：行の先頭アドレス
///	@param[in]		first_registry_str	：登録番号文字列の先頭アドレス
///	@param[in]		first_T_str 　		：T13の先頭アドレス
///	@param[in]		error_type			：エラー種別
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Hayakawa
///	@date			Create	: 2022/04/11<br>
//[]------------------------------------- Copyright(C) 2022 AMANO Corp.---[]
void	Search_Registry_T_Num( char* in_str, char* first_registry_str, char* first_T_str, short* error_type )
{
	// エラータイプを設定
	if ( first_registry_str == NULL && first_T_str == NULL ) {
		*error_type = 0x03;
	} else if ( first_registry_str == NULL ) {
		*error_type = 0x02;
	} else if ( first_T_str == NULL ) {
		*error_type = 0x01;
	} else {
		*error_type = 0x00;
	}
}

//[]----------------------------------------------------------------------[]
///	@brief			登録番号文字列とT13の文字列の順序チェック
//[]----------------------------------------------------------------------[]
///	@param[in]		first_registry_str	：登録番号文字列の先頭アドレス
///	@param[in]		first_T_str 　		：T13の先頭アドレス
///	@param[in]		error_type			：エラー種別
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Hayakawa
///	@date			Create	: 2022/04/11<br>
//[]------------------------------------- Copyright(C) 2022 AMANO Corp.---[]
void	Search_Order_Check( char* first_registry_str, char* first_T_str, short* error_type )
{
	// 順序が正しいか確認
	if ( first_T_str < first_registry_str ) {	// Tの数字よりも登録番号のほうが後ろの場合
		*error_type = 0x02;
	}
}

//[]----------------------------------------------------------------------[]
///	@brief			登録番号文字列より前の部分の文字列の整合性チェック
//[]----------------------------------------------------------------------[]
///	@param[in]		in_str 　			：行の先頭アドレス
///	@param[in]		first_registry_str	：登録番号文字列の先頭アドレス
///	@param[in]		error_type			：エラー種別
///	@return			int
//[]----------------------------------------------------------------------[]
///	@author			Hayakawa
///	@date			Create	: 2022/04/11<br>
//[]------------------------------------- Copyright(C) 2022 AMANO Corp.---[]
int	Search_Before_Registry_Str_Check( char* in_str, char* first_registry_str, short* error_type )
{
	// 宣言
	int		i;
	int		before_registry_count;

	// 初期化
	before_registry_count = 0;

	// 登録番号の文字列の前に不適なものがあるか確認
	before_registry_count = (int)(first_registry_str - in_str);		// 登録番号文字列より前にある文字数を取得
	if ( before_registry_count != 0 ) {
		for ( i = 0;i < before_registry_count;i++ ) {
			if ( in_str[i] == ' ' ) {
				continue;
			} else if( in_str[i] == 0x81 && in_str[i+1] == 0x40 ) {	// 全角スペース
				continue;
			}
			// 登録番号の文字列の前に不適な文字が入っている
			*error_type = 0x01;
			return -1;
		}
	}

	return before_registry_count;
}

//[]----------------------------------------------------------------------[]
///	@brief			Tの後に13桁の数字が来ているか確認
//[]----------------------------------------------------------------------[]
///	@param[in]		first_T_str 　	：T13文字列の先頭アドレス
///	@param[in]		error_type		：エラー種別
///	@return			int
//[]----------------------------------------------------------------------[]
///	@author			Hayakawa
///	@date			Create	: 2022/04/11<br>
//[]------------------------------------- Copyright(C) 2022 AMANO Corp.---[]
int		Search_After_T_Num( char* first_T_str, short* error_type )
{
	// 宣言
	int		original_str_count;
	uchar*	original_str;
	int		i;

	// 初期化
	original_str_count = (int)((uchar)(*first_T_str) == 0x82 ? 2 : 1 );	// Tの分は初めから加算
	// Tは検索から省く
	original_str = (uchar*)((uchar)(*first_T_str) == 0x82 ? 
							first_T_str + 2 :							//  全角T
							first_T_str + 1 );

	// Tの後ろに13桁の数字があるか確認
	// 半角換算で13文字を計測とともに元の文章での半角換算文字数も計測
	for ( i = 0;i < 13;i++, original_str++, original_str_count++ ) {
		// 半角の場合
		if ( !(0x80 <= *original_str && *original_str <= 0xa0) ) {
			if ( *original_str == ' ' || *original_str == '-' ) {		// スペースとハイフンはスルーする
				i--;
				continue;
			}
			if ( !( 0x30 <= *original_str && *original_str <= 0x39 ) ) {// 数字以外は不適
				*error_type = 0x01;
				return -1;
			}
		// 全角の場合
		} else {
			if ( *original_str == 0x81 ) {								// スペース,ハイフン
				i--;													// 1Byte目を無視
				original_str++;
				original_str_count++;
				switch ( *original_str ) {
					case 0x40:											// 全角スペース
					case 0x5b:											// ー		
					case 0x5c:											// ―
					case 0x5d:											// ‐
					case 0x7c:											// －
						continue;
						break;
					default:											// それ以外
						*error_type = 0x01;
						return -1;
				}
			} else if ( *original_str == 0x82 ) {
				original_str++;
				original_str_count++;
				if ( !( 0x4f <= *original_str && *original_str <= 0x58 ) ) {	// 数字のみ
					*error_type = 0x01;
					return -1;
				}
			} else {
				*error_type = 0x01;
				return -1;
			}
		}
	}
	return original_str_count;
}

//[]----------------------------------------------------------------------[]
///	@brief			T13から後ろの文字列の整合性チェック
//[]----------------------------------------------------------------------[]
///	@param[in]		after_T13_str 　	：T13桁から後ろの文字列の先頭アドレス
///	@param[in]		str_size			：行の文字数
///	@param[in]		original_str_count	：表示用文字列の文字数
///	@param[in]		error_type 			：エラー種別
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Hayakawa
///	@date			Create	: 2022/04/11<br>
//[]------------------------------------- Copyright(C) 2022 AMANO Corp.---[]
int		Search_After_T13_Str( uchar* after_T13_str, uchar str_size, int original_str_count, short* error_type ) {
	// 宣言
	uchar* 	original_str;
	int		i;

	// 初期化
	original_str = after_T13_str;

	// 14行目以降に余計なものがついていないかチェック
	for ( i = original_str_count; i < str_size; i++, original_str++, original_str_count++ ) {
		if ( *original_str == ' ' ||														// スペース(全角、半角)は許容する
			(i < FONTA_MAX_COL && *original_str == 0x81 && *(original_str+1) == 0x40) || 
			original_str_count == FONTA_MAX_COL ) {
			// 何もなし
		} else {
			if ( strncmp((char*)original_str, "登録番号", 8) == 0 ) {	// 「登録番号」は許容文字なので、見つかったら半角文字数分(8)移動する
				i += 7;													// for文最後で++されるので、ここでは7移動して抜ける
				original_str += 7;
				original_str_count += 7;
				continue;
			}
			*error_type = 0x01;											// 「登録番号」以外の文字列が見つかったらエラーとする
			return -1;
		}
	}
	return original_str_count;
}


//[]----------------------------------------------------------------------[]
///	@brief			登録番号文字列からT13の間の文字列の整合性チェック
//[]----------------------------------------------------------------------[]
///	@param[in]		between_str 　	：間の先頭アドレス
///	@param[in]		between_count	：間の文字数
///	@param[in]		error_type		：エラー種別
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			Hayakawa
///	@date			Create	: 2022/04/11<br>
//[]------------------------------------- Copyright(C) 2022 AMANO Corp.---[]
void	Search_between_registry_T13( uchar* between_str, int between_count, short* error_type )
{
	// 宣言
	uchar*	original_str;
	int		i;

	// 初期化
	original_str = between_str;

	// 登録番号とT13桁の間を確認
	for ( i = 0; i < between_count; i++, original_str++) {
		// 半角の場合
		if ( !(0x80 <= *original_str && *original_str <= 0xa0) ) {
			if ( *original_str == ' ' || *original_str == '-' ) {	// スペースとハイフンはスルーする
				continue;
			} else {
				*error_type = 0x01;
				return;
			}
		// 全角の場合
		} else {
			if ( *original_str == 0x81 ) {							// スペース,ハイフン
				i++;
				original_str++;
				switch ( *original_str ) {
					case 0x40:										// 全角スペース
					case 0x5b:										// ー		
					case 0x5c:										// ―
					case 0x5d:										// ‐
					case 0x7c:										// －
						continue;
						break;
					default:										// それ以外
						*error_type = 0x01;
						return;
				}
			} else {
				// 間に登録番号文字列があるかチェック
				if ( strstr((char*)original_str, "登録番号") == NULL ) {
					*error_type = 0x01;
					return;
				}
				// 登録番号分ずらす
				i += 8;
				original_str += 8;
			}
		}
	}
}
// MH810105(E) MH364301 インボイス対応

/*[]------------------------------------------------------------------------[]*/
/*| 設定変更履歴印字														 |*/
/*[]------------------------------------------------------------------------[]*/
/*| MODULE NAME  : PrnSetDiffLog_edit                                        |*/
/*| PARAMETER    :                                                           |*/
/*| RETURN VALUE : void                                                      |*/
/*[]------------------------------------------------------------------------[]*/
/*| Author       : T.Okamoto(COSMO)                                          |*/
/*| Date         : 2007-02-05                                                |*/
/*[]------------------------------------------------------------------------[]*/
void PrnSetDiffLog_edit( T_FrmLogPriReq1 *msg_data, PRN_PROC_DATA *p_proc_data, uchar pri_kind )
{
	char	str_bef[7];			// パラメータ変更前設定値(文字)
	char	str_aft[7];			// パラメータ変更後設定値(文字)
	uchar	i;					// ループ用変数
	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ（OFF：印字継続／ON：印字終了）
	short	year, month, day;	// 曜日取得用年月日ワーク領域
	long	num_bef;			// パラメータ変更前設定値(実値)
	long	num_aft;			// パラメータ変更後設定値(実値)

	// 編集開始（初回編集）の場合
	if( p_proc_data->Log_Start == OFF ) {

		/*------	＜表題＞編集	------*/
		// 表題（"設定更新情報"）印字ﾃﾞｰﾀ編集
		Prn_edit_Title( "設定更新情報", FONT_K_YOKOBAI, pri_kind );
		/*------	１行空白	------*/
		if( pri_kind == R_PRI ) {
			// 印字先＝レシートでない（ジャーナル印字またはログ印字の場合、スペース行なし）
			Prn_edit_space( pri_kind );
		}
		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet( cEditwk1, msg_data->Kikai_no );								// 機械NO.編集
		Str_Set1( cEditwk1,	"", pri_kind );										// 文字列１：機械NO.印字ﾃﾞｰﾀ
																				// 文字列２：なし
																				// 印字先ﾌﾟﾘﾝﾀ
		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( cEditwk1 );											// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );												// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnStr( cEditwk1, pri_kind );											// 時刻　印字ﾃﾞｰﾀ登録
		if( pri_kind == R_PRI ) {
			Prn_edit_space( pri_kind );											// １行空白
		}

		p_proc_data->Log_Start	= ON;											// Log_Start	← ﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ
		p_proc_data->Log_Count	= 0;											// Log_Count	← 件数ｾｯﾄ 
		p_proc_data->Log_DataPt	= SetDiffLogBuff.Header.OlderPon;				// Log_DataPt	←最古ﾃﾞｰﾀ配列番号ｾｯﾄ
		p_proc_data->Log_no_wk[0] = 0;											// 印字種別ｾｯﾄ(0:ヘッダ情報/1:差分情報)

		if( !SetDiffLogBuff.Header.UseInfoCnt ) {								// 格納件数が０の場合＝集計データなしの場合
			edit_end = ON;														// 印字終了
		}
	}	// 初回編集処理end

	// ２回目以降の編集処理	
	else {

		switch(p_proc_data->Log_no_wk[0])										// 印字する情報？
		{
		case	0:																// 個別ﾍｯﾀﾞｰ、ﾀｲﾑｽﾀﾝﾌﾟ
			//ﾍｯﾀﾞｰﾏｰｸﾁｪｯｸする
			if ( SetDiffLogBuff.Info[p_proc_data->Log_DataPt].head.hed_mark[0] == 'H' &&
				 SetDiffLogBuff.Info[p_proc_data->Log_DataPt].head.hed_mark[1] == 'D' ){
			}else{ 	//まともならありえないルート
				sprintf( cEditwk1, "Data Error Non Header %d", p_proc_data->Log_DataPt );
				PCMD_LEFT(pri_kind);
				PrnStr( cEditwk1, pri_kind );
				edit_end = ON;
				break;
			}
			year = (short)SetDiffLogBuff.Info[p_proc_data->Log_DataPt].head.year;
			month = (short)SetDiffLogBuff.Info[p_proc_data->Log_DataPt].head.mont;
			day = (short)SetDiffLogBuff.Info[p_proc_data->Log_DataPt].head.date;
			//タイムスタンプ + 変更種別
			sprintf(cEditwk1, "%4d年%2d月%2d日(%s) %2d:%02d  %s", 
					SetDiffLogBuff.Info[p_proc_data->Log_DataPt].head.year,		// 年
					SetDiffLogBuff.Info[p_proc_data->Log_DataPt].head.mont,		// 月
					SetDiffLogBuff.Info[p_proc_data->Log_DataPt].head.date,		// 日
					Week_Prn[youbiget(year, month, day)],						// 曜日
					SetDiffLogBuff.Info[p_proc_data->Log_DataPt].head.hour,		// 時
					SetDiffLogBuff.Info[p_proc_data->Log_DataPt].head.minu,		// 分
					SetDiffPrnStr_1[SetDiffLogBuff.Info[p_proc_data->Log_DataPt].head.syu]);
			PCMD_LEFT(pri_kind);
			PrnStr( cEditwk1, pri_kind );
			// 差分ﾃﾞｰﾀありならｽﾃｰﾀｽ変更
			if( SetDiffLogBuff.Info[p_proc_data->Log_DataPt].head.count != 0 ){
				p_proc_data->Log_no_wk[1] = SetDiff_UpdatePon ( p_proc_data->Log_DataPt , 1 );
				p_proc_data->Log_no_wk[0] = 1;									// 差分情報印字開始
			}
			else																// 差分データ無し
			{
				p_proc_data->Log_DataPt = SetDiff_UpdatePon ( p_proc_data->Log_DataPt , 1 );
				p_proc_data->Log_no_wk[0] = 0;									// 次の個別ﾍｯﾀﾞｰ
			}
			p_proc_data->Log_Count++;											// 印字完了件数更新
			break;

		case	1:																//差分ﾃﾞｰﾀ
			// "  01-0001 : 000001 -> 000002      "
			/* sprintf 関数はlong変数の文字列変換に対応していないため、設定値は手動で文字列に変換 */
			num_bef = SetDiffLogBuff.Info[p_proc_data->Log_no_wk[1]].diff.bef;	// 変更前ワーク値を取得
			num_aft = SetDiffLogBuff.Info[p_proc_data->Log_no_wk[1]].diff.aft;	// 変更後ワーク値を取得
			memset(str_bef, 0, sizeof(str_bef));								// 文字列領域を初期化
			memset(str_aft, 0, sizeof(str_aft));								// 文字列領域を初期化
			for(i = 6; i;)														// 6桁分文字列を作成
			{
				i--;															// 参照位置を移動
				str_bef[i] = (char)((num_bef % 10) + '0');						// 変更前設定値の文字列'0'～'9'
				str_aft[i] = (char)((num_aft % 10) + '0');						// 変更後設定値の文字列'0'～'9'
				if(num_bef)														// 変更前ワーク値に残りがある
				{
					num_bef = num_bef / 10;										// 一桁減らす
				}
				if(num_aft)														// 変更後ワーク値に残りがある
				{
					num_aft = num_aft / 10;										// 一桁減らす
				}
			}
			sprintf(cEditwk1, "  %02d-%04d : %s -> %s      ",					// 印字文字列作成
					SetDiffLogBuff.Info[p_proc_data->Log_no_wk[1]].diff.ses,	// セッション番号
					SetDiffLogBuff.Info[p_proc_data->Log_no_wk[1]].diff.add,	// アドレス番号
					str_bef, str_aft);											// 更新前→更新後設定値(文字)
			PCMD_LEFT(pri_kind);												// 右寄せ印字設定
			PrnStr( cEditwk1, pri_kind );										// 印字情報反映処理
			//@@@ 次の位置に進める @@@
			p_proc_data->Log_no_wk[1] = SetDiff_UpdatePon ( p_proc_data->Log_no_wk[1] , 1 );
			p_proc_data->Log_Count++;
			//１履歴内のデータ数チェック
			if ( (p_proc_data->Log_no_wk[1] - p_proc_data->Log_DataPt) > SetDiffLogBuff.Info[p_proc_data->Log_DataPt].head.count ){
				//格納数 < 全件数 ?
				if ( SetDiffLogBuff.Info[p_proc_data->Log_DataPt].head.count 
											<
					 SetDiffLogBuff.Info[p_proc_data->Log_DataPt].head.zen_cnt )
				{
					sprintf( cEditwk1, "  ...Omit.Difference Total=%d",SetDiffLogBuff.Info[p_proc_data->Log_DataPt].head.zen_cnt );
					PrnStr( cEditwk1, pri_kind );
				}
				p_proc_data->Log_DataPt = p_proc_data->Log_no_wk[1];
				p_proc_data->Log_no_wk[0] = 0;									// 次の個別ﾍｯﾀﾞｰ
			}
			break;
		}
		if( SetDiffLogBuff.Header.UseInfoCnt <= p_proc_data->Log_Count ) {		// 全ﾛｸﾞ情報編集終了
			edit_end = ON;														// 編集終了
		}
	}	// ２回目以降の編集処理end
	if( edit_end == ON ){														// 編集終了ﾁｪｯｸ
		p_proc_data->Final = ON;												// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
}

/*[]------------------------------------------------------------------------[]*/
/*| 預り証フッター印字編集関数												 |*/
/*[]------------------------------------------------------------------------[]*/
/*| MODULE NAME  : Prn_edit_Azu_Ftr_edit                                     |*/
/*| PARAMETER    :                                                           |*/
/*| RETURN VALUE : void                                                      |*/
/*[]------------------------------------------------------------------------[]*/
/*| Author       : T.Namioka		                                         |*/
/*| Date         : 2009-11-12                                                |*/
/*[]------------------------------------------------------------------------[]*/
uchar	Prn_edit_AzuFtr_edit ( uchar pri_kind )
{
	uchar			edit_cnt = 0;				// 編集行数
	uchar			gyou_cnt;					// 行数
	uchar			fnt_size[AZU_FTR_GYO_MAX];	// 文字ｻｲｽﾞ（ﾍｯﾀﾞｰ行数分）
	uchar			pri_posi[AZU_FTR_GYO_MAX];	// 印字位置（ﾍｯﾀﾞｰ行数分）
	uchar			data_cnt[AZU_FTR_GYO_MAX];	// 文字数（ﾍｯﾀﾞｰ行数分）
	uchar			*pri_data[AZU_FTR_GYO_MAX];	// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰ（ﾍｯﾀﾞｰ行数分）
	uchar			s_data;						// 設定ﾃﾞｰﾀﾜｰｸ
	uchar			i;						// 処理ﾙｰﾌﾟｶｳﾝﾀｰ
	ushort			cmd_len;					// 送信ｺﾏﾝﾄﾞﾃﾞｰﾀﾚﾝｸﾞｽ
	PRN_PROC_DATA	*p_proc_data;				// 編集処理制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
	memset ( fnt_size, 0, AZU_FTR_GYO_MAX );
	memset ( pri_posi, 0, AZU_FTR_GYO_MAX );
	memset ( data_cnt, 0, AZU_FTR_GYO_MAX );

	if(( AzuFtr_Rsts != 0 ) && (_FLT_RtnKind(AzuFtr_Rsts) != FLT_NODATA) ){
		// ﾌｯﾀｰ印字ﾃﾞｰﾀが正常に読込まれていない場合
		return( edit_cnt );
	}

	gyou_cnt = (uchar)prm_get( COM_PRM, S_PRN, 35, 2, 1 );						// 「ﾌｯﾀｰ行数」設定ﾃﾞｰﾀ取得

	if( gyou_cnt > AZU_FTR_GYO_MAX ){
		gyou_cnt = AZU_FTR_GYO_MAX;												// 不正ﾃﾞｰﾀの場合、Tﾌｯﾀｰ最大行数とする
	}

	for( i=0 ; i<gyou_cnt ;i++ ){

		fnt_size[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(36+i), 1, 4 );	// 「文字ｻｲｽﾞ」設定ﾃﾞｰﾀ取得
		if( fnt_size[i] > 3 ){
			fnt_size[i] = 0;													// 不正ﾃﾞｰﾀの場合、「標準」とする
		}

		pri_posi[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(36+i), 1, 3 );	// 「印字位置」設定ﾃﾞｰﾀ取得
		if( pri_posi[i] > 2 ){
			pri_posi[i] = 0;													// 不正ﾃﾞｰﾀの場合、「左揃え」とする
		}

		data_cnt[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(36+i), 2, 1 );	// 「文字数」設定ﾃﾞｰﾀ取得
		if( data_cnt[i] > FONTA_MAX_COL ){
			data_cnt[i] = FONTA_MAX_COL;										// 不正ﾃﾞｰﾀの場合、ﾌｫﾝﾄＡ最大文字数（３６文字）とする
		}

		if (_FLT_RtnKind(AzuFtr_Rsts) == FLT_NODATA) {							// 未登録なら初期値
			pri_data[i] = (uchar *)&AzukariFooter_Data_dflt[i][0];				// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
		}else{
			pri_data[i] = (uchar *)&AzuFtr_Data[i][0];							// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
		}
	}

	if( gyou_cnt != 0 ){															// 印字ﾃﾞｰﾀあり？
		for( i = 0 ; i < gyou_cnt ; i++ ){											// 設定されている行数分の印字ﾃﾞｰﾀをﾌﾟﾘﾝﾀ送信ﾊﾞｯﾌｧへ登録

			memset( prn_work, 0, sizeof(prn_work) );								// 印字ｺﾏﾝﾄﾞ編集ｴﾘｱ（prn_work）０ｸﾘｱ
			cmd_len = 0;															// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ０ｸﾘｱ

			// 印字位置
			s_data = pri_posi[i];													// 印字位置設定ﾃﾞｰﾀ取得
			memcpy( &prn_work[0], &Pri_posi_cmd[s_data][0], 3 );					// 印字位置指定ｺﾏﾝﾄﾞｾｯﾄ
			cmd_len += 3;															// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋３

			// 印字文字ｻｲｽﾞ
			s_data = fnt_size[i];													// 文字ｻｲｽﾞ設定ﾃﾞｰﾀ取得
			memcpy( &prn_work[cmd_len], &Pri_size_cmd[s_data][0], 9 );				// 文字ｻｲｽﾞ指定ｺﾏﾝﾄﾞｾｯﾄ
			cmd_len += 9;															// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋６

			// 印字文字ﾃﾞｰﾀ
			memcpy( &prn_work[cmd_len], pri_data[i], (size_t)data_cnt[i] );			// 文字ﾃﾞｰﾀｾｯﾄ
			cmd_len += data_cnt[i];													// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋文字ﾃﾞｰﾀ数

			prn_work[cmd_len] = LF;													// 改行ﾃﾞｰﾀｾｯﾄ
			cmd_len += 1;															// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋１

			PrnCmdLen( (uchar *)prn_work, cmd_len, pri_kind );						// 編集した印字ｺﾏﾝﾄﾞﾃﾞｰﾀを登録

			edit_cnt++;																// 編集行数＋１

		}

		// 文字ｻｲｽﾞ、改行量を初期状態へ戻す

		PrnCmdLen( &Pri_size_cmd[4][0], 9, pri_kind );

		if( pri_kind == R_PRI ){
			p_proc_data = (PRN_PROC_DATA *)&rct_proc_data;							// ﾚｼｰﾄ編集処理制御ﾃﾞｰﾀﾎﾟｲﾝﾀｾｯﾄ
		}
		else{
			p_proc_data = (PRN_PROC_DATA *)&jnl_proc_data;							// ｼﾞｬｰﾅﾙ編集処理制御ﾃﾞｰﾀﾎﾟｲﾝﾀｾｯﾄ
		}
		p_proc_data->Font_size		= FONT_A_NML;
		p_proc_data->Kanji_size		= FONT_K_NML;
		p_proc_data->Kaigyou_size	= 0x1c;

	}

	if( R_PRI == pri_kind )
		inc_dct( MOV_PRNT_CNT, (short)edit_cnt );									// 「ﾚｼｰﾄﾌﾟﾘﾝﾀ印字行数」動作ｶｳﾝﾄ
	else
		inc_dct( MOV_JPNT_CNT, (short)edit_cnt );									// 「ｼﾞｬｰﾅﾙﾌﾟﾘﾝﾀ印字行数」動作ｶｳﾝﾄ

	return( edit_cnt );
}

// 仕様変更(S) K.Onodera 2016/10/31 #1531 領収証フッターを印字する
/*[]------------------------------------------------------------------------[]*/
/*| 過払いフッター印字編集関数												 |*/
/*[]------------------------------------------------------------------------[]*/
/*| MODULE NAME  : Prn_edit_Kbr_Ftr_edit                                     |*/
/*| PARAMETER    :                                                           |*/
/*| RETURN VALUE : void                                                      |*/
/*[]------------------------------------------------------------------------[]*/
/*| Author       : K.Onodera		                                         |*/
/*| Date         : 2016-10-31                                                |*/
/*[]------------------------------------------------------------------------[]*/
uchar	Prn_edit_KbrFtr_edit( uchar pri_kind, ushort kind )
{
	uchar			edit_cnt = 0;				// 編集行数
	uchar			gyou_cnt;					// 行数
	uchar			fnt_size[KBR_FTR_GYO_MAX];	// 文字ｻｲｽﾞ（ﾍｯﾀﾞｰ行数分）
	uchar			pri_posi[KBR_FTR_GYO_MAX];	// 印字位置（ﾍｯﾀﾞｰ行数分）
	uchar			data_cnt[KBR_FTR_GYO_MAX];	// 文字数（ﾍｯﾀﾞｰ行数分）
	uchar			*pri_data[KBR_FTR_GYO_MAX];	// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰ（ﾍｯﾀﾞｰ行数分）
	uchar			s_data;						// 設定ﾃﾞｰﾀﾜｰｸ
	uchar			i;							// 処理ﾙｰﾌﾟｶｳﾝﾀｰ
	ushort			cmd_len;					// 送信ｺﾏﾝﾄﾞﾃﾞｰﾀﾚﾝｸﾞｽ
	ushort			adr = 0;
	ulong			Rsts = 0;
	PRN_PROC_DATA	*p_proc_data;				// 編集処理制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ

	memset ( fnt_size, 0, KBR_FTR_GYO_MAX );
	memset ( pri_posi, 0, KBR_FTR_GYO_MAX );
	memset ( data_cnt, 0, KBR_FTR_GYO_MAX );

	// 過払い媒体
	switch( kind ){
		// クレジット
		case 1:
			if(( CreKbrFtr_Rsts != 0 ) && (_FLT_RtnKind(CreKbrFtr_Rsts) != FLT_NODATA) ){
				// ﾌｯﾀｰ印字ﾃﾞｰﾀが正常に読込まれていない場合
				return( edit_cnt );
			}
			Rsts = CreKbrFtr_Rsts;
			adr = 51;
			break;
		// 電子マネー
		case 2:
			if(( EpayKbrFtr_Rsts != 0 ) && (_FLT_RtnKind(EpayKbrFtr_Rsts) != FLT_NODATA) ){
				// ﾌｯﾀｰ印字ﾃﾞｰﾀが正常に読込まれていない場合
				return( edit_cnt );
			}
			Rsts = EpayKbrFtr_Rsts;
			adr = 56;
			break;
		default:
			return( edit_cnt );
	}

// 不具合修正(S) K.Onodera 2016/11/17 #1569 後日精算フッターが正常に印字されない
//	gyou_cnt = (uchar)prm_get( COM_PRM, S_PRN, adr, 2, 1 );				// 「ﾌｯﾀｰ行数」設定ﾃﾞｰﾀ取得
//	adr++;
	if( _FLT_RtnKind(Rsts) == FLT_NODATA ){
		gyou_cnt = _countof( CreKabaraiFooter_Data_dflt );
	}else{
		gyou_cnt = (uchar)prm_get( COM_PRM, S_PRN, adr, 2, 1 );				// 「ﾌｯﾀｰ行数」設定ﾃﾞｰﾀ取得
		adr++;
	}
// 不具合修正(E) K.Onodera 2016/11/17 #1569 後日精算フッターが正常に印字されない

	if( gyou_cnt > KBR_FTR_GYO_MAX ){
		gyou_cnt = KBR_FTR_GYO_MAX;												// 不正ﾃﾞｰﾀの場合、Tﾌｯﾀｰ最大行数とする
	}

	for( i=0 ; i<gyou_cnt ;i++ ){

// 不具合修正(S) K.Onodera 2016/11/17 #1569 後日精算フッターが正常に印字されない
//		fnt_size[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(adr+i), 1, 4 );	// 「文字ｻｲｽﾞ」設定ﾃﾞｰﾀ取得
//		if( fnt_size[i] > 3 ){
//			fnt_size[i] = 0;													// 不正ﾃﾞｰﾀの場合、「標準」とする
//		}
//
//		pri_posi[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(adr+i), 1, 3 );	// 「印字位置」設定ﾃﾞｰﾀ取得
//		if( pri_posi[i] > 2 ){
//			pri_posi[i] = 0;													// 不正ﾃﾞｰﾀの場合、「左揃え」とする
//		}
//
//		data_cnt[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(adr+i), 2, 1 );	// 「文字数」設定ﾃﾞｰﾀ取得
//		if( data_cnt[i] > FONTA_MAX_COL ){
//			data_cnt[i] = FONTA_MAX_COL;										// 不正ﾃﾞｰﾀの場合、ﾌｫﾝﾄＡ最大文字数（３６文字）とする
//		}
//
//		// 過払い媒体
//		switch( kind ){
//			// クレジット
//			case 1:
//				if (_FLT_RtnKind(CreKbrFtr_Rsts) == FLT_NODATA) {				// 未登録なら初期値
//					pri_data[i] = (uchar *)&CreKabaraiFooter_Data_dflt[i][0];	// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
//				}else{
//					pri_data[i] = (uchar *)&CreKbrFtr_Data[i][0];				// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
//				}
//				break;
//			// 電子マネー
//			case 2:
//				if (_FLT_RtnKind(EpayKbrFtr_Rsts) == FLT_NODATA) {				// 未登録なら初期値
//					pri_data[i] = (uchar *)&EpayKabaraiFooter_Data_dflt[i][0];	// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
//				}else{
//					pri_data[i] = (uchar *)&EpayKbrFtr_Data[i][0];				// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
//				}
//				break;
//			default:
//				// 関数入口でチェックしているため、ここには来ない
//				break;
//		}
		// データ未登録？
		if( _FLT_RtnKind(Rsts) == FLT_NODATA ){
			// デフォルトテーブルを使用する場合は設定を参照しない
			data_cnt[i] = FONTA_MAX_COL;		// 36文字
			switch( kind ){
				case 1:
					pri_data[i] = (uchar *)&CreKabaraiFooter_Data_dflt[i][0];		// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
					break;
				case 2:
					pri_data[i] = (uchar *)&EpayKabaraiFooter_Data_dflt[i][0];		// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
					break;
			}
		}
		// データ登録済み？
		else{
			fnt_size[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(adr+i), 1, 4 );	// 「文字ｻｲｽﾞ」設定ﾃﾞｰﾀ取得
			if( fnt_size[i] > 3 ){
				fnt_size[i] = 0;													// 不正ﾃﾞｰﾀの場合、「標準」とする
			}

			pri_posi[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(adr+i), 1, 3 );	// 「印字位置」設定ﾃﾞｰﾀ取得
			if( pri_posi[i] > 2 ){
				pri_posi[i] = 0;													// 不正ﾃﾞｰﾀの場合、「左揃え」とする
			}

			data_cnt[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(adr+i), 2, 1 );	// 「文字数」設定ﾃﾞｰﾀ取得
			if( data_cnt[i] > FONTA_MAX_COL ){
				data_cnt[i] = FONTA_MAX_COL;										// 不正ﾃﾞｰﾀの場合、ﾌｫﾝﾄＡ最大文字数（３６文字）とする
			}
			switch( kind ){
				case 1:
					pri_data[i] = (uchar *)&CreKbrFtr_Data[i][0];					// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
					break;
				case 2:
					pri_data[i] = (uchar *)&EpayKbrFtr_Data[i][0];					// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
					break;
			}
		}
// 不具合修正(E) K.Onodera 2016/11/17 #1569 後日精算フッターが正常に印字されない}
	}

	if( gyou_cnt != 0 ){															// 印字ﾃﾞｰﾀあり？
		for( i = 0 ; i < gyou_cnt ; i++ ){											// 設定されている行数分の印字ﾃﾞｰﾀをﾌﾟﾘﾝﾀ送信ﾊﾞｯﾌｧへ登録

			memset( prn_work, 0, sizeof(prn_work) );								// 印字ｺﾏﾝﾄﾞ編集ｴﾘｱ（prn_work）０ｸﾘｱ
			cmd_len = 0;															// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ０ｸﾘｱ

			// 印字位置
			s_data = pri_posi[i];													// 印字位置設定ﾃﾞｰﾀ取得
			memcpy( &prn_work[0], &Pri_posi_cmd[s_data][0], 3 );					// 印字位置指定ｺﾏﾝﾄﾞｾｯﾄ
			cmd_len += 3;															// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋３

			// 印字文字ｻｲｽﾞ
			s_data = fnt_size[i];													// 文字ｻｲｽﾞ設定ﾃﾞｰﾀ取得
			memcpy( &prn_work[cmd_len], &Pri_size_cmd[s_data][0], 9 );				// 文字ｻｲｽﾞ指定ｺﾏﾝﾄﾞｾｯﾄ
			cmd_len += 9;															// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋６

			// 印字文字ﾃﾞｰﾀ
			memcpy( &prn_work[cmd_len], pri_data[i], (size_t)data_cnt[i] );			// 文字ﾃﾞｰﾀｾｯﾄ
			cmd_len += data_cnt[i];													// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋文字ﾃﾞｰﾀ数

			prn_work[cmd_len] = LF;													// 改行ﾃﾞｰﾀｾｯﾄ
			cmd_len += 1;															// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋１

			PrnCmdLen( (uchar *)prn_work, cmd_len, pri_kind );						// 編集した印字ｺﾏﾝﾄﾞﾃﾞｰﾀを登録

			edit_cnt++;																// 編集行数＋１

		}

		// 文字ｻｲｽﾞ、改行量を初期状態へ戻す

		PrnCmdLen( &Pri_size_cmd[4][0], 9, pri_kind );

		if( pri_kind == R_PRI ){
			p_proc_data = (PRN_PROC_DATA *)&rct_proc_data;							// ﾚｼｰﾄ編集処理制御ﾃﾞｰﾀﾎﾟｲﾝﾀｾｯﾄ
		}
		else{
			p_proc_data = (PRN_PROC_DATA *)&jnl_proc_data;							// ｼﾞｬｰﾅﾙ編集処理制御ﾃﾞｰﾀﾎﾟｲﾝﾀｾｯﾄ
		}
		p_proc_data->Font_size		= FONT_A_NML;
		p_proc_data->Kanji_size		= FONT_K_NML;
		p_proc_data->Kaigyou_size	= 0x1c;

	}

	if( R_PRI == pri_kind )
		inc_dct( MOV_PRNT_CNT, (short)edit_cnt );									// 「ﾚｼｰﾄﾌﾟﾘﾝﾀ印字行数」動作ｶｳﾝﾄ
	else
		inc_dct( MOV_JPNT_CNT, (short)edit_cnt );									// 「ｼﾞｬｰﾅﾙﾌﾟﾘﾝﾀ印字行数」動作ｶｳﾝﾄ

	return( edit_cnt );
}
// 仕様変更(E) K.Onodera 2016/10/31 #1531 領収証フッターを印字する

// 仕様変更(S) K.Onodera 2016/11/08 後日支払額フッター
/*[]------------------------------------------------------------------------[]*/
/*| 後日精算フッター印字編集関数												 |*/
/*[]------------------------------------------------------------------------[]*/
/*| MODULE NAME  : Prn_edit_Kbr_Ftr_edit                                     |*/
/*| PARAMETER    :                                                           |*/
/*| RETURN VALUE : void                                                      |*/
/*[]------------------------------------------------------------------------[]*/
/*| Author       : K.Onodera		                                         |*/
/*| Date         : 2016-10-31                                                |*/
/*[]------------------------------------------------------------------------[]*/
uchar	Prn_edit_FutureFtr_edit( uchar pri_kind )
{
	uchar			edit_cnt = 0;				// 編集行数
	uchar			gyou_cnt;					// 行数
	uchar			fnt_size[KBR_FTR_GYO_MAX];	// 文字ｻｲｽﾞ（ﾍｯﾀﾞｰ行数分）
	uchar			pri_posi[KBR_FTR_GYO_MAX];	// 印字位置（ﾍｯﾀﾞｰ行数分）
	uchar			data_cnt[KBR_FTR_GYO_MAX];	// 文字数（ﾍｯﾀﾞｰ行数分）
	uchar			*pri_data[KBR_FTR_GYO_MAX];	// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰ（ﾍｯﾀﾞｰ行数分）
	uchar			s_data;						// 設定ﾃﾞｰﾀﾜｰｸ
	uchar			i;							// 処理ﾙｰﾌﾟｶｳﾝﾀｰ
	ushort			cmd_len;					// 送信ｺﾏﾝﾄﾞﾃﾞｰﾀﾚﾝｸﾞｽ
	PRN_PROC_DATA	*p_proc_data;				// 編集処理制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
	memset ( fnt_size, 0, KBR_FTR_GYO_MAX );
	memset ( pri_posi, 0, KBR_FTR_GYO_MAX );
	memset ( data_cnt, 0, KBR_FTR_GYO_MAX );

	if(( FutureFtr_Rsts != 0 ) && (_FLT_RtnKind(FutureFtr_Rsts) != FLT_NODATA) ){
		// ﾌｯﾀｰ印字ﾃﾞｰﾀが正常に読込まれていない場合
		return( edit_cnt );
	}

// 不具合修正(S) K.Onodera 2016/11/17 #1569 後日精算フッターが正常に印字されない
//	gyou_cnt = (uchar)prm_get( COM_PRM, S_PRN, 66, 2, 1 );						// 「ﾌｯﾀｰ行数」設定ﾃﾞｰﾀ取得
	if( _FLT_RtnKind(FutureFtr_Rsts) == FLT_NODATA ){
		gyou_cnt = _countof( FutureFooter_Data_dflt );
	}else{
		gyou_cnt = (uchar)prm_get( COM_PRM, S_PRN, 66, 2, 1 );						// 「ﾌｯﾀｰ行数」設定ﾃﾞｰﾀ取得
	}
// 不具合修正(E) K.Onodera 2016/11/17 #1569 後日精算フッターが正常に印字されない

	if( gyou_cnt > KBR_FTR_GYO_MAX ){
		gyou_cnt = KBR_FTR_GYO_MAX;												// 不正ﾃﾞｰﾀの場合、Tﾌｯﾀｰ最大行数とする
	}

	for( i=0 ; i<gyou_cnt ;i++ ){

// 不具合修正(S) K.Onodera 2016/11/17 #1569 後日精算フッターが正常に印字されない
//		fnt_size[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(67+i), 1, 4 );	// 「文字ｻｲｽﾞ」設定ﾃﾞｰﾀ取得
//		if( fnt_size[i] > 3 ){
//			fnt_size[i] = 0;													// 不正ﾃﾞｰﾀの場合、「標準」とする
//		}
//
//		pri_posi[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(67+i), 1, 3 );	// 「印字位置」設定ﾃﾞｰﾀ取得
//		if( pri_posi[i] > 2 ){
//			pri_posi[i] = 0;													// 不正ﾃﾞｰﾀの場合、「左揃え」とする
//		}
//
//		data_cnt[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(67+i), 2, 1 );	// 「文字数」設定ﾃﾞｰﾀ取得
//		if( data_cnt[i] > FONTA_MAX_COL ){
//			data_cnt[i] = FONTA_MAX_COL;										// 不正ﾃﾞｰﾀの場合、ﾌｫﾝﾄＡ最大文字数（３６文字）とする
//		}
//
//		if (_FLT_RtnKind(FutureFtr_Rsts) == FLT_NODATA) {							// 未登録なら初期値
//			pri_data[i] = (uchar *)&FutureFooter_Data_dflt[i][0];					// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
//		}else{
//			pri_data[i] = (uchar *)&FutureFtr_Data[i][0];							// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
//		}
		// データ未登録？
		if( _FLT_RtnKind(FutureFtr_Rsts) == FLT_NODATA ){
			// デフォルトテーブルを使用する場合は設定を参照しない
			data_cnt[i] = FONTA_MAX_COL;		// 36文字
			pri_data[i] = (uchar *)&FutureFooter_Data_dflt[i][0];					// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
		}
		// データ登録済み？
		else{
			fnt_size[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(67+i), 1, 4 );	// 「文字ｻｲｽﾞ」設定ﾃﾞｰﾀ取得
			if( fnt_size[i] > 3 ){
				fnt_size[i] = 0;													// 不正ﾃﾞｰﾀの場合、「標準」とする
			}

			pri_posi[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(67+i), 1, 3 );	// 「印字位置」設定ﾃﾞｰﾀ取得
			if( pri_posi[i] > 2 ){
				pri_posi[i] = 0;													// 不正ﾃﾞｰﾀの場合、「左揃え」とする
			}

			data_cnt[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(67+i), 2, 1 );	// 「文字数」設定ﾃﾞｰﾀ取得
			if( data_cnt[i] > FONTA_MAX_COL ){
				data_cnt[i] = FONTA_MAX_COL;										// 不正ﾃﾞｰﾀの場合、ﾌｫﾝﾄＡ最大文字数（３６文字）とする
			}

			pri_data[i] = (uchar *)&FutureFtr_Data[i][0];							// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
		}
// 不具合修正(E) K.Onodera 2016/11/17 #1569 後日精算フッターが正常に印字されない
	}

	if( gyou_cnt != 0 ){															// 印字ﾃﾞｰﾀあり？
		for( i = 0 ; i < gyou_cnt ; i++ ){											// 設定されている行数分の印字ﾃﾞｰﾀをﾌﾟﾘﾝﾀ送信ﾊﾞｯﾌｧへ登録

			memset( prn_work, 0, sizeof(prn_work) );								// 印字ｺﾏﾝﾄﾞ編集ｴﾘｱ（prn_work）０ｸﾘｱ
			cmd_len = 0;															// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ０ｸﾘｱ

			// 印字位置
			s_data = pri_posi[i];													// 印字位置設定ﾃﾞｰﾀ取得
			memcpy( &prn_work[0], &Pri_posi_cmd[s_data][0], 3 );					// 印字位置指定ｺﾏﾝﾄﾞｾｯﾄ
			cmd_len += 3;															// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋３

			// 印字文字ｻｲｽﾞ
			s_data = fnt_size[i];													// 文字ｻｲｽﾞ設定ﾃﾞｰﾀ取得
			memcpy( &prn_work[cmd_len], &Pri_size_cmd[s_data][0], 9 );				// 文字ｻｲｽﾞ指定ｺﾏﾝﾄﾞｾｯﾄ
			cmd_len += 9;															// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋６

			// 印字文字ﾃﾞｰﾀ
			memcpy( &prn_work[cmd_len], pri_data[i], (size_t)data_cnt[i] );			// 文字ﾃﾞｰﾀｾｯﾄ
			cmd_len += data_cnt[i];													// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋文字ﾃﾞｰﾀ数

			prn_work[cmd_len] = LF;													// 改行ﾃﾞｰﾀｾｯﾄ
			cmd_len += 1;															// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋１

			PrnCmdLen( (uchar *)prn_work, cmd_len, pri_kind );						// 編集した印字ｺﾏﾝﾄﾞﾃﾞｰﾀを登録

			edit_cnt++;																// 編集行数＋１

		}

		// 文字ｻｲｽﾞ、改行量を初期状態へ戻す

		PrnCmdLen( &Pri_size_cmd[4][0], 9, pri_kind );

		if( pri_kind == R_PRI ){
			p_proc_data = (PRN_PROC_DATA *)&rct_proc_data;							// ﾚｼｰﾄ編集処理制御ﾃﾞｰﾀﾎﾟｲﾝﾀｾｯﾄ
		}
		else{
			p_proc_data = (PRN_PROC_DATA *)&jnl_proc_data;							// ｼﾞｬｰﾅﾙ編集処理制御ﾃﾞｰﾀﾎﾟｲﾝﾀｾｯﾄ
		}
		p_proc_data->Font_size		= FONT_A_NML;
		p_proc_data->Kanji_size		= FONT_K_NML;
		p_proc_data->Kaigyou_size	= 0x1c;

	}

	if( R_PRI == pri_kind )
		inc_dct( MOV_PRNT_CNT, (short)edit_cnt );									// 「ﾚｼｰﾄﾌﾟﾘﾝﾀ印字行数」動作ｶｳﾝﾄ
	else
		inc_dct( MOV_JPNT_CNT, (short)edit_cnt );									// 「ｼﾞｬｰﾅﾙﾌﾟﾘﾝﾀ印字行数」動作ｶｳﾝﾄ

	return( edit_cnt );
}
// 仕様変更(E) K.Onodera 2016/11/08 後日支払額フッター

/*[]------------------------------------------------------------------------[]*/
/*| 料金設定通信ログ印字編集												 |*/
/*[]------------------------------------------------------------------------[]*/
/*| MODULE NAME  : PrnRrokin_Setlog_edit                                     |*/
/*| PARAMETER    :                                                           |*/
/*| RETURN VALUE : void                                                      |*/
/*[]------------------------------------------------------------------------[]*/
/*| Author       : sugata   		                                         |*/
/*| Date         : 2009-10-14                                                |*/
/*[]------------------------------------------------------------------------[]*/
void PrnRrokin_Setlog_edit( T_FrmLogPriReq2 *msg_data, 	uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	uchar	edit_cnt = 0;		// 編集行数
	ushort	n_dat, n_min;		// 日付・時刻ノーマライズ値
	uchar	edit_flg = YES;		// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）
	uchar	edit_pos = OFF;		// 印字ﾃﾞｰﾀ編集位置（OFF：左側／ON：右側）
	ushort	Sdate;				// 検索開始日
	ushort	Edate;				// 検索終了日
	
	/* 退避用エリア */
//	p_proc_data->Prn_no					// 表題印字ﾌﾗｸﾞ / 検索件数
//	p_proc_data->Prn_no_data1			// 印字中のログの日付
//	p_proc_data->Prn_no_data2			// 印字中のログの時刻
//	p_proc_data->Log_Sdate				// 検索開始日
//	p_proc_data->Log_Edate				// 検索終了日
//	p_proc_data->Log_DataPt				// 次印字するログのアドレス
	
	if(p_proc_data->Prn_no == 0){
		/*表題印字*/
		PCMD_CENTER( pri_kind );				// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnFontSize( FONT_A_YOKOBAI, pri_kind );			// ﾌｫﾝﾄ指定
		PrnFontSize( FONT_K_YOKOBAI, pri_kind );
		PrnStr( "遠隔設定プリント", pri_kind );			// 表題印字ﾃﾞｰﾀ登録

		Prn_edit_space(pri_kind);								//空白一行

		/*機械情報印字*/
		KikaiNoSet(cEditwk1,msg_data->Kikai_no);				//機械No
		PCMD_LEFT(pri_kind);									//位置揃え(左)
		PrnFontSize(FONT_A_NML,pri_kind);						//フォントA(通常)指定
		PrnFontSize(FONT_K_NML,pri_kind);						//漢字指定
		PrnStr(cEditwk1,pri_kind);								//印字登録
		
		/*発行時刻*/
		Prn_edit_NowDate( cEditwk1 );							// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER(pri_kind);									//位置揃え(中央)
		PrnFontSize(FONT_A_NML,pri_kind);						//フォントA指定
		PrnFontSize(FONT_K_NML,pri_kind);						//漢字指定
		PrnStr(cEditwk1,pri_kind);								//印字登録
		memset(cEditwk1, 0, sizeof(cEditwk1));
		switch( msg_data->BType ){	// 検索方法？
			case	0:	// 全て
				sprintf(										// cEditwk1←検索方法印字ﾃﾞｰﾀ
							cEditwk1,
							"全て(%d件)",
							msg_data->LogCount
						);
				break;
			case	1:	// 日付指定
				//	指定日ﾁｪｯｸ
				if( OK == DateChk( (date_time_rec *)&msg_data->TSttTime ) ){
					// 指定日が正常な場合
					Sdate = dnrmlzm(							// 指定日ﾃﾞｰﾀ取得
										(short)msg_data->TSttTime.Year,
										(short)msg_data->TSttTime.Mon,
										(short)msg_data->TSttTime.Day
									);
					Edate = Sdate;							// 検索開始日＝検索終了日
					p_proc_data->Log_Sdate = Sdate;			// 指定日ﾃﾞｰﾀｾｰﾌﾞ
					p_proc_data->Log_Edate = Edate;			// 検索終了日ﾃﾞｰﾀｾｰﾌﾞ
					sprintf(									// cEditwk1←検索方法印字ﾃﾞｰﾀ
								cEditwk1,
								"%04d/%d/%d分",
								msg_data->TSttTime.Year,
								msg_data->TSttTime.Mon,
								msg_data->TSttTime.Day
							);
				}
				else{
					// 指定日が異常な場合
					Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
					edit_flg = NO;;								// 編集終了
				}
				break;
			default:	// その他（検索方法指定ｴﾗｰ）
				Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
				edit_flg = NO;									// 編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
				break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
		}
		/*------	＜検索方法＞編集	------*/
		if(edit_flg != NO){
			PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
			PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録
			Prn_edit_space(pri_kind);								//空白一行
		}
		p_proc_data->Prn_no = 1;							// 表題印字済み
		p_proc_data->Log_DataPt = 0;
		p_proc_data->Log_Count = Ope_Log_TotalCountGet( eLOG_REMOTE_SET );		// 登録件数set
	}
	else {
		for( ; ; ){
			if(0 == Ope_Log_1DataGet( eLOG_REMOTE_SET, p_proc_data->Log_DataPt, (void *)&Pri_Work[0].Change_data ) ){
				// データが取得エラーの場合は印字しない
				p_proc_data->Log_Count = 0;
				break;
			}
			n_dat = dnrmlzm((short)Pri_Work[0].Change_data.rcv_Time.Year,			// ログの日付取得
							(short)Pri_Work[0].Change_data.rcv_Time.Mon,
							(short)Pri_Work[0].Change_data.rcv_Time.Day);
			n_min = tnrmlz(0, 0, (short)Pri_Work[0].Change_data.rcv_Time.Hour,		// ログの時刻取得
								 (short)Pri_Work[0].Change_data.rcv_Time.Min);
			if( msg_data->BType == 0 ||														// ｢全て｣指定
				(n_dat >= p_proc_data->Log_Sdate && n_dat <= p_proc_data->Log_Edate)){		// ログの日付が指定日付以内
				if( n_dat != p_proc_data->Prn_no_data1 ||
					n_min != p_proc_data->Prn_no_data2 ){										// 時刻比較
					/* 受信日時を印字する */
					if( edit_pos == ON ){								// 左側に印字するﾃﾞｰﾀあり？
						//	左側に印字するﾃﾞｰﾀがある場合
						edit_pos = OFF;									// 編集位置更新（次の編集位置を左側にする）
						PCMD_LEFT( pri_kind );							// [位置揃え(左揃え)]
						PrnFontSize( FONT_A_NML, pri_kind );			// ﾌｫﾝﾄＡ（通常）指定
						PrnFontSize( FONT_K_NML, pri_kind );			// 漢字（通常）指定
						PrnStr( prn_work, pri_kind );					// 編集済みの印字ﾃﾞｰﾀ登録
						edit_cnt++;										// 編集行数＋１
						if( edit_cnt >= EDIT_GYOU_MAX ){					// 編集最大行数ﾁｪｯｸ
							break;											// →ｾｯｼｮﾝ毎の編集処理ﾙｰﾌﾟを抜ける
						}
					}
					PCMD_LEFT( pri_kind );								// [位置揃え(左揃え)]
					Prn_edit_Date(cEditwk1,&Pri_Work[0].Change_data.rcv_Time);				//時刻データ
					PrnFontSize(FONT_A_NML,pri_kind);						//フォントA指定
					PrnFontSize(FONT_K_NML,pri_kind);						//漢字指定
					PrnStr(cEditwk1,pri_kind);								//印字登録
					edit_cnt++;											// 編集行数＋１

		 			p_proc_data->Prn_no_data1 = n_dat;					// 時刻データ退避
		 			p_proc_data->Prn_no_data2 = n_min;					// 
					if( edit_cnt >= EDIT_GYOU_MAX ){					// 編集最大行数ﾁｪｯｸ
						break;											// →ｾｯｼｮﾝ毎の編集処理ﾙｰﾌﾟを抜ける
					}
				}
				SETTEI_edit_data(									// 設定ﾃﾞｰﾀを印字編集ｴﾘｱ（prn_work）へ登録
									Pri_Work[0].Change_data.addr,
									(ulong)Pri_Work[0].Change_data.rcv_data,
									edit_pos,
									0
								);

				if( edit_pos == OFF ){								// 編集位置？
					//	左側に編集した場合
					edit_pos = ON;									// 編集位置更新（次の編集位置を右側にする）
				}
				else{
					//	右側に編集した場合
					edit_pos = OFF;									// 編集位置更新（次の編集位置を左側にする）
					PCMD_LEFT( pri_kind );							// [位置揃え(左揃え)]
					PrnFontSize( FONT_A_NML, pri_kind );			// ﾌｫﾝﾄＡ（通常）指定
					PrnFontSize( FONT_K_NML, pri_kind );			// 漢字（通常）指定
					PrnStr( prn_work, pri_kind );					// 編集した印字ﾃﾞｰﾀ登録
					edit_cnt++;										// 編集行数＋１
				}
			}
			
			p_proc_data->Log_DataPt++;												// ｱﾄﾞﾚｽ番号＋１
			if( p_proc_data->Log_DataPt >= p_proc_data->Log_Count ){								// ログ件数分検索終了？

				//	ｾｯｼｮﾝ毎の最終ｱﾄﾞﾚｽまで編集終了した場合

				if( edit_pos == ON ){								// 左側に印字するﾃﾞｰﾀあり？
					//	左側に印字するﾃﾞｰﾀがある場合
					edit_pos = OFF;									// 編集位置更新（次の編集位置を左側にする）
					PCMD_LEFT( pri_kind );							// [位置揃え(左揃え)]
					PrnFontSize( FONT_A_NML, pri_kind );			// ﾌｫﾝﾄＡ（通常）指定
					PrnFontSize( FONT_K_NML, pri_kind );			// 漢字（通常）指定
					PrnStr( prn_work, pri_kind );					// 編集済みの印字ﾃﾞｰﾀ登録
					edit_cnt++;										// 編集行数＋１
				}
				break;												// →ｾｯｼｮﾝ毎の編集処理ﾙｰﾌﾟを抜ける
			}
			else{
				//	最後まで編集終了していない場合

				if( edit_cnt >= EDIT_GYOU_MAX ){					// 編集最大行数ﾁｪｯｸ
					break;											// →ｾｯｼｮﾝ毎の編集処理ﾙｰﾌﾟを抜ける
				}
			}
		}
	}
	if( p_proc_data->Log_DataPt >= p_proc_data->Log_Count ){								// ログ件数分検索終了？
		p_proc_data->Final = ON;								// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
}
#if (5 == AUTO_PAYMENT_PROGRAM)
void Pri_mc10_Editdata(uchar sys, uchar carkind, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	char			temp[36];			// temp
	uchar			i,j,flg = 0;
	CHARGE_TYPE		charge_type;		// 料金帯データ(昼夜帯)
	uchar	edit_cnt = 0;		// 編集行数

	PCMD_LEFT( pri_kind );							// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );			// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );			// 漢字（通常）指定
	
	memset(&charge_type, 0, sizeof(charge_type));
	if(p_proc_data->Prn_no == AUTO_PAYMENT_CHARGE_PRINT ){
		// 料金帯データ取得
		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		sprintf(cEditwk1, "［第%d料金体系］", sys+1);
		sprintf(cEditwk2, "使用有無　%d", max_bnd[sys]);
		Str_Set1(								// -----印字ﾃﾞｰﾀ編集-----
					cEditwk1,					// 文字列１：料金設定名称
					cEditwk2,					// 文字列２：料金設定値
					pri_kind					// 印字先ﾌﾟﾘﾝﾀ
				);
		memset(cEditwk1, 0, sizeof(cEditwk1));
		memset(cEditwk2, 0, sizeof(cEditwk2));
		memset(temp, 0, sizeof(temp));
		sprintf(cEditwk1, "　　　　　開始  基時  追時  重  重時");
		PrnStr(cEditwk1, pri_kind);
		for(i=0; i<6; i++){
			Pri_mc10_GetTypeData_Time(sys, i, &charge_type);
			sprintf(cEditwk1, "第%d料金帯 %02d:%02d %02d:%02d %02d:%02d %d　%02d:%02d",
				i+1,
				charge_type.start_time[HOUR], charge_type.start_time[MIN],
				charge_type.base_time[HOUR], charge_type.base_time[MIN],
				charge_type.add_time[HOUR], charge_type.add_time[MIN],
				charge_type.repeat_sys,charge_type.repeat_time[HOUR], charge_type.repeat_time[MIN]);
			PrnStr(cEditwk1, pri_kind);
		}
		memset(cEditwk1, 0, sizeof(cEditwk1));
		sprintf(cEditwk1, " [第1] [第2] [第3] [第4] [第5] [第6]");
		PrnStr(cEditwk1, pri_kind);
		p_proc_data->Prn_no++;				// 料金の印字へ
	}
	else if(p_proc_data->Prn_no == (AUTO_PAYMENT_CHARGE_PRINT+1) ){
		flg = (uchar)p_proc_data->Prn_no_wk[0];
		for( i = carkind; i < 12 ; ){				// 料金種別
			memset(temp, 0, sizeof(temp));
			for(j = 0; j < 6; j++){				// 料金帯
				Pri_mc10_GetTypeData_Ryokin(sys, j, i, &charge_type);
				memset(cEditwk1, 0, sizeof(cEditwk1));
				if(flg == 0){
					if(j == 0){
						sprintf(temp, "%s", PkKukaku_Prn[i+1]);
						sprintf(cEditwk1, "%05ld", charge_type.base_charge);			// 基本料金
					}
					else{
						sprintf(cEditwk1, " %05ld", charge_type.base_charge);			// 基本料金
					}
					strcat(temp, cEditwk1);
				}
				else {
					sprintf(cEditwk1, " %05ld", charge_type.add_charge);			// 追加料金
					strcat(temp, cEditwk1);
				}
			}
			PrnStr(temp, pri_kind);
			edit_cnt++;
			if(flg == 0){
				flg = 1;
			}
			else {
				i++;
				flg = 0;
			}
			if(edit_cnt >= EDIT_GYOU_MAX){
				p_proc_data->Prn_no_data1 = i;
				p_proc_data->Prn_no_wk[0] = flg;
				break;
			}
		}
		if( i >= 12 ){
			p_proc_data->Prn_no_data2 = 0;
			p_proc_data->Prn_no_data1 = 0;
			p_proc_data->Prn_no_wk[0] = 0;
			p_proc_data->Prn_no++;			// 印字終了
		}
	}
	
}
void Pri_mc10_GetTypeData_Time(uchar sys, uchar type, CHARGE_TYPE *chargetype)
{
	// 開始時刻
	chargetype->start_time[HOUR] = (uchar)(bnd_strt[sys][type]/60);
	chargetype->start_time[MIN] = (uchar)(bnd_strt[sys][type]%60);
	// 基本時間
	chargetype->base_time[HOUR] = (uchar)(leng_std[sys][type]/60);
	chargetype->base_time[MIN] 	= (uchar)(leng_std[sys][type]%60);
	// 追加時間
	chargetype->add_time[HOUR] 	= (uchar)(leng_exp[sys][type]/60);
	chargetype->add_time[MIN]  	= (uchar)(leng_exp[sys][type]%60);
	// 重複方式
	chargetype->repeat_sys 	 	= (uchar)ovl_type[sys][type];
	// 重複時間
	chargetype->repeat_time[HOUR] = (uchar)(ovl_time[sys][type]/60);
	chargetype->repeat_time[MIN]  = (uchar)(ovl_time[sys][type]%60);
}
	
void Pri_mc10_GetTypeData_Ryokin(uchar sys, uchar type, uchar carkind, CHARGE_TYPE *chargetype)
{
	// 基本料金
	chargetype->base_charge = fee_std[sys][carkind][type];
	// 追加料金
	chargetype->add_charge = fee_exp[sys][carkind][type];
}
#endif
//[]----------------------------------------------------------------------[]
///	@brief			工場検査用印字処理
//[]----------------------------------------------------------------------[]
///	@param[in]		msg_data		: 印字データ
///	@param[in]		pri_kind		: 印字先
///	@param[in]		p_proc_data		: 印字制御
///	@return			void
//[]----------------------------------------------------------------------[]
///	@author			sugata
///	@date			Create	: 2011/02/21<br>
//[]------------------------------------- Copyright(C) 2008 AMANO Corp.---[]
enum{
	Prin_Title = 0,		// タイトル
	PARK_NO,			// 駐車場№
	JARNAL,				// ｼﾞｬｰﾅﾙ設定
	NOTE,				// 紙幣リーダー設定
	INCOUNT,			// 入出庫判定
	N_MAX,				// ｎ時間最大
	TOKUBET,			// 特別日
	
	//↑新規追加はここより上
	CHK_MAX,			// 項目数
};
const char	*Chk_Title[] =
	{
		"工場確認プリント",
		"MAF接続枚数",
		" ",
		" ",
		"ジャーナルプリンタ",
		"紙幣リーダー満杯予告",
		"領収証発行",
		"入庫判定時間",
		" ",
		"n時間最大",
		"特別日",
		"基本駐車場No.",
	};
const char	*Chk_Koumoku_Incount[] =
	{
		"　フラップ装置",
		"　ロック装置",
	};
const char	*Chk_Koumoku_N_Max[] =
	{
		"　単位時間切捨て",
		"　定期帯後のｎ時間ﾘｾｯﾄ",
	};
const char	*Chk_Koumoku_Tokubet[] =
	{
		"　特別期間%d",
		"　特別日%d",
		"　ハッピーマンデー%d",
		"　特別曜日%d",
		"　5/6を特別日とする(自動)",
		"　特別年月日%d",
	};
const char	*Settei[] = 
	{
		"なし",
		"あり",
		"親機",
		"レシート",
		"駐車券",
		"継続",
		"切捨て",
		"ｼﾌﾄあり",
		"ｼﾌﾄなし",
		"する",
		"しない",
	};
const char *ChkBox = {"  □"};
void PrnSettei_Chk_edit(T_FrmAnyData *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	uchar	edit_cnt = 0;		// 編集行数
	ushort	i, set_wk1,  pri_no_wk, pri_no_wk2;
	ushort	set_wk2[5];
	ulong	set_wk3[3];

	pri_no_wk = p_proc_data->Prn_no_data1;
	pri_no_wk2 = p_proc_data->Prn_no_data2;
	memset( cEditwk1,0,sizeof(cEditwk1) );
	memset( cEditwk2,0,sizeof(cEditwk2) );
	if(p_proc_data->Prn_no == 0){
		PCMD_CENTER( pri_kind );				// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnFontSize( FONT_A_YOKOBAI, pri_kind );			// ﾌｫﾝﾄ指定
		PrnFontSize( FONT_K_YOKOBAI, pri_kind );
		PrnStr( Chk_Title[0], pri_kind );			// 表題印字ﾃﾞｰﾀ登録

		Prn_edit_space(pri_kind);								//空白一行

		/*機械情報印字*/
		KikaiNoSet(cEditwk1,msg_data->Kikai_no);				//機械No
		PCMD_LEFT(pri_kind);									//位置揃え(左)
		PrnFontSize(FONT_A_NML,pri_kind);						//フォントA(通常)指定
		PrnFontSize(FONT_K_NML,pri_kind);						//漢字指定
		PrnStr(cEditwk1,pri_kind);								//印字登録
		
		/*発行時刻*/
		Prn_edit_NowDate( cEditwk1 );							// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER(pri_kind);									//位置揃え(中央)
		PrnFontSize(FONT_A_NML,pri_kind);						//フォントA指定
		PrnFontSize(FONT_K_NML,pri_kind);						//漢字指定
		PrnStr(cEditwk1,pri_kind);								//印字登録
		p_proc_data->Prn_no++;
	}
	switch(p_proc_data->Prn_no){
		case PARK_NO:
			strcpy(cEditwk1, Chk_Title[11]);						// "基本駐車場№"
			set_wk3[0] = CPrmSS[S_SYS][1];
			sprintf(cEditwk2, "%ld", set_wk3[0]);
			strcat(cEditwk2, ChkBox);								// "  □"
			Str_Set1(cEditwk1, cEditwk2, pri_kind);
			p_proc_data->Prn_no++;
			break;
		case JARNAL:
			/* 表題｢ジャーナルプリンタ｣印字 */
			strcpy(cEditwk1, Chk_Title[4]);					// "ジャーナルプリンタ"
			set_wk1 = (ushort)prm_get(COM_PRM, S_PAY, 21, 1, 1);
			if(set_wk1 == 0){
				strcpy(cEditwk2, Settei[0]);				// なし
			}
			else if(set_wk1 == 1){
				strcpy(cEditwk2, Settei[1]);				// あり
			}
			strcat(cEditwk2, ChkBox);								// "  □"
			Str_Set1(cEditwk1, cEditwk2, pri_kind);
			p_proc_data->Prn_no++;
			break;
		case NOTE:
			strcpy(cEditwk1, Chk_Title[5]);					// "紙幣リーダー満杯予告"
			set_wk1 = (ushort)CPrmSS[S_MON][28];
			sprintf(cEditwk2, "%d枚", set_wk1);
			strcat(cEditwk2, ChkBox);								// "  □"
			Str_Set1(cEditwk1, cEditwk2, pri_kind);
			/* FT4800ではここで仕切り線を入れる */
			Prn_edit_space(pri_kind);								// 空白一行
			PrnStr(SikiriLine_Prn[1],pri_kind);						// 仕切り行
			p_proc_data->Prn_no++;
			break;
		case INCOUNT:
			PCMD_LEFT(pri_kind);									//位置揃え(左)
			PrnStr(Chk_Title[7],pri_kind);							//印字登録("入庫判定時間")
			
			set_wk1 = (ushort)prm_get(COM_PRM, S_TYP, 47, 3, 4);
			strcpy(cEditwk1, Chk_Koumoku_Incount[0]);					// "フラップ装置"
			sprintf(cEditwk2,"%d秒",set_wk1);
			strcat(cEditwk2, ChkBox);								// "  □"
			Str_Set1(cEditwk1, cEditwk2, pri_kind);
			
		
			set_wk1 = (ushort)prm_get(COM_PRM, S_TYP, 47, 3, 1);
			strcpy(cEditwk1, Chk_Koumoku_Incount[1]);					// "ロック装置"
			sprintf(cEditwk2,"%d秒",set_wk1);
			strcat(cEditwk2, ChkBox);								// "  □"
			Str_Set1(cEditwk1, cEditwk2, pri_kind);
			p_proc_data->Prn_no++;
			break;
		case N_MAX:
			PCMD_LEFT(pri_kind);									//位置揃え(左)
			PrnStr(Chk_Title[9],pri_kind);							//印字登録("n時間最大")
			
			strcpy(cEditwk1, Chk_Koumoku_N_Max[0]);					// 単位時間切捨て
			set_wk1 = (ushort)prm_get(COM_PRM, S_CAL, 39, 1, 4);
			if(set_wk1 == 0){
				strcpy(cEditwk2, Settei[5]);						// 継続
			}
			else if(set_wk1 == 1){
				strcpy(cEditwk2, Settei[6]);						// 切捨て
			}
			strcat(cEditwk2, ChkBox);								// "  □"
			Str_Set1(cEditwk1, cEditwk2, pri_kind);
			
		
			strcpy(cEditwk1, Chk_Koumoku_N_Max[1]);					// 定期帯後のｎ時間ﾘｾｯﾄ
			set_wk1 = (ushort)prm_get(COM_PRM, S_CAL, 39, 1, 1);
			if(set_wk1 == 0){
				strcpy(cEditwk2, Settei[0]);						// なし
			}
			else if(set_wk1 == 1){
				strcpy(cEditwk2, Settei[1]);						// あり
			}
			strcat(cEditwk2, ChkBox);								// "  □"
			Str_Set1(cEditwk1, cEditwk2, pri_kind);
			p_proc_data->Prn_no++;
			break;
		case TOKUBET:										// 特別日設定
			if(pri_no_wk == 0){
				PCMD_LEFT(pri_kind);									//位置揃え(左)
				PrnStr(Chk_Title[10],pri_kind);							//印字登録("特別日")
				edit_cnt++;				
			}
			switch(pri_no_wk){
				case 0:
					/* 特別期間印字 */
					for(i=0; i<SP_RANGE_MAX; i++){
						memset( cEditwk1,0,sizeof(cEditwk1) );
						memset( cEditwk2,0,sizeof(cEditwk2) );
						sprintf(cEditwk1, Chk_Koumoku_Tokubet[0], i+1);
						set_wk2[0] = (ushort)prm_get(COM_PRM, S_TOK, (short)(1+(i*2)), 2, 3);
						set_wk2[1] = (ushort)prm_get(COM_PRM, S_TOK, (short)(1+(i*2)), 2, 1);
						set_wk2[2] = (ushort)prm_get(COM_PRM, S_TOK, (short)(2+(i*2)), 2, 3);
						set_wk2[3] = (ushort)prm_get(COM_PRM, S_TOK, (short)(2+(i*2)), 2, 1);
						if(set_wk2[0] != 0 && set_wk2[1] != 0 && set_wk2[2] != 0 && set_wk2[3] != 0){
							sprintf(cEditwk2, "%02d/%02d～%02d/%02d", set_wk2[0], set_wk2[1], set_wk2[2], set_wk2[3]);
						}
						else{
							/* 設定無しは印字しない */
							continue;
						}
						strcat(cEditwk2, ChkBox);								// "  □"
						Str_Set1(cEditwk1, cEditwk2, pri_kind);
						edit_cnt++;
					}
					pri_no_wk++;
					break;
				case 1:
					/* 特別日印字 */
					for(i=pri_no_wk2; i<SP_DAY_MAX; i++){
						memset( cEditwk1,0,sizeof(cEditwk1) );
						memset( cEditwk2,0,sizeof(cEditwk2) );
						memset( cEditwk3,0,sizeof(cEditwk3) );
						sprintf(cEditwk1, Chk_Koumoku_Tokubet[1], i+1);
						set_wk2[0] = (ushort)prm_get(COM_PRM, S_TOK, (short)(9+i), 1, 6);
						set_wk2[1] = (ushort)prm_get(COM_PRM, S_TOK, (short)(9+i), 2, 3);
						set_wk2[2] = (ushort)prm_get(COM_PRM, S_TOK, (short)(9+i), 2, 1);
						if(set_wk2[1] != 0 && set_wk2[2] != 0){
							if(set_wk2[0] == 1){
								strcpy(cEditwk2, Settei[7]);					// ｼﾌﾄあり
							}
							else if(set_wk2[0] == 0){
								strcpy(cEditwk2, Settei[8]);					// ｼﾌﾄなし
							}
							sprintf(cEditwk3, "%02d/%02d", set_wk2[1], set_wk2[2]);
						}
						else{
							/* 設定無しは印字しない */
							continue;
						}
						strcat(cEditwk3, ChkBox);								// "  □"
						Str_Set2(cEditwk1, cEditwk2, ""  , cEditwk3, pri_kind);
						edit_cnt++;
						if(edit_cnt > EDIT_GYOU_MAX){
							pri_no_wk2 = i+1;
							break;
						}
					}
					if(i >=SP_DAY_MAX ){
						pri_no_wk++;
					}
					break;
				case 2:						// ハッピーマンデー
					if((prm_get( 0,S_TOK,(short)(41),1,1 )) == 1 ){
						for(i=0; i<SP_HAPPY_MAX; i++){
							memset( cEditwk1,0,sizeof(cEditwk1) );
							memset( cEditwk2,0,sizeof(cEditwk2) );
							sprintf(cEditwk1, Chk_Koumoku_Tokubet[2], i+1);
							if(i%2 == 0){
								set_wk2[0] = (ushort)prm_get(COM_PRM, S_TOK, (short)(42+(i/2)), 2, 5);
								set_wk2[1] = (ushort)prm_get(COM_PRM, S_TOK, (short)(42+(i/2)), 1, 4);
							}
							else{
								set_wk2[0] = (ushort)prm_get(COM_PRM, S_TOK, (short)(42+(i/2)), 2, 2);
								set_wk2[1] = (ushort)prm_get(COM_PRM, S_TOK, (short)(42+(i/2)), 1, 1);
							}
							if(set_wk2[0] != 0 && set_wk2[1] != 0){
								sprintf(cEditwk2, "%02d月%d週", set_wk2[0], set_wk2[1]);
							}
							else{
								/* 設定無しは印字しない */
								continue;
							}
							strcat(cEditwk2, ChkBox);								// "  □"
							Str_Set1(cEditwk1, cEditwk2, pri_kind);
							edit_cnt++;
						}
					}
					pri_no_wk++;
					break;
				case 3:						// 特別曜日
					if((prm_get( 0,S_TOK,(short)(41),1,1 )) == 0 ){
						for(i=0; i<SP_WEEK_MAX; i++){
							memset( cEditwk1,0,sizeof(cEditwk1) );
							memset( cEditwk2,0,sizeof(cEditwk2) );
							sprintf(cEditwk1, Chk_Koumoku_Tokubet[3], i+1);
							set_wk2[0] = (ushort)prm_get(COM_PRM, S_TOK, (short)(56+i), 2, 5);
							set_wk2[1] = (ushort)prm_get(COM_PRM, S_TOK, (short)(56+i), 1, 4);
							set_wk2[2] = (ushort)prm_get(COM_PRM, S_TOK, (short)(56+i), 1, 3);
							if(set_wk2[0] != 0 && set_wk2[1] != 0 && set_wk2[2] != 0){
								sprintf(cEditwk2, "%02d月%d週(%s)", set_wk2[0], set_wk2[1],Charge_Week[set_wk2[2]-1]);
							}
							else{
								/* 設定無しは印字しない */
								continue;
							}
							strcat(cEditwk2, ChkBox);								// "  □"
							Str_Set1(cEditwk1, cEditwk2, pri_kind);
							edit_cnt++;
						}
					}
					pri_no_wk++;
					break;
				case 4:
					/* 5/6を特別日にする */
					strcpy(cEditwk1, Chk_Koumoku_Tokubet[4]);					// 5/6を特別日にする
					set_wk1 = (ushort)prm_get(COM_PRM, S_TOK, 49, 1, 1);
					if(set_wk1 == 0){
						strcpy(cEditwk2, Settei[1]);					// あり
					}
					else if(set_wk1 == 1){
						strcpy(cEditwk2, Settei[0]);					// なし
					}
					strcat(cEditwk2, ChkBox);								// "  □"
					Str_Set1(cEditwk1, cEditwk2, pri_kind);
					edit_cnt++;
					/* 特別年月日 */
					for(i=0; i<SP_YAER_MAX; i++){											// 特別年月日
						memset( cEditwk1,0,sizeof(cEditwk1) );
						memset( cEditwk2,0,sizeof(cEditwk2) );
						sprintf(cEditwk1, Chk_Koumoku_Tokubet[5], i+1);
						set_wk2[0] = (ushort)prm_get(COM_PRM, S_TOK, (short)(50+i), 2, 5);
						set_wk2[1] = (ushort)prm_get(COM_PRM, S_TOK, (short)(50+i), 2, 3);
						set_wk2[2] = (ushort)prm_get(COM_PRM, S_TOK, (short)(50+i), 2, 1);
						if(set_wk2[0] != 0 && set_wk2[1] != 0 && set_wk2[2] != 0){
							sprintf(cEditwk2, "%02d/%02d/%02d", set_wk2[0], set_wk2[1], set_wk2[2]);
						}
						else{
							/* 設定無しは印字しない */
							continue;
						}
						strcat(cEditwk2, ChkBox);								// "  □"
						Str_Set1(cEditwk1, cEditwk2, pri_kind);
						edit_cnt++;
					}
					p_proc_data->Prn_no++;
					pri_no_wk++;
					break;
				default:
					break;
			}
			break;
		default:
			break;
	}
	p_proc_data->Prn_no_data1 = pri_no_wk;				// 特別日用データ退避
	p_proc_data->Prn_no_data2 = pri_no_wk2;				// 
	
	
	if(p_proc_data->Prn_no >= CHK_MAX){					// 最終項目まで印字完了
		p_proc_data->Final = ON;						// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
}
const char* Pri_FlpLoopTitle[] = {
	"フラップループデータ",
	"＜車室番号 %04ld＞",
	"ループカウント",
	"オフベースカウント",
	"オフレベルカウント",
	"オンベースカウント",
	"オンレベルカウント",
	"****",
};
void	PrnFlapLoopData_edit(T_FrmAnyData *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	ulong	ulData;
	ushort i;
	uchar	edit_cnt = 0;		// 編集行数
	
	if( p_proc_data->Prn_no == 0 ){
		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄ指定
		PrnFontSize( FONT_K_NML, pri_kind );
		PrnStr( Pri_FlpLoopTitle[0], pri_kind );				// 表題印字ﾃﾞｰﾀ登録

		Prn_edit_space(pri_kind);								//空白一行

		/*機械情報印字*/
		KikaiNoSet(cEditwk1,msg_data->Kikai_no);				//機械No
		PCMD_LEFT(pri_kind);									//位置揃え(左)
		PrnFontSize(FONT_A_NML,pri_kind);						//フォントA(通常)指定
		PrnFontSize(FONT_K_NML,pri_kind);						//漢字指定
		PrnStr(cEditwk1,pri_kind);								//印字登録
			
		/*発行時刻*/
		Prn_edit_NowDate( cEditwk1 );							// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER(pri_kind);									//位置揃え(中央)
		PrnFontSize(FONT_A_NML,pri_kind);						//フォントA指定
		PrnFontSize(FONT_K_NML,pri_kind);						//漢字指定
		PrnStr(cEditwk1,pri_kind);								//印字登録

		p_proc_data->Prn_no = INT_CAR_START_INDEX;				// 編集対象とするフラップNo.ｾｯﾄ
	}
	
	// 端末毎のループデータ印字
	for(i = p_proc_data->Prn_no; i < TOTAL_CAR_LOCK_MAX; ++i) {

		WACDOG;												// 装置ループの際はｳｫｯﾁﾄﾞｯｸﾘｾｯﾄ実行

		if(LockInfo[i].lok_syu != 0) {
			Prn_edit_space(pri_kind);						//空白一行
			
			PCMD_CENTER(pri_kind);							//位置揃え(中央)
			sprintf(cEditwk1, Pri_FlpLoopTitle[1], LockInfo[i].posi);
			PrnStr(cEditwk1,pri_kind);						//印字登録
			++edit_cnt;
			
			PCMD_LEFT(pri_kind);							//位置揃え(左)
			if(1 == HexAsc_to_LongBin_withCheck(IFM_LockTable.sSlave[LockInfo[i].if_oya - 1].tLoopCount.ucLoopCount, 4, &ulData)) {
				memcpy(cEditwk2, IFM_LockTable.sSlave[LockInfo[i].if_oya - 1].tLoopCount.ucLoopCount, 4);
				cEditwk2[4] = '\0';
			}
			else {
				strcpy(cEditwk2, Pri_FlpLoopTitle[7]);
			}
			Str_Set1(Pri_FlpLoopTitle[2], cEditwk2, pri_kind);
			++edit_cnt;

			if(1 == HexAsc_to_LongBin_withCheck(IFM_LockTable.sSlave[LockInfo[i].if_oya - 1].tLoopCount.ucOffBaseCount, 4, &ulData)) {
				memcpy(cEditwk2, IFM_LockTable.sSlave[LockInfo[i].if_oya - 1].tLoopCount.ucOffBaseCount, 4);
				cEditwk2[4] = '\0';
			}
			else {
				strcpy(cEditwk2, Pri_FlpLoopTitle[7]);
			}
			Str_Set1(Pri_FlpLoopTitle[3], cEditwk2, pri_kind);
			++edit_cnt;

			if(1 == HexAsc_to_LongBin_withCheck(IFM_LockTable.sSlave[LockInfo[i].if_oya - 1].tLoopCount.ucOffLevelCount, 4, &ulData)) {
				memcpy(cEditwk2, IFM_LockTable.sSlave[LockInfo[i].if_oya - 1].tLoopCount.ucOffLevelCount, 4);
				cEditwk2[4] = '\0';
			}
			else {
				strcpy(cEditwk2, Pri_FlpLoopTitle[7]);
			}
			Str_Set1(Pri_FlpLoopTitle[4], cEditwk2, pri_kind);
			++edit_cnt;

			if(1 == HexAsc_to_LongBin_withCheck(IFM_LockTable.sSlave[LockInfo[i].if_oya - 1].tLoopCount.ucOnBaseCount, 4, &ulData)) {
				memcpy(cEditwk2, IFM_LockTable.sSlave[LockInfo[i].if_oya - 1].tLoopCount.ucOnBaseCount, 4);
				cEditwk2[4] = '\0';
			}
			else {
				strcpy(cEditwk2, Pri_FlpLoopTitle[7]);
			}
			Str_Set1(Pri_FlpLoopTitle[5], cEditwk2, pri_kind);
			++edit_cnt;

			if(1 == HexAsc_to_LongBin_withCheck(IFM_LockTable.sSlave[LockInfo[i].if_oya - 1].tLoopCount.ucOnLevelCount, 4, &ulData)) {
				memcpy(cEditwk2, IFM_LockTable.sSlave[LockInfo[i].if_oya - 1].tLoopCount.ucOnLevelCount, 4);
				cEditwk2[4] = '\0';
			}
			else {
				strcpy(cEditwk2, Pri_FlpLoopTitle[7]);
			}
			Str_Set1(Pri_FlpLoopTitle[6], cEditwk2, pri_kind);
			++edit_cnt;

			if( (edit_cnt+3) > EDIT_GYOU_MAX ){								// 編集行数ﾁｪｯｸ

				// 次の駐車位置ﾃﾞｰﾀ編集（３行）が不可の場合

				++i;													// 次処理で検索するﾛｯｸ装置No.をｾｯﾄ
				break;														// ﾃﾞｰﾀ編集処理ﾙｰﾌﾟを抜ける
			}
		}
	}
	
	if( i >= TOTAL_CAR_LOCK_MAX ){										// 全駐車位置（全ﾛｯｸ装置No.）編集終了？

		// 全ての駐車位置（ﾛｯｸ装置No.）について編集終了した場合
		p_proc_data->Final	= ON;										// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
	else{
		// 未編集の駐車位置（ﾛｯｸ装置No.）がある場合
		p_proc_data->Prn_no = i;									// 次に編集するﾛｯｸ装置No.をｾｰﾌﾞ
	}

	return;
}
//[]----------------------------------------------------------------------[]
///	@brief			スタック使用量プリント編集
//[]----------------------------------------------------------------------[]
///	@param[in]		msg_data			ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in]		pri_kind			印字先ﾌﾟﾘﾝﾀ
///	@param[in]		p_proc_data			編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
///	@author			sugata
//[]----------------------------------------------------------------------[]
///	@date			Create	:	2010/02/08<br>
///					Update	:	
//[]------------------------------------- Copyright(C) 2010 AMANO Corp.---[]
void	Mnt_Stack_edit( T_FrmLogPriReq1 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	char	par_prn_work[10];								// 印字処理ﾜｰｸ
	ushort	i;
	memset(cEditwk1, 0, sizeof(cEditwk1));
	memset(par_prn_work, 0, sizeof(par_prn_work));
	if( p_proc_data->Prn_no == 0 ){
	/*------	＜表題＞編集	------*/
		Prn_edit_Title	(										// 表題印字ﾃﾞｰﾀ編集
							"デバッグ情報",
							FONT_K_YOKOBAI,
							pri_kind
						);

		/*------	１行空白	------*/
		Prn_edit_space( pri_kind );

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, msg_data->Kikai_no );				// 機械NO.編集
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録

		/*------	＜印字日時＞編集	------*/
		Prn_edit_Date( prn_work, &msg_data->PriTime );			// 日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字日時　印字ﾃﾞｰﾀ登録
		p_proc_data->Prn_no++;
	}
	else {
		if(p_proc_data->Prn_no_data1 == 0){
			Prn_edit_space( pri_kind );											// １行空白
			PCMD_CENTER( pri_kind );											// 
			PrnFontSize( FONT_A_NML, pri_kind );
			PrnFontSize( FONT_K_NML, pri_kind );
			PrnStr( Mnt_Prntitle_Sub[p_proc_data->Prn_no-1], pri_kind );
		}
		if(p_proc_data->Prn_no == 1){
			/* タスク毎スタック使用量 */
			sprintf(&cEditwk1[0], "         使用量   確保量");
			Str_Set1(cEditwk1, "", pri_kind);
			for(i = 0; i < TSKMAX; i++){
				memset(cEditwk1, 0, sizeof(cEditwk1));
				sprintf(&cEditwk1[0], " TASK%02d  %06d / %06d (%3d％)",i+1, Pri_Tasck[i][0], xSTACK_TBL[i], Pri_Tasck[i][1]);
				Str_Set1(cEditwk1, "", pri_kind);
			}
			p_proc_data->Prn_no++;
		}
		else if(p_proc_data->Prn_no == 2){
			/* 精算/集計エリアサイズ */
			sprintf(&cEditwk1[0], " 精算データ    1件：%05ld byte", Pri_Pay_Syu[0][0]);
			Str_Set1(cEditwk1, "", pri_kind);
			sprintf(&cEditwk1[0], "               LOG：%05ld byte", Pri_Pay_Syu[0][1]);
			Str_Set1(cEditwk1, "", pri_kind);
			sprintf(&cEditwk1[0], " 集計データ    1件：%05ld byte", Pri_Pay_Syu[1][0]);
			Str_Set1(cEditwk1, "", pri_kind);
			sprintf(&cEditwk1[0], "               LOG：%05ld byte",  Pri_Pay_Syu[1][1]);
			Str_Set1(cEditwk1, "", pri_kind);
			
			p_proc_data->Prn_no++;
		}
		else if(p_proc_data->Prn_no == 3){
			/* デバッグ情報 */
			memset(cEditwk1, 0, sizeof(cEditwk1));
			sprintf(&cEditwk1[0]," AUTO_PAYMENT_PROGRAM：%d",Pri_program);
			Str_Set1(cEditwk1, "", pri_kind);
			
			p_proc_data->Prn_no++;
		}
	}
	if( p_proc_data->Prn_no > 3 ){											// 全項目編集終了？

		p_proc_data->Prn_no			= 0;						// 編集処理ﾜｰｸﾘｾｯﾄ
		p_proc_data->Prn_no_data1	= 0;
		p_proc_data->Prn_no_data2	= 0;
		
		p_proc_data->Final = ON;							// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ

	}
}
const char* Pri_Chek_Title[] = {
	"[機器構成確認]",
	"[モジュール機番]",
	"[標準入出力]",
	"[磁気リーダー]",
	"[シャッター/LED]",
	"[スイッチ]",
	"[レシートプリンタ]",
	"[ジャーナルプリンタ]",
	"[案内放送]",
	"[入出力信号]",
	"[コインメック]",
	"[紙幣リーダー]",
};
const char* Pri_Chek_Set[] = {
	"　内部SRAM",
	"　外部SRAM",
	"　外部FROM",
	"　磁気リーダー",
	"　紙幣リーダー",
	"　コインメック",
	"　レシートプリンタ",
	"　ジャーナルプリンタ",
};
const char* Pri_Chek_Moj[] = {
	"　RXM基板",
	"　RXF基板",
	"　RXI基板",
	"　コインメック",
	"　紙幣リーダー",
	"　電子決済リーダー",
	"　ジャーナルプリンター",
	"　レシートプリンター",
	"　左側のFOMAモジュール",
	"　右側のFOMAモジュール",
	"　磁気リーダー",
	"　Vプリンター",
	"　カラーLCDモジュール",
	"　電源ユニット",
	"　拡張電源ユニット",
	"　テンキーモジュール",
};
const char* Pri_Chek_key_disp[] = {
	"　テンキー",
	"　表示器",
};

const char* Pri_Chek_disp[] = {
	"　検査",
};
	
const char* Pri_Chek_mag[] = {
	"　ライトテスト",
	"　リードテスト",
	"　印字テスト",
	"　消磁テスト",
};
	
const char* Pri_Chek_shut[] = {
	"　シャッター",
	"　ガイドLED",
};
	
const char* Pri_Chek_sw[] = {
	"　コインメック鍵",
	"　コイン金庫着脱",
	"　ドア",
	"　ドアノブ",
	"　紙幣リーダー",
};
	
const char* Pri_Chek_pri[] = {
	"　印字品位",
	"　プラテンオープン",
	"　ペーパーニアエンド",
	"　ペーパーエンド",
	"　フィード",
	"　カッター",
};

const char* Pri_Chek_ann[] = {
	"　音声品質",
	"　音量調整",
};
	
const char* Pri_Chek_coin[] = {
	"　硬貨読取",
	"　硬貨払出",
	"　コイン金庫搬送",
};

const char* Pri_Chek_note[] = {
	"　紙幣読取",
	"　紙幣返却",
	"　紙幣収納",
};

typedef struct{
	uchar	menu_cnt;
	long	*print_data;
}CHK_RESULT_INFO;

const CHK_RESULT_INFO Chek_result[] = 
	{
		{8, (long*)Pri_Chek_Set},
		{16, (long*)Pri_Chek_Moj},
		{2, (long*)Pri_Chek_key_disp},
		{4, (long*)Pri_Chek_mag},
		{2, (long*)Pri_Chek_shut},
		{5, (long*)Pri_Chek_sw},
		{6, (long*)Pri_Chek_pri},
		{5, (long*)Pri_Chek_pri},
		{2, (long*)Pri_Chek_ann},
		{1, (long*)Pri_Chek_disp},
		{3, (long*)Pri_Chek_coin},
		{3, (long*)Pri_Chek_note},
	};
void	ChkResult_edit( T_FrmChk_result *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	ushort	pri_no;
	uchar	result_dat[16];
	uchar	i;
	if( p_proc_data->Prn_no == 0 ){
		memset(cEditwk1, 0, sizeof(cEditwk1));
		sprintf( cEditwk1,"責 #%04d",msg_data->Kakari_no);
		Str_Set1( "", cEditwk1, pri_kind);

		Prn_edit_Title	(										// 表題印字ﾃﾞｰﾀ編集
							"組立検査結果",
							FONT_K_YOKOBAI,
							pri_kind
						);

		Prn_edit_space(pri_kind);								//空白一行

		/*機械情報印字*/
		sprintf( cEditwk1,"製品号機 #%06d",msg_data->Serial_no );				// "精算機 #XXXXXXX"ｾｯﾄ
		sprintf( cEditwk2,"検査No.%06d", msg_data->Chk_no);
		Str_Set1(cEditwk1, cEditwk2, pri_kind);
		
		/*発行時刻*/
		memset(cEditwk1, 0, sizeof(cEditwk1));
		sprintf( cEditwk1,"検査時刻　");
		Prn_edit_Date( cEditwk2, &msg_data->ChkTime );
		strcat(cEditwk1, cEditwk2);
		PCMD_LEFT(pri_kind);
		PrnFontSize(FONT_A_NML,pri_kind);						//フォントA指定
		PrnFontSize(FONT_K_NML,pri_kind);						//漢字指定
		PrnStr(cEditwk1,pri_kind);								//印字登録
		Prn_edit_space(pri_kind);								//空白一行

		p_proc_data->Prn_no = 3;
	}
	else{
		PCMD_LEFT(pri_kind);									//位置揃え(左)
		pri_no = p_proc_data->Prn_no;
		if(pri_no == 6){									// 磁気リーダーチェック
			sprintf(cEditwk1, 	"[検査員]");			// の前に検査員№を印字する
			PrnStr(cEditwk1,pri_kind);						//印字登録
			if(msg_data->Card_no == 0){
				strcpy( cEditwk1, "  No.--");
			}
			else{
				sprintf( cEditwk1, "  No.%02d",msg_data->Card_no);
			}
			PrnStr(cEditwk1,pri_kind);
		}
		Get_Result_dat(pri_no, Chek_result[pri_no-3].menu_cnt, result_dat);
		sprintf(cEditwk1, Pri_Chek_Title[pri_no-3]);
		PrnStr(cEditwk1,pri_kind);						//印字登録
		for(i = 0; i < Chek_result[pri_no-3].menu_cnt; i++){
			memset(cEditwk1, 0, sizeof(cEditwk1));
			sprintf(cEditwk1, "%s", Chek_result[pri_no-3].print_data[i]);
			switch(pri_no){
				case 4:			// モジュール機番
					sprintf( cEditwk2, "MH%06d", result_dat[i] );
					Str_Set1(cEditwk1, cEditwk2, pri_kind);
					break;
				default:
					if(result_dat[i] == 1){
						sprintf( cEditwk2,"NG" );
					}
					else if(result_dat[i] == 0){
						sprintf( cEditwk2,"OK" );
					}
					else{
						sprintf( cEditwk2,"--" );
					}
					Str_Set1(cEditwk1, cEditwk2, pri_kind);
					break;
			}
		}
		p_proc_data->Prn_no++;
	}
	if( p_proc_data->Prn_no > 14 ){								// 全項目編集終了？

		p_proc_data->Prn_no			= 0;						// 編集処理ﾜｰｸﾘｾｯﾄ
		p_proc_data->Prn_no_data1	= 0;
		p_proc_data->Prn_no_data2	= 0;
		
		p_proc_data->Final = ON;								// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
}
//[]----------------------------------------------------------------------[]
///	@brief			ソフトウェアバージョン印字処理
//[]----------------------------------------------------------------------[]
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@return			count		: 印字行数
//[]----------------------------------------------------------------------[]
///	@author			Namioka
///	@date			Create	: 2012/05/28<br>
//[]------------------------------------- Copyright(C) 2012 AMANO Corp.---[]
char edit_SoftVerPrint( uchar pri_kind )				// ソフトウェアバージョン印字処理
{
// MH810100(S) K.Onodera 2019/11/26 車番チケットレス（設定印字）
//	char	ap_ver[10];			// ｿﾌﾄﾊﾞｰｼﾞｮﾝ（ｱﾌﾟﾘｹｰｼｮﾝ）
	char	ap_ver[16];			// ｿﾌﾄﾊﾞｰｼﾞｮﾝ（ｱﾌﾟﾘｹｰｼｮﾝ）
// MH810100(E) K.Onodera 2019/11/26 車番チケットレス（設定印字）
	char	count = 0;
	
	memset(ap_ver,0,sizeof(ap_ver));

	/*------	＜ﾊﾞｰｼﾞｮﾝＮｏ．＞編集	------*/
	ap_ver[0] = (char)VERSNO.ver_part[0];						// Parts No.
	ap_ver[1] = (char)VERSNO.ver_part[1];
	ap_ver[2] = (char)VERSNO.ver_part[2];
	ap_ver[3] = (char)VERSNO.ver_part[3];
	ap_ver[4] = (char)VERSNO.ver_part[4];
	ap_ver[5] = (char)VERSNO.ver_part[5];

	ap_ver[6] = (char)VERSNO.ver_romn[0];						// Software Version No.
	ap_ver[7] = (char)VERSNO.ver_romn[1];
	ap_ver[8] = 0;

	// メインプログラムバージョン
	sprintf( prn_work,"ﾒｲﾝﾌﾟﾛｸﾞﾗﾑ  : %s", ap_ver );			// ﾒｲﾝｱﾌﾟﾘｹｰｼｮﾝVer No.印字ﾃﾞｰﾀ編集
	PrnStr( prn_work, pri_kind );								// 印字ﾃﾞｰﾀ登録
	count++;
	// フロントプログラムバージョン
	sprintf( prn_work,"ﾌﾛﾝﾄﾌﾟﾛｸﾞﾗﾑ : %s", RXF_VERSION );		// ﾌﾛﾝﾄｱﾌﾟﾘｹｰｼｮﾝVer No.印字ﾃﾞｰﾀ編集
	PrnStr( prn_work, pri_kind );								// 印字ﾃﾞｰﾀ登録
	count++;
// MH810100(S) K.Onodera 2019/11/26 車番チケットレス（設定印字）
//	// 音声データバージョン
//	sprintf( prn_work,"音声ﾃﾞｰﾀ    : %s", SOUND_VERSION );	// 音声ﾃﾞｰﾀVer No.印字ﾃﾞｰﾀ編集
//	PrnStr( prn_work, pri_kind );								// 印字ﾃﾞｰﾀ登録
//	count++;
	// LCDプログラムバージョン
	memset( ap_ver, 0, sizeof(ap_ver) );
	memset( prn_work, 0, sizeof(prn_work) );
	lcdbm_get_config_prgm_ver( ap_ver, sizeof(ap_ver) );
	sprintf( prn_work, "LCDﾌﾟﾛｸﾞﾗﾑ  : %s", ap_ver );			// LCDﾌﾟﾛｸﾞﾗﾑVer印字ﾃﾞｰﾀ編集
	PrnStr( prn_work, pri_kind );								// 印字ﾃﾞｰﾀ登録
	count++;

	// 音声データバージョン
	memset( ap_ver, 0, sizeof(ap_ver) );
	memset( prn_work, 0, sizeof(prn_work) );
	lcdbm_get_config_audio_ver( ap_ver, sizeof(ap_ver) );
// MH810100(S) Y.Yamauchi 2019/10/08 車番チケットレス（設定印字）
//	sprintf( prn_work, "音声ﾃﾞｰﾀ    : %s", ap_ver );			// 音声ﾃﾞｰﾀVer印字ﾃﾞｰﾀ編集
	sprintf( prn_work, "ｺﾝﾃﾝﾂﾃﾞｰﾀ   : %s", ap_ver );			// ｺﾝﾃﾝﾂﾃﾞｰﾀVer印字ﾃﾞｰﾀ編集
// MH810100(E) Y.Yamauchi 2019/10/08 車番チケットレス（設定印字）
	PrnStr( prn_work, pri_kind );								// 印字ﾃﾞｰﾀ登録
	count++;
// MH810100(E) K.Onodera 2019/11/26 車番チケットレス（設定印字）

// GG120600(S) // Phase9 #5071 運用設定および設定プリントにベースバージョンと料金計算のバージョンを印字する
	// ベースバージョン
	ap_ver[0] = (char)VERSNO_BASE.ver_part[0];					// Parts No.
	ap_ver[1] = (char)VERSNO_BASE.ver_part[1];
	ap_ver[2] = (char)VERSNO_BASE.ver_part[2];
	ap_ver[3] = (char)VERSNO_BASE.ver_part[3];
	ap_ver[4] = (char)VERSNO_BASE.ver_part[4];
	ap_ver[5] = (char)VERSNO_BASE.ver_part[5];

	ap_ver[6] = (char)VERSNO_BASE.ver_romn[0];					// Base Software Version No.
	ap_ver[7] = (char)VERSNO_BASE.ver_romn[1];
	ap_ver[8] = 0;

	sprintf( prn_work,"ﾍﾞｰｽﾌﾟﾛｸﾞﾗﾑ : %s", ap_ver );				// 印字ﾃﾞｰﾀ編集
	PrnStr( prn_work, pri_kind );								// 印字ﾃﾞｰﾀ登録
	count++;

// GG124100(S) R.Endo 2022/10/03 車番チケットレス3.0 #6634 共通パラメータの設定プリント時、料金計算のバージョンを印字しないように変更する
	if ( !CLOUD_CALC_MODE ) {	// 通常料金計算モード
// GG124100(E) R.Endo 2022/10/03 車番チケットレス3.0 #6634 共通パラメータの設定プリント時、料金計算のバージョンを印字しないように変更する

	// 料金計算バージョン
	ap_ver[0] = (char)VERSNO_RYOCAL.ver_part[0];				// Parts No.
	ap_ver[1] = (char)VERSNO_RYOCAL.ver_part[1];
	ap_ver[2] = (char)VERSNO_RYOCAL.ver_part[2];
	ap_ver[3] = (char)VERSNO_RYOCAL.ver_part[3];
	ap_ver[4] = (char)VERSNO_RYOCAL.ver_part[4];
	ap_ver[5] = (char)VERSNO_RYOCAL.ver_part[5];

	ap_ver[6] = (char)VERSNO_RYOCAL.ver_romn[0];				// 料金計算 Version No.
	ap_ver[7] = (char)VERSNO_RYOCAL.ver_romn[1];
	ap_ver[8] = 0;

	sprintf( prn_work,"料金計算    : %s", ap_ver );				// 印字ﾃﾞｰﾀ編集
	PrnStr( prn_work, pri_kind );								// 印字ﾃﾞｰﾀ登録
	count++;

// GG124100(S) R.Endo 2022/10/03 車番チケットレス3.0 #6634 共通パラメータの設定プリント時、料金計算のバージョンを印字しないように変更する
	}
// GG124100(E) R.Endo 2022/10/03 車番チケットレス3.0 #6634 共通パラメータの設定プリント時、料金計算のバージョンを印字しないように変更する
// GG120600(E) // Phase9 #5071 運用設定および設定プリントにベースバージョンと料金計算のバージョンを印字する

	return 	count;

}

/*[]---------------------------------------------------------------------------[]*/
/*|		料金テスト情報印字ﾃﾞｰﾀ編集処理											|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RT_SEISANLOG_edit( *msg_data, pri_kind, *p_proc_data)	|*/
/*|																				|*/
/*|	PARAMETER		:	T_FrmLogPriReq1	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|																				|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ		|*/
/*|																				|*/
/*|	RETURN VALUE	:	void													|*/
/*|																				|*/
/*[]---------------------------------------------------------------------------[]*/
/*|	Author	:	Y.Shiraishi														|*/
/*|	Date	:	2012-10-15														|*/
/*|	Update	:																	|*/
/*[]------------------------------------- Copyright(C) 2005 AMANO Corp.--------[]*/
void	RT_SEISANLOG_edit( T_FrmLogPriReq1 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ
	uchar	ret1,ret2;			// 精算ﾃﾞｰﾀ編集処理結果
	uchar	f_Printer;			// 出力プリンタ種別（0=レシート、1=ジャーナル）

	if( J_PRI == pri_kind )		// 出力プリンタ=ジャーナル
		f_Printer = 1;			// 出力プリンタ種別 = ジャーナル
	else
		f_Printer = 0;			// レシート

	if( p_proc_data->Log_Start == OFF ){

		// 編集開始（初回編集）の場合

		/*------	＜表題＞編集	------*/
		Prn_edit_Title	(										// 表題（"個別精算情報"）印字ﾃﾞｰﾀ編集
							"料金テスト情報",
							FONT_K_YOKOBAI,
							pri_kind
						);

		/*------	１行空白	------*/
		Prn_edit_space( pri_kind );

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, msg_data->Kikai_no );				// 機械NO.編集
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );							// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnStr( prn_work, pri_kind );							// 時刻　印字ﾃﾞｰﾀ登録

		/*------	個別精算情報件数検索	------*/

		ret1 = Prn_log_check(									// ﾛｸﾞ情報（ｶｳﾝﾀ、ﾎﾟｲﾝﾀ）ﾁｪｯｸ
							(ushort)RT_PAY_LOG_DAT.RT_pay_count,// ｶｳﾝﾀ
							(ushort)RT_PAY_LOG_DAT.RT_pay_wtp,	// ﾗｲﾄﾎﾟｲﾝﾀ
							RT_PAY_LOG_CNT,						// 最大格納件数
							8									// ﾛｸﾞ情報No.
						);

		if( ret1 == OK ){

			// ﾛｸﾞ情報が正常な場合

			/*------	印字要求内容ﾁｪｯｸ	------*/

			if( edit_end != ON ){

				// 検索方法の指定が正常な場合

				/*------	＜検索方法＞編集	------*/
				PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
				PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録

				/*------	編集制御ﾜｰｸｾｯﾄ	------*/
				p_proc_data->Log_Start	= ON;						// Log_Start	← ﾛｸﾞﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ
				p_proc_data->Log_TotalCount = RT_PAY_LOG_DAT.RT_pay_count;
				if( p_proc_data->Log_TotalCount == 0 ){
					// 格納件数が０の場合
					edit_end = ON;									// 編集終了
				}
				p_proc_data->Log_DataPt = RT_PAY_LOG_DAT.RT_pay_wtp;// ﾎﾟｲﾝﾀｾｯﾄ
				
				// 最古のデータから印字
				if( ( p_proc_data->Log_TotalCount < RT_PAY_LOG_CNT ) ||
					 (p_proc_data->Log_DataPt >= RT_PAY_LOG_CNT) ){
					p_proc_data->Log_DataPt = 0;
				}else if( (p_proc_data->Log_TotalCount >= RT_PAY_LOG_CNT) && (p_proc_data->Log_DataPt < RT_PAY_LOG_CNT) ){
					p_proc_data->Log_DataPt++;
				}
			}
		}
		else{
			// ﾛｸﾞ情報が異常な場合

			edit_end = ON;													// 編集終了
		}
	}	// 初回編集処理end

	else{

		// ２回目以降の編集処理

		if( p_proc_data->Log_TotalCount > 0 ){				// 格納件数分の検索＆編集終了？(N)

			// 格納件数分の検索＆編集を終了していない場合

			p_proc_data->Log_Edit = ON;						// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞｾｯﾄ

			Pri_Work[f_Printer].Receipt_data = RT_PAY_LOG_DAT.RT_pay_log_dat[p_proc_data->Log_DataPt];
			ret2 = RYOUSYUU_edit(							// 印字対象精算ﾃﾞｰﾀ編集
									(Receipt_data *)&Pri_Work[f_Printer].Receipt_data,
									pri_kind,
									p_proc_data
								);

			if( ret2 == YES ){

				// １精算ﾃﾞｰﾀ編集終了の場合

				p_proc_data->Log_Edit = OFF;				// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞﾘｾｯﾄ

				p_proc_data->Log_TotalCount--;				// 格納件数ﾃﾞｸﾘﾒﾝﾄ
				p_proc_data->Log_DataPt++;					// 次に編集するログの情報のインデックスをセット
				if( p_proc_data->Log_DataPt >= RT_PAY_LOG_CNT ){
					p_proc_data->Log_DataPt = 0;
				}

			}
		}

		if( p_proc_data->Log_TotalCount == 0 ){				// 全ﾛｸﾞ情報編集終了？

			// 格納件数分の編集が終了した場合
			edit_end = ON;									// 編集終了
		}

	}	// ２回目以降の編集処理end

	/*------	編集終了ﾁｪｯｸ	------*/
	if( edit_end == ON ){	
		p_proc_data->Final = ON;			// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		遠隔監視情報印字ﾃﾞｰﾀ編集											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RMONJOU_edit( *Rmonlog, pri_kind, *p_proc_data )	|*/
/*|																			|*/
/*|	PARAMETER		:	Rmon_log	*Rmonlog	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ				|*/
/*|																			|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	T.Nagai														|*/
/*|	Date	:	2014-12-10													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2014 AMANO Corp.----[]*/
void	RMONJOU_edit( Rmon_log *Rmonlog, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{

	/*------	操作情報ﾃﾞｰﾀ編集	------*/
	RMONJOU_edit_data( Rmonlog, pri_kind );

	/*------	編集終了	------*/
	p_proc_data->Final = ON;							// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
}

/*[]-----------------------------------------------------------------------[]*/
/*|		遠隔監視情報履歴印字ﾃﾞｰﾀ編集										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RMONLOG_edit( *msg_data, pri_kind, *p_proc_data )	|*/
/*|																			|*/
/*|	PARAMETER		:	T_FrmLogPriReq1	*msg_data	=	ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|						uchar			pri_kind	=	印字先ﾌﾟﾘﾝﾀ			|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|						PRN_PROC_DATA	*p_proc_data=	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	T.Nagai														|*/
/*|	Date	:	2014-12-10													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2014 AMANO Corp.----[]*/
void	RMONLOG_edit( T_FrmLogPriReq2 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ
	uchar	f_Printer;			// 出力プリンタ種別（0=レシート、1=ジャーナル）
	ushort	Sdate;				// 検索開始日
	ushort	date[3];			// 年月日
	ushort	index;				// ログ検索位置
	ushort	rmon_date;			// 遠隔監視データ発生日

	if( J_PRI == pri_kind ){	// 出力プリンタ=ジャーナル
		f_Printer = 1;			// 出力プリンタ種別 = ジャーナル
	}else{
		f_Printer = 0;			// レシート
	}
	if( p_proc_data->Log_Start == OFF ){

		// 編集開始（初回編集）の場合

		/*------	＜表題＞編集	------*/
		Prn_edit_Title	(										// 表題（"遠隔監視情報"）印字ﾃﾞｰﾀ編集
							"遠隔監視情報",
							FONT_K_YOKOBAI,
							pri_kind
						);

		/*------	１行空白	------*/
		Prn_edit_space( pri_kind );

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, msg_data->Kikai_no );				// 機械NO.編集
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );							// 印字ﾃﾞｰﾀ登録

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );							// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnStr( prn_work, pri_kind );							// 時刻　印字ﾃﾞｰﾀ登録

		/*------	遠隔監視情報件数検索	------*/

		p_proc_data->Log_DataPt = 0;							// 検索インデックスは先頭に指定

			// ﾛｸﾞ情報が正常な場合

			/*------	印字要求内容ﾁｪｯｸ	------*/

			switch( msg_data->BType ){	// 検索方法？

				case	0:	// 全て

					sprintf(										// cEditwk1←検索方法印字ﾃﾞｰﾀ
								cEditwk1,
								"全て(%d件)",
								msg_data->LogCount
							);
					p_proc_data->Log_TotalCount = msg_data->LogCount;

					break;

				case	1:	// 日付指定

					//	指定日ﾁｪｯｸ
					if( OK == DateChk( (date_time_rec *)&msg_data->TSttTime ) ){

						// 指定日が正常な場合
						Sdate = dnrmlzm(							// 指定日ﾃﾞｰﾀ取得
											(short)msg_data->TSttTime.Year,
											(short)msg_data->TSttTime.Mon,
											(short)msg_data->TSttTime.Day
										);

						p_proc_data->Log_Sdate = Sdate;				// 指定日ﾃﾞｰﾀｾｰﾌﾞ
						date[0] = (short)msg_data->TSttTime.Year;
						date[1] = (short)msg_data->TSttTime.Mon;
						date[2] = (short)msg_data->TSttTime.Day;
						p_proc_data->Log_TotalCount = Ope2_Log_CountGet_inDate( eLOG_REMOTE_MONITOR,
																				&date[0],
																				&index );// 登録件数set
						p_proc_data->Log_DataPt = index;

						sprintf(									// cEditwk1←検索方法印字ﾃﾞｰﾀ
									cEditwk1,
									"%04d/%d/%d分",
									msg_data->TSttTime.Year,
									msg_data->TSttTime.Mon,
									msg_data->TSttTime.Day
								);
					}
					else{
						// 指定日が異常な場合
						Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
						edit_end = ON;								// 編集終了
					}

					break;


				default:	// その他（検索方法指定ｴﾗｰ）

					Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録

					edit_end = ON;									// 編集終了
// MH322914 (s) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
					break;
// MH322914 (e) kasiyama 2016/07/08 [break]を入れる(共通改善No.896)(MH341106)
			}

			if( edit_end != ON ){

				// 検索方法の指定が正常な場合

				/*------	＜検索方法＞編集	------*/
				PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
				PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録

				/*------	１行空白	------*/
				Prn_edit_space( pri_kind );

				/*------	編集制御ﾜｰｸｾｯﾄ	------*/
				p_proc_data->Log_Start	= ON;						// Log_Start	← ﾛｸﾞﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ

				if( p_proc_data->Log_TotalCount == 0 ){
					// 格納件数が０の場合
					edit_end = ON;									// 編集終了
				}
			}
	}	// 初回編集処理end

	else{
		// ２回目以降の編集処理
		switch( msg_data->BType ){	// 検索方法？

			case	0:	// 全て

				if( p_proc_data->Log_Edit == OFF ){			// １モニタデータ編集中
					if(0 == Ope_Log_1DataGet( eLOG_REMOTE_MONITOR, p_proc_data->Log_DataPt, (void *)&Pri_Work[f_Printer].Rmon_work ) ){
						// データが取得エラーの場合は印字しない
						p_proc_data->Log_TotalCount = 0;
						edit_end = ON;	// 編集終了
					}
				}
				break;

			case	1:	// 日付指定

				if( p_proc_data->Log_Edit == OFF ){			// １モニタデータ編集中
					for( ; p_proc_data->Log_TotalCount > 0 ; ){	// 日付が一致するﾛｸﾞ情報を格納件数分検索する
						if(0 == Ope_Log_1DataGet( eLOG_REMOTE_MONITOR, p_proc_data->Log_DataPt, (void *)&Pri_Work[f_Printer].Rmon_work ) ){
							// データが取得エラーの場合は印字しない
							p_proc_data->Log_TotalCount = 0;
							edit_end = ON;	// 編集終了
							break;
						}
						rmon_date = dnrmlzm(				// 対象ﾛｸﾞ情報の精算日取得
								(short)Pri_Work[f_Printer].Rmon_work.Date_Time.Year,
								(short)Pri_Work[f_Printer].Rmon_work.Date_Time.Mon,
								(short)Pri_Work[f_Printer].Rmon_work.Date_Time.Day
							);
						if( rmon_date == p_proc_data->Log_Sdate ){
							// 対象ﾛｸﾞ情報のモニタ発生日が指定日と一致した場合
							break;							// 検索ﾙｰﾌﾟを抜ける
						}
						p_proc_data->Log_DataPt++;			// 次に検索するログのインデックスをセット
					}
				}

				break;

		}

		if( p_proc_data->Log_TotalCount > 0 ){				// 格納件数分の検索＆編集終了？(N)

			// 格納件数分の検索＆編集を終了していない場合

			p_proc_data->Log_Edit = ON;						// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞｾｯﾄ

			RMONJOU_edit_data(								// 印字対象モニタデータ編集
								(Rmon_log *)&Pri_Work[f_Printer].Rmon_work,
								pri_kind
							);

			// １モニタデータ編集終了
			p_proc_data->Log_Edit = OFF;					// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞﾘｾｯﾄ

			p_proc_data->Log_TotalCount--;					// 格納件数ﾃﾞｸﾘﾒﾝﾄ
			p_proc_data->Log_DataPt++;						// 次に編集するログの情報のインデックスをセット

		}

		if( p_proc_data->Log_TotalCount == 0 ){				// 全ﾛｸﾞ情報編集終了？
			// 格納件数分の編集が終了した場合
			edit_end = ON;										// 編集終了
		}

	}	// ２回目以降の編集処理end

	/*------	編集終了ﾁｪｯｸ	------*/
	if( edit_end == ON ){	
		p_proc_data->Final = ON;								// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
	}
}

/*[]-----------------------------------------------------------------------[]*/
/*|		遠隔監視情報（１ﾃﾞｰﾀ）編集処理										|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RMONJOU_edit_data( *Rmonlog, pri_kind )				|*/
/*|																			|*/
/*|	PARAMETER		:	Rmon_log	*Rmonlog	=	ﾃﾞｰﾀﾎﾟｲﾝﾀｰ				|*/
/*|																			|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|							R_PRI  : ﾚｼｰﾄ									|*/
/*|							J_PRI  : ｼﾞｬｰﾅﾙ									|*/
/*|																			|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Author	:	T.Nagai														|*/
/*|	Date	:	2014-12-10													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2014 AMANO Corp.----[]*/
void	RMONJOU_edit_data( Rmon_log *Rmonlog, uchar pri_kind )
{
	ushort	Rmon_syu;		// 端末機能番号
	ushort	Rmon_cod1;		// 処理番号
	ushort	Rmon_cod2;		// 処理情報番号
	ushort	Rmon_cod3;		// 状況番号
	ushort	Rmon_cod4;		// 状況詳細番号
	uchar	Nml_pri = OFF;	// ﾉｰﾏﾙ印字ﾌﾗｸﾞ

	Rmon_syu = Rmonlog->RmonFuncNo;						// 端末機能番号取得
	if( Rmon_syu > RMON_INFO_SYU_MAX ){
		Rmon_syu = RMON_INFO_SYU_MAX;
	}

	Rmon_cod1 = Rmonlog->RmonProcNo;					// 処理番号取得
	if( Rmon_cod1 > RMON_INFO_COD_MAX ){
		Rmon_cod1 = RMON_INFO_COD_MAX;
	}

	Rmon_cod2 = Rmonlog->RmonProcInfoNo;				// 処理情報番号取得
	if( Rmon_cod2 > RMON_INFO_COD_MAX ){
		Rmon_cod2 = RMON_INFO_COD_MAX;
	}

	Rmon_cod3 = Rmonlog->RmonStatusNo;					// 状況番号取得
	if( Rmon_cod3 > RMON_INFO_COD_MAX ){
		Rmon_cod3 = RMON_INFO_COD_MAX;
	}

	Rmon_cod4 = Rmonlog->RmonStatusDetailNo;			// 状況詳細番号取得
	if( Rmon_cod4 > RMON_INFO_COD_MAX ){
		Rmon_cod4 = RMON_INFO_COD_MAX;
	}

	PCMD_LEFT( pri_kind );								// [位置揃え(左揃え)]
	PrnFontSize( FONT_A_NML, pri_kind );				// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize( FONT_K_NML, pri_kind );				// 漢字（通常）指定

	Prn_edit_Date2( cEditwk1, (date_time_rec *)&Rmonlog->Date_Time );	// cEditwk1 ← 時刻印字ﾃﾞｰﾀ

	switch (Rmon_syu) {	// 種別により各処理へ分岐
	default:			// その他
		Nml_pri = ON;									// ﾉｰﾏﾙ印字
		break;
	}
	if( Nml_pri == ON ){
		// ﾉｰﾏﾙ印字
		sprintf(prn_work, "S%02d%02d%02d%02d%02d   ", Rmon_syu, Rmon_cod1, Rmon_cod2, Rmon_cod3, Rmon_cod4 );
	}
	strcat(prn_work, cEditwk1);
	
	PrnStr( prn_work, pri_kind );					// 印字ﾃﾞｰﾀ登録
}

// MH321800(S) D.Inaba ICクレジット対応
//[]----------------------------------------------------------------------[]
//	@brief			決済リーダ ブランド状態印字ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
//	@param[in]		*msg_data		ブランド状態データポインタ<br>
//	@param[in]		pri_kind		ﾌﾟﾘﾝﾀ種別<br>
//	@param[in/out]	p_proc_data		編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
//	@return			void
//	@author			Inaba
//	@attention		None
//	@note			Sanden_Brand_edit移植
//[]----------------------------------------------------------------------[]
//	@date			Create	:	2019/02/14<br>
//					Update	:	
//[]------------------------------------- Copyright(C) 2019 AMANO Corp.---[]
void	Ec_Brand_edit(T_FrmEcBrandReq *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	ushort	work;				// ﾜｰｸ領域
	uchar	edit_gyou;			// 編集済み行数
	uchar	i;
	uchar	work_id[2];			// ロゴ／ヘッダー印字の設定有無
	EC_BRAND_CTRL	*brand;
// MH810105(S) MH364301 QRコード決済対応
	uchar	j;
	ushort	lenCheck;
	int		sub_idx;
	uchar	sub_num;
// MH810105(E) MH364301 QRコード決済対応
// MH810103 GG119202(S) ブランド名はブランド情報から取得する
//	int		name_index;
// MH810103 GG119202(E) ブランド名はブランド情報から取得する

	memset( work_id, 0, sizeof(work_id) );
	for ( i = 4; i < 50; i++ ) {
	// ロゴとヘッダー印字の設定有無を検索
		work = 	( ushort )prm_get( COM_PRM, S_RTP, (short)i, 3, 1 );	// 印字設定ﾘｰﾄﾞ
		if (work == 1) {										// ﾛｺﾞ印字設定有り？
			work_id[0] = 1;
		}
		else if (work == 2) {									// ﾍｯﾀﾞｰ印字設定有り？
			work_id[1] = 1;
		}

		if (work_id[0] == 1 && work_id[1] == 1) {				// 両方設定済みの場合検索終了
			break;
		}
	}
	
	if(p_proc_data->Prn_no_data1 < msg_data->pridata->num) {
		brand = &(msg_data->pridata->ctrl[p_proc_data->Prn_no_data1]);
	} else {
		brand = &(msg_data->pridata2->ctrl[p_proc_data->Prn_no_data1-msg_data->pridata->num]);
	}

	for ( edit_gyou = 0; edit_gyou < EDIT_GYOU_MAX; ) {
	// 対象設定項目番号に設定されている印字内容＝印字する　且つ　１ﾌﾞﾛｯｸ編集の最大行数を超えない場合
		/*--------------------------------------*/
		/*	１項目編集処理						*/
		/*--------------------------------------*/
		switch (p_proc_data->Prn_no) {
		case	0:		// ＜未使用＞
			break;

		case	1:		// ＜ロゴ＞編集処理
			if (CPrmSS[S_PRN][3] == 0 || CPrmSS[S_PRN][3] == 2) {
			// レシートカット時にロゴ印字無し設定
				if (work_id[0] == 1) {
#if		(PRINT_KIND == 0)
					edit_gyou = Prn_edit_logo(pri_kind);
#elif	(PRINT_KIND == 1)
					edit_gyou = Prn_edit_logo(pri_kind, 0);		// ﾛｺﾞ印字ﾃﾞｰﾀ編集(印字後カットなし)
#endif
				}
			}
			break;

		case	2:		// ＜ヘッダー＞編集処理
			if (CPrmSS[S_PRN][3] == 0 || CPrmSS[S_PRN][3] == 1) {
			// レシートカット時にヘッダー印字無し設定
				if (work_id[1] == 1) {
					edit_gyou = Prn_edit_headhoot(PRI_HEADER, pri_kind);
				}
			}
			break;

		case	3:		// ＜表題＞編集処理
		// Prn_edit_Title()の最後に通常フォントに戻る
			PrnFontSize(FONT_A_YOKOBAI, pri_kind);				// 半角を横倍指定
			Prn_edit_Title	(									// 表題（"締め結果"）印字ﾃﾞｰﾀ編集
								"ブランド状態",
								FONT_K_YOKOBAI,
								pri_kind
							);
			edit_gyou++;

			/*------	１行空白	------*/
			if (pri_kind == R_PRI) {
				Prn_edit_space(pri_kind);
				edit_gyou++;
			}
			break;

		case	4:		// ＜機械№＞編集処理
			KikaiNoSet(cEditwk1, msg_data->Kikai_no);			// 機械№編集
			Str_Set1(cEditwk1, "", pri_kind);					// 文字列１：機械№印字ﾃﾞｰﾀ
																// 文字列２：なし
																// 印字先ﾌﾟﾘﾝﾀ
			edit_gyou++;
			break;

		case	5:		// ＜印字時刻＞編集処理
			PCMD_LEFT(pri_kind);								// [位置揃え(左揃え)]
			if (pri_kind == J_PRI) {
			// 印字時刻のジャーナル印字は行わない
				break;
			}

			Prn_edit_NowDate( prn_work );						// 現在日時印字ﾃﾞｰﾀ編集
			PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
			PrnStr( prn_work, pri_kind );						// 時刻　印字ﾃﾞｰﾀ登録

			edit_gyou++;

			/*------	１行空白	------*/
			if (pri_kind == R_PRI) {
				Prn_edit_space(pri_kind);
				edit_gyou++;
			}
			break;

		case	6:		// 仕切り行
		case	11:
		case	16:
		case	21:
		case	26:
		case	31:
		case	36:
		case	41:
		case	46:
		case	51:
		case	56:
		case	61:
		case	66:
		case	71:
		case	76:
		case	81:
		case	86:
		case	91:
		case	96:
		case	101:
			/*-----		仕切り行	-----*/
			PCMD_LEFT( pri_kind );								// [位置揃え(左揃え)]
			PrnStr( SikiriLine_Prn[3], pri_kind );				// 仕切り行印字ﾃﾞｰﾀ登録
			edit_gyou++;
			break;

		case	7:		// ブランド名
		case	12:
		case	17:
		case	22:
		case	27:
		case	32:
		case	37:
		case	42:
		case	47:
		case	52:
		case	57:
		case	62:
		case	67:
		case	72:
		case	77:
		case	82:
		case	87:
		case	92:
		case	97:
		case	102:
			// ブランド名
// MH810103 GG119202(S) ブランド名はブランド情報から取得する
//			name_index = get_brand_index(brand->no);
//			if(name_index == 0){ 	// 不明ブランド
//				name_index = 3;
//			} else {				// 不明でないブランド
//				name_index = name_index + 2;
//			}
//			Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
//						(const char*)EC_BRAND_STR[name_index],					// 文字列１：ブランド名
//						(const char*)EC_STR[0 + ((brand->status & 0x0f) == 0x01)],	// 文字列２：利用不可/利用可(開局 & 有効 & 空き & 動作中)
//						pri_kind												// 印字先ﾌﾟﾘﾝﾀ
//					);
			getBrandName(brand, (uchar*)cEditwk2);
			sprintf(cEditwk1, "  %s", cEditwk2);								// 字下げ
			Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
						(const char*)cEditwk1,									// 文字列１：ブランド名
// MH810103 GG119202(S) サービス停止中ブランドはブランド設定データにセットしない
//						(const char*)EC_STR[isEC_BRAND_STS_KAIKYOKU(brand->status)],// 文字列２：利用不可/利用可能(開局 & 有効 & サービス稼働中)
						(const char*)EC_STR[isEC_BRAND_STS_ENABLE(brand->status)],// 文字列２：利用不可/利用可能(開局 & 有効 & サービス稼働中)
// MH810103 GG119202(E) サービス停止中ブランドはブランド設定データにセットしない
						pri_kind												// 印字先ﾌﾟﾘﾝﾀ
					);
// MH810103 GG119202(E) ブランド名はブランド情報から取得する
			edit_gyou++;
			break;

		case	8:		// 開局／閉局
		case	13:
		case	18:
		case	23:
		case	28:
		case	33:
		case	38:
		case	43:
		case	48:
		case	53:
		case	58:
		case	63:
		case	68:
		case	73:
		case	78:
		case	83:
		case	88:
		case	93:
		case	98:
		case	103:
			Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
						(const char*)EC_BRAND_STR[0],							// 文字列１："    開局／閉局  "
						(const char*)EC_STR[2 + (brand->status & 0x01) ],		// 文字列２：閉局/開局
						pri_kind												// 印字先ﾌﾟﾘﾝﾀ
					);

			edit_gyou++;
			break;

		case	9:		// 有効／無効
		case	14:
		case	19:
		case	24:
		case	29:
		case	34:
		case	39:
		case	44:
		case	49:
		case	54:
		case	59:
		case	64:
		case	69:
		case	74:
		case	79:
		case	84:
		case	89:
		case	94:
		case	99:
		case	104:
			Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
						(const char*)EC_BRAND_STR[1],							// 文字列１："    有効／無効  "
						(const char*)EC_STR[4 + (((brand->status & 0x02) == 0x02) ? 1 : 0) ],	// 文字列２：有効/無効
						pri_kind												// 印字先ﾌﾟﾘﾝﾀ
					);

			edit_gyou++;
			break;

		case	10:		// サービス状態
		case	15:
		case	20:
		case	25:
		case	30:
		case	35:
		case	40:
		case	45:
		case	50:
		case	55:
		case	60:
		case	65:
		case	70:
		case	75:
		case	80:
		case	85:
		case	90:
		case	95:
		case	100:
		case	105:
// MH810105(S) MH364301 QRコード決済対応
			if (p_proc_data->Prn_no_data2 == 0) {
			// サブブランドを持つ場合は初回だけ印字
// MH810105(E) MH364301 QRコード決済対応
			Str_Set1(															// -----印字ﾃﾞｰﾀ編集-----
						(const char*)EC_BRAND_STR[2],							// 文字列１："    サービス状態"
						(const char*)EC_STR[6 + (((brand->status & 0x08) == 0x08) ? 1 : 0) ],	// 文字列２：動作中/停止中
						pri_kind												// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_gyou++;
// MH810105(S) MH364301 QRコード決済対応
			}

			// サブブランドを持つブランド番号か？
			sub_idx = EcSubBrandCheck(brand->no);
			if (sub_idx > 0) {
				// サブブランド数
				sub_num = RecvSubBrandTbl.sub_brand_num[sub_idx-1];
				// 先頭に3つスペース
				memset(cEditwk1, 0, sizeof(cEditwk1));
				lenCheck = 3;
				memset(cEditwk1, 0x20, (size_t)lenCheck);

				j = (uchar)p_proc_data->Prn_no_data2;
				for (; j < sub_num; j++) {
					// " X."
					lenCheck += 3;
					if ((j+1) >= 10) {
						// " XX."
						lenCheck += 1;
					}
					else if ((j+1) >= 100) {
						// " XXX."
						lenCheck += 2;
					}
					// サブブランド名
					lenCheck += EcGetSubBrandName(brand->no, 0, j, (uchar*)cEditwk3);

					// 1行分（全角18文字）より長くなる場合は次の行で印字する
					if (lenCheck > FONTA_MAX_COL) {
						break;
					}

					// 例：" 1.PayPay"
					sprintf(cEditwk2, " %d.%s", j+1, cEditwk3);
					strcat(cEditwk1, cEditwk2);
				}

				// サブブランド名印字
				Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,										// 文字列１：サブブランドデータ
							"",												// 文字列２：NULL
							pri_kind										// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_gyou++;

				if (j < sub_num) {
					// サブブランド名印字途中
					p_proc_data->Prn_no_data2 = j;
					break;
				}
				// サブブランド名印字完了
				p_proc_data->Prn_no_data2 = 0;
			}
// MH810105(E) MH364301 QRコード決済対応

			// 次のデータへ
			p_proc_data->Prn_no_data1++;
			if(p_proc_data->Prn_no_data1 < msg_data->pridata->num) {
				brand = &(msg_data->pridata->ctrl[p_proc_data->Prn_no_data1]);
			} else {
				brand = &(msg_data->pridata2->ctrl[p_proc_data->Prn_no_data1-msg_data->pridata->num]);
			}
			break;

		default:		// 受信電文編集処理
			break;
		}

// MH810105(S) MH364301 QRコード決済対応
		if (p_proc_data->Prn_no_data2 == 0) {
		// サブブランドデータ印字中は項目番号を進めない
// MH810105(E) MH364301 QRコード決済対応
		p_proc_data->Prn_no++;									// 項目番号を次に進める
// MH810105(S) MH364301 QRコード決済対応
		}
// MH810105(E) MH364301 QRコード決済対応

		if (p_proc_data->Prn_no_data1 >= ( msg_data->pridata->num + msg_data->pridata2->num )) {
		//　送信されたブランドの総数分、ブランドを印字する。
		// 最後まで印字登録を終えたら

			/*-----		仕切り行	-----*/
			PCMD_LEFT( pri_kind );								// [位置揃え(左揃え)]
			PrnStr( SikiriLine_Prn[3], pri_kind );				// 仕切り行印字ﾃﾞｰﾀ登録
			edit_gyou++;

			p_proc_data->Prn_no			= 0;					// 編集処理ﾜｰｸﾘｾｯﾄ
			p_proc_data->Prn_no_data1	= 0;
			p_proc_data->Prn_no_data2	= 0;
			p_proc_data->Prn_no_wk[0]	= 0;
			p_proc_data->Final = ON;							// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
			break;
		}
	}
}

//[]----------------------------------------------------------------------[]
//	@brief			決済リーダアラームレシート印字ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
//	@param[in]		*msg_data		アラームレシートデータポインタ
//	@param[in]		pri_kind		ﾌﾟﾘﾝﾀ種別<br>
//	@param[in/out]	p_proc_data		編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
//	@return			void
//	@author			Inaba
//	@attention		Sanden_AlmRct_edit移植
//	@note			none
//[]----------------------------------------------------------------------[]
//	@date			Create	:	2019/02/14<br>
//					Update	:	
//[]------------------------------------- Copyright(C) 2019 AMANO Corp.---[]
void	Ec_AlmRct_edit(T_FrmEcAlmRctReq *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	ushort	work;				// ﾜｰｸ領域
	uchar	edit_gyou = 0;		// 編集済み行数
	uchar	edit_cnt;			// 編集行数ﾜｰｸ
	uchar	edit_flg = YES;		// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）

	uchar	work_id[2];			// ロゴ／ヘッダー印字の設定有無
	uchar	i;
	uchar	primax;				// 印字最大項目数
	EC_SETTLEMENT_RES	*almrct;

	almrct = msg_data->alm_rct_info;
	// ※今回はジャーナル印字のみ(レシート印字する際は"primax"を変更すること)
	switch (almrct->brand_no) {
	case BRANDNO_KOUTSUU:
// MH810103 GG119202(S) 電子マネー対応
//		primax = 9;
// MH810103 GG119202(S) 交通系ブランドの決済結果データフォーマット修正
//		primax = 10;
		primax = 12;
// MH810103 GG119202(E) 交通系ブランドの決済結果データフォーマット修正
// MH810103 GG119202(E) 電子マネー対応
		break;
	case	BRANDNO_EDY:
// MH810103 MHUT40XX(S) Edy・WAON対応
//		primax = 12;
		primax = 14;
// MH810103 MHUT40XX(E) Edy・WAON対応
		break;
	case	BRANDNO_NANACO:
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		primax = 11;
		primax = 13;
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		break;
	case	BRANDNO_WAON:
		primax = 12;
		break;
	case	BRANDNO_SAPICA:
		primax = 11;
		break;
	case	BRANDNO_ID:
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		primax = 9;
		primax = 11;
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		break;
	case	BRANDNO_QUIC_PAY:
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		primax = 9;
		primax = 11;
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		break;
	default :
		return;
	}

	work_id[0] = work_id[1] = 0;
	for (i = 4; i < 50; i++) {
	// ロゴとヘッダー印字の設定有無を検索
		work = (ushort)prm_get(COM_PRM, S_RTP, (short)i, 3, 1);	// 印字設定ﾘｰﾄﾞ
		if (work == 1) {										// ﾛｺﾞ印字設定有り？
			work_id[0] = 1;
		}
		else if (work == 2) {									// ﾍｯﾀﾞｰ印字設定有り？
			work_id[1] = 1;
		}

		if (work_id[0] == 1 && work_id[1] == 1) {				// 両方設定済みの場合検索終了
			break;
		}
	}

	for ( ; edit_flg; ) {	// 編集処理ﾙｰﾌﾟ

		/*--------------------------------------*/
		/*	１ﾌﾞﾛｯｸ編集最大行数ﾁｪｯｸ処理			*/
		/*--------------------------------------*/
		if ((edit_gyou > 0) && ((edit_gyou + 1) > EDIT_GYOU_MAX)) {
		//	１ﾌﾞﾛｯｸ編集の最大行数を超えてしまう場合
			edit_flg = NO;										// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）
		}

		if (edit_flg == YES) {
		// 対象設定項目番号に設定されている印字内容＝印字する　且つ　１ﾌﾞﾛｯｸ編集の最大行数を超えない場合

			edit_cnt = 0;		// 編集行数ﾘｾｯﾄ
			/*--------------------------------------*/
			/*	１項目編集処理						*/
			/*--------------------------------------*/
			switch (p_proc_data->Prn_no) {		// 設定されている印字内容番号により各処理へ分岐
			case	0:		// ＜未使用＞
				break;

			case	1:		// ＜ロゴ＞編集処理
				if (CPrmSS[S_PRN][3] == 0 || CPrmSS[S_PRN][3] == 2) {
					if (work_id[0] == 1) {
						edit_cnt = Prn_edit_logo(pri_kind);
					}
				}
				break;

			case	2:		// ＜ヘッダー＞編集処理
				if (CPrmSS[S_PRN][3] == 0 || CPrmSS[S_PRN][3] == 1) {
					if (work_id[1] == 1) {
						edit_cnt = Prn_edit_headhoot(PRI_HEADER, pri_kind);
					}
				}
				break;

			case	3:		// ＜表題＞編集処理
				Prn_edit_Title	(										// 表題（"アラーム情報"）印字ﾃﾞｰﾀ編集
// MH810103 GG119202(S) 交通系ブランドの決済結果データフォーマット修正
//									"アラーム取引",
									"処理未了レシート",
// MH810103 GG119202(E) 交通系ブランドの決済結果データフォーマット修正
									FONT_K_YOKOBAI,
									pri_kind
								);
// MH810103 MHUT40XX(S) Edy・WAON対応
				if (almrct->brand_no == BRANDNO_EDY) {
					PCMD_LEFT( pri_kind );								// [位置揃え(左揃え)]
					PrnFontSize( FONT_A_NML, pri_kind );				// ﾌｫﾝﾄＡ（通常）指定
					PrnFontSize( FONT_K_NML, pri_kind );				// 漢字（通常）指定
					PrnStr(ElectronEc_prn[47], pri_kind );				// ﾒｯｾｰｼﾞ（１行）印字ﾃﾞｰﾀ登録
					edit_cnt++;
				}
// MH810103 MHUT40XX(E) Edy・WAON対応
				if (pri_kind == R_PRI) {
				/*------	１行空白	------*/
					Prn_edit_space(pri_kind);
					edit_cnt++;
				}
				edit_cnt++;
				break;

			case	4:		// ＜発生時刻＞編集処理
				PCMD_LEFT(pri_kind);									// [位置揃え(左揃え)]
				PrnFontSize(FONT_A_NML, pri_kind);						// ﾌｫﾝﾄＡ（通常）指定
				PrnFontSize(FONT_K_NML, pri_kind);						// 漢字（通常）指定
				Prn_edit_Date3(cEditwk1, &msg_data->TOutTime);			// cEditwk1←発生時刻印字ﾃﾞｰﾀ
				Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
							"発生時刻",									// 文字列１："発生時刻"
							cEditwk1,									// 文字列２：発生時刻印字ﾃﾞｰﾀ
							pri_kind									// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;
				break;

			case	5:		// 電子マネーごとに編集処理
				PrnFontSize(FONT_A_NML, pri_kind);		// ﾌｫﾝﾄＡ（通常）指定
				PrnFontSize(FONT_K_NML, pri_kind);		// 漢字（通常）指定
				PCMD_LEFT(pri_kind);					// [位置揃え(左揃え)]
			// no break;
			case	6:
			case	7:
			case	8:
			case	9:
			case	10:
			case	11:
// MH810103 MHUT40XX(S) Edy・WAON対応
			case	12:
			case	13:
// MH810103 MHUT40XX(E) Edy・WAON対応
			// ※電子マネー種ごとに印字が異なる

				edit_cnt += Ec_AlmRct_edit_sub(almrct, convert_brandno(almrct->brand_no), pri_kind, p_proc_data);
				break;

			default:		// その他（印字項目番号ｴﾗｰ）
				break;
			}
			edit_gyou = (uchar)(edit_gyou + edit_cnt);	// 編集済み行数更新

			if ((p_proc_data->Prn_no_data1 == 0) && (p_proc_data->Prn_no_data2 == 0)) {
			// 項目番号の印字ﾃﾞｰﾀを全て編集終了した場合
				p_proc_data->Prn_no++;					// 設定項目番号＋１
			}
		}

		if (p_proc_data->Prn_no >= primax) {
		// 最後まで印字内容編集終了の場合
			edit_flg = NO;								// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）

			p_proc_data->Prn_no			= 0;			// 編集処理ﾜｰｸﾘｾｯﾄ
			p_proc_data->Prn_no_data1	= 0;
			p_proc_data->Prn_no_data2	= 0;

			if (p_proc_data->Log_Edit == OFF) {
			// 精算履歴印字でない場合
				p_proc_data->Final = ON;				// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
			}
		}
	}
}

//[]----------------------------------------------------------------------[]
//	@brief			決済リーダアラームレシート印字ﾃﾞｰﾀ編集
//[]----------------------------------------------------------------------[]
//	@param[in]		*almrct		:	アラームレシートデータポインタ
//	@param[in]		pay_brand	:	決済ブランド
//	@param[in]		pri_kind	:	ﾌﾟﾘﾝﾀ種別<br>
//	@param[in]		p_proc_data	:	編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
//	@return			edit_cnt
//	@author			Inaba
//	@attention		None
//	@note			Sanden_AlmRct_edit_sub移植
//[]----------------------------------------------------------------------[]
//	@date			Create	:	2019/02/14<br>
//					Update	:	
//[]------------------------------------- Copyright(C) 2019 AMANO Corp.---[]
uchar	Ec_AlmRct_edit_sub(EC_SETTLEMENT_RES *almrct, uchar pay_brand, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	uchar	edit_cnt;			// 編集行数ﾜｰｸ
// MH810103 GG119202(S) 交通系ブランドの決済結果データフォーマット修正
	ushort	i, j;
// MH810103 GG119202(E) 交通系ブランドの決済結果データフォーマット修正

	edit_cnt = 0;
	switch (pay_brand) {
	case	EC_EDY_USED:
	// Edy
		switch (p_proc_data->Prn_no) {
		case	5:		// "<Edyカード情報>"
// MH810103 MHUT40XX(S) Edy・WAON対応
//			PrnStr(ElectronEc_prn[4], pri_kind);							// 印字ﾃﾞｰﾀ登録
			Prn_edit_Title( ElectronEc_prn[4], FONT_K_NML, pri_kind );
// MH810103 MHUT40XX(E) Edy・WAON対応
			edit_cnt++;
			break;
// MH810103 MHUT40XX(S) Edy・WAON対応
//		case	6:		// Edy取引前残高
		case	6:		// 加盟店名
			if (pri_kind == J_PRI) {
				// 加盟店名はジャーナルのみ印字
				memset(cEditwk2, 0, sizeof(cEditwk2));
				memcpy(cEditwk2, almrct->Brand.Edy.Kamei, sizeof(almrct->Brand.Edy.Kamei));
				Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
							cEditwk2,										// 文字列１：加盟店名
							"",												// 文字列２：NULL
							pri_kind										// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;
				break;
			}
			else {
				p_proc_data->Prn_no++;
			}
			// no break
		case	7:		// Edy取引前残高
			if (almrct->settlement_data_before == 0) {
				sprintf(cMnydata, "*****");									// 料金印字ﾃﾞｰﾀ編集
			}
			else {
// MH810103 MHUT40XX(E) Edy・WAON対応
			sprintf(cMnydata, "%ld", almrct->settlement_data_before);		// 料金印字ﾃﾞｰﾀ編集
// MH810103 MHUT40XX(S) Edy・WAON対応
			}
// MH810103 MHUT40XX(E) Edy・WAON対応
			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
						Electron_prn[28],									// 文字列１："Edy取引前残高"
						"",													// 文字列２：NULL
						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
						Pri_Tanni[PriT_YEN],								// 文字列４：円
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
// MH810103 MHUT40XX(S) Edy・WAON対応
//		case	7:		// Edy支払額
		case	8:		// Edy支払額
// MH810103 MHUT40XX(E) Edy・WAON対応
			sprintf(cMnydata, "%ld", almrct->settlement_data);				// 料金印字ﾃﾞｰﾀ編集
			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
						Electron_prn[25],									// 文字列１："Edy支払"
						"",													// 文字列２：NULL
						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
						Pri_Tanni[PriT_YEN],								// 文字列４：円
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
// MH810103 MHUT40XX(S) Edy・WAON対応
//		case	8:		// Edy番号
//			memset(cEditwk2, 0x20, sizeof(cEditwk2));
//			memcpy(&cEditwk2[0], &almrct->Card_ID[0], 4);
//			memcpy(&cEditwk2[5], &almrct->Card_ID[4], 4);
//			memcpy(&cEditwk2[10], &almrct->Card_ID[8], 4);
//			memcpy(&cEditwk2[15], &almrct->Card_ID[12], 4);
//			cEditwk2[19] = '\0';	// stopper
//			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//						Electron_prn[27],									// 文字列１：Edy番号
//						cEditwk2,											// 文字列２：Edy番号印字ﾃﾞｰﾀ
//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//			break;
//		case	9:		// Edy取引通番
//			memset(cEditwk2, 0, sizeof(cEditwk2));
//			intoasl((uchar*)cEditwk2, (ulong)almrct->Brand.Edy.DealNo, 10);	// 取引通番（10進数：10桁、0パディング）
//			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//						Electron_prn[0],									// 文字列１：Edy取引通番
//						cEditwk2,											// 文字列２：Edy取引通番印字ﾃﾞｰﾀ
//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//			break;
//		case	10:		// カード取引通番
//			memset(cEditwk2, 0, sizeof(cEditwk2));
//			intoasl((uchar*)cEditwk2, (ulong)almrct->Brand.Edy.CardDealNo, 5);	// カード取引通番（10進数：5桁、0パディング）
//			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//						Electron_prn[1],									// 文字列１：カード取引通番
//						cEditwk2,											// 文字列２：カード取引通番印字ﾃﾞｰﾀ
//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//			break;
//		case	11:		// 上位端末ID
//			memset(cEditwk2, 0, sizeof(cEditwk2));
//			sprintf(cEditwk2, "%08lX%08lX", almrct->Brand.Edy.TerminalNo[0]		// 上位端末ID①（16進数：16桁、0パディング）
//										  , almrct->Brand.Edy.TerminalNo[1]);	// 上位端末ID②
//			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//						Electron_prn[2],									// 文字列１：上位端末ID
//						cEditwk2,											// 文字列２：上位端末ID印字ﾃﾞｰﾀ
//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//			break;
		case	9:		// Edy番号
			memset(cEditwk2, 0, sizeof(cEditwk2));
			// カード番号を4桁ずつで区切る
			for (i = 0, j = 0; i < 4; i++) {
				memcpy(&cEditwk2[j], &almrct->Card_ID[i*4], 4);
				if (i < 3) {
					j += 4;
					cEditwk2[j++] = ' ';
				}
			}
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						Electron_prn[27],									// 文字列１：Edy番号
						cEditwk2,											// 文字列２：Edy番号印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	10:		// Edy取引通番
			if (pri_kind == J_PRI) {
				memset(cEditwk2, 0, sizeof(cEditwk2));
				memcpy(cEditwk2, almrct->Brand.Edy.DealNo, 10);				// Edy取引通番（10桁）
				Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
							Electron_prn[0],								// 文字列１：Edy取引通番
							cEditwk2,										// 文字列２：Edy取引通番印字ﾃﾞｰﾀ
							pri_kind										// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;
				break;
			}
			else {
				p_proc_data->Prn_no++;
			}
			// no break
		case	11:		// カード取引通番
			if (pri_kind == J_PRI) {
				memset(cEditwk2, 0, sizeof(cEditwk2));
				memcpy(cEditwk2, almrct->Brand.Edy.CardDealNo, 5);			// カード取引通番（5桁）
				Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
							Electron_prn[1],								// 文字列１：カード取引通番
							cEditwk2,										// 文字列２：カード取引通番印字ﾃﾞｰﾀ
							pri_kind										// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;
				break;
			}
			else {
				p_proc_data->Prn_no++;
			}
			// no break
		case	12:		// 上位端末ID
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, almrct->Brand.Edy.TerminalNo, 8);			// 上位端末ID（8桁）
			Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
						Electron_prn[2],								// 文字列１：上位端末ID
						cEditwk2,										// 文字列２：上位端末ID印字ﾃﾞｰﾀ
						pri_kind										// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	13:		// 問い合わせ番号
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, almrct->inquiry_num, sizeof(almrct->inquiry_num));	// 問い合わせ番号(15桁)
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[42],									// 文字列１：問い合わせ番号
						cEditwk2,											// 文字列２：問い合わせ番号印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
// MH810103 MHUT40XX(E) Edy・WAON対応
		default	:
			break;
		}
		break;
	case	EC_NANACO_USED:
	// nanaco
		switch (p_proc_data->Prn_no) {
		case	5:		// "<nanacoカード情報>"
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//			PrnStr(ElectronEc_prn[5], pri_kind);							// 印字ﾃﾞｰﾀ登録
			Prn_edit_Title( ElectronEc_prn[5], FONT_K_NML, pri_kind );
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
			edit_cnt++;
			break;
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		case	6:		// nanaco取引前残高
		case	6:		// 加盟店名
			if (pri_kind == J_PRI) {
				// 加盟店名はジャーナルのみ印字
				memset(cEditwk2, 0, sizeof(cEditwk2));
				memcpy(cEditwk2, almrct->Brand.Nanaco.Kamei, sizeof(almrct->Brand.Nanaco.Kamei));
				Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
							cEditwk2,										// 文字列１：加盟店名
							"",												// 文字列２：NULL
							pri_kind										// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;
				break;
			}
			else {
				p_proc_data->Prn_no++;
			}
			// no break
		case	7:		// nanaco取引前残高
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
// MH810105(S) MH364301 未了残高照会タイムアウト時の動作仕様変更
			if (almrct->settlement_data_before == 0) {
				sprintf(cMnydata, "*****");									// 料金印字ﾃﾞｰﾀ編集
			}
			else {
// MH810105(E) MH364301 未了残高照会タイムアウト時の動作仕様変更
			sprintf(cMnydata, "%ld", almrct->settlement_data_before);		// 料金印字ﾃﾞｰﾀ編集
// MH810105(S) MH364301 未了残高照会タイムアウト時の動作仕様変更
			}
// MH810105(E) MH364301 未了残高照会タイムアウト時の動作仕様変更
			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[24],									// 文字列１："nanaco取引前残高"
						"",													// 文字列２：NULL
						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
						Pri_Tanni[PriT_YEN],								// 文字列４：円
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		case	7:		// nanaco支払額
		case	8:		// nanaco支払額
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
			sprintf(cMnydata, "%ld", almrct->settlement_data);				// 料金印字ﾃﾞｰﾀ編集
			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[7],									// 文字列１："nanaco支払額"
						"",													// 文字列２：NULL
						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
						Pri_Tanni[PriT_YEN],								// 文字列４：円
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		case	8:		// nanaco番号
//			memset(cEditwk2, 0, sizeof(cEditwk2));
//			memcpy(cEditwk2, almrct->Card_ID, ECARDID_SIZE_SUICA);
//			memset(&cEditwk2[12], '*', 4);									// 下位4桁マスキング固定
		case	9:		// nanaco番号
			memset(cEditwk2, 0, sizeof(cEditwk2));
			// カード番号を4桁ずつで区切る
			for (i = 0, j = 0; i < 4; i++) {
				memcpy(&cEditwk2[j], &almrct->Card_ID[i*4], 4);
				if (i < 3) {
					j += 4;
					cEditwk2[j++] = ' ';
				}
			}
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[6],									// 文字列１：nanaco番号
						cEditwk2,											// 文字列２：nanaco番号印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		case	9:		// 上位端末ID
//			memset(cEditwk2, 0, sizeof(cEditwk2));
//			intoasl((uchar*)cEditwk2, (ulong)almrct->Brand.Nanaco.TerminalNo[0], 8);		// 上位端末ID①（10進数：20桁　上位9桁マスキング、0パディング）
//			intoasl((uchar*)&cEditwk2[8], (ulong)almrct->Brand.Nanaco.TerminalNo[1], 8);	// 上位端末ID②
//			intoasl((uchar*)&cEditwk2[16], (ulong)almrct->Brand.Nanaco.TerminalNo[2], 4);	// 上位端末ID③
//			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//						Electron_prn[2],									// 文字列１：上位端末ID
//						cEditwk2,											// 文字列２：上位端末ID印字ﾃﾞｰﾀ
//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//			break;
//		case	10:		// 上位端末ID 通番
//			memset(cEditwk2, 0, sizeof(cEditwk2));
//			sprintf((char*)cEditwk2, "%09ld", almrct->Brand.Nanaco.DealNo);// 上位端末ID 通番（10進数：9桁、0パディング）
//			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//						"",													// 文字列１：""
//						cEditwk2,											// 文字列２：上位端末ID 通番印字ﾃﾞｰﾀ
//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//			break;
		case	10:		// 端末取引通番
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, almrct->Brand.Nanaco.DealNo, 6);				// 端末取引通番（ASCII：6桁）
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[48],									// 文字列１：端末取引通番
						cEditwk2,											// 文字列２：端末取引通番印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	11:		// 上位端末ID
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, almrct->Brand.Nanaco.TerminalNo, 20);			// 上位端末ID（ASCII：20桁）
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						Electron_prn[2],									// 文字列１：上位端末ID
						cEditwk2,											// 文字列２：上位端末ID印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	12:		// 問い合わせ番号
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, almrct->inquiry_num, sizeof(almrct->inquiry_num));	// 問い合わせ番号(15桁)
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[42],									// 文字列１：問い合わせ番号
						cEditwk2,											// 文字列２：問い合わせ番号印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		default	:
			break;
		}
		break;
	case	EC_WAON_USED:
	// WAON
		switch (p_proc_data->Prn_no) {
		case	5:		// "<WAONカード情報>"
// MH810103 MHUT40XX(S) Edy・WAON対応
//			PrnStr(ElectronEc_prn[9], pri_kind);							// 印字ﾃﾞｰﾀ登録
			Prn_edit_Title( ElectronEc_prn[9], FONT_K_NML, pri_kind );
// MH810103 MHUT40XX(E) Edy・WAON対応
			edit_cnt++;
			break;
// MH810103 MHUT40XX(S) Edy・WAON対応
//		case	6:		// WAONカードID
//			memset(cEditwk2, 0, sizeof(cEditwk2));
//			memcpy(cEditwk2, almrct->Card_ID, ECARDID_SIZE_SUICA);
//			memset(cEditwk2, '*', 4);										// 上位4桁マスキング固定
		case	6:		// 加盟店名
			if (pri_kind == J_PRI) {
				// 加盟店名はジャーナルのみ印字
				memset(cEditwk2, 0, sizeof(cEditwk2));
				memcpy(cEditwk2, almrct->Brand.Waon.Kamei, sizeof(almrct->Brand.Waon.Kamei));
				Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
							cEditwk2,										// 文字列１：加盟店名
							"",												// 文字列２：NULL
							pri_kind										// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;
				break;
			}
			else {
				p_proc_data->Prn_no++;
			}
			// no break
		case	7:		// WAONカードID
			memset(cEditwk2, 0, sizeof(cEditwk2));
			// カード番号を4桁ずつで区切る
			for (i = 0, j = 0; i < 4; i++) {
				memcpy(&cEditwk2[j], &almrct->Card_ID[i*4], 4);
				if (i < 3) {
					j += 4;
					cEditwk2[j++] = ' ';
				}
			}
// MH810103 MHUT40XX(E) Edy・WAON対応
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[10],									// 文字列１：WAONカードID
						cEditwk2,											// 文字列２：WAONカードID印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
// MH810103 MHUT40XX(S) Edy・WAON対応
//		case	7:		// 取引種別コード
//			memset(cEditwk2, 0, sizeof(cEditwk2));
//			hxtoasc((uchar*)cEditwk2, almrct->Brand.Waon.DealCode);			// 取引種別コード
//			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//						ElectronEc_prn[25],									// 文字列１：取引種別コード
//						cEditwk2,											// 文字列２：取引種別コード印字ﾃﾞｰﾀ
//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//			break;
//		case	8:		// 取引種別名
//			memset(cEditwk2, 0, sizeof(cEditwk2));
//			if (almrct->Brand.Waon.DealCode > 0x0d) {
//			// 範囲外："その他"
//				strcpy((char*)cEditwk2, (char*)WaonDealCode_prn[0]);
//			} else {
//				strcpy((char*)cEditwk2, (char*)WaonDealCode_prn[almrct->Brand.Waon.DealCode]);
//			}
//			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//						ElectronEc_prn[26],									// 文字列１：取引種別名
//						cEditwk2,											// 文字列２：取引種別名印字ﾃﾞｰﾀ
//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//			break;
//		case	9:		// 取引金額
//			sprintf(cMnydata, "%ld", almrct->settlement_data);				// 料金印字ﾃﾞｰﾀ編集
//			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
//			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//						ElectronEc_prn[27],									// 文字列１："取引金額"
//						"",													// 文字列２：NULL
//						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
//						Pri_Tanni[PriT_YEN],								// 文字列４：円
//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//			break;
//		case	10:		// WAON残高
//			sprintf(cMnydata, "%ld", almrct->settlement_data_before);		// 料金印字ﾃﾞｰﾀ編集
//			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
//			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//						(pri_kind == R_PRI) ? ElectronEc_prn[34]:ElectronEc_prn[12],
//						"",													// 文字列２：NULL
//						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
//						Pri_Tanni[PriT_YEN],								// 文字列４：円
//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//			break;
//		case	11:		// SPRWID
		case	8:		// WAON取引前残高
			if (almrct->settlement_data_before == 0) {
				sprintf(cMnydata, "*****");									// 料金印字ﾃﾞｰﾀ編集
			}
			else {
				sprintf(cMnydata, "%ld", almrct->settlement_data_before);	// 料金印字ﾃﾞｰﾀ編集
			}
			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[34],									// 文字列１："WAON取引前残高"
						"",													// 文字列２：NULL
						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
						Pri_Tanni[PriT_YEN],								// 文字列４：円
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	9:		// WAON支払
			sprintf(cMnydata, "%ld", almrct->settlement_data);				// 料金印字ﾃﾞｰﾀ編集
			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[11],									// 文字列１："WAON支払"
						"",													// 文字列２：NULL
						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
						Pri_Tanni[PriT_YEN],								// 文字列４：円
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	10:		// SPRWID
// MH810103 MHUT40XX(E) Edy・WAON対応
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, almrct->Brand.Waon.SPRW_ID, 13);
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[17],									// 文字列１：SPRWID
						cEditwk2,											// 文字列２：SPRWID印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
// MH810103 MHUT40XX(S) Edy・WAON対応
		case	11:		// 問い合わせ番号
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, almrct->inquiry_num, sizeof(almrct->inquiry_num));	// 問い合わせ番号(15桁)
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[42],									// 文字列１：問い合わせ番号
						cEditwk2,											// 文字列２：問い合わせ番号印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
// MH810103 MHUT40XX(E) Edy・WAON対応
		default	:
			break;
		}
		break;
	case	EC_SAPICA_USED:
	// SAPICA
		switch (p_proc_data->Prn_no) {
		case	5:		// "<SAPICAカード情報>"
			PrnStr(ElectronEc_prn[18], pri_kind);							// 印字ﾃﾞｰﾀ登録
			edit_cnt++;
			break;
		case	6:		// SAPICA取引前残高
			sprintf(cMnydata, "%ld", almrct->settlement_data_before);		// 料金印字ﾃﾞｰﾀ編集
			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[28],									// 文字列１："SAPICA取引前残高"
						"",													// 文字列２：NULL
						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
						Pri_Tanni[PriT_YEN],								// 文字列４：円
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	7:		// SAPICA支払額
			sprintf(cMnydata, "%ld", almrct->settlement_data);				// 料金印字ﾃﾞｰﾀ編集
			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[29],									// 文字列１："SAPICA支払額"
						"",													// 文字列２：NULL
						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
						Pri_Tanni[PriT_YEN],								// 文字列４：円
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	8:		// カード番号
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, almrct->Card_ID, ECARDID_SIZE_SAPICA);
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[19],									// 文字列１：カード番号
						cEditwk2,											// 文字列２：カード番号印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	9:		// 端末ID
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, almrct->Brand.Sapica.Terminal_ID, 7);			// 物販端末ID（ASCII:7桁）
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[22],									// 文字列１：端末ID
						cEditwk2,											// 文字列２：端末ID印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	10:		// 明細ID
			memset(cEditwk2, 0, sizeof(cEditwk2));
			sprintf((char*)cEditwk2, "%10ld", almrct->Brand.Sapica.Details_ID);	// 一件明細ID（10進数:最大10桁。0サプレス右詰め）
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[23],									// 文字列１：明細ID
						cEditwk2,											// 文字列２：明細ID 通番印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		default	:
			break;
		}
		break;
	case	EC_KOUTSUU_USED:
	// 交通系ICカード
		switch (p_proc_data->Prn_no) {
		case	5:		// "<交通系ICカード情報>"
// MH810103 GG119202(S) 交通系ブランドの決済結果データフォーマット修正
//			PrnStr(ElectronEc_prn[36], pri_kind);						// 印字ﾃﾞｰﾀ登録
			Prn_edit_Title( ElectronEc_prn[36], FONT_K_NML, pri_kind );
// MH810103 GG119202(E) 交通系ブランドの決済結果データフォーマット修正
			edit_cnt++;
			break;
// MH810103 GG119202(S) 交通系ブランドの決済結果データフォーマット修正
//		case	6:		// カード番号
//			memset(cEditwk2, 0, sizeof(cEditwk2));
//			memcpy(cEditwk2, almrct->Card_ID, ECARDID_SIZE_KOUTSUU);
//			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//						ElectronEc_prn[19],									// 文字列１：カード番号
//						cEditwk2,											// 文字列２：カード番号印字ﾃﾞｰﾀ
//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//			break;
//		case	7:		// 支払い前残高
//			sprintf(cMnydata, "%ld", almrct->settlement_data_before);		// 料金印字ﾃﾞｰﾀ編集
//			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
//			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//						ElectronEc_prn[37],									// 文字列１："支払い前残高"
//						"",													// 文字列２：NULL
//						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
//						Pri_Tanni[PriT_YEN],								// 文字列４：円
//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//			break;
//		case	8:		// カード支払額
//			sprintf(cMnydata, "%ld", almrct->settlement_data);				// 料金印字ﾃﾞｰﾀ編集
//			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
//			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//						ElectronEc_prn[20],									// 文字列１："カード支払額"
//						"",													// 文字列２：NULL
//						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
//						Pri_Tanni[PriT_YEN],								// 文字列４：円
//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//			break;
		case	6:		// 加盟店名
			if (pri_kind == J_PRI) {
				// 加盟店名はジャーナルのみ印字
				memset(cEditwk2, 0, sizeof(cEditwk2));
				memcpy(cEditwk2, almrct->Brand.Koutsuu.Kamei, sizeof(almrct->Brand.Koutsuu.Kamei));
				Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
							cEditwk2,										// 文字列１：加盟店名
							"",												// 文字列２：NULL
							pri_kind										// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;
				break;
			}
			else {
				p_proc_data->Prn_no++;
			}
			// no break
		case	7:		// 交通系取引前残高
// MH810103 GG119202(S) カード処理中受信後の決済NG（304）の扱い
			if (almrct->settlement_data_before == 0) {
				sprintf(cMnydata, "*****");									// 料金印字ﾃﾞｰﾀ編集
			}
			else {
// MH810103 GG119202(E) カード処理中受信後の決済NG（304）の扱い
			sprintf(cMnydata, "%ld", almrct->settlement_data_before);		// 料金印字ﾃﾞｰﾀ編集
// MH810103 GG119202(S) カード処理中受信後の決済NG（304）の扱い
			}
// MH810103 GG119202(E) カード処理中受信後の決済NG（304）の扱い
			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[45],									// 文字列１："交通系取引前残高"
						"",													// 文字列２：NULL
						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
						Pri_Tanni[PriT_YEN],								// 文字列４：円
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	8:		// 交通系支払
			memset(cEditwk2, 0, sizeof(cEditwk2));
			sprintf(cEditwk2, "  %s", ElectronEc_prn[36]);
			sprintf(cMnydata, "%ld", almrct->settlement_data);				// 料金印字ﾃﾞｰﾀ編集
			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,											// 文字列１："交通系支払"
						"",													// 文字列２：NULL
						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
						Pri_Tanni[PriT_YEN],								// 文字列４：円
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	9:		// カード番号
			memset(cEditwk2, 0, sizeof(cEditwk2));
			// カード番号を4桁ずつで区切る(先頭は5桁で区切る)
			memcpy(&cEditwk2[0], &almrct->Card_ID, 5);
			j = 5;
			cEditwk2[j++] = ' ';
			for (i = 0; i < 3; i++) {
				memcpy(&cEditwk2[j], &almrct->Card_ID[5+(i*4)], 4);
				if (i < 2) {
					j += 4;
					cEditwk2[j++] = ' ';
				}
			}
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[19],									// 文字列１：カード番号
						cEditwk2,											// 文字列２：カード番号印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	10:		// SPRWID
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, almrct->Brand.Koutsuu.SPRW_ID, sizeof(almrct->Brand.Koutsuu.SPRW_ID));
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
// MH810103 GG119202(S) 処理未了取引記録に再精算情報を印字する
//						ElectronEc_prn[17],									// 文字列１：SPRWID
						ElectronEc_prn[43],									// 文字列１：端末番号
// MH810103 GG119202(E) 処理未了取引記録に再精算情報を印字する
						cEditwk2,											// 文字列２：SPRWID印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
// MH810103 GG119202(E) 交通系ブランドの決済結果データフォーマット修正
// MH810103 GG119202(S) 電子マネー対応
// MH810103 GG119202(S) 交通系ブランドの決済結果データフォーマット修正
//		case	9:	// 問い合わせ番号
		case	11:		// 問い合わせ番号
// MH810103 GG119202(E) 交通系ブランドの決済結果データフォーマット修正
			memset(cEditwk3, 0, sizeof(cEditwk3));
			memcpy(cEditwk3, almrct->inquiry_num, sizeof(almrct->inquiry_num));		// 問い合わせ番号(15桁)
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[42],									// 文字列１：問い合わせ番号
						cEditwk3,											// 文字列２：問い合わせ番号印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
// MH810103 GG119202(E) 電子マネー対応
		default	:
			break;
		}
		break;
	case	EC_ID_USED:
	// iD
		switch (p_proc_data->Prn_no) {
		case	5:		// "<iDカード情報>"
//		case	5:		// "<iDカード情報>"
//			PrnStr(ElectronEc_prn[39], pri_kind);						// 印字ﾃﾞｰﾀ登録//			edit_cnt++;//			break;//		case	6:		// カード番号//			memset(cEditwk2, 0, sizeof(cEditwk2));//			memcpy(cEditwk2, almrct->Card_ID, ECARDID_SIZE_SUICA);//			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----//						ElectronEc_prn[19],									// 文字列１：カード番号//						cEditwk2,											// 文字列２：カード番号印字ﾃﾞｰﾀ//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ//					);//			edit_cnt++;//			break;//		case	7:		// 支払い前残高//			sprintf(cMnydata, "%ld", almrct->settlement_data_before);		// 料金印字ﾃﾞｰﾀ編集//			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）//			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----//						ElectronEc_prn[37],									// 文字列１："支払い前残高"//						"",													// 文字列２：NULL//						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ//						Pri_Tanni[PriT_YEN],								// 文字列４：円//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ//					);//			edit_cnt++;//			break;//		case	8:		// カード支払額//			sprintf(cMnydata, "%ld", almrct->settlement_data);				// 料金印字ﾃﾞｰﾀ編集//			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）//			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----//						ElectronEc_prn[20],									// 文字列１："カード支払額"//						"",													// 文字列２：NULL//						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ//						Pri_Tanni[PriT_YEN],								// 文字列４：円//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ//					);//			edit_cnt++;//			break;		case	5:		// iD支払			Prn_edit_Title( ElectronEc_prn[38], FONT_K_NML, pri_kind );			edit_cnt++;
// MH810104(S) nanaco・iD・QUICPay対応2
			Prn_edit_Title( ElectronEc_prn[38], FONT_K_NML, pri_kind );
			edit_cnt++;
// MH810104(E) nanaco・iD・QUICPay対応2
			break;
		case	6:		// 加盟店名
			if (pri_kind == J_PRI) {
				// 加盟店名はジャーナルのみ印字
				memset(cEditwk2, 0, sizeof(cEditwk2));
				memcpy(cEditwk2, almrct->Brand.Id.Kamei, sizeof(almrct->Brand.Id.Kamei));
				Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
							cEditwk2,										// 文字列１：加盟店名
							"",												// 文字列２：NULL
							pri_kind										// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;
				break;
			}
			else {
				p_proc_data->Prn_no++;
			}
			// no break
		case	7:		// カード支払額
			sprintf(cMnydata, "%ld", almrct->settlement_data);				// 料金印字ﾃﾞｰﾀ編集
			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
			memset(cEditwk2, 0, sizeof(cEditwk2));
// MH810104(S) nanaco・iD・QUICPay対応2
//			sprintf(cEditwk2, "  %s%s", ElectronEc_prn[38], ElectronEc_prn[51]);
// MH810105(S) MH364301 未了残高照会タイムアウト時の動作仕様変更
//			sprintf(cEditwk2, "  %s%s", ElectronEc_prn[38], ElectronEc_prn[50]);
			if(almrct->Result == EPAY_RESULT_MIRYO){						// 直前取引内容印字
				sprintf(cEditwk2, "  %s%s", ElectronEc_prn[38], ElectronEc_prn[50]);
			} else {
				sprintf(cEditwk2, "  %s", ElectronEc_prn[38]);
			}
// MH810105(E) MH364301 未了残高照会タイムアウト時の動作仕様変更
// MH810104(E) nanaco・iD・QUICPay対応2
			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,											// 文字列１："iD支払取引不成立"
						"",													// 文字列２：NULL
						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
						Pri_Tanni[PriT_YEN],								// 文字列４：円
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	8:		// カード番号
			memset(cEditwk2, 0, sizeof(cEditwk2));
// MH810104(S) nanaco・iD・QUICPay対応2
			memset(cEditwk3, 0, sizeof(cEditwk3));
			memcpy(cEditwk3, almrct->Card_ID, sizeof(almrct->Card_ID));
			memset(&cEditwk3[13], '*', 3);									// 下位3桁をマスク
// MH810104(E) nanaco・iD・QUICPay対応2
			// カード番号を4桁ずつで区切る
			for (i = 0, j = 0; i < 4; i++) {
// MH810104(S) nanaco・iD・QUICPay対応2
//				memcpy(&cEditwk2[j], &almrct->Card_ID[i*4], 4);
				memcpy(&cEditwk2[j], &cEditwk3[i*4], 4);
// MH810104(E) nanaco・iD・QUICPay対応2
				if (i < 3) {
					j += 4;
					cEditwk2[j++] = ' ';
				}
			}
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[41],									// 文字列１：カード番号
						cEditwk2,											// 文字列２：カード番号印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	9:		// 上位端末ID
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, almrct->Brand.Id.TerminalNo, 13);				// 上位端末ID（ASCII：13桁）
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						Electron_prn[2],									// 文字列１：上位端末ID
						cEditwk2,											// 文字列２：上位端末ID印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	10:		// 問い合わせ番号
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, almrct->inquiry_num, sizeof(almrct->inquiry_num));	// 問い合わせ番号(15桁)
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[42],									// 文字列１：問い合わせ番号
						cEditwk2,											// 文字列２：問い合わせ番号印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		default	:
			break;
		}
		break;
	case	EC_QUIC_PAY_USED:
	// QUICPay
		switch (p_proc_data->Prn_no) {
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
//		case	5:		// "<QUICPayカード情報>"
//			PrnStr(ElectronEc_prn[41], pri_kind);						// 印字ﾃﾞｰﾀ登録
//			edit_cnt++;
//			break;
//		case	6:		// カード番号
//			memset(cEditwk2, 0, sizeof(cEditwk2));
//			memcpy(cEditwk2, almrct->Card_ID, ECARDID_SIZE_SUICA);
//			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//						ElectronEc_prn[19],									// 文字列１：カード番号
//						cEditwk2,											// 文字列２：カード番号印字ﾃﾞｰﾀ
//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//			break;
//		case	7:		// 支払い前残高
//			sprintf(cMnydata, "%ld", almrct->settlement_data_before);		// 料金印字ﾃﾞｰﾀ編集
//			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
//			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//						ElectronEc_prn[37],									// 文字列１："支払い前残高"
//						"",													// 文字列２：NULL
//						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
//						Pri_Tanni[PriT_YEN],								// 文字列４：円
//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//			break;
//		case	8:		// カード支払額
//			sprintf(cMnydata, "%ld", almrct->settlement_data);				// 料金印字ﾃﾞｰﾀ編集
//			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
//			Str_Set2(														// -----印字ﾃﾞｰﾀ編集-----
//						ElectronEc_prn[20],									// 文字列１："カード支払額"
//						"",													// 文字列２：NULL
//						cMnydata,											// 文字列３：料金印字ﾃﾞｰﾀ
//						Pri_Tanni[PriT_YEN],								// 文字列４：円
//						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//					);
//			edit_cnt++;
//			break;
		case	5:		// QUICPay支払
			Prn_edit_Title( ElectronEc_prn[40], FONT_K_NML, pri_kind );
			edit_cnt++;
			break;
		case	6:		// 加盟店名
			if (pri_kind == J_PRI) {
				// 加盟店名はジャーナルのみ印字
				memset(cEditwk2, 0, sizeof(cEditwk2));
				memcpy(cEditwk2, almrct->Brand.QuicPay.Kamei, sizeof(almrct->Brand.QuicPay.Kamei));
				Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
							cEditwk2,										// 文字列１：加盟店名
							"",												// 文字列２：NULL
							pri_kind										// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;
				break;
			}
			else {
				p_proc_data->Prn_no++;
			}
			// no break
		case	7:		// カード支払額
			sprintf(cMnydata, "%ld", almrct->settlement_data);				// 料金印字ﾃﾞｰﾀ編集
			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memset(cEditwk3, 0, sizeof(cEditwk3));
// MH810105(S) MH364301 未了残高照会タイムアウト時の動作仕様変更
//			sprintf(cEditwk2, "  %s%s", ElectronEc_prn[40], ElectronEc_prn[50]);
			if(almrct->Result == EPAY_RESULT_MIRYO){						// 直前取引内容印字
				sprintf(cEditwk2, "  %s%s", ElectronEc_prn[40], ElectronEc_prn[50]);
			} else {
				sprintf(cEditwk2, "  %s", ElectronEc_prn[40]);
			}
// MH810105(E) MH364301 未了残高照会タイムアウト時の動作仕様変更
			sprintf(cEditwk3, "%s%s", cMnydata, Pri_Tanni[PriT_YEN]);
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,											// 文字列１："QUICPay支払取引不成立"
						cEditwk3,											// 文字列２：料金印字ﾃﾞｰﾀ＋円
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	8:		// カード番号
			memset(cEditwk2, 0, sizeof(cEditwk2));
// MH810104(S) nanaco・iD・QUICPay対応2
			memset(cEditwk3, 0, sizeof(cEditwk3));
			memcpy(cEditwk3, almrct->Card_ID, sizeof(almrct->Card_ID));
			memset(&cEditwk3[16], '*', 4);									// 下位4桁をマスク
// MH810104(E) nanaco・iD・QUICPay対応2
			// カード番号を4桁ずつで区切る
			for (i = 0, j = 0; i < 5; i++) {
// MH810104(S) nanaco・iD・QUICPay対応2
//				memcpy(&cEditwk2[j], &almrct->Card_ID[i*4], 4);
				memcpy(&cEditwk2[j], &cEditwk3[i*4], 4);
// MH810104(E) nanaco・iD・QUICPay対応2
				if (i < 4) {
					j += 4;
					cEditwk2[j++] = ' ';
				}
			}
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[41],									// 文字列１：カード番号
						cEditwk2,											// 文字列２：カード番号印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	9:		// 上位端末ID
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, almrct->Brand.QuicPay.TerminalNo, 13);			// 上位端末ID（ASCII：13桁）
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						Electron_prn[2],									// 文字列１：上位端末ID
						cEditwk2,											// 文字列２：上位端末ID印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	10:		// 問い合わせ番号
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, almrct->inquiry_num, sizeof(almrct->inquiry_num));	// 問い合わせ番号(15桁)
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[42],									// 文字列１：問い合わせ番号
						cEditwk2,											// 文字列２：問い合わせ番号印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
		default	:
			break;
		}
		break;
// MH810105(S) MH364301 PiTaPa対応
	case	EC_PITAPA_USED:
	// PiTaPa
		switch (p_proc_data->Prn_no) {
		case	5:		// PiTaPa支払
			Prn_edit_Title( ElectronEc_prn[57], FONT_K_NML, pri_kind );
			edit_cnt++;
			break;
		case	6:		// 加盟店名
			if (pri_kind == J_PRI) {
				// 加盟店名はジャーナルのみ印字
				memset(cEditwk2, 0, sizeof(cEditwk2));
				memcpy(cEditwk2, almrct->Brand.Pitapa.Kamei, sizeof(almrct->Brand.Pitapa.Kamei));
				Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
							cEditwk2,										// 文字列１：加盟店名
							"",												// 文字列２：NULL
							pri_kind										// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;
				break;
			}
			else {
				p_proc_data->Prn_no++;
			}
			// no break
		case	7:		// カード支払額
			sprintf(cMnydata, "%ld", almrct->settlement_data);				// 料金印字ﾃﾞｰﾀ編集
			Camma_Set((uchar*)cMnydata);									// ３桁区切り（”、”挿入）
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memset(cEditwk3, 0, sizeof(cEditwk3));
			if(almrct->Result == EPAY_RESULT_MIRYO){						// 直前取引内容印字
				sprintf(cEditwk2, "  %s%s", ElectronEc_prn[57], ElectronEc_prn[50]);
			} else {
				sprintf(cEditwk2, "  %s", ElectronEc_prn[57]);
			}
			sprintf(cEditwk3, "%s%s", cMnydata, Pri_Tanni[PriT_YEN]);
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						cEditwk2,											// 文字列１："PiTaPa支払取引不成立"
						cEditwk3,											// 文字列２：料金印字ﾃﾞｰﾀ＋円
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	8:		// カード番号
			memset(cEditwk2, 0, sizeof(cEditwk2));
			// カード番号を4桁ずつで区切る(先頭は5桁で区切る)
			memcpy(&cEditwk2[0], &almrct->Card_ID, 5);
			j = 5;
			cEditwk2[j++] = ' ';
			for (i = 0; i < 3; i++) {
				memcpy(&cEditwk2[j], &almrct->Card_ID[5+(i*4)], 4);
				if (i < 2) {
					j += 4;
					cEditwk2[j++] = ' ';
				}
			}
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[41],									// 文字列１：会員番号
						cEditwk2,											// 文字列２：会員番号印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	9:		// 上位端末ID
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, almrct->Brand.Pitapa.TerminalNo, 13);			// 上位端末ID（ASCII：13桁）
			Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
						Electron_prn[2],									// 文字列１：上位端末ID
						cEditwk2,											// 文字列２：上位端末ID印字ﾃﾞｰﾀ
						pri_kind											// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	10:		// 問い合わせ番号
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, almrct->inquiry_num, sizeof(almrct->inquiry_num));		// 問い合わせ番号(15桁)
			Str_Set1(																// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[42],											// 文字列１：問い合わせ番号
						cEditwk2,													// 文字列２：問い合わせ番号印字ﾃﾞｰﾀ
						pri_kind													// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		}
		break;
// MH810105(E) MH364301 PiTaPa対応
// MH810105(S) MH364301 QRコード決済対応
	case	EC_QR_USED:
		switch (p_proc_data->Prn_no) {
		case	5:		// 取引種別
			memset(cEditwk2, 0, sizeof(cEditwk2));
			EcGetSubBrandName(BRANDNO_QR, 1, almrct->Brand.Qr.PayKind, (uchar*)cEditwk2);
			Prn_edit_Title(cEditwk2, FONT_K_NML, pri_kind);
			edit_cnt++;
			break;
		case	6:			// 利用額
			memset(cEditwk2, 0, sizeof(cEditwk2));
			sprintf(cMnydata, "%ld", almrct->settlement_data);							// 料金印字ﾃﾞｰﾀ編集
			sprintf(cEditwk1, "  %s", ElectronEc_prn[55]);								// 利用額
			Camma_Set((uchar*)cMnydata);												// ３桁区切り（”、”挿入）
			Str_Set2(																	// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,														// 文字列１："利用額"
						"",																// 文字列２：NULL
						cMnydata,														// 文字列３：料金印字ﾃﾞｰﾀ
						Pri_Tanni[PriT_YEN],											// 文字列４：円
						pri_kind														// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	7:			// 支払端末ID
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cEditwk2, almrct->Brand.Qr.PayTerminalNo, 20);						// 支払端末ID
			Str_Set1(																	// -----印字ﾃﾞｰﾀ編集-----
						ElectronEc_prn[22],												// 文字列１：端末ID
						cEditwk2,														// 文字列２：端末ID印字ﾃﾞｰﾀ
						pri_kind														// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		case	8:		//取引番号
			memset(cEditwk2, 0, sizeof(cEditwk2));
			sprintf(cEditwk1, "  %s", ElectronEc_prn[53]);								// 取引番号
			memcpy(cEditwk2, almrct->inquiry_num,sizeof(almrct->inquiry_num));			// 取引番号
			Str_Set1(																	// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,														// 文字列１：取引番号
						cEditwk2,														// 文字列２：取引番号印字ﾃﾞｰﾀ
						pri_kind														// 印字先ﾌﾟﾘﾝﾀ
					);
			edit_cnt++;
			break;
		}
		break;
// MH810105(E) MH364301 QRコード決済対応
// MH810105(S) MH364301 決済処理中に障害が発生した時の動作処理改善
	case	EC_CREDIT_USED:
		// クレジットカードで決済状態＝みなし決済受信はないため、
		// みなし決済時と同等の印字を行う
		switch (p_proc_data->Prn_no) {
		case	5:			// ｸﾚｼﾞｯﾄｶｰﾄﾞ会社名
			sprintf( cEditwk1, "  ｸﾚｼﾞｯﾄ明細");
			Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
				cEditwk1,								// 文字列１：ｸﾚｼﾞｯﾄｶｰﾄﾞ会社名
				"",										//
				pri_kind								// 印字先ﾌﾟﾘﾝﾀ
			);
			edit_cnt++;
			break;
		case	6:			// ｸﾚｼﾞｯﾄｶｰﾄﾞ会員No
			memset( cEditwk1,0,sizeof(cEditwk1) );
			memcpy(cEditwk1, almrct->Card_ID, ECARDID_SIZE_CREDIT);
			Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
				"  会員No.",							// 文字列１："  会員No."
				cEditwk1,								// 文字列２：ｸﾚｼﾞｯﾄｶｰﾄﾞ会員No.
				pri_kind								// 印字先ﾌﾟﾘﾝﾀ
			);
			edit_cnt++;
			break;
		case	7:			// ｸﾚｼﾞｯﾄｶｰﾄﾞ伝票No
			memset(cEditwk1,0,sizeof(cEditwk1));
			memset(cEditwk1, '*', 5);
			Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
				"  伝票No.",							// 文字列１："  伝票No."
				cEditwk1,								// 文字列２：ｸﾚｼﾞｯﾄｶｰﾄﾞ伝票No.
				pri_kind								// 印字先ﾌﾟﾘﾝﾀ
			);
			edit_cnt++;
			break;
		case	8:			// ｸﾚｼﾞｯﾄｶｰﾄﾞ承認No
			memset(cEditwk1,0,sizeof(cEditwk1));
			memcpy(cEditwk1, almrct->Brand.Credit.Approval_No,
					sizeof(almrct->Brand.Credit.Approval_No));
			Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
				"  承認No.",							// 文字列１："  承認No."
				cEditwk1,								// 文字列２：ｸﾚｼﾞｯﾄｶｰﾄﾞ承認No.
				pri_kind								// 印字先ﾌﾟﾘﾝﾀ
			);
			edit_cnt++;
			break;
		case	9:			// ｸﾚｼﾞｯﾄｶｰﾄﾞ利用額
			sprintf(cMnydata, "%ld", almrct->settlement_data);	// 料金印字ﾃﾞｰﾀ編集
			Camma_Set((uchar*)cMnydata);						// ３桁区切り（”、”挿入）
			Str_Set2(									// -----印字ﾃﾞｰﾀ編集-----
				"  利用額",								// 文字列１："利用額"
				"",										// 文字列２：NULL
				cMnydata,								// 文字列３：料金印字ﾃﾞｰﾀ
				Pri_Tanni[PriT_YEN],					// 文字列４：円
				pri_kind								// 印字先ﾌﾟﾘﾝﾀ
			);
			edit_cnt++;
			break;
		case	10:			// ｸﾚｼﾞｯﾄｶｰﾄﾞ端末No
			PCMD_LEFT( pri_kind );						// [位置揃え(左揃え)]
			sprintf(cEditwk1,"  端末No. %s", almrct->Brand.Credit.Id_No);
			Str_Set1(									// -----印字ﾃﾞｰﾀ編集-----
				cEditwk1,								// 文字列１：" TNo. " + 端末識別番号
				NULL,									// 文字列２：NULL
				pri_kind								// 印字先ﾌﾟﾘﾝﾀ
			);
			edit_cnt++;
			break;
		}
		break;
// MH810105(E) MH364301 決済処理中に障害が発生した時の動作処理改善

	default :
		break;
	}
	return edit_cnt;
}

//[]----------------------------------------------------------------------[]
//	@brief			処理未了取引ログ印字ﾃﾞｰﾀ編集処理
//[]----------------------------------------------------------------------[]
//	@param[in]		msg_data		ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ
//	@param[in]		pri_kind		印字先ﾌﾟﾘﾝﾀ
//										R_PRI  : ﾚｼｰﾄ<br>
//										J_PRI  : ｼﾞｬｰﾅﾙ
//	@param[in]		p_proc_data		編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
//	@return			void
//	@author			Inaba
//	@note			Sanden_AlmRctLog_edit移植
//	@attention		None
//[]----------------------------------------------------------------------[]
//	@date			Create	:	2019/02/14<br>
//					Update	:	
//[]------------------------------------- Copyright(C) 2019 AMANO Corp.---[]
void	Ec_AlmRctLog_edit(T_FrmEcAlarmLog *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ
// MH810105 GG119202(S) T合計連動印字対応
	ulong	StartTime = 0;
	ulong	EndTime = 0;
// MH810105 GG119202(E) T合計連動印字対応

	if( p_proc_data->Log_Start == OFF ){
		/*表題印字*/
		Prn_edit_Title	(												// 表題（"処理未了取引記録"）印字ﾃﾞｰﾀ編集
							"処理未了取引記録",
							FONT_K_YOKOBAI,
							pri_kind
						);
		
		Prn_edit_space(pri_kind);										// 空白一行

// MH810105 GG119202(S) T合計連動印字対応
		// T合計連動印字時は機械No.、印字時刻を印字しない
		if (p_proc_data->Prn_no_wk[9] == 0) {
// MH810105 GG119202(E) T合計連動印字対応
		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet(	prn_work, msg_data->Kikai_no );						// 機械NO.編集
		PCMD_LEFT( pri_kind );											// [位置揃え(左揃え)]
		PrnFontSize( FONT_A_NML, pri_kind );							// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );							// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );									// 印字ﾃﾞｰﾀ登録

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );									// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );										// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnFontSize( FONT_A_NML, pri_kind );							// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize( FONT_K_NML, pri_kind );							// 漢字（通常）指定
		PrnStr( prn_work, pri_kind );									// 時刻　印字ﾃﾞｰﾀ登録

		Prn_edit_space( pri_kind );										// 空白一行
// MH810105 GG119202(S) T合計連動印字対応
		}
// MH810105 GG119202(E) T合計連動印字対応

		p_proc_data->Log_Start	= ON;									// Log_Start	← ﾛｸﾞﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ
		p_proc_data->Prn_no_wk[0] = 0;									// ログ数のカウントとして使用
		p_proc_data->Prn_no_wk[1] = 0;									// 
		p_proc_data->Prn_no_wk[2] = 0;									// カード情報印字最大項目数
// MH810105 GG119202(S) T合計連動印字対応
// GG129000(S) M.Fujikawa 2023/09/26 ゲート式車番チケットレスシステム対応　最終行に「処理未了取引記録なし」と印字してしまう　不具合#7134
//		p_proc_data->Prn_no_wk[8] = 0;									// 1件印字ありフラグ
		p_proc_data->Prn_no_wk[4] = 0;									// 1件印字ありフラグ
// GG129000(E) M.Fujikawa 2023/09/26 ゲート式車番チケットレスシステム対応　最終行に「処理未了取引記録なし」と印字してしまう　不具合#7134
// MH810105 GG119202(E) T合計連動印字対応
	} else {
		// 最大5件印字
		if (p_proc_data->Prn_no_wk[0] < EcAlarmLog_GetCount()) {
// MH810105 GG119202(S) T合計連動印字対応
//			Ec_AlmRctLog_edit_sub( pri_kind, p_proc_data );				// 処理未了取引ログ編集
			// 開始・終了日時をセット
			StartTime = msg_data->StartTime;
			EndTime = msg_data->EndTime;
			Ec_AlmRctLog_edit_sub( pri_kind, StartTime, EndTime, p_proc_data );	// 処理未了取引ログ編集
// MH810105 GG119202(E) T合計連動印字対応
		}else {
			edit_end = ON;
// MH810105 GG119202(S) T合計連動印字対応
			if (p_proc_data->Prn_no_wk[9] != 0 &&
// GG129000(S) M.Fujikawa 2023/09/26 ゲート式車番チケットレスシステム対応　最終行に「処理未了取引記録なし」と印字してしまう　不具合#7134
//				p_proc_data->Prn_no_wk[8] == 0) {
				p_proc_data->Prn_no_wk[4] == 0) {
// GG129000(E) M.Fujikawa 2023/09/26 ゲート式車番チケットレスシステム対応　最終行に「処理未了取引記録なし」と印字してしまう　不具合#7134
				Prn_edit_Title( "処理未了取引記録なし", FONT_K_NML, pri_kind );
			}
// MH810105 GG119202(E) T合計連動印字対応
		}
	}

	/*------	編集終了ﾁｪｯｸ	------*/
	if( edit_end == ON ){	
		p_proc_data->Final = ON;										// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
// MH810105 GG119202(S) T合計連動印字対応
// GG129000(S) M.Fujikawa 2023/09/26 ゲート式車番チケットレスシステム対応　最終行に「処理未了取引記録なし」と印字してしまう　不具合#7134
//		p_proc_data->Prn_no_wk[8] = 0;
		p_proc_data->Prn_no_wk[4] = 0;
// GG129000(E) M.Fujikawa 2023/09/26 ゲート式車番チケットレスシステム対応　最終行に「処理未了取引記録なし」と印字してしまう　不具合#7134
// MH810105 GG119202(E) T合計連動印字対応
	}
}

//[]----------------------------------------------------------------------[]
//	@brief			処理未了取引ログ印字ﾃﾞｰﾀ編集処理
//[]----------------------------------------------------------------------[]
//	@param[in]		pri_kind		印字先ﾌﾟﾘﾝﾀ
//										R_PRI  : ﾚｼｰﾄ<br>
//										J_PRI  : ｼﾞｬｰﾅﾙ
// MH810105 GG119202(S) T合計連動印字対応
//	@param[in]		StartTime		開始日時
//	@param[in]		EndTime			終了日時
// MH810105 GG119202(E) T合計連動印字対応
//	@param[in]		p_proc_data		編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
//	@return			void
//	@author			Inaba
//	@note			Sanden_AlmRctLog_edit_sub移植
//	@attention		None
//[]----------------------------------------------------------------------[]
//	@date			Create	:	2019/02/14<br>
//					Update	:	
//[]------------------------------------- Copyright(C) 2019 AMANO Corp.---[]
// MH810105 GG119202(S) T合計連動印字対応
//void	Ec_AlmRctLog_edit_sub(uchar pri_kind, PRN_PROC_DATA *p_proc_data)
void	Ec_AlmRctLog_edit_sub(uchar pri_kind, ulong StartTime, ulong EndTime, PRN_PROC_DATA *p_proc_data)
// MH810105 GG119202(E) T合計連動印字対応
{
	static	t_ALARM_SETTLEMENT_DATA	almrct;
	short	ret;
	uchar	brand_index;
// MH810103 GG119202(S) 処理未了取引記録に再精算情報を印字する
	uchar	ret2 = NO;
	uchar	Flap_Sub_FlgB;				// バックアップ用変数
// MH810103 GG119202(E) 処理未了取引記録に再精算情報を印字する
// MH810105 GG119202(S) T合計連動印字対応
	ulong	Nrm_Alarm;
// MH810105 GG119202(E) T合計連動印字対応

// MH810103(s) 電子マネー対応 未了取引記録対応
	ushort	usLen = 0;
// MH810103(e) 電子マネー対応 未了取引記録対応
// MH810103(s) 電子マネー対応 #5525 処理未了取引に対応する再精算情報が印字されない
	uchar	CarDataIDZero[32];
// MH810103(e) 電子マネー対応 #5525 処理未了取引に対応する再精算情報が印字されない

// MH810103(s) 電子マネー対応 #5525 処理未了取引に対応する再精算情報が印字されない
	memset(CarDataIDZero,0,sizeof(CarDataIDZero));
// MH810103(e) 電子マネー対応 #5525 処理未了取引に対応する再精算情報が印字されない
	// ログを1件分取得
// MH810103 GG119202(S) 処理未了取引記録に再精算情報を印字する
//	ret = EcAlarmLog_LogRead((short)p_proc_data->Prn_no_wk[0], &almrct);
	memset(&Pri_Work[0].Receipt_data, 0, sizeof(Receipt_data));
	ret = EcAlarmLog_LogRead((short)p_proc_data->Prn_no_wk[0], &almrct, &Pri_Work[0].Receipt_data);
// MH810103 GG119202(E) 処理未了取引記録に再精算情報を印字する
	brand_index = convert_brandno(almrct.alarm_data.brand_no);
// MH810105 GG119202(S) T合計連動印字対応
	if (ret == 1 && StartTime != 0 && EndTime != 0) {
		// T合計連動印字

		// 開始日時～終了日時に含まれるかチェックする
		Nrm_Alarm = Nrm_YMDHM((date_time_rec*)&almrct.alarm_time);
		if (Nrm_Alarm < StartTime || EndTime < Nrm_Alarm) {
			// データ範囲外扱いとする
			ret = -1;
		}
	}
// MH810105 GG119202(E) T合計連動印字対応

	if ((ret == -1) || (ret == 0)) {
	// データなしor範囲外
// MH810103 GG119202(S) 処理未了取引記録に再精算情報を印字する
//		p_proc_data->Prn_no_wk[1] = 1;
		p_proc_data->Prn_no_wk[1] = 2;
// MH810103 GG119202(E) 処理未了取引記録に再精算情報を印字する
	}

	if ( !p_proc_data->Prn_no_wk[1] ) {

// MH810103 GG119202(S) 交通系ブランドの決済結果データフォーマット修正
//		if ((brand_index == EC_EDY_USED) ||
//			(brand_index == EC_WAON_USED)) {
//			p_proc_data->Prn_no_wk[2] = 12;
//		} else {
//			p_proc_data->Prn_no_wk[2] = 11;
//		}
		switch (brand_index) {
		case EC_EDY_USED:
// MH810103 MHUT40XX(S) Edy・WAON対応
			p_proc_data->Prn_no_wk[2] = 14;
			break;
// MH810103 MHUT40XX(E) Edy・WAON対応
		case EC_WAON_USED:
		case EC_KOUTSUU_USED:
// MH810105(S) MH364301 PiTaPa対応
		case EC_PITAPA_USED:
// MH810105(E) MH364301 PiTaPa対応
			p_proc_data->Prn_no_wk[2] = 12;
			break;
// MH810103 MHUT40XX(S) nanaco・iD・QUICPay対応
		case EC_NANACO_USED:
			p_proc_data->Prn_no_wk[2] = 13;
			break;
// MH810103 MHUT40XX(E) nanaco・iD・QUICPay対応
// MH810105(S) MH364301 QRコード決済対応
		case EC_QR_USED:
			p_proc_data->Prn_no_wk[2] = 14;
			break;
// MH810105(E) MH364301 QRコード決済対応
		default:
			p_proc_data->Prn_no_wk[2] = 11;
			break;
		}
// MH810103 GG119202(E) 交通系ブランドの決済結果データフォーマット修正
		
		// 印字番号
		memset(cEditwk2, 0, sizeof(cEditwk2));
// MH810103 GG118807_GG118907(S) 「未了残高照会完了」時にも未了確定をカウントする
//		sprintf(cEditwk2, "[No%d]", (p_proc_data->Prn_no_wk[0]+1));
		sprintf(cEditwk2, "[No.%02d]", (p_proc_data->Prn_no_wk[0]+1));
// MH810103 GG118807_GG118907(E) 「未了残高照会完了」時にも未了確定をカウントする
		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
					cEditwk2,											// 文字列１：印字番号
// MH810103 GG118807_GG118907(S) 「未了残高照会完了」時にも未了確定をカウントする
//					" ----------------------------",					// 文字列２：仕切線
					" --------------------------",						// 文字列２：仕切線
// MH810103 GG118807_GG118907(E) 「未了残高照会完了」時にも未了確定をカウントする
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
		
		// 発生時刻
		PCMD_LEFT(pri_kind);											// [位置揃え(左揃え)]
		PrnFontSize(FONT_A_NML, pri_kind);								// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize(FONT_K_NML, pri_kind);								// 漢字（通常）指定
		Prn_edit_Date3(cEditwk1, (date_time_rec*)&almrct.alarm_time);	// cEditwk1←発生時刻印字ﾃﾞｰﾀ
		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
					"発生時刻",											// 文字列１："発生時刻"
					cEditwk1,											// 文字列２：発生時刻印字ﾃﾞｰﾀ
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);
			
// MH810103 GG118807_GG118907(S) 「未了残高照会完了」時にも未了確定をカウントする
		if (almrct.reason != 0) {
			// 未了理由
// MH810105 GG119202(S) 処理未了取引集計仕様改善
//			Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
//						"未了理由",										// 文字列１："未了理由"
//						AlarmReasonMsg[almrct.reason-1],				// 文字列２：未了理由印字ﾃﾞｰﾀ
//						pri_kind										// 印字先ﾌﾟﾘﾝﾀ
//					);
			memset(cEditwk2, 0, sizeof(cEditwk2));
			sprintf(cEditwk2, "未了理由：%s", AlarmReasonMsg[almrct.reason-1]);
			PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
			PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
			PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
			PrnStr( cEditwk2, pri_kind );								// 印字ﾃﾞｰﾀ登録
// MH810105 GG119202(E) 処理未了取引集計仕様改善
		}
// MH810103 GG118807_GG118907(E) 「未了残高照会完了」時にも未了確定をカウントする
		// <駐車券情報>
		Str_Set1(ElectronEc_prn[32], "", pri_kind);						// "<駐車情報>"

// MH810103(s) 電子マネー対応 未了取引記録対応
//		// 車室番号
//		Prn_edit_pkposi( cEditwk1, almrct.WPlace, 0 );					// cEditwk1←駐車位置印字ﾃﾞｰﾀ
//		memset(cEditwk2, 0, sizeof(cEditwk2));
//		Prn_edit_sya_syu( cEditwk2 , (ushort)almrct.syu ,1, 3);			// cEditwk2←車室番号＆車種ﾃﾞｰﾀ
//		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
//					cEditwk2,											// 文字列１：車室番号＆車種ﾃﾞｰﾀ
//					cEditwk1,											// 文字列２：駐車位置印字ﾃﾞｰﾀ
//					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
//				);

// MH810103(s) 電子マネー対応 #5521 処理未了取引記録に車番（精算）を印字する
		/*------	＜車番(精算))＞編集	------*/
//		sprintf( cEditwk1,"%s", Ryosyu_Content[14].print_data[14] );
		memset( cEditwk2, 0, sizeof(cEditwk2));
		memcpy( cEditwk2, almrct.CarNumber, sizeof(almrct.CarNumber) );
		Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
					"",												// 文字列１：""
					cEditwk2,										// 文字列２：駐車位置印字ﾃﾞｰﾀ
					pri_kind										// 印字先ﾌﾟﾘﾝﾀ
				);
// MH810103(e) 電子マネー対応 #5521 処理未了取引記録に車番（精算）を印字する
		/*------	＜車番データID＞編集	------*/
		memset( cEditwk2, 0, sizeof(cEditwk2));
		for( usLen = 0; usLen < 32; usLen++ ){
			if( almrct.CarDataID[usLen] == 0x00 ){
				break;
			}
		}
		sprintf( cEditwk1,"  %s", Ryosyu_Content[15].print_data[15] );	// [  ]スペース入れる
		if( usLen > CAR_ID_PRI_CNT_MAX ){
			memcpy( cEditwk2, almrct.CarDataID, CAR_ID_PRI_CNT_MAX );
			Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,										// 文字列１：車番データID
						cEditwk2,										// 文字列２：ﾃﾞｰﾀ
						pri_kind										// 印字先ﾌﾟﾘﾝﾀ
					);
			memset( cEditwk2, 0, sizeof(cEditwk2) );
			memcpy( cEditwk2, &almrct.CarDataID[CAR_ID_PRI_CNT_MAX], (usLen - CAR_ID_PRI_CNT_MAX) );
			Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
						"",
						cEditwk2,										// 文字列２：ﾃﾞｰﾀ
						pri_kind										// 印字先ﾌﾟﾘﾝﾀ
					);
		}else{
			memcpy( cEditwk2, almrct.CarDataID, sizeof(almrct.CarDataID) );
			Str_Set1(													// -----印字ﾃﾞｰﾀ編集-----
						cEditwk1,										// 文字列１：車番データID
						cEditwk2,										// 文字列２：ﾃﾞｰﾀ
						pri_kind										// 印字先ﾌﾟﾘﾝﾀ
					);
		}
// MH810103(e) 電子マネー対応 未了取引記録対応

		// 入庫日時
		PCMD_LEFT(pri_kind);											// [位置揃え(左揃え)]
		PrnFontSize(FONT_A_NML, pri_kind);								// ﾌｫﾝﾄＡ（通常）指定
		PrnFontSize(FONT_K_NML, pri_kind);								// 漢字（通常）指定
		Prn_edit_Date2(cEditwk1, (date_time_rec*)&almrct.TInTime);		// cEditwk1←入庫日時or精算日時印字ﾃﾞｰﾀ
		Str_Set1(														// -----印字ﾃﾞｰﾀ編集-----
					ElectronEc_prn[33],									// 文字列１："入庫日時"
					cEditwk1,											// 文字列２：発生時刻印字ﾃﾞｰﾀ
					pri_kind											// 印字先ﾌﾟﾘﾝﾀ
				);

		p_proc_data->Prn_no_wk[1] = 1;
// MH810105 GG119202(S) T合計連動印字対応
// GG129000(S) M.Fujikawa 2023/09/26 ゲート式車番チケットレスシステム対応　最終行に「処理未了取引記録なし」と印字してしまう　不具合#7134
//		p_proc_data->Prn_no_wk[8] = 1;										// 1件印字あり
		p_proc_data->Prn_no_wk[4] = 1;										// 1件印字あり
// GG129000(E) M.Fujikawa 2023/09/26 ゲート式車番チケットレスシステム対応　最終行に「処理未了取引記録なし」と印字してしまう　不具合#7134
// MH810105 GG119202(E) T合計連動印字対応
		p_proc_data->Prn_no = 5;											// ※Sanden_AlmRct_edit_sub()に合わせる
		
// MH810103 GG119202(S) 処理未了取引記録に再精算情報を印字する
//	} else {						
	} else if (p_proc_data->Prn_no_wk[1] == 1) {
		// 処理未了取引印字
// MH810103 GG119202(E) 処理未了取引記録に再精算情報を印字する
		// カード情報は既存のアラームレシート編集関数を使用する
		// ※WAONの場合、WAON取引前残高が既存と異なる
		while (p_proc_data->Prn_no < p_proc_data->Prn_no_wk[2]) {
			Ec_AlmRct_edit_sub(&almrct.alarm_data, brand_index, pri_kind, p_proc_data);
			p_proc_data->Prn_no++;
		}
// MH810103 GG119202(S) 処理未了取引記録に再精算情報を印字する
//		// 1件分終了
//		p_proc_data->Prn_no_wk[0]++;
//		p_proc_data->Prn_no_wk[1] = 0;
//		p_proc_data->Prn_no_wk[2] = 0;
//		p_proc_data->Prn_no = 0;
// MH810103(s) 電子マネー対応 #5525 処理未了取引に対応する再精算情報が印字されない
//		if (Pri_Work[0].Receipt_data.WPlace != 0) {
		if( memcmp(Pri_Work[0].Receipt_data.CarDataID,CarDataIDZero,sizeof(CarDataIDZero)) != 0){
// MH810103(e) 電子マネー対応 #5525 処理未了取引に対応する再精算情報が印字されない
			// 再精算情報がある場合は仕切り行を印字する
			PCMD_CENTER(pri_kind);							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
			sprintf(cEditwk1, "-----");
			PrnStr(cEditwk1, pri_kind);						// 仕切り行印字ﾃﾞｰﾀ登録
		}
		p_proc_data->Prn_no_wk[1] = 2;
		p_proc_data->Prn_no_wk[2] = 0;
		p_proc_data->Prn_no = 0;
	} else {

// MH810105 GG119202(S) T合計連動印字対応
//// MH810103(s) 電子マネー対応 #5525 処理未了取引に対応する再精算情報が印字されない
////		if (Pri_Work[0].Receipt_data.WPlace != 0) {
//		if( memcmp(Pri_Work[0].Receipt_data.CarDataID,CarDataIDZero,sizeof(CarDataIDZero)) != 0){
//// MH810103(e) 電子マネー対応 #5525 処理未了取引に対応する再精算情報が印字されない
		if (ret == 1 &&
		 	memcmp(Pri_Work[0].Receipt_data.CarDataID,CarDataIDZero,sizeof(CarDataIDZero)) != 0){
// MH810105 GG119202(E) T合計連動印字対応
			// 再精算情報印字(表題は印字しない)
// MH810103 GG119202(S) 未了取引記録に領収証の表題を印字する
//			// 再精算情報印字(表題は印字しない)
//			p_proc_data->Log_Edit = NOF;					// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞｾｯﾄ
			p_proc_data->Log_Edit = ON;						// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞｾｯﾄ
// MH810103 GG119202(E) 未了取引記録に領収証の表題を印字する

			Flap_Sub_FlgB = Flap_Sub_Flg;
			Flap_Sub_Flg = 0;

			ret2 = RYOUSYUU_edit(							// 印字対象精算ﾃﾞｰﾀ編集
									&Pri_Work[0].Receipt_data,
									pri_kind,
									p_proc_data
								);

			Flap_Sub_Flg = Flap_Sub_FlgB;
		}
		else {
			// 再精算情報なし
			ret2 = YES;
		}

		if (ret2 == YES) {
			// 1件分終了
			p_proc_data->Log_Edit = OFF;					// ﾛｸﾞﾃﾞｰﾀ編集中ﾌﾗｸﾞﾘｾｯﾄ

			p_proc_data->Prn_no_wk[0]++;
			p_proc_data->Prn_no_wk[1] = 0;
			p_proc_data->Prn_no_wk[2] = 0;
			p_proc_data->Prn_no = 0;
		}
// MH810103 GG119202(E) 処理未了取引記録に再精算情報を印字する
	}
}

//[]----------------------------------------------------------------------[]
///	@brief			決済リーダ日毎集計印字ﾃﾞｰﾀ編集処理
//[]----------------------------------------------------------------------[]
///	@param[in]		msg_data		ﾒｯｾｰｼﾞﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in]		pri_kind		印字先ﾌﾟﾘﾝﾀ
///										R_PRI  : ﾚｼｰﾄ<br>
///										J_PRI  : ｼﾞｬｰﾅﾙ
///	@param[in]		p_proc_data		編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
///	@author			Inaba
///	@note			None
///	@attention		None
//[]----------------------------------------------------------------------[]
///	@date			Create	:	2019/02/14<br>
///					Update	:	
//[]------------------------------------- Copyright(C) 2019 AMANO Corp.---[]
void EcSyuLog_edit( T_FrmLogPriReq2 *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{
	uchar	ret;				// ﾛｸﾞ情報ﾁｪｯｸ結果
	uchar	edit_end = OFF;		// 編集終了ﾌﾗｸﾞ（OFF：印字継続／ON：印字終了）
	uchar	edit_flg = YES;		// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）
	uchar	edit_cnt = 0;		// 編集行数
	uchar	f_cond_match = 0;	// 印字条件クリアフラグ(0:印字可能/1:印字不可)
	ushort	seisan_date;		// 集計日ﾃﾞｰﾀ
	ushort	Sdate, Edate;		// 検索開始日, 検索終了日情報

	syuukei_info2	*buf;		// 集計情報が保存されている領域のアドレス
	syu_dat2		*log;
	date_time_rec	b_tim;		// 集計日時
	ushort	brand, brand_no, title;

	buf = &Syuukei_sp.ec_inf;	// 集計ログの先頭へのアドレスをセット

	// 編集開始（初回編集）の場合
	if( p_proc_data->Log_Start == OFF ) {

		/*------	＜表題＞編集	------*/
		// 表題（"決済リーダ集計"）印字ﾃﾞｰﾀ編集
		Prn_edit_Title( LogTitle_prt[13], FONT_K_YOKOBAI, pri_kind );

		/*------	１行空白	------*/
		if( pri_kind == R_PRI ) {
			// 印字先＝レシートでない（ジャーナル印字またはログ印字の場合、スペース行なし）
			Prn_edit_space( pri_kind );
		}

		/*------	＜機械NO.＞編集	------*/
		KikaiNoSet( cEditwk1, msg_data->Kikai_no );					// 機械NO.編集
		Str_Set1( cEditwk1,	"", pri_kind );							// 文字列１：機械NO.印字ﾃﾞｰﾀ
																	// 文字列２：なし
																	// 印字先ﾌﾟﾘﾝﾀ

		/*------	＜時刻＞編集	------*/
		Prn_edit_NowDate( prn_work );								// 現在日時印字ﾃﾞｰﾀ編集
		PCMD_CENTER( pri_kind );									// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
		PrnStr( prn_work, pri_kind );								// 時刻　印字ﾃﾞｰﾀ登録

		Sdate = dnrmlzm(							// 検索開始日ﾃﾞｰﾀ取得
							(short)msg_data->TSttTime.Year,
							(short)msg_data->TSttTime.Mon,
							(short)msg_data->TSttTime.Day
						);
		Edate = dnrmlzm(							// 検索終了日ﾃﾞｰﾀ取得
							(short)msg_data->TEndTime.Year,
							(short)msg_data->TEndTime.Mon,
							(short)msg_data->TEndTime.Day
						);

		if( Sdate <= Edate ){	// 開始日／終了日ﾁｪｯｸ：検索開始日　＜＝　検索終了日（ＯＫ）
			p_proc_data->Log_Sdate = Sdate;			// 検索開始日ﾃﾞｰﾀｾｰﾌﾞ
			p_proc_data->Log_Edate = Edate;			// 検索終了日ﾃﾞｰﾀｾｰﾌﾞ
			ret = OK;
		}
		else{					// 検索開始日　＞　検索終了日（ＮＧ）
			Prn_errlg( ERR_PRNT_DATA_ERR, PRN_ERR_ONOFF, PRN_ERR_JOHO_ARI );	// 印字要求ﾃﾞｰﾀｴﾗｰ登録
			ret = NG;
		}

		if( ret == OK ) {

			// ﾛｸﾞ情報が正常な場合

			// 検索方法・指定日時印字
			edit_end = SearchTypeData_edit2(msg_data, p_proc_data, SearchKind_prt[13]);

			/*------	＜検索方法＞編集	------*/
			PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
			PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録

			p_proc_data->Log_Start	= ON;							// Log_Start	← ﾃﾞｰﾀ印字開始ﾌﾗｸﾞｾｯﾄ
			p_proc_data->Log_Count	= buf->cnt;						// Log_Count	← 件数ｾｯﾄ 

			// Log_DataPt	←最古ﾃﾞｰﾀ配列番号ｾｯﾄ
			p_proc_data->Log_DataPt	= ((buf->ptr + SYUUKEI_DAY_EC) - (buf->cnt - 1)) % SYUUKEI_DAY_EC;
			// 次の印字対象検索処理
			for(f_cond_match = 0; (!f_cond_match) && (p_proc_data->Log_Count); )
			{
				// 格納件数ﾃﾞｸﾘﾒﾝﾄ
				p_proc_data->Log_Count--;
				/* 有効データ判定 */
				seisan_date = dnrmlzm(					// 対象ﾛｸﾞ情報の精算日取得
						(short)buf->bun[p_proc_data->Log_DataPt].SyuTime.Year,
						(short)buf->bun[p_proc_data->Log_DataPt].SyuTime.Mon,
						(short)buf->bun[p_proc_data->Log_DataPt].SyuTime.Day
					);
				switch( msg_data->BType )	// 検索方法？
				{
				default:	// 規定にない値(異常)
				case	0:	// 全て
					f_cond_match = 1;						// 印字可能
					break;
				case	1:	// 日付指定
					/* 対象ﾛｸﾞ情報の精算日と指定日が一致 */
					if(seisan_date == p_proc_data->Log_Sdate)
					{
						f_cond_match = 1;					// 印字可能
					}
					break;
				case	2:	// 期間指定
					/* 対象ﾛｸﾞ情報の精算日と指定日が一致 */
					if((seisan_date >= p_proc_data->Log_Sdate) && (seisan_date <= p_proc_data->Log_Edate))
					{
						f_cond_match = 1;					// 印字可能
					}
					break;
				}
				if(!f_cond_match)
				{
					/* Log_DataPt ← 次に編集するﾛｸﾞ情報の配列番号ｾｯﾄ */
					p_proc_data->Log_DataPt	= Prn_log_search2( p_proc_data->Log_DataPt, SYUUKEI_DAY_EC );
				}
			}

			// 格納件数が０の場合＝集計データなしの場合
			if( !p_proc_data->Log_Count ) {
				// １行空白
				if( pri_kind == R_PRI ) {
					Prn_edit_space( pri_kind );
				}
				// Suica PASMO集計データなしの場合の印字
				Prn_edit_Title( "集計データなし", FONT_K_NML, pri_kind );
				// １行空白
				if( pri_kind == R_PRI ) {
					Prn_edit_space( pri_kind );
				}
				// 印字終了
				edit_end = ON;
			}
		}
		// ﾛｸﾞ情報が異常な場合
		else{
			// 印字終了
			edit_end = ON;
		}
	}	// 初回編集処理end

	// ２回目以降の編集処理	
	else {
		/*------------------------------------------------------------------------------*/
		/*	編集処理制御ﾜｰｸを以下のように使用する									   	*/
		/*		Prn_no_data1	：	処理中の印字項目番号を格納							*/
		/*								0：表題									      */
		/*								1：決済リーダ集計印字データ				    	*/
// MH810103 MHUT40XX(S) みなし決済の集計を新規に設ける
		/*								2：みなし決済集計印字データ				    	*/
		/*							 0xff：終わり			　　				    	*/
// MH810103 MHUT40XX(E) みなし決済の集計を新規に設ける
		/*		Prn_no_data2	：	電子マネーブランドｎ番目							*/
		/*------------------------------------------------------------------------------*/

		// 集計印字ﾃﾞｰﾀ編集処理ﾙｰﾌﾟ
		for( ; ((edit_flg == YES) || (edit_end == OFF)) ; ) {

			switch( p_proc_data->Prn_no_data1){		// 印字項目？

				case	0:		// ＜（決済リーダ集計日時）＞
					// １行空白
					if( pri_kind == R_PRI ) {
						// 印字先＝レシートでない（ジャーナル印字またはログ印字の場合、スペース行なし）
						Prn_edit_space( pri_kind );
						edit_cnt++;
					}
					// 集計の年月日を取得
					if (msg_data->BType == 0 || msg_data->BType == 2) {
						memcpy( &b_tim, &buf->bun[p_proc_data->Log_DataPt].SyuTime, sizeof(date_time_rec) );
						sprintf( cEditwk1, "<%04d/%02d/%02d分>", b_tim.Year, b_tim.Mon, b_tim.Day );
						PCMD_CENTER( pri_kind );							// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
						PrnStr( cEditwk1, pri_kind );						// 印字ﾃﾞｰﾀ登録

					}
					p_proc_data->Prn_no_data1++;
					break;

				case	1:		// ＜（決済リーダ集計印字データ）＞
					// マネー毎取引件数
					brand = BrandOrder[p_proc_data->Prn_no_data2][0] - EC_EDY_USED;
					title = BrandOrder[p_proc_data->Prn_no_data2][1];
					log = &buf->bun[p_proc_data->Log_DataPt];
					brand_no = ConvertEcBrandToNo(BrandOrder[p_proc_data->Prn_no_data2][0]);
					if ( !isEcBrandNoEnabledForRecvTbl(brand_no)
					&& log->cnt[brand] == 0L && log->ryo[brand] == 0L
// MH810105 GG119202(S) 処理未了取引集計仕様改善
//					&& log->cnt2[brand] == 0L && log->ryo2[brand] == 0L) {
						) {
// MH810105 GG119202(E) 処理未了取引集計仕様改善
					// 印字なし
						// 編集行数ﾁｪｯｸ
// MH810103 MHUT40XX(S) みなし決済の集計を新規に設ける
//						edit_flg = NO;
// MH810105 GG119202(S) 処理未了取引集計仕様改善
//						// 決済リーダ集計印字（最大4行）を印字する前に１ﾌﾞﾛｯｸ編集最大行数を超えそうな場合一旦抜ける
//						if( edit_cnt + 4 > EDIT_GYOU_MAX ){
						// 決済リーダ集計印字（最大2行）を印字する前に１ﾌﾞﾛｯｸ編集最大行数を超えそうな場合一旦抜ける
						if( edit_cnt + 2 > EDIT_GYOU_MAX ){
// MH810105 GG119202(E) 処理未了取引集計仕様改善
							edit_flg = NO;
						}
// MH810103 MHUT40XX(E) みなし決済の集計を新規に設ける
						p_proc_data->Prn_no_data2++;
						if (BrandOrder[p_proc_data->Prn_no_data2][0] == 0) {
// MH810103 MHUT40XX(S) みなし決済の集計を新規に設ける
//							p_proc_data->Prn_no_data1 = 0xff;
							// 最後にみなし決済の回数、金額を印字するためPrn_no_data1を2とする
							p_proc_data->Prn_no_data1 = 2;
							// みなし決済集計印字（最大2行）を印字する前に１ﾌﾞﾛｯｸ編集最大行数を超えそうな場合一旦抜ける
							if( edit_cnt + 2 > EDIT_GYOU_MAX ){
								edit_flg = NO;
							}
// MH810103 MHUT40XX(E) みなし決済の集計を新規に設ける
						}
						break;
					}
					if(log->unknownTimeCnt > 0) {
						edit_cnt += Prn_edit_Sitei1line_2( EcSyu[title], (ulong)log->cnt[brand],
// MH810103 GG119202(S) 集計印字の単位を「回数」にする
//														Pri_Tanni[PriT_KENSUU], Pri_Tanni[PriT_KEN], pri_kind );
														Pri_Tanni[PriT_KAISUU], Pri_Tanni[PriT_KAI], pri_kind );
// MH810103 GG119202(E) 集計印字の単位を「回数」にする
						// マネー毎取引金額
						edit_cnt += Prn_edit_Sitei1line_2( "", log->ryo[brand],
														Pri_Tanni[PriT_KINGAK], Pri_Tanni[PriT_YEN], pri_kind );

// MH810105 GG119202(S) 処理未了取引集計仕様改善
//						if (log->cnt2[brand] > 0) {
//							// マネー毎アラーム取引件数
//// MH810103 GG119202(S) 決済リーダー用集計印字設定追加
////							if ( BrandOrder[p_proc_data->Prn_no_data2][0] == EC_KOUTSUU_USED ) {
////								// アラーム用文字列
////								strcpy(cEditwk1, EcSyu[9]);
////							}
////							else {
//							{
//// MH810103 GG119202(E) 決済リーダー用集計印字設定追加
//								sprintf(cEditwk1, "%s%s", EcSyu[title], EcSyu[0]);
//							}
//							edit_cnt += Prn_edit_Sitei1line_2( cEditwk1, (ulong)log->cnt2[brand],
//// MH810103 GG119202(S) 集計印字の単位を「回数」にする
////															Pri_Tanni[PriT_KENSUU], Pri_Tanni[PriT_KEN], pri_kind );
//															Pri_Tanni[PriT_KAISUU], Pri_Tanni[PriT_KAI], pri_kind );
//// MH810103 GG119202(E) 集計印字の単位を「回数」にする
//							// マネー毎アラーム取引金額
//							edit_cnt += Prn_edit_Sitei1line_2( "", log->ryo2[brand],
//															Pri_Tanni[PriT_KINGAK], Pri_Tanni[PriT_YEN], pri_kind );
//						}
// MH810105 GG119202(E) 処理未了取引集計仕様改善
					} else {
						edit_cnt += Prn_edit_Sitei1line( EcSyu[title], (ulong)log->cnt[brand],
// MH810103 GG119202(S) 集計印字の単位を「回数」にする
//														Pri_Tanni[PriT_KENSUU], Pri_Tanni[PriT_KEN], pri_kind );
														Pri_Tanni[PriT_KAISUU], Pri_Tanni[PriT_KAI], pri_kind );
// MH810103 GG119202(E) 集計印字の単位を「回数」にする
						// マネー毎取引金額
						edit_cnt += Prn_edit_Sitei1line( "", log->ryo[brand],
														Pri_Tanni[PriT_KINGAK], Pri_Tanni[PriT_YEN], pri_kind );

// MH810105 GG119202(S) 処理未了取引集計仕様改善
//						if (log->cnt2[brand] > 0) {
//							// マネー毎アラーム取引件数
//// MH810103 GG119202(S) 決済リーダー用集計印字設定追加
////							if ( BrandOrder[p_proc_data->Prn_no_data2][0] == EC_KOUTSUU_USED ) {
////								// アラーム用文字列
////								strcpy(cEditwk1, EcSyu[9]);
////							}
////							else {
//							{
//// MH810103 GG119202(E) 決済リーダー用集計印字設定追加
//								sprintf(cEditwk1, "%s%s", EcSyu[title], EcSyu[0]);
//							}
//							edit_cnt += Prn_edit_Sitei1line( cEditwk1, (ulong)log->cnt2[brand],
//// MH810103 GG119202(S) 集計印字の単位を「回数」にする
////															Pri_Tanni[PriT_KENSUU], Pri_Tanni[PriT_KEN], pri_kind );
//															Pri_Tanni[PriT_KAISUU], Pri_Tanni[PriT_KAI], pri_kind );
//// MH810103 GG119202(E) 集計印字の単位を「回数」にする
//							// マネー毎アラーム取引金額
//							edit_cnt += Prn_edit_Sitei1line( "", log->ryo2[brand],
//															Pri_Tanni[PriT_KINGAK], Pri_Tanni[PriT_YEN], pri_kind );
//						}
// MH810105 GG119202(E) 処理未了取引集計仕様改善
					}
					// 編集行数ﾁｪｯｸ
// MH810103 MHUT40XX(S) みなし決済の集計を新規に設ける
//					edit_flg = NO;
// MH810105 GG119202(S) 処理未了取引集計仕様改善
//					// 決済リーダ集計印字（最大4行）を印字する前に１ﾌﾞﾛｯｸ編集最大行数を超えそうな場合一旦抜ける
//					if( edit_cnt + 4 > EDIT_GYOU_MAX ){
					// 決済リーダ集計印字（最大2行）を印字する前に１ﾌﾞﾛｯｸ編集最大行数を超えそうな場合一旦抜ける
					if( edit_cnt + 2 > EDIT_GYOU_MAX ){
// MH810105 GG119202(E) 処理未了取引集計仕様改善
						edit_flg = NO;
					}
// MH810103 MHUT40XX(E) みなし決済の集計を新規に設ける
					p_proc_data->Prn_no_data2++;
					if (BrandOrder[p_proc_data->Prn_no_data2][0] == 0) {
// MH810103 MHUT40XX(S) みなし決済の集計を新規に設ける
//						p_proc_data->Prn_no_data1 = 0xff;
						// 最後にみなし決済の回数、金額を印字するためPrn_no_data1を2とする
						p_proc_data->Prn_no_data1 = 2;
						// みなし決済集計印字（最大2行）を印字する前に１ﾌﾞﾛｯｸ編集最大行数を超えそうな場合一旦抜ける
						if( edit_cnt + 2 > EDIT_GYOU_MAX ){
							edit_flg = NO;
						}
// MH810103 MHUT40XX(E) みなし決済の集計を新規に設ける
					}
					break;
// MH810103 MHUT40XX(S) みなし決済の集計を新規に設ける
				case	2:		// ＜（みなし決済集計印字データ）＞
					log = &buf->bun[p_proc_data->Log_DataPt];
					// みなし決済の回数が0件より多い場合のみ印字する
// MH810105 GG119202(S) 処理未了取引集計仕様改善
//					if ( log->cnt[EC_BRAND_TOTAL_MAX - 1] > 0 ) {
//						if(log->unknownTimeCnt > 0) {
//							edit_cnt += Prn_edit_Sitei1line_2( "みなし決済", (ulong)log->cnt[EC_BRAND_TOTAL_MAX - 1],
//															Pri_Tanni[PriT_KAISUU], Pri_Tanni[PriT_KAI], pri_kind );
//							// マネー毎取引金額
//							edit_cnt += Prn_edit_Sitei1line_2( "", log->ryo[EC_BRAND_TOTAL_MAX - 1],
//															Pri_Tanni[PriT_KINGAK], Pri_Tanni[PriT_YEN], pri_kind );
//
//						} else {
//							edit_cnt += Prn_edit_Sitei1line( "みなし決済", (ulong)log->cnt[EC_BRAND_TOTAL_MAX - 1],
//															Pri_Tanni[PriT_KAISUU], Pri_Tanni[PriT_KAI], pri_kind );
//							// マネー毎取引金額
//							edit_cnt += Prn_edit_Sitei1line( "", log->ryo[EC_BRAND_TOTAL_MAX - 1],
//															Pri_Tanni[PriT_KINGAK], Pri_Tanni[PriT_YEN], pri_kind );
//						}
//					}
//					// 終了
//					edit_flg = NO;
//					p_proc_data->Prn_no_data1 = 0xff;
					if ( log->sp_minashi_cnt > 0 ) {
						if(log->unknownTimeCnt > 0) {
							edit_cnt += Prn_edit_Sitei1line_2( "みなし決済", (ulong)log->sp_minashi_cnt,
															Pri_Tanni[PriT_KAISUU], Pri_Tanni[PriT_KAI], pri_kind );
							edit_cnt += Prn_edit_Sitei1line_2( "", log->sp_minashi_ryo,
															Pri_Tanni[PriT_KINGAK], Pri_Tanni[PriT_YEN], pri_kind );

						} else {
							edit_cnt += Prn_edit_Sitei1line( "みなし決済", (ulong)log->sp_minashi_cnt,
															Pri_Tanni[PriT_KAISUU], Pri_Tanni[PriT_KAI], pri_kind );
							edit_cnt += Prn_edit_Sitei1line( "", log->sp_minashi_ryo,
															Pri_Tanni[PriT_KINGAK], Pri_Tanni[PriT_YEN], pri_kind );
						}
					}
					// 最後に処理未了取引回数、金額を印字するためPrn_no_data1を3とする
					p_proc_data->Prn_no_data1 = 3;
					// みなし決済集計印字（最大5行）を印字する前に１ﾌﾞﾛｯｸ編集最大行数を超えそうな場合一旦抜ける
					if( edit_cnt + 5 > EDIT_GYOU_MAX ){
						edit_flg = NO;
					}
// MH810105 GG119202(E) 処理未了取引集計仕様改善
					break;
// MH810103 MHUT40XX(E) みなし決済の集計を新規に設ける
// MH810105 GG119202(S) 処理未了取引集計仕様改善
				case	3:		// 処理未了取引集計データ
					log = &buf->bun[p_proc_data->Log_DataPt];
					// 処理未了取引の回数が0件より多い場合のみ印字する
					if (log->sp_miryo_pay_ok_cnt > 0 ||
						log->sp_miryo_unknown_cnt > 0) {
						// タイトル
						PCMD_LEFT( pri_kind );										// [位置揃え(左揃え)]
						PrnFontSize( FONT_A_NML, pri_kind );						// ﾌｫﾝﾄＡ（通常）指定
						PrnFontSize( FONT_K_NML, pri_kind );						// 漢字（通常）指定
						PrnStr( "---------（処理未了取引）---------", pri_kind );		// 印字ﾃﾞｰﾀ登録
						edit_cnt++;

						if (log->unknownTimeCnt > 0) {
							edit_cnt += Prn_edit_Sitei1line_2( "支払済み", (ulong)log->sp_miryo_pay_ok_cnt,
															Pri_Tanni[PriT_KAISUU], Pri_Tanni[PriT_KAI], pri_kind );
							edit_cnt += Prn_edit_Sitei1line_2( "", log->sp_miryo_pay_ok_ryo,
															Pri_Tanni[PriT_KINGAK], Pri_Tanni[PriT_YEN], pri_kind );

							edit_cnt += Prn_edit_Sitei1line_2( "支払不明", (ulong)log->sp_miryo_unknown_cnt,
															Pri_Tanni[PriT_KAISUU], Pri_Tanni[PriT_KAI], pri_kind );
							edit_cnt += Prn_edit_Sitei1line_2( "", log->sp_miryo_unknown_ryo,
															Pri_Tanni[PriT_KINGAK], Pri_Tanni[PriT_YEN], pri_kind );
						}
						else {
							edit_cnt += Prn_edit_Sitei1line( "支払済み", (ulong)log->sp_miryo_pay_ok_cnt,
															Pri_Tanni[PriT_KAISUU], Pri_Tanni[PriT_KAI], pri_kind );
							edit_cnt += Prn_edit_Sitei1line( "", log->sp_miryo_pay_ok_ryo,
															Pri_Tanni[PriT_KINGAK], Pri_Tanni[PriT_YEN], pri_kind );

							edit_cnt += Prn_edit_Sitei1line( "支払不明", (ulong)log->sp_miryo_unknown_cnt,
															Pri_Tanni[PriT_KAISUU], Pri_Tanni[PriT_KAI], pri_kind );
							edit_cnt += Prn_edit_Sitei1line( "", log->sp_miryo_unknown_ryo,
															Pri_Tanni[PriT_KINGAK], Pri_Tanni[PriT_YEN], pri_kind );
						}
					}
					// 終了
					edit_flg = NO;
					p_proc_data->Prn_no_data1 = 0xff;
					break;
// MH810105 GG119202(E) 処理未了取引集計仕様改善

				default:		// ＜項目番号ｴﾗｰ＞
					edit_flg = NO;
					edit_end = ON;	// 編集終了
					p_proc_data->Prn_no_data1 = 0;
					p_proc_data->Prn_no_data2 = 0;
					break;
			}

			// 編集処理終了フラグＯＮ
			if( edit_flg == NO ) { 

				// 項目印字データ作成終了
				if( p_proc_data->Prn_no_data1 == 0xFF ) {
					//－－－－－　次編集ﾛｸﾞ情報検索　－－－－－
					p_proc_data->Prn_no_data1 = 0;
					p_proc_data->Prn_no_data2 = 0;

					// 次の印字対象検索処理
					for(f_cond_match = 0; (!f_cond_match) && (p_proc_data->Log_Count); )
					{
						// 格納件数ﾃﾞｸﾘﾒﾝﾄ
						p_proc_data->Log_Count--;
						/* Log_DataPt ← 次に編集するﾛｸﾞ情報の配列番号ｾｯﾄ */
						p_proc_data->Log_DataPt	= Prn_log_search2( p_proc_data->Log_DataPt, SYUUKEI_DAY_EC );
						/* 有効データ判定 */
						seisan_date = dnrmlzm(					// 対象ﾛｸﾞ情報の精算日取得
								(short)buf->bun[p_proc_data->Log_DataPt].SyuTime.Year,
								(short)buf->bun[p_proc_data->Log_DataPt].SyuTime.Mon,
								(short)buf->bun[p_proc_data->Log_DataPt].SyuTime.Day
							);
						switch( msg_data->BType )	// 検索方法？
						{
						default:	// 規定にない値(異常)
						case	0:	// 全て
							f_cond_match = 1;						// 印字可能
							break;
						case	1:	// 日付指定
							/* 対象ﾛｸﾞ情報の精算日と指定日が一致 */
							if(seisan_date == p_proc_data->Log_Sdate)
							{
								f_cond_match = 1;					// 印字可能
							}
							break;
						case	2:	// 期間指定
							/* 対象ﾛｸﾞ情報の精算日と指定日が一致 */
							if((seisan_date >= p_proc_data->Log_Sdate) && (seisan_date <= p_proc_data->Log_Edate))
							{
								f_cond_match = 1;					// 印字可能
							}
							break;
						}
					}

					// 全ﾛｸﾞ情報編集終了
					if( !p_proc_data->Log_Count ) {
						// 格納件数分の編集が終了した場合
						edit_end = ON;	// 編集終了
					}
				} 
				break;
			}
			// 終了判定
			if ((edit_flg == NO) && (edit_end == ON)) {
				break;	
			}
		}
	}	// ２回目以降の編集処理end
	// 編集終了ﾁｪｯｸ
	if( edit_end == ON ){	
		// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
		p_proc_data->Final = ON;
	}
}

// MH810103 GG119202(S) ICクレジットみなし決済印字フォーマット変更対応
////[]----------------------------------------------------------------------[]
////	@brief			決済リーダみなし決済復電ログ印字ﾃﾞｰﾀ編集
////[]----------------------------------------------------------------------[]
////	@param[in]		*msg_data		みなし決済復電データポインタ
////	@param[in]		pri_kind		ﾌﾟﾘﾝﾀ種別<br>
////	@param[in/out]	p_proc_data		編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
////	@return			void
////	@author			Inaba
////	@note			none
////[]----------------------------------------------------------------------[]
////	@date			Create	:	2019/02/14<br>
////					Update	:	
////[]------------------------------------- Copyright(C) 2019 AMANO Corp.---[]
//void	Ec_DeemedJnl_edit(T_FrmEcDeemedJnlReq *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
//{
//	int		str_index;
//	uchar	edit_gyou = 0;		// 編集済み行数
//	uchar	edit_cnt;			// 編集行数ﾜｰｸ
//	uchar	edit_flg = YES;		// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）
//
//	uchar	primax;				// 印字最大項目数
//	uchar	brand_index;
//	EcDeemedFukudenLog	*almrct;
//	almrct = msg_data->deemed_jnl_info;
//
//	// ※今回はジャーナル印字のみ(レシート印字する際は"primax"を変更すること)
//	primax = 9;
//
//
//	for ( ; edit_flg; ) {	// 編集処理ﾙｰﾌﾟ
//
//		/*--------------------------------------*/
//		/*	１ﾌﾞﾛｯｸ編集最大行数ﾁｪｯｸ処理			*/
//		/*--------------------------------------*/
//		if ((edit_gyou > 0) && ((edit_gyou + 1) > EDIT_GYOU_MAX)) {
//		//	１ﾌﾞﾛｯｸ編集の最大行数を超えてしまう場合
//			edit_flg = NO;										// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）
//		}
//
//		if (edit_flg == YES) {
//		// 対象設定項目番号に設定されている印字内容＝印字する　且つ　１ﾌﾞﾛｯｸ編集の最大行数を超えない場合
//
//			edit_cnt = 0;		// 編集行数ﾘｾｯﾄ
//			/*--------------------------------------*/
//			/*	１項目編集処理						*/
//			/*--------------------------------------*/
//			switch (p_proc_data->Prn_no) {		// 設定されている印字内容番号により各処理へ分岐
//			case	0:		// ＜未使用＞
//			case	1:		// ＜ロゴ＞編集処理
//			case	2:		// ＜ヘッダー＞編集処理
//				break;
//
//			case	3:		// ＜表題＞編集処理
//				Prn_edit_Title	(										// 表題（"決済精算中止（復）"）印字ﾃﾞｰﾀ編集
//									"決済精算中止（復）",
//									FONT_K_YOKOBAI,
//									pri_kind
//								);
//				if (pri_kind == R_PRI) {
//				/*------	１行空白	------*/
//					Prn_edit_space(pri_kind);
//					edit_cnt++;
//				}
//				edit_cnt++;
//				break;
//
//			case	4:		// ＜駐車位置番号＞編集処理
//				PCMD_LEFT(pri_kind);									// [位置揃え(左揃え)]
//				PrnFontSize(FONT_A_NML, pri_kind);						// ﾌｫﾝﾄＡ（通常）指定
//				PrnFontSize(FONT_K_NML, pri_kind);						// 漢字（通常）指定
//				Prn_edit_pkposi( cEditwk1,  almrct->WPlace, 0 );		// cEditwk1←駐車位置印字ﾃﾞｰﾀ
//				Prn_edit_sya_syu( cEditwk2, (ushort)almrct->syu ,1, 4);	// cEditwk2←車室番号＆車種ﾃﾞｰﾀ
//				Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
//							cEditwk2,									// 文字列１："発生時刻"
//							cEditwk1,									// 文字列２：発生時刻印字ﾃﾞｰﾀ
//							pri_kind									// 印字先ﾌﾟﾘﾝﾀ
//						);
//				edit_cnt++;
//				break;
//
//			case	5:		// ＜入庫時刻＞編集処理
//				Prn_edit_Date3(cEditwk1, &almrct->TInTime);				// cEditwk1←発生時刻印字ﾃﾞｰﾀ
//				Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
//							"入庫時刻",									// 文字列１："発生時刻"
//							cEditwk1,									// 文字列２：発生時刻印字ﾃﾞｰﾀ
//							pri_kind									// 印字先ﾌﾟﾘﾝﾀ
//						);
//				edit_cnt++;
//				break;
//
//			case	6:		// ＜発生時刻＞編集処理
//				Prn_edit_Date3(cEditwk1, &almrct->EcDeemedDate);		// cEditwk1←発生時刻印字ﾃﾞｰﾀ
//				Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
//							"発生時刻",									// 文字列１："発生時刻"
//							cEditwk1,									// 文字列２：発生時刻印字ﾃﾞｰﾀ
//							pri_kind									// 印字先ﾌﾟﾘﾝﾀ
//						);
//				edit_cnt++;
//				break;
//
//			case	7:		// ＜駐車料金＞編集処理
//				sprintf( cMnydata , "%ld" , almrct->WPrice );			// 駐車料金ﾃﾞｰﾀ編集
//				Camma_Set( (uchar *)cMnydata );							// 駐車料金３桁区切り（”、”挿入）
//				if(almrct->update_mon) {
//					sprintf( cEditwk1, "更新料金(%dｹ月)", almrct->update_mon );// 更新月数印字ﾃﾞｰﾀ編集
//					Str_Set2(											// -----印字ﾃﾞｰﾀ編集-----
//								cEditwk1,								// 文字列１："更新料金(  ｹ月)"
//								"",										// 文字列２：""
//								cMnydata,								// 文字列３：更新料金印字ﾃﾞｰﾀ
//								Pri_Tanni[PriT_YEN],					// 文字列４："円"
//								pri_kind								// 印字先ﾌﾟﾘﾝﾀ
//							);
//				} else {
//					Str_Set2(											// -----印字ﾃﾞｰﾀ編集-----
//								"駐車料金",								// 文字列１："駐車料金"
//								SyubetuRyokin[almrct->syu],				// 文字列２：料金種別印字ﾃﾞｰﾀ
//								cMnydata,								// 文字列３：料金印字ﾃﾞｰﾀ
//								Pri_Tanni[PriT_YEN],					// 文字列４："円"
//								pri_kind								// 印字先ﾌﾟﾘﾝﾀ
//							);
//				}
//				edit_cnt++;
//				break;
//
//			case	8:		// ＜みなし決済額＞編集処理
//				brand_index = convert_brandno(almrct->EcDeemedBrandNo);
//
//				str_index = EcRiyougakuBrandStrNo[brand_index - EC_EDY_USED];
//				if ( str_index >= 0 && str_index < TBL_CNT(ElectronEc_prn) ) {
//					sprintf(cEditwk1, "%s", ElectronEc_prn[str_index]);			// cEditwk1に利用媒体名セット
//					edit_cnt = RYOUSYUU_edit_content_sub(						// -----印字ﾃﾞｰﾀ編集-----
//								cEditwk1,										// データ１：利用媒体名
//								almrct->PayPrice,								// データ２：利用金額
//								0,												// データ３：なし
//								0,												// データ４："-"なし
//								pri_kind										// データ５：印字先ﾌﾟﾘﾝﾀ
//							);
//				} else if(brand_index == EC_CREDIT_USED) {
//					sprintf( cEditwk1,"%s", Ryosyu_Content[3].print_data[1] );	// cEditwk1に「ｸﾚｼﾞｯﾄｶｰﾄﾞ」セット
//					edit_cnt = RYOUSYUU_edit_content_sub(						// -----印字ﾃﾞｰﾀ編集-----
//								cEditwk1,										// データ１："ｸﾚｼﾞｯﾄｶｰﾄﾞ"
//								almrct->PayPrice,								// データ２：利用金額
//								0,												// データ３：なし
//								0,												// データ４："-"なし
//								pri_kind										// データ５：印字先ﾌﾟﾘﾝﾀ
//							);
//				}
//
//				edit_cnt++;
//				break;
//
//			default:		// その他（印字項目番号ｴﾗｰ）
//				break;
//			}
//			edit_gyou = (uchar)(edit_gyou + edit_cnt);	// 編集済み行数更新
//
//			if ((p_proc_data->Prn_no_data1 == 0) && (p_proc_data->Prn_no_data2 == 0)) {
//			// 項目番号の印字ﾃﾞｰﾀを全て編集終了した場合
//				p_proc_data->Prn_no++;					// 設定項目番号＋１
//			}
//		}
//
//		if (p_proc_data->Prn_no >= primax) {
//		// 最後まで印字内容編集終了の場合
//			edit_flg = NO;								// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）
//
//			p_proc_data->Prn_no			= 0;			// 編集処理ﾜｰｸﾘｾｯﾄ
//			p_proc_data->Prn_no_data1	= 0;
//			p_proc_data->Prn_no_data2	= 0;
//
//			if (p_proc_data->Log_Edit == OFF) {
//			// 精算履歴印字でない場合
//				p_proc_data->Final = ON;				// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
//			}
//		}
//	}
//}
// MH810103 GG119202(E) ICクレジットみなし決済印字フォーマット変更対応

//[]----------------------------------------------------------------------[]
// MH810103 MHUT40XX(S) DC=29ｈ→49ｈへ変更し、決済結果のステータスに応じてジャーナル印字を行う
////	@brief			決済リーダ決済精算中止(復決済)印字データ編集処理
//	@brief			決済リーダ直前取引印字データ編集処理
// MH810103 MHUT40XX(E) DC=29ｈ→49ｈへ変更し、決済結果のステータスに応じてジャーナル印字を行う
//[]----------------------------------------------------------------------[]
//	@param[in]		*msg_data		復決済データへのポインタ
//	@param[in]		pri_kind		ﾌﾟﾘﾝﾀ種別<br>
//	@param[in/out]	p_proc_data		編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
//	@return			ret				YES：編集終了　NO：編集継続
//	@author			Inaba
//	@note			none
//[]----------------------------------------------------------------------[]
//	@date			Create	:	2019/10/02<br>
//					Update	:	
//[]------------------------------------- Copyright(C) 2019 AMANO Corp.---[]
uchar	Recv_DeemedData_edit(Receipt_data *DeemedData, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
// MH810103 MHUT40XX(S) DC=29ｈ→49ｈへ変更し、決済結果のステータスに応じてジャーナル印字を行う
//	int		str_index;
// MH810103 MHUT40XX(E) DC=29ｈ→49ｈへ変更し、決済結果のステータスに応じてジャーナル印字を行う
	uchar	edit_gyou = 0;		// 編集済み行数
	uchar	edit_cnt;			// 編集行数ﾜｰｸ
	uchar	edit_flg = YES;		// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）
	uchar	ret = NO;			// 戻り値
	uchar	primax;				// 印字最大項目数
	uchar	brand_index;		// ブランド番号
	date_time_rec	settelement_date;
	struct clk_rec 	wrk_clk_rec;		/* 集計日時ノーマライズ用 */

// MH810103 MHUT40XX(S) DC=29ｈ→49ｈへ変更し、決済結果のステータスに応じてジャーナル印字を行う
//	primax = 8;
	primax = 5;
// MH810103 MHUT40XX(E) DC=29ｈ→49ｈへ変更し、決済結果のステータスに応じてジャーナル印字を行う
	brand_index = DeemedData->Electron_data.Ec.e_pay_kind;

	// 時刻をdate_time_rec型へ変更する
// MH810103 MHUT40XX(S) DC=29ｈ→49ｈへ変更し、決済結果のステータスに応じてジャーナル印字を行う
//	memcpy(&settelement_date, 0, sizeof(date_time_rec));
//	c_UnNormalize_sec(DeemedData->Electron_data.Ec.pay_datetime, &wrk_clk_rec);
//	memcpy(&settelement_date, &wrk_clk_rec, sizeof(date_time_rec));
	if(DeemedData->Electron_data.Ec.pay_datetime != 0){
		memset(&settelement_date, 0, sizeof(date_time_rec));
		c_UnNormalize_sec(DeemedData->Electron_data.Ec.pay_datetime, &wrk_clk_rec);
		memcpy(&settelement_date, &wrk_clk_rec, sizeof(date_time_rec));
	}
// MH810103 MHUT40XX(E) DC=29ｈ→49ｈへ変更し、決済結果のステータスに応じてジャーナル印字を行う
	
	for ( ; edit_flg; ) {	// 編集処理ﾙｰﾌﾟ

		/*--------------------------------------*/
		/*	１ﾌﾞﾛｯｸ編集最大行数ﾁｪｯｸ処理			*/
		/*--------------------------------------*/
		if ((edit_gyou > 0) && ((edit_gyou + 1) > EDIT_GYOU_MAX)) {
		//	１ﾌﾞﾛｯｸ編集の最大行数を超えてしまう場合
			edit_flg = NO;										// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）
		}

		if (edit_flg == YES) {
		// 対象設定項目番号に設定されている印字内容＝印字する　且つ　１ﾌﾞﾛｯｸ編集の最大行数を超えない場合

			edit_cnt = 0;		// 編集行数ﾘｾｯﾄ
			/*--------------------------------------*/
			/*	１項目編集処理						*/
			/*--------------------------------------*/
// MH810103 MHUT40XX(S) DC=29ｈ→49ｈへ変更し、決済結果のステータスに応じてジャーナル印字を行う
//			switch (p_proc_data->Prn_no) {		// 設定されている印字内容番号により各処理へ分岐
//			case	0:		// ＜未使用＞
//			case	1:		// ＜ロゴ＞編集処理
//			case	2:		// ＜ヘッダー＞編集処理
//				break;
//
//			case	3:		// ＜表題＞編集処理
//				Prn_edit_Title	(										// 表題（"決済精算中止"）印字ﾃﾞｰﾀ編集
//									"決済精算中止",
//									FONT_K_YOKOBAI,
//									pri_kind
//								);
//				edit_cnt++;
//				break;
//
//			case	4:		// ＜表題＞編集処理
//				Prn_edit_Title	(										// 表題（"復決済"）印字ﾃﾞｰﾀ編集
//									"(復決済)",
//									FONT_K_YOKOBAI,
//									pri_kind
//								);
//				edit_cnt++;
//				break;
//			
//			case	5:		// ＜発生時刻＞編集処理
//				Prn_edit_Date3(cEditwk1, &settelement_date);			// cEditwk1←発生時刻印字ﾃﾞｰﾀ
//				Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
//							"決済時刻",									// 文字列１："決済時刻"
//							cEditwk1,									// 文字列２：決済時刻印字ﾃﾞｰﾀ
//							pri_kind									// 印字先ﾌﾟﾘﾝﾀ
//						);
//				edit_cnt++;
//				break;
//
//			case	6:		// ＜決済精算中止(復決済)決済額＞編集処理
//				// 不明ブランド
//				if(brand_index == EC_UNKNOWN_USED){
//					edit_cnt = RYOUSYUU_edit_content_sub(						// -----印字ﾃﾞｰﾀ編集-----
//								"不明",											// データ１：利用媒体名
//								DeemedData->Electron_data.Ec.pay_ryo,			// データ２：利用金額
//								0,												// データ３：なし
//								0,												// データ４："-"なし
//								pri_kind										// データ５：印字先ﾌﾟﾘﾝﾀ
//							);
//				} else {
//					str_index = EcRiyougakuBrandStrNo[brand_index - EC_EDY_USED];
//					if ( str_index >= 0 && str_index < TBL_CNT(ElectronEc_prn) ) {
//						sprintf(cEditwk1, "%s", ElectronEc_prn[str_index]);			// cEditwk1に利用媒体名セット
//						edit_cnt = RYOUSYUU_edit_content_sub(						// -----印字ﾃﾞｰﾀ編集-----
//									cEditwk1,										// データ１：利用媒体名
//									DeemedData->Electron_data.Ec.pay_ryo,			// データ２：利用金額
//									0,												// データ３：なし
//									0,												// データ４："-"なし
//									pri_kind										// データ５：印字先ﾌﾟﾘﾝﾀ
//								);
//					} else if(brand_index == EC_CREDIT_USED) {
//						sprintf( cEditwk1,"%s", Ryosyu_Content[3].print_data[1] );	// cEditwk1に「ｸﾚｼﾞｯﾄｶｰﾄﾞ」セット
//						edit_cnt = RYOUSYUU_edit_content_sub(						// -----印字ﾃﾞｰﾀ編集-----
//									cEditwk1,										// データ１："ｸﾚｼﾞｯﾄｶｰﾄﾞ"
//									DeemedData->credit.pay_ryo,						// データ２：利用金額
//									0,												// データ３：なし
//									0,												// データ４："-"なし
//									pri_kind										// データ５：印字先ﾌﾟﾘﾝﾀ
//								);
//					}
//				}
//				break;
//
//			case	7:		// ＜決済精算中止(復決済)カード情報＞編集処理
//				str_index = EcRiyougakuBrandStrNo[brand_index - EC_EDY_USED];
//				if ( str_index >= 0 && str_index < TBL_CNT(ElectronEc_prn) ) {
//					edit_cnt = ElectronEc_Ryosyu_Edit( DeemedData, pri_kind, p_proc_data );
//				}
//				 else if(brand_index == EC_CREDIT_USED) {
//				 	 // ｸﾚｼﾞｯﾄｶｰﾄﾞ会社名 
//					 edit_cnt = RYOUSYUU_edit_ccname( DeemedData, pri_kind, p_proc_data );
//					 // ｸﾚｼﾞｯﾄｶｰﾄﾞ会員No 
//					 edit_cnt += RYOUSYUU_edit_ccid( DeemedData, pri_kind, p_proc_data );
//					 // ｸﾚｼﾞｯﾄｶｰﾄﾞ伝票No 
//					 edit_cnt += RYOUSYUU_edit_ccslno( DeemedData, pri_kind, p_proc_data );
//					 // ｸﾚｼﾞｯﾄｶｰﾄﾞ承認No 
//					 edit_cnt += RYOUSYUU_edit_ccapno( DeemedData, pri_kind, p_proc_data );
//					 // ｸﾚｼﾞｯﾄｶｰﾄﾞ利用額 
//					 edit_cnt += RYOUSYUU_edit_ccpay( DeemedData, pri_kind, p_proc_data );
//					 // ｸﾚｼﾞｯﾄｶｰﾄﾞ端末No 
//					 edit_cnt += RYOUSYUU_edit_cctno( DeemedData, pri_kind, p_proc_data );
//				}
//				break;
//
//			default:		// その他（印字項目番号ｴﾗｰ）
//				break;
//			}
			switch (p_proc_data->Prn_no_data1) {							// 設定されている印字内容番号により各処理へ分岐

				case	0:		// ＜表題＞編集処理
// MH810105 GG119202(S) みなし決済プリントに直前取引内容を印字する
					if (p_proc_data->Prn_no_wk[5] != 0) {
						// みなし決済プリント、利用明細プリントは
						// タイトルの代わりにセパレータを印字する
						PCMD_CENTER(pri_kind);								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
						sprintf(cEditwk1, "-----");
						PrnStr(cEditwk1, pri_kind);							// 仕切り行印字ﾃﾞｰﾀ登録
					}
					else {
// MH810105 GG119202(E) みなし決済プリントに直前取引内容を印字する
					Prn_edit_Title	(										// 表題（"決済精算中止"）印字ﾃﾞｰﾀ編集
										"直前取引内容",
										FONT_K_YOKOBAI,
										pri_kind
									);
// MH810105 GG119202(S) みなし決済プリントに直前取引内容を印字する
					}
// MH810105 GG119202(E) みなし決済プリントに直前取引内容を印字する
					edit_cnt++;
					break;

				case	1:		// ＜印字時刻＞編集処理
					Prn_edit_Date3(cEditwk1, &DeemedData->TOutTime);		// cEditwk1←印字時刻印字ﾃﾞｰﾀ
					PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
					PrnStr( cEditwk1, pri_kind );							// 時刻　印字ﾃﾞｰﾀ登録
					edit_cnt++;
					break;

				case	2:		// ＜取引内容＞編集処理
// MH810105 GG119202(S) みなし決済プリントに直前取引内容を印字する
// MH810105(S) MH364301 QRコード決済対応
					if(DeemedData->EcResult == EPAY_RESULT_PAY_MIRYO){
						sprintf( cEditwk1,"%s", "支払未了" );
					}
					else {
// MH810105(E) MH364301 QRコード決済対応
					sprintf( cEditwk1,"%s", EcResultMsg[DeemedData->EcResult -1] );
// MH810105(S) MH364301 QRコード決済対応
					}
// MH810105(E) MH364301 QRコード決済対応

					if( DeemedData->EcResult == EPAY_RESULT_MIRYO ){
						// 決済結果が未了確定であれば、詳細エラーコードより（失敗）か（不明）を付加する
						if( IsEcMiryoHikisariNG(DeemedData) ||			// 未了引き去り失敗
// MH810105(S) MH364301 PiTaPa対応
//							brand_index == EC_ID_USED ||				// iD決済
//							brand_index == EC_QUIC_PAY_USED ){			// QUICPay決済
							EcBrandPostPayCheck(brand_index)) {			// ポストペイ型電子マネー決済
// MH810105(E) MH364301 PiTaPa対応
							strcat( cEditwk1, "(失敗)" );				// 未了確定（失敗）
						}
						else {
							strcat( cEditwk1, "(不明)" );				// 未了確定（不明）
						}
					}
// MH810105 GG119202(E) みなし決済プリントに直前取引内容を印字する
					Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
								"取引内容",									// 文字列１："取引内容"
// MH810105 GG119202(S) みなし決済プリントに直前取引内容を印字する
//								EcResultMsg[DeemedData->EcResult -1],		// 文字列２：取引内容印字ﾃﾞｰﾀ
								cEditwk1,									// 文字列２：取引内容印字ﾃﾞｰﾀ
// MH810105 GG119202(E) みなし決済プリントに直前取引内容を印字する
								pri_kind									// 印字先ﾌﾟﾘﾝﾀ
							);
					edit_cnt++;
					break;

				case	3:		// ＜発生時刻＞編集処理
					if( DeemedData->Electron_data.Ec.pay_datetime != 0 ){
						// 発生時刻が0の場合は発生時刻を印字しない
						Prn_edit_Date3(cEditwk1, &settelement_date);			// cEditwk1←発生時刻印字ﾃﾞｰﾀ
						Str_Set1(												// -----印字ﾃﾞｰﾀ編集-----
									"決済時刻",									// 文字列１："決済時刻"
									cEditwk1,									// 文字列２：決済時刻印字ﾃﾞｰﾀ
									pri_kind									// 印字先ﾌﾟﾘﾝﾀ
								);
						edit_cnt++;
					}
					// 一旦印字処理を抜ける（次の行から何行かまとめて印字するため、印字行がEDIT_GYOU_MAXを超えない対策）
					edit_flg = NO;
					break;

				case	4:
					// 決済結果NGの場合は印字しない
					if( DeemedData->EcResult !=  EPAY_RESULT_NG ){
						if(brand_index == EC_UNKNOWN_USED){
							if( DeemedData->EcResult == EPAY_RESULT_MIRYO ){
								edit_cnt += RYOUSYUU_edit_content_sub(						// -----印字ﾃﾞｰﾀ編集-----
// MH810104(S) nanaco・iD・QUICPay対応2
//											"取引前残高",									// データ１：取引前残高
											"  取引前残高",									// データ１：取引前残高
// MH810104(E) nanaco・iD・QUICPay対応2
											DeemedData->Electron_data.Ec.pay_befor,			// データ２：取引前残高
											0,												// データ３：なし
											0,												// データ４："-"なし
											pri_kind										// データ５：印字先ﾌﾟﾘﾝﾀ
										);
							}
							if( DeemedData->EcResult == EPAY_RESULT_OK ||
// MH810105(S) MH364301 QRコード決済対応
								DeemedData->EcResult == EPAY_RESULT_PAY_MIRYO ||
// MH810105(E) MH364301 QRコード決済対応
								DeemedData->EcResult == EPAY_RESULT_MIRYO ||
								DeemedData->EcResult == EPAY_RESULT_MIRYO_ZANDAKA_END ){
								edit_cnt += RYOUSYUU_edit_content_sub(						// -----印字ﾃﾞｰﾀ編集-----
// MH810104(S) nanaco・iD・QUICPay対応2
//											"支払",											// データ１：支払
											"  支払",											// データ１：支払
// MH810104(E) nanaco・iD・QUICPay対応2
											DeemedData->Electron_data.Ec.pay_ryo,			// データ２：利用金額
											0,												// データ３：なし
											0,												// データ４："-"なし
											pri_kind										// データ５：印字先ﾌﾟﾘﾝﾀ
										);
							}
						}
						else if( brand_index == EC_CREDIT_USED ){
							// ｸﾚｼﾞｯﾄｶｰﾄﾞ会社名
							edit_cnt += RYOUSYUU_edit_ccname( DeemedData, pri_kind, p_proc_data );
							// ｸﾚｼﾞｯﾄｶｰﾄﾞ会員No
							edit_cnt += RYOUSYUU_edit_ccid( DeemedData, pri_kind, p_proc_data );
							// ｸﾚｼﾞｯﾄｶｰﾄﾞ伝票No
							edit_cnt += RYOUSYUU_edit_ccslno( DeemedData, pri_kind, p_proc_data );
							// ｸﾚｼﾞｯﾄｶｰﾄﾞ承認No
							edit_cnt += RYOUSYUU_edit_ccapno( DeemedData, pri_kind, p_proc_data );
							// ｸﾚｼﾞｯﾄｶｰﾄﾞ利用額
							edit_cnt += RYOUSYUU_edit_ccpay( DeemedData, pri_kind, p_proc_data );
							// ｸﾚｼﾞｯﾄｶｰﾄﾞ端末No
							edit_cnt += RYOUSYUU_edit_cctno( DeemedData, pri_kind, p_proc_data );
						}
						else{
							if( DeemedData->EcResult == EPAY_RESULT_OK ||
// MH810105(S) MH364301 QRコード決済対応
								DeemedData->EcResult == EPAY_RESULT_PAY_MIRYO ||
// MH810105(E) MH364301 QRコード決済対応
								DeemedData->EcResult == EPAY_RESULT_MIRYO_ZANDAKA_END ){
								// 決済OKの場合、領収書印字を行う
								edit_cnt += ElectronEc_Ryosyu_Edit( DeemedData, pri_kind, p_proc_data );
							}
							else if( DeemedData->EcResult == EPAY_RESULT_MIRYO ){
								// 各ブランド毎に印字する行数をセットする
								switch (brand_index) {
									case	EC_KOUTSUU_USED:
										p_proc_data->Prn_no_wk[0] = 12;
										break;
									case	EC_EDY_USED:
										p_proc_data->Prn_no_wk[0] = 14;
										break;
									case	EC_NANACO_USED:
// MH810104 GG119202(S) nanaco・iD・QUICPay対応
//										p_proc_data->Prn_no_wk[0] = 11;
										p_proc_data->Prn_no_wk[0] = 13;
// MH810104 GG119202(E) nanaco・iD・QUICPay対応
										break;
									case	EC_WAON_USED:
										p_proc_data->Prn_no_wk[0] = 12;
										break;
									case	EC_SAPICA_USED:
										p_proc_data->Prn_no_wk[0] = 11;
										break;
									case	EC_ID_USED:
// MH810104 GG119202(S) nanaco・iD・QUICPay対応
//										p_proc_data->Prn_no_wk[0] = 9;
										p_proc_data->Prn_no_wk[0] = 11;
// MH810104 GG119202(E) nanaco・iD・QUICPay対応
										break;
									case	EC_QUIC_PAY_USED:
// MH810104 GG119202(S) nanaco・iD・QUICPay対応
//										p_proc_data->Prn_no_wk[0] = 9;
										p_proc_data->Prn_no_wk[0] = 11;
// MH810104 GG119202(E) nanaco・iD・QUICPay対応
// MH810105(S) MH364301 PiTaPa対応
									case	EC_PITAPA_USED:
										p_proc_data->Prn_no_wk[0] = 11;
										break;
// MH810105(E) MH364301 PiTaPa対応
										break;
									default :
										break;
								}
								memset(&Deemedalmrct, 0, sizeof(EC_SETTLEMENT_RES));
								memcpy(&Deemedalmrct.settlement_data, &DeemedData->Electron_data.Ec.pay_ryo, _offsetof(Ec_info, pay_datetime)-_offsetof(Ec_info, pay_ryo));
// MH810105(S) MH364301 不要変数削除
//								memcpy(&Deemedalmrct.Termserial_No, &DeemedData->Electron_data.Ec.Termserial_No, sizeof(Ec_info)-_offsetof(Ec_info, Termserial_No));
								memcpy(&Deemedalmrct.Brand, &DeemedData->Electron_data.Ec.Brand, sizeof(DeemedData->Electron_data.Ec.Brand));
// MH810105(E) MH364301 不要変数削除
// MH810105(S) MH364301 QRコード決済対応
								// 決済結果を取得（上記memcpyでは範囲外のため取得できない）
								Deemedalmrct.Result = DeemedData->EcResult;
// MH810105(E) MH364301 QRコード決済対応
								// 未了確定の場合、未了レシート印字を行う
								for ( p_proc_data->Prn_no = 5; p_proc_data->Prn_no < p_proc_data->Prn_no_wk[0]; p_proc_data->Prn_no++ ) {
									Ec_AlmRct_edit_sub( &Deemedalmrct, brand_index, pri_kind, p_proc_data);
								}
								// 印字した行数を加算する
								edit_cnt += (uchar)(p_proc_data->Prn_no_wk[0] - 5);
							}
						}
					}
					// 終わり
					p_proc_data->Prn_no = 0xff;
					break;

				default:		// その他（印字項目番号ｴﾗｰ）
					break;
			}
// MH810103 MHUT40XX(E) DC=29ｈ→49ｈへ変更し、決済結果のステータスに応じてジャーナル印字を行う
			edit_gyou = (uchar)(edit_gyou + edit_cnt);	// 編集済み行数更新

// MH810103 MHUT40XX(S) DC=29ｈ→49ｈへ変更し、決済結果のステータスに応じてジャーナル印字を行う
//			if ((p_proc_data->Prn_no_data1 == 0) && (p_proc_data->Prn_no_data2 == 0)) {
//			// 項目番号の印字ﾃﾞｰﾀを全て編集終了した場合
//				p_proc_data->Prn_no++;					// 設定項目番号＋１
//			}
			p_proc_data->Prn_no_data1++;

			// 印字するcaseが最大まで加算されたら終わり
			if( p_proc_data->Prn_no_data1 >= primax ){
				p_proc_data->Prn_no = 0xff;
			}
// MH810103 MHUT40XX(E) DC=29ｈ→49ｈへ変更し、決済結果のステータスに応じてジャーナル印字を行う
		}

// MH810103 MHUT40XX(S) DC=29ｈ→49ｈへ変更し、決済結果のステータスに応じてジャーナル印字を行う
//		if (p_proc_data->Prn_no >= primax) {
		if (p_proc_data->Prn_no == 0xff) {
// MH810103 MHUT40XX(E) DC=29ｈ→49ｈへ変更し、決済結果のステータスに応じてジャーナル印字を行う
		// 最後まで印字内容編集終了の場合
			edit_flg = NO;								// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）

			p_proc_data->Prn_no			= 0;			// 編集処理ﾜｰｸﾘｾｯﾄ
			p_proc_data->Prn_no_data1	= 0;
			p_proc_data->Prn_no_data2	= 0;
			ret = YES;

			if (p_proc_data->Log_Edit == OFF) {
			// 精算履歴印字でない場合
				p_proc_data->Final = ON;				// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
			}
		}
	}

	return (ret);
}

//[]----------------------------------------------------------------------[]
//	@brief			支払コード・署名欄印字ﾃﾞｰﾀ編集処理
//[]----------------------------------------------------------------------[]
//	@param[in]		*Ryousyuu		印字データへのポインタ
//	@param[in]		pri_kind		ﾌﾟﾘﾝﾀ種別<br>
//	@return			ret				編集行数
//	@author			D.Inaba
//	@note			Prn_edit_SyomeiKamei参照
// GG129000(S) A.Shirai 2023/9/22 ゲート式車番チケットレスシステム対応（詳細設計#5695：#7038クレジット決済でPIN式(PIN入力済)の場合、暗証番号確認済でサイン欄が不要であることを明示(レシート印字)する）
//	@note			shomeiran.txtのアップロードに関係無く　PIN確認済かどうかで
//					PinSyomei_Data_dflt か Syomei_Data_dflt を印字します
//					"暗証番号確認済みのため" 印字設定は下記配列pinMesSetの値を参照する※パラメータは参照しない
//					"駐車料金一括払い" "サインは省略させていただきます。"は通常通り、1行目,2行目のパラメータを参照する
// GG129000(E) A.Shirai 2023/9/22 ゲート式車番チケットレスシステム対応（詳細設計#5695：#7038クレジット決済でPIN式(PIN入力済)の場合、暗証番号確認済でサイン欄が不要であることを明示(レシート印字)する）
//[]----------------------------------------------------------------------[]
//	@date			Create	:	2019/10/24<br>
//					Update	:	
//[]------------------------------------- Copyright(C) 2019 AMANO Corp.---[]
uchar	Prn_edit_Ec_Syomei( Receipt_data *Ryousyuu, uchar pri_kind )
{

	uchar			edit_cnt = 0;				// 編集行数
	uchar			gyou_cnt;					// 行数
	uchar			fnt_size[SYOMEI_GYO_MAX];	// 文字ｻｲｽﾞ（行数分）
	uchar			pri_posi[SYOMEI_GYO_MAX];	// 印字位置（行数分）
	uchar			data_cnt[SYOMEI_GYO_MAX];	// 文字数（行数分）
	uchar			*pri_data[SYOMEI_GYO_MAX];	// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰ（行数分）
	uchar			s_data;						// 設定ﾃﾞｰﾀﾜｰｸ
	uchar			size_wrk;					// ﾍｯﾀﾞｰ印字ﾃﾞｰﾀ縦ｻｲｽﾞ（ﾄﾞｯﾄ数）計算処理ﾜｰｸ
	uchar			i,para_posi;				// 処理ﾙｰﾌﾟｶｳﾝﾀｰ　パラメータ読取位置
	ushort			cmd_len;					// 送信ｺﾏﾝﾄﾞﾃﾞｰﾀﾚﾝｸﾞｽ
	PRN_PROC_DATA	*p_proc_data;				// 編集処理制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
	uchar			pinMesSet[4] = {1, 0, 1, 22}; // PIN確認済の際印字する文字列の設定
												  // {印字する行数(0スタート), サイズ, 位置, 文字数}

// MH810103 GG119202(S) ICクレジットみなし決済印字フォーマット変更対応
//	// みなし決済かブランド不一致は印字しない
//	if( Ryousyuu->Electron_data.Ec.e_pay_kind == EC_CREDIT_USED &&
//		(Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement == 1 ||
//		 Ryousyuu->Electron_data.Ec.E_Status.BIT.brand_mismatch == 1) ) {
//		return( edit_cnt );
//	}

	// ブランド不一致は印字しない
	if( Ryousyuu->Electron_data.Ec.e_pay_kind == EC_CREDIT_USED &&
		Ryousyuu->Electron_data.Ec.E_Status.BIT.brand_mismatch == 1 ) {
		return( edit_cnt );
	}
// MH810103 GG119202(E) ICクレジットみなし決済印字フォーマット変更対応
// GG129000(S) A.Shirai 2023/9/22 ゲート式車番チケットレスシステム対応（詳細設計#5695：#7038クレジット決済でPIN式(PIN入力済)の場合、暗証番号確認済でサイン欄が不要であることを明示(レシート印字)する）
//	if(( Syomei_Rsts != 0 ) && (_FLT_RtnKind(Syomei_Rsts) != FLT_NODATA) ){
//		// ﾍｯﾀﾞｰ印字ﾃﾞｰﾀが正常に読込まれていない場合
//		return( edit_cnt );
//	}
// GG129000(E) A.Shirai 2023/9/22 ゲート式車番チケットレスシステム対応（詳細設計#5695：#7038クレジット決済でPIN式(PIN入力済)の場合、暗証番号確認済でサイン欄が不要であることを明示(レシート印字)する）

// GG129000(S) A.Shirai 2023/9/22 ゲート式車番チケットレスシステム対応（詳細設計#5695：#7038クレジット決済でPIN式(PIN入力済)の場合、暗証番号確認済でサイン欄が不要であることを明示(レシート印字)する）
//	gyou_cnt = (uchar)prm_get( COM_PRM, S_PRN, 20, 2, 3 );						// 「支払ｺｰﾄﾞ・署名欄行数」設定ﾃﾞｰﾀ取得
//	// 印字行数が2行以下 && PIN確認済 && shomeiran.txtにアップロードされていない、印字行数を3行とする
//	if( gyou_cnt <= 2 && Ryousyuu->credit.Identity_Ptrn == 2 && _FLT_RtnKind(Syomei_Rsts) == FLT_NODATA){
//		gyou_cnt = 3;
//	}
//	else if( gyou_cnt > SYOMEI_GYO_MAX ){
//		gyou_cnt = SYOMEI_GYO_MAX;												// 不正ﾃﾞｰﾀの場合、最大行数（４行）とする
//	}
	// PIN確認済 印字行数を3行とする
	if (Ryousyuu->credit.Identity_Ptrn == 2) {
		gyou_cnt = 3;
	}
	// PIN確認済でない 印字行数を2行とする
	else {
		gyou_cnt = 2;
	}
// GG129000(E) A.Shirai 2023/9/22 ゲート式車番チケットレスシステム対応（詳細設計#5695：#7038クレジット決済でPIN式(PIN入力済)の場合、暗証番号確認済でサイン欄が不要であることを明示(レシート印字)する）

	for( i=0, para_posi=0; i<SYOMEI_GYO_MAX ;i++ ){
// GG129000(S) A.Shirai 2023/9/22 ゲート式車番チケットレスシステム対応（詳細設計#5695：#7038クレジット決済でPIN式(PIN入力済)の場合、暗証番号確認済でサイン欄が不要であることを明示(レシート印字)する）
//		// PIN確認済印字あり && pinMesSet[0]行目 && shomeiran.txtにアップロードされていない
//		if( Ryousyuu->credit.Identity_Ptrn == 2 && 
//				pinMesSet[0] == i && _FLT_RtnKind(Syomei_Rsts) == FLT_NODATA){
		// PIN確認済印字あり && pinMesSet[0]行目("暗証番号確認済みのため"の印字設定はパラメータではなく固定値とする)
		if (Ryousyuu->credit.Identity_Ptrn == 2 && pinMesSet[0] == i) {
// GG129000(E) A.Shirai 2023/9/22 ゲート式車番チケットレスシステム対応（詳細設計#5695：#7038クレジット決済でPIN式(PIN入力済)の場合、暗証番号確認済でサイン欄が不要であることを明示(レシート印字)する）
			fnt_size[i] = pinMesSet[1];											// 「文字ｻｲｽﾞ」設定ﾃﾞｰﾀ取得
			pri_posi[i] = pinMesSet[2];											// 「印字位置」設定ﾃﾞｰﾀ取得 
			// 「暗証番号確認済みのため」
			data_cnt[i] = pinMesSet[3];											// 「文字数」設定ﾃﾞｰﾀ取得
		// 通常時
		} else{
			fnt_size[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(21+para_posi), 1, 4 );	// 「文字ｻｲｽﾞ」設定ﾃﾞｰﾀ取得
			pri_posi[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(21+para_posi), 1, 3 );	// 「印字位置」設定ﾃﾞｰﾀ取得
			data_cnt[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(21+para_posi), 2, 1 );	// 「文字数」設定ﾃﾞｰﾀ取得
			// 次のパラメータへ
			para_posi++;
		}

		if( fnt_size[i] > 3 ){
			fnt_size[i] = 0;													// 不正ﾃﾞｰﾀの場合、「標準」とする
		}
		if( pri_posi[i] > 2 ){
			pri_posi[i] = 0;													// 不正ﾃﾞｰﾀの場合、「左揃え」とする
		}
		if( data_cnt[i] > FONTA_MAX_COL ){
			data_cnt[i] = FONTA_MAX_COL;										// 不正ﾃﾞｰﾀの場合、ﾌｫﾝﾄＡ最大文字数（３６文字）とする
		}
// GG129000(S) A.Shirai 2023/9/22 ゲート式車番チケットレスシステム対応（詳細設計#5695：#7038クレジット決済でPIN式(PIN入力済)の場合、暗証番号確認済でサイン欄が不要であることを明示(レシート印字)する）
//		if (_FLT_RtnKind(Syomei_Rsts) == FLT_NODATA) {							//未登録なら初期値
//			// shomeiran.txtにアップロードされていない
//			if( Ryousyuu->credit.Identity_Ptrn == 2 ){
//				// PIN確認済
//				pri_data[i] = (uchar *)&PinSyomei_Data_dflt[i][0];				// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
//			}
//			else {
//				pri_data[i] = (uchar *)&Syomei_Data_dflt[i][0];					// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
//			}
//		}else{
//			// shomeiran.txtにアップロードされている
//			pri_data[i] = (uchar *)&Syomei_Data[i][0];							// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
//		}
		if (Ryousyuu->credit.Identity_Ptrn == 2) {
			// PIN確認済
			pri_data[i] = (uchar*)&PinSyomei_Data_dflt[i][0];					// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
		}
		else {
			pri_data[i] = (uchar*)&Syomei_Data_dflt[i][0];						// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
		}
// GG129000(E) A.Shirai 2023/9/22 ゲート式車番チケットレスシステム対応（詳細設計#5695：#7038クレジット決済でPIN式(PIN入力済)の場合、暗証番号確認済でサイン欄が不要であることを明示(レシート印字)する）
	}

	if( gyou_cnt != 0 ){														// 印字ﾃﾞｰﾀあり？
		// ﾍｯﾀﾞｰ印字ﾃﾞｰﾀの縦ｻｲｽﾞ（ﾄﾞｯﾄ数）を計算する
		s_data = 8;																// 行間１ｍｍ（0.125×8）固定
		size_wrk = 0;
		for( i = 0 ; i < gyou_cnt ; i++ ){										// 各行の改行量検索（設定されている印字行数分）
			switch( fnt_size[i] ){												// ﾌｫﾝﾄｻｲｽﾞ？
				case	0:														// 標準
					size_wrk += FONT_A_N_HDOT;									// ﾌｫﾝﾄＡ 通常	(24×0.125=3mm)
					break;
				case	1:														// 横倍角
					size_wrk += FONT_A_Y_HDOT;									// ﾌｫﾝﾄＡ 横倍角(24×0.125=3mm)
					break;
				case	2:														// 縦倍角
					size_wrk += FONT_A_T_HDOT;									// ﾌｫﾝﾄＡ 縦倍角(48×0.125=6mm)
					break;
				case	3:														// ４倍角
					size_wrk += FONT_A_4_HDOT;									// ﾌｫﾝﾄＡ ４倍角(48×0.125=6mm)
					break;
			}
			size_wrk += s_data;													// 改行幅ｻｲｽﾞを加算
		}
	}
	if( gyou_cnt != 0 ){														// 印字ﾃﾞｰﾀあり？
		for( i = 0 ; i < gyou_cnt ; i++ ){										// 設定されている行数分の印字ﾃﾞｰﾀをﾌﾟﾘﾝﾀ送信ﾊﾞｯﾌｧへ登録
			memset( prn_work, 0, sizeof(prn_work) );							// 印字ｺﾏﾝﾄﾞ編集ｴﾘｱ（prn_work）０ｸﾘｱ
			cmd_len = 0;														// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ０ｸﾘｱ
			// 印字位置
			s_data = pri_posi[i];												// 印字位置設定ﾃﾞｰﾀ取得
			memcpy( &prn_work[0], &Pri_posi_cmd[s_data][0], 3 );				// 印字位置指定ｺﾏﾝﾄﾞｾｯﾄ
			cmd_len += 3;														// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋３
			// 印字文字ｻｲｽﾞ
			s_data = fnt_size[i];												// 文字ｻｲｽﾞ設定ﾃﾞｰﾀ取得
			memcpy( &prn_work[cmd_len], &Pri_size_cmd[s_data][0], 9 );			// 文字ｻｲｽﾞ指定ｺﾏﾝﾄﾞｾｯﾄ
			cmd_len += 9;														// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋６
			// 印字文字ﾃﾞｰﾀ
			memcpy( &prn_work[cmd_len], pri_data[i], (size_t)data_cnt[i] );		// 文字ﾃﾞｰﾀｾｯﾄ
			cmd_len += data_cnt[i];												// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋文字ﾃﾞｰﾀ数
			prn_work[cmd_len] = LF;												// 改行ﾃﾞｰﾀｾｯﾄ
			cmd_len += 1;														// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋１
			PrnCmdLen( (uchar *)prn_work, cmd_len, pri_kind );					// 編集した印字ｺﾏﾝﾄﾞﾃﾞｰﾀを登録
			edit_cnt++;															// 編集行数＋１
		}
		// 文字ｻｲｽﾞ、改行量を初期状態へ戻す
		PrnCmdLen( &Pri_size_cmd[4][0], 9, pri_kind );
		if( pri_kind == R_PRI ){
			p_proc_data = (PRN_PROC_DATA *)&rct_proc_data;						// ﾚｼｰﾄ編集処理制御ﾃﾞｰﾀﾎﾟｲﾝﾀｾｯﾄ
		}
		else{
			p_proc_data = (PRN_PROC_DATA *)&jnl_proc_data;						// ｼﾞｬｰﾅﾙ編集処理制御ﾃﾞｰﾀﾎﾟｲﾝﾀｾｯﾄ
		}
		p_proc_data->Font_size		= FONT_A_NML;
		p_proc_data->Kanji_size		= FONT_K_NML;
		p_proc_data->Kaigyou_size	= 0x1c;
	}

	if( R_PRI == pri_kind ){
		inc_dct( MOV_PRNT_CNT, (short)edit_cnt );		// 「ﾚｼｰﾄﾌﾟﾘﾝﾀ印字行数」動作ｶｳﾝﾄ
	}else{
		inc_dct( MOV_JPNT_CNT, (short)edit_cnt );		// 「ｼﾞｬｰﾅﾙﾌﾟﾘﾝﾀ印字行数」動作ｶｳﾝﾄ
	}
	return( edit_cnt );
}
// MH321800(E) hosoda ICクレジット対応

// MH810105 GG119202(S) T合計連動印字対応
//[]----------------------------------------------------------------------[]
///	@brief			T合計連動印字ﾃﾞｰﾀ編集処理
//[]----------------------------------------------------------------------[]
///	@param[in]		Syuukei		: ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@param[in]		pri_kind	: 印字先ﾌﾟﾘﾝﾀ
///	@param[in]		print_flag	: 各項目毎の印字の有無
///	@param[in]		Ec_data		: T合計連動印字情報ポインタ
///	@param[in,out]	p_proc_data	: 編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@date			2021/08/30
//[]------------------------------------- Copyright(C) 2021 AMANO Corp.---[]
void SYUUKEI_EC_edit(SYUKEI *Syuukei, uchar pri_kind, ushort print_flag, T_FrmTgoukeiEc *Ec_data, PRN_PROC_DATA *p_proc_data)
{
	ushort	index;			// 編集項目No.(0=Ｔ合計、1=みなし決済プリント、2=処理未了取引記録)
	uchar	next_line;		// 改行設定


	index = (p_proc_data->Prn_no & 0xFF00);
	p_proc_data->Prn_no &= 0xFF;
	next_line = OFF;		// 改行設定
	switch (index) {
	case 0x0000:			// T合計
		SYUUKEI_edit(Syuukei, pri_kind, p_proc_data);
		if (print_flag != 0) {
			next_line = ON;
		}
		break;
	case 0x0100:			// みなし決済プリント
		if ((print_flag & TGOUKEI_EC_MINASHI) != 0 &&
			Syuukei->Ec_minashi_cnt > 0) {
			// T合計連動印字の場合は機械No.等を印字しない
			p_proc_data->Prn_no_wk[9] = 1;
			SuicaUseLog_edit(&Ec_data->Minashi, R_PRI, p_proc_data, (short)PREQ_EC_MINASHI_LOG);
			next_line = ON;
		} else {
			p_proc_data->Final = ON;
		}
		break;
	case 0x0200:			// 処理未了取引記録
		if ((print_flag & TGOUKEI_EC_ALARM) != 0 &&
			(Syuukei->miryo_pay_ok_cnt > 0 ||
			 Syuukei->miryo_unknown_cnt > 0)) {
			// T合計連動印字の場合は機械No.等を印字しない
			p_proc_data->Prn_no_wk[9] = 1;
			Ec_AlmRctLog_edit(&Ec_data->Alarm, R_PRI, p_proc_data);
			next_line = ON;
		} else {
			p_proc_data->Final = ON;
		}
		break;
	default:
		index = 0x0300;
		p_proc_data->Final = ON;
		break;
	}

	if(ON == p_proc_data->Final){	// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞ
		p_proc_data->Prn_no = 0;
		p_proc_data->Prn_no_data1 = 0;
		p_proc_data->Prn_no_data2 = 0;
		memset(p_proc_data->Prn_no_wk, 0, sizeof(p_proc_data->Prn_no_wk));

		switch(index){
		case 0x0000:
		case 0x0100:
		case 0x0200:
			if (next_line == ON) {
				Kaigyou_set( pri_kind, FONT_A_NML, 1 );		// 「ﾌｫﾝﾄＡ縦ｻｲｽﾞ（3mm)＋設定されている改行量」の改行を１回行う
			}
			index += 0x0100;
			p_proc_data->Log_Start = OFF;
			p_proc_data->Final = OFF;
			break;
		default:
			break;
		}
	}
	p_proc_data->Prn_no = index | (p_proc_data->Prn_no & 0xFF);
}
// MH810105 GG119202(E) T合計連動印字対応
// MH810105(S) R.Endo 2021/12/13 車番チケットレス3.0 #6184 【現場指摘】精算後にE2610-224エラー頻発
/*[]-----------------------------------------------------------------------[]*/
/*|		日時印字ﾃﾞｰﾀ編集(clk_rec)											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	Prn_edit_Date4( *edit_wk, *date )					|*/
/*|																			|*/
/*|	PARAMETER		:	char			*edit_wk		= 編集ﾃﾞｰﾀｾｯﾄﾎﾟｲﾝﾀｰ	|*/
// MH810105(S) MH364301 電子ジャーナル対応（ジャーナル印字データの停電保障対策）
///*|						struct clk_rec 	*wk_CLK_REC		= 日時ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
/*|						DATE_YMDHMS 	*wk_CLK_REC		= 日時ﾃﾞｰﾀﾎﾟｲﾝﾀｰ	|*/
// MH810105(E) MH364301 電子ジャーナル対応（ジャーナル印字データの停電保障対策）
/*|						ushort 			wk_CLK_REC_msec	= 日時ﾃﾞｰﾀ(ﾐﾘ秒)	|*/
/*|																			|*/
/*|	RETURN VALUE	:	uchar			ret			= 日時ﾃﾞｰﾀﾁｪｯｸ結果		|*/
/*|													  OK = 正常				|*/
/*|													  NG = 以上				|*/
/*[]------------------------------------- Copyright(C) 2021 AMANO Corp.----[]*/
// MH810105(S) MH364301 電子ジャーナル対応（ジャーナル印字データの停電保障対策）
//uchar	Prn_edit_clk_rec( char *edit_wk, struct clk_rec *wk_CLK_REC, ushort wk_CLK_REC_msec )
uchar	Prn_edit_clk_YMDHMS( char *edit_wk, DATE_YMDHMS *wk_CLK_REC, ushort wk_CLK_REC_msec )
// MH810105(E) MH364301 電子ジャーナル対応（ジャーナル印字データの停電保障対策）
{
	uchar ret = OK;	// 日時ﾃﾞｰﾀﾁｪｯｸ結果

// MH810105(S) MH364301 電子ジャーナル対応（ジャーナル印字データの停電保障対策）
//	// 日時ﾃﾞｰﾀﾁｪｯｸ
//	if ( wk_CLK_REC->mont == 0 || wk_CLK_REC->mont > 12 ) {	// 月ﾃﾞｰﾀﾁｪｯｸ
//		ret = NG;
//	}
//	if ( wk_CLK_REC->date == 0 || wk_CLK_REC->date > 31 ) {	// 日ﾃﾞｰﾀﾁｪｯｸ
//		ret = NG;
//	}
//	if ( wk_CLK_REC->hour > 23 ) {							// 時ﾃﾞｰﾀﾁｪｯｸ
//		ret = NG;
//	}
//	if ( wk_CLK_REC->minu > 59 ) {							// 分ﾃﾞｰﾀﾁｪｯｸ
//		ret = NG;
//	}
//	if ( wk_CLK_REC->seco > 59 ) {							// 秒ﾃﾞｰﾀﾁｪｯｸ
//		ret = NG;
//	}
	// 日時ﾃﾞｰﾀﾁｪｯｸ
	if ( wk_CLK_REC->Mon == 0 || wk_CLK_REC->Mon > 12 ) {	// 月ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
	if ( wk_CLK_REC->Day == 0 || wk_CLK_REC->Day > 31 ) {	// 日ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
	if ( wk_CLK_REC->Hour > 23 ) {							// 時ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
	if ( wk_CLK_REC->Min > 59 ) {							// 分ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
	if ( wk_CLK_REC->Sec > 59 ) {							// 秒ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}
// MH810105(E) MH364301 電子ジャーナル対応（ジャーナル印字データの停電保障対策）
	if ( wk_CLK_REC_msec > 999 ) {							// ﾐﾘ秒ﾃﾞｰﾀﾁｪｯｸ
		ret = NG;
	}

	if ( ret == OK ) {
		// 日時ﾃﾞｰﾀが正常な場合
		sprintf(edit_wk,
			"%02d/%02d/%02d %02d:%02d:%02d.%03d",	// 編集ﾌｫｰﾏｯﾄ："yy/mm/dd hh:mm:ss.sss"
// MH810105(S) MH364301 電子ジャーナル対応（ジャーナル印字データの停電保障対策）
//			(wk_CLK_REC->year%100),					// 年ﾃﾞｰﾀ
//			wk_CLK_REC->mont,						// 月ﾃﾞｰﾀ
//			wk_CLK_REC->date,						// 日ﾃﾞｰﾀ
//			wk_CLK_REC->hour,						// 時ﾃﾞｰﾀ
//			wk_CLK_REC->minu,						// 分ﾃﾞｰﾀ
//			wk_CLK_REC->seco,						// 秒ﾃﾞｰﾀ
			(wk_CLK_REC->Year%100),					// 年ﾃﾞｰﾀ
			wk_CLK_REC->Mon,						// 月ﾃﾞｰﾀ
			wk_CLK_REC->Day,						// 日ﾃﾞｰﾀ
			wk_CLK_REC->Hour,						// 時ﾃﾞｰﾀ
			wk_CLK_REC->Min,						// 分ﾃﾞｰﾀ
			wk_CLK_REC->Sec,						// 秒ﾃﾞｰﾀ
// MH810105(E) MH364301 電子ジャーナル対応（ジャーナル印字データの停電保障対策）
			wk_CLK_REC_msec							// ﾐﾘ秒ﾃﾞｰﾀ
		);
	} else {
		// 日時ﾃﾞｰﾀが異常な場合
		sprintf( edit_wk,
			"  /  /     :  :  .   "					// 編集ﾌｫｰﾏｯﾄ："  /  /     :  :  .   "
		);
	}

	return( ret );
}

//[]----------------------------------------------------------------------[]
///	@brief			デバッグ用印字ﾃﾞｰﾀ編集処理
//[]----------------------------------------------------------------------[]
///	@param[in]		msg_data	デバッグ用印字要求ﾒｯｾｰｼﾞﾃﾞｰﾀﾌｫｰﾏｯﾄﾎﾟｲﾝﾀｰ
///	@param[in]		pri_kind	ﾌﾟﾘﾝﾀ種別
///	@param[in]		msg			編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
///	@return			void
//[]----------------------------------------------------------------------[]
///	@date			Create	:	2021/12/01<br>
///					Update	:	
//[]------------------------------------- Copyright(C) 2021 AMANO Corp.---[]
void	PrnDEBUG_edit(T_FrmDebugData *msg_data, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	// 印字設定
	PCMD_LEFT(pri_kind);				// [位置揃え(左揃え)]
	PrnFontSize(FONT_A_NML, pri_kind);	// ﾌｫﾝﾄＡ（通常）指定
	PrnFontSize(FONT_K_NML, pri_kind);	// 漢字（通常）指定

	memset(cEditwk1, 0x00, sizeof(cEditwk1));
	memcpy(cEditwk1, msg_data->data, sizeof(msg_data->data));

	memset(prn_work, 0x00, sizeof(prn_work));
	if ( msg_data->first_line ) {
		// 1行目はヘッダーを印字
		memset(cEditwk2, 0, sizeof(cEditwk2));
// MH810105(S) MH364301 電子ジャーナル対応（ジャーナル印字データの停電保障対策）
//		Prn_edit_clk_rec(cEditwk2, &msg_data->wk_CLK_REC, msg_data->wk_CLK_REC_msec);
		Prn_edit_clk_YMDHMS(cEditwk2, &msg_data->wk_CLK_YMDHMS, msg_data->wk_CLK_REC_msec);
// MH810105(E) MH364301 電子ジャーナル対応（ジャーナル印字データの停電保障対策）
		sprintf(prn_work, "■DEBUG %s\n●%s", cEditwk2, cEditwk1);
	} else {
		sprintf(prn_work, "●%s", cEditwk1);
	}

	PrnStr(prn_work, pri_kind);			// 印字ﾃﾞｰﾀ登録

	p_proc_data->Final = ON;			// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
}
// MH810105(E) R.Endo 2021/12/13 車番チケットレス3.0 #6184 【現場指摘】精算後にE2610-224エラー頻発

// MH810105(S) MH364301 QRコード決済対応
//[]----------------------------------------------------------------------[]
////	@brief			障害連絡票印字データ編集処理
//[]----------------------------------------------------------------------[]
//	@param[in]		*msg_data		障害連絡票データへのポインタ
//	@param[in]		pri_kind		ﾌﾟﾘﾝﾀ種別<br>
//	@param[in/out]	p_proc_data		編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
//	@return			ret				YES：編集終了　NO：編集継続
//	@author			Sato
//	@note			none
//[]----------------------------------------------------------------------[]
//	@date			Create	:	2021/11/12<br>
//					Update	:
//[]------------------------------------- Copyright(C) 2021 AMANO Corp.---[]
uchar	Recv_FailureContactData_edit(Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	uchar	edit_gyou = 0;				// 編集済み行数
	uchar	edit_cnt;					// 編集行数ﾜｰｸ
	uchar	edit_flg = YES;				// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）
	uchar	ret = NO;					// 戻り値
	uchar	primax;						// 印字最大項目数
	struct clk_rec	wrk_clk_rec;		// 決済日時

	primax = 13;
	Ryousyuu->Kikai_no = (uchar)CPrmSS[S_PAY][2];	// 機械№

	for ( ; edit_flg; ) {	// 編集処理ﾙｰﾌﾟ

		/*--------------------------------------*/
		/*	１ﾌﾞﾛｯｸ編集最大行数ﾁｪｯｸ処理			*/
		/*--------------------------------------*/
		if ((edit_gyou > 0) && ((edit_gyou + 1) > EDIT_GYOU_MAX)) {
		//	１ﾌﾞﾛｯｸ編集の最大行数を超えてしまう場合
			edit_flg = NO;						// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）
		}

		if (edit_flg == YES) {
		// 対象設定項目番号に設定されている印字内容＝印字する　且つ　１ﾌﾞﾛｯｸ編集の最大行数を超えない場合
			edit_cnt = 0;		// 編集行数ﾘｾｯﾄ
			/*--------------------------------------*/
			/*	１項目編集処理						*/
			/*--------------------------------------*/
			switch (p_proc_data->Prn_no_data1) {			// 設定されている印字内容番号により各処理へ分岐
			case	0:		// ＜表題＞編集処理
				Prn_edit_Title	(				// 表題（"障害連絡票"）印字ﾃﾞｰﾀ編集
									"障害連絡票",
									FONT_K_YOKOBAI,
									pri_kind
								);
				edit_cnt++;
				break;
			case	1:		// 空行
				edit_cnt += Prn_edit_space( pri_kind );				// 空行
				break;
			case	2:		// 決済情報(支払種別, 機械No.)
				memset(cEditwk1, 0, sizeof(cEditwk1));
				memset(cEditwk2, 0, sizeof(cEditwk2));
				memset(cEditwk3, 0, sizeof(cEditwk3));
				// 支払種別
				EcGetSubBrandName(BRANDNO_QR, 1, 0, (uchar*)cEditwk3);
				sprintf(cEditwk1, "<%s>", cEditwk3);
				// 精算機No.
				sprintf( cEditwk2,"精算機 #%02d",(ushort)Ryousyuu->Kikai_no );
				Str_Set1(
							cEditwk1,			// 文字列1：<支払種別>
							cEditwk2,			// 文字列2：機械番号
							pri_kind			// 印字先ﾌﾟﾘﾝﾀ
				);
				edit_cnt++;
				break;
// MH810105(S) MH364301 QRコード決済対応 #6457 障害連絡票に車番データIDが印字されない
//			case	3:		// 車室番号
//				edit_cnt += RYOUSYUU_edit_pkno(Ryousyuu, pri_kind, p_proc_data);
			case	3:		// 車番データID
				edit_cnt += RYOUSYUU_edit_content(Ryousyuu,pri_kind,p_proc_data,161);
				edit_cnt += RYOUSYUU_edit_content(Ryousyuu,pri_kind,p_proc_data,162);
// MH810105(E) MH364301 QRコード決済対応 #6457 障害連絡票に車番データIDが印字されない
				break;
			case	4:		// 仕切り行
				edit_cnt += Prn_edit_sikiri( pri_kind );			// ＜仕切り行＞編集処理
				break;
			case	5:		// 固定メッセージ：ｱﾌﾟﾘの支払い履歴(改行)をご確認ください
				PCMD_CENTER( pri_kind );						// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
				PrnFontSize( FONT_K_4BAI, pri_kind );			// ﾌｫﾝﾄ指定（漢字4倍角）
				PrnFontSize( FONT_A_4BAI, pri_kind );			// ﾌｫﾝﾄＡ（横倍角）指定
				PrnStr(Syogail_Prn[0], pri_kind );				// ｱﾌﾟﾘの支払い履歴
				edit_cnt++;
				PrnStr(Syogail_Prn[1], pri_kind );				// をご確認ください
				edit_cnt++;
				PrnFontSize( FONT_K_NML, pri_kind );			// 漢字ﾌｫﾝﾄ指定（通常）
				PrnFontSize( FONT_A_NML, pri_kind );			// ﾌｫﾝﾄＡ指定（通常）
				break;
			case	6:			// 利用日時
				memset(cEditwk2, 0, sizeof(cEditwk2));
				c_UnNormalize_sec(Ryousyuu->Electron_data.Ec.pay_datetime, &wrk_clk_rec);	// 時刻をdate_time_rec型へ変更する
				Prn_edit_Date6( cEditwk2, &wrk_clk_rec );
				Str_Set1(										// -----印字ﾃﾞｰﾀ編集-----
							ElectronEc_prn[54],					// 文字列１：利用日時
							cEditwk2,							// 文字列２：利用日時印字ﾃﾞｰﾀ
							pri_kind							// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;
				break;

			case	7:			// 利用額
				memset(cEditwk2, 0, sizeof(cEditwk2));
				sprintf(cMnydata, "%ld", Ryousyuu->Electron_data.Ec.pay_ryo);	// 料金印字ﾃﾞｰﾀ編集
				Camma_Set((uchar*)cMnydata);					// ３桁区切り（”、”挿入）
				Str_Set4(										// -----印字ﾃﾞｰﾀ編集-----
							ElectronEc_prn[55],					// 文字列１："利用額"
							"",									// 文字列２：NULL
							cMnydata,							// 文字列３：料金印字ﾃﾞｰﾀ
							Pri_Tanni[PriT_YEN],				// 文字列４：円
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
							2,									// ﾌｫﾝﾄｻｲｽﾞ：縦倍
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
							pri_kind							// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;
				break;
			case	8:			// 支払端末ID
				memset(cEditwk1, 0, sizeof(cEditwk1));
				memset(cEditwk2, 0, sizeof(cEditwk2));
				if (Ryousyuu->Electron_data.Ec.Brand.Qr.PayTerminalNo[0] == '\0') {
				// Nullもしくは通信不良の場合はアスタリスク表示
					memcpy(cEditwk2,"*************", 13);										// 支払端末ID
				} else {
					memcpy(cEditwk2, Ryousyuu->Electron_data.Ec.Brand.Qr.PayTerminalNo, 20);	// 支払端末ID
				}
				sprintf(cEditwk1, "%s", &ElectronEc_prn[22][2]);
				Str_Set1(										// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,							// 文字列１：端末ID
							cEditwk2,							// 文字列２：支払端末ID印字ﾃﾞｰﾀ
							pri_kind							// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;
				break;
			case	9:			// 取引番号
				memset(cEditwk2, 0, sizeof(cEditwk2));
				if (Ryousyuu->Electron_data.Ec.inquiry_num[0] == '\0') {
				// Nullもしくは通信不良の場合はアスタリスク表示
					memcpy(cEditwk2,"***************", 15);										// 取引番号
				} else {
					memcpy(cEditwk2, Ryousyuu->Electron_data.Ec.inquiry_num,
							sizeof(Ryousyuu->Electron_data.Ec.inquiry_num));					// 取引番号
				}
				Str_Set1(										// -----印字ﾃﾞｰﾀ編集-----
							ElectronEc_prn[53],					// 文字列１：取引番号
							cEditwk2,							// 文字列２：取引番号印字ﾃﾞｰﾀ
							pri_kind							// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt++;
				break;
			case	10:		// 仕切り行
				edit_cnt += Prn_edit_sikiri( pri_kind );		// ＜仕切り行＞編集処理
				break;
			case	11:		// 固定メッセージ
				if(prm_get(COM_PRM, S_PRN, 71, 1, 1) == 1 ||
					prm_get(COM_PRM, S_PRN, 71, 1, 1) == 2 ||
					prm_get(COM_PRM, S_PRN, 71, 1, 1) == 3){	// 1, 2, 3の場合のみ印字

					// 印字行チェック
					if ((edit_gyou + 6) > EDIT_GYOU_MAX) {
						edit_gyou += 6;
						continue;
					}

					PCMD_CENTER( pri_kind );					// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
					PCMD_KANJILINESET2( pri_kind );				// 漢字ｱﾝﾀﾞｰﾗｲﾝの指定（２ﾄﾞｯﾄ幅）
					PrnStr("ご案内", pri_kind );				// ご案内(下線)
					edit_cnt++;
					edit_cnt += Prn_edit_space( pri_kind );		// 空行
					PCMD_KANJILINECLR( pri_kind );				// 漢字ｱﾝﾀﾞｰﾗｲﾝの指定（解除）
					PrnStr(Syogail_Message_Prn[0], pri_kind );	// １行目印字ﾃﾞｰﾀ登録
					edit_cnt++;
					PrnStr(Syogail_Message_Prn[1], pri_kind );	// ２行目印字ﾃﾞｰﾀ登録
					edit_cnt++;
					PrnStr(Syogail_Message_Prn[2], pri_kind );	// ３行目印字ﾃﾞｰﾀ登録
					edit_cnt++;
					PrnStr(Syogail_Message_Prn[3], pri_kind );	// ４行目印字ﾃﾞｰﾀ登録
					edit_cnt++;
				}
				else {
					// 設定範囲外
					p_proc_data->Prn_no_data1 = 12;
				}
				break;
			case	12:		// 固定メッセージ
				switch (prm_get(COM_PRM, S_PRN, 71, 1, 1)){		// 18-0071⑥により印字内容変更
				case	1:
					PrnStr(Syogail_Message_Prn[4], pri_kind );	// ５行目印字ﾃﾞｰﾀ登録
					edit_cnt++;
					PrnStr(Syogail_Message_Prn[5], pri_kind );	// ６行目印字ﾃﾞｰﾀ登録
					edit_cnt++;
					break;
				case	2:
					PrnStr(Syogail_Message_Prn[6], pri_kind );	// ５行目印字ﾃﾞｰﾀ登録
					edit_cnt++;
					PrnStr(Syogail_Message_Prn[7], pri_kind );	// ６行目印字ﾃﾞｰﾀ登録
					edit_cnt++;
					edit_cnt += Prn_edit_space( pri_kind );		// 空行
					edit_cnt += Prn_edit_EmgFooter_edit( pri_kind );
					break;
				case	3:
					PrnStr(Syogail_Message_Prn[8], pri_kind );	// ５行目印字ﾃﾞｰﾀ登録
					edit_cnt++;
					PrnStr(Syogail_Message_Prn[9], pri_kind );	// ６行目印字ﾃﾞｰﾀ登録
					edit_cnt++;
					break;
				default:
					break;
				}
				// 終わり
				p_proc_data->Prn_no = 0xff;
				break;
			default:		// その他（印字項目番号ｴﾗｰ）
				break;
			}
			edit_gyou = (uchar)(edit_gyou + edit_cnt);	// 編集済み行数更新

			p_proc_data->Prn_no_data1++;

			// 印字するcaseが最大まで加算されたら終わり
			if( p_proc_data->Prn_no_data1 >= primax ){
				p_proc_data->Prn_no = 0xff;
			}
		}

		if (p_proc_data->Prn_no == 0xff) {
		// 最後まで印字内容編集終了の場合
			edit_flg = NO;						// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）

			p_proc_data->Prn_no		= 0;		// 編集処理ﾜｰｸﾘｾｯﾄ
			p_proc_data->Prn_no_data1	= 0;
			p_proc_data->Prn_no_data2	= 0;
			ret = YES;

			if (p_proc_data->Log_Edit == OFF) {
				// 精算履歴印字でない場合
				p_proc_data->Final = ON;		// 最終ﾌﾞﾛｯｸ編集終了ﾌﾗｸﾞｾｯﾄ
			}
		}
	}

	return (ret);
}

/*[]------------------------------------------------------------------------[]*/
/*| 障害連絡票フッター印字編集関数											 |*/
/*[]------------------------------------------------------------------------[]*/
/*| MODULE NAME  : Prn_edit_EmgFooter_edit                               |*/
/*| PARAMETER    :                                                           |*/
/*| RETURN VALUE : void                                                      |*/
/*[]------------------------------------------------------------------------[]*/
/*| Author       : T.Sato		                                         |*/
/*| Date         : 2021-12-22                                                |*/
/*[]------------------------------------------------------------------------[]*/
uchar	Prn_edit_EmgFooter_edit( uchar pri_kind )
{
	uchar			edit_cnt = 0;				// 編集行数
	uchar			gyou_cnt;					// 行数
	uchar			fnt_size[EMGFOOT_GYO_MAX];	// 文字ｻｲｽﾞ（ﾍｯﾀﾞｰ行数分）
	uchar			pri_posi[EMGFOOT_GYO_MAX];	// 印字位置（ﾍｯﾀﾞｰ行数分）
	uchar			data_cnt[EMGFOOT_GYO_MAX];	// 文字数（ﾍｯﾀﾞｰ行数分）
	uchar			*pri_data[EMGFOOT_GYO_MAX];	// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰ（ﾍｯﾀﾞｰ行数分）
	uchar			s_data;						// 設定ﾃﾞｰﾀﾜｰｸ
	uchar			i;							// 処理ﾙｰﾌﾟｶｳﾝﾀｰ
	ushort			cmd_len;					// 送信ｺﾏﾝﾄﾞﾃﾞｰﾀﾚﾝｸﾞｽ
	PRN_PROC_DATA	*p_proc_data;				// 編集処理制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
	memset ( fnt_size, 0, EMGFOOT_GYO_MAX );
	memset ( pri_posi, 0, EMGFOOT_GYO_MAX );
	memset ( data_cnt, 0, EMGFOOT_GYO_MAX );

	gyou_cnt = (uchar)prm_get( COM_PRM, S_PRN, 72, 2, 1 );						// 「ﾌｯﾀｰ行数」設定ﾃﾞｰﾀ取得

	if( gyou_cnt > EMGFOOT_GYO_MAX ){
		gyou_cnt = EMGFOOT_GYO_MAX;												// 不正ﾃﾞｰﾀの場合、Tﾌｯﾀｰ最大行数とする
	}


	for( i=0 ; i<gyou_cnt ;i++ ){

		fnt_size[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(73+i), 1, 4 );	// 「文字ｻｲｽﾞ」設定ﾃﾞｰﾀ取得
		if( fnt_size[i] > 3 ){
			fnt_size[i] = 0;													// 不正ﾃﾞｰﾀの場合、「標準」とする
		}

		pri_posi[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(73+i), 1, 3 );	// 「印字位置」設定ﾃﾞｰﾀ取得
		if( pri_posi[i] > 2 ){
			pri_posi[i] = 0;													// 不正ﾃﾞｰﾀの場合、「左揃え」とする
		}

		data_cnt[i] = (uchar)prm_get( COM_PRM, S_PRN, (short)(73+i), 2, 1 );	// 「文字数」設定ﾃﾞｰﾀ取得
		if( data_cnt[i] > FONTA_MAX_COL ){
			data_cnt[i] = FONTA_MAX_COL;										// 不正ﾃﾞｰﾀの場合、ﾌｫﾝﾄＡ最大文字数（３６文字）とする
		}

		if (_FLT_RtnKind(EmgFooter_Rsts) == FLT_NODATA) {
			gyou_cnt = 0;
			edit_cnt = 0;
			break;																// 未登録なら印字しない
		}else{
			pri_data[i] = (uchar *)&EmgFooter_Data[i][0];							// 文字ﾃﾞｰﾀﾎﾟｲﾝﾀｰｾｯﾄ
		}
	}

	if( gyou_cnt != 0 ){														// 印字ﾃﾞｰﾀあり？
		for( i = 0 ; i < gyou_cnt ; i++ ){										// 設定されている行数分の印字ﾃﾞｰﾀをﾌﾟﾘﾝﾀ送信ﾊﾞｯﾌｧへ登録

			memset( prn_work, 0, sizeof(prn_work) );							// 印字ｺﾏﾝﾄﾞ編集ｴﾘｱ（prn_work）０ｸﾘｱ
			cmd_len = 0;														// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ０ｸﾘｱ

			// 印字位置
			s_data = pri_posi[i];												// 印字位置設定ﾃﾞｰﾀ取得
			memcpy( &prn_work[0], &Pri_posi_cmd[s_data][0], 3 );				// 印字位置指定ｺﾏﾝﾄﾞｾｯﾄ
			cmd_len += 3;														// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋３

			// 印字文字ｻｲｽﾞ
			s_data = fnt_size[i];												// 文字ｻｲｽﾞ設定ﾃﾞｰﾀ取得
			memcpy( &prn_work[cmd_len], &Pri_size_cmd[s_data][0], 9 );			// 文字ｻｲｽﾞ指定ｺﾏﾝﾄﾞｾｯﾄ
			cmd_len += 9;														// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋６

			// 印字文字ﾃﾞｰﾀ
			memcpy( &prn_work[cmd_len], pri_data[i], (size_t)data_cnt[i] );		// 文字ﾃﾞｰﾀｾｯﾄ
			cmd_len += data_cnt[i];												// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋文字ﾃﾞｰﾀ数

			prn_work[cmd_len] = LF;												// 改行ﾃﾞｰﾀｾｯﾄ
			cmd_len += 1;														// ｺﾏﾝﾄﾞﾚﾝｸﾞｽ＋１

			PrnCmdLen( (uchar *)prn_work, cmd_len, pri_kind );					// 編集した印字ｺﾏﾝﾄﾞﾃﾞｰﾀを登録

			edit_cnt++;															// 編集行数＋１

		}

		// 文字ｻｲｽﾞ、改行量を初期状態へ戻す

		PrnCmdLen( &Pri_size_cmd[4][0], 9, pri_kind );

		p_proc_data = (PRN_PROC_DATA *)&rct_proc_data;						// ﾚｼｰﾄ編集処理制御ﾃﾞｰﾀﾎﾟｲﾝﾀｾｯﾄ
		p_proc_data->Font_size		= FONT_A_NML;
		p_proc_data->Kanji_size		= FONT_K_NML;
		p_proc_data->Kaigyou_size	= 0x1c;

	}

	inc_dct( MOV_PRNT_CNT, (short)edit_cnt );								// 「ﾚｼｰﾄﾌﾟﾘﾝﾀ印字行数」動作ｶｳﾝﾄ

	return( edit_cnt );
}
// MH810105(E) MH364301 QRコード決済対応

// MH810105(S) MH364301 インボイス対応
//[]----------------------------------------------------------------------[]
///	@brief			18-0077に設定された消費税率を返す
//[]----------------------------------------------------------------------[]
///	@param[in]		time:date_time_rec構造体
///	@return			int 消費税率
//[]----------------------------------------------------------------------[]
///	@author			Hayakawa
///	@date			Create	: 2022/3/31<br>
///					Update	:
//[]------------------------------------- Copyright(C) 2022 AMANO Corp.---[]
uchar Disp_Tax_Value( date_time_rec *time )
{
	ushort	clock_date;											// 精算開始時刻(精算時刻、出庫時刻)
	ushort	nborder_time;										// ノーマライゼーション後の日付
	long	border_time = 0;


	border_time = prm_get( COM_PRM, S_PRN, 78, 6, 1 );			// 税率変更基準日(18-0078)

	// 存在しない日付の場合は0と扱う
	if ( date_exist_check((short)(2000+border_time/10000),
						  (short)((border_time/100)%100),
						  (short)(border_time%100)) == -1 ) {

		border_time = 0;
	}

	if ( border_time == 0 ) {									// 日付を設定していなかったら変更前税率を返す
		return (uchar)prm_get( COM_PRM, S_PRN, 77, 2, 3 );
	}

	clock_date = dnrmlzm( (short)time->Year, (short)time->Mon, (short)time->Day );
	nborder_time = dnrmlzm( (short)(2000+border_time/10000), (short)((border_time/100)%100), (short)(border_time%100) );

	if ( clock_date < nborder_time ) {
		return (uchar)prm_get( COM_PRM, S_PRN, 77, 2, 3 );		// 変更前税率
	} else {
		return (uchar)prm_get( COM_PRM, S_PRN, 77, 2, 1 );		// 変更後税率
	}
}
// MH810105(E) MH364301 インボイス対応
// GG129000(S) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
//[]----------------------------------------------------------------------[]
//	@brief			課税媒体利用額（非課税媒体利用額）
//[]----------------------------------------------------------------------[]
//	@param[in]		*msg_data		領収証ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
//	@param[in]		pri_kind		ﾌﾟﾘﾝﾀ種別<br>
//	@param[in/out]	p_proc_data		編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
//	@param[in]		taxable			YES：課税媒体利用額(項目213)　NO：非課税媒体利用額(項目212)<br>
//	@return			ret				編集行数
//	@note			none
//[]----------------------------------------------------------------------[]
//	@date			Create	:	2022/06/14<br>
//					Update	:
//[]------------------------------------- Copyright(C) 2022 AMANO Corp.---[]
uchar	RYOUSYUU_edit_taxableDiscount(Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data, uchar taxable)
{

	typedef struct {
		uchar	num;							// 印字項目番号
		uchar	max;							// 印字項目最大編集行
	} item;

	// 印字項目(212,213共通)
	enum{
		TAX_SERVICE = 0,						// ｻｰﾋﾞｽ券
// GG129000(S) T.Nagai 2023/02/15 ゲート式車番チケットレスシステム対応（インボイス対応）
		TAX_C_SERVICE,							// 前回割引サービス券
// GG129000(E) T.Nagai 2023/02/15 ゲート式車番チケットレスシステム対応（インボイス対応）
		TAX_KAKEURI,							// 掛売券（店割引）
// GG129000(S) T.Nagai 2023/02/15 ゲート式車番チケットレスシステム対応（インボイス対応）
		TAX_C_KAKEURI,							// 前回割引掛売券（店割引）
// GG129000(E) T.Nagai 2023/02/15 ゲート式車番チケットレスシステム対応（インボイス対応）
		TAX_PRIPEC,								// ﾌﾟﾘﾍﾟｲﾄﾞ利用額
		TAX_KAISUU,								// 回数券利用額
		TAX_LAST_TIME,							// 前回時間割引
		TAX_LAST_CHARGE,						// 前回料金割引
// GG129000(S) S.Fujii 2023/12/26 インボイス対応
		TAX_KAIMONO,							// 買物割引
// GG129000(E) S.Fujii 2023/12/26 インボイス対応
		TAX_CREDIT,								// ｸﾚｼﾞｯﾄ利用額
		TAX_EMONY,								// 電子ﾏﾈｰ利用額
		// 印字項目追加時は ↑ に追加
		TAXABLE_MAX,							// 最大印字項目数
	};

	// 非課税媒体利用額　印字内容（印字項目：212）
	uchar	edit_noTaxable_contents[][2] =
	{
	//	{印字項目,	最大印字行数}
		{TAX_SERVICE, WTIK_USEMAX*2},
// GG129000(S) T.Nagai 2023/02/15 ゲート式車番チケットレスシステム対応（インボイス対応）
		{TAX_C_SERVICE, WTIK_USEMAX*2},
// GG129000(E) T.Nagai 2023/02/15 ゲート式車番チケットレスシステム対応（インボイス対応）
		{TAX_KAKEURI, WTIK_USEMAX*2},
// GG129000(S) T.Nagai 2023/02/15 ゲート式車番チケットレスシステム対応（インボイス対応）
		{TAX_C_KAKEURI, WTIK_USEMAX*2},
// GG129000(E) T.Nagai 2023/02/15 ゲート式車番チケットレスシステム対応（インボイス対応）
// GG129000(S) S.Fujii 2023/12/26 インボイス対応
		{TAX_KAIMONO, 2},
// GG129000(E) S.Fujii 2023/12/26 インボイス対応
		{TAX_PRIPEC, 1},
		{TAX_KAISUU, 1},
		{TAX_LAST_TIME, 1},
		{TAX_LAST_CHARGE, 1},
		// 印字項目追加時は ↑ に追加
		{TAXABLE_MAX, 0},
	};

	// 課税媒体利用額　印字内容（印字項目：213）
	uchar	edit_taxable_contents[][2] =
	{
	//	{印字項目,	最大印字行数}
		{TAX_SERVICE, WTIK_USEMAX*2},
		{TAX_KAKEURI, WTIK_USEMAX*2},
		{TAX_PRIPEC, 1},
		{TAX_KAISUU, 1},
		{TAX_CREDIT, 1},
		{TAX_EMONY, 1},
		// 印字項目追加時は ↑ に追加
		{TAXABLE_MAX, 0},
	};

	item	item_data[TAXABLE_MAX];				// 印字項目詳細
	uchar	edit_cnt = 0;						// 編集行数ﾜｰｸ
	uchar	edit_gyou = 0;						// 編集済み行数
	uchar	edit_flg = YES;						// 編集継続判断ﾌﾗｸﾞ（YES：編集継続／NO：編集終了）
	uchar	next_data = OFF;					// 項目印字完了（次項目印字ﾌﾗｸﾞ）
	uchar	edit_fin = OFF;						// 本関数の処理終了
	uchar	i;
	ushort	edit_num = 0;						// 編集項目番号(enum)

	uchar	mark;								// 符号
	ulong	edit_work;							// 編集
	uchar	PPC_MAX;
	DISCOUNT_DATA	*ppc_data_edit;
	short		str_index;						// 電子ﾏﾈｰ印字文字列
	ulong	tax_e_pay = 0;						// 電子ﾏﾈｰ利用額

	edit_num = p_proc_data->Prn_no_data2;		// 項目番号
	p_proc_data->Prn_no_wk[7] = YES;			// 項目（212,213）
	p_proc_data->Prn_no_wk[8] = taxable;		// 課税（YES：項目番号213　NO：項目番号212）
	memset( &item_data, 0, sizeof(item_data) );

	if( taxable == YES ){						// 課税媒体利用額（印字項目：213）
		mark = 0;								// 「-」なし
		for( i = 0; i < _countof(edit_taxable_contents); i++ ){
			item_data[i].num = edit_taxable_contents[i][0];
			item_data[i].max = edit_taxable_contents[i][1];
		}
	}
	else{										// 非課税媒体利用額（印字項目：212）
		mark = 1;								// 「-」あり
		for( i = 0; i < _countof(edit_noTaxable_contents) ; i++ ){
			item_data[i].num = edit_noTaxable_contents[i][0];
			item_data[i].max = edit_noTaxable_contents[i][1];
		}
	}

	while( 1 ){									// 編集処理ﾙｰﾌﾟ

		edit_cnt = 0;							// 編集行数ﾘｾｯﾄ
		edit_work = 0;
		next_data = OFF;						// 次項目印字ﾌﾗｸﾞOFF

		switch ( item_data[edit_num].num ) {

			// サービス券（印字項目：12）
			// 店割引（印字項目：13）
			case	TAX_SERVICE:
			case	TAX_KAKEURI:
				p_proc_data->Prn_no_data2 = 0;
				if( item_data[edit_num].num == TAX_SERVICE ){
					edit_cnt += RYOUSYUU_edit_service( Ryousyuu, pri_kind, p_proc_data );
				}
				else{
					edit_cnt += RYOUSYUU_edit_misewari( Ryousyuu, pri_kind, p_proc_data );
				}
				if( p_proc_data->Prn_no_data1 == 0 ){								// 印字完了
					next_data = ON;													// 次項目印字ﾌﾗｸﾞON
				}
				else{																// 印字完了してない
					edit_flg = NO;													// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）
				}
				break;

// GG129000(S) T.Nagai 2023/02/15 ゲート式車番チケットレスシステム対応（インボイス対応）
			// 中止サービス券（印字項目：12）
			// 中止店割引（印字項目：13）
			case	TAX_C_SERVICE:
			case	TAX_C_KAKEURI:
				p_proc_data->Prn_no_data2 = 1;
				if( item_data[edit_num].num == TAX_C_SERVICE ){
					edit_cnt += RYOUSYUU_edit_service( Ryousyuu, pri_kind, p_proc_data );
				}
				else{
					edit_cnt += RYOUSYUU_edit_misewari( Ryousyuu, pri_kind, p_proc_data );
				}
				if( p_proc_data->Prn_no_data2 == 0 ){								// 印字完了
					next_data = ON;													// 次項目印字ﾌﾗｸﾞON
				}
				else{																// 印字完了してない
					edit_flg = NO;													// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）
				}
				break;
// GG129000(E) T.Nagai 2023/02/15 ゲート式車番チケットレスシステム対応（インボイス対応）

			// プリペイドカード利用額（印字項目：111）
			case	TAX_PRIPEC:
				if( prm_get( COM_PRM, S_PRP, 1, 1, 2 ) != taxable ){
					// 課税対象（13-0001=0）であり、印字項目：213（課税対象taxable=1）の場合
					// 課税対象外（13-0001=1）であり、印字項目：212（課税対象外taxable=0）の場合
					if( ( Ryousyuu->testflag == ON ) &&
						( Ryousyuu->TInTime.Year == 2000 && Ryousyuu->TInTime.Mon == 1 && Ryousyuu->TInTime.Day == 1 ) &&
						( Ryousyuu->TOutTime.Year == 2000 && Ryousyuu->TOutTime.Mon == 1 && Ryousyuu->TOutTime.Day == 1 )){
						next_data = ON;
						break;
					}else{
						ppc_data_edit = Ryousyuu->DiscountData;
						PPC_MAX	= WTIK_USEMAX;
						for( i = 0; i < PPC_MAX ; i++,ppc_data_edit++ ){				// PPCﾃﾞｰﾀ検索
							if( ppc_data_edit->DiscSyu == NTNET_PRI_W ){				// PPCﾃﾞｰﾀあり？
								edit_work += ppc_data_edit->Discount;					//「ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ利用額」を加算していく
							}
						}
						if( edit_work ){
							sprintf( cEditwk1,"%s", Ryosyu_Content[1].print_data[0] );	// cEditwk1に「ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ」セット
							edit_cnt += RYOUSYUU_edit_content_sub(					// -----印字ﾃﾞｰﾀ編集-----
										cEditwk1,									// データ１："ﾌﾟﾘﾍﾟｲﾄﾞｶｰﾄﾞ"
										edit_work,									// データ２：利用金額
										0,											// データ３：なし
										mark,										// データ４："-"なし
										pri_kind									// データ５：印字先ﾌﾟﾘﾝﾀ
									);
						}
					}
				}
				next_data = ON;														// 次項目印字ﾌﾗｸﾞON
				break;

			// 回数券利用額（印字項目：112）
			case	TAX_KAISUU:
				if( prm_get( COM_PRM, S_PRP, 1, 1, 2 ) != taxable ){
					// 課税対象（13-0001=0）であり、印字項目：213（課税対象taxable=1）の場合
					// 課税対象外（13-0001=1）であり、印字項目：212（課税対象外taxable=0）の場合
					for( i = 0; i < WTIK_USEMAX ; i++ ){							// 割引券ﾃﾞｰﾀ検索
						if( Ryousyuu->DiscountData[i].DiscSyu == NTNET_FRE ){		// 回数券ﾃﾞｰﾀ？
							edit_work	+= Ryousyuu->DiscountData[i].Discount;		//「回数券利用額」を加算していく
						}
					}
					if( edit_work ){
						sprintf( cEditwk1,"%s", Ryosyu_Content[2].print_data[0] );	// cEditwk1に「回数券」セット
						edit_cnt += RYOUSYUU_edit_content_sub(						// -----印字ﾃﾞｰﾀ編集-----
									cEditwk1,										// データ１："回数券"
									edit_work,										// データ２：利用金額
									0,												// データ３：なし
									mark,											// データ４："-"なし
									pri_kind										// データ５：印字先ﾌﾟﾘﾝﾀ
								);
					}
				}
				next_data = ON;														// 次項目印字ﾌﾗｸﾞON
				break;

			// ＜前回時間割引＞編集処理（印字項目：18）
			case	TAX_LAST_TIME:
				edit_cnt += RYOUSYUU_edit_btwari( Ryousyuu, pri_kind, p_proc_data );
				next_data = ON;														// 次項目印字ﾌﾗｸﾞON
				break;

			// ＜前回料金割引＞編集処理（印字項目：19）
			case	TAX_LAST_CHARGE:
				edit_cnt += RYOUSYUU_edit_brwari( Ryousyuu, pri_kind, p_proc_data );
				next_data = ON;														// 次項目印字ﾌﾗｸﾞON
				break;

// GG129000(S) S.Fujii 2023/12/26 インボイス対応
			// ＜買物割引（合計額）＞編集処理（印字項目：190）
			case	TAX_KAIMONO:
				p_proc_data->Prn_no_data2 = 0;
				edit_cnt = RYOUSYUU_edit_Kaimono( Ryousyuu, pri_kind, p_proc_data );
				next_data = ON;														// 次項目印字ﾌﾗｸﾞON
				break;
// GG129000(E) S.Fujii 2023/12/26 インボイス対応

			// ｸﾚｼﾞｯﾄｶｰﾄﾞ利用額（印字項目：113）
			case TAX_CREDIT:
				if ( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement != 0 &&
					 Ryousyuu->WFlag != 0 ) {
					// 決済精算中止時はクレジットカード利用額を印字しない
					next_data = ON;
					break;
				}
				if ( Ryousyuu->chuusi == 1 ) {
					// 決済精算中止時はクレジット利用額を印字しない
					next_data = ON;
					break;
				}
				if( Ryousyuu->credit.pay_ryo ){
					sprintf( cEditwk1,"%s", Ryosyu_Content[3].print_data[1] );		// cEditwk1に「ｸﾚｼﾞｯﾄｶｰﾄﾞ」セット
					edit_cnt += RYOUSYUU_edit_content_sub(							// -----印字ﾃﾞｰﾀ編集-----
								cEditwk1,											// データ１："ｸﾚｼﾞｯﾄｶｰﾄﾞ"
								Ryousyuu->credit.pay_ryo,							// データ２：利用金額
								0,													// データ３：なし
								0,													// データ４："-"なし
								pri_kind											// データ５：印字先ﾌﾟﾘﾝﾀ
							);
				}
				next_data = ON;														// 次項目印字ﾌﾗｸﾞON
				break;

			// 電子決済ｶｰﾄﾞ利用額（印字項目：114）
			case TAX_EMONY:
				if ( Ryousyuu->Electron_data.Ec.E_Status.BIT.deemed_settlement != 0 &&
					 Ryousyuu->WFlag != 0 ) {
					// 決済精算中止時は電子マネー利用額を印字しない
					next_data = ON;
					break;
				}
				if ( Ryousyuu->chuusi == 1 ) {
					// 決済精算中止時は電子マネー利用額を印字しない
					next_data = ON;
					break;
				}
				if ( EcUseKindCheck(Ryousyuu->Electron_data.Ec.e_pay_kind) ) {
				// 決済リーダ
					str_index = EcRiyougakuBrandStrNo[Ryousyuu->Electron_data.Ec.e_pay_kind - EC_EDY_USED];
					tax_e_pay = Ryousyuu->Electron_data.Ec.pay_ryo;
				}
				else if( SuicaUseKindCheck( Ryousyuu->Electron_data.Suica.e_pay_kind ) ){
				// Suica
					str_index = EcRiyougakuBrandStrNo[EC_KOUTSUU_USED-EC_EDY_USED];
					tax_e_pay = Ryousyuu->Electron_data.Suica.pay_ryo;
				}
				if( tax_e_pay ){
					if ( str_index >= 0 && str_index < TBL_CNT(ElectronEc_prn) ) {
						sprintf(cEditwk1, "%s", ElectronEc_prn[str_index]);			// cEditwk1に利用媒体名セット
						edit_cnt += RYOUSYUU_edit_content_sub(						// -----印字ﾃﾞｰﾀ編集-----
									cEditwk1,										// データ１：利用媒体名
									tax_e_pay,										// データ２：利用金額
									0,												// データ３：なし
									0,												// データ４："-"なし
									pri_kind										// データ５：印字先ﾌﾟﾘﾝﾀ
								);
					}
				}
				next_data = ON;														// 次項目印字ﾌﾗｸﾞON
				break;

			case TAXABLE_MAX:														// 最後まで印字
				edit_fin = YES;														// 終了ﾌﾗｸﾞON
				break;

			default:																// その他（印字項目番号ｴﾗｰ）
				break;
		}

		if ( edit_fin == YES ) {													// 最後まで印字内容編集終了の場合

			// 使用した変数を元に戻す
			p_proc_data->Prn_no_data1	= 0;
			p_proc_data->Prn_no_data2	= 0;
			p_proc_data->Prn_no_wk[7]	= 0;
			p_proc_data->Prn_no_wk[8]	= 0;
			break;																	// 終了
		}
		else{																		// まだ印字項目あり
			if( next_data == ON ){													// 次項目印字ﾌﾗｸﾞON
				edit_num ++;														// 次項目へ
			}

			p_proc_data->Prn_no_data2 = edit_num;									// 編集済項目番号保存

			edit_gyou = (uchar)(edit_gyou + edit_cnt);								// 編集済み行数更新
			if ( (edit_gyou + item_data[edit_num].max) > EDIT_GYOU_MAX ) {
			//	１ﾌﾞﾛｯｸ編集の最大行数を超えてしまう場合
				edit_flg = NO;														// 編集継続判断ﾌﾗｸﾞｾｯﾄ（編集終了）
			}

// GG129001(S) インボイス対応（印字行判定不具合）
//			if( edit_flg == ON ){													// 編集一時中断
			if( edit_flg == NO ){													// 編集一時中断
// GG129001(E) インボイス対応（印字行判定不具合）
				break;																// 抜ける
			}
		}
	}
	return ( edit_cnt );
}

//[]----------------------------------------------------------------------[]
//	@brief			合計金額(適用税率付)
//[]----------------------------------------------------------------------[]
//	@param[in]		*msg_data		領収証ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
//	@param[in]		pri_kind		ﾌﾟﾘﾝﾀ種別<br>
//	@param[in/out]	p_proc_data		編集制御ﾃﾞｰﾀﾎﾟｲﾝﾀｰ
//	@return			ret				編集行数
//	@note			none
//[]----------------------------------------------------------------------[]
//	@date			Create	:	2022/06/20<br>
//					Update	:
//[]------------------------------------- Copyright(C) 2022 AMANO Corp.---[]
uchar	RYOUSYUU_edit_totalAmount_taxRate( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data )
{

	enum{
		TOTAL_AMOUNT = 0,						// 合計
		TAX_RATE,								// 適用印税率
		TOTALAMOUNT_MAX,						// 最大印字項目数
	};

	uchar	edit_cnt = 0;						// 編集項目
	uchar	prn_no = 0;							// 項目番号
	uchar	primax;								// 印字最大項目数
	uchar	font_size = 0;						// ﾌｫﾝﾄｻｲｽﾞ 0 = 標準 1 = 横倍

// GG129001(S) データ保管サービス対応（課税対象額をセットする）
//	ulong	taxNotDis_total = 0;				// 課税対象外割引額
//	ulong	taxDis_total = 0;					// 課税対象割引額
// GG129001(E) データ保管サービス対応（課税対象額をセットする）
	ulong	billing = 0;						// 請求額
	ulong	tax_billing = 0;					// 課税対象額
// GG129001(S) データ保管サービス対応（課税対象額をセットする）
//	uchar	i;
//
//	wari_tiket	wari_dt;
// GG129001(E) データ保管サービス対応（課税対象額をセットする）

	primax = TOTALAMOUNT_MAX;					// 最大印字項目数

	// 課税対象額、請求額を計算する
// GG129001(S) データ保管サービス対応（課税対象額をセットする）
// 	// 前回割引額
// 	for( i = 0; i < WTIK_USEMAX ; i++ ){						// 割引券ﾃﾞｰﾀ検索
// 		disc_wari_conv_prev( &Ryousyuu->DiscountData[i], &wari_dt );
// 		if( wari_dt.tik_syu == 0 || wari_dt.tik_syu == INVALID ){	// 割引ﾃﾞｰﾀなし
// // GG129000(S) 改善連絡No.03：インボイス対象外なのに領収証に合計額が印字されてしまう。（GM803002流用）
// //		if( wari_dt.tik_syu == 0 || wari_dt.tik_syu == INVALID ){	// 割引ﾃﾞｰﾀなし
// //			break;
// //		}
// //		if( wari_dt.ryokin ){									// 割引料金あり
// 			// 処理なし(検索続行)
// 		}else if( wari_dt.ryokin ){									// 割引料金あり
// // GG129000(E) 改善連絡No.03：インボイス対象外なのに領収証に合計額が印字されてしまう。（GM803002流用）
// // GG129000(S) R.Endo 2024/01/10 #7216 種別割引を含む精算で領収証の「合計」が不正になる
// // 			if( wari_dt.tik_syu != KAISUU ){
// // 				taxNotDis_total += wari_dt.ryokin;
// // 			}
// 			switch ( wari_dt.tik_syu ) {
// 			case C_SERVICE:			// ｻｰﾋﾞｽ券
// 			case C_KAKEURI:			// 掛売券
// 			case C_SHOPPING:		// 買物割引
// 				taxNotDis_total += wari_dt.ryokin;	// 課税対象外
// 				break;
// 			default:				// その他
// 				// 割引以外
// 				break;
// 			}
// // GG129000(E) R.Endo 2024/01/10 #7216 種別割引を含む精算で領収証の「合計」が不正になる
// 		}
// 	}
// // GG129000(S) 改善連絡No.03：インボイス対象外なのに領収証に合計額が印字されてしまう。（GM803002流用）
// //	// 今回割引額（前回割引検索の続きから）
// //	for( ; i < WTIK_USEMAX ; i++ ){								// 割引券ﾃﾞｰﾀ検索
// 	// 今回割引額（まとまる場合がある為、最初から再検索）
// 	for( i = 0; i < WTIK_USEMAX ; i++ ){						// 割引券ﾃﾞｰﾀ検索
// // GG129000(E) 改善連絡No.03：インボイス対象外なのに領収証に合計額が印字されてしまう。（GM803002流用）
// 		disc_wari_conv_new( &Ryousyuu->DiscountData[i], &wari_dt );
// 		if( wari_dt.tik_syu == 0 || wari_dt.tik_syu == INVALID ){	// 割引ﾃﾞｰﾀなし
// // GG129000(S) 改善連絡No.03：インボイス対象外なのに領収証に合計額が印字されてしまう。（GM803002流用）
// //			break;
// //		}
// //		if( wari_dt.ryokin ){									// 割引料金あり
// 			// 処理なし(検索続行)
// 		}else if( wari_dt.ryokin ){									// 割引料金あり
// // GG129000(E) 改善連絡No.03：インボイス対象外なのに領収証に合計額が印字されてしまう。（GM803002流用）
// // GG129000(S) R.Endo 2024/01/10 #7216 種別割引を含む精算で領収証の「合計」が不正になる
// // 			if( (wari_dt.tik_syu == KAISUU && prm_get( COM_PRM, S_PRP, 1, 1, 2 ) == 1) ||
// // 				(wari_dt.tik_syu != KAISUU && !cancelReceipt_Waridata_chk(&wari_dt)) ){
// // 				// 回数券であり課税対象にしない
// // 				// 回数券以外で課税対象にしない
// // 				// 課税対象外割引額に加算
// // 				taxNotDis_total += wari_dt.ryokin;
// // 			}
// // 			else{
// // 				// 課税対象割引額に加算
// // 				taxDis_total += wari_dt.ryokin;
// // 			}
// 			switch ( wari_dt.tik_syu ) {
// 			case SERVICE:			// ｻｰﾋﾞｽ券
// 			case KAKEURI:			// 掛売券
// 				if ( cancelReceipt_Waridata_chk(&wari_dt) ) {
// 					taxDis_total += wari_dt.ryokin;		// 課税対象
// 				} else {
// 					taxNotDis_total += wari_dt.ryokin;	// 課税対象外
// 				}
// 				break;
// 			case KAISUU:			// 回数券
// 			case PREPAID:			// プリペイドカード
// 				if ( prm_get(COM_PRM, S_PRP, 1, 1, 2) == 1 ) {
// 					taxDis_total += wari_dt.ryokin;		// 課税対象
// 				} else {
// 					taxNotDis_total += wari_dt.ryokin;	// 課税対象外
// 				}
// 				break;
// 			case SHOPPING:			// 買物割引
// 			case C_SERVICE:			// ｻｰﾋﾞｽ券
// 			case C_KAKEURI:			// 掛売券
// 			case C_KAISUU:			// 精算中止回数券
// 			case C_SHOPPING:		// 買物割引
// 				taxNotDis_total += wari_dt.ryokin;	// 課税対象外
// 				break;
// 			default:				// その他
// 				// 割引以外
// 				break;
// 			}
// // GG129000(E) R.Endo 2024/01/10 #7216 種別割引を含む精算で領収証の「合計」が不正になる
// 		}
// 	}
// 	// 前回時間（料金）割引や前回ﾌﾟﾘﾍﾟｲﾄﾞ利用金額計算
// 	taxNotDis_total += (Ryousyuu->ppc_chusi_ryo +
// // GG121802(S) R.Endo 2023/07/25 インボイス対応（割引＋現金入金時に合計が0円となる不具合とビルドエラーの修正）
// // 						Ryousyuu->BeforeTwari +
// // 						Ryousyuu->BeforeRwari +
// // // GG129000(S) 改善連絡No.03：インボイス対象外なのに領収証に合計額が印字されてしまう。（GM803002流用）
// // 						Ryousyuu->zenkai +
// // // GG129000(E) 改善連絡No.03：インボイス対象外なのに領収証に合計額が印字されてしまう。（GM803002流用）
// // 						Ryousyuu->BeforePwari);
// 						Ryousyuu->zenkai);
// // GG121802(E) R.Endo 2023/07/25 インボイス対応（割引＋現金入金時に合計が0円となる不具合とビルドエラーの修正）

// 	// 請求額
// 	if( Ryousyuu->WPrice > taxNotDis_total ){ 					// 割引額より駐車料金の方が大きい場合
// 		billing = Ryousyuu->WPrice - taxNotDis_total;			// 請求額（駐車料金-課税対象外割引額）
// 	}
// 	else{
// 		billing = 0;
// 	}

// 	// 内税対象額
// 	tax_billing = taxDis_total;									// 内税対象額

// 	// 内税対象額に電子ﾏﾈｰ、ｸﾚｼﾞｯﾄ、現金領収額を加算
// 	tax_billing += (Ryousyuu->Electron_data.Ec.pay_ryo +
// 					Ryousyuu->credit.pay_ryo +
// 					(Ryousyuu->WInPrice - Ryousyuu->WChgPrice));
	// 請求額
	billing = Ryousyuu->WBillAmount;
	// 課税対象額
	tax_billing = Ryousyuu->WTaxPrice;
// GG129001(E) データ保管サービス対応（課税対象額をセットする）
// GG129001(S) 実割引しない設定で割引をすると合計金額と課税対象額が一致しない
	if( tax_billing > billing ){
		tax_billing = billing;
	}
// GG129001(E) 実割引しない設定で割引をすると合計金額と課税対象額が一致しない

	while( 1 ){													// 編集処理ﾙｰﾌﾟ

		memset( cEditwk1, 0, sizeof(cEditwk1) );
		memset( cMnydata, 0, sizeof(cMnydata) );

		switch ( prn_no ) {

			// 請求額
			case	TOTAL_AMOUNT:
				if( Ryousyuu->chuusi != 1 ){					// 精算完了時の印字
					font_size = 1;								// 「合 計　　X円」を横倍
				}
				sprintf(cMnydata, "%ld", billing);									// 料金印字ﾃﾞｰﾀ編集
				Camma_Set((uchar*)cMnydata);										// ３桁区切り（”、”挿入）
				// GT-4100は「合　計」ではなく「合計」で印字する仕様
				Str_Set4(															// -----印字ﾃﾞｰﾀ編集-----
							"合計",													// データ１："合計"
							"",														// データ２：NULL
							cMnydata,												// データ２：合計（駐車料金-課税対象外割引額）
							Pri_Tanni[PriT_YEN],									// データ４：円
							font_size,												// ﾌｫﾝﾄｻｲｽﾞ：0 = 標準 1 = 横倍
							pri_kind												// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt ++;														// 印字行加算
				break;

			// 適用印税率
			case	TAX_RATE:
				if ( Ryousyuu->WTaxRate == 0 ||									// 消費税が0%表示の際は印字しない
					 Ryousyuu->chuusi == 1 ) {									// 中止時は（項目297で印字するため）印字しない
					break;
				}
				if (tax_billing == 0) {
					// 課税対象額＝０円の場合は「内消費税対象額」と印字する
					sprintf( cEditwk1," (%s", InVoice_Prn[10] );
				}
				else {
				sprintf( cEditwk1," (%s%d%s", InVoice_Prn[8], Ryousyuu->WTaxRate, InVoice_Prn[9] );
				}
				sprintf( cMnydata,"%ld", tax_billing );								// 料金印字ﾃﾞｰﾀ編集
				Camma_Set( (uchar *)cMnydata );										// ３桁区切り（”、”挿入）
				Str_Set5(															// -----印字ﾃﾞｰﾀ編集-----
							cEditwk1,												// データ１："(内税"X"％対象額"
							"",														// データ２：なし
							cMnydata,												// データ３：内税対象額
							"円) ",													// データ４："円) "
							pri_kind												// 印字先ﾌﾟﾘﾝﾀ
						);
				edit_cnt ++;														// 印字行加算
				break;

			default:																// その他（印字項目番号ｴﾗｰ）
				break;
		}

		prn_no ++;																	// 次項目へ

		// 印字するcaseが最大まで加算されたら終わり
		if( prn_no >= primax ){
			break;																	// 終了
		}
	}
	return ( edit_cnt );
}
// GG129000(E) H.Fujinaga 2022/12/08 ゲート式車番チケットレスシステム対応（インボイス対応）
// GG129000(S) H.Fujinaga 2022/12/05 ゲート式車番チケットレスシステム対応（QR駐車券対応）
#define QR_VERSION_MAX			14
const uchar	QrVersionSel[QR_VERSION_MAX] =
	{
		21,			// V1
		25,			// V2
		29,			// V3
		33,			// V4
		37,			// V5
		41,			// V6
		45,			// V7
		49,			// V8
		53,			// V9
		57,			// V10
		61,			// V11
		65,			// V12
		69,			// V13
		73,			// V14
	};

uchar Prn_edit_qrcode( Receipt_data *Ryousyuu )
{
	ushort	dot;
	char	qr_wk[64];
	uchar	sel, gyou;
	long	param;
	uchar	version;
	uchar	crc_wk[2];
// GG129000(S) M.Fujikawa 2023/04/27 ゲート式車番チケットレスシステム対応　QRコード駐車券の難読化対応（駐車券の暗号化部分をASCII変換）
	uchar	i;
	char	qr_wk2[64];
	uchar	QRrev = prm_get(COM_PRM, S_RTP, 56, 1, 1);		// QR駐車券Rev
	ushort	DataLen;
// GG129000(E) M.Fujikawa 2023/04/27 ゲート式車番チケットレスシステム対応　QRコード駐車券の難読化対応（駐車券の暗号化部分をASCII変換）
	QRTICKET_INFO *qrinfo = &Ryousyuu->QrTicketInfo;

	dot = 0;
	sel = 3;															// セルサイズ
	version = 9;														// バージョン
	param = 20;															// クワイエットゾーン(上余白)　	0～256：ドット数　257～：自動

	Feed_set( R_PRI, param );											// 上余白

	memset( cTmp1, 0, sizeof(cTmp1) );									// QRコード本体格納エリア初期化
	memset( cTmp2, 0, sizeof(cTmp2) );									// 暗号化対象データ格納エリア初期化
	memset( qr_wk, 0, sizeof(qr_wk) );									// QRコードデータ編集専用エリア初期化

	// ヘッダエリアの値セット(暗号化なし)
	// セットする値は在車情報に依存しないためすべて固定値とする(処理は項目毎に分ける)。
	memset(cTmp1, 0x30, 70);											// 先頭70Byte「0」固定
	strcat(cTmp1, "DCENTER_QR");										// 識別文字セット
	strcat(cTmp1, "10002");												// QRコードIDセット
// GG129000(S) M.Fujikawa 2023/04/27 ゲート式車番チケットレスシステム対応　QRコード駐車券の難読化対応（駐車券の暗号化部分をASCII変換）
//	strcat(cTmp1, "00001");												// フォーマットRev№セット
	switch( QRrev ){
		case 1:
			strcat(cTmp1, "00001");												// フォーマットRev№セット
			break;
		
		case 2:
		default:	// 範囲外は最新Rev
			strcat(cTmp1, "00002");												// フォーマットRev№セット
			break;
	}
// GG129000(E) M.Fujikawa 2023/04/27 ゲート式車番チケットレスシステム対応　QRコード駐車券の難読化対応（駐車券の暗号化部分をASCII変換）
	strcat(cTmp1, "1");													// 暗号化方式セット(する)
	strcat(cTmp1, "0");													// 予備エリア

	// データエリアの値セット(暗号化あり)
	// 入庫時刻セット
	sprintf(
				qr_wk,
				"%04d%02d%02d%02d%02d%02d",								// 編集ﾌｫｰﾏｯﾄ："yyyymmddhhmmss"
				Ryousyuu->TInTime.Year,									// 年ﾃﾞｰﾀ
				Ryousyuu->TInTime.Mon,									// 月ﾃﾞｰﾀ
				Ryousyuu->TInTime.Day,									// 日ﾃﾞｰﾀ
				Ryousyuu->TInTime.Hour,									// 時ﾃﾞｰﾀ
				Ryousyuu->TInTime.Min,									// 分ﾃﾞｰﾀ
				Ryousyuu->TInTime_Sec									// 秒ﾃﾞｰﾀ
			);
	strcpy(cTmp2, qr_wk);												// 作成した文字列を暗号化用エリアへ

	// 駐車場№セット
	memset( qr_wk, 0, sizeof(qr_wk) );									// QRコードデータ編集専用エリア初期化
	sprintf( qr_wk, "%06d", CPrmSS[S_SYS][1]);							// 駐車場№は応答データに無いため、設定から参照
	strcat(cTmp2, qr_wk);												// 作成した文字列を暗号化用エリアへ

	// 発券機№セット
	memset( qr_wk, 0, sizeof(qr_wk) );									// QRコードデータ編集専用エリア初期化
	memcpy( &qr_wk[0], &qrinfo->EntryMachineNo[0], 3 );					// 受信した発券機№(入庫機械№)をセット
	strcat(cTmp2, qr_wk);												// 作成した文字列を暗号化用エリアへ

	// 駐車券№セット
	memset( qr_wk, 0, sizeof(qr_wk) );									// QRコードデータ編集専用エリア初期化
	memcpy( &qr_wk[0], &qrinfo->ParkingTicketNo[0], 6 );				// 精算データ内のカード情報から駐車場№抽出
	strcat(cTmp2, qr_wk);												// 作成した文字列を暗号化用エリアへ

	// 車番チケットレス連動有無セット
	memset( qr_wk, 0, sizeof(qr_wk) );									// QRコードデータ編集専用エリア初期化
	memcpy( &qr_wk[0], &qrinfo->TicketLessMode[0], 1 );					// 連動有無
	strcat(cTmp2, qr_wk);												// 作成した文字列を暗号化用エリアへ

	// 予備エリアセット(暗号化調整用)
	memset( qr_wk, 0, sizeof(qr_wk) );									// QRコードデータ編集専用エリア初期化
	strcat(qr_wk, "00");
	strcat(cTmp2, qr_wk);												// 作成した文字列を暗号化用エリアへ

	// 暗号化
	memset( qr_wk, 0, sizeof(qr_wk) );									// QRコードデータ編集専用エリア初期化(暗号化結果データ格納に使用)
	// 暗号化エリアは32バイト固定のため、パディング無しで暗号化する
	EncryptWithKeyAndIV_NoPadding(CRYPT_KEY_PAYEDQR, (uchar*)&cTmp2[0], (uchar*)&qr_wk[0], PRI_QR_AESSIZE);
	// 暗号化後文字列にnullが入る場合strcatでは最後まで結合できないため、暗号化文字列セットにはmemcpyを使用する
// GG129000(S) M.Fujikawa 2023/09/28 ゲート式車番チケットレスシステム対応　QRコード駐車券の難読化対応（駐車券の暗号化部分をASCII変換）
//	memcpy(&cTmp1[92], qr_wk, PRI_QR_AESSIZE);							// 暗号化したデータをヘッダエリアと結合
//
//	// CRC算出
//	memset( qr_wk, 0, sizeof(qr_wk) );									// QRコードデータ編集専用エリア初期化(CRC計算結果格納に使用)
//	crc_ccitt( (ushort)PRI_QR_DATASIZE, (uchar *)cTmp1, (uchar *)crc_wk, (uchar)R_SHIFT );
//	sprintf( qr_wk, "%02x%02x", crc_wk[1], crc_wk[0] );					// 計算したCRCを文字列変換
//	memcpy(&cTmp1[124], qr_wk, 4);										// CRC計算結果を結合(QRコードデータ本体完成)
	switch( QRrev ){
		case 1:
			memcpy(&cTmp1[92], qr_wk, PRI_QR_AESSIZE);							// 暗号化したデータをヘッダエリアと結合

			// CRC算出
			memset( qr_wk, 0, sizeof(qr_wk) );									// QRコードデータ編集専用エリア初期化(CRC計算結果格納に使用)
			crc_ccitt( (ushort)PRI_QR_DATASIZE, (uchar *)cTmp1, (uchar *)crc_wk, (uchar)R_SHIFT );
			sprintf( qr_wk, "%02x%02x", crc_wk[1], crc_wk[0] );					// 計算したCRCを文字列変換
			memcpy(&cTmp1[124], qr_wk, 4);										// CRC計算結果を結合(QRコードデータ本体完成)
			DataLen = PRI_QR_DATASIZE + 4;										// データ長
			break;
		
		case 2:
		default:
			for(i=0;i<PRI_QR_AESSIZE;i++){
				hxtoas((uchar*)&qr_wk2[i*2], (uchar)qr_wk[i]);
			}
			memcpy(&cTmp1[PRI_QR_HEADERSIZE], qr_wk2, PRI_QR_AESSIZE*2);						// 暗号化してASCII化したデータをヘッダエリアと結合

			// CRC算出
			memset( qr_wk, 0, sizeof(qr_wk) );									// QRコードデータ編集専用エリア初期化(CRC計算結果格納に使用)
			crc_ccitt( (ushort)PRI_QR_DATASIZEAS, (uchar *)cTmp1, (uchar *)crc_wk, (uchar)R_SHIFT );
			sprintf( qr_wk, "%02x%02x", crc_wk[1], crc_wk[0] );					// 計算したCRCを文字列変換
			memcpy(&cTmp1[156], qr_wk, 4);										// CRC計算結果を結合(QRコードデータ本体完成)
			DataLen = PRI_QR_DATASIZEAS + 4;									// データ長
			break;
	}
// GG129000(E) M.Fujikawa 2023/09/28 ゲート式車番チケットレスシステム対応　QRコード駐車券の難読化対応（駐車券の暗号化部分をASCII変換）

	/* センタリング = 1*/
	PCMD_CENTER( R_PRI );

	dot += (QrVersionSel[version-1] * sel);

	QrCode_set( R_PRI,
				sel,													// モジュールサイズ
				cTmp1,													// データ
// GG129000(S) M.Fujikawa 2023/04/27 ゲート式車番チケットレスシステム対応　QRコード駐車券の難読化対応（駐車券の暗号化部分をASCII変換）
//				(PRI_QR_DATASIZE + 4)									// データ長
				DataLen													// データ長
// GG129000(E) M.Fujikawa 2023/04/27 ゲート式車番チケットレスシステム対応　QRコード駐車券の難読化対応（駐車券の暗号化部分をASCII変換）
	);

	param = 20;															// クワイエットゾーン(下余白)　	0～256：ドット数　257～：自動

	Feed_set( R_PRI, param );											// 下余白

	gyou = dot / FONT_A_N_HDOT;											// 行換算

	GyouCnt_r += gyou;													// 送信済み印字ﾃﾞｰﾀ行数（ﾚｼｰﾄ）＋１
	return gyou;														// とりあえず1行印字固定
}

/*[]-----------------------------------------------------------------------[]*/
/*|		QR駐車券編集処理											|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	MODULE NAME		:	RYOUSYUU_edit_PAYQR( *Rmonlog, pri_kind )			|*/
/*|	PARAMETER		:	Receipt_data *Ryousyuu	=	精算データ				|*/
/*|						uchar		pri_kind	=	印字先ﾌﾟﾘﾝﾀ				|*/
/*|	RETURN VALUE	:	void												|*/
/*|																			|*/
/*[]-----------------------------------------------------------------------[]*/
/*|	Date	:	2022-08-08													|*/
/*|	Update	:																|*/
/*[]------------------------------------- Copyright(C) 2014 AMANO Corp.----[]*/
uchar	RYOUSYUU_edit_PAYQR( Receipt_data *Ryousyuu, uchar pri_kind, PRN_PROC_DATA *p_proc_data)
{
	uchar	edit_cnt = 0;		// 編集行数

	// QRコード印字条件判定処理
// GG129000(S) H.Fujinaga 2022/12/27 ゲート式車番チケットレスシステム対応（QR読取画面対応）
	if( Ryousyuu->CarSearchFlg == 2 && Ryousyuu->shubetsu == 0)
	{
		// QR駐車券で精算時、QRコードを印字しない
		p_proc_data->Prn_no_data1 = 0;						// 割引券ﾃﾞｰﾀ番号ﾘｾｯﾄ
		p_proc_data->Prn_no_data2 = 0;						// 次編集項目番号ﾘｾｯﾄ
		return 0;
	}
// GG129000(E) H.Fujinaga 2022/12/27 ゲート式車番チケットレスシステム対応（QR読取画面対応）
// GG129000(S) M.Fujikawa 2023/09/28 ゲート式車番チケットレスシステム対応　QR駐車券のパラメータ設定
//	if( prm_get(COM_PRM, S_LCD, 139, 1, 1) == 1 )
	if( prm_get(COM_PRM, S_RTP, 57, 1, 1) == 1 )
// GG129000(E) M.Fujikawa 2023/09/28 ゲート式車番チケットレスシステム対応　QR駐車券のパラメータ設定
	{
		// 在車検索方法が車番の場合、QRコードを印字しない
		if( Ryousyuu->CarSearchFlg != 1 )
		{
			p_proc_data->Prn_no_data1 = 0;						// 割引券ﾃﾞｰﾀ番号ﾘｾｯﾄ
			p_proc_data->Prn_no_data2 = 0;						// 次編集項目番号ﾘｾｯﾄ
			return 0;
		}
	}
// GG129000(S) M.Fujikawa 2023/09/28 ゲート式車番チケットレスシステム対応　QR駐車券のパラメータ設定
//	else if( prm_get(COM_PRM, S_LCD, 139, 1, 1) == 2 )
	else if( prm_get(COM_PRM, S_RTP, 57, 1, 1) == 2 )
// GG129000(E) M.Fujikawa 2023/09/28 ゲート式車番チケットレスシステム対応　QR駐車券のパラメータ設定
	{
		// 入庫時車番情報取得に成功していた場合、QRコードを印字しない
		if( (Ryousyuu->MediaKind2 == CARD_TYPE_CAR_NUM) && (Ryousyuu->MediaCardNo2 != 0) )
		{
			// 車番情報ありの場合、各項目の値が0になっていないか確認する
			// すべて値があれば情報取得成功と判断し、印字しない
			if( ((Ryousyuu->MediaCardNo2[0] != 0x30) || (Ryousyuu->MediaCardNo2[1] != 0x30))
			 &&	((Ryousyuu->MediaCardNo2[2] != 0x30) || (Ryousyuu->MediaCardNo2[3] != 0x30) || (Ryousyuu->MediaCardNo2[4] != 0x30))
			 &&	((Ryousyuu->MediaCardNo2[5] != 0x30) || (Ryousyuu->MediaCardNo2[6] != 0x30))
			 &&	((Ryousyuu->MediaCardNo2[7] != 0x30) || (Ryousyuu->MediaCardNo2[8] != 0x30) || (Ryousyuu->MediaCardNo2[9] != 0x30) || (Ryousyuu->MediaCardNo2[10] != 0x30)) )
			{
				p_proc_data->Prn_no_data1 = 0;					// 割引券ﾃﾞｰﾀ番号ﾘｾｯﾄ
				p_proc_data->Prn_no_data2 = 0;					// 次編集項目番号ﾘｾｯﾄ
				return 0;
			}
		}
	}
// GG129000(S) M.Fujikawa 2023/09/28 ゲート式車番チケットレスシステム対応　QR駐車券のパラメータ設定
//	else if( (prm_get(COM_PRM, S_LCD, 139, 1, 1) >= 3) || (prm_get(COM_PRM, S_LCD, 139, 1, 1) == 1) )
// GG129000(S) A.Shirai 2023/9/22 ゲート式車番チケットレスシステム対応（詳細設計#5696：#7043入庫時刻検索で精算完了しても領収証が自動発行されない）
//	else if( (prm_get(COM_PRM, S_RTP, 57, 1, 1) >= 3) || (prm_get(COM_PRM, S_RTP, 57, 1, 1) == 1) )
	else if(prm_get(COM_PRM, S_RTP, 57, 1, 1) >= 3)
// GG129000(E) A.Shirai 2023/9/22 ゲート式車番チケットレスシステム対応（詳細設計#5696：#7043入庫時刻検索で精算完了しても領収証が自動発行されない）
// GG129000(E) M.Fujikawa 2023/09/28 ゲート式車番チケットレスシステム対応　QR駐車券のパラメータ設定
	{
		// QRコード発行条件設定が3以上の場合、または1(予約)の場合、QRコードは印字しない。
		return 0;
	}
// GG129000(S) M.Fujikawa 2023/09/28 ゲート式車番チケットレスシステム対応　QR駐車券のパラメータ設定
//	else if( prm_get(COM_PRM, S_LCD, 139, 1, 2) >= 2 )
	else if( prm_get(COM_PRM, S_RTP, 57, 1, 2) >= 2 )
// GG129000(E) M.Fujikawa 2023/09/28 ゲート式車番チケットレスシステム対応　QR駐車券のパラメータ設定
	{
		// QRコード自動発行設定が2以上の場合、QRコードは印字しない。
		return 0;
	}

	// 上記の条件に当て嵌まらなかったため、QRコード発行処理を行う

	switch(p_proc_data->Prn_no_data1){
	case 0:														// QRコードタイトル(文字数が多いため倍角は使用しない)
		PCMD_LEFT( pri_kind );									// [位置揃え(左揃え)]

		PrnStr( SikiriLine_Prn[0], pri_kind );					// 仕切り行(＝)印字ﾃﾞｰﾀ登録
		edit_cnt++;

		Prn_edit_space( pri_kind );								// 「ﾌｫﾝﾄＡ縦ｻｲｽﾞ（3mm)＋設定されている改行量」の改行を１回行う

		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]
// GG129000(S) 車番チケットレス（詳細設計#5351：領収証のQRコードの名称を「駐車券」とする／しないの設定を設ける）
		if(prm_get(COM_PRM, S_RTP, 2, 1, 4) == 1){
			// 1:駐車券名称使用しない
		}else{
			// x:駐車券名称使用する
// GG129000(E) 車番チケットレス（詳細設計#5351：領収証のQRコードの名称を「駐車券」とする／しないの設定を設ける）
		PCMD_EMPHSET( pri_kind );								// 強調印字(指定)
		PrnFontSize( FONT_K_YOKOBAI, pri_kind );				// ﾌｫﾝﾄ指定（漢字横倍角）
		PrnStr( QR_KoteiMsg[3], pri_kind );	
		PCMD_EMPHCLR( pri_kind );								// 強調印字(解除)
		edit_cnt++;

		PrnFontSize( FONT_K_NML, pri_kind );					// 漢字ﾌｫﾝﾄ指定（通常）
		PrnFontSize( FONT_A_NML, pri_kind );					// ﾌｫﾝﾄＡ指定（通常）
// GG129000(S) 車番チケットレス（詳細設計#5351：領収証のQRコードの名称を「駐車券」とする／しないの設定を設ける）
		}
// GG129000(E) 車番チケットレス（詳細設計#5351：領収証のQRコードの名称を「駐車券」とする／しないの設定を設ける）
		p_proc_data->Prn_no_data1++;

		break;

	case 1:														// QRコード本体印字
// GG129000(S) M.Fujikawa 2023/02/20 ゲート式車番チケットレスシステム対応（QR駐車券対応）
//		Prn_edit_space( pri_kind );								// 「ﾌｫﾝﾄＡ縦ｻｲｽﾞ（3mm)＋設定されている改行量」の改行を１回行う
// GG129000(E) M.Fujikawa 2023/02/20 ゲート式車番チケットレスシステム対応（QR駐車券対応）
		edit_cnt = Prn_edit_qrcode( Ryousyuu );
		/* 改行 */
// GG129000(S) M.Fujikawa 2023/02/20 ゲート式車番チケットレスシステム対応（QR駐車券対応）
//		Prn_edit_space( pri_kind );								// 「ﾌｫﾝﾄＡ縦ｻｲｽﾞ（3mm)＋設定されている改行量」の改行を１回行う
// GG129000(E) M.Fujikawa 2023/02/20 ゲート式車番チケットレスシステム対応（QR駐車券対応）
		p_proc_data->Prn_no_data1++;

		break;

	case 2:														// 固定メッセージ
		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]

// GG129000(S) 車番チケットレス（詳細設計#5351：領収証のQRコードの名称を「駐車券」とする／しないの設定を設ける）
//		PrnStr( QR_KoteiMsg[0], pri_kind );	
		// QRコード名称取得
		if(prm_get(COM_PRM, S_RTP, 2, 1, 4) == 1){
			if(prm_get(COM_PRM, S_RTP, 2, 1, 3) == 1){
				// 1:「この領収書を」
				PrnStr( QR_KoteiMsg[5], pri_kind );
			}else{
				// x:「この領収証を」
				PrnStr( QR_KoteiMsg[4], pri_kind );
			}
		}else{
			// 「この駐車券を」
			PrnStr( QR_KoteiMsg[0], pri_kind );
		}
// GG129000(E) 車番チケットレス（詳細設計#5351：領収証のQRコードの名称を「駐車券」とする／しないの設定を設ける）
		edit_cnt++;

		PrnStr( QR_KoteiMsg[1], pri_kind );	
		edit_cnt++;

		PCMD_CENTER( pri_kind );								// [位置揃え(ｾﾝﾀﾘﾝｸﾞ)]

		Prn_edit_space( pri_kind );								// 「ﾌｫﾝﾄＡ縦ｻｲｽﾞ（3mm)＋設定されている改行量」の改行を１回行う

		PrnStr( QR_KoteiMsg[2], pri_kind );	
		edit_cnt++;

		/* 印字終了 */
		p_proc_data->Prn_no_data1 = 0;							// 割引券ﾃﾞｰﾀ番号ﾘｾｯﾄ
		p_proc_data->Prn_no_data2 = 0;							// 次編集項目番号ﾘｾｯﾄ
		break;
	}

	return edit_cnt;
}
// GG129000(E) H.Fujinaga 2022/12/05 ゲート式車番チケットレスシステム対応（QR駐車券対応）

// GG129001(S) データ保管サービス対応（登録番号をセットする）
#define	PRI_FOOT	(1 << 0)		// フッター
#define	PRI_HEAD	(1 << 1)		// ヘッダー
//[]----------------------------------------------------------------------[]
//	@brief			登録番号取得
//[]----------------------------------------------------------------------[]
//	@return			ret				編集行数
//[]----------------------------------------------------------------------[]
//	@date			Create	:	2024/05/10
//					Update	:
//[]------------------------------------- Copyright(C) 2024 AMANO Corp.---[]
void PrnGetRegistNum(void)
{
	ushort		i;
	ushort		f_pri_set;			// b0:フッター b1:ヘッダー
	uchar		gyou_cnt;			// 行数
	uchar		data_cnt;			// 文字数
	uchar		*pTstr;
	short		ret = 1;

	memset(RegistNum, 0, sizeof(RegistNum));

	// 領収証プリント設定から印字内容を検索
	f_pri_set = 0;
	for (i = 0; i < 50; i++) {
		switch (prm_get(COM_PRM, S_RTP, (short)(4 + i), 3, 1)) {
		case 2:			// ヘッダー
			f_pri_set |= PRI_HEAD;
			break;
		case 28:		// フッター
			f_pri_set |= PRI_FOOT;
			break;
		default:
			break;
		}
	}
	// レシートカット時の印字設定をチェック
	switch (prm_get(COM_PRM, S_PRN, 3, 1, 1)) {
	case 2:				// ヘッダーを印字してカット
	case 3:				// ロゴ＋ヘッダーを印字してカット
		f_pri_set |= PRI_HEAD;
		break;
	default:
		break;
	}

	// フッター
	if (Footer_Rsts == 0) {
		// 行数取得
		gyou_cnt = (uchar)prm_get(COM_PRM, S_PRN, 4, 2, 1);
		if (gyou_cnt > HEAD_GYO_MAX) {
			gyou_cnt = HEAD_GYO_MAX;
		}
		for (i = 0; i < gyou_cnt; i++) {
			// 文字数取得
			data_cnt = (uchar)prm_get(COM_PRM, S_PRN, (short)(9+i), 2, 1);
			if (data_cnt > FONTA_MAX_COL) {
				data_cnt = FONTA_MAX_COL;
			}
			// '登録番号'と'T'+13桁の数字検索
			memset(cEditwk1, 0, sizeof(cEditwk1));
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cTmp1, &Footer_Data[i], (size_t)data_cnt);
			ret = Search_Registry_Number(cTmp1, data_cnt, cEditwk1, cEditwk2);
			if (ret == 0) {
				if ((f_pri_set & PRI_FOOT) == 0) {
					// フッター印字設定なし
					ret = 4;
				}
				break;
			}
		}
	}

	// ヘッダー
	if (ret != 0 && Header_Rsts == 0) {
		// 行数取得
		gyou_cnt = (uchar)prm_get(COM_PRM, S_PRN, 4, 2, 3);
		if (gyou_cnt > HEAD_GYO_MAX) {
			gyou_cnt = HEAD_GYO_MAX;
		}
		for (i = 0; i < gyou_cnt; i++) {
			// 文字数取得
			data_cnt = (uchar)prm_get(COM_PRM, S_PRN, (short)(5+i), 2, 1);
			if (data_cnt > FONTA_MAX_COL) {
				data_cnt = FONTA_MAX_COL;
			}
			// '登録番号'と'T'+13桁の数字検索
			memset(cEditwk1, 0, sizeof(cEditwk1));
			memset(cEditwk2, 0, sizeof(cEditwk2));
			memcpy(cTmp1, &Header_Data[i], (size_t)data_cnt);
			ret = Search_Registry_Number(cTmp1, data_cnt, cEditwk1, cEditwk2);
			if (ret == 0) {
				if ((f_pri_set & PRI_HEAD) == 0) {
					// ヘッダー印字設定なし
					ret = 4;
				}
				break;
			}
		}
	}

	if (ret == 0) {
		// 'T'+13桁の数字取得成功

		// Tを検索
		i = 0;
		if (strstr(cEditwk2, "Ｔ") != NULL) {
			pTstr = (uchar*)strstr(cEditwk2, "Ｔ");
			pTstr += 2;
			RegistNum[i++] = 'T';
		}
		else if (strstr(cEditwk2, "T") != NULL) {
			pTstr = (uchar*)strstr(cEditwk2, "T");
			pTstr++;
			RegistNum[i++] = 'T';
		}
		else {
			return;
		}

		// 13桁の数字をコピー
		while (pTstr != NULL) {

			if (rangechk(0x30, 0x39, *pTstr)) {
				// 半角数字
				RegistNum[i++] = (uchar)(*pTstr);
			}
			else if (*pTstr == 0x20 || *pTstr == 0x2d) {
				// 半角スペース、半角ハイフン
			}
			else if (*pTstr == 0x82) {
				pTstr++;
				if (rangechk(0x4f, 0x58, *pTstr)) {
					// 全角数字→半角数字に変換
					RegistNum[i++] = (uchar)(*pTstr - 0x4f + 0x30);
				}
				else {
					break;
				}
			}
			else if (*pTstr == 0x81) {
				pTstr++;
				if (*pTstr == 0x40 || *pTstr == 0x7c ||
					rangechk(0x5b, 0x5d, *pTstr)) {
					// 全角スペース、全角マイナス、全角ハイフン
				}
				else {
					break;
				}
			}
			else {
				break;
			}

			if (i >= sizeof(RegistNum)) {
				break;
			}

			pTstr++;
		}
	}
}
// GG129001(E) データ保管サービス対応（登録番号をセットする）
